<?php
namespace App\Http\Controllers;
use App\Http\Controllers\Tools\AppUtils;
use App\Http\Controllers\Tools\ExcelUtils;
use App\Http\Controllers\Tools\Utils;
use Illuminate\Http\Request;
use Illuminate\Support\Facades\DB;
use Illuminate\Support\Facades\Input;
use Mockery\CountValidator\Exception;

class InvoiceController extends Controller
{
    private $request;
    private $app_id;
    public function __construct(Request $request)
    {
        $this->request = $request;
        $this->app_id = AppUtils::getAppID();
    }

    //获取发票信息列表
    public function getInvoiceInfo(Request $request) {
        $app_id = $this->app_id;
        $where = "app_id = '{$app_id}' ";
        //得到数据
        $info_list =\DB::connection('mysql_chain')->table('t_invoice')
            ->whereRaw($where)
            ->paginate(10);

        return view("admin.invoiceManage.invoiceList",[
            'data' => $info_list,
        ]);
    }

}





