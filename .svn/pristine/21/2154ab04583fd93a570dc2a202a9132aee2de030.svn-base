var newFormFlag=false;$(function(){init();newCoupon()});function newCoupon(){var e=0;var a=[];var t=[];var s;var o;var r;var n;var l=[];var c=0;var u;var d;var p;var h;var f;var v;var m;var b=$.trim($('[name="count"]').val());n="0";m=$(".formContent").data("page_type");var g=GetQueryString("id");console.log(g);if(GetQueryString("type")==0||GetQueryString("type")==1){v=GetQueryString("type");console.log("shang")}else{v=$(".plusArea").attr("data-plus-type");console.log("xia")}$(".addedList .addedItem").each(function(){t.push($(this).data("id"))});console.log(v);aliveTimeConfig(".dateSetInput");+function(){if(v==0){$(".isGoods").attr("style","")}else{$(".isGoods").attr("style","display:none")}$(".remindTop a").on("click",function(){var e="/coupon/close/"+$(this).siblings("span").attr("data-place");$(".remindTop").remove();$.ajax({type:"GET",url:e,data:{},success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg)}else{baseUtils.show.blueTip(e.msg)}},error:function(e,a,t){console.log(e);console.error(t);console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$(".plusArea").on("click",function(){console.log("plusArea test");$(".initList").html();$('.addBox [type="checkBox"]').removeAttr("checked");$("#addModal").fadeIn(200)});$(".closePop").on("click",function(){$("#addModal").fadeOut(200)});$("div.tab a").on("click",function(){$(this).addClass("clicked").siblings().removeClass("clicked");e=$(this).attr("data-type");console.log(e);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}});$("#forTab").on("click",function(){var a=$("#kwContent").val();$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",data:{state:e,kw:a},success:function(a){$(".initList").html(a);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}},error:function(e,a,t){console.log(e);console.error(t);console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$("input.func").on("click",function(){console.log("teste");$(this).addClass("funcClick").siblings().removeClass("funcClick");console.log($(this).val());if($(this).val()=="用户领取"){$(".aboutGet").show();n="0"}else{$(".aboutGet").hide();$(".aboutGet #putOn").removeAttr("checked");n="1"}});$("#add").on("click",function(){var e=[];var a=[];var s=[];var o=[];$('#tab_0 input[type="checkbox"]:checked').each(function(){e.push($(this).val());var a=[];a.push($(this).attr("data-name"));a.push($(this).attr("data-img"));a.push("单品");a.push($(this).val());a.push($(this).attr("data-style"));o.push(a)});$('#tab_1 input[type="checkbox"]:checked').each(function(){a.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("专栏");e.push($(this).val());e.push($(this).attr("data-style"));o.push(e)});$('#tab_2 input[type="checkbox"]:checked').each(function(){s.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("会员");e.push($(this).val());e.push($(this).attr("data-style"));o.push(e)});console.log(e);var r=e.concat(s,a);console.log(t);if(r==""){baseUtils.show.redTip("请选择要添加的商品。");return false}if(_(t,r)==1){baseUtils.show.redTip("请勿重复选择添加的商品。");return false}else{for(i=0;i<o.length;i++){$(".addedList").append("<div data-tab="+o[i][4]+' class="addedItem" data-id="'+o[i][3]+'"><span>'+o[i][2]+'</span><img src="'+o[i][1]+'" alt="'+o[i][0]+'"><span class="spanCon">'+o[i][0]+'</span><button type="button" class="close closeItem">×</button></div>')}t=t.concat(r);$("#addModal").fadeOut(200)}});$(".addedList").on("click",".closeItem",function(){$(this).prev().prev().click();$(this).parent().remove();var e=$(this).parent().attr("data-id");console.log(e);t.remove(e);console.log(t)});$("#submitList").on("click",function(){console.log("ceshi"+newFormFlag);if(newFormFlag){return false}newFormFlag=true;l=[];$(".addedItem").each(function(){l.push($(this).attr("data-id")+"--"+$(this).attr("data-tab"))});console.log(l);o=$.trim($('[name="title"]').val());r=Math.round($.trim($('[name="price"]').val())*100);c=Math.round(parseFloat($('[name="re_price"]').val())*100);console.log("isTen",c);u=$.trim($('[name="valid_at"]').val());d=$.trim($('[name="invalid_at"]').val());p=$.trim($('[name="count"]').val());h=$('[name="receive_rule"]').val();if($('[name="extension"]').prop("checked")){f=1}else{f=0}s={title:o,price:r,receive_rule:h,valid_at:u,invalid_at:d,require_price:c,count:p,spread_type:n,is_show:f,resource:l,type:v};if(g){s.id=g}console.log(s.price);console.log(s.require_price);if(m==0&&k(s,b)){w("/coupon/add",s)}else if(m==1&&k(s,b)){console.log("check is ture");w("/coupon/editCoupon",s)}})}();function k(e,a){newFormFlag=false;if($formCheck.emptyString(e.title)){baseUtils.show.redTip("优惠券名称不能为空！");console.log(newFormFlag);return false}if($formCheck.emptyString(e.price)){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(parseFloat(e.count)<parseFloat(a)){baseUtils.show.redTip("修改发行量只能增不能减！");return false}if($formCheck.emptyString(e.valid_at)&&$formCheck.emptyString(e.invalid_at)){baseUtils.show.redTip("有效期起止时间不能为空！");return false}if($formCheck.emptyString(e.count)){baseUtils.show.redTip("发行数量不能为空！");return false}if(!$formCheck.checkTime(e.valid_at)){baseUtils.show.redTip("有效期开始时间格式错误");return false}if(!$formCheck.checkTime(e.invalid_at)){baseUtils.show.redTip("有效期结束时间格式错误");return false}if(!e.require_price){baseUtils.show.redTip("使用条件不能为空！");return false}if(!$formCheck.checkTimeOrder(e.valid_at,e.invalid_at)){baseUtils.show.redTip("有效期结束时间必须大于开始时间！");return false}if(!$formCheck.checkNum(e.price)){baseUtils.show.redTip("您的面额输入格式有误，请重新输入！");return false}if(!$formCheck.checkNum(e.count)){baseUtils.show.redTip("您的发行量输入格式有误，请重新输入！");return false}if(e.require_price==NaN||e.require_price==null){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(e.price>=e.require_price){baseUtils.show.redTip("优惠券面额要小于使用条件！");return false}newFormFlag=true;return true}function w(e,a){$.ajax(e,{type:"POST",dataType:"JSON",data:a,success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg);window.location.href="/coupon/index"}else if(e.code==-1){baseUtils.show.redTip(e.msg);newFormFlag=false}},error:function(e,a,t){newFormFlag=false;hideLoading();console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function _(e,a){var t=0;for(var i=0;i<e.length;i++){if(a.indexOf(e[i])!=-1){t=1}}return t}Array.prototype.remove=function(e){var a=this.indexOf(e);if(a>-1){this.splice(a,1)}}}function init(){$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",success:function(e){$(".initList").html(e)},error:function(e,a,t){console.log(e);console.error(t);console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function clearNoNum(e){e.value=e.value.replace(/[^\d.]/g,"");e.value=e.value.replace(/\.{2,}/g,".");e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");if(e.value.indexOf(".")<0&&e.value!=""){e.value=parseFloat(e.value)}}function setCondition(){$(".theTen").html(parseFloat($('[name="price"]').val())+.1)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld0Zvcm0uanMiXSwibmFtZXMiOlsibmV3Rm9ybUZsYWciLCIkIiwiaW5pdCIsIm5ld0NvdXBvbiIsInRhYlN0YXR1cyIsImZvcm1TdGF0dXMiLCJoYXNDaG9pY2UiLCJhbGxGb3JtTXNnIiwiY291cG9uTmFtZSIsImNvdXBvblByaWNlIiwicG9wV2F5IiwiZ29vZHNSYW5nZSIsImlzVGVuIiwidGltZVN0YXJ0IiwidGltZUVuZCIsInBvcE51bSIsInBlb3BsZUxpbSIsImlzVG9EZXRhaWwiLCJ0eXBlIiwicGFnZV90eXBlIiwiY21wIiwidHJpbSIsInZhbCIsImRhdGEiLCJlZGl0SWQiLCJHZXRRdWVyeVN0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJhdHRyIiwiZWFjaCIsInB1c2giLCJ0aGlzIiwiYWxpdmVUaW1lQ29uZmlnIiwib24iLCJ1cmwiLCJzaWJsaW5ncyIsInJlbW92ZSIsImFqYXgiLCJzdWNjZXNzIiwiY29kZSIsImJhc2VVdGlscyIsInNob3ciLCJibHVlVGlwIiwibXNnIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJyZWRUaXAiLCJodG1sIiwicmVtb3ZlQXR0ciIsImZhZGVJbiIsImZhZGVPdXQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaGlkZSIsImt3IiwiZGF0YVR5cGUiLCJzdGF0ZSIsImFyclNpbmdsZSIsImFyclBybyIsImFyck51bSIsInN0YXRlQWxsIiwibmV3QXJyIiwiY29uY2F0IiwidW5pcXVlIiwiaSIsImxlbmd0aCIsImFwcGVuZCIsInByZXYiLCJjbGljayIsInBhcmVudCIsImRlbGV0ZUl0ZW0iLCJNYXRoIiwicm91bmQiLCJwYXJzZUZsb2F0IiwicHJvcCIsInRpdGxlIiwicHJpY2UiLCJyZWNlaXZlX3J1bGUiLCJ2YWxpZF9hdCIsImludmFsaWRfYXQiLCJyZXF1aXJlX3ByaWNlIiwiY291bnQiLCJzcHJlYWRfdHlwZSIsImlzX3Nob3ciLCJyZXNvdXJjZSIsImlkIiwiY2hlY2tGb3JtIiwic3VibWl0Rm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJjaGVja1RpbWUiLCJjaGVja1RpbWVPcmRlciIsImNoZWNrTnVtIiwiTmFOIiwiYWxsbWFnIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiaGlkZUxvYWRpbmciLCJhcnIxIiwiYXJyMiIsIml0ZW0iLCJpbmRleE9mIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJpbmRleCIsInNwbGljZSIsImNsZWFyTm9OdW0iLCJvYmoiLCJ2YWx1ZSIsInJlcGxhY2UiLCJzZXRDb25kaXRpb24iXSwibWFwcGluZ3MiOiJBQUNBLEdBQUlBLGFBQVksS0FDaEJDLEdBQUUsV0FDRUMsTUFDQUMsY0FHSixTQUFTQSxhQUNMLEdBQUlDLEdBQVksQ0FDaEIsSUFBSUMsS0FDSixJQUFJQyxLQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsS0FDSixJQUFJQyxHQUFNLENBQ1YsSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxHQUFJbkIsRUFBRW9CLEtBQUtwQixFQUFFLGtCQUFrQnFCLE1BQ25DWixHQUFPLEdBQ1BTLEdBQVVsQixFQUFFLGdCQUFnQnNCLEtBQUssWUFFakMsSUFBSUMsR0FBT0MsZUFBZSxLQUMxQkMsU0FBUUMsSUFBSUgsRUFDWixJQUFHQyxlQUFlLFNBQVMsR0FBS0EsZUFBZSxTQUFTLEVBQUcsQ0FDdkRQLEVBQUtPLGVBQWUsT0FDcEJDLFNBQVFDLElBQUksYUFDWCxDQUNEVCxFQUFLakIsRUFBRSxhQUFhMkIsS0FBSyxpQkFDekJGLFNBQVFDLElBQUksT0FHaEIxQixFQUFFLHlCQUF5QjRCLEtBQUssV0FDNUJ2QixFQUFVd0IsS0FBSzdCLEVBQUU4QixNQUFNUixLQUFLLFFBRWhDRyxTQUFRQyxJQUFJVCxFQUVaYyxpQkFBZ0Isa0JBQ2YsV0FFRyxHQUFHZCxHQUFNLEVBQUUs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USxNQUFNLElBQ3pFRixHQUFJQyxNQUFRRCxFQUFJQyxNQUFNQyxRQUFRLHlCQUF5QixVQUN2RCxJQUFHRixFQUFJQyxNQUFNUCxRQUFRLEtBQU0sR0FBS00sRUFBSUMsT0FBUSxHQUFHLENBQzNDRCxFQUFJQyxNQUFPckMsV0FBV29DLEVBQUlDLFFBR2pDLFFBQVNFLGdCQUNMakgsRUFBRSxXQUFXZ0QsS0FBSzBCLFdBQVcxRSxFQUFFLGtCQUFrQnFCLE9BQU8iLCJmaWxlIjoibmV3Rm9ybS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNyZWF0IGJ5IEplcnZpc1xyXG52YXIgbmV3Rm9ybUZsYWc9ZmFsc2U7Ly/mlrnms5XplIHlj5jph49cclxuJChmdW5jdGlvbigpe1xyXG4gICAgaW5pdCgpO1xyXG4gICAgbmV3Q291cG9uKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gbmV3Q291cG9uKCl7XHJcbiAgICB2YXIgdGFiU3RhdHVzID0gMDsvL3RhYumAiemhueWNoeeKtuaAgeWIneWni+eKtuaAgTBcclxuICAgIHZhciBmb3JtU3RhdHVzPVtdO1xyXG4gICAgdmFyIGhhc0Nob2ljZT1bXTsvL1RPRE866ICD6JmR5Yiw5ZCO5Y+w5Lyg5YC877yM6ZyA6KaB5pu05Yqg5a6M5ZaE5Yqf6IO9XHJcbiAgICB2YXIgYWxsRm9ybU1zZzsvL+ihqOWNleS/oeaBr+WvueixoVxyXG4gICAgdmFyIGNvdXBvbk5hbWU7Ly/kvJjmg6DliLjlkI3np7BcclxuICAgIHZhciBjb3Vwb25QcmljZTsvL+S8mOaDoOWIuOmdouminVxyXG4gICAgdmFyIHBvcFdheTsvL+WPkeihjOaWueW8j1xyXG4gICAgdmFyIGdvb2RzUmFuZ2U9W107Ly/llYblk4HojIPlm7TmlbDnu4RpZC0tdGFiXHJcbiAgICB2YXIgaXNUZW49MDsvL+S9v+eUqOadoeS7tlxyXG4gICAgdmFyIHRpbWVTdGFydDsvL+W8gOWni+aXtumXtFxyXG4gICAgdmFyIHRpbWVFbmQ7Ly/nu5PmnZ/ml7bpl7RcclxuICAgIHZhciBwb3BOdW07Ly/lj5HooYzph49cclxuICAgIHZhciBwZW9wbGVMaW07Ly/mr4/kurrpmZDpooZcclxuICAgIHZhciBpc1RvRGV0YWlsOy8v5piv5ZCm5oqV5pS+6Iez5ZWG5ZOB6K+m5oOF6aG1XHJcbiAgICB2YXIgdHlwZTsvL+mhtemdouWbnuS8oOaVsCAwLeWVhuWTgSAxLeW6l+mTulxyXG4gICAgdmFyIHBhZ2VfdHlwZTsvL+W9k+WJjemhtemdouaYr+e8lui+kemhtei/mOaYr+WIm+W7uumhtSAgLTDliJvlu7ogIDHnvJbovpFcclxuICAgIHZhciBjbXA9JC50cmltKCQoJ1tuYW1lPVwiY291bnRcIl0nKS52YWwoKSk7Ly/lj5jph4/kuLrnvJbovpHpobXlj5HooYzph4/ml6flgLxcclxuICAgIHBvcFdheT1cIjBcIjtcclxuICAgIHBhZ2VfdHlwZT0kKCcuZm9ybUNvbnRlbnQnKS5kYXRhKFwicGFnZV90eXBlXCIpO1xyXG4gICAgLy/liJ3lp4vljJblt7LmnInmlbDnu4Tlr7nosaFcclxuICAgIHZhciBlZGl0SWQ9R2V0UXVlcnlTdHJpbmcoXCJpZFwiKTtcclxuICAgIGNvbnNvbGUubG9nKGVkaXRJZCk7XHJcbiAgICBpZihHZXRRdWVyeVN0cmluZyhcInR5cGVcIik9PTAgfHwgR2V0UXVlcnlTdHJpbmcoXCJ0eXBlXCIpPT0xICl7Ly/ojrflj5Z0eXBl5YC877yM57yW6L6R6aG15LiO5Yib5bu66aG1XHJcbiAgICAgICAgdHlwZT1HZXRRdWVyeVN0cmluZyhcInR5cGVcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NoYW5nJylcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHR5cGU9JCgnLnBsdXNBcmVhJykuYXR0cignZGF0YS1wbHVzLXR5cGUnKTtcclxuICAgICAgICBjb25zb2xlLmxvZygneGlhJylcclxuICAgIH1cclxuICAgIC8v57yW6L6R6aG15Yid5aeL5YyWaGFzQ2hvaWNl5YC8IFxyXG4gICAgJCgnLmFkZGVkTGlzdCAuYWRkZWRJdGVtJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIGhhc0Nob2ljZS5wdXNoKCQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICB9KVxyXG4gICAgY29uc29sZS5sb2codHlwZSk7XHJcbiAgICAvL+aXpeacn+mAieaLqeWZqOWIneWni+WMliAgICBcclxuICAgIGFsaXZlVGltZUNvbmZpZyhcIi5kYXRlU2V0SW5wdXRcIik7XHJcbiAgICArZnVuY3Rpb24oKXtcclxuICAgICAgICAvL+W9k+WJjeWIm+W7uueahOS8mOaDoOWIuOaYr++8miAwLeWVhuWTgSAxLeW6l+mTulxyXG4gICAgICAgIGlmKHR5cGU9PTApe1xyXG4gICAgICAgICAgICAkKCcuaXNHb29kcycpLmF0dHIoJ3N0eWxlJywnJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICQoJy5pc0dvb2RzJykuYXR0cignc3R5bGUnLCdkaXNwbGF5Om5vbmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/ooajmoLzlpLTpg6jmj5DnpLotLeS4jeWGjeaPkOekulxyXG4gICAgICAgICQoJy5yZW1pbmRUb3AgYScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHVybD0nL2NvdXBvbi9jbG9zZS8nICsgJCh0aGlzKS5zaWJsaW5ncygnc3BhbicpLmF0dHIoJ2RhdGEtcGxhY2UnKTtcclxuICAgICAgICAgICAgJCgnLnJlbWluZFRvcCcpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGRhdGE6e1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGU9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChkYXRhLm1zZylcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoZGF0YS5tc2cpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeGhyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihzdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICQoXCIubG9hZGluZ1NcIikuZmFkZU91dCgzMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOS8mOaDoOWIuOS9v+eUqOiMg+WbtOmZkOWumlxyXG4gICAgICAgIC8vICQoJ1tmb3I9XCJ1c2VDZG5fMVwiXScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAvLyAgICAgJCgnW25hbWU9XCJyZV9wcmljZVwiXScpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKS5yZW1vdmVBdHRyKFwicmVhZG9ubHlcIik7XHJcbiAgICAgICAgLy8gfSlcclxuICAgICAgICAvLyAkKCdbZm9yPVwidXNlQ2RuXzJcIl0nKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy8gICAgICQoJ1tuYW1lPVwicmVfcHJpY2VcIl0nKS5hdHRyKFwiZGlzYWJsZWRcIix0cnVlKS5hdHRyKFwicmVhZG9ubHlcIix0cnVlKS52YWwoJycpO1xyXG4gICAgICAgIC8vICAgICBzZXRDb25kaXRpb24oKTtcclxuICAgICAgICAvLyB9KVxyXG4gICAgICAgIC8vIOa3u+WKoOWVhuWTgeiMg+WbtFxyXG4gICAgICAgICQoXCIucGx1c0FyZWFcIikub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAvLyAkKHRoaXMpLnVuYmluZChcImNsaWNrXCIpOyBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3BsdXNBcmVhIHRlc3QnKVxyXG4gICAgICAgICAgICAkKCcuaW5pdExpc3QnKS5odG1sKCk7XHJcbiAgICAgICAgICAgICQoJy5hZGRCb3ggW3R5cGU9XCJjaGVja0JveFwiXScpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgJCgnI2FkZE1vZGFsJykuZmFkZUluKDIwMCk7XHJcblxyXG4gICAgICAgICAgICAvLyAkKHRoaXMpLmJpbmQoXCJjbGlja1wiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+WFs+mXreW8ueeql1xyXG4gICAgICAgICQoJy5jbG9zZVBvcCcpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnI2FkZE1vZGFsJykuZmFkZU91dCgyMDApO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8gdGFi5YiH5o2iXHJcbiAgICAgICAgJCgnZGl2LnRhYiBhJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiY2xpY2tlZFwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiY2xpY2tlZFwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRhYlN0YXR1cz0kKHRoaXMpLmF0dHIoXCJkYXRhLXR5cGVcIilcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGFiU3RhdHVzKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCh0YWJTdGF0dXMpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjBcIjokKCcjdGFiXzAnKS5zaG93KCkuc2libGluZ3MoXCIjdGFiXzEsI3RhYl8yXCIpLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiMVwiOiQoJyN0YWJfMScpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMCwjdGFiXzJcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIyXCI6JCgnI3RhYl8yJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8xLCN0YWJfMFwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy/llYblk4HojIPlm7TmkJzntKLmjInplK7pg6jliIZcclxuICAgICAgICAkKCcjZm9yVGFiJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIga3cgPSAkKCcja3dDb250ZW50JykudmFsKCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGt3KTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGFiU3RhdHVzKVxyXG4gICAgICAgICAgICAvLyBpZihrdy5sZW5ndGg9PTApe1xyXG4gICAgICAgICAgICAvLyAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+36L6T5YWl5pCc57Si5YaF5a6577yBXCIpO1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvdXBvbi9hZGRfcHJvZHVjdHMnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YTp7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6dGFiU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGt3Omt3XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5pbml0TGlzdCcpLmh0bWwoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHRhYlN0YXR1cyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIwXCI6JCgnI3RhYl8wJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8xLCN0YWJfMlwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIxXCI6JCgnI3RhYl8xJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8wLCN0YWJfMlwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIyXCI6JCgnI3RhYl8yJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8xLCN0YWJfMFwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeGhyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihzdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICQoXCIubG9hZGluZ1NcIikuZmFkZU91dCgzMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy8g6YOo5YiG5LqL5Lu277yI5L2/55So5p2h5Lu25LiO5ZWG5a625Y+R5pS+77yJXHJcbiAgICAgICAgJCgnaW5wdXQuZnVuYycpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rlc3RlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJmdW5jQ2xpY2tcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImZ1bmNDbGlja1wiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGlmKCQodGhpcykudmFsKCk9PVwi55So5oi36aKG5Y+WXCIpe1xyXG4gICAgICAgICAgICAgICAgJCgnLmFib3V0R2V0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgcG9wV2F5PVwiMFwiOy8v55So5oi36aKG5Y+WXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJCgnLmFib3V0R2V0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFib3V0R2V0ICNwdXRPbicpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKVxyXG4gICAgICAgICAgICAgICAgcG9wV2F5PVwiMVwiOy8v5ZWG5a625Y+R5pS+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSlcclxuICAgICAgICAvL+a3u+WKoOaMiemSrumDqOWIhlxyXG4gICAgICAgICQoJyNhZGQnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBhcnJTaW5nbGU9W107XHJcbiAgICAgICAgICAgIHZhciBhcnJQcm89W107XHJcbiAgICAgICAgICAgIHZhciBhcnJOdW09W107XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZUFsbD1bXTtcclxuICAgICAgICAgICAgLy/ojrflj5blvLnnqpfliJfooajkuK3mr4/kuKrpgInpobnnmoTnibnmrorlgLxcclxuICAgICAgICAgICAgJCgnI3RhYl8wIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgYXJyU2luZ2xlLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGU9W107XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1uYW1lJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtaW1nJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgn5Y2V5ZOBJyk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtc3R5bGUnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZUFsbC5wdXNoKHN0YXRlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnI3RhYl8xIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgYXJyUHJvLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGU9W107XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1uYW1lJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtaW1nJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgn5LiT5qCPJyk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtc3R5bGUnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZUFsbC5wdXNoKHN0YXRlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnI3RhYl8yIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgYXJyTnVtLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGU9W107XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1uYW1lJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtaW1nJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgn5Lya5ZGYJyk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtc3R5bGUnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZUFsbC5wdXNoKHN0YXRlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3RhdGVBbGwpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhcnJOdW0pO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhcnJQcm8pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhcnJTaW5nbGUpO1xyXG4gICAgICAgICAgICB2YXIgbmV3QXJyPSBhcnJTaW5nbGUuY29uY2F0KGFyck51bSxhcnJQcm8pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaGFzQ2hvaWNlKTtcclxuICAgICAgICAgICAgaWYobmV3QXJyPT1cIlwiKXtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+mAieaLqeimgea3u+WKoOeahOWVhuWTgeOAglwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih1bmlxdWUoaGFzQ2hvaWNlLG5ld0Fycik9PTEpe1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35Yu/6YeN5aSN6YCJ5oup5re75Yqg55qE5ZWG5ZOB44CCXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGZvcihpPTA7aTxzdGF0ZUFsbC5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkZWRMaXN0JykuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBkYXRhLXRhYj0nICtzdGF0ZUFsbFtpXVs0XSsgJyBjbGFzcz1cImFkZGVkSXRlbVwiIGRhdGEtaWQ9XCInICsgc3RhdGVBbGxbaV1bM11cclxuICAgICAgICAgICAgICAgICAgICAgICAgKyAnXCI+PHNwYW4+JytzdGF0ZUFsbFtpXVsyXSArICc8L3NwYW4+PGltZyBzcmM9XCInICsgc3RhdGVBbGxbaV1bMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKyAnXCIgYWx0PVwiJytzdGF0ZUFsbFtpXVswXSArICdcIj48c3BhbiBjbGFzcz1cInNwYW5Db25cIj4nICsgc3RhdGVBbGxbaV1bMF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKyAnPC9zcGFuPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2UgY2xvc2VJdGVtXCI+w5c8L2J1dHRvbj48L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaGFzQ2hvaWNlPWhhc0Nob2ljZS5jb25jYXQobmV3QXJyKTtcclxuICAgICAgICAgICAgICAgICQoJyNhZGRNb2RhbCcpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+WIoOmZpOW3sumAieWVhuWTgVxyXG4gICAgICAgICQoXCIuYWRkZWRMaXN0XCIpLm9uKFwiY2xpY2tcIixcIi5jbG9zZUl0ZW1cIixmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucHJldigpLnByZXYoKS5jbGljaygpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZGVsZXRlSXRlbT0kKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGVsZXRlSXRlbSk7XHJcbiAgICAgICAgICAgIGhhc0Nob2ljZS5yZW1vdmUoZGVsZXRlSXRlbSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGhhc0Nob2ljZSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+S/neWtmOaPkOS6pOmDqOWIhihzdWJtaXQpXHJcbiAgICAgICAgJCgnI3N1Ym1pdExpc3QnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY2VzaGlcIituZXdGb3JtRmxhZyk7XHJcbiAgICAgICAgICAgIGlmKG5ld0Zvcm1GbGFnKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZXdGb3JtRmxhZz10cnVlO1xyXG4gICAgICAgICAgICBnb29kc1JhbmdlPVtdOy8v572u56m65pWw57uE77yM6Ziy5q2i5o+Q5Lqk5aSx6LSl5pe255Sf5oiQ6YeN5aSNaWRcclxuICAgICAgICAgICAgJCgnLmFkZGVkSXRlbScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGdvb2RzUmFuZ2UucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtaWQnKSsnLS0nKyQodGhpcykuYXR0cignZGF0YS10YWInKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGdvb2RzUmFuZ2UpOyAgXHJcblxyXG4gICAgICAgICAgICAvL+iOt+WPluWAvFxyXG4gICAgICAgICAgICBjb3Vwb25OYW1lPSQudHJpbSgkKCdbbmFtZT1cInRpdGxlXCJdJykudmFsKCkpO1xyXG4gICAgICAgICAgICBjb3Vwb25QcmljZT1NYXRoLnJvdW5kKCgkLnRyaW0oJCgnW25hbWU9XCJwcmljZVwiXScpLnZhbCgpKSkqMTAwKTtcclxuICAgICAgICAgICAgLy8gaWYoJCgnI3VzZUNkbl8xJykucHJvcCgnY2hlY2tlZCcpKXtcclxuICAgICAgICAgICAgLy8gICAgIGlzVGVuPXBhcnNlRmxvYXQoJCgnW25hbWU9XCJyZV9wcmljZVwiXScpLnZhbCgpKSoxMDA7XHJcbiAgICAgICAgICAgIC8vICAgICBjb25zb2xlLmxvZyhcInRlc3RcIitpc1Rlbik7XHJcbiAgICAgICAgICAgIC8vIH1lbHNlIGlmKCQoJyN1c2VDZG5fMicpLnByb3AoJ2NoZWNrZWQnKSl7XHJcbiAgICAgICAgICAgIC8vICAgICBpc1Rlbj1wYXJzZUZsb2F0KCQoJ1tuYW1lPVwicHJpY2VcIl0nKS52YWwoKSkrMC4xO1xyXG4gICAgICAgICAgICAvLyB9O1xyXG4gICAgICAgICAgICBpc1Rlbj1NYXRoLnJvdW5kKHBhcnNlRmxvYXQoJCgnW25hbWU9XCJyZV9wcmljZVwiXScpLnZhbCgpKSoxMDApO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImlzVGVuXCIsaXNUZW4pXHJcbiAgICAgICAgICAgIHRpbWVTdGFydD0kLnRyaW0oJCgnW25hbWU9XCJ2YWxpZF9hdFwiXScpLnZhbCgpKTtcclxuICAgICAgICAgICAgdGltZUVuZD0kLnRyaW0oJCgnW25hbWU9XCJpbnZhbGlkX2F0XCJdJykudmFsKCkpO1xyXG4gICAgICAgICAgICBwb3BOdW09JC50cmltKCQoJ1tuYW1lPVwiY291bnRcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIHBlb3BsZUxpbT0kKCdbbmFtZT1cInJlY2VpdmVfcnVsZVwiXScpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZigkKCdbbmFtZT1cImV4dGVuc2lvblwiXScpLnByb3AoJ2NoZWNrZWQnKSl7XHJcbiAgICAgICAgICAgICAgICBpc1RvRGV0YWlsPTE7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaXNUb0RldGFpbD0wO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL+S8oOWHuuaVsOaNruWvueixoVxyXG4gICAgICAgICAgICBhbGxGb3JtTXNnPXtcclxuICAgICAgICAgICAgICAgIHRpdGxlOmNvdXBvbk5hbWUsXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHByaWNlOmNvdXBvblByaWNlLFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZV9ydWxlOnBlb3BsZUxpbSxcclxuICAgICAgICAgICAgICAgIHZhbGlkX2F0OnRpbWVTdGFydCxcclxuICAgICAgICAgICAgICAgIGludmFsaWRfYXQ6dGltZUVuZCxcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVfcHJpY2U6aXNUZW4sXHJcbiAgICAgICAgICAgICAgICBjb3VudDpwb3BOdW0sXHJcbiAgICAgICAgICAgICAgICBzcHJlYWRfdHlwZTpwb3BXYXksXHJcbiAgICAgICAgICAgICAgICBpc19zaG93OmlzVG9EZXRhaWwsXHJcbiAgICAgICAgICAgICAgICByZXNvdXJjZTpnb29kc1JhbmdlLFxyXG4gICAgICAgICAgICAgICAgdHlwZTp0eXBlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoZWRpdElkKXtcclxuICAgICAgICAgICAgICAgIGFsbEZvcm1Nc2cuaWQ9ZWRpdElkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFsbEZvcm1Nc2cpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coYWxsRm9ybU1zZy5wcmljZSlcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYWxsRm9ybU1zZy5yZXF1aXJlX3ByaWNlKVxyXG4gICAgICAgICAgICBpZihwYWdlX3R5cGU9PTAgJiYgY2hlY2tGb3JtKGFsbEZvcm1Nc2csY21wKSl7XHJcbiAgICAgICAgICAgICAgICBzdWJtaXRGb3JtKFwiL2NvdXBvbi9hZGRcIixhbGxGb3JtTXNnKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYocGFnZV90eXBlPT0xICYmIGNoZWNrRm9ybShhbGxGb3JtTXNnLGNtcCkpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NoZWNrIGlzIHR1cmUnKVxyXG4gICAgICAgICAgICAgICAgc3VibWl0Rm9ybShcIi9jb3Vwb24vZWRpdENvdXBvblwiLGFsbEZvcm1Nc2cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgIH0oKVxyXG4gICAgLy/mj5DkuqTml7bpqozor4HooajljZVcclxuICAgIGZ1bmN0aW9uIGNoZWNrRm9ybShpbmZvLGNtcCkge1xyXG4gICAgICAgIG5ld0Zvcm1GbGFnPWZhbHNlO1xyXG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8udGl0bGUpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS8mOaDoOWIuOWQjeensOS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobmV3Rm9ybUZsYWcpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8ucHJpY2UpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS8mOaDoOWIuOmdoumineS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwYXJzZUZsb2F0KGluZm8uY291bnQpPHBhcnNlRmxvYXQoY21wKSl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS/ruaUueWPkeihjOmHj+WPquiDveWinuS4jeiDveWHj++8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnZhbGlkX2F0KSYmJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLmludmFsaWRfYXQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacieaViOacn+i1t+atouaXtumXtOS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLmNvdW50KSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLlj5HooYzmlbDph4/kuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYoaW5mby50eXBlPT0wKXtcclxuICAgICAgICAvLyAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5yZXNvdXJjZSkpIHtcclxuICAgICAgICAvLyAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuWVhuWTgeiMg+WbtOS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8udmFsaWRfYXQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacieaViOacn+W8gOWni+aXtumXtOagvOW8j+mUmeivr1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8uaW52YWxpZF9hdCkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pyJ5pWI5pyf57uT5p2f5pe26Ze05qC85byP6ZSZ6K+vXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFpbmZvLnJlcXVpcmVfcHJpY2Upe1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkvb/nlKjmnaHku7bkuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoISRmb3JtQ2hlY2suY2hlY2tUaW1lT3JkZXIoaW5mby52YWxpZF9hdCxpbmZvLmludmFsaWRfYXQpKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pyJ5pWI5pyf57uT5p2f5pe26Ze05b+F6aG75aSn5LqO5byA5aeL5pe26Ze077yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja051bShpbmZvLnByaWNlKSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmgqjnmoTpnaLpop3ovpPlhaXmoLzlvI/mnInor6/vvIzor7fph43mlrDovpPlhaXvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrTnVtKGluZm8uY291bnQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaCqOeahOWPkeihjOmHj+i+k+WFpeagvOW8j+acieivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihpbmZvLnJlcXVpcmVfcHJpY2U9PU5hTiB8fCBpbmZvLnJlcXVpcmVfcHJpY2U9PW51bGwpe1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkvJjmg6DliLjpnaLpop3kuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaW5mby5wcmljZT49aW5mby5yZXF1aXJlX3ByaWNlKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LyY5oOg5Yi46Z2i6aKd6KaB5bCP5LqO5L2/55So5p2h5Lu277yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ld0Zvcm1GbGFnPXRydWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gaWYodXBsb2FkQ2hhbm5lbFR5cGU9PSAxICYmIGluZm8ucGF5bWVudF90eXBlPT0gMiAmJiBpbmZvLnBpZWNlX3ByaWNlID4gYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKiAxMDApe1xyXG4gICAgICAgIC8vICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLku7fmoLzkuI3og73lpKfkuo4gXCIgKyBiYXNlVXRpbHMubWF4SW5wdXRQcmljZSArIFwiIOW8oFwiKTtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8v6KGo5Y2V5o+Q5Lqk5pa55rOVXHJcbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKHVybCxhbGxtYWcpe1xyXG4gICAgICAgICQuYWpheCh1cmwse1xyXG4gICAgICAgICAgICB0eXBlOidQT1NUJyxcclxuICAgICAgICAgICAgZGF0YVR5cGU6J0pTT04nLFxyXG4gICAgICAgICAgICBkYXRhOmFsbG1hZyxcclxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuY29kZT09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChkYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCIvY291cG9uL2luZGV4XCJcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGRhdGEuY29kZT09LTEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3Rm9ybUZsYWc9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsb2FkUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLHN0YXR1cyxlcnIpe1xyXG4gICAgICAgICAgICAgICAgbmV3Rm9ybUZsYWc9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvL+afpemHjeaWueazlVxyXG4gICAgZnVuY3Rpb24gdW5pcXVlKGFycjEsYXJyMil7XHJcbiAgICAgICAgdmFyIGl0ZW09MDtcclxuICAgICAgICBmb3IodmFyIGk9MDtpPGFycjEubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGlmKGFycjIuaW5kZXhPZihhcnIxW2ldKSE9LTEpe1xyXG4gICAgICAgICAgICAgICAgaXRlbT0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfVxyXG4gICAgLy/liKDpmaTmlbDnu4TlhYPntKDmlrnms5VcclxuICAgIEFycmF5LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2YodmFsKTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIGluaXQoKVxyXG4gICAgLy8gZnVuY3Rpb24gaW5pdCgpe1xyXG4gICAgLy8gICAgIHN3aXRjaCh0YWJTdGF0dXMpe1xyXG4gICAgLy8gICAgICAgICBjYXNlIFwiMFwiOiQoJyN0YWJfMCcpLnNob3coKS4kKFwiI3RhYl8xLCN0YWJfMlwiKS5oaWRkZW4oKVxyXG4gICAgLy8gICAgICAgICBicmVhaztcclxuICAgIC8vICAgICAgICAgY2FzZSBcIjFcIjokKCcjdGFiXzEnKS5zaG93KCkuJChcIiN0YWJfMCwjdGFiXzJcIikuaGlkZGVuKClcclxuICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAvLyAgICAgICAgIGNhc2UgXCIyXCI6JCgnI3RhYl8yJykuc2hvdygpLiQoXCIjdGFiXzEsI3RhYl8wXCIpLmhpZGRlbigpXHJcbiAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxufVxyXG5mdW5jdGlvbiBpbml0KCl7Ly/liJ3lp4vljJbkvJjmg6DliLjllYblk4HlvLnnqpflhoXlrrlcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICB1cmw6ICcvY291cG9uL2FkZF9wcm9kdWN0cycsXHJcbiAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICQoJy5pbml0TGlzdCcpLmh0bWwoZGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh4aHIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Ioc3RhdHVzKTtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIEnKTtcclxuICAgICAgICAgICAgLy9oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAvLyAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcbmZ1bmN0aW9uIGNsZWFyTm9OdW0ob2JqKXsgXHJcbiAgIG9iai52YWx1ZSA9IG9iai52YWx1ZS5yZXBsYWNlKC9bXlxcZC5dL2csXCJcIik7ICAvL+a4hemZpOKAnOaVsOWtl+KAneWSjOKAnC7igJ3ku6XlpJbnmoTlrZfnrKYgIFxyXG4gICBvYmoudmFsdWUgPSBvYmoudmFsdWUucmVwbGFjZSgvXFwuezIsfS9nLFwiLlwiKTsgLy/lj6rkv53nlZnnrKzkuIDkuKouIOa4hemZpOWkmuS9meeahCAgXHJcbiAgIG9iai52YWx1ZSA9IG9iai52YWx1ZS5yZXBsYWNlKFwiLlwiLFwiJCMkXCIpLnJlcGxhY2UoL1xcLi9nLFwiXCIpLnJlcGxhY2UoXCIkIyRcIixcIi5cIik7IFxyXG4gICBvYmoudmFsdWUgPSBvYmoudmFsdWUucmVwbGFjZSgvXihcXC0pKihcXGQrKVxcLihcXGRcXGQpLiokLywnJDEkMi4kMycpOy8v5Y+q6IO96L6T5YWl5Lik5Liq5bCP5pWwICBcclxuICAgaWYob2JqLnZhbHVlLmluZGV4T2YoXCIuXCIpPCAwICYmIG9iai52YWx1ZSAhPVwiXCIpey8v5Lul5LiK5bey57uP6L+H5ruk77yM5q2k5aSE5o6n5Yi255qE5piv5aaC5p6c5rKh5pyJ5bCP5pWw54K577yM6aaW5L2N5LiN6IO95Li657G75Ly85LqOIDAx44CBMDLnmoTph5Hpop0gXHJcbiAgICAgICBvYmoudmFsdWU9IHBhcnNlRmxvYXQob2JqLnZhbHVlKTsgXHJcbiAgIH0gXHJcbn0gXHJcbmZ1bmN0aW9uIHNldENvbmRpdGlvbigpe1xyXG4gICAgJCgnLnRoZVRlbicpLmh0bWwocGFyc2VGbG9hdCgkKCdbbmFtZT1cInByaWNlXCJdJykudmFsKCkpKzAuMSk7XHJcbn0iXX0=
