$(function(){communityList.init()});var i=0;var iTime=null;function remainTime(){$.ajax("isCommunityHaveAdmin",{type:"GET",dataType:"json",data:{community_id:$("#community_id").val()},success:function(o){i+=1;if(i>=300){i=0;clearTimeout(iTime);$(".darkScreen").fadeOut(300);var e="您长时间未扫码  请重新验证";$.alert(e,"info",{oktext:"我知道了",btn:2,onOk:function(){window.location.href="/smallCommunity/communityList"},onClose:function(){window.location.href="/smallCommunity/communityList"}})}if(o.code==0){clearTimeout(iTime);var e="群主设置成功";$(".darkScreen").fadeOut(300);$.alert(e,"info",{oktext:"我知道了",btn:2,onOk:function(){window.location.href="/smallCommunity/communityList"},onClose:function(){window.location.href="/smallCommunity/communityList"}})}}});iTime=setTimeout("remainTime()",1500)}var communityList=function(){var o={};var e,t,n=0,a=[],c=1,l="",s,r="",d="",u="",m=0,f="";function h(o,e,t){$.ajax("getUserInfo",{type:"POST",textType:"json",data:{community_id:o,step:e,search:t},success:function(e){$(".loadingS").fadeOut(300);console.log(o);if(e.code==0){a=e.data;console.log(a);var t=0;for(t=0;t<a.length;t++){text='<div class="holderListPart" data-name="'+a[t].wx_nickname+'" data-userid="'+a[t].user_id+'"><div class="holderCheckBox"> <input class="with-gap" id="'+a[t].user_id+'" name="group2" type="radio" /> <label for="'+a[t].user_id+'"> </label> </div> <div class="holderListImg"><img src="'+a[t].wx_avatar+'"></div> <span class="holderListName">'+a[t].wx_nickname+"</span> </div>";$(".holderListContent").append(text)}}else{if(m==0){text='<p class="searchNone">'+f+" </p>";$(".holderListContent").append(text);m=1}}},error:function(o,e,t){console.log(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function p(o){$.ajax("getCommunityLinkSetAdmin",{type:"POST",textType:"json",data:{community_id:o},success:function(o){console.log(o);if(o.code==0){u=o.data}},error:function(o,e,t){console.log(t);u="服务器出错了 请稍后再试"}})}function y(o,e){$.ajax("changeCommunityState",{type:"POST",textType:"json",data:{id:o,community_state:e},success:function(o){if(o.code==0){if(e==0){baseUtils.show.blueTip("已上架，当前小社群将在店内展示")}else{baseUtils.show.blueTip("已下架，当前小社群将不在店内展示")}location.reload()}else{baseUtils.show.redTip("操作失败!");console.log(o.msg)}},error:function(o,e,t){console.log(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})}o.init=function(){var o=GetQueryString("is_new");if(o==1){$(".newCommunityTipWrapper").fadeIn(300);setTimeout(function(){$(".newCommunityTipWrapper").fadeOut(700)},5e3)}(function(){var o=new Clipboard(".copyHref");o.on("success",function(o){baseUtils.show.blueTip("复制成功！请在微信内打开哦 。");o.clearSelection()})})();$("body").on("mouseenter",".productCountBox",function(){$(this).next().fadeIn(200)});$("body").on("mouseleave",".productCountBox",function(){$(this).next().fadeOut(200)});$(".toolBox").on("click",".setHolderBtn",function(){m=0;c=1;var o=$(this).data("id");$("#community_id").val(o);$(".darkScreen").fadeIn(300);$(".holderSearchInput").val("");$(".holderListContent").empty();h(o,1);s=0;$(".setAdmin").show();p(o);f="暂无结果，请微信扫一扫设置群主"});$(".toolBox").on("click",".changeHolderBtn",function(){m=0;c=1;var o=$(this).data("id");$("#community_id").val(o);$(".darkScreen").fadeIn(300);$(".holderSearchInput").val("");$(".holderListContent").empty();h(o,1);f="暂无结果";s=1;$(".setAdmin").hide();r=$(this).data("old")});$(".GroupHolderSetBox").on("click",".holderSetClose",function(){$(".darkScreen").fadeOut(300)});$("body").on("click",".searchAllBtn",function(){e=$("#selector").val();t=$.trim($(".inputSearchAll").val());window.location="communityList?ruler="+e+"&search="+t});$("#selector").on("change",function(){$(".searchAllBtn").click()});$(".inputSearchAll").on("keypress",function(o){if(o.keyCode==13){$(".searchAllBtn").click()}});$(".GroupHolderSetBox").on("click",".holderSearchBtn",function(){m=0;c=1;$(".loadingS").fadeIn(300);$(".holderListContent").empty();h($("#community_id").val(),c,$(".holderSearchInput").val())});$(".holderList").scroll(function(){var o=$(this).height();var e=$(this).get(0).scrollHeight;var t=$(this).scrollTop();console.log(e);console.log(o);console.log(t);if(e-o-t<=35){if(n==0){c++;h($("#community_id").val(),c,$(".holderSearchInput").val());console.log("已经滚到底部了");n=1}}else{n=0}});$(".holderList").on("click",".holderListPart",function(){$(this).find("input").prop("checked",true);l=$(this).data("userid");d=$(this).data("name");console.log(l)});$(".boxConfirm").click(function(){if(s==1){$.alert("当前群主为"+r+",确认将群主转移给"+d+"吗？转移后，前群主曾经发的动态保留在群主动态中，新群主新发的动态将显示在群主动态中","info",{btn:3,onOk:function(){$.ajax("setCommunityAdmin",{type:"POST",textType:"json",data:{community_id:$("#community_id").val(),user_id:l},success:function(o){if(o.code==0){baseUtils.show.blueTip("操作成功！");window.location.href="/smallCommunity/communityList"}},error:function(o,e,t){console.log(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})}})}else{$.ajax("setCommunityAdmin",{type:"POST",textType:"json",data:{community_id:$("#community_id").val(),user_id:l},success:function(o){if(o.code==0){baseUtils.show.blueTip("操作成功！");window.location.href="/smallCommunity/communityList"}},error:function(o,e,t){console.log(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})}});$(".GroupHolderSetBox").on("mouseenter",".setWxFriend",function(){i=0;var o=new QRCode(document.getElementById("qrImgId"),{text:u,width:120,height:120,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.L});$(".qrCodePaper").fadeIn(100);remainTime()});$(".GroupHolderSetBox").on("mouseleave",".setWxFriend",function(){clearTimeout(iTime);$("#qrImgId").empty();$(".qrCodePaper").fadeOut(10)});$(".toolBox").on("click",".communityHide",function(){var o=$(this).data("id");var e=1;y(o,e)});$(".toolBox").on("click",".communityShow",function(){var o=$(this).data("id");var e=0;y(o,e)})};return o}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2NvbW11bml0eU9wZXJhdGUvY29tbXVuaXR5TGlzdC5qcyJdLCJuYW1lcyI6WyIkIiwiY29tbXVuaXR5TGlzdCIsImluaXQiLCJpIiwiaVRpbWUiLCJyZW1haW5UaW1lIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImRhdGEiLCJjb21tdW5pdHlfaWQiLCJ2YWwiLCJzdWNjZXNzIiwiY2xlYXJUaW1lb3V0IiwiZmFkZU91dCIsInRleHQiLCJhbGVydCIsIm9rdGV4dCIsImJ0biIsIm9uT2siLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJvbkNsb3NlIiwiY29kZSIsInNldFRpbWVvdXQiLCJzZWxlY3ROdW0iLCJzZWFyY2hDb250ZW50IiwiYWpheExpc3QiLCJ1c2VyQXJyIiwic3RlcCIsImNrZWNrZWRVc2VySUQiLCJob2xkZXJDaGFuZ2VTdGF0ZSIsIm9sZEFkbWluTmFtZSIsIm5ld0FkbWluTmFtZSIsIlFSTGluayIsInJlc3VsdFN0YXRlIiwiYWxlcnRUZXh0IiwiZ2V0VXNlckluZm8iLCJpZCIsInNlYXJjaCIsInRleHRUeXBlIiwiY29uc29sZSIsImxvZyIsImxlbmd0aCIsInd4X25pY2tuYW1lIiwidXNlcl9pZCIsInd4X2F2YXRhciIsImFwcGVuZCIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiYmFzZVV0aWxzIiwic2hvdyIsInJlZFRpcCIsImdldFFSTGluayIsImNoYW5nZUNvbW11bml0eVN0YXRlIiwiY29tbXVuaXR5X3N0YXRlIiwiYmx1ZVRpcCIsInJlbG9hZCIsIm1zZyIsImlzX25ldyIsIkdldFF1ZXJ5U3RyaW5nIiwiZmFkZUluIiwiY2xpcGJvYXJkIiwiQ2xpcGJvYXJkIiwib24iLCJlIiwiY2xlYXJTZWxlY3Rpb24iLCJ0aGlzIiwibmV4dCIsImVtcHR5IiwiaGlkZSIsInRyaW0iLCJjbGljayIsImtleUNvZGUiLCJzY3JvbGwiLCJ2aWV3SCIsImhlaWdodCIsImNvbnRlbnRIIiwiZ2V0Iiwic2Nyb2xsSGVpZ2h0Iiwic2Nyb2xsVG9wIiwiZmluZCIsInByb3AiLCJxcmNvZGVDb25maXJtUGF5RGlyQ29kZSIsIlFSQ29kZSIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJ3aWR0aCIsImNvbG9yRGFyayIsImNvbG9yTGlnaHQiLCJjb3JyZWN0TGV2ZWwiLCJDb3JyZWN0TGV2ZWwiLCJMIiwiY29tbXVuaXR5SWQiLCJjb21tdW5pdHlTdGF0ZSJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUUsV0FDQ0MsY0FBY0MsUUFFakIsSUFBSUMsR0FBSSxDQUNSLElBQUlDLE9BQVEsSUFDWixTQUFVQyxjQUlOTCxFQUFFTSxLQUFLLHdCQUNIQyxLQUFNLE1BQ05DLFNBQVUsT0FDVkMsTUFBTUMsYUFBZVYsRUFBRSxpQkFBaUJXLE9BQ3hDQyxRQUFRLFNBQVVILEdBQ2ROLEdBQUssQ0FRTCxJQUFHQSxHQUFLLElBQUksQ0FDUkEsRUFBSSxDQUNKVSxjQUFhVCxNQUNiSixHQUFFLGVBQWVjLFFBQVEsSUFFekIsSUFBSUMsR0FBTyxnQkFFWGYsR0FBRWdCLE1BQU1ELEVBQUssUUFDVEUsT0FBUSxPQUNSQyxJQUFLLEVBQ0xDLEtBQU0sV0FDRkMsT0FBT0MsU0FBU0MsS0FBTyxpQ0FFM0JDLFFBQVEsV0FDSkgsT0FBT0MsU0FBU0MsS0FBTyxtQ0FPbkMsR0FBR2IsRUFBS2UsTUFBUSxFQUFFLENBQ2RYLGFBQWFULE1BQ2IsSUFBSVcsR0FBTyxRQUNYZixHQUFFLGVBQWVjLFFBQVEsSUFDekJkLEdBQUVnQixNQUFNRCxFQUFLLFFBQ1RFLE9BQVEsT0FDUkMsSUFBSyxFQUNMQyxLQUFNLFdBQ0ZDLE9BQU9DLFNBQVNDLEtBQU8saUNBRTNCQyxRQUFRLFdBQ0pILE9BQU9DLFNBQVNDLEtBQU8sc0NBTzNDbEIsT0FBUXFCLFdBQVcsZUFBZSxNQUV0QyxHQUFJeEIsZUFBYyxXQUNkLEdBQUlBLEtBQ0osSUFBSXlCLEdBQ0FDLEVBQ0FDLEVBQVMsRUFDVEMsS0FDQUMsRUFBTyxFQUNQQyxFQUFnQixHQUNoQkMsRUFDQUMsRUFB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aW4vY29tbXVuaXR5T3BlcmF0ZS9jb21tdW5pdHlMaXN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbiAoKSB7XHJcbiAgIGNvbW11bml0eUxpc3QuaW5pdCgpO1xyXG59KTtcclxudmFyIGkgPSAwO1xyXG52YXIgaVRpbWUgPSBudWxsO1xyXG5mdW5jdGlvbiAgcmVtYWluVGltZSgpIHtcclxuXHJcbiAgICAvL+ajgOa1i+aYr+WQpuiuvue9ruaIkOWKn1xyXG5cclxuICAgICQuYWpheCgnaXNDb21tdW5pdHlIYXZlQWRtaW4nLCB7XHJcbiAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICBkYXRhOnsnY29tbXVuaXR5X2lkJzokKCcjY29tbXVuaXR5X2lkJykudmFsKCl9LFxyXG4gICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgaSArPSAxO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnLS0t6K+35rGC5qyh5pWwLS0t77yaJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGkpO1xyXG4gICAgICAgICAgICAvL1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnLS0t5qOA5rWL6L+U5Zue5YC8LS0tOicpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuXHJcblxyXG4gICAgICAgICAgICBpZihpID49IDMwMCl7XHJcbiAgICAgICAgICAgICAgICBpID0gMDtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dChpVGltZSk7XHJcbiAgICAgICAgICAgICAgICAkKFwiLmRhcmtTY3JlZW5cIikuZmFkZU91dCgzMDApOy8v5by556qX6ZqQ6JePXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSAn5oKo6ZW/5pe26Ze05pyq5omr56CBICDor7fph43mlrDpqozor4EnO1xyXG5cclxuICAgICAgICAgICAgICAgICQuYWxlcnQodGV4dCwnaW5mbycse1xyXG4gICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+aIkeefpemBk+S6hicsXHJcbiAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL3NtYWxsQ29tbXVuaXR5L2NvbW11bml0eUxpc3RcIjtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL3NtYWxsQ29tbXVuaXR5L2NvbW11bml0eUxpc3RcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBpZihkYXRhLmNvZGUgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICBjbGVhclRpbWVvdXQoaVRpbWUpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSAn576k5Li76K6+572u5oiQ5YqfJztcclxuICAgICAgICAgICAgICAgICQoXCIuZGFya1NjcmVlblwiKS5mYWRlT3V0KDMwMCk7Ly/lvLnnqpfpmpDol49cclxuICAgICAgICAgICAgICAgICQuYWxlcnQodGV4dCwnaW5mbycse1xyXG4gICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+aIkeefpemBk+S6hicsXHJcbiAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL3NtYWxsQ29tbXVuaXR5L2NvbW11bml0eUxpc3RcIjtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9uQ2xvc2U6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL3NtYWxsQ29tbXVuaXR5L2NvbW11bml0eUxpc3RcIjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlUaW1lID0gc2V0VGltZW91dChcInJlbWFpblRpbWUoKVwiLDE1MDApO1xyXG59XHJcbnZhciBjb21tdW5pdHlMaXN0PWZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBjb21tdW5pdHlMaXN0PXt9O1xyXG4gICAgdmFyIHNlbGVjdE51bSxcclxuICAgICAgICBzZWFyY2hDb250ZW50LFxyXG4gICAgICAgIGFqYXhMaXN0PTAsXHJcbiAgICAgICAgdXNlckFyciA9IFtdLFxyXG4gICAgICAgIHN0ZXAgPSAxLFxyXG4gICAgICAgIGNrZWNrZWRVc2VySUQgPSAnJyxcclxuICAgICAgICBob2xkZXJDaGFuZ2VTdGF0ZSxcclxuICAgICAgICBvbGRBZG1pbk5hbWUgPSAnJyxcclxuICAgICAgICBuZXdBZG1pbk5hbWUgPSAnJyxcclxuICAgICAgICBRUkxpbmsgPSAnJyxcclxuICAgICAgICByZXN1bHRTdGF0ZSA9IDAsXHJcbiAgICAgICAgYWxlcnRUZXh0ID0gJyc7XHJcblxyXG5cclxuXHJcblxyXG4gICAgZnVuY3Rpb24gZ2V0VXNlckluZm8oaWQsc3RlcCxzZWFyY2gpIHtcclxuICAgICAgICAkLmFqYXgoJ2dldFVzZXJJbmZvJyx7XHJcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxyXG4gICAgICAgICAgICB0ZXh0VHlwZTonanNvbicsXHJcbiAgICAgICAgICAgIGRhdGE6e1xyXG4gICAgICAgICAgICAgICAgY29tbXVuaXR5X2lkOmlkLFxyXG4gICAgICAgICAgICAgICAgc3RlcDpzdGVwLFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoOnNlYXJjaFxyXG4gICAgICAgICAgICB9LFxyXG5cclxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgJChcIi5sb2FkaW5nU1wiKS5mYWRlT3V0KDMwMCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhpZCk7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGU9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJBcnIgPSBkYXRhLmRhdGE7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2codXNlckFycik7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCB1c2VyQXJyLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gJzxkaXYgY2xhc3M9XCJob2xkZXJMaXN0UGFydFwiIGRhdGEtbmFtZT1cIicgKyB1c2VyQXJyW2ldLnd4X25pY2tuYW1lICsgJ1wiIGRhdGEtdXNlcmlkPVwiJyArIHVzZXJBcnJbaV0udXNlcl9pZCArICdcIj48ZGl2IGNsYXNzPVwiaG9sZGVyQ2hlY2tCb3hcIj4gPGlucHV0IGNsYXNzPVwid2l0aC1nYXBcIiBpZD1cIicgKyB1c2VyQXJyW2ldLnVzZXJfaWQgKyAnXCIgbmFtZT1cImdyb3VwMlwiIHR5cGU9XCJyYWRpb1wiIC8+IDxsYWJlbCBmb3I9XCInICsgdXNlckFycltpXS51c2VyX2lkICsgJ1wiPiA8L2xhYmVsPiA8L2Rpdj4gPGRpdiBjbGFzcz1cImhvbGRlckxpc3RJbWdcIj48aW1nIHNyYz1cIicgKyB1c2VyQXJyW2ldLnd4X2F2YXRhciArICdcIj48L2Rpdj4gPHNwYW4gY2xhc3M9XCJob2xkZXJMaXN0TmFtZVwiPicgKyB1c2VyQXJyW2ldLnd4X25pY2tuYW1lICsgJzwvc3Bhbj4gPC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuaG9sZGVyTGlzdENvbnRlbnQnKS5hcHBlbmQodGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHRTdGF0ZSA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dD0nPHAgY2xhc3M9XCJzZWFyY2hOb25lXCI+JyAgKyBhbGVydFRleHQgKyAnIDwvcD4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuaG9sZGVyTGlzdENvbnRlbnQnKS5hcHBlbmQodGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFN0YXRlID0gMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjpmdW5jdGlvbiAoeGhyLHN0YXR1cyxlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgIH1cclxuICAgIFxyXG4gICAgZnVuY3Rpb24gZ2V0UVJMaW5rKGlkKSB7XHJcbiAgICAgICAgJC5hamF4KCdnZXRDb21tdW5pdHlMaW5rU2V0QWRtaW4nLHtcclxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXHJcbiAgICAgICAgICAgIHRleHRUeXBlOidqc29uJyxcclxuICAgICAgICAgICAgZGF0YTp7XHJcbiAgICAgICAgICAgICAgICBjb21tdW5pdHlfaWQ6aWRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGU9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgIFFSTGluayA9IGRhdGEuZGF0YTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24gKHhocixzdGF0dXMsZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgUVJMaW5rID0gJ+acjeWKoeWZqOWHuumUmeS6hiDor7fnqI3lkI7lho3or5UnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiBjaGFuZ2VDb21tdW5pdHlTdGF0ZShpZCxjb21tdW5pdHlfc3RhdGUpe1xyXG4gICAgICAgICQuYWpheCgnY2hhbmdlQ29tbXVuaXR5U3RhdGUnLHtcclxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXHJcbiAgICAgICAgICAgIHRleHRUeXBlOidqc29uJyxcclxuICAgICAgICAgICAgZGF0YTp7XHJcbiAgICAgICAgICAgICAgICBpZDppZCxcclxuICAgICAgICAgICAgICAgIGNvbW11bml0eV9zdGF0ZTpjb21tdW5pdHlfc3RhdGVcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuY29kZT09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoY29tbXVuaXR5X3N0YXRlPT0wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcCgn5bey5LiK5p6277yM5b2T5YmN5bCP56S+576k5bCG5Zyo5bqX5YaF5bGV56S6Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoJ+W3suS4i+aetu+8jOW9k+WJjeWwj+ekvue+pOWwhuS4jeWcqOW6l+WGheWxleekuicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5pON5L2c5aSx6LSlIScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24gKHhocixzdGF0dXMsZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4gICAgY29tbXVuaXR5TGlzdC5pbml0PWZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy8gIOaYvuekuuiuvue9rue+pOS4u+eahOaPkOekulxyXG4gICAgICAgIHZhciBpc19uZXcgPSBHZXRRdWVyeVN0cmluZyhcImlzX25ld1wiKTtcclxuICAgICAgICBpZiAoaXNfbmV3ID09IDEpe1xyXG4gICAgICAgICAgICAkKFwiLm5ld0NvbW11bml0eVRpcFdyYXBwZXJcIikuZmFkZUluKDMwMCk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJChcIi5uZXdDb21tdW5pdHlUaXBXcmFwcGVyXCIpLmZhZGVPdXQoNzAwKTtcclxuICAgICAgICAgICAgfSwgNTAwMCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcblxyXG5cclxuICAgICAgICAvL+WkjeWItuWIsOWJqui0tOadv1xyXG4gICAgICAgIChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjbGlwYm9hcmQgPSBuZXcgQ2xpcGJvYXJkKCcuY29weUhyZWYnKTtcclxuICAgICAgICAgICAgY2xpcGJvYXJkLm9uKCdzdWNjZXNzJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuWkjeWItuaIkOWKn++8geivt+WcqOW+ruS/oeWGheaJk+W8gOWTpiDjgIJcIik7XHJcbiAgICAgICAgICAgICAgICBlLmNsZWFyU2VsZWN0aW9uKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pKCk7XHJcblxyXG5cclxuICAgICAgICAkKFwiYm9keVwiKS5vbignbW91c2VlbnRlcicsJy5wcm9kdWN0Q291bnRCb3gnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCkuZmFkZUluKDIwMCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICAkKFwiYm9keVwiKS5vbignbW91c2VsZWF2ZScsJy5wcm9kdWN0Q291bnRCb3gnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5uZXh0KCkuZmFkZU91dCgyMDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKFwiLnRvb2xCb3hcIikub24oJ2NsaWNrJywnLnNldEhvbGRlckJ0bicsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXN1bHRTdGF0ZSA9IDA7XHJcbiAgICAgICAgICAgIHN0ZXAgPSAxO1xyXG4gICAgICAgICAgICB2YXIgaWQgPSAkKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgICQoJyNjb21tdW5pdHlfaWQnKS52YWwoaWQpO1xyXG4gICAgICAgICAgICAkKFwiLmRhcmtTY3JlZW5cIikuZmFkZUluKDMwMCk7XHJcbiAgICAgICAgICAgICQoJy5ob2xkZXJTZWFyY2hJbnB1dCcpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgICQoJy5ob2xkZXJMaXN0Q29udGVudCcpLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvKGlkLDEpO1xyXG5cclxuICAgICAgICAgICAgaG9sZGVyQ2hhbmdlU3RhdGU9MDtcclxuICAgICAgICAgICAgJCgnLnNldEFkbWluJykuc2hvdygpOyAgLy/mmL7npLrkuoznu7TnoIFcclxuICAgICAgICAgICAgZ2V0UVJMaW5rKGlkKTtcclxuICAgICAgICAgICAgYWxlcnRUZXh0ID0gJ+aaguaXoOe7k+aenO+8jOivt+W+ruS/oeaJq+S4gOaJq+iuvue9rue+pOS4uyc7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCIudG9vbEJveFwiKS5vbignY2xpY2snLCcuY2hhbmdlSG9sZGVyQnRuJyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFN0YXRlID0gMDtcclxuICAgICAgICAgICAgc3RlcCA9IDE7XHJcbiAgICAgICAgICAgIHZhciBpZCA9ICQodGhpcykuZGF0YSgnaWQnKTtcclxuICAgICAgICAgICAgJCgnI2NvbW11bml0eV9pZCcpLnZhbChpZCk7XHJcbiAgICAgICAgICAgICQoXCIuZGFya1NjcmVlblwiKS5mYWRlSW4oMzAwKTtcclxuICAgICAgICAgICAgJCgnLmhvbGRlclNlYXJjaElucHV0JykudmFsKCcnKTtcclxuICAgICAgICAgICAgJCgnLmhvbGRlckxpc3RDb250ZW50JykuZW1wdHkoKTtcclxuICAgICAgICAgICAgZ2V0VXNlckluZm8oaWQsMSk7XHJcbiAgICAgICAgICAgIGFsZXJ0VGV4dCA9ICfmmoLml6Dnu5PmnpwnO1xyXG5cclxuICAgICAgICAgICAgaG9sZGVyQ2hhbmdlU3RhdGU9MTtcclxuICAgICAgICAgICAgJCgnLnNldEFkbWluJykuaGlkZSgpOyAgLy/pmpDol4/kuoznu7TnoIFcclxuICAgICAgICAgICAgb2xkQWRtaW5OYW1lID0gJCh0aGlzKS5kYXRhKCdvbGQnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIi5Hcm91cEhvbGRlclNldEJveFwiKS5vbignY2xpY2snLCcuaG9sZGVyU2V0Q2xvc2UnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJChcIi5kYXJrU2NyZWVuXCIpLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8v56S+576k5pCc57SiXHJcbiAgICAgICAgJChcImJvZHlcIikub24oJ2NsaWNrJywnLnNlYXJjaEFsbEJ0bicsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBzZWxlY3ROdW09JChcIiNzZWxlY3RvclwiKS52YWwoKTtcclxuICAgICAgICAgICAgc2VhcmNoQ29udGVudD0kLnRyaW0oJChcIi5pbnB1dFNlYXJjaEFsbFwiKS52YWwoKSk7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbj0nY29tbXVuaXR5TGlzdD9ydWxlcj0nK3NlbGVjdE51bStcIiZzZWFyY2g9XCIrc2VhcmNoQ29udGVudDtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gIOeCueWHu+etm+mAieinpuWPkeaQnOe0olxyXG4gICAgICAgICQoXCIjc2VsZWN0b3JcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgJChcIi5zZWFyY2hBbGxCdG5cIikuY2xpY2soKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gIOWbnui9puinpuWPkeaQnOe0olxyXG4gICAgICAgICQoXCIuaW5wdXRTZWFyY2hBbGxcIikub24oXCJrZXlwcmVzc1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiLnNlYXJjaEFsbEJ0blwiKS5jbGljaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v55So5oi35pCc57SiXHJcbiAgICAgICAgJChcIi5Hcm91cEhvbGRlclNldEJveFwiKS5vbignY2xpY2snLCcuaG9sZGVyU2VhcmNoQnRuJyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlc3VsdFN0YXRlID0gMDtcclxuICAgICAgICAgICAgc3RlcCA9IDE7XHJcbiAgICAgICAgICAgICQoXCIubG9hZGluZ1NcIikuZmFkZUluKDMwMCk7XHJcbiAgICAgICAgICAgICQoJy5ob2xkZXJMaXN0Q29udGVudCcpLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIGdldFVzZXJJbmZvKCQoJyNjb21tdW5pdHlfaWQnKS52YWwoKSxzdGVwLCQoJy5ob2xkZXJTZWFyY2hJbnB1dCcpLnZhbCgpKTtcclxuXHJcbiAgICAgICAgfSlcclxuXHJcbiAgICAgICAgLy/nlKjmiLfliJfooajkuIvmi4nmmL7npLrkuIvkuIDpobVcclxuICAgICAgICAkKFwiLmhvbGRlckxpc3RcIikuc2Nyb2xsKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHZpZXdIPSQodGhpcykuaGVpZ2h0KCk7Ly/lj6/op4Hpq5jluqZcclxuICAgICAgICAgICAgdmFyIGNvbnRlbnRIID0kKHRoaXMpLmdldCgwKS5zY3JvbGxIZWlnaHQ7Ly/lhoXlrrnpq5jluqZcclxuICAgICAgICAgICAgdmFyIHNjcm9sbFRvcCA9JCh0aGlzKS5zY3JvbGxUb3AoKTsvL+a7muWKqOmrmOW6plxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjb250ZW50SCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHZpZXdIKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coc2Nyb2xsVG9wKTtcclxuXHJcbiAgICAgICAgICAgIGlmKGNvbnRlbnRIIC0gdmlld0ggLSBzY3JvbGxUb3A8PTM1KXtcclxuXHJcbiAgICAgICAgICAgICAgICBpZihhamF4TGlzdD09MCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHN0ZXArKztcclxuICAgICAgICAgICAgICAgICAgICBnZXRVc2VySW5mbygkKCcjY29tbXVuaXR5X2lkJykudmFsKCksc3RlcCwkKCcuaG9sZGVyU2VhcmNoSW5wdXQnKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+W3sue7j+a7muWIsOW6lemDqOS6hicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGFqYXhMaXN0PTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgYWpheExpc3Q9MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgLy8gIOeUqOaIt+WIl+ihqOWtkOWNleWFg+eCueWHu+S6i+S7tuWFs+iBlFxyXG4gICAgICAgICQoXCIuaG9sZGVyTGlzdFwiKS5vbignY2xpY2snLCcuaG9sZGVyTGlzdFBhcnQnLGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICQodGhpcykuZmluZChcImlucHV0XCIpLnByb3AoXCJjaGVja2VkXCIsIHRydWUpO1xyXG4gICAgICAgICAgICAvLyAgICDojrflj5bpgInkuK3nlKjmiLfnmoRpZOWQjVxyXG4gICAgICAgICAgICBja2Vja2VkVXNlcklEID0gJCh0aGlzKS5kYXRhKCd1c2VyaWQnKTtcclxuICAgICAgICAgICAgbmV3QWRtaW5OYW1lID0gJCh0aGlzKS5kYXRhKCduYW1lJyk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhja2Vja2VkVXNlcklEKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnLmJveENvbmZpcm0nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgaWYoaG9sZGVyQ2hhbmdlU3RhdGU9PTEpe1xyXG4gICAgICAgICAgICAgICAkLmFsZXJ0KCflvZPliY3nvqTkuLvkuLonKyBvbGRBZG1pbk5hbWUgKycs56Gu6K6k5bCG576k5Li76L2s56e757uZJyArIG5ld0FkbWluTmFtZSArICflkJfvvJ/ovaznp7vlkI7vvIzliY3nvqTkuLvmm77nu4/lj5HnmoTliqjmgIHkv53nlZnlnKjnvqTkuLvliqjmgIHkuK3vvIzmlrDnvqTkuLvmlrDlj5HnmoTliqjmgIHlsIbmmL7npLrlnKjnvqTkuLvliqjmgIHkuK0nICwgJ2luZm8nLHtcclxuICAgICAgICAgICAgICAgICAgIGJ0bjozLFxyXG4gICAgICAgICAgICAgICAgICAgb25PazpmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICQuYWpheCgnc2V0Q29tbXVuaXR5QWRtaW4nLHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTonUE9TVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHRUeXBlOidqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tdW5pdHlfaWQ6JCgnI2NvbW11bml0eV9pZCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9pZDpja2Vja2VkVXNlcklEXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuY29kZT09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcCgn5pON5L2c5oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9zbWFsbENvbW11bml0eS9jb21tdW5pdHlMaXN0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOmZ1bmN0aW9uICh4aHIsc3RhdHVzLGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAkLmFqYXgoJ3NldENvbW11bml0eUFkbWluJywge1xyXG4gICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgICAgdGV4dFR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICBjb21tdW5pdHlfaWQ6ICQoJyNjb21tdW5pdHlfaWQnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiBja2Vja2VkVXNlcklEXHJcbiAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcCgn5pON5L2c5oiQ5Yqf77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvc21hbGxDb21tdW5pdHkvY29tbXVuaXR5TGlzdFwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAvLyAgIOiuvue9ruW+ruS/oeWlveWPi+S4uue+pOS4u1xyXG4gICAgICAgICQoXCIuR3JvdXBIb2xkZXJTZXRCb3hcIikub24oJ21vdXNlZW50ZXInLCcuc2V0V3hGcmllbmQnLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8g55Sf5oiQ5LqM57u056CBXHJcblxyXG4gICAgICAgICAgICBpID0gMDtcclxuICAgICAgICAgICAgdmFyIHFyY29kZUNvbmZpcm1QYXlEaXJDb2RlID0gbmV3IFFSQ29kZShkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInFySW1nSWRcIiksXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dDpRUkxpbmssXHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEyMCxcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEyMCxcclxuICAgICAgICAgICAgICAgICAgICBjb2xvckRhcmsgOiBcIiMwMDAwMDBcIixcclxuICAgICAgICAgICAgICAgICAgICBjb2xvckxpZ2h0IDogXCIjZmZmZmZmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgY29ycmVjdExldmVsIDogUVJDb2RlLkNvcnJlY3RMZXZlbC5MXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICQoXCIucXJDb2RlUGFwZXJcIikuZmFkZUluKDEwMCk7XHJcbiAgICAgICAgICAgIHJlbWFpblRpbWUoKTtcclxuXHJcblxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIi5Hcm91cEhvbGRlclNldEJveFwiKS5vbignbW91c2VsZWF2ZScsJy5zZXRXeEZyaWVuZCcsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBjbGVhclRpbWVvdXQoaVRpbWUpO1xyXG4gICAgICAgICAgICAkKFwiI3FySW1nSWRcIikuZW1wdHkoKTtcclxuICAgICAgICAgICAgJChcIi5xckNvZGVQYXBlclwiKS5mYWRlT3V0KDEwKTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcblxyXG5cclxuICAgIC8vICAgIOS4iuS4i+aetuaTjeS9nFxyXG4gICAgICAgICQoXCIudG9vbEJveFwiKS5vbignY2xpY2snLCcuY29tbXVuaXR5SGlkZScsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY29tbXVuaXR5SWQ9JCh0aGlzKS5kYXRhKCdpZCcpO1xyXG4gICAgICAgICAgICB2YXIgY29tbXVuaXR5U3RhdGU9MTtcclxuICAgICAgICAgICAgY2hhbmdlQ29tbXVuaXR5U3RhdGUoY29tbXVuaXR5SWQsIGNvbW11bml0eVN0YXRlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIi50b29sQm94XCIpLm9uKCdjbGljaycsJy5jb21tdW5pdHlTaG93JyxmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjb21tdW5pdHlJZD0kKHRoaXMpLmRhdGEoJ2lkJyk7XHJcbiAgICAgICAgICAgIHZhciBjb21tdW5pdHlTdGF0ZT0wO1xyXG4gICAgICAgICAgICBjaGFuZ2VDb21tdW5pdHlTdGF0ZShjb21tdW5pdHlJZCwgY29tbXVuaXR5U3RhdGUpO1xyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gY29tbXVuaXR5TGlzdDtcclxufSgpOyJdfQ==
