$(document).ready(function(){Business.init()});var Business=function(){var e={};var i=false;e.submitLimit=false;e.communityId=-1;e.type=-1;e.dynamicId=-1;e.init=function(){changeSaveFlag(true);e.type=$("#admin_data").data("type");e.communityId=$("#admin_data").data("community_id");if(e.type==1){e.dynamicId=GetQueryString("id")}$("#uploadFile").click(function(){$("#selectPdfFile").click()});$("#deleteUploadedPdfFile").click(function(){$("#uploadedFileUrl").data("file_url","");$("#selectPdfFile").val("");$(".uploadBoxPdf").fadeOut(100)});$(".uploadFileBtnWrapper").on("change","#selectPdfFile",function(){if(!i){n(this.files,"pdf","Pdf",20)}else{baseUtils.show.redTip("文件正在上传中，请稍后再试")}});$("#releaseDynamic").click(function(){if(e.submitLimit==true){baseUtils.show.redTip("正在提交中，请稍后再试");return false}if(i){baseUtils.show.redTip("文件正在上传中，请稍后再提交");return false}var t={};var l=$("#dynamicTitle").val();if(l==""||l==undefined){baseUtils.show.redTip("请输入动态标题");return false}t["title"]=l;var a=UE.getEditor("container");var n=a.getContent();var d=a.getPlainTxt();if(n==""||n==undefined){baseUtils.show.redTip("请输入动态内容");return false}t["org_content"]=n;t["content"]=d;t["community_id"]=e.communityId;var o=$(".selectItem input:checked").val();var s=$("#uploadedFileUrl").data("file_url");var u=$("#uploadedFileUrl").data("file_name");var c=$("#uploadedFileUrl").data("file_size");if(s!=""&&s!=undefined){t["file_url"]=s;t["file_name"]=u;t["file_size"]=c}else{t["file_url"]="";t["file_name"]="";t["file_size"]=""}var f="";if(e.type==1){t["id"]=e.dynamicId;f="/smallCommunity/updateDynamic"}else{f="/smallCommunity/uploadDynamic"}e.submitLimit=true;$.ajax(f,{type:"POST",dataType:"json",data:{params:t,push_state:o},success:function(i){if(i.code==0){if(e.type==1){baseUtils.show.blueTip("保存编辑成功")}else{baseUtils.show.blueTip("发布动态成功")}setTimeout(function(){window.location.href="/smallCommunity/dynamicList?community_id="+e.communityId},700)}else{baseUtils.show.redTip("发布出现问题，请稍后再试");e.submitLimit=false}},error:function(i,t,l){e.submitLimit=false;console.log(l);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$(".selectItem label").on("click",function(){var e=$(this).attr("value");if(e==1){t(e)}})};function t(i){console.count("ajax方法");$.ajax("/smallCommunity/communityFeedPersonModelPush",{type:"POST",data:{data:i},dataType:"JSON",success:function(e){console.log(e);if(e.code==0){baseUtils.show.blueTip(i==1?"服务号通知已开启":"服务号已关闭")}else if(e.code==-1){$.alert(e.msg,{onOk:function(){window.location.href="/manage_function"}});$("#closeItem").prop("checked",true)}else{baseUtils.show.redTip(i==1?"服务号通开启失败":"服务号通关闭失败")}},error:function(i,t,l){e.submitLimit=false;console.log(l);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function l(e){var i=null;if(window.createObjectURL!=undefined){i=window.createObjectURL(e)}else if(window.URL!=undefined){i=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){i=window.webkitURL.createObjectURL(e)}return i}function a(e){if(window.revokeObjectURL!=undefined){window.revokeObjectURL(e)}else if(window.URL!=undefined){window.URL.revokeObjectURL(e)}else if(window.webkitURL!=undefined){window.webkitURL.revokeObjectURL(e)}}function n(e,t,l,a){if(e&&e.length>0){var n=e[0];var o=n.name;if(!o.toLowerCase().endsWith("pdf")){baseUtils.show.redTip("请选择 pdf 格式的文件");$("#selectPdfFile").remove();$("#uploadedFileUrl").before('<input class="selectPdfFileInput" id="selectPdfFile" type="file" accept="application/pdf"/>');return false}if($uploadFile.checkFileSize(n,a)){var s=(n.size/(1024*1024)).toFixed(2);$("#uploadedFileUrl").data("file_size",s);$("#audioURL"+l).hide();$(".uploadBox"+l).fadeIn(300);d(o,s);$("#uploadedFileUrl").data("file_name",o);i=true;$uploadFile.uploadRes(n,t,function(e){var i=parseInt(e*100);$(".uploadPLineActive"+l).css("width",i+"%");$(".uploadPercent"+l).text(i+"%")},function(e){i=false;console.log(e);baseUtils.show.blueTip("上传成功！");$(".uploadPLine"+l).hide();$(".upload"+l+"Name").show();$(".uploadPercent"+l).text("删除");var t=e.data.access_url;$("#uploadedFileUrl").data("file_url",t)},function(e){i=false;console.error("上传失败!!!");console.log(e);baseUtils.show.redTip("上传失败！")})}else{baseUtils.show.redTip("上传失败，请勿上传超过 "+a+"Mb 的PDF文件");$(".upLoad"+l).val("")}}else{console.log("网络错误，请稍后再试！")}}function d(e,i){$(".uploadPdfName").html(e).hide();$(".uploadPdfSize span").html(i);$(".uploadPLinePdf").show().find(".uploadPLineActivePdf").css("width","0");$(".uploadPercentPdf").html("")}return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZUR5bmFtaWMuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJCdXNpbmVzcyIsImluaXQiLCJpc1BkZkZpbGVVcGxvYWRpbmciLCJzdWJtaXRMaW1pdCIsImNvbW11bml0eUlkIiwidHlwZSIsImR5bmFtaWNJZCIsImNoYW5nZVNhdmVGbGFnIiwiZGF0YSIsIkdldFF1ZXJ5U3RyaW5nIiwiY2xpY2siLCJ2YWwiLCJmYWRlT3V0Iiwib24iLCJyZXNVcGxvYWQiLCJ0aGlzIiwiZmlsZXMiLCJiYXNlVXRpbHMiLCJzaG93IiwicmVkVGlwIiwicGFyYW1zIiwiZHluYW1pY1RpdGxlIiwidW5kZWZpbmVkIiwidWUiLCJVRSIsImdldEVkaXRvciIsIm9yZ19jb250ZW50IiwiZ2V0Q29udGVudCIsImRlc2NyYiIsImdldFBsYWluVHh0IiwicHVzaF9zdGF0ZSIsInBkZkZpbGVVcmwiLCJwZGZGaWxlTmFtZSIsInBkZkZpbGVTaXplIiwicG9zdFVybCIsImFqYXgiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb2RlIiwiYmx1ZVRpcCIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJlcnJvciIsInhociIsInN0YXR1cyIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJrZXkiLCJhdHRyIiwic2V0U2VydmljZSIsImNvdW50IiwiYWxlcnQiLCJtc2ciLCJvbk9rIiwicHJvcCIsImdldE9iamVjdFVSTCIsImZpbGUiLCJ1cmwiLCJjcmVhdGVPYmplY3RVUkwiLCJVUkwiLCJ3ZWJraXRVUkwiLCJyZW1vdmVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJyZXNUeXBlIiwicmVzVHlwZUNsYXNzIiwicmVzTGltaXRTaXplIiwibGVuZ3RoIiwibmFtZSIsInRvTG93ZXJDYXNlIiwiZW5kc1dpdGgiLCJyZW1vdmUiLCJiZWZvcmUiLCIkdXBsb2FkRmlsZSIsImNoZWNrRmlsZVNpemUiLCJmaWxlU2l6ZSIsInNpemUiLCJ0b0ZpeGVkIiwiaGlkZSIsImZhZGVJbiIsImluaXRGaWxlQW5kUHJvZ3Jlc3NCYXIiLCJ1cGxvYWRSZXMiLCJwcm9ncmVzcyIsInBhcnNlSW50IiwiY3NzIiwidGV4dCIsInJlc1VybCIsImFjY2Vzc191cmwiLCJmaWxlTmFtZSIsImh0bWwiLCJmaW5kIl0sIm1hcHBpbmdzIjoiQUFJQUEsRUFBRUMsVUFBVUMsTUFBTSxXQUVkQyxTQUFTQyxRQUdiLElBQUlELFVBQVcsV0FFWCxHQUFJQSxLQUVKLElBQUlFLEdBQXFCLEtBRXpCRixHQUFTRyxZQUFjLEtBQ3ZCSCxHQUFTSSxhQUFlLENBQ3hCSixHQUFTSyxNQUFRLENBQ2pCTCxHQUFTTSxXQUFhLENBRXRCTixHQUFTQyxLQUFPLFdBR1pNLGVBQWUsS0FFZlAsR0FBU0ssS0FBT1IsRUFBRSxlQUFlVyxLQUFLLE9BQ3RDUixHQUFTSSxZQUFjUCxFQUFFLGVBQWVXLEtBQUssZUFDN0MsSUFBSVIsRUFBU0ssTUFBUSxFQUFHLENBQ3BCTCxFQUFTTSxVQUFZRyxlQUFlLE1BSXhDWixFQUFFLGVBQWVhLE1BQU0sV0FDbkJiLEVBQUUsa0JBQWtCYSxTQUl4QmIsR0FBRSwwQkFBMEJhLE1BQU0sV0FDOUJiLEVBQUUsb0JBQW9CVyxLQUFLLFdBQVksR0FDdkNYLEdBQUUsa0JBQWtCYyxJQUFJLEdBQ3hCZCxHQUFFLGlCQUFpQmUsUUFBUSxNQUkvQmYsR0FBRSx5QkFBeUJnQixHQUFHLFNBQVUsaUJBQWtCLFdBQ3RELElBQUtYLEVBQW9CLENBQ3JCWSxFQUFVQyxLQUFLQyxNQUFPLE1BQU8sTUFBTyxRQUNqQyxDQUNIQyxVQUFVQyxLQUFLQyxPQUFPLG1CQUs5QnRCLEdBQUUsbUJBQW1CYSxNQUFNLFdBR3ZCLEdBQUlWLEVBQVNHLGFBQWUsS0FBTSxDQUM5QmMsVUFBVUMsS0FBS0MsT0FBTyxjQUN0QixPQUFPLE9BSVgsR0FBSWpCLEVBQW9CLENBQ3BCZSxVQUFVQyxLQUFLQyxPQUFPLGlCQUN0QixPQUFPLE9BTVgsR0FBSUMsS0FFSixJQUFJQyxH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LEVBQU8sSUFFL0JYLEdBQUUscUJBQXVCdUUsR0FBY21CLElBQUksUUFBU0YsRUFBVyxJQUMvRHhGLEdBQUUsaUJBQW1CdUUsR0FBY29CLEtBQUtILEVBQVcsTUFHdkQsU0FBVTdFLEdBQ05OLEVBQXFCLEtBQ3JCK0MsU0FBUUMsSUFBSTFDLEVBQ1pTLFdBQVVDLEtBQUtzQixRQUFRLFFBQ3ZCM0MsR0FBRSxlQUFpQnVFLEdBQWNhLE1BQ2pDcEYsR0FBRSxVQUFZdUUsRUFBZSxRQUFRbEQsTUFDckNyQixHQUFFLGlCQUFtQnVFLEdBQWNvQixLQUFLLEtBQ3hDLElBQUlDLEdBQVNqRixFQUFLQSxLQUFLa0YsVUFDdkI3RixHQUFFLG9CQUFvQlcsS0FBSyxXQUFZaUYsSUFJM0MsU0FBVWpGLEdBQ05OLEVBQXNCLEtBQ3RCK0MsU0FBUUosTUFBTSxVQUNkSSxTQUFRQyxJQUFJMUMsRUFDWlMsV0FBVUMsS0FBS0MsT0FBTyxlQUUzQixDQUNIRixVQUFVQyxLQUFLQyxPQUFPLGVBQWlCa0QsRUFBZSxZQUN0RHhFLEdBQUUsVUFBVXVFLEdBQWN6RCxJQUFJLFNBRS9CLENBQ0hzQyxRQUFRQyxJQUFJLGdCQUtwQixRQUFTaUMsR0FBdUJRLEVBQVViLEdBRXRDakYsRUFBRSxrQkFBa0IrRixLQUFLRCxHQUFVVixNQUNuQ3BGLEdBQUUsdUJBQXVCK0YsS0FBS2QsRUFDOUJqRixHQUFFLG1CQUFtQnFCLE9BQ2hCMkUsS0FBSyx5QkFBeUJOLElBQUksUUFBUyxJQUNoRDFGLEdBQUUscUJBQXFCK0YsS0FBSyxJQUloQyxNQUFPNUYiLCJmaWxlIjoibWFuYWdlRHluYW1pYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFkbWluaXN0cmF0b3Igb24gMjAxNy81LzIuXHJcbiAqL1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG5cclxuICAgIEJ1c2luZXNzLmluaXQoKTtcclxufSlcclxuXHJcbnZhciBCdXNpbmVzcyA9IChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIEJ1c2luZXNzID0ge307XHJcblxyXG4gICAgdmFyIGlzUGRmRmlsZVVwbG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgIEJ1c2luZXNzLnN1Ym1pdExpbWl0ID0gZmFsc2U7ICAgLy/mj5DkuqTpmZDliLZcclxuICAgIEJ1c2luZXNzLmNvbW11bml0eUlkID0gLTE7XHJcbiAgICBCdXNpbmVzcy50eXBlID0gLTE7ICAgICAgICAgICAgIC8vICAxIC0g57yW6L6RIO+8myAwIC0g5paw5bu6XHJcbiAgICBCdXNpbmVzcy5keW5hbWljSWQgPSAtMTtcclxuXHJcbiAgICBCdXNpbmVzcy5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAvL+eCueWHu+S+p+i+ueagj+emu+W8gOaXtueahOW8ueahhlxyXG4gICAgICAgIGNoYW5nZVNhdmVGbGFnKHRydWUpO1xyXG5cclxuICAgICAgICBCdXNpbmVzcy50eXBlID0gJChcIiNhZG1pbl9kYXRhXCIpLmRhdGEoXCJ0eXBlXCIpO1xyXG4gICAgICAgIEJ1c2luZXNzLmNvbW11bml0eUlkID0gJChcIiNhZG1pbl9kYXRhXCIpLmRhdGEoXCJjb21tdW5pdHlfaWRcIik7XHJcbiAgICAgICAgaWYgKEJ1c2luZXNzLnR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICBCdXNpbmVzcy5keW5hbWljSWQgPSBHZXRRdWVyeVN0cmluZyhcImlkXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/pgInmi6npnIDopoHkuIrkvKDnmoTmlofku7ZcclxuICAgICAgICAkKFwiI3VwbG9hZEZpbGVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKFwiI3NlbGVjdFBkZkZpbGVcIikuY2xpY2soKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/liKDpmaTlt7Lnu4/kuIrkvKDnmoRwZGbmlofku7ZcclxuICAgICAgICAkKFwiI2RlbGV0ZVVwbG9hZGVkUGRmRmlsZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoXCIjdXBsb2FkZWRGaWxlVXJsXCIpLmRhdGEoXCJmaWxlX3VybFwiLCBcIlwiKTtcclxuICAgICAgICAgICAgJChcIiNzZWxlY3RQZGZGaWxlXCIpLnZhbChcIlwiKTtcclxuICAgICAgICAgICAgJChcIi51cGxvYWRCb3hQZGZcIikuZmFkZU91dCgxMDApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+WkhOeQhumAieaLqeaWh+S7tuWQjueahOS4iuS8oFxyXG4gICAgICAgICQoXCIudXBsb2FkRmlsZUJ0bldyYXBwZXJcIikub24oXCJjaGFuZ2VcIiwgXCIjc2VsZWN0UGRmRmlsZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICghaXNQZGZGaWxlVXBsb2FkaW5nKSB7XHJcbiAgICAgICAgICAgICAgICByZXNVcGxvYWQodGhpcy5maWxlcywgXCJwZGZcIiwgXCJQZGZcIiwgMjApO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5paH5Lu25q2j5Zyo5LiK5Lyg5Lit77yM6K+356iN5ZCO5YaN6K+VXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5Y+R5biD5Yqo5oCBXHJcbiAgICAgICAgJChcIiNyZWxlYXNlRHluYW1pY1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAvLyAg6Ziy5q2i6YeN5aSN5o+Q5LqkXHJcbiAgICAgICAgICAgIGlmIChCdXNpbmVzcy5zdWJtaXRMaW1pdCA9PSB0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmraPlnKjmj5DkuqTkuK3vvIzor7fnqI3lkI7lho3or5VcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vICDmlofku7bmraPlnKjkuIrkvKDkuK1cclxuICAgICAgICAgICAgaWYgKGlzUGRmRmlsZVVwbG9hZGluZykge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5paH5Lu25q2j5Zyo5LiK5Lyg5Lit77yM6K+356iN5ZCO5YaN5o+Q5LqkXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvKipcclxuICAgICAgICAgICAgICog6ZyA6KaB55qE5Y+C5pWwIO+8miBjb21tdW5pdHlfaWQgLSB0aXRsZSAtIG9yZ19jb250ZW50IC0gY29udGVudCAtIGZpbGVfdXJsIC0gZmlsZV9uYW1lIC0gZmlsZV9zaXplXHJcbiAgICAgICAgICAgICAqL1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge307XHJcblxyXG4gICAgICAgICAgICB2YXIgZHluYW1pY1RpdGxlID0gJChcIiNkeW5hbWljVGl0bGVcIikudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChkeW5hbWljVGl0bGUgPT0gJycgfHwgZHluYW1pY1RpdGxlID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+36L6T5YWl5Yqo5oCB5qCH6aKYXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhcmFtc1sndGl0bGUnXSA9IGR5bmFtaWNUaXRsZTtcclxuXHJcbiAgICAgICAgICAgIC8vICDojrflj5bliqjmgIEgaHRtbOWGheWuue+8jOi/lOWbnjogPHA+aGVsbG88L3A+XHJcbiAgICAgICAgICAgIHZhciB1ZSA9IFVFLmdldEVkaXRvcignY29udGFpbmVyJyk7XHJcbiAgICAgICAgICAgIHZhciBvcmdfY29udGVudCA9IHVlLmdldENvbnRlbnQoKTsgICAgLy8gIOWOn+Wni2h0bWzlhoXlrrlcclxuICAgICAgICAgICAgdmFyIGRlc2NyYiA9IHVlLmdldFBsYWluVHh0KCk7ICAgICAgICAvLyAg57qv5paH5pysXHJcblxyXG4gICAgICAgICAgICBpZiAob3JnX2NvbnRlbnQgPT0gJycgfHwgb3JnX2NvbnRlbnQgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fovpPlhaXliqjmgIHlhoXlrrlcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhcmFtc1snb3JnX2NvbnRlbnQnXSA9IG9yZ19jb250ZW50O1xyXG4gICAgICAgICAgICBwYXJhbXNbJ2NvbnRlbnQnXSA9IGRlc2NyYjtcclxuXHJcbiAgICAgICAgICAgIHBhcmFtc1snY29tbXVuaXR5X2lkJ10gPSBCdXNpbmVzcy5jb21tdW5pdHlJZDtcclxuXHJcbiAgICAgICAgICAgIC8v6I635Y+W5pyA5ZCO5pyN5Yqh5Y+36YCa55+l5YC8XHJcbiAgICAgICAgICAgIHZhciBwdXNoX3N0YXRlID0gJCgnLnNlbGVjdEl0ZW0gaW5wdXQ6Y2hlY2tlZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAvL+aWh+S7tuWxnuaAp1xyXG4gICAgICAgICAgICB2YXIgcGRmRmlsZVVybCA9ICQoXCIjdXBsb2FkZWRGaWxlVXJsXCIpLmRhdGEoXCJmaWxlX3VybFwiKTtcclxuICAgICAgICAgICAgdmFyIHBkZkZpbGVOYW1lID0gJChcIiN1cGxvYWRlZEZpbGVVcmxcIikuZGF0YShcImZpbGVfbmFtZVwiKTtcclxuICAgICAgICAgICAgdmFyIHBkZkZpbGVTaXplID0gJChcIiN1cGxvYWRlZEZpbGVVcmxcIikuZGF0YShcImZpbGVfc2l6ZVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChwZGZGaWxlVXJsICE9IFwiXCIgJiYgcGRmRmlsZVVybCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtc1snZmlsZV91cmwnXSA9IHBkZkZpbGVVcmw7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ2ZpbGVfbmFtZSddID0gcGRmRmlsZU5hbWU7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ2ZpbGVfc2l6ZSddID0gcGRmRmlsZVNpemU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ2ZpbGVfdXJsJ10gPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zWydmaWxlX25hbWUnXSA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ2ZpbGVfc2l6ZSddID0gXCJcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHBvc3RVcmwgPSBcIlwiO1xyXG4gICAgICAgICAgICBpZiAoQnVzaW5lc3MudHlwZSA9PSAxKSB7ICAgLy8gIOe8lui+kVxyXG4gICAgICAgICAgICAgICAgcGFyYW1zWydpZCddID0gQnVzaW5lc3MuZHluYW1pY0lkO1xyXG4gICAgICAgICAgICAgICAgcG9zdFVybCA9IFwiL3NtYWxsQ29tbXVuaXR5L3VwZGF0ZUR5bmFtaWNcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHsgICAgLy8gIOaWsOW7ulxyXG4gICAgICAgICAgICAgICAgcG9zdFVybCA9IFwiL3NtYWxsQ29tbXVuaXR5L3VwbG9hZER5bmFtaWNcIjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgQnVzaW5lc3Muc3VibWl0TGltaXQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgJC5hamF4KHBvc3RVcmwsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLFxyXG4gICAgICAgICAgICAgICAgICAgIHB1c2hfc3RhdGU6cHVzaF9zdGF0ZVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoQnVzaW5lc3MudHlwZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5L+d5a2Y57yW6L6R5oiQ5YqfXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuWPkeW4g+WKqOaAgeaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPVwiL3NtYWxsQ29tbXVuaXR5L2R5bmFtaWNMaXN0P2NvbW11bml0eV9pZD1cIiArIEJ1c2luZXNzLmNvbW11bml0eUlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCA3MDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuWPkeW4g+WHuueOsOmXrumimO+8jOivt+eojeWQjuWGjeivlVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgQnVzaW5lc3Muc3VibWl0TGltaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgQnVzaW5lc3Muc3VibWl0TGltaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuc2VsZWN0SXRlbSBsYWJlbCcpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGtleT0kKHRoaXMpLmF0dHIoJ3ZhbHVlJyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGtleSk7XHJcbiAgICAgICAgICAgIGlmKGtleSA9PSAxKXtcclxuICAgICAgICAgICAgICAgIHNldFNlcnZpY2Uoa2V5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfTtcclxuXHJcbiAgICAvL+acjeWKoeWPt+a2iOaBr+mAmuefpWFqYXjmlrnms5VcclxuICAgIGZ1bmN0aW9uIHNldFNlcnZpY2Uoa2V5KXtcclxuICAgICAgICBjb25zb2xlLmNvdW50KCdhamF45pa55rOVJylcclxuICAgICAgICAkLmFqYXgoJy9zbWFsbENvbW11bml0eS9jb21tdW5pdHlGZWVkUGVyc29uTW9kZWxQdXNoJyx7XHJcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxyXG4gICAgICAgICAgICBkYXRhOntcclxuICAgICAgICAgICAgICAgIGRhdGE6a2V5XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOidKU09OJyxcclxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5jb2RlID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoa2V5ID09IDE/J+acjeWKoeWPt+mAmuefpeW3suW8gOWQryc6J+acjeWKoeWPt+W3suWFs+mXrScpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoZGF0YS5jb2RlID09IC0xKXtcclxuICAgICAgICAgICAgICAgICAgICAkLmFsZXJ0KGRhdGEubXNnLHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25PazpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCIvbWFuYWdlX2Z1bmN0aW9uXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNjbG9zZUl0ZW0nKS5wcm9wKCdjaGVja2VkJyx0cnVlKTtcclxuICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChrZXkgPT0gMT8n5pyN5Yqh5Y+36YCa5byA5ZCv5aSx6LSlJzon5pyN5Yqh5Y+36YCa5YWz6Zet5aSx6LSlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/lpLHotKXliqDlhaXpgInpobnov5Tlm55cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBCdXNpbmVzcy5zdWJtaXRMaW1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgLy/lj5bmtojkuIrkvKDliKTmlq3lj4LmlbBcclxuICAgIC8vIHZhciB1cGxvYWRDYW5jZWw9MDtcclxuICAgIGZ1bmN0aW9uIGdldE9iamVjdFVSTChmaWxlKSB7XHJcbiAgICAgICAgdmFyIHVybCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5jcmVhdGVPYmplY3RVUkwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy53ZWJraXRVUkwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy53ZWJraXRVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZU9iamVjdFVSTCh1cmwpIHsvL+mHiuaUvui1hOa6kFVSTFxyXG4gICAgICAgIGlmICh3aW5kb3cucmV2b2tlT2JqZWN0VVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB3aW5kb3cucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LndlYmtpdFVSTCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgd2luZG93LndlYmtpdFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8v6LWE5rqQ5LiK5Lyg5Ye95pWwKOWPguaVsO+8mnJlc1R5cGU66LWE5rqQ57G75Z6LLHJlc1R5cGVDbGFzczrotYTmupDnsbvlnovkuK3nu4bliIbnmoTnp43nsbsscmVzTGltaXRTaXplOui1hOa6kOmZkOWItuWkp+WwjylcclxuICAgIGZ1bmN0aW9uIHJlc1VwbG9hZChmaWxlcywgcmVzVHlwZSwgcmVzVHlwZUNsYXNzLCByZXNMaW1pdFNpemUpIHtcclxuICAgICAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgZmlsZSA9IGZpbGVzWzBdO1xyXG4gICAgICAgICAgICB2YXIgcGRmRmlsZU5hbWUgPSBmaWxlLm5hbWU7XHJcbiAgICAgICAgICAgIGlmICghcGRmRmlsZU5hbWUudG9Mb3dlckNhc2UoKS5lbmRzV2l0aChcInBkZlwiKSkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+36YCJ5oupIHBkZiDmoLzlvI/nmoTmlofku7ZcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3NlbGVjdFBkZkZpbGVcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3VwbG9hZGVkRmlsZVVybFwiKS5iZWZvcmUoJzxpbnB1dCBjbGFzcz1cInNlbGVjdFBkZkZpbGVJbnB1dFwiIGlkPVwic2VsZWN0UGRmRmlsZVwiIHR5cGU9XCJmaWxlXCIgYWNjZXB0PVwiYXBwbGljYXRpb24vcGRmXCIvPicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyDpmZDliLbotYTmupDlnKgqTULlhoVcclxuICAgICAgICAgICAgaWYgKCR1cGxvYWRGaWxlLmNoZWNrRmlsZVNpemUoZmlsZSwgcmVzTGltaXRTaXplKSkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBmaWxlU2l6ZSA9IChmaWxlLnNpemUgLyAoMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICAgICAgJChcIiN1cGxvYWRlZEZpbGVVcmxcIikuZGF0YShcImZpbGVfc2l6ZVwiLCBmaWxlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcjYXVkaW9VUkwnK3Jlc1R5cGVDbGFzcykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJChcIi51cGxvYWRCb3hcIityZXNUeXBlQ2xhc3MpLmZhZGVJbigzMDApO1xyXG4gICAgICAgICAgICAgICAgLy8g5Yid5aeL5YyW5paH5Lu25Lul5Y+K6L+b5bqm5p2hXHJcbiAgICAgICAgICAgICAgICBpbml0RmlsZUFuZFByb2dyZXNzQmFyKHBkZkZpbGVOYW1lLCBmaWxlU2l6ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJChcIiN1cGxvYWRlZEZpbGVVcmxcIikuZGF0YShcImZpbGVfbmFtZVwiLCBwZGZGaWxlTmFtZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgaXNQZGZGaWxlVXBsb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICR1cGxvYWRGaWxlLnVwbG9hZFJlcyhmaWxlLCByZXNUeXBlLCBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBwYXJzZUludChkYXRhICogMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhwcm9ncmVzcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUExpbmVBY3RpdmVcIiArIHJlc1R5cGVDbGFzcykuY3NzKFwid2lkdGhcIiwgcHJvZ3Jlc3MgKyAnJScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFBlcmNlbnRcIiArIHJlc1R5cGVDbGFzcykudGV4dChwcm9ncmVzcyArIFwiJVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOaIkOWKn+Wbnuiwg1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzUGRmRmlsZVVwbG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuS4iuS8oOaIkOWKn++8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi51cGxvYWRQTGluZVwiICsgcmVzVHlwZUNsYXNzKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkXCIgKyByZXNUeXBlQ2xhc3MgKyBcIk5hbWVcIikuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFBlcmNlbnRcIiArIHJlc1R5cGVDbGFzcykudGV4dChcIuWIoOmZpFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc1VybCA9IGRhdGEuZGF0YS5hY2Nlc3NfdXJsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3VwbG9hZGVkRmlsZVVybFwiKS5kYXRhKFwiZmlsZV91cmxcIiwgcmVzVXJsKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDlpLHotKXlm57osINcclxuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1BkZkZpbGVVcGxvYWRpbmcgID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLkuIrkvKDlpLHotKUhISFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIrkvKDlpLHotKXvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIrkvKDlpLHotKXvvIzor7fli7/kuIrkvKDotoXov4cgXCIgKyByZXNMaW1pdFNpemUgKyBcIk1iIOeahFBERuaWh+S7tlwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIudXBMb2FkXCIrcmVzVHlwZUNsYXNzKS52YWwoXCJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIue9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG5cclxuICAgIC8vIOWIneWni+WMluaWh+S7tuS7peWPiui/m+W6puadoVxyXG4gICAgZnVuY3Rpb24gaW5pdEZpbGVBbmRQcm9ncmVzc0JhcihmaWxlTmFtZSwgZmlsZVNpemUpIHtcclxuXHJcbiAgICAgICAgJChcIi51cGxvYWRQZGZOYW1lXCIpLmh0bWwoZmlsZU5hbWUpLmhpZGUoKTtcclxuICAgICAgICAkKFwiLnVwbG9hZFBkZlNpemUgc3BhblwiKS5odG1sKGZpbGVTaXplKTtcclxuICAgICAgICAkKFwiLnVwbG9hZFBMaW5lUGRmXCIpLnNob3coKVxyXG4gICAgICAgICAgICAuZmluZChcIi51cGxvYWRQTGluZUFjdGl2ZVBkZlwiKS5jc3MoXCJ3aWR0aFwiLCAnMCcpO1xyXG4gICAgICAgICQoXCIudXBsb2FkUGVyY2VudFBkZlwiKS5odG1sKCcnKTtcclxuXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIEJ1c2luZXNzO1xyXG5cclxufSkoKTtcclxuXHJcbiJdfQ==
