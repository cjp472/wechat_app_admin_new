$(document).ready(function(){$exeBookList.init()});$exeBookList=function(){var e={addUserType:1};var i={userListPageIndex:1,userListSearchContent:"",isSearchUserWindowLoading:false,isSearchUserWindowToBottom:false};e.init=function(){$(".operateList > li.operate").click(function(){var e=$(this),i=e.parents(".exerciseBookOperateArea"),a=e.data("type"),s=i.data("resource_id"),n=i.data("exercise_book_id");switch(a){case"role_manage":baseUtils.showWindow("roleManageWindow");break;case"exercise_list":window.location.href="/exercise/exercise_list";break;case"edit_exercise_book":window.location.href="/exercise/edit_exercise_book?exercise_book_id="+n;break;default:console.log("参数错误");break}});$("#windowCloseIcon1").click(function(){baseUtils.hideWindow("roleManageWindow")});$("#windowHoverBox").on("click","li",function(){var i=$(this).data("type");if(i=="add_teacher"){e.addUserType=1}else if(i=="add_assistant"){e.addUserType=0}a()});$(".roleTypeRadio").on("click",function(){var e=$(this);$(".roleTypeRadio").children(".circleRadio").removeClass("radioActive");$(this).children(".circleRadio").addClass("radioActive")});$("#windowCloseIcon2").click(function(){baseUtils.hideWindow("searchUserWindow");baseUtils.showWindow("roleManageWindow")});$("#searchUserWindow").on("click","#windowSearchBtn",function(){i.userListPageIndex=1;i.userListSearchContent=$.trim($("#windowSearchInput").val());i.isSearchUserWindowToBottom=false;$("#searchUserWindow .windowContentWrapper2").scrollTop(0);s()});$("#windowSearchInput").on("keypress",function(e){if(e.keyCode==13){$("#windowSearchBtn").click()}});$("#searchUserWindow .windowContentWrapper2").scroll(function(e){var a=$("#windowContent2").height(),n=$(this).height(),o=$(this).scrollTop();if(o+n>=a-5&&!i.isSearchUserWindowLoading&&!i.isSearchUserWindowToBottom){s()}});$("#confirmSaveAddedUser").click(function(){var e=$(".selectSingleGuest:checked"),i={};e.each(function(){var e=$(this).parents(".singleGuestInfo2"),a=e.data("user_id"),s=e.data("wx_avatar"),n=e.data("wx_nickname");if(i.userId==undefined){i.userId={user_id:a,wx_avatar:s,wx_nickname:n}}})})};function a(){baseUtils.hideWindow("roleManageWindow");$("#searchUserWindow").find(".headerText1").text(e.addUserType==1?"添加老师":"添加助教");baseUtils.showWindow("searchUserWindow");i.isSearchUserWindowToBottom=false;i.userListPageIndex=1;i.userListSearchContent="";s()}function s(){baseUtils.showLoading("searchUserLoading");i.isSearchUserWindowLoading=true;$.ajax("/zbsearch",{type:"GET",dataType:"json",data:{page:i.userListPageIndex,search:i.userListSearchContent},success:function(e){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;var a=$("#windowContent2"),s="",n=e.page_offset;$.each(e.data,function(e,i){s+='<div class="singleGuestInfo2" data-user_id="'+i.user_id+'" data-wx_avatar="'+i.wx_avatar+'" data-wx_nickname="'+i.wx_nickname+'">'+'<input type="checkbox" class="selectSingleGuest" id="'+i.user_id+'">'+'<label for="'+i.user_id+'" class="singleGuestLabel">'+'<img src="'+i.wx_avatar+'" class="singleGuestAvatar2">'+'<div class="singleGuestName2" title="'+i.wx_nickname+'">'+i.wx_nickname+"</div>"+"</label>"+"</div>"});if(s.length==0){s='<div class="windowNoData" id="windowNoData">暂无数据</div>'}if(i.userListPageIndex==1){a.html(s);a.append('<div class="isDown">更多数据加载中</div>')}else{a.find(".isDown").before(s)}if(n.current_page>=n.total_pages){var o=0;if(n.total_count>10){a.find(".isDown").text("数据已加载完毕");o=3e3}else{o=0}setTimeout(function(){a.find(".isDown").hide()},o);i.isSearchUserWindowToBottom=true}i.userListPageIndex++},error:function(e,a,s){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;console.log(s);alert("服务器出小差了，请稍后再试！")}})}return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4ZXJjaXNlQm9va0xpc3QuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCIkZXhlQm9va0xpc3QiLCJpbml0IiwiYWRkVXNlclR5cGUiLCIkcHJpdmF0ZSIsInVzZXJMaXN0UGFnZUluZGV4IiwidXNlckxpc3RTZWFyY2hDb250ZW50IiwiaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZyIsImlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tIiwiY2xpY2siLCIkc2VsZiIsInRoaXMiLCIkcGFyZW50IiwicGFyZW50cyIsInR5cGUiLCJkYXRhIiwicmVzSWQiLCJleGVyY2lzZUJvb2tJZCIsImJhc2VVdGlscyIsInNob3dXaW5kb3ciLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJjb25zb2xlIiwibG9nIiwiaGlkZVdpbmRvdyIsIm9uIiwib3BlblNlYXJjaFVzZXJXaW5kb3ciLCJjaGlsZHJlbiIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJ0cmltIiwidmFsIiwic2Nyb2xsVG9wIiwiZ2V0QWxsVXNlckxpc3QiLCJlIiwia2V5Q29kZSIsInNjcm9sbCIsIkRpdkhlaWdodCIsImhlaWdodCIsIlNjcm9sbEhlaWdodCIsIlNjcm9sbFRvcCIsImNoZWNrZWRVc2VyIiwidXNlckFyciIsImVhY2giLCJ1c2VySWQiLCJ3eEF2YXRhciIsInd4Tmlja25hbWUiLCJ1bmRlZmluZWQiLCJ1c2VyX2lkIiwid3hfYXZhdGFyIiwid3hfbmlja25hbWUiLCJmaW5kIiwidGV4dCIsInNob3dMb2FkaW5nIiwiYWpheCIsImRhdGFUeXBlIiwicGFnZSIsInNlYXJjaCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJoaWRlTG9hZGluZyIsIiRhcmVhIiwiaHRtbFN0ciIsIm9mZnNldCIsInBhZ2Vfb2Zmc2V0IiwiayIsInYiLCJsZW5ndGgiLCJodG1sIiwiYXBwZW5kIiwiYmVmb3JlIiwiY3VycmVudF9wYWdlIiwidG90YWxfcGFnZXMiLCJ0aW1lUmFuZ2UiLCJ0b3RhbF9jb3VudCIsInNldFRpbWVvdXQiLCJoaWRlIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJhbGVydCJdLCJtYXBwaW5ncyI6IkFBSUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FDZEMsYUFBYUMsUUFHakJELGNBQWUsV0FDWCxHQUFJQSxJQUNBRSxZQUFhLEVBR2pCLElBQUlDLElBQ0FDLGtCQUFtQixFQUNuQkMsc0JBQXVCLEdBQ3ZCQywwQkFBMkIsTUFDM0JDLDJCQUE0QixNQUdoQ1AsR0FBYUMsS0FBTyxXQUdoQkosRUFBRSw2QkFBNkJXLE1BQU0sV0FDakMsR0FBSUMsR0FBUVosRUFBRWEsTUFDVkMsRUFBVUYsRUFBTUcsUUFBUSw0QkFDeEJDLEVBQU9KLEVBQU1LLEtBQUssUUFDbEJDLEVBQVFKLEVBQVFHLEtBQUssZUFDckJFLEVBQWlCTCxFQUFRRyxLQUFLLG1CQUVsQyxRQUFRRCxHQUNKLElBQUssY0FDREksVUFBVUMsV0FBVyxtQkFDckIsTUFDSixLQUFLLGdCQUNEQyxPQUFPQyxTQUFTQyxLQUFPLHlCQUN2QixNQUNKLEtBQUsscUJBQ0RGLE9BQU9DLFNBQVNDLEtBQU8saURBQWlETCxDQUN4RSxNQUNKLFNBQ0lNLFFBQVFDLElBQUksT0FDWixTQU1aMUIsR0FBRSxxQkFBcUJXLE1BQU0sV0FDekJTLFVBQVVPLFdBQVcscUJBR3pCM0IsR0FBRSxtQkFBbUI0QixHQUFHLFFBQVMsS0FBTSxXQUNuQyxHQUFJWixHQUFPaEIsRUFBRWEsTUFBTUksS0FBSyxPQUN4QixJQUFJRCxHQUFRLGNBQWUsQ0FDdkJiLEVBQWFFLFlBQWMsTUFDeEIsSUFBSVcsR0FBUSxnQkFBaUIsQ0FDaENiLEVBQWFFLFlBQWMsRUFFL0J3QixLQUdKN0IsR0FBRSxrQkFBa0I0QixHQUFHLFFBQVMsV0FFNUIsR0FBSWhCLEdBQVFaLEVBQUVhLEtBR2RiLEdBQUUsa0JBQWtCOEIsU0FBUyxnQkFBZ0JDLFlBQVksY0FDekQvQixHQUFFYSxNQUFNaUIsU0FBUyxnQkFBZ0JFLFNBQVMsZ0JBSzlDaEMsR0FBRSxxQkFBcUJXLE1BQU0sV0FDekJTLFVBQVVPLFdBQVcsbUJBQ3JCUCxXQUFVQyxXQUFXLHFCQUd6QnJCLEdBQUUscUJBQXFCNEIsR0FBRyxRQUFTLG1CQUFvQixXQUNuRHRCLEVBQVNDLGtCQUFvQixDQUM3QkQsR0FBU0Usc0JBQXdCUixFQUFFaUMsS0FBS2pDLEVBQUUsc0JBQXNCa0MsTUFDaEU1QixHQUFTSSwyQkFBNkIsS0FDdENWLEdBQUUsNENBQTRDbUMsVUFBVSxFQUN4REMsTUFFSnBDLEdBQUUsc0JBQXNCNEIsR0FBRyxXQUFZLFNBQVVTLEdBQzdDLEdBQUlBLEVBQUVDLFNBQVcsR0FBSSxDQUNqQnRDLEVBQUUsb0JBQW9CVyxVQUk5QlgsR0FBRSw0Q0FBNEN1QyxPQUFPLFNBQVNGLEdBQzFELEdBQUlHLEdBQVl4QyxFQUFFLG1CQUFtQnlDLFNBQ2pDQyxFQUFlMUMsRUFBRWEsTUFBTTRCLFNBQ3ZCRSxFQUFZM0MsRUFBRWEsTUFBTXNCLFdBQ3hCLElBQUtRLEVBQVlELEdBQWdCRixFQUFZLElBQU9sQyxFQUFTRyw0QkFDckRILEVBQVNJLDJCQUE0QixDQUN6QzBCLE1BR1JwQyxHQUFFLHlCQUF5QlcsTUFBTSxXQUM3QixHQUFJaUMsR0FBYzVDLEVBQUUsOEJBQ2hCNkMsSUFDSkQsR0FBWUUsS0FBSyxXQUNiLEdBQUloQyxHQUFVZCxFQUFFYSxNQUFNRSxRQUFRLHFCQUMxQmdDLEVBQVNqQyxFQUFRRyxLQUFLLFdBQ3RCK0IsRUFBV2xDLEVBQVFHLEtBQUssYUFDeEJnQyxFQUFhbkMsRUFBUUcsS0FBSyxjQUU5QixJQUFJNEIsRUFBUUUsUUFBVUcsVUFBVyxDQUM3QkwsRUFBUUUsUUFDSkksUUFBU0osRUFDVEssVUFBV0osRUFDWEssWUFBYUosUUFVakMsU0FBU3BCLEtBQ0xULFVBQVVPLFdBQVcsbUJBRXJCM0IsR0FBRSxxQkFBcUJzRCxLQUFLLGdCQUFnQkMsS0FDdkNwRCxFQUFhRSxhQUFhLEVBQUcsT0FBTyxPQUV6Q2UsV0FBVUMsV0FBVyxtQkFFckJmLEdBQVNJLDJCQUE2QixLQUN0Q0osR0FBU0Msa0JBQW9CLENBQzdCRCxHQUFTRSxzQkFBd0IsRUFDakM0QixLQUVKLFFBQVNBLEtBQ0xoQixVQUFVb0MsWUFBWSxvQkFDdEJsRCxHQUFTRywwQkFBNEIsSUFDckNULEdBQUV5RCxLQUFLLGFBQ0h6QyxLQUFNLE1BQ04wQyxTQUFVLE9BQ1Z6QyxNQUNJMEMsS0FBTXJELEVBQVNDLGtCQUNmcUQsT0FBUXRELEVBQVNFLHVCQUVyQnFELFFBQVMsU0FBVUMsR0FDZjFDLFVBQVUyQyxZQUFZLG9CQUN0QnpELEdBQVNHLDBCQUE0QixLQUVyQyxJQUFJdUQsR0FBUWhFLEVBQUUsbUJBQ1ZpRSxFQUFVLEdBQ1ZDLEVBQVNKLEVBQU9LLFdBRXBCbkUsR0FBRThDLEtBQUtnQixFQUFPN0MsS0FBTSxTQUFVbUQsRUFBR0MsR0FDN0JKLEdBQ0ksK0NBQStDSSxFQUFFbEIsUUFDekMscUJBQXFCa0IsRUFBRWpCLFVBQVUsdUJBQXVCaUIsRUFBRWhCLFlBQVksS0FDMUUsd0RBQXdEZ0IsRUFBRWxCLFFBQVEsS0FDbEUsZUFBZWtCLEVBQUVsQixRQUFRLDhCQUNyQixhQUFha0IsRUFBRWpCLFVBQVUsZ0NBQ3pCLHdDQUF3Q2lCLEVBQUVoQixZQUFZLEtBQUtnQixFQUFFaEIsWUFBWSxTQUM3RSxXQUNKLFVBRVIsSUFBSVksRUFBUUssUUFBVSxFQUFHLENBQ3JCTCxFQUNJLHlEQUVSLEdBQUkzRCxFQUFTQyxtQkFBcUIsRUFBRyxDQUNqQ3lELEVBQU1PLEtBQUtOLEVBQ1hELEdBQU1RLE9BQU8seUNBQ1YsQ0FDSFIsRUFBTVYsS0FBSyxXQUFXbUIsT0FBT1IsR0FFakMsR0FBSUMsRUFBT1EsY0FBZ0JSLEVBQU9TLFlBQWEsQ0FDM0MsR0FBSUMsR0FBWSxDQUNoQixJQUFJVixFQUFPVyxZQUFjLEdBQUksQ0FDekJiLEVBQU1WLEtBQUssV0FBV0MsS0FBSyxVQUMzQnFCLEdBQVksUUFDVCxDQUNIQSxFQUFZLEVBRWhCRSxXQUFXLFdBQ1BkLEVBQU1WLEtBQUssV0FBV3lCLFFBQ3ZCSCxFQUNIdEUsR0FBU0ksMkJBQTZCLEtBRTFDSixFQUFTQyxxQkFHYnlFLE1BQU8sU0FBVUMsRUFBS0MsRUFBUUMsR0FDMUIvRCxVQUFVMkMsWUFBWSxvQkFDdEJ6RCxHQUFTRywwQkFBNEIsS0FDckNnQixTQUFRQyxJQUFJeUQsRUFDWkMsT0FBTSxxQkFLbEIsTUFBT2pGIiwiZmlsZSI6ImV4ZXJjaXNlQm9va0xpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTcvNy8zMS5cclxuICovXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAkZXhlQm9va0xpc3QuaW5pdCgpO1xyXG59KTtcclxuXHJcbiRleGVCb29rTGlzdCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJGV4ZUJvb2tMaXN0ID0ge1xyXG4gICAgICAgIGFkZFVzZXJUeXBlOiAxLCAvLzEt6ICB5biI77ybMC3liqnmlZlcclxuXHJcbiAgICB9O1xyXG4gICAgdmFyICRwcml2YXRlID0ge1xyXG4gICAgICAgIHVzZXJMaXN0UGFnZUluZGV4OiAxLFxyXG4gICAgICAgIHVzZXJMaXN0U2VhcmNoQ29udGVudDogXCJcIixcclxuICAgICAgICBpc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBpc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbTogZmFsc2UsXHJcbiAgICB9O1xyXG5cclxuICAgICRleGVCb29rTGlzdC5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAvL+S9nOS4muacrOeahOaTjeS9nFxyXG4gICAgICAgICQoXCIub3BlcmF0ZUxpc3QgPiBsaS5vcGVyYXRlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICRwYXJlbnQgPSAkc2VsZi5wYXJlbnRzKFwiLmV4ZXJjaXNlQm9va09wZXJhdGVBcmVhXCIpLFxyXG4gICAgICAgICAgICAgICAgdHlwZSA9ICRzZWxmLmRhdGEoXCJ0eXBlXCIpLFxyXG4gICAgICAgICAgICAgICAgcmVzSWQgPSAkcGFyZW50LmRhdGEoXCJyZXNvdXJjZV9pZFwiKSxcclxuICAgICAgICAgICAgICAgIGV4ZXJjaXNlQm9va0lkID0gJHBhcmVudC5kYXRhKFwiZXhlcmNpc2VfYm9va19pZFwiKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJvbGVfbWFuYWdlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImV4ZXJjaXNlX2xpc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL2V4ZXJjaXNlL2V4ZXJjaXNlX2xpc3RcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJlZGl0X2V4ZXJjaXNlX2Jvb2tcIjpcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL2V4ZXJjaXNlL2VkaXRfZXhlcmNpc2VfYm9vaz9leGVyY2lzZV9ib29rX2lkPVwiK2V4ZXJjaXNlQm9va0lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWPguaVsOmUmeivr1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqIOS6uuWRmOiuvue9rueql+WPoyAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgICQoXCIjd2luZG93Q2xvc2VJY29uMVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwicm9sZU1hbmFnZVdpbmRvd1wiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIiN3aW5kb3dIb3ZlckJveFwiKS5vbihcImNsaWNrXCIsIFwibGlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9ICQodGhpcykuZGF0YShcInR5cGVcIik7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IFwiYWRkX3RlYWNoZXJcIikge1xyXG4gICAgICAgICAgICAgICAgJGV4ZUJvb2tMaXN0LmFkZFVzZXJUeXBlID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IFwiYWRkX2Fzc2lzdGFudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkZXhlQm9va0xpc3QuYWRkVXNlclR5cGUgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wZW5TZWFyY2hVc2VyV2luZG93KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gcmFkaW8g5oyJ6ZKu54K55Ye75YiH5o2i5pWI5p6cXHJcbiAgICAgICAgJCgnLnJvbGVUeXBlUmFkaW8nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkc2VsZiA9ICQodGhpcyk7XHJcblxyXG5cclxuICAgICAgICAgICAgJCgnLnJvbGVUeXBlUmFkaW8nKS5jaGlsZHJlbignLmNpcmNsZVJhZGlvJykucmVtb3ZlQ2xhc3MoJ3JhZGlvQWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuY2hpbGRyZW4oJy5jaXJjbGVSYWRpbycpLmFkZENsYXNzKCdyYWRpb0FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKiog5Lq65ZGY5pCc57Si56qX5Y+jICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICQoXCIjd2luZG93Q2xvc2VJY29uMlwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwic2VhcmNoVXNlcldpbmRvd1wiKTtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v54K55Ye75pCc57SiXHJcbiAgICAgICAgJChcIiNzZWFyY2hVc2VyV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIjd2luZG93U2VhcmNoQnRuXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggPSAxO1xyXG4gICAgICAgICAgICAkcHJpdmF0ZS51c2VyTGlzdFNlYXJjaENvbnRlbnQgPSAkLnRyaW0oJChcIiN3aW5kb3dTZWFyY2hJbnB1dFwiKS52YWwoKSk7XHJcbiAgICAgICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tID0gZmFsc2U7XHJcbiAgICAgICAgICAgICQoJyNzZWFyY2hVc2VyV2luZG93IC53aW5kb3dDb250ZW50V3JhcHBlcjInKS5zY3JvbGxUb3AoMCk7XHJcbiAgICAgICAgICAgIGdldEFsbFVzZXJMaXN0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChcIiN3aW5kb3dTZWFyY2hJbnB1dFwiKS5vbihcImtleXByZXNzXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjd2luZG93U2VhcmNoQnRuXCIpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+a7keWKqOWKoOi9veabtOWkmlxyXG4gICAgICAgICQoJyNzZWFyY2hVc2VyV2luZG93IC53aW5kb3dDb250ZW50V3JhcHBlcjInKS5zY3JvbGwoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgRGl2SGVpZ2h0ID0gJCgnI3dpbmRvd0NvbnRlbnQyJykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBTY3JvbGxIZWlnaHQgPSAkKHRoaXMpLmhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgU2Nyb2xsVG9wID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgaWYgKChTY3JvbGxUb3AgKyBTY3JvbGxIZWlnaHQgPj0gRGl2SGVpZ2h0IC0gNSkgJiYgISRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmdcclxuICAgICAgICAgICAgICAgICYmICEkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoXCIjY29uZmlybVNhdmVBZGRlZFVzZXJcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2hlY2tlZFVzZXIgPSAkKFwiLnNlbGVjdFNpbmdsZUd1ZXN0OmNoZWNrZWRcIiksXHJcbiAgICAgICAgICAgICAgICB1c2VyQXJyID0ge307XHJcbiAgICAgICAgICAgIGNoZWNrZWRVc2VyLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkKHRoaXMpLnBhcmVudHMoXCIuc2luZ2xlR3Vlc3RJbmZvMlwiKSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQgPSAkcGFyZW50LmRhdGEoXCJ1c2VyX2lkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHd4QXZhdGFyID0gJHBhcmVudC5kYXRhKFwid3hfYXZhdGFyXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHd4Tmlja25hbWUgPSAkcGFyZW50LmRhdGEoXCJ3eF9uaWNrbmFtZVwiKTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckFyci51c2VySWQgPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckFyci51c2VySWQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3hfYXZhdGFyOiB3eEF2YXRhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3hfbmlja25hbWU6IHd4Tmlja25hbWVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gb3BlblNlYXJjaFVzZXJXaW5kb3coKSB7XHJcbiAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQoXCIjc2VhcmNoVXNlcldpbmRvd1wiKS5maW5kKFwiLmhlYWRlclRleHQxXCIpLnRleHQoXHJcbiAgICAgICAgICAgICgkZXhlQm9va0xpc3QuYWRkVXNlclR5cGU9PTEpP1wi5re75Yqg6ICB5biIXCI6XCLmt7vliqDliqnmlZlcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJzZWFyY2hVc2VyV2luZG93XCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tID0gZmFsc2U7XHJcbiAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggPSAxO1xyXG4gICAgICAgICRwcml2YXRlLnVzZXJMaXN0U2VhcmNoQ29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJMaXN0KCkge1xyXG4gICAgICAgIGJhc2VVdGlscy5zaG93TG9hZGluZyhcInNlYXJjaFVzZXJMb2FkaW5nXCIpO1xyXG4gICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICQuYWpheChcIi96YnNlYXJjaFwiLCB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcGFnZTogJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXgsXHJcbiAgICAgICAgICAgICAgICBzZWFyY2g6ICRwcml2YXRlLnVzZXJMaXN0U2VhcmNoQ29udGVudFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuaGlkZUxvYWRpbmcoXCJzZWFyY2hVc2VyTG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJGFyZWEgPSAkKFwiI3dpbmRvd0NvbnRlbnQyXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgPSBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHJlc3VsdC5wYWdlX29mZnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0LmRhdGEsIGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciArPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNpbmdsZUd1ZXN0SW5mbzJcIiBkYXRhLXVzZXJfaWQ9XCInK3YudXNlcl9pZCtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIgZGF0YS13eF9hdmF0YXI9XCInK3Yud3hfYXZhdGFyKydcIiBkYXRhLXd4X25pY2tuYW1lPVwiJyt2Lnd4X25pY2tuYW1lKydcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiBjbGFzcz1cInNlbGVjdFNpbmdsZUd1ZXN0XCIgaWQ9XCInK3YudXNlcl9pZCsnXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8bGFiZWwgZm9yPVwiJyt2LnVzZXJfaWQrJ1wiIGNsYXNzPVwic2luZ2xlR3Vlc3RMYWJlbFwiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3JjPVwiJyt2Lnd4X2F2YXRhcisnXCIgY2xhc3M9XCJzaW5nbGVHdWVzdEF2YXRhcjJcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2luZ2xlR3Vlc3ROYW1lMlwiIHRpdGxlPVwiJyt2Lnd4X25pY2tuYW1lKydcIj4nK3Yud3hfbmlja25hbWUrJzwvZGl2PicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9sYWJlbD4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGh0bWxTdHIubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBodG1sU3RyID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ3aW5kb3dOb0RhdGFcIiBpZD1cIndpbmRvd05vRGF0YVwiPuaaguaXoOaVsOaNrjwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICRhcmVhLmh0bWwoaHRtbFN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgJGFyZWEuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiaXNEb3duXCI+5pu05aSa5pWw5o2u5Yqg6L295LitPC9kaXY+Jyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICRhcmVhLmZpbmQoJy5pc0Rvd24nKS5iZWZvcmUoaHRtbFN0cik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAob2Zmc2V0LmN1cnJlbnRfcGFnZSA+PSBvZmZzZXQudG90YWxfcGFnZXMpIHsgICAgICAvL+aVsOaNruWKoOi9veWujOavleWQjueahOaTjeS9nFxyXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aW1lUmFuZ2UgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChvZmZzZXQudG90YWxfY291bnQgPiAxMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYXJlYS5maW5kKCcuaXNEb3duJykudGV4dChcIuaVsOaNruW3suWKoOi9veWujOavlVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJhbmdlID0gMzAwMDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lUmFuZ2UgPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuZmluZCgnLmlzRG93bicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCB0aW1lUmFuZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4ICsrO1xyXG5cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuaGlkZUxvYWRpbmcoXCJzZWFyY2hVc2VyTG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmcgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gJGV4ZUJvb2tMaXN0O1xyXG59KSgpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXX0=
