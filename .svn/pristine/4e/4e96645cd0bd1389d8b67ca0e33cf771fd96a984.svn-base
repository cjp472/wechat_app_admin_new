$(document).ready(function(){Business.init();$inviteGuest.init();$aliveShowSet.init()});var Business=function(){var e={};e.isLoading=false;e.tabState="singleList";e.member_id=-1;e.member_price=0;e.searchContentForSingle="";e.searchContentForPackage="";e.resource_type=0;e.pageIndex=1;e.init=function(){e.member_id=GetQueryString("id");modal.id=GetQueryString("id");e.member_price=$(".admin_data").data("member_price");var i=sessionStorage.getItem("inviteGuestAliveId");if(i&&i!=""){sessionStorage.setItem("inviteGuestAliveId","");$inviteGuest.openGuestSettingWindow(i)}$(".toolBox").on("click","li",function(){var i=$(this).data("type");switch(i){case"edit":window.location.href="/edit_member_page?id="+e.member_id+"&page_origin=member_detail";break;case"newListShow":memberDetailUtils.changeNewlListState(e.member_id,0,0);break;case"newListHide":memberDetailUtils.changeNewlListState(e.member_id,0,1);break;case"show_member":memberDetailUtils.changeGoodsState(e.member_id,0,0);break;case"hide_member":memberDetailUtils.changeGoodsState(e.member_id,0,1);break;case"openForm":memberDetailUtils.packageForm(e.member_id,1);break;case"closeForm":memberDetailUtils.packageForm(e.member_id,0);break;case"openVisible":memberDetailUtils.visibleSwitch(e.member_id,1);break;case"closeVisible":memberDetailUtils.visibleSwitch(e.member_id,0);break;default:console.log("会员操作，参数错误。");break}});$(".member_list_wrapper").on("click",".hover_tool_box li.operate",function(i){i.stopPropagation();var t=$(this).parents(".member_list_item").data("resource_id"),s=$(this).parents(".member_list_item").data("resource_type"),a=$(this).parents(".member_list_item").data("res_title"),o=$(this).parents(".member_list_item").data("is_try"),n=$(this).parents(".member_list_item").data("show_time"),r=$(this).parents(".member_list_item").data("img_url"),c=$(this).parents(".member_list_item").data("payment_type");var l=$(this).data("type");switch(l){case"to_top":memberDetailUtils.setResourceTop(e.member_id,s,t,1);break;case"cancel_top":memberDetailUtils.setResourceTop(e.member_id,s,t,0);break;case"aliveGuestSet":if(s==4){$inviteGuest.openGuestSettingWindow(t)}break;case"look_comments":if(s==4){contentDetail("/alivecomment?alive_id="+t)}else{contentDetail("/comment_admin?type="+(s-1)+"&record_id="+t)}break;case"edit":window.location.href="/edit_resource_page?type="+s+"&id="+t+"&upload_channel_type=3"+"&package_id="+e.member_id+"&price="+e.member_price;break;case"set_try":memberDetailUtils.setResourceTry(e.member_id,s,t,c,1);break;case"cancel_try":memberDetailUtils.setResourceTry(e.member_id,s,t,c,0);break;case"export_audio":memberDetailUtils.exportAudio(t);break;case"set_single_sale":memberDetailUtils.setSingleSale(s,t,a,o,n,r);break;case"cancel_single_sale":memberDetailUtils.cancelSingleSale(s,t,c);break;case"show_resource":memberDetailUtils.changeGoodsState(t,s,0);break;case"hide_resource":memberDetailUtils.changeGoodsState(t,s,1);break;case"delete":memberDetailUtils.querySingleResource(t,s,e.member_id);break;case"enable_copy":memberDetailUtils.changeCanSelectState(t,true);break;case"forbid_copy":$.alert("禁止复制后，该篇图文的图片点击放大和长按识别二维码功能将被禁用","info",{btn:3,onOk:function(){memberDetailUtils.changeCanSelectState(t,false)}});break;default:console.error("参数错误");break}});$(".member_list_wrapper").on("click","#package_item_operate li.operate",function(e){e.stopPropagation();var i=$(this).parents(".package_list_item").data("package_id"),t=$(this).data("type");switch(t){case"soldout":memberDetailUtils.packageisShow(i,false);break;case"putaway":memberDetailUtils.packageisShow(i,true);break;case"edit_package":window.location.href="edit_package_page?id="+i+"&member_id="+modal.id;break;case"remove_package":memberDetailUtils.queryPackageResource(i);break;default:console.log("参数错误");break}});(function(){var e=new Clipboard(".copyHref");e.on("success",function(e){if(e.trigger.id=="copy_app_href"){baseUtils.show.blueTip("复制成功！")}else{baseUtils.show.blueTip("复制成功！请在微信内打开哦 。")}e.clearSelection()})})();$(".content_tab_wrapper li").click(function(){if(!e.isLoading){$(".inputSearchAll").val("");e.pageIndex=1;e.isLoading=true;var i=$(this).text();if(!$(this).hasClass("activeContentTab")){if(i=="专栏"){$("#packageTab").addClass("activeContentTab");$("#singleTab").removeClass("activeContentTab");$(".selector_resource_type").addClass("hide")}else if(i=="单品"){$("#singleTab").addClass("activeContentTab");$("#packageTab").removeClass("activeContentTab");$(".selector_resource_type").removeClass("hide")}}if(i=="专栏"){e.searchContentForPackage="";e.tabState="packageList";memberDetailUtils.switchWindowTab("packageTab");modal.initPackageListOfMember()}else if(i=="单品"){e.searchContentForSingle="";e.resource_type=0;$("#firstOption").removeAttr("selected").attr("selected","selected");e.tabState="singleList";memberDetailUtils.switchWindowTab("singleTab");modal.initResourceListOfMember()}}});modal.selectResource();modal.initResourceAndPackageSearch();memberDetailUtils.initListPagination();$(".member_list_wrapper").on("click"," .pagination li a",function(i){var t=$(i.target),s=t.data("url");e.pageIndex=t.text();if(e.tabState=="packageList"){modal.initPackageListOfMember()}else if(e.tabState=="singleList"){modal.initResourceListOfMember()}});$(".userDefined").click(function(){var e=$(".admin_data").data("member_id");window.location.href="/user_defined?id="+e})};return e}();var modal=function(){var e={};e.initResourceListOfMember=function(){$(".loadingS").fadeIn(300);$.ajax("/singe_list_member",{type:"GET",dataType:"html",data:{id:Business.member_id,search_content:Business.searchContentForSingle,resource_type:Business.resource_type,page:Business.pageIndex},success:function(e){Business.isLoading=false;$(".loadingS").fadeOut(100);if(e&&e.length>0){$(".member_list_wrapper").html(e);memberDetailUtils.initListPagination()}else{console.log("请求数据为空");baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,i,t){Business.isLoading=false;$(".loadingS").fadeOut(100);console.log(t);baseUtils.show.redTip("获取单品列表失败")}})};e.initPackageListOfMember=function(){$(".loadingS").fadeIn(300);$.ajax("/package_list_member",{type:"GET",dataType:"html",data:{id:Business.member_id,search_content:Business.searchContentForPackage,page:Business.pageIndex},success:function(e){Business.isLoading=false;$(".loadingS").fadeOut(100);if(e&&e.length>0){$(".member_list_wrapper").html(e);memberDetailUtils.initListPagination()}else{console.log("请求数据为空");baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,i,t){Business.isLoading=false;$(".loadingS").fadeOut(100);console.log(t);baseUtils.show.redTip("获取单品列表失败")}})};e.hasDown=false;e.hasClose=true;e.page=1;e.searchContent="";e.isLoading=false;e.resType=0;e.tabState="singleList";e.selectResource=function(){var i=this;$("#addSingle").on("click",function(){i.page=1;i.hasDown=false;i.hasClose=false;i.getSelectData()});$("#selectWindow #selctClose, #selectWindow #selectCancelBtn").on("click",function(){var e=$("#selectWindow");e.fadeOut("normal",function(){$(this).find("#selectAreaList").html("")});e.find(".inputSearchPart").val("");i.page=1;i.hasClose=true;i.searchContent=""});$("#selectWindow #selectSearchBtn").on("click",function(){var e=$.trim($(this).prev().val());i.searchContent=e;i.page=1;i.hasClose=true;i.getSelectData()}).prev().on("keypress",function(e){if(e.keyCode=="13"){$("#selectWindow #selectSearchBtn").click()}});$(".selectGoodTabWrapper li").click(function(){var t=$(this).val();if(!e.isLoading){i.page=1;$("#selectWindow #selectAreaListWrapper").scrollTop(0);e.isLoading=true;if(t==1){memberDetailUtils.switchWindowTab("singleTab")}else{memberDetailUtils.switchWindowTab("packageTab")}i.getSelectData()}});$("#selectWindow #selectAreaListWrapper").scroll(function(e){var t=$("#selectAreaList").height(),s=$(this).height(),a=$(this).scrollTop();if(a+s>=t-5&&!i.hasDown&&!i.hasClose){i.hasClose=true;i.getSelectData()}else{}});$("#selectWindow #selectOkBtn").on("click",function(t){var s=$("#selectWindow #selectAreaListWrapper"),a=[];s.find(":checkbox:checked").each(function(i,t){if(e.tabState=="packageList"){var s={resource_id:t.getAttribute("id"),resource_type:6}}else if(e.tabState=="singleList"){var s={resource_id:t.getAttribute("id"),resource_type:t.getAttribute("value")}}a[a.length]=s});$.ajax("/submit_choice_resource",{type:"POST",dataType:"json",data:{channel_type:3,resource_list:a,package_id:i.id},success:function(i){console.log(i);if(i.code==0){$("#selectWindow #selctClose").click();baseUtils.show.blueTip(i.msg);if(e.tabState=="packageList"){$("#packageTab").click()}else if(e.tabState=="singleList"){$("#singleTab").click()}}else{baseUtils.show.redTip(i.msg)}},error:function(e,i,t){console.error(t);baseUtils.show.redTip("操作失败，请稍后再试")}})})};e.getSelectData=function(){var i=this;if(i.page==1){$(".loadingS_in_window").fadeIn(300)}$.ajax("/choice_resource_list",{type:"POST",dataType:"json",data:{search_content:i.searchContent||"",channel_type:3,resource_type:i.resType,package_id:i.id,page:i.page},success:function(t){$(".loadingS_in_window").fadeOut(300);e.isLoading=false;console.log(t);if(t.code==0){var s=$("#selectAreaList"),a="",o=JSON.parse(t.data.page_offset);$.each(t.data.resource_list,function(e,t){var s="";if(i.resType==0){switch(+this.resource_type){case 1:s="图文";break;case 2:s="音频";break;case 3:s="视频";break;case 4:s="直播";break;default:s="无";break}}if(i.resType==0){a+='<div class="resourceItemWrapper">'+'<input value="'+this.resource_type+'" id="'+this.id+'" class="with-gap singleResourceRadio" name="select_resource" type="checkbox">'+'<label for="'+this.id+'" class="radio_desc">'+'<div class="resource_icon_wrapper">'+'<img class="resource_icon" src="'+this.img_url+'">'+"</div>"+this.title+"</label>"+'<span class="resource_type">'+s+"</span>"+'<span class="resource_time">'+this.start_at+"</span>"+"</div>"}else{a+='<div class="resourceItemWrapper">'+"<input"+' id="'+this.id+'" class="with-gap singleResourceRadio" name="select_resource" type="checkbox">'+'<label for="'+this.id+'" class="radio_desc">'+'<div class="resource_icon_wrapper">'+'<img class="resource_icon" src="'+this.img_url+'">'+"</div>"+this.name+"</label>"+'<span class="resource_time">'+this.updated_at+"</span>"+"</div>"}});if(i.page==1||!i.page){s.html(a);s.append('<div class="isDown">资源加载中</div>');i.hasClose=false;if(!i.searchContent){$("#selectWindow").fadeIn()}}else if(i.page>1){s.find(".isDown").before(a);i.hasClose=false}if(o.current_page>=o.total_pages){s.find(".isDown").hide();i.hasDown=true}i.page++}else{baseUtils.show.redTip("拉取已有单品失败！")}},error:function(i,t,s){$(".loadingS_in_window").fadeOut(300);e.isLoading=false;console.error(s);baseUtils.show.redTip("操作失败，请稍后再试")}})};e.initResourceAndPackageSearch=function(){$(".searchAllBtn").click(function(){if(Business.tabState=="packageList"){Business.searchContentForPackage=$.trim($(".inputSearchAll").val());e.initPackageListOfMember()}else if(Business.tabState=="singleList"){Business.resource_type=$(".selector_resource_type").val();Business.searchContentForSingle=$.trim($(".inputSearchAll").val());e.initResourceListOfMember()}});$(".inputSearchAll").on("keypress",function(e){if(e.keyCode==13){$(".searchAllBtn").click()}});$(".selector_resource_type").on("change",function(){$(".searchAllBtn").click()})};e.initSetSingleSaleWindow=function(i,t,s,a,o){$(".resource_icon_3").attr("src",i);$(".resource_title_3").html(t);switch(s){case 1:$(".resource_type_3").html("图文");break;case 2:$(".resource_type_3").html("音频");break;case 3:$(".resource_type_3").html("视频");break;case 4:$(".resource_type_3").html("直播");break;default:break}$(".resource_time_3").html(a);$(".close_icon_wrapper_2, .cancel_set_price").click(function(){$(".set_price_window").fadeOut(300)});$(".confirm_price_btn").click(function(){var i=$.trim($(".input_setting_price").val());var t=/^([1-9][\d]*|0)([\/.][\d]{1,2})?$/;if(!t.test(i)){baseUtils.show.redTip("价格输入有误");$(".input_setting_price").val("");return false}if(i<=0){baseUtils.show.redTip("价格不能为0 或 负数!");return false}if(i>baseUtils.maxInputPrice){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}var a={};a["resource_id"]=o;a["resource_type"]=s;var n=[a];showLoading();$.ajax("/submit_choice_resource",{type:"POST",data:{channel_type:1,resource_list:n,piece_price:i*100,submit_type:0},success:function(i){hideLoading();if(i.code==0){$(".set_price_window").fadeOut(300);baseUtils.show.blueTip("设为单卖成功");e.initResourceListOfMember()}else{baseUtils.show.redTip("操作失败，请稍后再试!")}},error:function(e,i,t){hideLoading();console.log(t);baseUtils.show.redTip("服务器开小差啦，请稍后再操作！")}})})};return e}();var memberDetailUtils=function(){var e={};e.changeGoodsState=function(e,i,t){if(i==0){var s=t==0?"上架后该会员将对外显示":"下架后该会员将不对外显示"}else if(i==1||i==2||i==3||i==4){var s=t==0?"上架后该单品将对外显示":"下架后该单品将不对外显示"}$.alert(s,"info",{onOk:function(){showLoading();$.ajax("/change_goods_state",{type:"POST",dataType:"json",data:{goods_id:e,goods_type:i,operate_type:t},success:function(e){hideLoading();if(e.code==0){if(t==0){baseUtils.show.blueTip("上架成功！")}else{baseUtils.show.blueTip("下架成功！")}if(i==0){setTimeout(function(){window.location.reload()},1500)}else{modal.initResourceListOfMember()}}else{baseUtils.show.redTip("操作失败，请稍后重试！")}},error:function(e,i,t){hideLoading();console.log(t);baseUtils.show.redTip("操作失败，请稍后重试！")}})}})};e.changeNewlListState=function(e,i,t){showLoading();$.ajax("/set_h5_newest_hide",{type:"POST",dataType:"json",data:{id:e,h5_newest_hide:t},success:function(e){hideLoading();if(e.code==0){if(t==0){baseUtils.show.blueTip("设置成功！")}else{baseUtils.show.blueTip("设置成功！")}if(i==0){setTimeout(function(){window.location.reload()},1500)}else{modal.initResourceListOfMember()}}else{baseUtils.show.redTip("操作失败，请稍后重试！")}},error:function(e,i,t){hideLoading();console.log(t);baseUtils.show.redTip("操作失败，请稍后重试！")}})};e.setResourceTop=function(e,i,t,s){showLoading();$.ajax("/set_package_resource_top",{type:"POST",dataType:"json",data:{package_id:e,resource_type:i,resource_id:t,top_state:s},success:function(e){hideLoading();if(e.code==0){if(s==0){baseUtils.show.blueTip("已经取消置顶！")}else{baseUtils.show.blueTip("置顶成功！")}modal.initResourceListOfMember()}else{baseUtils.show.redTip(e.msg)}},error:function(e,i,t){hideLoading();console.error(t);baseUtils.show.redTip("操作失败，请稍后再试")}})};e.packageisShow=function(e,i){$.alert(i?"上架后该专栏将对外显示":"下架后该专栏将不对外显示","info",{onOk:function(){showLoading();$.ajax("/change_goods_state",{type:"POST",dataType:"json",data:{goods_id:e,goods_type:0,operate_type:i?0:1},success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg);setTimeout(function(){reloadPage()},700)}else{baseUtils.show.redTip(e.msg);hideLoading();self.btnState=true}},error:function(e,i,t){console.error(t);hideLoading();self.btnState=true;baseUtils.show.redTip("操作失败，请稍后再试")}})}})};e.querySingleResource=function(i,t,s){showLoading();$.ajax("/query_goods_state",{type:"POST",dataType:"json",data:{goods_id:i,goods_type:t,channel_type:2,package_id:s},success:function(a){hideLoading();if(a.code==0){var o=a.data["is_exist"],n=a.data["records_list"],r=Object.keys(n).length,c="";if(o==0){c="确认移除该内容，移除后所有用户将无法查看此内容且<spa style='color: red;'>不可恢复</spa>"}else if(n[0]==undefined){for(var l=1;l<=r;l++){c+="《"+n[l]["title"]+"》"}c="确认移除该内容，移除后该会员用户将无法查看此内容。此内容仍存在于"+c+"中"}else{if(r==1){c="确认移除该内容，移除后该会员用户将无法查看此内容。此内容仍在单品列表且单独售卖"}else{for(var l=1;l<r;l++){c+="《"+n[l]["title"]+"》"}c="确认移除该内容，移除后该会员用户将无法查看此内容。此内容单独售卖且仍存在于"+c+"中"}}$.alert(c,"info",{oktext:"确认移除",onOk:function(){e.deleteSingleResource(i,t,s)}})}else{baseUtils.show.redTip("操作失败！")}},error:function(e,i,t){hideLoading();console.log(t);baseUtils.show.redTip("服务器开小差了，请稍后再试！")}})};e.queryPackageResource=function(i){showLoading();$.ajax("/query_goods_state",{type:"POST",dataType:"json",data:{goods_id:i,goods_type:6,channel_type:2,package_id:Business.member_id},success:function(t){hideLoading();if(t.code==0){var s=t.data["is_exist"],a=t.data["records_list"],o=Object.keys(a).length,n="";if(s==0){n="确认移除该专栏，移除后该会员用户将无法查看此专栏，此专栏仍在专栏列表且单独售卖"}else{for(var r=1;r<=o;r++){n+="《"+a[r]["title"]+"》"}n="确认移除该专栏，移除后该会员用户将无法查看此专栏，此专栏仍存在于"+n+"中"}$.alert(n,"info",{oktext:"确认移除",onOk:function(){e.deleteSingleResource(i,6,Business.member_id)}})}else{baseUtils.show.redTip("操作失败！");console.log(t.msg)}},error:function(e,i,t){hideLoading();console.log(t);baseUtils.show.redTip("服务器开小差了，请稍后再试！")}})};e.visibleSwitch=function(e,i){var t=$(".user_version_num").data("version_type");if(t&&t==3){$.alert(i?"开启内容展示后，未购买专栏的用户进去专栏后将可见内容列表，您确认要开启么？":"关闭内容展示后，未购买专栏的用户进去专栏后将无法查看内容列表，您确认要关闭么？","info",{icon:"blue",onOk:function(){showLoading();$.ajax("/visible_on_switch",{type:"POST",dataType:"json",data:{id:e,visible_on:i},success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg);setTimeout(function(){reloadPage()},200)}else{baseUtils.show.redTip(e.msg);hideLoading()}}})}})}else{baseUtils.show.redTip("当前版本不支持开启资料填写，如需开启请升级至专业版")}};e.packageForm=function(e,i){var t=$(".user_version_num").data("version_type");if(t&&t==3){$.alert(i?"开启资料填写后，用户在付费购买本会员前将填写个人信息，您确认要开启么？":"关闭资料填写后，用户在付费购买本会员前将不再填写个人信息，您确认要关闭么？","info",{icon:"blue",onOk:function(){showLoading();$.ajax("/set_is_complete_info",{type:"POST",dataType:"json",data:{id:e,is_complete_info:i},success:function(e){console.log(e);location.reload();if(e.code==0){baseUtils.show.blueTip(e.msg);setTimeout(function(){reloadPage()},200)}else{baseUtils.show.redTip(e.msg);hideLoading()}}})}})}else{baseUtils.show.redTip("当前版本不支持开启资料填写，如需开启请升级至专业版")}};e.deleteSingleResource=function(e,i,t){$.ajax("/move_goods",{type:"POST",dataType:"json",data:{goods_id:e,goods_type:i,channel_type:2,package_id:t},success:function(e){$(".loadingS").fadeOut(300);if(e.code==0){baseUtils.show.blueTip("移除成功！")}else{baseUtils.show.redTip("移除失败，请稍后再试")}if(i==6){modal.initPackageListOfMember()}else{modal.initResourceListOfMember()}},error:function(e,i,t){$(".loadingS").fadeOut(300);console.log(t);baseUtils.show.redTip("服务器开小差了，请稍后再试！")}})};e.setResourceTry=function(e,i,t,s,a){if(s==1||s==2){if(i==2){$.alert("该单品已设为单卖，取消单卖后方可设为试听","info",{btn:2})}else if(i==1||i==3||i==4){$.alert("该单品已设为单卖，取消单卖后方可设为试看","info",{btn:2})}return false}showLoading();$.ajax("/set_package_resource_try",{type:"POST",dataType:"json",data:{package_id:e,resource_type:i,resource_id:t,try_state:a},success:function(e){hideLoading();if(e.code==0){if(a==1){baseUtils.show.blueTip("设置成功！")}else{baseUtils.show.blueTip("取消成功！")}modal.initResourceListOfMember()}else{baseUtils.show.redTip("操作失败！")}},error:function(e,i,t){console.error(t);hideLoading();baseUtils.show.redTip("操作失败，请稍后再试")}})};e.exportAudio=function(e){$.ajax("/async_download_alive_voice",{type:"POST",dataType:"json",data:{alive_id:e},success:function(e){switch(e.code){case 0:window.location.href=e.data["url"];break;case 1:$.alert("语音正在合成中，根据您直播间内的音频数量需要10分钟到4个小时不等，请稍候访问。","info",{btn:2});break;case 2:$.alert("开始进行语音合成，根据您直播间内的音频数量需要10分钟到4个小时不等，请稍候访问。","info",{btn:2});break;case 3:$.alert("服务器正在维护，直播音频导出功能受到影响，请稍后再试。","info",{btn:2});break;case 4:$.alert("该直播没有音频。","info",{btn:2});break;case 5:$.alert("这个直播不是语音类型的，不支持音频导出。","info",{btn:2});break;case 6:$.alert("这个直播还没结束，暂不支持音频导出。","info",{btn:2});break;default:console.log("参数错误");baseUtils.show.redTip(e.msg);break}console.log(e.msg)},error:function(e,i,t){console.log(t);baseUtils.show.redTip("服务器出小差了，请稍后再试！")}})};e.setSingleSale=function(e,i,t,s,a,o){if(s==1){if(e==2){$.alert("该单品已设为试听，取消试听后方可设为单卖","info",{btn:2})}else if(e==1||e==3||e==4){$.alert("该单品已设为试看，取消试看后方可设为单卖","info",{btn:2})}}else{modal.initSetSingleSaleWindow(o,t,e,a,i);$(".set_price_window").fadeIn(300)}};e.cancelSingleSale=function(e,i,t){if(t==1){var s="取消单卖后，未开通会员的用户将不可单独查看该单品!"}else if(t==2){var s="取消单卖后，未开通会员的用户将不可单独付费购买该单品!"}$.alert(s,"info",{onOk:function(){showLoading();var t={};t["resource_id"]=i;t["resource_type"]=e;var s=[t];$.ajax("/submit_choice_resource",{type:"POST",data:{channel_type:1,resource_list:s,submit_type:1},success:function(e){hideLoading();if(e.code==0){baseUtils.show.blueTip("取消单卖成功！");modal.initResourceListOfMember()}else{baseUtils.show.redTip("操作失败，请稍后再试!")}},error:function(e,i,t){hideLoading();console.log(t);baseUtils.show.redTip("服务器开小差啦，请稍后再搜索！")}})}})};e.changeCanSelectState=function(e,i){$.ajax("/set_resource_select_can",{type:"POST",dataType:"json",data:{id:e,resource_type:1,can_select:i?1:0},success:function(e){if(e.code==0){if(i){baseUtils.show.blueTip("已经允许复制")}else{baseUtils.show.blueTip("已经禁止复制")}window.location.reload()}else{baseUtils.show.redTip("操作失败，请稍后再试")}},error:function(e,i,t){console.log(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})};e.initListPagination=function(){$(".list-page .pagination li a").each(function(){var e=$(this);e.attr("data-url",e.attr("href"));e.removeAttr("href")})};e.switchWindowTab=function(e){var i=$(".selectGoodTabWrapper>li.activeContentTab").val();if(i==1&&e=="singleTab"||i==0&&e=="packageTab"){return false}if(e=="singleTab"){$("#selectGoodSingleTab").addClass("activeContentTab");$("#selectGoodPackageTab").removeClass("activeContentTab");modal.tabState="singleList";modal.resType=0}else if(e=="packageTab"){$("#selectGoodPackageTab").addClass("activeContentTab");$("#selectGoodSingleTab").removeClass("activeContentTab");modal.tabState="packageList";modal.resType=6}};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1lbWJlckRldGFpbC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIkJ1c2luZXNzIiwiaW5pdCIsIiRpbnZpdGVHdWVzdCIsIiRhbGl2ZVNob3dTZXQiLCJpc0xvYWRpbmciLCJ0YWJTdGF0ZSIsIm1lbWJlcl9pZCIsIm1lbWJlcl9wcmljZSIsInNlYXJjaENvbnRlbnRGb3JTaW5nbGUiLCJzZWFyY2hDb250ZW50Rm9yUGFja2FnZSIsInJlc291cmNlX3R5cGUiLCJwYWdlSW5kZXgiLCJHZXRRdWVyeVN0cmluZyIsIm1vZGFsIiwiaWQiLCJkYXRhIiwiYWxpdmVJZCIsInNlc3Npb25TdG9yYWdlIiwiZ2V0SXRlbSIsInNldEl0ZW0iLCJvcGVuR3Vlc3RTZXR0aW5nV2luZG93Iiwib24iLCJ0eXBlIiwidGhpcyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIm1lbWJlckRldGFpbFV0aWxzIiwiY2hhbmdlTmV3bExpc3RTdGF0ZSIsImNoYW5nZUdvb2RzU3RhdGUiLCJwYWNrYWdlRm9ybSIsInZpc2libGVTd2l0Y2giLCJjb25zb2xlIiwibG9nIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInJlc0lkIiwicGFyZW50cyIsInJlc1R5cGUiLCJyZXNUaXRsZSIsImlzVHJ5Iiwic2hvd1RpbWUiLCJyZXNJbWdVcmwiLCJwYXltZW50VHlwZSIsInNldFJlc291cmNlVG9wIiwiY29udGVudERldGFpbCIsInNldFJlc291cmNlVHJ5IiwiZXhwb3J0QXVkaW8iLCJzZXRTaW5nbGVTYWxlIiwiY2FuY2VsU2luZ2xlU2FsZSIsInF1ZXJ5U2luZ2xlUmVzb3VyY2UiLCJjaGFuZ2VDYW5TZWxlY3RTdGF0ZSIsImFsZXJ0IiwiYnRuIiwib25PayIsImVycm9yIiwicGFja2FnZUlkIiwicGFja2FnZWlzU2hvdyIsInF1ZXJ5UGFja2FnZVJlc291cmNlIiwiY2xpcGJvYXJkIiwiQ2xpcGJvYXJkIiwidHJpZ2dlciIsImJhc2VVdGlscyIsInNob3ciLCJibHVlVGlwIiwiY2xlYXJTZWxlY3Rpb24iLCJjbGljayIsInZhbCIsInRleHQiLCJoYXNDbGFzcyIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJzd2l0Y2hXaW5kb3dUYWIiLCJpbml0UGFja2FnZUxpc3RPZk1lbWJlciIsInJlbW92ZUF0dHIiLCJhdHRyIiwiaW5pdFJlc291cmNlTGlzdE9mTWVtYmVyIiwic2VsZWN0UmVzb3VyY2UiLCJpbml0UmVzb3VyY2VBbmRQYWNrYWdlU2VhcmNoIiwiaW5pdExpc3RQYWdpbmF0aW9uIiwiZWxlIiwidGFyZ2V0IiwidXJsIiwicGlkIiwiZmFkZUluIiwiYWpheCIsImRhdGFUeXBlIiwic2VhcmNoX2NvbnRlbnQiLCJwYWdlIiwic3VjY2VzcyIsInJlc3VsdCIsImZhZGVPdXQiLCJsZW5ndGgiLCJodG1sIiwicmVkVGlwIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiaGFzRG93biIsImhhc0Nsb3NlIiwic2VhcmNoQ29udGVudCIsInNlbGYiLCJnZXRTZWxlY3REYXRhIiwiJHNlbGVjdFdpbiIsImZpbmQiLCJzZWFyY2hWYWwiLCJ0cmltIiwicHJldiIsImtleUNvZGUiLCJ2YWx1ZSIsInNjcm9sbFRvcCIsInNjcm9sbCIsIkRpdkhlaWdodCIsImhlaWdodCIsIlNjcm9sbEhlaWdodCIsIlNjcm9sbFRvcCIsIiRzZWxlY3RBcmVhIiwicmVzTGlzdCIsImVhY2giLCJpIiwiaXRlbSIsInJlc09iaiIsInJlc291cmNlX2lkIiwiZ2V0QXR0cmlidXRlIiwiY2hhbm5lbF90eXBlIiwicmVzb3VyY2VfbGlzdCIsInBhY2thZ2VfaWQiLCJjb2RlIiwibXNnIiwic2VsZWN0U3RyIiwicGFnZU9iaiIsIkpTT04iLCJwYXJzZSIsInBhZ2Vfb2Zmc2V0IiwiaW1nX3VybCIsInRpdGxlIiwic3RhcnRfYXQiLCJuYW1lIiwidXBkYXRlZF9hdCIsImFwcGVuZCIsImJlZm9yZSIsImN1cnJlbnRfcGFnZSIsInRvdGFsX3BhZ2VzIiwiaGlkZSIsImluaXRTZXRTaW5nbGVTYWxlV2luZG93IiwicHJpY2UiLCJyZWciLCJ0ZXN0IiwibWF4SW5wdXRQcmljZSIsImFyciIsInJlc291cmNlTGlzdEFyciIsInNob3dMb2FkaW5nIiwicGllY2VfcHJpY2UiLCJzdWJtaXRfdHlwZSIsImhpZGVMb2FkaW5nIiwidXRpbHMiLCJnb29kc0lkIiwiZ29vZHNUeXBlIiwib3BlcmF0ZV90eXBlIiwiZ29vZHNfaWQiLCJnb29kc190eXBlIiwic2V0VGltZW91dCIsInJlbG9hZCIsImg1X25ld2VzdF9oaWRlIiwicmVzb3VyY2VUeXBlIiwicmVzb3VyY2VJZCIsInRvcFN0YXRlIiwidG9wX3N0YXRlIiwiY2hhbmdlVHlwZSIsInJlbG9hZFBhZ2UiLCJidG5TdGF0ZSIsImlzRXhpc3QiLCJyZWNvcmRzTGlzdCIsImFyckxlbmd0aCIsIk9iamVjdCIsImtleXMiLCJ1bmRlZmluZWQiLCJpbmRleCIsIm9rdGV4dCIsImRlbGV0ZVNpbmdsZVJlc291cmNlIiwidmlzaWJsZV9vbiIsInZlcnNpb24iLCJpY29uIiwiZm9ybVR5cGUiLCJpc19jb21wbGV0ZV9pbmZvIiwibWVtYmVySWQiLCJ0cnlTdGF0ZSIsInRyeV9zdGF0ZSIsImFsaXZlX2lkIiwiY2FuU2VsZWN0IiwiY2FuX3NlbGVjdCIsIiRlbGUiLCJ0YWJWYWx1ZSJdLCJtYXBwaW5ncyI6IkFBSUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FDZEMsU0FBU0MsTUFDVEMsY0FBYUQsTUFDYkUsZUFBY0YsUUFHbEIsSUFBSUQsVUFBVyxXQUVYLEdBQUlBLEtBRUpBLEdBQVNJLFVBQVksS0FDckJKLEdBQVNLLFNBQVcsWUFFcEJMLEdBQVNNLFdBQWEsQ0FDdEJOLEdBQVNPLGFBQWUsQ0FHeEJQLEdBQVNRLHVCQUF5QixFQUNsQ1IsR0FBU1Msd0JBQTBCLEVBQ25DVCxHQUFTVSxjQUFnQixDQUV6QlYsR0FBU1csVUFBWSxDQUVyQlgsR0FBU0MsS0FBTyxXQUVaRCxFQUFTTSxVQUFZTSxlQUFlLEtBQ3BDQyxPQUFNQyxHQUFLRixlQUFlLEtBQzFCWixHQUFTTyxhQUFlVixFQUFFLGVBQWVrQixLQUFLLGVBRzlDLElBQUlDLEdBQVVDLGVBQWVDLFFBQVEscUJBQ3JDLElBQUlGLEdBQVdBLEdBQVcsR0FBSSxDQUMxQkMsZUFBZUUsUUFBUSxxQkFBc0IsR0FDN0NqQixjQUFha0IsdUJBQXVCSixHQUt4Q25CLEVBQUUsWUFBWXdCLEdBQUcsUUFBUyxLQUFNLFdBQzVCLEdBQUlDLEdBQU96QixFQUFFMEIsTUFBTVIsS0FBSyxPQUN4QixRQUFRTyxHQUNKLElBQUssT0FDREUsT0FBT0MsU0FBU0MsS0FBTyx3QkFBMEIxQixFQUFTTSxVQUFZLDRCQUN0RSxNQUNKLEtBQUssY0FDRHFCLGtCQUFrQkMsb0JBQW9CNUIsRUFBU00sVUFBVyxFQUFHLEVBQzdELE1BQ0osS0FBSyxjQUNEcUIsa0JBQWtCQyxvQkFBb0I1QixFQUFTTSxVQUFXLEVBQUcsRUFDN0QsTUFDSixLQUFLLGNBQ0RxQixrQkFBa0JFLGlCQUFpQjdCLEVBQVNNLFVBQVcsRUFBRyxFQUMxRCxNQUNKLEtBQUssY0FDRHFCLGtCQUFrQkUsaUJBQWlCN0IsRUFBU00sVUFBVyxFQUFHLEVBQzFELE1BQ0osS0FBSyxXQUNEcUIsa0JBQWtCRyxZQUFZOUIsRUFBU00sVUFBVyxFQUNsRCxNQUNKLEtBQUssWUFDRHFCLGtCQUFrQkcsWUFBWTlCLEVBQVNNLFVBQVcsRUFDbEQsTUFDSixLQUFLLGNBQ0RxQixrQkFBa0JJLGNBQWMvQixFQUFTTSxVQUFXLEVBQ3BELE1BQ0osS0FBSyxlQUNEcUIsa0JBQWtCSSxjQUFjL0IsRUFBU00sVUFBVyxFQUNwRCxNQUNKLFNBQ0kwQixRQUFRQyxJQUFJLGFBQ1osU0FNWnBDLEdBQUUsd0JBQXdCd0IsR0FBRyxRQUFTLDZCQUE4QixTQUFTYSxHQUV6RUEsRUFBRUMsaUJBR0YsSUFBSUMsR0FBUXZDLEVBQUUwQixNQUFNYyxRQUFRLHFCQUFxQnRCLEtBQUssZUFDbER1QixFQUFVekMsRUFBRTBCLE1BQU1jLFFBQVEscUJBQXFCdEIsS0FBSyxpQkFDcER3QixFQUFXMUMsRUFBRTBCLE1BQU1jLFFBQVEscUJBQXFCdEIsS0FBSyxhQUNyRHlCLEVBQVEzQyxFQUFFMEIsTUFBTWMsUUFBUSxxQkFBcUJ0QixLQUFLLFVBQ2xEMEIsRUFBVzVDLEVBQUUwQixNQUFNYyxRQUFRLHFCQUFxQnRCLEtBQUssYUFDckQyQixFQUFZN0MsRUFBRTBCLE1BQU1jLFFBQVEscUJBQXFCdEIsS0FBSyxXQUN0RDRCLEVBQWM5QyxFQUFFMEIsTUFBTWMsUUFBUSxxQkFBcUJ0QixLQUFLLGVBRTVELElBQUlPLEdBQU96QixFQUFFMEIsTUFBTVIsS0FBSyxPQUN4QixRQUFRTyxHQUNKLElBQUssU0FDREssa0JBQWtCaUIsZUFBZTVDLEVBQVNNLFVBQVdnQyxFQUFTRixFQUFPLEVBQ3JFLE1BQ0osS0FBSyxhQUNEVCxrQkFBa0JpQixlQUFlNUMsRUFBU00sVUFBV2dDLEVBQVNGLEVBQU8sRUFDckUsTUFDSixLQUFLLGdCQUNELEdBQUlFLEdBQVcsRUFBRyxDQUNkcEMsYUFBYWtCLHVCQUF1QmdCLEdBRXhDLEtBQ0osS0FBSyxnQkFDRCxHQUFJRSxHQUFXLEVBQUcsQ0FDZE8sY0FBYywwQkFBNEJULE9BQ3ZDLENBQ0hTLGNBQWMsd0JBQTBCUCxFQUFVLEdBQUssY0FBZ0JGLEdBRTNFLEtBQ0osS0FBSyxPQUNEWixPQUFPQyxTQUFTQyxLQUFPLDRCQUE4QlksRUFBVSxPQUFTRixFQUNwRSx5QkFBMkIsZUFBaUJwQyxFQUFTTSxVQUFZLFVBQVlOLEVBQVNPLFlBQzFGLE1BQ0osS0FBSyxVQUNEb0Isa0JBQWtCbUIsZUFBZTlDLEVBQVNNLFVBQVdnQyxFQUFTRixFQUFPTyxFQUFhLEVBQ2xGLE1BQ0osS0FBSyxhQUNEaEIsa0JBQWtCbUIsZUFBZTlDLEVBQVNNLFVBQVdnQyxFQUFTRixFQUFPTyxFQUFhLEVBQ2xGLE1BQ0osS0FBSyxlQUNEaEIsa0JBQWtCb0IsWUFBWVgsRUFDOUIsTUFDSixLQUFLLGtCQUNEVCxrQkFBa0JxQixjQUFjVixFQUFTRixFQUFPRyxFQUFVQyxFQUFPQyxFQUFVQyxFQUMzRSxNQUNKLEtBQUsscUJBQ0RmLGtCQUFrQnNCLGlCQUFpQlgsRUFBU0YsRUFBT08sRUFDbkQsTUFDSixLQUFLLGdCQUNEaEIsa0JBQWtCRSxpQkFBaUJPLEVBQU9FLEVBQVMsRUFDbkQsTUFDSixLQUFLLGdCQUNEWCxrQkFBa0JFLGlCQUFpQk8sRUFBT0UsRUFBUyxFQUNuRCxNQUNKLEtBQUssU0FDRFgsa0JBQWtCdUIsb0JBQW9CZCxFQUFPRSxFQUFTdEMsRUFBU00sVUFDL0QsTUFDSixLQUFLLGNBQ0RxQixrQkFBa0J3QixxQkFBcUJmLEVBQU8sS0FDOUMsTUFDSixLQUFLLGNBQ0R2QyxFQUFFdUQsTUFBTSxrQ0FBbUMsUUFDdkNDLElBQUssRUFDTEMsS0FBTSxXQUNGM0Isa0JBQWtCd0IscUJBQXFCZixFQUFPLFNBR3RELE1BQ0osU0FDSUosUUFBUXVCLE1BQU0sT0FDZCxTQU1aMUQsR0FBRSx3QkFBd0J3QixHQUFHLFFBQVMsbUNBQW9DLFNBQVVhLEdBQ2hGQSxFQUFFQyxpQkFDRixJQUFJcUIsR0FBWTNELEVBQUUwQixNQUFNYyxRQUFRLHNCQUFzQnRCLEtBQUssY0FDdkRPLEVBQU96QixFQUFFMEIsTUFBTVIsS0FBSyxPQUN4QixRQUFRTyxHQU9KLElBQUssVUFDREssa0JBQWtCOEIsY0FBY0QsRUFBVyxNQUMzQyxNQUNKLEtBQUssVUFDRDdCLGtCQUFrQjhCLGNBQWNELEVBQVcsS0FDM0MsTUFDSixLQUFLLGVBQ0RoQyxPQUFPQyxTQUFTQyxLQUFPLHdCQUEwQjhCLEVBQVksY0FBZ0IzQyxNQUFNQyxFQUNuRixNQUNKLEtBQUssaUJBQ0RhLGtCQUFrQitCLHFCQUFxQkYsRUFDdkMsTUFDSixTQUNJeEIsUUFBUUMsSUFBSSxPQUNaLFdBS1osV0FDSSxHQUFJMEIsR0FBWSxHQUFJQyxXQUFVLFlBQzlCRCxHQUFVdEMsR0FBRyxVQUFXLFNBQVNhLEdBQzdCLEdBQUdBLEVBQUUyQixRQUFRL0MsSUFBSSxnQkFBZ0IsQ0FDN0JnRCxVQUFVQyxLQUFLQyxRQUFRLGFBRXRCLENBQ0RGLFVBQVVDLEtBQUtDLFFBQVEsbUJBRTNCOUIsRUFBRStCLHNCQUtWcEUsR0FBRSwyQkFBMkJxRSxNQUFNLFdBQy9CLElBQUtsRSxFQUFTSSxVQUFXLENBQ3JCUCxFQUFFLG1CQUFtQnNFLElBQUksR0FDekJuRSxHQUFTVyxVQUFZLENBQ3JCWCxHQUFTSSxVQUFZLElBQ3JCLElBQUlnRSxHQUFPdkUsRUFBRTBCLE1BQU02QyxNQUNuQixLQUFLdkUsRUFBRTBCLE1BQU04QyxTQUFTLG9CQUFxQixDQUN2QyxHQUFJRCxHQUFRLEtBQU0sQ0FDZHZFLEVBQUUsZUFBZXlFLFNBQVMsbUJBQzFCekUsR0FBRSxjQUFjMEUsWUFBWSxtQkFDNUIxRSxHQUFFLDJCQUEyQnlFLFNBQVMsWUFDbkMsSUFBSUYsR0FBUSxLQUFNLENBQ3JCdkUsRUFBRSxjQUFjeUUsU0FBUyxtQkFDekJ6RSxHQUFFLGVBQWUwRSxZQUFZLG1CQUM3QjFFLEdBQUUsMkJBQTJCMEUsWUFBWSxTQUdqRCxHQUFJSCxHQUFRLEtBQU0sQ0FDZHBFLEVBQVNTLHdCQUEwQixFQUNuQ1QsR0FBU0ssU0FBVyxhQUNwQnNCLG1CQUFrQjZDLGdCQUFnQixhQUNsQzNELE9BQU00RCw4QkFFSCxJQUFJTCxHQUFRLEtBQU0sQ0FDckJwRSxFQUFTUSx1QkFBeUIsRUFDbENSLEdBQVNVLGNBQWdCLENBQ3pCYixHQUFFLGdCQUFnQjZFLFdBQVcsWUFBWUMsS0FBSyxXQUFXLFdBQ3pEM0UsR0FBU0ssU0FBVyxZQUNwQnNCLG1CQUFrQjZDLGdCQUFnQixZQUNsQzNELE9BQU0rRCw4QkFTbEIvRCxPQUFNZ0UsZ0JBR05oRSxPQUFNaUUsOEJBR05uRCxtQkFBa0JvRCxvQkFHbEJsRixHQUFFLHdCQUF3QndCLEdBQUcsUUFBUyxvQkFBcUIsU0FBU2EsR0FDaEUsR0FBSThDLEdBQU1uRixFQUFFcUMsRUFBRStDLFFBQ1ZDLEVBQU1GLEVBQUlqRSxLQUFLLE1BQ25CZixHQUFTVyxVQUFZcUUsRUFBSVosTUFDekIsSUFBSXBFLEVBQVNLLFVBQVksY0FBZSxDQUNwQ1EsTUFBTTRELDhCQUNILElBQUl6RSxFQUFTSyxVQUFZLGFBQWMsQ0FDMUNRLE1BQU0rRCw2QkFLZC9FLEdBQUUsZ0JBQWdCcUUsTUFBTSxXQUNwQixHQUFJaUIsR0FBTXRGLEVBQUUsZUFBZWtCLEtBQUssWUFDaENTLFFBQU9DLFNBQVNDLEtBQUssb0JBQXNCeUQsSUFLbkQsT0FBT25GLEtBSVgsSUFBSWEsT0FBUSxXQUVSLEdBQUlBLEtBS0pBLEdBQU0rRCx5QkFBMkIsV0FDN0IvRSxFQUFFLGFBQWF1RixPQUFPLElBRXRCdkYsR0FBRXdGLEtBQUssc0JBQ0gvRCxLQUFNLE1BQ05nRSxTQUFVLE9BQ1Z2RSxNQUNJRCxHQUFNZCxTQUFTTSxVQUNmaUYsZUFBa0J2RixTQUFTUSx1QkFDM0JFLGNBQWlCVixTQUFTVSxjQUMxQjhFLEtBQVF4RixTQUFTVyxXQUVyQjhFLFFBQVMsU0FBU0MsR0FDZDFGLFNBQVNJLFVBQVksS0FDckJQLEdBQUUsYUFBYThGLFFBQVEsSUFDdkIsSUFBSUQsR0FBVUEsRUFBT0UsT0FBUyxFQUFHLENBQzdCL0YsRUFBRSx3QkFBd0JnRyxLQUFLSCxFQUMvQi9ELG1CQUFrQm9ELHlCQUNmLENBQ0gvQyxRQUFRQyxJQUFJLFNBQ1o2QixXQUFVQyxLQUFLK0IsT0FBTyxnQkFHOUJ2QyxNQUFPLFNBQVN3QyxFQUFLQyxFQUFRQyxHQUN6QmpHLFNBQVNJLFVBQVksS0FDckJQLEdBQUUsYUFBYThGLFFBQVEsSUFDdkIzRCxTQUFRQyxJQUFJZ0UsRUFDWm5DLFdBQVVDLEtBQUsrQixPQUFPLGVBU2xDakYsR0FBTTRELHdCQUEwQixXQUM1QjVFLEVBQUUsYUFBYXVGLE9BQU8sSUFDdEJ2RixHQUFFd0YsS0FBSyx3QkFDSC9ELEtBQU0sTUFDTmdFLFNBQVUsT0FDVnZFLE1BQ0lELEdBQUlkLFNBQVNNLFVBQ2JpRixlQUFnQnZGLFNBQVNTLHdCQUN6QitFLEtBQU14RixTQUFTVyxXQUVuQjhFLFFBQVMsU0FBU0MsR0FDZDFGLFNBQVNJLFVBQVksS0FDckJQLEdBQUUsYUFBYThGLFFBQVEsSUFDdkIsSUFBSUQsR0FBVUEsRUFBT0UsT0FBUyxFQUFHLENBQzdCL0YsRUFBRSx3QkFBd0JnRyxLQUFLSCxFQUMvQi9ELG1CQUFrQm9ELHlCQUVmLENBQ0gvQyxRQUFRQyxJQUFJLFNBQ1o2QixXQUFVQyxLQUFLK0IsT0FBTyxnQkFHOUJ2QyxNQUFPLFNBQVN3QyxFQUFLQyxFQUFRQyxHQUN6QmpHLFNBQVNJLFVBQVksS0FDckJQLEdBQUUsYUFBYThGLFFBQVEsSUFDdkIzRCxTQUFRQyxJQUFJZ0UsRUFDWm5DLFdBQVVDLEtBQUsrQixPQUFPLGVBUWxDakYsR0FBTXFGLFFBQVUsS0FDaEJyRixHQUFNc0YsU0FBVyxJQUNqQnRGLEdBQU0yRSxLQUFPLENBQ2IzRSxHQUFNdUYsY0FBZ0IsRUFFdEJ2RixHQUFNVCxVQUFZLEtBQ2xCUyxHQUFNeUIsUUFBVSxDQUNoQnpCLEdBQU1SLFNBQVcsWUFHakJRLEdBQU1nRSxlQUFpQixXQUNuQixHQUFJd0IsR0FBTzlFLElBQ1gxQixHQUFFLGNBQWN3QixHQUFHLFFBQVMsV0FDeEJnRixFQUFLYixLQUFPLENBQ1phLEdBQUtILFFBQVUsS0FDZkcsR0FBS0YsU0FBVyxLQUNoQkUsR0FBS0MsaUJBR1R6RyxHQUFFLDZEQUE2RHdCLEdBQUcsUUFBUyxXQUN2RSxHQUFJa0YsR0FBYTFHLEVBQUUsZ0JBQ25CMEcsR0FBV1osUUFBUSxTQUFVLFdBQ3pCOUYsRUFBRTBCLE1BQU1pRixLQUFLLG1CQUFtQlgsS0FBSyxLQUV6Q1UsR0FBV0MsS0FBSyxvQkFBb0JyQyxJQUFJLEdBQ3hDa0MsR0FBS2IsS0FBTyxDQUNaYSxHQUFLRixTQUFXLElBQ2hCRSxHQUFLRCxjQUFnQixJQUd6QnZHLEdBQUUsa0NBQWtDd0IsR0FBRyxRQUFTLFdBQzVDLEdBQUlvRixHQUFZNUcsRUFBRTZHLEtBQUs3RyxFQUFFMEIsTUFBTW9GLE9BQU94QyxNQUN0Q2tDLEdBQUtELGNBQWdCSyxDQUNyQkosR0FBS2IsS0FBTyxDQUNaYSxHQUFLRixTQUFXLElBQ2hCRSxHQUFLQyxrQkFFUkssT0FBT3RGLEdBQUcsV0FBWSxTQUFTYSxHQUM1QixHQUFJQSxFQUFFMEUsU0FBVyxLQUFNLENBQ25CL0csRUFBRSxrQ0FBa0NxRSxVQUs1Q3JFLEdBQUUsNEJBQTRCcUUsTUFBTSxXQUNoQyxHQUFJMkMsR0FBUWhILEVBQUUwQixNQUFNNEMsS0FFcEIsS0FBS3RELEVBQU1ULFVBQVcsQ0FDbEJpRyxFQUFLYixLQUFPLENBQ1ozRixHQUFFLHdDQUF3Q2lILFVBQVUsRUFDcERqRyxHQUFNVCxVQUFZLElBRWxCLElBQUl5RyxHQUFTLEVBQUcsQ0FDWmxGLGtCQUFrQjZDLGdCQUFnQixpQkFDL0IsQ0FDSDdDLGtCQUFrQjZDLGdCQUFnQixjQUV0QzZCLEVBQUtDLGtCQU1iekcsR0FBRSx3Q0FBd0NrSCxPQUFPLFNBQVM3RSxHQUN0RCxHQUFJOEUsR0FBWW5ILEVBQUUsbUJBQW1Cb0gsU0FDakNDLEVBQWVySCxFQUFFMEIsTUFBTTBGLFNBQ3ZCRSxFQUFZdEgsRUFBRTBCLE1BQU11RixXQUV4QixJQUFLSyxFQUFZRCxHQUFnQkYsRUFBWSxJQUN4Q1gsRUFBS0gsVUFFTEcsRUFBS0YsU0FDUixDQUNFRSxFQUFLRixTQUFXLElBQ2hCRSxHQUFLQyxvQkFDRixJQU1YekcsR0FBRSw4QkFBOEJ3QixHQUFHLFFBQVMsU0FBU2EsR0FDakQsR0FBSWtGLEdBQWN2SCxFQUFFLHdDQUNoQndILElBRUpELEdBQVlaLEtBQUsscUJBQXFCYyxLQUFLLFNBQVNDLEVBQUdDLEdBQ25ELEdBQUkzRyxFQUFNUixVQUFZLGNBQWUsQ0FDakMsR0FBSW9ILElBQ0FDLFlBQWFGLEVBQUtHLGFBQWEsTUFDL0JqSCxjQUFlLE9BRWhCLElBQUlHLEVBQU1SLFVBQVksYUFBYyxDQUN2QyxHQUFJb0gsSUFDQUMsWUFBYUYsRUFBS0csYUFBYSxNQUMvQmpILGNBQWU4RyxFQUFLRyxhQUFhLFVBR3pDTixFQUFRQSxFQUFRekIsUUFBVTZCLEdBUTlCNUgsR0FBRXdGLEtBQUssMkJBQ0gvRCxLQUFNLE9BQ05nRSxTQUFVLE9BQ1Z2RSxNQUNJNkcsYUFBYyxFQUNkQyxjQUFlUixFQUNmUyxXQUFZekIsRUFBS3ZGLElBRXJCMkUsUUFBUyxTQUFTMUUsR0FDZGlCLFFBQVFDLElBQUlsQixFQUNaLElBQUlBLEVBQUtnSCxNQUFRLEVBQUcsQ0FFaEJsSSxFQUFFLDZCQUE2QnFFLE9BQy9CSixXQUFVQyxLQUFLQyxRQUFRakQsRUFBS2lILElBQzVCLElBQUluSCxFQUFNUixVQUFZLGNBQWUsQ0FDakNSLEVBQUUsZUFBZXFFLFlBQ2QsSUFBSXJELEVBQU1SLFVBQVksYUFBYyxDQUN2Q1IsRUFBRSxjQUFjcUUsYUFFakIsQ0FDSEosVUFBVUMsS0FBSytCLE9BQU8vRSxFQUFLaUgsT0FHbkN6RSxNQUFPLFNBQVN3QyxFQUFLQyxFQUFRQyxHQUN6QmpFLFFBQVF1QixNQUFNMEMsRUFDZG5DLFdBQVVDLEtBQUsrQixPQUFPLG1CQU90Q2pGLEdBQU15RixjQUFnQixXQUNsQixHQUFJRCxHQUFPOUUsSUFDWCxJQUFJOEUsRUFBS2IsTUFBUSxFQUFHLENBQ2hCM0YsRUFBRSx1QkFBdUJ1RixPQUFPLEtBRXBDdkYsRUFBRXdGLEtBQUsseUJBQ0gvRCxLQUFNLE9BQ05nRSxTQUFVLE9BUVZ2RSxNQUNJd0UsZUFBZ0JjLEVBQUtELGVBQWlCLEdBQ3RDd0IsYUFBYyxFQUNkbEgsY0FBZTJGLEVBQUsvRCxRQUNwQndGLFdBQVl6QixFQUFLdkYsR0FDakIwRSxLQUFNYSxFQUFLYixNQUVmQyxRQUFTLFNBQVNDLEdBQ2Q3RixFQUFFLHVCQUF1QjhGLFFBQVEsSUFDakM5RSxHQUFNVCxVQUFZLEtBQ2xCNEIsU0FBUUMsSUFBSXlELEVBQ1osSUFBSUEsRUFBT3FDLE1BQVEsRUFBRyxDQUNsQixHQUFJWCxHQUFjdkgsRUFBRSxtQkFDaEJvSSxFQUFZLEdBQ1pDLEVBQVVDLEtBQUtDLE1BQU0xQyxFQUFPM0UsS0FBS3NILFlBQ3JDeEksR0FBRXlILEtBQUs1QixFQUFPM0UsS0FBSzhHLGNBQWUsU0FBU04sRUFBR0MsR0FDMUMsR0FBSTlHLEdBQWdCLEVBQ3BCLElBQUkyRixFQUFLL0QsU0FBVyxFQUFHLENBQ25CLFFBQVNmLEtBQUtiLGVBQ1YsSUFBSyxHQUNEQSxFQUFnQixJQUNoQixNQUNKLEtBQUssR0FDREEsRUFBZ0IsSUFDaEIsTUFDSixLQUFLLEdBQ0RBLEVBQWdCLElBQ2hCLE1BQ0osS0FBSyxHQUNEQSxFQUFnQixJQUNoQixNQUNKLFNBQ0lBLEVBQWdCLEdBQ2hCLFFBSVosR0FBSTJGLEVBQUsvRCxTQUFXLEVBQUcsQ0FDbkIyRixHQUFhLG9DQUNULGlCQUFtQjFHLEtBQUtiLGNBQWdCLFNBQVdhLEtBQUtULEdBQUssaUZBQzdELGVBQWlCUyxLQUFLVCxHQUFLLHdCQUMzQixzQ0FDQSxtQ0FBcUNTLEtBQUsrRyxRQUFVLEtBQ3BELFNBQ0EvRyxLQUFLZ0gsTUFDTCxXQUNBLCtCQUFpQzdILEVBQWdCLFVBQ2pELCtCQUFpQ2EsS0FBS2lILFNBQVcsVUFDakQsYUFDRCxDQUNIUCxHQUFhLG9DQUNULFNBQVcsUUFBVTFHLEtBQUtULEdBQUssaUZBQy9CLGVBQWlCUyxLQUFLVCxHQUFLLHdCQUMzQixzQ0FDQSxtQ0FBcUNTLEtBQUsrRyxRQUFVLEtBQ3BELFNBQ0EvRyxLQUFLa0gsS0FDTCxXQUNBLCtCQUFpQ2xILEtBQUttSCxXQUFhLFVBQ25ELFdBR1osSUFBSXJDLEVBQUtiLE1BQVEsSUFBTWEsRUFBS2IsS0FBTSxDQUM5QjRCLEVBQVl2QixLQUFLb0MsRUFDakJiLEdBQVl1QixPQUFPLGtDQUNuQnRDLEdBQUtGLFNBQVcsS0FFaEIsS0FBS0UsRUFBS0QsY0FBZSxDQUNyQnZHLEVBQUUsaUJBQWlCdUYsY0FFcEIsSUFBSWlCLEVBQUtiLEtBQU8sRUFBRyxDQUN0QjRCLEVBQVlaLEtBQUssV0FBV29DLE9BQU9YLEVBQ25DNUIsR0FBS0YsU0FBVyxNQUlwQixHQUFJK0IsRUFBUVcsY0FBZ0JYLEVBQVFZLFlBQWEsQ0FDN0MxQixFQUFZWixLQUFLLFdBQVd1QyxNQUM1QjFDLEdBQUtILFFBQVUsS0FFbkJHLEVBQUtiLFdBRUYsQ0FDSDFCLFVBQVVDLEtBQUsrQixPQUFPLGVBRzlCdkMsTUFBTyxTQUFTd0MsRUFBS0MsRUFBUUMsR0FDekJwRyxFQUFFLHVCQUF1QjhGLFFBQVEsSUFDakM5RSxHQUFNVCxVQUFZLEtBQ2xCNEIsU0FBUXVCLE1BQU0wQyxFQUNkbkMsV0FBVUMsS0FBSytCLE9BQU8saUJBUWxDakYsR0FBTWlFLDZCQUErQixXQUdqQ2pGLEVBQUUsaUJBQWlCcUUsTUFBTSxXQUVyQixHQUFJbEUsU0FBU0ssVUFBWSxjQUFlLENBQ3BDTCxTQUFTUyx3QkFBMEJaLEVBQUU2RyxLQUFLN0csRUFBRSxtQkFBbUJzRSxNQUMvRHRELEdBQU00RCw4QkFDSCxJQUFJekUsU0FBU0ssVUFBWSxhQUFjLENBQzFDTCxTQUFTVSxjQUFnQmIsRUFBRSwyQkFBMkJzRSxLQUN0RG5FLFVBQVNRLHVCQUF5QlgsRUFBRTZHLEtBQUs3RyxFQUFFLG1CQUFtQnNFLE1BQzlEdEQsR0FBTStELDZCQU9kL0UsR0FBRSxtQkFBbUJ3QixHQUFHLFdBQVksU0FBVWEsR0FDMUMsR0FBSUEsRUFBRTBFLFNBQVcsR0FBSSxDQUNqQi9HLEVBQUUsaUJBQWlCcUUsVUFLM0JyRSxHQUFFLDJCQUEyQndCLEdBQUcsU0FBVSxXQUN0Q3hCLEVBQUUsaUJBQWlCcUUsVUFRM0JyRCxHQUFNbUksd0JBQTBCLFNBQVN0RyxFQUFXSCxFQUFVRCxFQUFTRyxFQUFVTCxHQUc3RXZDLEVBQUUsb0JBQW9COEUsS0FBSyxNQUFPakMsRUFDbEM3QyxHQUFFLHFCQUFxQmdHLEtBQUt0RCxFQUM1QixRQUFRRCxHQUNKLElBQUssR0FDRHpDLEVBQUUsb0JBQW9CZ0csS0FBSyxLQUMzQixNQUNKLEtBQUssR0FDRGhHLEVBQUUsb0JBQW9CZ0csS0FBSyxLQUMzQixNQUNKLEtBQUssR0FDRGhHLEVBQUUsb0JBQW9CZ0csS0FBSyxLQUMzQixNQUNKLEtBQUssR0FDRGhHLEVBQUUsb0JBQW9CZ0csS0FBSyxLQUMzQixNQUNKLFNBQ0ksTUFFUmhHLEVBQUUsb0JBQW9CZ0csS0FBS3BELEVBRTNCNUMsR0FBRSw0Q0FBNENxRSxNQUFNLFdBQ2hEckUsRUFBRSxxQkFBcUI4RixRQUFRLE1BR25DOUYsR0FBRSxzQkFBc0JxRSxNQUFNLFdBRTFCLEdBQUkrRSxHQUFRcEosRUFBRTZHLEtBQUs3RyxFQUFFLHdCQUF3QnNFLE1BRTdDLElBQUkrRSxHQUFNLG1DQUNWLEtBQUtBLEVBQUlDLEtBQUtGLEdBQVEsQ0FDbEJuRixVQUFVQyxLQUFLK0IsT0FBTyxTQUN0QmpHLEdBQUUsd0JBQXdCc0UsSUFBSSxHQUM5QixPQUFPLE9BRVgsR0FBSThFLEdBQVMsRUFBRyxDQUNabkYsVUFBVUMsS0FBSytCLE9BQU8sZUFDdEIsT0FBTyxPQUdYLEdBQUltRCxFQUFRbkYsVUFBVXNGLGNBQWUsQ0FDakN0RixVQUFVQyxLQUFLK0IsT0FBTyxVQUFZaEMsVUFBVXNGLGNBQWdCLEtBQzVELE9BQU8sT0FHWCxHQUFJQyxLQUNKQSxHQUFJLGVBQWlCakgsQ0FDckJpSCxHQUFJLGlCQUFtQi9HLENBQ3ZCLElBQUlnSCxJQUFtQkQsRUFFdkJFLGNBQ0ExSixHQUFFd0YsS0FBSywyQkFDSC9ELEtBQU0sT0FDTlAsTUFDSTZHLGFBQWdCLEVBQ2hCQyxjQUFpQnlCLEVBQ2pCRSxZQUFlUCxFQUFRLElBQ3ZCUSxZQUFlLEdBRW5CaEUsUUFBUyxTQUFTQyxHQUNkZ0UsYUFDQSxJQUFJaEUsRUFBT3FDLE1BQVEsRUFBRyxDQUNsQmxJLEVBQUUscUJBQXFCOEYsUUFBUSxJQUMvQjdCLFdBQVVDLEtBQUtDLFFBQVEsU0FDdkJuRCxHQUFNK0QsK0JBQ0gsQ0FDSGQsVUFBVUMsS0FBSytCLE9BQU8saUJBRzlCdkMsTUFBTyxTQUFTd0MsRUFBS0MsRUFBUUMsR0FDekJ5RCxhQUNBMUgsU0FBUUMsSUFBSWdFLEVBQ1puQyxXQUFVQyxLQUFLK0IsT0FBTyx3QkFTdEMsT0FBT2pGLEtBS1gsSUFBSWMsbUJBQW9CLFdBRXBCLEdBQUlnSSxLQU9KQSxHQUFNOUgsaUJBQW1CLFNBQVMrSCxFQUFTQyxFQUFXQyxHQUVsRCxHQUFJRCxHQUFhLEVBQUcsQ0FDaEIsR0FBSXpGLEdBQU8wRixHQUFnQixFQUFJLGNBQWdCLG1CQUM1QyxJQUFJRCxHQUFhLEdBQUtBLEdBQWEsR0FBS0EsR0FBYSxHQUFLQSxHQUFhLEVBQUcsQ0FDN0UsR0FBSXpGLEdBQU8wRixHQUFnQixFQUFJLGNBQWdCLGVBR25EakssRUFBRXVELE1BQU1nQixFQUFNLFFBQ1ZkLEtBQU0sV0FDRmlHLGFBQ0ExSixHQUFFd0YsS0FBSyx1QkFDSC9ELEtBQU0sT0FDTmdFLFNBQVUsT0FDVnZFLE1BQ0lnSixTQUFZSCxFQUNaSSxXQUFjSCxFQUNkQyxhQUFnQkEsR0FFcEJyRSxRQUFTLFNBQVNDLEdBQ2RnRSxhQUNBLElBQUloRSxFQUFPcUMsTUFBUSxFQUFHLENBQ2xCLEdBQUkrQixHQUFnQixFQUFHLENBQ25CaEcsVUFBVUMsS0FBS0MsUUFBUSxhQUNwQixDQUNIRixVQUFVQyxLQUFLQyxRQUFRLFNBRTNCLEdBQUk2RixHQUFhLEVBQUcsQ0FDaEJJLFdBQVcsV0FDUHpJLE9BQU9DLFNBQVN5SSxVQUNqQixVQUNBLENBQ0hySixNQUFNK0QsZ0NBRVAsQ0FDSGQsVUFBVUMsS0FBSytCLE9BQU8saUJBRzlCdkMsTUFBTyxTQUFTd0MsRUFBS0MsRUFBUUMsR0FDekJ5RCxhQUNBMUgsU0FBUUMsSUFBSWdFLEVBQ1puQyxXQUFVQyxLQUFLK0IsT0FBTyxxQkFjMUM2RCxHQUFNL0gsb0JBQXNCLFNBQVNnSSxFQUFTQyxFQUFXQyxHQUNyRFAsYUFDQTFKLEdBQUV3RixLQUFLLHVCQUNIL0QsS0FBTSxPQUNOZ0UsU0FBVSxPQUNWdkUsTUFDSUQsR0FBTThJLEVBQ05PLGVBQWtCTCxHQUV0QnJFLFFBQVMsU0FBU0MsR0FDZGdFLGFBQ0EsSUFBSWhFLEVBQU9xQyxNQUFRLEVBQUcsQ0FDbEIsR0FBSStCLEdBQWdCLEVBQUcsQ0FDbkJoRyxVQUFVQyxLQUFLQyxRQUFRLGFBQ3BCLENBQ0hGLFVBQVVDLEtBQUtDLFFBQVEsU0FFM0IsR0FBSTZGLEdBQWEsRUFBRyxDQUNoQkksV0FBVyxXQUNQekksT0FBT0MsU0FBU3lJLFVBQ2pCLFVBQ0EsQ0FDSHJKLE1BQU0rRCxnQ0FFUCxDQUNIZCxVQUFVQyxLQUFLK0IsT0FBTyxpQkFHOUJ2QyxNQUFPLFNBQVN3QyxFQUFLQyxFQUFRQyxHQUN6QnlELGFBQ0ExSCxTQUFRQyxJQUFJZ0UsRUFDWm5DLFdBQVVDLEtBQUsrQixPQUFPLGtCQWNsQzZELEdBQU0vRyxlQUFpQixTQUFTWSxFQUFXNEcsRUFBY0MsRUFBWUMsR0FDakVmLGFBRUExSixHQUFFd0YsS0FBSyw2QkFDSC9ELEtBQU0sT0FDTmdFLFNBQVUsT0FDVnZFLE1BQ0krRyxXQUFZdEUsRUFDWjlDLGNBQWUwSixFQUNmMUMsWUFBYTJDLEVBQ2JFLFVBQVdELEdBRWY3RSxRQUFTLFNBQVMxRSxHQUNkMkksYUFDQSxJQUFJM0ksRUFBS2dILE1BQVEsRUFBRyxDQUNoQixHQUFJdUMsR0FBWSxFQUFHLENBQ2Z4RyxVQUFVQyxLQUFLQyxRQUFRLGVBQ3BCLENBQ0hGLFVBQVVDLEtBQUtDLFFBQVEsU0FFM0JuRCxNQUFNK0QsK0JBQ0gsQ0FDSGQsVUFBVUMsS0FBSytCLE9BQU8vRSxFQUFLaUgsT0FHbkN6RSxNQUFPLFNBQVN3QyxFQUFLQyxFQUFRQyxHQUN6QnlELGFBQ0ExSCxTQUFRdUIsTUFBTTBDLEVBQ2RuQyxXQUFVQyxLQUFLK0IsT0FBTyxpQkFXbEM2RCxHQUFNbEcsY0FBZ0IsU0FBUzNDLEVBQUkwSixHQUMvQjNLLEVBQUV1RCxNQUFNb0gsRUFBYSxjQUFnQixlQUFnQixRQUNqRGxILEtBQU0sV0FDRmlHLGFBQ0ExSixHQUFFd0YsS0FBSyx1QkFDSC9ELEtBQU0sT0FDTmdFLFNBQVUsT0FDVnZFLE1BTUlnSixTQUFVakosRUFDVmtKLFdBQVksRUFDWkYsYUFBY1UsRUFBYSxFQUFJLEdBRW5DL0UsUUFBUyxTQUFTMUUsR0FFZCxHQUFJQSxFQUFLZ0gsTUFBUSxFQUFHLENBQ2hCakUsVUFBVUMsS0FBS0MsUUFBUWpELEVBQUtpSCxJQUM1QmlDLFlBQVcsV0FDUFEsY0FDRCxTQUNBLENBQ0gzRyxVQUFVQyxLQUFLK0IsT0FBTy9FLEVBQUtpSCxJQUMzQjBCLGNBQ0FyRCxNQUFLcUUsU0FBVyxPQUd4Qm5ILE1BQU8sU0FBU3dDLEVBQUtDLEVBQVFDLEdBQ3pCakUsUUFBUXVCLE1BQU0wQyxFQUNkeUQsY0FDQXJELE1BQUtxRSxTQUFXLElBQ2hCNUcsV0FBVUMsS0FBSytCLE9BQU8sb0JBZ0IxQzZELEdBQU16RyxvQkFBc0IsU0FBU3dFLEVBQWFoSCxFQUFlb0gsR0FDN0R5QixhQUNBMUosR0FBRXdGLEtBQUssc0JBQ0gvRCxLQUFNLE9BQ05nRSxTQUFVLE9BQ1Z2RSxNQUNJZ0osU0FBVXJDLEVBQ1ZzQyxXQUFZdEosRUFDWmtILGFBQWMsRUFDZEUsV0FBWUEsR0FFaEJyQyxRQUFTLFNBQVNDLEdBQ2RnRSxhQUNBLElBQUloRSxFQUFPcUMsTUFBUSxFQUFHLENBQ2xCLEdBQUk0QyxHQUFVakYsRUFBTzNFLEtBQUssWUFDdEI2SixFQUFjbEYsRUFBTzNFLEtBQUssZ0JBQzFCOEosRUFBWUMsT0FBT0MsS0FBS0gsR0FBYWhGLE9BQ3JDeEIsRUFBTyxFQUVYLElBQUl1RyxHQUFXLEVBQUcsQ0FDZHZHLEVBQU8sa0VBQ0osSUFBSXdHLEVBQVksSUFBTUksVUFBVyxDQUVwQyxJQUFLLEdBQUlDLEdBQVEsRUFBR0EsR0FBU0osRUFBV0ksSUFBVSxDQUM5QzdHLEdBQVMsSUFBTXdHLEVBQVlLLEdBQU8sU0FBVyxJQUVqRDdHLEVBQVEsbUNBQXFDQSxFQUFPLFFBRWpELENBQ0gsR0FBSXlHLEdBQWEsRUFBRyxDQUNoQnpHLEVBQU8sOENBQ0osQ0FFSCxJQUFLLEdBQUk2RyxHQUFRLEVBQUdBLEVBQVFKLEVBQVdJLElBQVUsQ0FDN0M3RyxHQUFTLElBQU13RyxFQUFZSyxHQUFPLFNBQVcsSUFFakQ3RyxFQUFPLHdDQUEwQ0EsRUFBTyxLQUdoRXZFLEVBQUV1RCxNQUFNZ0IsRUFBTSxRQUNWOEcsT0FBUSxPQUNSNUgsS0FBTSxXQUNGcUcsRUFBTXdCLHFCQUFxQnpELEVBQWFoSCxFQUFlb0gsVUFJNUQsQ0FDSGhFLFVBQVVDLEtBQUsrQixPQUFPLFdBRzlCdkMsTUFBTyxTQUFTd0MsRUFBS0MsRUFBUUMsR0FDekJ5RCxhQUNBMUgsU0FBUUMsSUFBSWdFLEVBQ1puQyxXQUFVQyxLQUFLK0IsT0FBTyxxQkFPbEM2RCxHQUFNakcscUJBQXVCLFNBQVVnRSxHQUNuQzZCLGFBQ0ExSixHQUFFd0YsS0FBSyxzQkFDSC9ELEtBQU0sT0FDTmdFLFNBQVUsT0FDVnZFLE1BQ0lnSixTQUFVckMsRUFDVnNDLFdBQVksRUFDWnBDLGFBQWMsRUFDZEUsV0FBWTlILFNBQVNNLFdBRXpCbUYsUUFBUyxTQUFTQyxHQUNkZ0UsYUFDQSxJQUFJaEUsRUFBT3FDLE1BQVEsRUFBRyxDQUNsQixHQUFJNEMsR0FBVWpGLEVBQU8zRSxLQUFLLFlBQ3RCNkosRUFBY2xGLEVBQU8zRSxLQUFLLGdCQUMxQjhKLEVBQVlDLE9BQU9DLEtBQUtILEdBQWFoRixPQUNyQ3hCLEVBQU8sRUFFWCxJQUFJdUcsR0FBVyxFQUFHLENBQ2R2RyxFQUFPLDhDQUNKLENBQ0gsSUFBSyxHQUFJNkcsR0FBUSxFQUFHQSxHQUFTSixFQUFXSSxJQUFVLENBQzlDN0csR0FBUyxJQUFNd0csRUFBWUssR0FBTyxTQUFXLElBRWpEN0csRUFBUSxtQ0FBcUNBLEVBQU8sSUFHeER2RSxFQUFFdUQsTUFBTWdCLEVBQU0sUUFDVjhHLE9BQVEsT0FDUjVILEtBQU0sV0FDRnFHLEVBQU13QixxQkFBcUJ6RCxFQUFhLEVBQUcxSCxTQUFTTSxrQkFJekQsQ0FDSHdELFVBQVVDLEtBQUsrQixPQUFPLFFBQ3RCOUQsU0FBUUMsSUFBSXlELEVBQU9zQyxPQUczQnpFLE1BQU8sU0FBU3dDLEVBQUtDLEVBQVFDLEdBQ3pCeUQsYUFDQTFILFNBQVFDLElBQUlnRSxFQUNabkMsV0FBVUMsS0FBSytCLE9BQU8scUJBTWxDNkQsR0FBTTVILGNBQWUsU0FBU2pCLEVBQUdzSyxHQUU3QixHQUFJQyxHQUFReEwsRUFBRSxxQkFBcUJrQixLQUFLLGVBQ3hDLElBQUdzSyxHQUFTQSxHQUFTLEVBQUcsQ0FDcEJ4TCxFQUFFdUQsTUFBTWdJLEVBQWEsd0NBQ2pCLDBDQUEyQyxRQUMzQ0UsS0FBTSxPQUNOaEksS0FBTSxXQUNGaUcsYUFDQTFKLEdBQUV3RixLQUFLLHNCQUNIL0QsS0FBTSxPQUNOZ0UsU0FBVSxPQUNWdkUsTUFDSUQsR0FBSUEsRUFDSnNLLFdBQVdBLEdBRWYzRixRQUFTLFNBQVUxRSxHQUNmLEdBQUlBLEVBQUtnSCxNQUFRLEVBQUcsQ0FDaEJqRSxVQUFVQyxLQUFLQyxRQUFRakQsRUFBS2lILElBQzVCaUMsWUFBVyxXQUNQUSxjQUNELFNBQ0EsQ0FDSDNHLFVBQVVDLEtBQUsrQixPQUFPL0UsRUFBS2lILElBQzNCMEIsMEJBUW5CLENBQ0Q1RixVQUFVQyxLQUFLK0IsT0FBTyw4QkFHOUI2RCxHQUFNN0gsWUFBYyxTQUFTaEIsRUFBR3lLLEdBRTVCLEdBQUlGLEdBQVF4TCxFQUFFLHFCQUFxQmtCLEtBQUssZUFDeEMsSUFBR3NLLEdBQVdBLEdBQVMsRUFBRyxDQUN0QnhMLEVBQUV1RCxNQUFNbUksRUFBVyxzQ0FDZix3Q0FBeUMsUUFDekNELEtBQU0sT0FDTmhJLEtBQU0sV0FDRmlHLGFBQ0ExSixHQUFFd0YsS0FBSyx5QkFDSC9ELEtBQU0sT0FDTmdFLFNBQVUsT0FDVnZFLE1BQ0lELEdBQUlBLEVBQ0owSyxpQkFBa0JELEdBRXRCOUYsUUFBUyxTQUFVMUUsR0FDZmlCLFFBQVFDLElBQUlsQixFQUNaVSxVQUFTeUksUUFDVCxJQUFJbkosRUFBS2dILE1BQVEsRUFBRyxDQUNoQmpFLFVBQVVDLEtBQUtDLFFBQVFqRCxFQUFLaUgsSUFDNUJpQyxZQUFXLFdBQ1BRLGNBQ0QsU0FDQSxDQUNIM0csVUFBVUMsS0FBSytCLE9BQU8vRSxFQUFLaUgsSUFDM0IwQiwwQkFPbkIsQ0FDRDVGLFVBQVVDLEtBQUsrQixPQUFPLDhCQVU5QjZELEdBQU13QixxQkFBdUIsU0FBU2QsRUFBWUQsRUFBY3FCLEdBRTVENUwsRUFBRXdGLEtBQUssZUFDSC9ELEtBQU0sT0FDTmdFLFNBQVUsT0FDVnZFLE1BQ0lnSixTQUFVTSxFQUNWTCxXQUFZSSxFQUNaeEMsYUFBYyxFQUNkRSxXQUFZMkQsR0FFaEJoRyxRQUFTLFNBQVNDLEdBQ2Q3RixFQUFFLGFBQWE4RixRQUFRLElBQ3ZCLElBQUlELEVBQU9xQyxNQUFRLEVBQUcsQ0FDbEJqRSxVQUFVQyxLQUFLQyxRQUFRLGFBQ3BCLENBQ0hGLFVBQVVDLEtBQUsrQixPQUFPLGNBRTFCLEdBQUlzRSxHQUFnQixFQUFHLENBQ25CdkosTUFBTTRELDhCQUNILENBQ0g1RCxNQUFNK0QsNkJBR2RyQixNQUFPLFNBQVN3QyxFQUFLQyxFQUFRQyxHQUN6QnBHLEVBQUUsYUFBYThGLFFBQVEsSUFDdkIzRCxTQUFRQyxJQUFJZ0UsRUFDWm5DLFdBQVVDLEtBQUsrQixPQUFPLHFCQVlsQzZELEdBQU03RyxlQUFpQixTQUFTVSxFQUFXbEIsRUFBU0YsRUFBT08sRUFBYStJLEdBTXBFLEdBQUkvSSxHQUFlLEdBQUtBLEdBQWUsRUFBRyxDQUN0QyxHQUFJTCxHQUFXLEVBQUcsQ0FDZHpDLEVBQUV1RCxNQUFNLHVCQUF3QixRQUM1QkMsSUFBSyxRQUVOLElBQUlmLEdBQVcsR0FBS0EsR0FBVyxHQUFLQSxHQUFXLEVBQUcsQ0FDckR6QyxFQUFFdUQsTUFBTSx1QkFBd0IsUUFDNUJDLElBQUssSUFHYixNQUFPLE9BR1hrRyxhQUNBMUosR0FBRXdGLEtBQUssNkJBQ0gvRCxLQUFNLE9BQ05nRSxTQUFVLE9BQ1Z2RSxNQUNJK0csV0FBWXRFLEVBQ1o5QyxjQUFlNEIsRUFDZm9GLFlBQWF0RixFQUNidUosVUFBV0QsR0FFZmpHLFFBQVMsU0FBUzFFLEdBQ2QySSxhQUNBLElBQUkzSSxFQUFLZ0gsTUFBUSxFQUFHLENBQ2hCLEdBQUkyRCxHQUFZLEVBQUcsQ0FDZjVILFVBQVVDLEtBQUtDLFFBQVEsYUFDcEIsQ0FDSEYsVUFBVUMsS0FBS0MsUUFBUSxTQUUzQm5ELE1BQU0rRCwrQkFDSCxDQUNIZCxVQUFVQyxLQUFLK0IsT0FBTyxXQUc5QnZDLE1BQU8sU0FBU3dDLEVBQUtDLEVBQVFDLEdBQ3pCakUsUUFBUXVCLE1BQU0wQyxFQUNkeUQsY0FDQTVGLFdBQVVDLEtBQUsrQixPQUFPLGlCQU9sQzZELEdBQU01RyxZQUFjLFNBQVUvQixHQUUxQm5CLEVBQUV3RixLQUFLLCtCQUNIL0QsS0FBTSxPQUNOZ0UsU0FBVSxPQUNWdkUsTUFDSTZLLFNBQVU1SyxHQUVkeUUsUUFBUyxTQUFVQyxHQUNmLE9BQVFBLEVBQU9xQyxNQUNYLElBQUssR0FDRHZHLE9BQU9DLFNBQVNDLEtBQU9nRSxFQUFPM0UsS0FBSyxNQUNuQyxNQUNKLEtBQUssR0FDRGxCLEVBQUV1RCxNQUFNLDJDQUE0QyxRQUNoREMsSUFBSyxHQUVULE1BQ0osS0FBSyxHQUNEeEQsRUFBRXVELE1BQU0sNENBQTZDLFFBQ2pEQyxJQUFLLEdBRVQsTUFDSixLQUFLLEdBQ0R4RCxFQUFFdUQsTUFBTSw4QkFBK0IsUUFDbkNDLElBQUssR0FFVCxNQUNKLEtBQUssR0FDRHhELEVBQUV1RCxNQUFNLFdBQVksUUFDaEJDLElBQUssR0FFVCxNQUNKLEtBQUssR0FDRHhELEVBQUV1RCxNQUFNLHVCQUF3QixRQUM1QkMsSUFBSyxHQUVULE1BQ0osS0FBSyxHQUNEeEQsRUFBRXVELE1BQU0scUJBQXNCLFFBQzFCQyxJQUFLLEdBRVQsTUFDSixTQUNJckIsUUFBUUMsSUFBSSxPQUNaNkIsV0FBVUMsS0FBSytCLE9BQU9KLEVBQU9zQyxJQUM3QixPQUVSaEcsUUFBUUMsSUFBSXlELEVBQU9zQyxNQUV2QnpFLE1BQU8sU0FBVXdDLEVBQUtDLEVBQVFDLEdBQzFCakUsUUFBUUMsSUFBSWdFLEVBQ1puQyxXQUFVQyxLQUFLK0IsT0FBTyxxQkFNbEM2RCxHQUFNM0csY0FBZ0IsU0FBU1YsRUFBU0YsRUFBT0csRUFBVUMsRUFBT0MsRUFBVUMsR0FFdEUsR0FBSUYsR0FBUyxFQUFHLENBQ1osR0FBSUYsR0FBVyxFQUFHLENBQ2R6QyxFQUFFdUQsTUFBTSx1QkFBd0IsUUFDNUJDLElBQUssUUFFTixJQUFJZixHQUFXLEdBQUtBLEdBQVcsR0FBS0EsR0FBVyxFQUFHLENBQ3JEekMsRUFBRXVELE1BQU0sdUJBQXdCLFFBQzVCQyxJQUFLLFNBR1YsQ0FDSHhDLE1BQU1tSSx3QkFBd0J0RyxFQUFXSCxFQUFVRCxFQUFTRyxFQUFVTCxFQUN0RXZDLEdBQUUscUJBQXFCdUYsT0FBTyxNQUt0Q3VFLEdBQU0xRyxpQkFBbUIsU0FBU1gsRUFBU0YsRUFBT08sR0FFOUMsR0FBSUEsR0FBZSxFQUFHLENBQ2xCLEdBQUl5QixHQUFPLGdDQUNSLElBQUl6QixHQUFlLEVBQUcsQ0FDekIsR0FBSXlCLEdBQU8sOEJBRWZ2RSxFQUFFdUQsTUFBTWdCLEVBQU0sUUFDVmQsS0FBTSxXQUNGaUcsYUFDQSxJQUFJRixLQUNKQSxHQUFJLGVBQWlCakgsQ0FDckJpSCxHQUFJLGlCQUFtQi9HLENBQ3ZCLElBQUlnSCxJQUFtQkQsRUFFdkJ4SixHQUFFd0YsS0FBSywyQkFDSC9ELEtBQU0sT0FDTlAsTUFDSTZHLGFBQWdCLEVBQ2hCQyxjQUFpQnlCLEVBQ2pCRyxZQUFlLEdBRW5CaEUsUUFBUyxTQUFTQyxHQUNkZ0UsYUFDQSxJQUFJaEUsRUFBT3FDLE1BQVEsRUFBRyxDQUNsQmpFLFVBQVVDLEtBQUtDLFFBQVEsVUFDdkJuRCxPQUFNK0QsK0JBQ0gsQ0FDSGQsVUFBVUMsS0FBSytCLE9BQU8saUJBRzlCdkMsTUFBTyxTQUFTd0MsRUFBS0MsRUFBUUMsR0FDekJ5RCxhQUNBMUgsU0FBUUMsSUFBSWdFLEVBQ1puQyxXQUFVQyxLQUFLK0IsT0FBTyx5QkFTMUM2RCxHQUFNeEcscUJBQXVCLFNBQVVmLEVBQU95SixHQUUxQ2hNLEVBQUV3RixLQUFLLDRCQUNIL0QsS0FBTSxPQUNOZ0UsU0FBVSxPQUNWdkUsTUFDSUQsR0FBSXNCLEVBQ0oxQixjQUFlLEVBQ2ZvTCxXQUFZRCxFQUFZLEVBQUksR0FFaENwRyxRQUFTLFNBQVVDLEdBQ2YsR0FBSUEsRUFBT3FDLE1BQVEsRUFBRyxDQUNsQixHQUFJOEQsRUFBVyxDQUNYL0gsVUFBVUMsS0FBS0MsUUFBUSxjQUNwQixDQUNIRixVQUFVQyxLQUFLQyxRQUFRLFVBRTNCeEMsT0FBT0MsU0FBU3lJLGFBRWIsQ0FDSHBHLFVBQVVDLEtBQUsrQixPQUFPLGdCQUc5QnZDLE1BQU8sU0FBVXdDLEVBQUtDLEVBQVFDLEdBQzFCakUsUUFBUUMsSUFBSWdFLEVBQ1puQyxXQUFVQyxLQUFLK0IsT0FBTyxrQkFNbEM2RCxHQUFNNUUsbUJBQXFCLFdBRXZCbEYsRUFBRSwrQkFBK0J5SCxLQUFLLFdBQ2xDLEdBQUl5RSxHQUFPbE0sRUFBRTBCLEtBQ2J3SyxHQUFLcEgsS0FBSyxXQUFZb0gsRUFBS3BILEtBQUssUUFDaENvSCxHQUFLckgsV0FBVyxVQVN4QmlGLEdBQU1uRixnQkFBa0IsU0FBVVMsR0FFOUIsR0FBSStHLEdBQVduTSxFQUFFLDZDQUE2Q3NFLEtBRTlELElBQUs2SCxHQUFZLEdBQUsvRyxHQUFVLGFBQWlCK0csR0FBWSxHQUFLL0csR0FBVSxhQUFlLENBQ3ZGLE1BQU8sT0FFWCxHQUFJQSxHQUFVLFlBQWEsQ0FDdkJwRixFQUFFLHdCQUF3QnlFLFNBQVMsbUJBQ25DekUsR0FBRSx5QkFBeUIwRSxZQUFZLG1CQUV2QzFELE9BQU1SLFNBQVcsWUFDakJRLE9BQU15QixRQUFVLE1BRWIsSUFBSTJDLEdBQVUsYUFBYyxDQUMvQnBGLEVBQUUseUJBQXlCeUUsU0FBUyxtQkFDcEN6RSxHQUFFLHdCQUF3QjBFLFlBQVksbUJBRXRDMUQsT0FBTVIsU0FBVyxhQUNqQlEsT0FBTXlCLFFBQVUsR0FNeEIsT0FBT3FIIiwiZmlsZSI6Im1lbWJlckRldGFpbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTcvMy8yMS5cbiAqL1xuXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcbiAgICBCdXNpbmVzcy5pbml0KCk7XG4gICAgJGludml0ZUd1ZXN0LmluaXQoKTtcbiAgICAkYWxpdmVTaG93U2V0LmluaXQoKTtcbn0pO1xuXG52YXIgQnVzaW5lc3MgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgQnVzaW5lc3MgPSB7fTtcblxuICAgIEJ1c2luZXNzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgIEJ1c2luZXNzLnRhYlN0YXRlID0gXCJzaW5nbGVMaXN0XCI7ICAvLyDpu5jorqTmmL7npLrkuJPmoI/liJfooaggICAgIO+8iFwicGFja2FnZUxpc3RcIiwgXCJzaW5nbGVMaXN0XCLvvIlcblxuICAgIEJ1c2luZXNzLm1lbWJlcl9pZCA9IC0xO1xuICAgIEJ1c2luZXNzLm1lbWJlcl9wcmljZSA9IDA7XG5cbiAgICAvLyAg5pCc57SiXG4gICAgQnVzaW5lc3Muc2VhcmNoQ29udGVudEZvclNpbmdsZSA9IFwiXCI7XG4gICAgQnVzaW5lc3Muc2VhcmNoQ29udGVudEZvclBhY2thZ2UgPSBcIlwiO1xuICAgIEJ1c2luZXNzLnJlc291cmNlX3R5cGUgPSAwO1xuXG4gICAgQnVzaW5lc3MucGFnZUluZGV4ID0gMTtcblxuICAgIEJ1c2luZXNzLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgLy8gIOS7juW9k+WJjVVSTOS4reWPluWHuuWPguaVsFxuICAgICAgICBCdXNpbmVzcy5tZW1iZXJfaWQgPSBHZXRRdWVyeVN0cmluZyhcImlkXCIpO1xuICAgICAgICBtb2RhbC5pZCA9IEdldFF1ZXJ5U3RyaW5nKFwiaWRcIik7XG4gICAgICAgIEJ1c2luZXNzLm1lbWJlcl9wcmljZSA9ICQoXCIuYWRtaW5fZGF0YVwiKS5kYXRhKFwibWVtYmVyX3ByaWNlXCIpO1xuXG4gICAgICAgIC8v5omT5byA55u05pKt56qX5Y+jXG4gICAgICAgIHZhciBhbGl2ZUlkID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImludml0ZUd1ZXN0QWxpdmVJZFwiKTtcbiAgICAgICAgaWYgKGFsaXZlSWQgJiYgYWxpdmVJZCAhPSBcIlwiKSB7XG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwiaW52aXRlR3Vlc3RBbGl2ZUlkXCIsIFwiXCIpO1xuICAgICAgICAgICAgJGludml0ZUd1ZXN0Lm9wZW5HdWVzdFNldHRpbmdXaW5kb3coYWxpdmVJZCk7XG4gICAgICAgIH1cblxuXG4gICAgICAgIC8vICDpkojlr7nkvJrlkZjkv6Hmga/nmoTmk43kvZxcbiAgICAgICAgJCgnLnRvb2xCb3gnKS5vbihcImNsaWNrXCIsIFwibGlcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgdHlwZSA9ICQodGhpcykuZGF0YShcInR5cGVcIik7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWRpdFwiOi8vICDnvJbovpFcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9lZGl0X21lbWJlcl9wYWdlP2lkPVwiICsgQnVzaW5lc3MubWVtYmVyX2lkICsgXCImcGFnZV9vcmlnaW49bWVtYmVyX2RldGFpbFwiO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwibmV3TGlzdFNob3dcIjovL+WcqOacgOaWsOWIl+ihqOS4reaYvuekulxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5jaGFuZ2VOZXdsTGlzdFN0YXRlKEJ1c2luZXNzLm1lbWJlcl9pZCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJuZXdMaXN0SGlkZVwiOi8v5Zyo5pyA5paw5YiX6KGo5Lit5pi+56S6XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLmNoYW5nZU5ld2xMaXN0U3RhdGUoQnVzaW5lc3MubWVtYmVyX2lkLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNob3dfbWVtYmVyXCI6Ly8gIOS4iuaetlxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5jaGFuZ2VHb29kc1N0YXRlKEJ1c2luZXNzLm1lbWJlcl9pZCwgMCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJoaWRlX21lbWJlclwiOi8vICDkuIvmnrZcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuY2hhbmdlR29vZHNTdGF0ZShCdXNpbmVzcy5tZW1iZXJfaWQsIDAsIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwib3BlbkZvcm1cIjovLyAg5byA5ZCv6LWE5paZ5aGr5YaZXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLnBhY2thZ2VGb3JtKEJ1c2luZXNzLm1lbWJlcl9pZCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjbG9zZUZvcm1cIjovLyAg5YWz6Zet6LWE5paZ5aGr5YaZXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLnBhY2thZ2VGb3JtKEJ1c2luZXNzLm1lbWJlcl9pZCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJvcGVuVmlzaWJsZVwiOi8vICDlvIDlkK/lhoXlrrnlsZXnpLpcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMudmlzaWJsZVN3aXRjaChCdXNpbmVzcy5tZW1iZXJfaWQsIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2xvc2VWaXNpYmxlXCI6Ly8gIOWFs+mXreWGheWuueWxleekulxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy52aXNpYmxlU3dpdGNoKEJ1c2luZXNzLm1lbWJlcl9pZCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Lya5ZGY5pON5L2c77yM5Y+C5pWw6ZSZ6K+v44CCXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAg6ZKI5a+55Y2V5ZOB5YiX6KGo5Lit5q+P5LiA5Liq5p2h55uu55qE5pON5L2cXG4gICAgICAgICQoXCIubWVtYmVyX2xpc3Rfd3JhcHBlclwiKS5vbihcImNsaWNrXCIsIFwiLmhvdmVyX3Rvb2xfYm94IGxpLm9wZXJhdGVcIiwgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgLy8gIOmYu+atouS6i+S7tuWQkeS4i+S8oOmAklxuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgLy8gIOW9k+WJjeadoeebrueahOi1hOa6kGlkXG4gICAgICAgICAgICB2YXIgcmVzSWQgPSAkKHRoaXMpLnBhcmVudHMoXCIubWVtYmVyX2xpc3RfaXRlbVwiKS5kYXRhKFwicmVzb3VyY2VfaWRcIiksXG4gICAgICAgICAgICAgICAgcmVzVHlwZSA9ICQodGhpcykucGFyZW50cyhcIi5tZW1iZXJfbGlzdF9pdGVtXCIpLmRhdGEoXCJyZXNvdXJjZV90eXBlXCIpLFxuICAgICAgICAgICAgICAgIHJlc1RpdGxlID0gJCh0aGlzKS5wYXJlbnRzKFwiLm1lbWJlcl9saXN0X2l0ZW1cIikuZGF0YShcInJlc190aXRsZVwiKSxcbiAgICAgICAgICAgICAgICBpc1RyeSA9ICQodGhpcykucGFyZW50cyhcIi5tZW1iZXJfbGlzdF9pdGVtXCIpLmRhdGEoXCJpc190cnlcIiksXG4gICAgICAgICAgICAgICAgc2hvd1RpbWUgPSAkKHRoaXMpLnBhcmVudHMoXCIubWVtYmVyX2xpc3RfaXRlbVwiKS5kYXRhKFwic2hvd190aW1lXCIpLFxuICAgICAgICAgICAgICAgIHJlc0ltZ1VybCA9ICQodGhpcykucGFyZW50cyhcIi5tZW1iZXJfbGlzdF9pdGVtXCIpLmRhdGEoXCJpbWdfdXJsXCIpLFxuICAgICAgICAgICAgICAgIHBheW1lbnRUeXBlID0gJCh0aGlzKS5wYXJlbnRzKFwiLm1lbWJlcl9saXN0X2l0ZW1cIikuZGF0YShcInBheW1lbnRfdHlwZVwiKTtcblxuICAgICAgICAgICAgdmFyIHR5cGUgPSAkKHRoaXMpLmRhdGEoXCJ0eXBlXCIpO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcInRvX3RvcFwiOi8vICDnva7pobZcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuc2V0UmVzb3VyY2VUb3AoQnVzaW5lc3MubWVtYmVyX2lkLCByZXNUeXBlLCByZXNJZCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjYW5jZWxfdG9wXCI6Ly8gIOWPlua2iOe9rumhtlxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5zZXRSZXNvdXJjZVRvcChCdXNpbmVzcy5tZW1iZXJfaWQsIHJlc1R5cGUsIHJlc0lkLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImFsaXZlR3Vlc3RTZXRcIjovLyAg5ZiJ5a6+6K6+572uXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNUeXBlID09IDQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRpbnZpdGVHdWVzdC5vcGVuR3Vlc3RTZXR0aW5nV2luZG93KHJlc0lkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwibG9va19jb21tZW50c1wiOi8vICDmn6XnnIvor4TorrpcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1R5cGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudERldGFpbChcIi9hbGl2ZWNvbW1lbnQ/YWxpdmVfaWQ9XCIgKyByZXNJZCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RGV0YWlsKFwiL2NvbW1lbnRfYWRtaW4/dHlwZT1cIiArIChyZXNUeXBlIC0gMSkgKyBcIiZyZWNvcmRfaWQ9XCIgKyByZXNJZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVkaXRcIjovLyAg57yW6L6RXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvZWRpdF9yZXNvdXJjZV9wYWdlP3R5cGU9XCIgKyByZXNUeXBlICsgXCImaWQ9XCIgKyByZXNJZCArXG4gICAgICAgICAgICAgICAgICAgICAgICBcIiZ1cGxvYWRfY2hhbm5lbF90eXBlPTNcIiArIFwiJnBhY2thZ2VfaWQ9XCIgKyBCdXNpbmVzcy5tZW1iZXJfaWQgKyBcIiZwcmljZT1cIiArIEJ1c2luZXNzLm1lbWJlcl9wcmljZTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNldF90cnlcIjovLyAg6K6+5Li66K+V5ZCsIOaIliDor5XnnItcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuc2V0UmVzb3VyY2VUcnkoQnVzaW5lc3MubWVtYmVyX2lkLCByZXNUeXBlLCByZXNJZCwgcGF5bWVudFR5cGUsIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2FuY2VsX3RyeVwiOi8vICDlj5bmtojor5XlkKwg5oiWIOivleeci1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5zZXRSZXNvdXJjZVRyeShCdXNpbmVzcy5tZW1iZXJfaWQsIHJlc1R5cGUsIHJlc0lkLCBwYXltZW50VHlwZSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJleHBvcnRfYXVkaW9cIjovLyAg5a+85Ye66Z+z6aKRXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLmV4cG9ydEF1ZGlvKHJlc0lkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcInNldF9zaW5nbGVfc2FsZVwiOi8vICDorr7nva7ljZXljZZcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuc2V0U2luZ2xlU2FsZShyZXNUeXBlLCByZXNJZCwgcmVzVGl0bGUsIGlzVHJ5LCBzaG93VGltZSwgcmVzSW1nVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImNhbmNlbF9zaW5nbGVfc2FsZVwiOi8vICDlj5bmtojljZXljZZcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuY2FuY2VsU2luZ2xlU2FsZShyZXNUeXBlLCByZXNJZCwgcGF5bWVudFR5cGUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic2hvd19yZXNvdXJjZVwiOi8vICDkuIrmnrZcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuY2hhbmdlR29vZHNTdGF0ZShyZXNJZCwgcmVzVHlwZSwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJoaWRlX3Jlc291cmNlXCI6Ly8gIOS4i+aetlxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5jaGFuZ2VHb29kc1N0YXRlKHJlc0lkLCByZXNUeXBlLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZVwiOi8vICDnp7vpmaTor6XllYblk4FcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMucXVlcnlTaW5nbGVSZXNvdXJjZShyZXNJZCwgcmVzVHlwZSwgQnVzaW5lc3MubWVtYmVyX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZW5hYmxlX2NvcHknOi8v5YWB6K645aSN5Yi2XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLmNoYW5nZUNhblNlbGVjdFN0YXRlKHJlc0lkLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnZm9yYmlkX2NvcHknOi8v56aB5q2i5aSN5Yi2XG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLnpoHmraLlpI3liLblkI7vvIzor6Xnr4flm77mlofnmoTlm77niYfngrnlh7vmlL7lpKflkozplb/mjInor4bliKvkuoznu7TnoIHlip/og73lsIbooqvnpoHnlKhcIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5jaGFuZ2VDYW5TZWxlY3RTdGF0ZShyZXNJZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5Y+C5pWw6ZSZ6K+vJyk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vICDpkojlr7nkuJPmoI/liJfooajkuK3mr4/kuIDkuKrmnaHnm67nmoTmk43kvZxcbiAgICAgICAgJChcIi5tZW1iZXJfbGlzdF93cmFwcGVyXCIpLm9uKFwiY2xpY2tcIiwgXCIjcGFja2FnZV9pdGVtX29wZXJhdGUgbGkub3BlcmF0ZVwiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHZhciBwYWNrYWdlSWQgPSAkKHRoaXMpLnBhcmVudHMoXCIucGFja2FnZV9saXN0X2l0ZW1cIikuZGF0YShcInBhY2thZ2VfaWRcIiksXG4gICAgICAgICAgICAgICAgdHlwZSA9ICQodGhpcykuZGF0YShcInR5cGVcIik7XG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgICAgICAgICAvLyBjYXNlIFwidG9fdG9wXCI6ICAvL+e9rumhtlxuICAgICAgICAgICAgICAgIC8vICAgICBtZW1iZXJEZXRhaWxVdGlscy5zZXRSZXNvdXJjZVRvcChCdXNpbmVzcy5tZW1iZXJfaWQsIDYsIHBhY2thZ2VJZCwgMSk7XG4gICAgICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgXCJjYW5jZWxfdG9wXCI6ICAvL+e9rumhtlxuICAgICAgICAgICAgICAgIC8vICAgICBtZW1iZXJEZXRhaWxVdGlscy5zZXRSZXNvdXJjZVRvcChCdXNpbmVzcy5tZW1iZXJfaWQsIDYsIHBhY2thZ2VJZCwgMCk7XG4gICAgICAgICAgICAgICAgLy8gICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3NvbGRvdXQnOlxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5wYWNrYWdlaXNTaG93KHBhY2thZ2VJZCwgZmFsc2UpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdwdXRhd2F5JzpcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMucGFja2FnZWlzU2hvdyhwYWNrYWdlSWQsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWRpdF9wYWNrYWdlXCI6ICAgIC8v57yW6L6RXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCJlZGl0X3BhY2thZ2VfcGFnZT9pZD1cIiArIHBhY2thZ2VJZCArIFwiJm1lbWJlcl9pZD1cIiArIG1vZGFsLmlkO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwicmVtb3ZlX3BhY2thZ2VcIjogIC8v56e76Zmk6K+l5p2D55uKXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLnF1ZXJ5UGFja2FnZVJlc291cmNlKHBhY2thZ2VJZCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Y+C5pWw6ZSZ6K+vXCIpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gIOaTjeS9nCAtIOWkjeWItuWIsOWJqui0tOadv1xuICAgICAgICAoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgY2xpcGJvYXJkID0gbmV3IENsaXBib2FyZCgnLmNvcHlIcmVmJyk7XG4gICAgICAgICAgICBjbGlwYm9hcmQub24oJ3N1Y2Nlc3MnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgaWYoZS50cmlnZ2VyLmlkPT0nY29weV9hcHBfaHJlZicpe1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5aSN5Yi25oiQ5Yqf77yBXCIpO1xuXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLlpI3liLbmiJDlip/vvIHor7flnKjlvq7kv6HlhoXmiZPlvIDlk6Yg44CCXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlLmNsZWFyU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSkoKTtcblxuICAgICAgICAvLyDkuJPmoI8gKyDljZXlk4EgdGFiIOWIh+aNolxuICAgICAgICAkKFwiLmNvbnRlbnRfdGFiX3dyYXBwZXIgbGlcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKCFCdXNpbmVzcy5pc0xvYWRpbmcpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmlucHV0U2VhcmNoQWxsXCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICAgICBCdXNpbmVzcy5wYWdlSW5kZXggPSAxOyAgICAgLy/liIfmjaLlkI7vvIzliIbpobXpobXnoIHnva7kuLoxXG4gICAgICAgICAgICAgICAgQnVzaW5lc3MuaXNMb2FkaW5nID0gdHJ1ZTsgIC8v6K6w5b2V5Yqg6L2954q25oCB77yM6Ziy6YeN5aSN54K55Ye7XG4gICAgICAgICAgICAgICAgdmFyIHRleHQgPSAkKHRoaXMpLnRleHQoKTtcbiAgICAgICAgICAgICAgICBpZiAoISQodGhpcykuaGFzQ2xhc3MoXCJhY3RpdmVDb250ZW50VGFiXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0ID09IFwi5LiT5qCPXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcGFja2FnZVRhYlwiKS5hZGRDbGFzcyhcImFjdGl2ZUNvbnRlbnRUYWJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NpbmdsZVRhYlwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZUNvbnRlbnRUYWJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnNlbGVjdG9yX3Jlc291cmNlX3R5cGVcIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRleHQgPT0gXCLljZXlk4FcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzaW5nbGVUYWJcIikuYWRkQ2xhc3MoXCJhY3RpdmVDb250ZW50VGFiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNwYWNrYWdlVGFiXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlQ29udGVudFRhYlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuc2VsZWN0b3JfcmVzb3VyY2VfdHlwZVwiKS5yZW1vdmVDbGFzcyhcImhpZGVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHRleHQgPT0gXCLkuJPmoI9cIikge1xuICAgICAgICAgICAgICAgICAgICBCdXNpbmVzcy5zZWFyY2hDb250ZW50Rm9yUGFja2FnZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIEJ1c2luZXNzLnRhYlN0YXRlID0gXCJwYWNrYWdlTGlzdFwiO1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5zd2l0Y2hXaW5kb3dUYWIoXCJwYWNrYWdlVGFiXCIpO1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5pbml0UGFja2FnZUxpc3RPZk1lbWJlcigpO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0ZXh0ID09IFwi5Y2V5ZOBXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgQnVzaW5lc3Muc2VhcmNoQ29udGVudEZvclNpbmdsZSA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIEJ1c2luZXNzLnJlc291cmNlX3R5cGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICAkKCcjZmlyc3RPcHRpb24nKS5yZW1vdmVBdHRyKFwic2VsZWN0ZWRcIikuYXR0cihcInNlbGVjdGVkXCIsXCJzZWxlY3RlZFwiKTtcbiAgICAgICAgICAgICAgICAgICAgQnVzaW5lc3MudGFiU3RhdGUgPSBcInNpbmdsZUxpc3RcIjtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuc3dpdGNoV2luZG93VGFiKFwic2luZ2xlVGFiXCIpO1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5pbml0UmVzb3VyY2VMaXN0T2ZNZW1iZXIoKTtcblxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vICDliJ3lp4vljJbpgInmi6nlt7LmnInljZXlk4FcbiAgICAgICAgbW9kYWwuc2VsZWN0UmVzb3VyY2UoKTtcblxuICAgICAgICAvLyAg5Yid5aeL5YyW5pCc57Si562b6YCJXG4gICAgICAgIG1vZGFsLmluaXRSZXNvdXJjZUFuZFBhY2thZ2VTZWFyY2goKTtcblxuICAgICAgICAvLyAg5Yid5aeL5YyW5YiX6KGo55qE5YiG6aG1XG4gICAgICAgIG1lbWJlckRldGFpbFV0aWxzLmluaXRMaXN0UGFnaW5hdGlvbigpO1xuXG4gICAgICAgIC8v5YiG6aG16K+35rGCXG4gICAgICAgICQoXCIubWVtYmVyX2xpc3Rfd3JhcHBlclwiKS5vbignY2xpY2snLCAnIC5wYWdpbmF0aW9uIGxpIGEnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gJChlLnRhcmdldCksXG4gICAgICAgICAgICAgICAgdXJsID0gZWxlLmRhdGEoJ3VybCcpO1xuICAgICAgICAgICAgQnVzaW5lc3MucGFnZUluZGV4ID0gZWxlLnRleHQoKTtcbiAgICAgICAgICAgIGlmIChCdXNpbmVzcy50YWJTdGF0ZSA9PSBcInBhY2thZ2VMaXN0XCIpIHtcbiAgICAgICAgICAgICAgICBtb2RhbC5pbml0UGFja2FnZUxpc3RPZk1lbWJlcigpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChCdXNpbmVzcy50YWJTdGF0ZSA9PSBcInNpbmdsZUxpc3RcIikge1xuICAgICAgICAgICAgICAgIG1vZGFsLmluaXRSZXNvdXJjZUxpc3RPZk1lbWJlcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvL+WQtOaZk+azouS4k+eUqOiHquWumuS5ieWGheWuueWIl+ihqOi3s+i9rOaMiemSrlxuICAgICAgICAkKFwiLnVzZXJEZWZpbmVkXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgcGlkID0gJCgnLmFkbWluX2RhdGEnKS5kYXRhKFwibWVtYmVyX2lkXCIpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCIvdXNlcl9kZWZpbmVkP2lkPVwiICsgcGlkO1xuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICByZXR1cm4gQnVzaW5lc3M7XG5cbn0pKCk7XG5cbnZhciBtb2RhbCA9IChmdW5jdGlvbigpIHtcblxuICAgIHZhciBtb2RhbCA9IHt9O1xuXG4gICAgLyoqXG4gICAgICog5qih5Z2X5LiA77ya5Yid5aeL5YyW5Y2V5ZOB5YiX6KGoXG4gICAgICovXG4gICAgbW9kYWwuaW5pdFJlc291cmNlTGlzdE9mTWVtYmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIubG9hZGluZ1NcIikuZmFkZUluKDMwMCk7XG5cbiAgICAgICAgJC5hamF4KFwiL3NpbmdlX2xpc3RfbWVtYmVyXCIsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJodG1sXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgXCJpZFwiOiBCdXNpbmVzcy5tZW1iZXJfaWQsXG4gICAgICAgICAgICAgICAgXCJzZWFyY2hfY29udGVudFwiOiBCdXNpbmVzcy5zZWFyY2hDb250ZW50Rm9yU2luZ2xlLFxuICAgICAgICAgICAgICAgIFwicmVzb3VyY2VfdHlwZVwiOiBCdXNpbmVzcy5yZXNvdXJjZV90eXBlLFxuICAgICAgICAgICAgICAgIFwicGFnZVwiOiBCdXNpbmVzcy5wYWdlSW5kZXhcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBCdXNpbmVzcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMTAwKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIubWVtYmVyX2xpc3Rfd3JhcHBlclwiKS5odG1sKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLmluaXRMaXN0UGFnaW5hdGlvbigpOy8v5Yid5aeL5YyW5YiG6aG15oyJ6ZKuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLor7fmsYLmlbDmja7kuLrnqbpcIik7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmXrumimO+8jOivt+eojeWQjuWGjeivlVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBCdXNpbmVzcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMTAwKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuiOt+WPluWNleWTgeWIl+ihqOWksei0pVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5qih5Z2X5LqM77ya5Yid5aeL5YyW5LiT5qCP5YiX6KGoXG4gICAgICovXG4gICAgbW9kYWwuaW5pdFBhY2thZ2VMaXN0T2ZNZW1iZXIgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJChcIi5sb2FkaW5nU1wiKS5mYWRlSW4oMzAwKTtcbiAgICAgICAgJC5hamF4KFwiL3BhY2thZ2VfbGlzdF9tZW1iZXJcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBpZDogQnVzaW5lc3MubWVtYmVyX2lkLFxuICAgICAgICAgICAgICAgIHNlYXJjaF9jb250ZW50OiBCdXNpbmVzcy5zZWFyY2hDb250ZW50Rm9yUGFja2FnZSxcbiAgICAgICAgICAgICAgICBwYWdlOiBCdXNpbmVzcy5wYWdlSW5kZXhcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBCdXNpbmVzcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMTAwKTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ICYmIHJlc3VsdC5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICQoXCIubWVtYmVyX2xpc3Rfd3JhcHBlclwiKS5odG1sKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLmluaXRMaXN0UGFnaW5hdGlvbigpOy8v5Yid5aeL5YyW5YiG6aG15oyJ6ZKuXG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuivt+axguaVsOaNruS4uuepulwiKTtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi572R57uc6Zeu6aKY77yM6K+356iN5ZCO5YaN6K+VXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgIEJ1c2luZXNzLmlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICQoXCIubG9hZGluZ1NcIikuZmFkZU91dCgxMDApO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6I635Y+W5Y2V5ZOB5YiX6KGo5aSx6LSlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogIOaooeWdl+S4iSDvvJog6YCJ5oup5bey5pyJ5Y2V5ZOBXG4gICAgICovXG4gICAgbW9kYWwuaGFzRG93biA9IGZhbHNlO1xuICAgIG1vZGFsLmhhc0Nsb3NlID0gdHJ1ZTtcbiAgICBtb2RhbC5wYWdlID0gMTsgLy/mt7vliqDlt7LmnInljZXlk4HnmoTpobXnoIFcbiAgICBtb2RhbC5zZWFyY2hDb250ZW50ID0gJyc7XG5cbiAgICBtb2RhbC5pc0xvYWRpbmcgPSBmYWxzZTsgICAgLy/mmK/lkKblpITkuo7liqDovb3nirbmgIFcbiAgICBtb2RhbC5yZXNUeXBlID0gMDsgIC8vICA2LeiOt+WPluS4k+agj+S/oeaBr++8jCAwLeiOt+WPluWNleWTgeS/oeaBr1xuICAgIG1vZGFsLnRhYlN0YXRlID0gXCJzaW5nbGVMaXN0XCI7ICAvLyDpu5jorqTmmL7npLrljZXlk4HliJfooaggICAgIO+8iFwicGFja2FnZUxpc3RcIiwgXCJzaW5nbGVMaXN0XCLvvIlcblxuXG4gICAgbW9kYWwuc2VsZWN0UmVzb3VyY2UgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICAkKCcjYWRkU2luZ2xlJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8v5by55Ye66YCJ5oup5qGGXG4gICAgICAgICAgICBzZWxmLnBhZ2UgPSAxO1xuICAgICAgICAgICAgc2VsZi5oYXNEb3duID0gZmFsc2U7XG4gICAgICAgICAgICBzZWxmLmhhc0Nsb3NlID0gZmFsc2U7XG4gICAgICAgICAgICBzZWxmLmdldFNlbGVjdERhdGEoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnI3NlbGVjdFdpbmRvdyAjc2VsY3RDbG9zZSwgI3NlbGVjdFdpbmRvdyAjc2VsZWN0Q2FuY2VsQnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8v5YWz6Zet6YCJ5oup5by556qXXG4gICAgICAgICAgICB2YXIgJHNlbGVjdFdpbiA9ICQoJyNzZWxlY3RXaW5kb3cnKTtcbiAgICAgICAgICAgICRzZWxlY3RXaW4uZmFkZU91dCgnbm9ybWFsJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJCh0aGlzKS5maW5kKCcjc2VsZWN0QXJlYUxpc3QnKS5odG1sKCcnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJHNlbGVjdFdpbi5maW5kKCcuaW5wdXRTZWFyY2hQYXJ0JykudmFsKCcnKTsgLy/muIXnqbrmkJzntKLmoYZcbiAgICAgICAgICAgIHNlbGYucGFnZSA9IDE7XG4gICAgICAgICAgICBzZWxmLmhhc0Nsb3NlID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlbGYuc2VhcmNoQ29udGVudCA9ICcnO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKCcjc2VsZWN0V2luZG93ICNzZWxlY3RTZWFyY2hCdG4nKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHsgLy/pgInmi6nmoYbnmoTljZXlk4HmkJzntKJcbiAgICAgICAgICAgIHZhciBzZWFyY2hWYWwgPSAkLnRyaW0oJCh0aGlzKS5wcmV2KCkudmFsKCkpO1xuICAgICAgICAgICAgc2VsZi5zZWFyY2hDb250ZW50ID0gc2VhcmNoVmFsO1xuICAgICAgICAgICAgc2VsZi5wYWdlID0gMTtcbiAgICAgICAgICAgIHNlbGYuaGFzQ2xvc2UgPSB0cnVlO1xuICAgICAgICAgICAgc2VsZi5nZXRTZWxlY3REYXRhKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC5wcmV2KCkub24oJ2tleXByZXNzJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSBcIjEzXCIpIHtcbiAgICAgICAgICAgICAgICAkKCcjc2VsZWN0V2luZG93ICNzZWxlY3RTZWFyY2hCdG4nKS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvL3RhYuWIh+aNolxuICAgICAgICAkKFwiLnNlbGVjdEdvb2RUYWJXcmFwcGVyIGxpXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9ICQodGhpcykudmFsKCk7XG5cbiAgICAgICAgICAgIGlmICghbW9kYWwuaXNMb2FkaW5nKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5wYWdlID0gMTtcbiAgICAgICAgICAgICAgICAkKCcjc2VsZWN0V2luZG93ICNzZWxlY3RBcmVhTGlzdFdyYXBwZXInKS5zY3JvbGxUb3AoMCk7XG4gICAgICAgICAgICAgICAgbW9kYWwuaXNMb2FkaW5nID0gdHJ1ZTsgIC8v6K6w5b2V5Yqg6L2954q25oCB77yM6Ziy6YeN5aSN54K55Ye7XG5cbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgPT0gMSkge1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5zd2l0Y2hXaW5kb3dUYWIoXCJzaW5nbGVUYWJcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuc3dpdGNoV2luZG93VGFiKFwicGFja2FnZVRhYlwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgc2VsZi5nZXRTZWxlY3REYXRhKCk7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICAkKCcjc2VsZWN0V2luZG93ICNzZWxlY3RBcmVhTGlzdFdyYXBwZXInKS5zY3JvbGwoZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyIERpdkhlaWdodCA9ICQoJyNzZWxlY3RBcmVhTGlzdCcpLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgIFNjcm9sbEhlaWdodCA9ICQodGhpcykuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgU2Nyb2xsVG9wID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcblxuICAgICAgICAgICAgaWYgKChTY3JvbGxUb3AgKyBTY3JvbGxIZWlnaHQgPj0gRGl2SGVpZ2h0IC0gNSkgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5oYXNEb3duIC8v5Yik5pat5piv5ZCm5Yiw6L6+5bqV6YOoXG4gICAgICAgICAgICAgICAgJiZcbiAgICAgICAgICAgICAgICAhc2VsZi5oYXNDbG9zZSAvL+WIpOaWreW8ueahhuaYr+WQpuWFs+mXrVxuICAgICAgICAgICAgKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5oYXNDbG9zZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgc2VsZi5nZXRTZWxlY3REYXRhKCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIC8vICQoXCIjc2VsZWN0QXJlYUxpc3QgLmlzRG93blwiKS5hZGRDbGFzcyhcImhpZGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v5o+Q5Lqk6KaB5re75Yqg55qE5Y2V5ZOBXG4gICAgICAgICQoJyNzZWxlY3RXaW5kb3cgI3NlbGVjdE9rQnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgdmFyICRzZWxlY3RBcmVhID0gJCgnI3NlbGVjdFdpbmRvdyAjc2VsZWN0QXJlYUxpc3RXcmFwcGVyJyksXG4gICAgICAgICAgICAgICAgcmVzTGlzdCA9IFtdO1xuXG4gICAgICAgICAgICAkc2VsZWN0QXJlYS5maW5kKCc6Y2hlY2tib3g6Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oaSwgaXRlbSkge1xuICAgICAgICAgICAgICAgIGlmIChtb2RhbC50YWJTdGF0ZSA9PSBcInBhY2thZ2VMaXN0XCIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJlc09iaiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlX2lkOiBpdGVtLmdldEF0dHJpYnV0ZSgnaWQnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGU6IDZcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZGFsLnRhYlN0YXRlID09IFwic2luZ2xlTGlzdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV9pZDogaXRlbS5nZXRBdHRyaWJ1dGUoJ2lkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiBpdGVtLmdldEF0dHJpYnV0ZSgndmFsdWUnKVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICByZXNMaXN0W3Jlc0xpc3QubGVuZ3RoXSA9IHJlc09iajtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgLyrlj4LmlbA6XG4gICAgICAgICAgICAgMS1jaGFubmVsX3R5cGUoMS3ljZXlk4EsMi3kuJPmoI8sMy3kvJrlkZgpO1xuICAgICAgICAgICAgIDItcmVzb3VyY2VfbGlzdCjpgInkuK3nmoTotYTmupDpm4blkIgo5pWw57uEKSxcbiAgICAgICAgICAgICDplK7lgLzlr7nnmoTmoLzlvI/lpoI6cmVzb3VyY2VfaWQ6YV9ramphazM0NSxyZXNvdXJjZV90eXBlOjEpO1xuICAgICAgICAgICAgIDMtcGFja2FnZV9pZCjlvZNjaGFubmVsX3R5cGU9MuOAgTPml7Ys5pyJ5YC8KTtcbiAgICAgICAgICAgICA0LXBpZWNlX3ByaWNlKOS9hmNoYW5uZWxfdHlwZT0x5pe25pyJ5YC8KSovXG4gICAgICAgICAgICAkLmFqYXgoJy9zdWJtaXRfY2hvaWNlX3Jlc291cmNlJywge1xuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgY2hhbm5lbF90eXBlOiAzLFxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV9saXN0OiByZXNMaXN0LFxuICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX2lkOiBzZWxmLmlkLFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAwKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzZWxlY3RXaW5kb3cgI3NlbGN0Q2xvc2UnKS5jbGljaygpOyAvL+mAieaLqeaIkOWKn++8jOS4u+WKqOWFs+mXremAieaLqeW8ueeql1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobW9kYWwudGFiU3RhdGUgPT0gXCJwYWNrYWdlTGlzdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNwYWNrYWdlVGFiXCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG1vZGFsLnRhYlN0YXRlID09IFwic2luZ2xlTGlzdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNzaW5nbGVUYWJcIikuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5UnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgbW9kYWwuZ2V0U2VsZWN0RGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG4gICAgICAgIGlmIChzZWxmLnBhZ2UgPT0gMSkge1xuICAgICAgICAgICAgJChcIi5sb2FkaW5nU19pbl93aW5kb3dcIikuZmFkZUluKDMwMCk7XG4gICAgICAgIH1cbiAgICAgICAgJC5hamF4KCcvY2hvaWNlX3Jlc291cmNlX2xpc3QnLCB7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgLyrlj4LmlbA6XG4gICAgICAgICAgICAgMS1jaGFubmVsX3R5cGUoMS3ljZXlk4EsMi3kuJPmoI8sMy3kvJrlkZgpXG4gICAgICAgICAgICAgMi3mkJzntKLlhoXlrrktc2VhcmNoX2NvbnRlbnQ7XG4gICAgICAgICAgICAgMy1yZXNvdXJjZV90eXBlKDAt5YWo6YOoLDEt5Zu+5paHLDIt6Z+z6aKRLDMt6KeG6aKRLDQt55u05pKtKTtcbiAgICAgICAgICAgICA0LXBhZ2Uo5YiG6aG16aG156CBKTtcbiAgICAgICAgICAgICA1LXBhY2thZ2VfaWQo5b2TY2hhbm5lbF90eXBlPTLjgIEz5pe2LOacieWAvClcbiAgICAgICAgICAgICAqL1xuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIHNlYXJjaF9jb250ZW50OiBzZWxmLnNlYXJjaENvbnRlbnQgfHwgJycsXG4gICAgICAgICAgICAgICAgY2hhbm5lbF90eXBlOiAzLFxuICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGU6IHNlbGYucmVzVHlwZSxcbiAgICAgICAgICAgICAgICBwYWNrYWdlX2lkOiBzZWxmLmlkLFxuICAgICAgICAgICAgICAgIHBhZ2U6IHNlbGYucGFnZVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICQoXCIubG9hZGluZ1NfaW5fd2luZG93XCIpLmZhZGVPdXQoMzAwKTtcbiAgICAgICAgICAgICAgICBtb2RhbC5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciAkc2VsZWN0QXJlYSA9ICQoJyNzZWxlY3RBcmVhTGlzdCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0U3RyID0gJycsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWdlT2JqID0gSlNPTi5wYXJzZShyZXN1bHQuZGF0YS5wYWdlX29mZnNldCk7XG4gICAgICAgICAgICAgICAgICAgICQuZWFjaChyZXN1bHQuZGF0YS5yZXNvdXJjZV9saXN0LCBmdW5jdGlvbihpLCBpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVzb3VyY2VfdHlwZSA9ICcnO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucmVzVHlwZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICgrdGhpcy5yZXNvdXJjZV90eXBlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGUgPSAn5Zu+5paHJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlID0gJ+mfs+mikSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfdHlwZSA9ICfop4bpopEnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGUgPSAn55u05pKtJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfdHlwZSA9ICfml6AnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2VsZi5yZXNUeXBlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZWxlY3RTdHIgKz0gJzxkaXYgY2xhc3M9XCJyZXNvdXJjZUl0ZW1XcmFwcGVyXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdmFsdWU9XCInICsgdGhpcy5yZXNvdXJjZV90eXBlICsgJ1wiIGlkPVwiJyArIHRoaXMuaWQgKyAnXCIgY2xhc3M9XCJ3aXRoLWdhcCBzaW5nbGVSZXNvdXJjZVJhZGlvXCIgbmFtZT1cInNlbGVjdF9yZXNvdXJjZVwiIHR5cGU9XCJjaGVja2JveFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj1cIicgKyB0aGlzLmlkICsgJ1wiIGNsYXNzPVwicmFkaW9fZGVzY1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJlc291cmNlX2ljb25fd3JhcHBlclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBjbGFzcz1cInJlc291cmNlX2ljb25cIiBzcmM9XCInICsgdGhpcy5pbWdfdXJsICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudGl0bGUgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9sYWJlbD4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwicmVzb3VyY2VfdHlwZVwiPicgKyByZXNvdXJjZV90eXBlICsgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwicmVzb3VyY2VfdGltZVwiPicgKyB0aGlzLnN0YXJ0X2F0ICsgJzwvc3Bhbj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdFN0ciArPSAnPGRpdiBjbGFzcz1cInJlc291cmNlSXRlbVdyYXBwZXJcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCcgKyAnIGlkPVwiJyArIHRoaXMuaWQgKyAnXCIgY2xhc3M9XCJ3aXRoLWdhcCBzaW5nbGVSZXNvdXJjZVJhZGlvXCIgbmFtZT1cInNlbGVjdF9yZXNvdXJjZVwiIHR5cGU9XCJjaGVja2JveFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj1cIicgKyB0aGlzLmlkICsgJ1wiIGNsYXNzPVwicmFkaW9fZGVzY1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJlc291cmNlX2ljb25fd3JhcHBlclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBjbGFzcz1cInJlc291cmNlX2ljb25cIiBzcmM9XCInICsgdGhpcy5pbWdfdXJsICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2xhYmVsPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJyZXNvdXJjZV90aW1lXCI+JyArIHRoaXMudXBkYXRlZF9hdCArICc8L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucGFnZSA9PSAxIHx8ICFzZWxmLnBhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3RBcmVhLmh0bWwoc2VsZWN0U3RyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3RBcmVhLmFwcGVuZCgnPGRpdiBjbGFzcz1cImlzRG93blwiPui1hOa6kOWKoOi9veS4rTwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNDbG9zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/pppbmrKHliqDovb3vvIzmmL7npLpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5zZWFyY2hDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlbGVjdFdpbmRvdycpLmZhZGVJbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYucGFnZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3RBcmVhLmZpbmQoJy5pc0Rvd24nKS5iZWZvcmUoc2VsZWN0U3RyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzQ2xvc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8v5pWw5o2u5Yqg6L295a6M5q+V5ZCO55qE5pON5L2cXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlT2JqLmN1cnJlbnRfcGFnZSA+PSBwYWdlT2JqLnRvdGFsX3BhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0QXJlYS5maW5kKCcuaXNEb3duJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UrKztcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaLieWPluW3suacieWNleWTgeWksei0pe+8gVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTX2luX3dpbmRvd1wiKS5mYWRlT3V0KDMwMCk7XG4gICAgICAgICAgICAgICAgbW9kYWwuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5pON5L2c5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaooeWdl+Wbm++8miDljZXlk4Ev5LiT5qCP5YiX6KGo55qE5pCc57SiXG4gICAgICovXG4gICAgbW9kYWwuaW5pdFJlc291cmNlQW5kUGFja2FnZVNlYXJjaCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8vICAx44CB5byA5aeL5pCc57Si44CB5Y2V5ZOBL+S4k+agj1xuICAgICAgICAkKFwiLnNlYXJjaEFsbEJ0blwiKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgaWYgKEJ1c2luZXNzLnRhYlN0YXRlID09IFwicGFja2FnZUxpc3RcIikge1xuICAgICAgICAgICAgICAgIEJ1c2luZXNzLnNlYXJjaENvbnRlbnRGb3JQYWNrYWdlID0gJC50cmltKCQoXCIuaW5wdXRTZWFyY2hBbGxcIikudmFsKCkpO1xuICAgICAgICAgICAgICAgIG1vZGFsLmluaXRQYWNrYWdlTGlzdE9mTWVtYmVyKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEJ1c2luZXNzLnRhYlN0YXRlID09IFwic2luZ2xlTGlzdFwiKSB7XG4gICAgICAgICAgICAgICAgQnVzaW5lc3MucmVzb3VyY2VfdHlwZSA9ICQoXCIuc2VsZWN0b3JfcmVzb3VyY2VfdHlwZVwiKS52YWwoKTtcbiAgICAgICAgICAgICAgICBCdXNpbmVzcy5zZWFyY2hDb250ZW50Rm9yU2luZ2xlID0gJC50cmltKCQoXCIuaW5wdXRTZWFyY2hBbGxcIikudmFsKCkpO1xuICAgICAgICAgICAgICAgIG1vZGFsLmluaXRSZXNvdXJjZUxpc3RPZk1lbWJlcigpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMeOAgei+k+WFpeWujOaIkOWQju+8jOWbnui9puW8gOWni+aQnOe0oiAtIOWFqOmDqOWNleWTgS/kuJPmoI9cbiAgICAgICAgJChcIi5pbnB1dFNlYXJjaEFsbFwiKS5vbigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgICAgICQoJy5zZWFyY2hBbGxCdG4nKS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAg55uR5ZCs562b6YCJ5qGG6YCJ5oup5LqL5Lu2XG4gICAgICAgICQoXCIuc2VsZWN0b3JfcmVzb3VyY2VfdHlwZVwiKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLnNlYXJjaEFsbEJ0bicpLmNsaWNrKCk7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOaooeWdl+S6lO+8miDliJ3lp4vljJbkvJrlkZjlpJbljZXljZborr7nva7nqpflj6NcbiAgICAgKi9cbiAgICBtb2RhbC5pbml0U2V0U2luZ2xlU2FsZVdpbmRvdyA9IGZ1bmN0aW9uKHJlc0ltZ1VybCwgcmVzVGl0bGUsIHJlc1R5cGUsIHNob3dUaW1lLCByZXNJZCkge1xuXG4gICAgICAgIC8vICDnu5norr7nva7ku7fmoLzloavlhYXmlbDmja5cbiAgICAgICAgJChcIi5yZXNvdXJjZV9pY29uXzNcIikuYXR0cihcInNyY1wiLCByZXNJbWdVcmwpO1xuICAgICAgICAkKFwiLnJlc291cmNlX3RpdGxlXzNcIikuaHRtbChyZXNUaXRsZSk7XG4gICAgICAgIHN3aXRjaCAocmVzVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICQoXCIucmVzb3VyY2VfdHlwZV8zXCIpLmh0bWwoXCLlm77mlodcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgJChcIi5yZXNvdXJjZV90eXBlXzNcIikuaHRtbChcIumfs+mikVwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAkKFwiLnJlc291cmNlX3R5cGVfM1wiKS5odG1sKFwi6KeG6aKRXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICQoXCIucmVzb3VyY2VfdHlwZV8zXCIpLmh0bWwoXCLnm7Tmkq1cIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgICQoXCIucmVzb3VyY2VfdGltZV8zXCIpLmh0bWwoc2hvd1RpbWUpO1xuXG4gICAgICAgICQoXCIuY2xvc2VfaWNvbl93cmFwcGVyXzIsIC5jYW5jZWxfc2V0X3ByaWNlXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJChcIi5zZXRfcHJpY2Vfd2luZG93XCIpLmZhZGVPdXQoMzAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIi5jb25maXJtX3ByaWNlX2J0blwiKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyIHByaWNlID0gJC50cmltKCQoXCIuaW5wdXRfc2V0dGluZ19wcmljZVwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIHZhciByZWcgPSAvXihbMS05XVtcXGRdKnwwKShbLy5dW1xcZF17MSwyfSk/JC87XG4gICAgICAgICAgICBpZiAoIXJlZy50ZXN0KHByaWNlKSkge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5Lu35qC86L6T5YWl5pyJ6K+vJyk7XG4gICAgICAgICAgICAgICAgJCgnLmlucHV0X3NldHRpbmdfcHJpY2UnKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByaWNlIDw9IDApIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLku7fmoLzkuI3og73kuLowIOaIliDotJ/mlbAhXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByaWNlID4gYmFzZVV0aWxzLm1heElucHV0UHJpY2UpIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLku7fmoLzkuI3og73lpKfkuo4gXCIgKyBiYXNlVXRpbHMubWF4SW5wdXRQcmljZSArIFwiIOWFg1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBhcnIgPSB7fTtcbiAgICAgICAgICAgIGFycltcInJlc291cmNlX2lkXCJdID0gcmVzSWQ7XG4gICAgICAgICAgICBhcnJbXCJyZXNvdXJjZV90eXBlXCJdID0gcmVzVHlwZTtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZUxpc3RBcnIgPSBbYXJyXTtcblxuICAgICAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgICAgICQuYWpheChcIi9zdWJtaXRfY2hvaWNlX3Jlc291cmNlXCIsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiY2hhbm5lbF90eXBlXCI6IDEsXG4gICAgICAgICAgICAgICAgICAgIFwicmVzb3VyY2VfbGlzdFwiOiByZXNvdXJjZUxpc3RBcnIsXG4gICAgICAgICAgICAgICAgICAgIFwicGllY2VfcHJpY2VcIjogcHJpY2UgKiAxMDAsIC8vIOWNleS9je+8miDliIZcbiAgICAgICAgICAgICAgICAgICAgXCJzdWJtaXRfdHlwZVwiOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuc2V0X3ByaWNlX3dpbmRvd1wiKS5mYWRlT3V0KDMwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi6K6+5Li65Y2V5Y2W5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwuaW5pdFJlc291cmNlTGlzdE9mTWVtYmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5UhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlvIDlsI/lt67llabvvIzor7fnqI3lkI7lho3mk43kvZzvvIFcIik7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG5cbiAgICByZXR1cm4gbW9kYWw7XG5cbn0pKCk7XG5cblxudmFyIG1lbWJlckRldGFpbFV0aWxzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHV0aWxzID0ge307XG5cbiAgICAvKipcbiAgICAgKiDkvJrlkZgg5oiW6ICFIOWNleWTgSDlrp7njrDkuIrmnrYgKyDkuIvmnrZcbiAgICAgKiBAcGFyYW0gbWVtYmVySWRcbiAgICAgKiBAcGFyYW0gb3BlcmF0ZV90eXBlXG4gICAgICovXG4gICAgdXRpbHMuY2hhbmdlR29vZHNTdGF0ZSA9IGZ1bmN0aW9uKGdvb2RzSWQsIGdvb2RzVHlwZSwgb3BlcmF0ZV90eXBlKSB7XG5cbiAgICAgICAgaWYgKGdvb2RzVHlwZSA9PSAwKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IG9wZXJhdGVfdHlwZSA9PSAwID8gXCLkuIrmnrblkI7or6XkvJrlkZjlsIblr7nlpJbmmL7npLpcIiA6IFwi5LiL5p625ZCO6K+l5Lya5ZGY5bCG5LiN5a+55aSW5pi+56S6XCI7XG4gICAgICAgIH0gZWxzZSBpZiAoZ29vZHNUeXBlID09IDEgfHwgZ29vZHNUeXBlID09IDIgfHwgZ29vZHNUeXBlID09IDMgfHwgZ29vZHNUeXBlID09IDQpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gb3BlcmF0ZV90eXBlID09IDAgPyBcIuS4iuaetuWQjuivpeWNleWTgeWwhuWvueWkluaYvuekulwiIDogXCLkuIvmnrblkI7or6XljZXlk4HlsIbkuI3lr7nlpJbmmL7npLpcIjtcbiAgICAgICAgfVxuXG4gICAgICAgICQuYWxlcnQodGV4dCwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgJC5hamF4KFwiL2NoYW5nZV9nb29kc19zdGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZ29vZHNfaWRcIjogZ29vZHNJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZ29vZHNfdHlwZVwiOiBnb29kc1R5cGUsIC8vICBnb29kc190eXBlKDAt5LiT5qCPIOaIliDkvJrlkZgsMS3lm77mlocsMi3pn7PpopEsMy3op4bpopEsNC3nm7Tmkq0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJvcGVyYXRlX3R5cGVcIjogb3BlcmF0ZV90eXBlIC8vICAwLeS4iuaetiwxLeS4i+aetlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRlX3R5cGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5LiK5p625oiQ5Yqf77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLkuIvmnrbmiJDlip/vvIFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnb29kc1R5cGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbC5pbml0UmVzb3VyY2VMaXN0T2ZNZW1iZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaTjeS9nOWksei0pe+8jOivt+eojeWQjumHjeivle+8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pON5L2c5aSx6LSl77yM6K+356iN5ZCO6YeN6K+V77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5piv5ZCm5Zyo5pyA5paw5YiX6KGo5Lit5pi+56S6XG4gICAgICogQHBhcmFtIG1lbWJlcklkXG4gICAgICogQHBhcmFtIG9wZXJhdGVfdHlwZVxuICAgICAqL1xuICAgIHV0aWxzLmNoYW5nZU5ld2xMaXN0U3RhdGUgPSBmdW5jdGlvbihnb29kc0lkLCBnb29kc1R5cGUsIG9wZXJhdGVfdHlwZSkge1xuICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICAkLmFqYXgoXCIvc2V0X2g1X25ld2VzdF9oaWRlXCIsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIFwiaWRcIjogZ29vZHNJZCxcbiAgICAgICAgICAgICAgICBcImg1X25ld2VzdF9oaWRlXCI6IG9wZXJhdGVfdHlwZSAvLyAgMC3mmL7npLosMS3pmpDol49cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRlX3R5cGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuiuvue9ruaIkOWKn++8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLorr7nva7miJDlip/vvIFcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdvb2RzVHlwZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDE1MDApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwuaW5pdFJlc291cmNlTGlzdE9mTWVtYmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIzor7fnqI3lkI7ph43or5XvvIFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaTjeS9nOWksei0pe+8jOivt+eojeWQjumHjeivle+8gVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDnva7pobbmk43kvZxcbiAgICAgKiBAcGFyYW0gcGFja2FnZUlkXG4gICAgICogQHBhcmFtIHJlc291cmNlVHlwZSAgLT4gKDAt5LiT5qCPLDEt5Zu+5paHLDIt6Z+z6aKRLDMt6KeG6aKRLDQt55u05pKtKTtcbiAgICAgKiBAcGFyYW0gcmVzb3VyY2VJZFxuICAgICAqIEBwYXJhbSB0b3BTdGF0ZSAgICAgIC0+ICgwLeWPlua2iOe9rumhtiwxLeiuvue9rue9rumhtilcbiAgICAgKi9cbiAgICB1dGlscy5zZXRSZXNvdXJjZVRvcCA9IGZ1bmN0aW9uKHBhY2thZ2VJZCwgcmVzb3VyY2VUeXBlLCByZXNvdXJjZUlkLCB0b3BTdGF0ZSkge1xuICAgICAgICBzaG93TG9hZGluZygpO1xuXG4gICAgICAgICQuYWpheCgnL3NldF9wYWNrYWdlX3Jlc291cmNlX3RvcCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgcGFja2FnZV9pZDogcGFja2FnZUlkLFxuICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGU6IHJlc291cmNlVHlwZSxcbiAgICAgICAgICAgICAgICByZXNvdXJjZV9pZDogcmVzb3VyY2VJZCxcbiAgICAgICAgICAgICAgICB0b3Bfc3RhdGU6IHRvcFN0YXRlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3BTdGF0ZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5bey57uP5Y+W5raI572u6aG277yBXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIue9rumhtuaIkOWKn++8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5pbml0UmVzb3VyY2VMaXN0T2ZNZW1iZXIoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5pON5L2c5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOWNleWTgeS4iuS4i+aetlxuICAgICAqIEBwYXJhbSByZXNvdXJjZV9pZFxuICAgICAqIEBwYXJhbSBjaGFuZ2VUeXBlICB0cnVlLeS4iuaetu+8jCBmYWxzZS3kuIvmnrZcbiAgICAgKi9cbiAgICB1dGlscy5wYWNrYWdlaXNTaG93ID0gZnVuY3Rpb24oaWQsIGNoYW5nZVR5cGUpIHsgLy/kuJPmoI/kuIrkuIvmnrZcbiAgICAgICAgJC5hbGVydChjaGFuZ2VUeXBlID8gXCLkuIrmnrblkI7or6XkuJPmoI/lsIblr7nlpJbmmL7npLpcIiA6IFwi5LiL5p625ZCO6K+l5LiT5qCP5bCG5LiN5a+55aSW5pi+56S6XCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICBvbk9rOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICAgICAgICAgICQuYWpheCgnL2NoYW5nZV9nb29kc19zdGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgMS1nb29kc19pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDItZ29vZHNfdHlwZSgwLeS4k+agjywxLeWbvuaWhywyLemfs+mikSwzLeinhumikSw0LeebtOaSrSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAzLW9wZXJhdGVfdHlwZSgwLeS4iuaetiwxLeS4i+aetilcbiAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29kc19pZDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29kc190eXBlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0ZV90eXBlOiBjaGFuZ2VUeXBlID8gMCA6IDEsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxvYWRQYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNzAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuU3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuU3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5UnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5p+l6K+i5Y2V5ZOBIOaYr+WQpuWcqOWNleWTgeWIl+ihqCDmiJYg5LiT5qCP5YiX6KGoXG4gICAgICogQHBhcmFtIHJlc291cmNlX2lkXG4gICAgICogQHBhcmFtIHJlc291cmNlX3R5cGUgICgxLeWbvuaWhywyLemfs+mikSwzLeinhumikSw0LeebtOaSrSk7XG4gICAgICogQHBhcmFtIHBhY2thZ2VfaWQgICjlvZNjaGFubmVsX3R5cGU9MeaXtuacieWAvClcbiAgICAgKi9cbiAgICB1dGlscy5xdWVyeVNpbmdsZVJlc291cmNlID0gZnVuY3Rpb24ocmVzb3VyY2VfaWQsIHJlc291cmNlX3R5cGUsIHBhY2thZ2VfaWQpIHtcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgJC5hamF4KFwiL3F1ZXJ5X2dvb2RzX3N0YXRlXCIsIHsgLy8gIDEgLT4g5p+l6K+i5Y2V5ZOBIOaYr+WQpuWcqOWNleWTgeWIl+ihqOaIluiAheWFtuWug+S4k+agj+OAgeS8muWRmOWIl+ihqFxuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZ29vZHNfaWQ6IHJlc291cmNlX2lkLFxuICAgICAgICAgICAgICAgIGdvb2RzX3R5cGU6IHJlc291cmNlX3R5cGUsXG4gICAgICAgICAgICAgICAgY2hhbm5lbF90eXBlOiAyLCAvLyAgY2hhbm5lbF90eXBlICggMC3ljZXlk4EsMS3kuJPmoI/lhoXotYTmupAsMi3kvJrlkZjlhoUgKVxuICAgICAgICAgICAgICAgIHBhY2thZ2VfaWQ6IHBhY2thZ2VfaWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0V4aXN0ID0gcmVzdWx0LmRhdGFbJ2lzX2V4aXN0J10sXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzTGlzdCA9IHJlc3VsdC5kYXRhWydyZWNvcmRzX2xpc3QnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyckxlbmd0aCA9IE9iamVjdC5rZXlzKHJlY29yZHNMaXN0KS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gXCJcIjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFeGlzdCA9PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAg5Y+q5bGe5LqO5p+Q5Liq5LiT5qCP55qE5Y2V5ZOBLOWFtuWug+WcsOaWueS4jeWtmOWcqFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IFwi56Gu6K6k56e76Zmk6K+l5YaF5a6577yM56e76Zmk5ZCO5omA5pyJ55So5oi35bCG5peg5rOV5p+l55yL5q2k5YaF5a655LiUPHNwYSBzdHlsZT0nY29sb3I6IHJlZDsnPuS4jeWPr+aBouWkjTwvc3BhPlwiO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlY29yZHNMaXN0WzBdID09IHVuZGVmaW5lZCkgeyAgICAgICAvLyAg5Y+q5bGe5LqO5aSa5Liq5LiT5qCP55qE5Y2V5ZOBXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPD0gYXJyTGVuZ3RoOyBpbmRleCArKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gKFwi44CKXCIgKyByZWNvcmRzTGlzdFtpbmRleF1bJ3RpdGxlJ10gKyBcIuOAi1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gKFwi56Gu6K6k56e76Zmk6K+l5YaF5a6577yM56e76Zmk5ZCO6K+l5Lya5ZGY55So5oi35bCG5peg5rOV5p+l55yL5q2k5YaF5a6544CC5q2k5YaF5a655LuN5a2Y5Zyo5LqOXCIgKyB0ZXh0ICsgXCLkuK1cIik7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnJMZW5ndGggPT0gMSkgeyAgICAgICAgICAgICAgLy8gIOWNleWTgeWNleWNluS4lOWxnuS6juS4gOS4quS4k+agj1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBcIuehruiupOenu+mZpOivpeWGheWuue+8jOenu+mZpOWQjuivpeS8muWRmOeUqOaIt+WwhuaXoOazleafpeeci+atpOWGheWuueOAguatpOWGheWuueS7jeWcqOWNleWTgeWIl+ihqOS4lOWNleeLrOWUruWNllwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAg5Y2V5ZOB5Y2V5Y2W5LiU5bGe5LqO5aSa5Liq5LiT5qCPXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJyTGVuZ3RoOyBpbmRleCArKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IChcIuOAilwiICsgcmVjb3Jkc0xpc3RbaW5kZXhdWyd0aXRsZSddICsgXCLjgItcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gXCLnoa7orqTnp7vpmaTor6XlhoXlrrnvvIznp7vpmaTlkI7or6XkvJrlkZjnlKjmiLflsIbml6Dms5Xmn6XnnIvmraTlhoXlrrnjgILmraTlhoXlrrnljZXni6zllK7ljZbkuJTku43lrZjlnKjkuo5cIiArIHRleHQgKyBcIuS4rVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQodGV4dCwgXCJpbmZvXCIsIHsgLy8gMiAtPiDkvZzlh7rnm7jlupTnmoTmj5DnpLpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+ehruiupOenu+mZpCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5kZWxldGVTaW5nbGVSZXNvdXJjZShyZXNvdXJjZV9pZCwgcmVzb3VyY2VfdHlwZSwgcGFja2FnZV9pZCk7IC8vIDMgLT4g56e76ZmkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pON5L2c5aSx6LSl77yBXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlvIDlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIC8vICDmn6Xor6LkuJPmoI8g5piv5ZCm5Zyo5YW25a6D5Lya5ZGY5YiX6KGoXG4gICAgdXRpbHMucXVlcnlQYWNrYWdlUmVzb3VyY2UgPSBmdW5jdGlvbiAocmVzb3VyY2VfaWQpIHtcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgJC5hamF4KFwiL3F1ZXJ5X2dvb2RzX3N0YXRlXCIsIHsgLy8gIDEgLT4g5p+l6K+i5LiT5qCPIOaYr+WQpuWcqOWFtuWug+S8muWRmOWIl+ihqFxuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZ29vZHNfaWQ6IHJlc291cmNlX2lkLFxuICAgICAgICAgICAgICAgIGdvb2RzX3R5cGU6IDYsXG4gICAgICAgICAgICAgICAgY2hhbm5lbF90eXBlOiAyLCAvLyAgY2hhbm5lbF90eXBlICggMC3ljZXlk4EsMS3kuJPmoI/lhoXotYTmupAsMi3kvJrlkZjlhoUgKVxuICAgICAgICAgICAgICAgIHBhY2thZ2VfaWQ6IEJ1c2luZXNzLm1lbWJlcl9pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzRXhpc3QgPSByZXN1bHQuZGF0YVsnaXNfZXhpc3QnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNMaXN0ID0gcmVzdWx0LmRhdGFbJ3JlY29yZHNfbGlzdCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTGVuZ3RoID0gT2JqZWN0LmtleXMocmVjb3Jkc0xpc3QpLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0V4aXN0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBcIuehruiupOenu+mZpOivpeS4k+agj++8jOenu+mZpOWQjuivpeS8muWRmOeUqOaIt+WwhuaXoOazleafpeeci+atpOS4k+agj++8jOatpOS4k+agj+S7jeWcqOS4k+agj+WIl+ihqOS4lOWNleeLrOWUruWNllwiO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8PSBhcnJMZW5ndGg7IGluZGV4ICsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAoXCLjgIpcIiArIHJlY29yZHNMaXN0W2luZGV4XVsndGl0bGUnXSArIFwi44CLXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSAoXCLnoa7orqTnp7vpmaTor6XkuJPmoI/vvIznp7vpmaTlkI7or6XkvJrlkZjnlKjmiLflsIbml6Dms5Xmn6XnnIvmraTkuJPmoI/vvIzmraTkuJPmoI/ku43lrZjlnKjkuo5cIiArIHRleHQgKyBcIuS4rVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQodGV4dCwgXCJpbmZvXCIsIHsgLy8gMiAtPiDkvZzlh7rnm7jlupTnmoTmj5DnpLpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+ehruiupOenu+mZpCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5kZWxldGVTaW5nbGVSZXNvdXJjZShyZXNvdXJjZV9pZCwgNiwgQnVzaW5lc3MubWVtYmVyX2lkKTsgLy8gMyAtPiDnp7vpmaTkuJPmoI9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIFcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlvIDlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICB9O1xuICAgIHV0aWxzLnZpc2libGVTd2l0Y2g9IGZ1bmN0aW9uKGlkLHZpc2libGVfb24pe1xuICAgICAgICAvLyBpZDrkuJPmoI/mmK/lkKbopoHorr7nva7mlK/ku5jml7bloavlhpnkv6Hmga/nmoTkuJPmoI9pZCzliJfooajmmL7npLrlvIDlhbPnirbmgIEwLeWFs+mXre+8jDEt5byA5ZCvXG4gICAgICAgIHZhciB2ZXJzaW9uPSQoXCIudXNlcl92ZXJzaW9uX251bVwiKS5kYXRhKFwidmVyc2lvbl90eXBlXCIpO1xuICAgICAgICBpZih2ZXJzaW9uJiZ2ZXJzaW9uPT0zKSB7XG4gICAgICAgICAgICAkLmFsZXJ0KHZpc2libGVfb24gPyBcIuW8gOWQr+WGheWuueWxleekuuWQju+8jOacqui0reS5sOS4k+agj+eahOeUqOaIt+i/m+WOu+S4k+agj+WQjuWwhuWPr+ingeWGheWuueWIl+ihqO+8jOaCqOehruiupOimgeW8gOWQr+S5iO+8n1wiIDpcbiAgICAgICAgICAgICAgICBcIuWFs+mXreWGheWuueWxleekuuWQju+8jOacqui0reS5sOS4k+agj+eahOeUqOaIt+i/m+WOu+S4k+agj+WQjuWwhuaXoOazleafpeeci+WGheWuueWIl+ihqO+8jOaCqOehruiupOimgeWFs+mXreS5iO+8n1wiLCBcImluZm9cIiwge1xuICAgICAgICAgICAgICAgIGljb246IFwiYmx1ZVwiLFxuICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgJC5hamF4KCcvdmlzaWJsZV9vbl9zd2l0Y2gnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmxlX29uOnZpc2libGVfb25cbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxvYWRQYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIDIwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5b2T5YmN54mI5pys5LiN5pSv5oyB5byA5ZCv6LWE5paZ5aGr5YaZ77yM5aaC6ZyA5byA5ZCv6K+35Y2H57qn6Iez5LiT5Lia54mIXCIpO1xuICAgICAgICB9XG4gICAgfVxuICAgIHV0aWxzLnBhY2thZ2VGb3JtID0gZnVuY3Rpb24oaWQsZm9ybVR5cGUpe1xuICAgICAgICAvLyBpZDrkuJPmoI/mmK/lkKbopoHorr7nva7mlK/ku5jml7bloavlhpnkv6Hmga/nmoTkuJPmoI9pZO+8jGZvcm1UeXBlIO+8mnRydWUt5YWB6K64IGZhbHNlLeemgeatoi5cbiAgICAgICAgdmFyIHZlcnNpb249JChcIi51c2VyX3ZlcnNpb25fbnVtXCIpLmRhdGEoXCJ2ZXJzaW9uX3R5cGVcIik7XG4gICAgICAgIGlmKHZlcnNpb24gJiYgdmVyc2lvbj09Mykge1xuICAgICAgICAgICAgJC5hbGVydChmb3JtVHlwZSA/IFwi5byA5ZCv6LWE5paZ5aGr5YaZ5ZCO77yM55So5oi35Zyo5LuY6LS56LSt5Lmw5pys5Lya5ZGY5YmN5bCG5aGr5YaZ5Liq5Lq65L+h5oGv77yM5oKo56Gu6K6k6KaB5byA5ZCv5LmI77yfXCIgOlxuICAgICAgICAgICAgICAgIFwi5YWz6Zet6LWE5paZ5aGr5YaZ5ZCO77yM55So5oi35Zyo5LuY6LS56LSt5Lmw5pys5Lya5ZGY5YmN5bCG5LiN5YaN5aGr5YaZ5Liq5Lq65L+h5oGv77yM5oKo56Gu6K6k6KaB5YWz6Zet5LmI77yfXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgaWNvbjogXCJibHVlXCIsXG4gICAgICAgICAgICAgICAgb25PazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoJy9zZXRfaXNfY29tcGxldGVfaW5mbycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2NvbXBsZXRlX2luZm86IGZvcm1UeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsb2FkUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLlvZPliY3niYjmnKzkuI3mlK/mjIHlvIDlkK/otYTmlpnloavlhpnvvIzlpoLpnIDlvIDlkK/or7fljYfnuqfoh7PkuJPkuJrniYhcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDnp7vpmaTljZXlk4HotYTmupBcbiAgICAgKiBAcGFyYW0gcmVzb3VyY2VJZFxuICAgICAqIEBwYXJhbSByZXNvdXJjZVR5cGVcbiAgICAgKiBAcGFyYW0gbWVtYmVySWRcbiAgICAgKi9cbiAgICB1dGlscy5kZWxldGVTaW5nbGVSZXNvdXJjZSA9IGZ1bmN0aW9uKHJlc291cmNlSWQsIHJlc291cmNlVHlwZSwgbWVtYmVySWQpIHtcbiAgICAgICAgLy8gJChcIi5sb2FkaW5nU1wiKS5mYWRlSW4oMzAwKTtcbiAgICAgICAgJC5hamF4KFwiL21vdmVfZ29vZHNcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZ29vZHNfaWQ6IHJlc291cmNlSWQsXG4gICAgICAgICAgICAgICAgZ29vZHNfdHlwZTogcmVzb3VyY2VUeXBlLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxfdHlwZTogMiwgLy8gIGNoYW5uZWxfdHlwZSgwLeWNleWTgSwxLeS4k+agj+WGhei1hOa6kCwyLeS8muWRmOWGhSlcbiAgICAgICAgICAgICAgICBwYWNrYWdlX2lkOiBtZW1iZXJJZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICQoXCIubG9hZGluZ1NcIikuZmFkZU91dCgzMDApO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLnp7vpmaTmiJDlip/vvIFcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi56e76Zmk5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzb3VyY2VUeXBlID09IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuaW5pdFBhY2thZ2VMaXN0T2ZNZW1iZXIoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5pbml0UmVzb3VyY2VMaXN0T2ZNZW1iZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMzAwKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacjeWKoeWZqOW8gOWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog6K6+572u6K+V5ZCsIOaIliDor5XnnItcbiAgICAgKiBAcGFyYW0gcGFja2FnZUlkXG4gICAgICogQHBhcmFtIHJlc0lkXG4gICAgICogQHBhcmFtIHRyeVN0YXRlICAoMC3lj5bmtojor5XlkKwsMS3orr7kuLror5XlkKwpXG4gICAgICovXG4gICAgdXRpbHMuc2V0UmVzb3VyY2VUcnkgPSBmdW5jdGlvbihwYWNrYWdlSWQsIHJlc1R5cGUsIHJlc0lkLCBwYXltZW50VHlwZSwgdHJ5U3RhdGUpIHtcblxuICAgICAgICAvLyBpZiAocmVzVHlwZSA9PSA0KSB7XG4gICAgICAgIC8vICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmmoLkuI3mlK/mjIHlsIbnm7Tmkq3orr7kuLror5XnnIshXCIpO1xuICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyB9XG4gICAgICAgIGlmIChwYXltZW50VHlwZSA9PSAxIHx8IHBheW1lbnRUeXBlID09IDIpIHtcbiAgICAgICAgICAgIGlmIChyZXNUeXBlID09IDIpIHtcbiAgICAgICAgICAgICAgICAkLmFsZXJ0KFwi6K+l5Y2V5ZOB5bey6K6+5Li65Y2V5Y2W77yM5Y+W5raI5Y2V5Y2W5ZCO5pa55Y+v6K6+5Li66K+V5ZCsXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGJ0bjogMixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzVHlwZSA9PSAxIHx8IHJlc1R5cGUgPT0gMyB8fCByZXNUeXBlID09IDQpIHtcbiAgICAgICAgICAgICAgICAkLmFsZXJ0KFwi6K+l5Y2V5ZOB5bey6K6+5Li65Y2V5Y2W77yM5Y+W5raI5Y2V5Y2W5ZCO5pa55Y+v6K6+5Li66K+V55yLXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGJ0bjogMixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICQuYWpheCgnL3NldF9wYWNrYWdlX3Jlc291cmNlX3RyeScsIHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgcGFja2FnZV9pZDogcGFja2FnZUlkLFxuICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGU6IHJlc1R5cGUsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VfaWQ6IHJlc0lkLFxuICAgICAgICAgICAgICAgIHRyeV9zdGF0ZTogdHJ5U3RhdGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyeVN0YXRlID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLorr7nva7miJDlip/vvIFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5Y+W5raI5oiQ5Yqf77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmluaXRSZXNvdXJjZUxpc3RPZk1lbWJlcigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaTjeS9nOWksei0pe+8gVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+aTjeS9nOWksei0pe+8jOivt+eojeWQjuWGjeivlScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICAvL+WvvOWHuumfs+mikVxuICAgIHV0aWxzLmV4cG9ydEF1ZGlvID0gZnVuY3Rpb24gKGFsaXZlSWQpIHtcblxuICAgICAgICAkLmFqYXgoXCIvYXN5bmNfZG93bmxvYWRfYWxpdmVfdm9pY2VcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgYWxpdmVfaWQ6IGFsaXZlSWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChyZXN1bHQuY29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlc3VsdC5kYXRhWyd1cmwnXTsgICAgICAvL+ebtOaOpeW8gOWni+S4i+i9vemfs+mikeaWh+S7tlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLor63pn7PmraPlnKjlkIjmiJDkuK3vvIzmoLnmja7mgqjnm7Tmkq3pl7TlhoXnmoTpn7PpopHmlbDph4/pnIDopoExMOWIhumSn+WIsDTkuKrlsI/ml7bkuI3nrYnvvIzor7fnqI3lgJnorr/pl67jgIJcIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFsZXJ0KFwi5byA5aeL6L+b6KGM6K+t6Z+z5ZCI5oiQ77yM5qC55o2u5oKo55u05pKt6Ze05YaF55qE6Z+z6aKR5pWw6YeP6ZyA6KaBMTDliIbpkp/liLA05Liq5bCP5pe25LiN562J77yM6K+356iN5YCZ6K6/6Zeu44CCXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIuacjeWKoeWZqOato+WcqOe7tOaKpO+8jOebtOaSremfs+mikeWvvOWHuuWKn+iDveWPl+WIsOW9seWTje+8jOivt+eojeWQjuWGjeivleOAglwiLCBcImluZm9cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLor6Xnm7Tmkq3msqHmnInpn7PpopHjgIJcIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFsZXJ0KFwi6L+Z5Liq55u05pKt5LiN5piv6K+t6Z+z57G75Z6L55qE77yM5LiN5pSv5oyB6Z+z6aKR5a+85Ye644CCXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIui/meS4quebtOaSrei/mOayoee7k+adn++8jOaaguS4jeaUr+aMgemfs+mikeWvvOWHuuOAglwiLCBcImluZm9cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWPguaVsOmUmeivr1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChyZXN1bHQubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQubXNnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgdXRpbHMuc2V0U2luZ2xlU2FsZSA9IGZ1bmN0aW9uKHJlc1R5cGUsIHJlc0lkLCByZXNUaXRsZSwgaXNUcnksIHNob3dUaW1lLCByZXNJbWdVcmwpIHtcblxuICAgICAgICBpZiAoaXNUcnkgPT0gMSkgeyAvL+aYr1xuICAgICAgICAgICAgaWYgKHJlc1R5cGUgPT0gMikge1xuICAgICAgICAgICAgICAgICQuYWxlcnQoXCLor6XljZXlk4Hlt7Lorr7kuLror5XlkKzvvIzlj5bmtojor5XlkKzlkI7mlrnlj6/orr7kuLrljZXljZZcIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNUeXBlID09IDEgfHwgcmVzVHlwZSA9PSAzIHx8IHJlc1R5cGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICQuYWxlcnQoXCLor6XljZXlk4Hlt7Lorr7kuLror5XnnIvvvIzlj5bmtojor5XnnIvlkI7mlrnlj6/orr7kuLrljZXljZZcIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbW9kYWwuaW5pdFNldFNpbmdsZVNhbGVXaW5kb3cocmVzSW1nVXJsLCByZXNUaXRsZSwgcmVzVHlwZSwgc2hvd1RpbWUsIHJlc0lkKTtcbiAgICAgICAgICAgICQoXCIuc2V0X3ByaWNlX3dpbmRvd1wiKS5mYWRlSW4oMzAwKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHV0aWxzLmNhbmNlbFNpbmdsZVNhbGUgPSBmdW5jdGlvbihyZXNUeXBlLCByZXNJZCwgcGF5bWVudFR5cGUpIHtcblxuICAgICAgICBpZiAocGF5bWVudFR5cGUgPT0gMSkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSBcIuWPlua2iOWNleWNluWQju+8jOacquW8gOmAmuS8muWRmOeahOeUqOaIt+WwhuS4jeWPr+WNleeLrOafpeeci+ivpeWNleWTgSFcIjtcbiAgICAgICAgfSBlbHNlIGlmIChwYXltZW50VHlwZSA9PSAyKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IFwi5Y+W5raI5Y2V5Y2W5ZCO77yM5pyq5byA6YCa5Lya5ZGY55qE55So5oi35bCG5LiN5Y+v5Y2V54us5LuY6LS56LSt5Lmw6K+l5Y2V5ZOBIVwiO1xuICAgICAgICB9XG4gICAgICAgICQuYWxlcnQodGV4dCwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHt9O1xuICAgICAgICAgICAgICAgIGFycltcInJlc291cmNlX2lkXCJdID0gcmVzSWQ7XG4gICAgICAgICAgICAgICAgYXJyW1wicmVzb3VyY2VfdHlwZVwiXSA9IHJlc1R5cGU7XG4gICAgICAgICAgICAgICAgdmFyIHJlc291cmNlTGlzdEFyciA9IFthcnJdO1xuXG4gICAgICAgICAgICAgICAgJC5hamF4KFwiL3N1Ym1pdF9jaG9pY2VfcmVzb3VyY2VcIiwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGFubmVsX3R5cGVcIjogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicmVzb3VyY2VfbGlzdFwiOiByZXNvdXJjZUxpc3RBcnIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN1Ym1pdF90eXBlXCI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5Y+W5raI5Y2V5Y2W5oiQ5Yqf77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLmluaXRSZXNvdXJjZUxpc3RPZk1lbWJlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5UhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlvIDlsI/lt67llabvvIzor7fnqI3lkI7lho3mkJzntKLvvIFcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICB1dGlscy5jaGFuZ2VDYW5TZWxlY3RTdGF0ZSA9IGZ1bmN0aW9uIChyZXNJZCwgY2FuU2VsZWN0KSB7XG5cbiAgICAgICAgJC5hamF4KFwiL3NldF9yZXNvdXJjZV9zZWxlY3RfY2FuXCIsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiByZXNJZCxcbiAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiAxLFxuICAgICAgICAgICAgICAgIGNhbl9zZWxlY3Q6IGNhblNlbGVjdCA/IDEgOiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FuU2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5bey57uP5YWB6K645aSN5Yi2XCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuW3sue7j+emgeatouWkjeWItlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5VcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICB1dGlscy5pbml0TGlzdFBhZ2luYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLmxpc3QtcGFnZSAucGFnaW5hdGlvbiBsaSBhJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkZWxlID0gJCh0aGlzKTtcbiAgICAgICAgICAgICRlbGUuYXR0cignZGF0YS11cmwnLCAkZWxlLmF0dHIoJ2hyZWYnKSk7XG4gICAgICAgICAgICAkZWxlLnJlbW92ZUF0dHIoJ2hyZWYnKTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5YiH5o2i6YCJ5oup5bey5pyJ56qX5Y+j5LitIHRhYiDnmoTmmL7npLpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0KFN0cmluZykgICAgcGFja2FnZVRhYiAtIOWIh+aNouWIsOS4k+agj++8myBzaW5nbGVUYWIgLSDliIfmjaLliLDljZXlk4FcbiAgICAgKi9cbiAgICB1dGlscy5zd2l0Y2hXaW5kb3dUYWIgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cbiAgICAgICAgdmFyIHRhYlZhbHVlID0gJChcIi5zZWxlY3RHb29kVGFiV3JhcHBlcj5saS5hY3RpdmVDb250ZW50VGFiXCIpLnZhbCgpOyAvLyAgICAxLeWNleWTgSAgMC3kuJPmoI9cblxuICAgICAgICBpZiAoKHRhYlZhbHVlID09IDEgJiYgdGFyZ2V0ID09IFwic2luZ2xlVGFiXCIpIHx8ICh0YWJWYWx1ZSA9PSAwICYmIHRhcmdldCA9PSBcInBhY2thZ2VUYWJcIikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0ID09IFwic2luZ2xlVGFiXCIpIHtcbiAgICAgICAgICAgICQoXCIjc2VsZWN0R29vZFNpbmdsZVRhYlwiKS5hZGRDbGFzcyhcImFjdGl2ZUNvbnRlbnRUYWJcIik7XG4gICAgICAgICAgICAkKFwiI3NlbGVjdEdvb2RQYWNrYWdlVGFiXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlQ29udGVudFRhYlwiKTtcblxuICAgICAgICAgICAgbW9kYWwudGFiU3RhdGUgPSBcInNpbmdsZUxpc3RcIjtcbiAgICAgICAgICAgIG1vZGFsLnJlc1R5cGUgPSAwO1xuXG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0ID09IFwicGFja2FnZVRhYlwiKSB7XG4gICAgICAgICAgICAkKFwiI3NlbGVjdEdvb2RQYWNrYWdlVGFiXCIpLmFkZENsYXNzKFwiYWN0aXZlQ29udGVudFRhYlwiKTtcbiAgICAgICAgICAgICQoXCIjc2VsZWN0R29vZFNpbmdsZVRhYlwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZUNvbnRlbnRUYWJcIik7XG5cbiAgICAgICAgICAgIG1vZGFsLnRhYlN0YXRlID0gXCJwYWNrYWdlTGlzdFwiO1xuICAgICAgICAgICAgbW9kYWwucmVzVHlwZSA9IDY7XG5cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHJldHVybiB1dGlscztcblxufSkoKTtcbiJdfQ==
