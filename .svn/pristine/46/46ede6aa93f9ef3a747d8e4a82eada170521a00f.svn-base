var sms_name;var sms_content;var model_id;var needRefresh=false;var $is_address_right=true;$(document).ready(function(){refresh();var e=GetQueryString("reurl");if(e){if(e.indexOf("feedback")>0){setTopUrlInfo("feedback_listop")}if(e.indexOf("pay_admin")>0){setTopUrlInfo("payadmin_listop")}if(e.indexOf("comment")>0){setTopUrlInfo("comment_listop")}}else{setTopUrlInfo("customer_listop")}$("#editButton").click(function(){var e=getUrlParam("appId");var t=getUrlParam("userId");window.location.href="/customeredit?appId="+e+"&userId="+t});initMsgModel();bindElement();$("#skip_target_input.form-control").bind("input propertychange",function(){var e=document.getElementById("skip_target_input").value;if(e==""||!e.indexOf("http://")||!e.indexOf("https://")){$(".http_error_tip").addClass("hide");$(".modal-footer").css({margin:"45px 15px 0"}).css({padding:"30px 0px"});$is_address_right=true}else{$(".http_error_tip").removeClass("hide");$(".modal-footer").css({margin:"0 15px 0"}).css({padding:"15px 0 0 30px"});$is_address_right=false}});$("#customerMsg").click(function(){var e=getUrlParam("appId");var t=getUrlParam("userId");$("#SmsModal").modal("show");document.getElementById("link_type_selector")[0].selected=true;$("#skip_target_selector").empty();$("#skip_target_selector").addClass("hide");$("#skip_target_input").removeClass("hide");$(".modal-footer").children("button").eq(0).unbind("click").bind("click",function(){var i=$("#sms_nickname").val();var s=$("#sms_content").val();if(i.length==0){window.wxc.xcConfirm("亲，还未输入发送人昵称哦~","error");return false}if(s.length==0){window.wxc.xcConfirm("亲，还未输入消息内容哦~","error");return false}if(!$is_address_right){window.wxc.xcConfirm("亲，外部链接输入有问题哦~","error");return false}$("#SmsModal").modal("hide");showLoading();var r={};var a=$("#link_type_selector").find("option:selected").val();if(a=="audio"){a=2}else if(a=="video"){a=3}else if(a=="image_text"){a=1}else if(a=="package"){a=6}else if(a=="h5"){a=5}else{a=0}r["skip_type"]=a;if(a==5){r["skip_target"]=$("#skip_target_input").val().trim()}else if(a==0){r["skip_target"]=""}else{r["skip_target"]=$("#skip_target_selector").find("option:selected").val()}if(a==2||a==3||a==1||a==6){if(r["skip_target"]==""){baseUtils.show.blueTip("请选择跳转资源链接!");return false}}if(a!=0){r["skip_title"]=$("#link_name").val()}else{r["skip_title"]=""}$.post("/customermsg",{appId:e,userId:t,nickname:i,content:s,params:r},function(e){hideLoading();if(e.ret==0){baseUtils.show.blueTip("发送成功!",function(){window.location.reload()})}else{window.wxc.xcConfirm("系统繁忙，请稍后再试!","error")}})})})});function initMsgModel(){$(".model_type").on("click",function(){$(".model_type").removeClass("border_blue");$(this).addClass("border_blue");$("#sms_nickname").val($(this).attr("data-name"));$("#sms_content").val($(this).attr("data-content"));if($("#cancel_model").hasClass("border_blue")){$(".edit_model").addClass("hide");$(".model_type").removeClass("border_blue")}model_id=$(this).attr("data-id");sms_name=$(this).attr("data-name");sms_content=$(this).attr("data-content")});$("#sms_content").keyup(function(){if($(".border_blue").length>0){$(".edit_model").removeClass("hide")}});$("#sms_nickname").keyup(function(){if($(".border_blue").length>0){$(".edit_model").removeClass("hide")}});$(".edit_model").on("click",function(){model_id=$(".border_blue").attr("data-id");var e=$("#sms_nickname").val();var t=$("#sms_content").val();if(model_id==""){model_id=0;if(e!=""&&t!=""){console.log("新增模板："+model_id+">>"+e+">>"+t)}else{baseUtils.show.redTip("您的发送人昵称/内容为空");return}}else{if(e!=""&&t!=""){console.log("更新模板："+model_id+">>"+e+">>"+t)}else{baseUtils.show.redTip("您的发送人昵称/内容为空");return}}if(e==sms_name&&t==sms_content){baseUtils.show.redTip("您没有做任何模板修改")}else{showLoading();var i="/modelchange";$.post(i,{model_id:model_id,send_nick_name:e,content:t},function(i){hideLoading();console.log(i);var s=i.code;var r=i.msg;baseUtils.show.blueTip(r);if(s==0){$(".border_blue").attr("data-id",i.id);$(".border_blue").attr("data-name",e);$(".border_blue").attr("data-content",t);needRefresh=true}else if(s==1){console.log(i.errorMsg)}else if(s==2){$(".border_blue").attr("data-name",e);$(".border_blue").attr("data-content",t);needRefresh=true}})}})}function refresh(){$("#SmsModal").on("hide.bs.modal",function(){if(needRefresh){location.reload()}})}function bindElement(){$("#link_type_selector").on("change",function(){var e=$(this).find("option:selected").val();if(e=="h5"){$("#skip_target_selector").empty();$("#skip_target_selector").addClass("hide");$("#skip_target_input").removeClass("hide");return}else if(e=="no_jump"){$("#skip_target_selector").empty();$("#skip_target_selector").removeClass("hide");$("#skip_target_input").addClass("hide");return}else{$("#skip_target_selector").empty();$("#skip_target_selector").removeClass("hide");$("#skip_target_input").addClass("hide")}$.get("/banner/getResourceList?type="+e,function(e){$("#skip_target_selector").empty();e=JSON.parse(e);var t=e.length;var i="";for(var s=0;s<t;s++){i+="<option value='"+e[s].id+"'>"+e[s].title+"</option>"}$("#skip_target_selector").append(i)})})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2N1c3RvbWVyRGV0YWlsLmpzIl0sIm5hbWVzIjpbInNtc19uYW1lIiwic21zX2NvbnRlbnQiLCJtb2RlbF9pZCIsIm5lZWRSZWZyZXNoIiwiJGlzX2FkZHJlc3NfcmlnaHQiLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsInJlZnJlc2giLCJyZXVybGluZm8iLCJHZXRRdWVyeVN0cmluZyIsImluZGV4T2YiLCJzZXRUb3BVcmxJbmZvIiwiY2xpY2siLCJhcHBJZCIsImdldFVybFBhcmFtIiwidXNlcklkIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiaW5pdE1zZ01vZGVsIiwiYmluZEVsZW1lbnQiLCJiaW5kIiwiaW5wdXRfYWRkcmVzcyIsImdldEVsZW1lbnRCeUlkIiwidmFsdWUiLCJhZGRDbGFzcyIsImNzcyIsIm1hcmdpbiIsInBhZGRpbmciLCJyZW1vdmVDbGFzcyIsIm1vZGFsIiwic2VsZWN0ZWQiLCJlbXB0eSIsImNoaWxkcmVuIiwiZXEiLCJ1bmJpbmQiLCJuaWNrbmFtZSIsInZhbCIsImNvbnRlbnQiLCJsZW5ndGgiLCJ3eGMiLCJ4Y0NvbmZpcm0iLCJzaG93TG9hZGluZyIsInBhcmFtcyIsInNraXBfdHlwZSIsImZpbmQiLCJ0cmltIiwiYmFzZVV0aWxzIiwic2hvdyIsImJsdWVUaXAiLCJwb3N0IiwiZGF0YSIsImhpZGVMb2FkaW5nIiwicmV0IiwicmVsb2FkIiwib24iLCJ0aGlzIiwiYXR0ciIsImhhc0NsYXNzIiwia2V5dXAiLCJuYW1lIiwiY29uc29sZSIsImxvZyIsInJlZFRpcCIsInVybCIsInNlbmRfbmlja19uYW1lIiwicmVzdWx0IiwiUmVDb2RlIiwiY29kZSIsImluZm8iLCJtc2ciLCJpZCIsImVycm9yTXNnIiwidHlwZSIsImdldCIsIkpTT04iLCJwYXJzZSIsImNvdW50IiwiaHRtbFN0ciIsImkiLCJ0aXRsZSIsImFwcGVuZCJdLCJtYXBwaW5ncyI6IkFBR0EsR0FBSUEsU0FDSixJQUFJQyxZQUNKLElBQUlDLFNB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QWMsV0FPbEMsUUFBU0ssV0FDTEgsRUFBRSxhQUFhbUQsR0FBRyxnQkFBaUIsV0FFL0IsR0FBSXJELFlBQWEsQ0FDYmUsU0FBU3FDLFlBS3JCLFFBQVNsQyxlQUNMaEIsRUFBRSx1QkFBdUJtRCxHQUFHLFNBQVUsV0FDbEMsR0FBSWtCLEdBQU9yRSxFQUFFb0QsTUFBTVgsS0FBSyxtQkFBbUJSLEtBRTNDLElBQUlvQyxHQUFRLEtBQU0sQ0FDZHJFLEVBQUUseUJBQXlCNEIsT0FDM0I1QixHQUFFLHlCQUF5QnFCLFNBQVMsT0FDcENyQixHQUFFLHNCQUFzQnlCLFlBQVksT0FDcEMsWUFDRyxJQUFJNEMsR0FBUSxVQUFXLENBQzFCckUsRUFBRSx5QkFBeUI0QixPQUMzQjVCLEdBQUUseUJBQXlCeUIsWUFBWSxPQUN2Q3pCLEdBQUUsc0JBQXNCcUIsU0FBUyxPQUNqQyxZQUNHLENBQ0hyQixFQUFFLHlCQUF5QjRCLE9BQzNCNUIsR0FBRSx5QkFBeUJ5QixZQUFZLE9BQ3ZDekIsR0FBRSxzQkFBc0JxQixTQUFTLFFBR3JDckIsRUFBRXNFLElBQUksZ0NBQWtDRCxFQUFPLFNBQVVQLEdBQ3JEOUQsRUFBRSx5QkFBeUI0QixPQUMzQmtDLEdBQVNTLEtBQUtDLE1BQU1WLEVBRXBCLElBQUlXLEdBQVFYLEVBQU8zQixNQUVuQixJQUFJdUMsR0FBVSxFQUVkLEtBQUssR0FBSUMsR0FBSSxFQUFHQSxFQUFJRixFQUFPRSxJQUFLLENBQzVCRCxHQUFTLGtCQUFrQlosRUFBT2EsR0FBR1IsR0FBRyxLQUFLTCxFQUFPYSxHQUFHQyxNQUFNLFlBRWpFNUUsRUFBRSx5QkFBeUI2RSxPQUFPSCIsImZpbGUiOiJhZG1pbi9jdXN0b21lckRldGFpbC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IFN0dXBoaW4gb24gMjAxNi85LzI5LlxyXG4gKi9cclxudmFyIHNtc19uYW1lO1xyXG52YXIgc21zX2NvbnRlbnQ7XHJcbnZhciBtb2RlbF9pZDtcclxudmFyIG5lZWRSZWZyZXNoID0gZmFsc2U7XHJcbi8vIOi+k+WFpee9keWdgOaYr+WQpuato+ehrlxyXG52YXIgJGlzX2FkZHJlc3NfcmlnaHQgPSB0cnVlO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKVxyXG57XHJcbiAgICByZWZyZXNoKCk7XHJcblxyXG4gICAgdmFyIHJldXJsaW5mbyA9IEdldFF1ZXJ5U3RyaW5nKCdyZXVybCcpO1xyXG4gICAgaWYocmV1cmxpbmZvKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHJldXJsaW5mby5pbmRleE9mKCdmZWVkYmFjaycpPjApe1xyXG4gICAgICAgICAgICBzZXRUb3BVcmxJbmZvKCdmZWVkYmFja19saXN0b3AnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocmV1cmxpbmZvLmluZGV4T2YoJ3BheV9hZG1pbicpPjApIHtcclxuICAgICAgICAgICAgc2V0VG9wVXJsSW5mbygncGF5YWRtaW5fbGlzdG9wJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHJldXJsaW5mby5pbmRleE9mKCdjb21tZW50Jyk+MCkge1xyXG4gICAgICAgICAgICBzZXRUb3BVcmxJbmZvKCdjb21tZW50X2xpc3RvcCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGVsc2V7XHJcbiAgICAgICAgc2V0VG9wVXJsSW5mbygnY3VzdG9tZXJfbGlzdG9wJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLy/nvJbovpHmjInpkq5cclxuICAgICQoXCIjZWRpdEJ1dHRvblwiKS5jbGljayhmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIGFwcElkID0gZ2V0VXJsUGFyYW0oXCJhcHBJZFwiKTtcclxuICAgICAgICB2YXIgdXNlcklkID0gZ2V0VXJsUGFyYW0oXCJ1c2VySWRcIik7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9Jy9jdXN0b21lcmVkaXQ/YXBwSWQ9JythcHBJZCsnJnVzZXJJZD0nK3VzZXJJZDtcclxuICAgIH0pO1xyXG5cclxuICAgIGluaXRNc2dNb2RlbCgpO1xyXG5cclxuICAgIGJpbmRFbGVtZW50KCk7XHJcblxyXG4gICAgLyrmo4DmtYvnvZHlnYDnmoTovpPlhaXplJnor6/ml7bvvIzmt7vliqDmloflrZfmj5DphpIqL1xyXG4gICAgJCgnI3NraXBfdGFyZ2V0X2lucHV0LmZvcm0tY29udHJvbCcpLmJpbmQoJ2lucHV0IHByb3BlcnR5Y2hhbmdlJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIGlucHV0X2FkZHJlc3MgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInNraXBfdGFyZ2V0X2lucHV0XCIpLnZhbHVlO1xyXG4gICAgICAgIGlmIChpbnB1dF9hZGRyZXNzID09ICcnIHx8ICFpbnB1dF9hZGRyZXNzLmluZGV4T2YoXCJodHRwOi8vXCIpIHx8ICFpbnB1dF9hZGRyZXNzLmluZGV4T2YoXCJodHRwczovL1wiKSkge1xyXG4gICAgICAgICAgICAvLyDnvZHlnYDmraPnoa5cclxuICAgICAgICAgICAgJCgnLmh0dHBfZXJyb3JfdGlwJykuYWRkQ2xhc3MoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgICAkKFwiLm1vZGFsLWZvb3RlclwiKS5jc3Moe1wibWFyZ2luXCI6XCI0NXB4IDE1cHggMFwifSkuY3NzKHtcInBhZGRpbmdcIjpcIjMwcHggMHB4XCJ9KTtcclxuICAgICAgICAgICAgJGlzX2FkZHJlc3NfcmlnaHQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIOe9keWdgOmUmeivr1xyXG4gICAgICAgICAgICAkKCcuaHR0cF9lcnJvcl90aXAnKS5yZW1vdmVDbGFzcyhcImhpZGVcIik7XHJcbiAgICAgICAgICAgICQoXCIubW9kYWwtZm9vdGVyXCIpLmNzcyh7XCJtYXJnaW5cIjpcIjAgMTVweCAwXCJ9KS5jc3Moe1wicGFkZGluZ1wiOlwiMTVweCAwIDAgMzBweFwifSk7XHJcbiAgICAgICAgICAgICRpc19hZGRyZXNzX3JpZ2h0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy/lj5Hmtojmga9cclxuICAgICQoXCIjY3VzdG9tZXJNc2dcIikuY2xpY2soZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIHZhciBhcHBJZCA9IGdldFVybFBhcmFtKFwiYXBwSWRcIik7XHJcbiAgICAgICAgdmFyIHVzZXJJZCA9IGdldFVybFBhcmFtKFwidXNlcklkXCIpO1xyXG4gICAgICAgICQoXCIjU21zTW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG5cclxuICAgICAgICAvLyAg5bCG6ZO+5o6l57G75Z6L6K6+572u5Li6IOWklumDqOmTvuaOpVxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlua190eXBlX3NlbGVjdG9yXCIpWzBdLnNlbGVjdGVkPXRydWU7XHJcbiAgICAgICAgLy8gIOWwhuWPs+S+p+iuvue9ruS4uui+k+WFpeahhlxyXG4gICAgICAgICQoJyNza2lwX3RhcmdldF9zZWxlY3RvcicpLmVtcHR5KCk7XHJcbiAgICAgICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAkKCcjc2tpcF90YXJnZXRfaW5wdXQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG5cclxuICAgICAgICAvL+ehruiupOaMiemSrueCueWHu1xyXG4gICAgICAgICQoXCIubW9kYWwtZm9vdGVyXCIpLmNoaWxkcmVuKFwiYnV0dG9uXCIpLmVxKDApLnVuYmluZChcImNsaWNrXCIpLmJpbmQoXCJjbGlja1wiICwgZnVuY3Rpb24gKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciBuaWNrbmFtZT0kKFwiI3Ntc19uaWNrbmFtZVwiKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIGNvbnRlbnQ9JChcIiNzbXNfY29udGVudFwiKS52YWwoKTtcclxuICAgICAgICAgICAgaWYobmlja25hbWUubGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy53eGMueGNDb25maXJtKCfkurLvvIzov5jmnKrovpPlhaXlj5HpgIHkurrmmLXnp7Dlk6Z+JywnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihjb250ZW50Lmxlbmd0aCA9PSAwKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cud3hjLnhjQ29uZmlybSgn5Lqy77yM6L+Y5pyq6L6T5YWl5raI5oGv5YaF5a655ZOmficsJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCEkaXNfYWRkcmVzc19yaWdodCkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93Lnd4Yy54Y0NvbmZpcm0oJ+S6su+8jOWklumDqOmTvuaOpei+k+WFpeaciemXrumimOWTpn4nLCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKFwiI1Ntc01vZGFsXCIpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIHNob3dMb2FkaW5nKCk7XHJcblxyXG4gICAgICAgICAgICAvLyAg6I635Y+W6ZO+5o6l5ZCN56ewK+mTvuaOpeWcsOWdgCjmoLnmja7nsbvlnovnoa7lrpopXHJcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7fTtcclxuICAgICAgICAgICAgdmFyIHNraXBfdHlwZSA9ICQoJyNsaW5rX3R5cGVfc2VsZWN0b3InKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChza2lwX3R5cGUgPT0gXCJhdWRpb1wiKSB7XHJcbiAgICAgICAgICAgICAgICBza2lwX3R5cGUgPSAyO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNraXBfdHlwZSA9PSBcInZpZGVvXCIpIHtcclxuICAgICAgICAgICAgICAgIHNraXBfdHlwZSA9IDM7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2tpcF90eXBlID09IFwiaW1hZ2VfdGV4dFwiKSB7XHJcbiAgICAgICAgICAgICAgICBza2lwX3R5cGUgPSAxO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHNraXBfdHlwZSA9PSBcInBhY2thZ2VcIikge1xyXG4gICAgICAgICAgICAgICAgc2tpcF90eXBlID0gNjtcclxuICAgICAgICAgICAgfWVsc2UgaWYgKHNraXBfdHlwZSA9PSBcImg1XCIpIHtcclxuICAgICAgICAgICAgICAgIHNraXBfdHlwZSA9IDU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBza2lwX3R5cGUgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHBhcmFtc1snc2tpcF90eXBlJ10gPSBza2lwX3R5cGU7XHJcblxyXG4gICAgICAgICAgICBpZiAoc2tpcF90eXBlID09IDUpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtc1snc2tpcF90YXJnZXQnXSA9ICQoJyNza2lwX3RhcmdldF9pbnB1dCcpLnZhbCgpLnRyaW0oKTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChza2lwX3R5cGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zWydza2lwX3RhcmdldCddID0gJyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ3NraXBfdGFyZ2V0J10gPSAkKCcjc2tpcF90YXJnZXRfc2VsZWN0b3InKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHNraXBfdHlwZSA9PSAyIHx8IHNraXBfdHlwZSA9PSAzIHx8IHNraXBfdHlwZSA9PSAxIHx8IHNraXBfdHlwZSA9PTYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChwYXJhbXNbJ3NraXBfdGFyZ2V0J10gPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLor7fpgInmi6not7PovazotYTmupDpk77mjqUhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc2tpcF90eXBlICE9IDApIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtc1snc2tpcF90aXRsZSddID0gJCgnI2xpbmtfbmFtZScpLnZhbCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zWydza2lwX3RpdGxlJ10gPSAnJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJC5wb3N0KFwiL2N1c3RvbWVybXNnXCIse1wiYXBwSWRcIjphcHBJZCxcInVzZXJJZFwiOnVzZXJJZCxcIm5pY2tuYW1lXCI6bmlja25hbWUsXCJjb250ZW50XCI6Y29udGVudCxcInBhcmFtc1wiOnBhcmFtc30sZnVuY3Rpb24oZGF0YSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEucmV0PT0wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vd2luZG93Lnd4Yy54Y0NvbmZpcm0oXCLlj5HpgIHmiJDlip9cIixcInN1Y2Nlc3NcIix7b25PazpmdW5jdGlvbigpXHJcbiAgICAgICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vfX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLlj5HpgIHmiJDlip8hXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy53eGMueGNDb25maXJtKFwi57O757uf57mB5b+Z77yM6K+356iN5ZCO5YaN6K+VIVwiLFwiZXJyb3JcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gaW5pdE1zZ01vZGVsKCkge1xyXG5cclxuICAgICQoJy5tb2RlbF90eXBlJykub24oXCJjbGlja1wiLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcubW9kZWxfdHlwZScpLnJlbW92ZUNsYXNzKCdib3JkZXJfYmx1ZScpO1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2JvcmRlcl9ibHVlJyk7XHJcbiAgICAgICAgJCgnI3Ntc19uaWNrbmFtZScpLnZhbCgkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKTtcclxuICAgICAgICAkKCcjc21zX2NvbnRlbnQnKS52YWwoJCh0aGlzKS5hdHRyKCdkYXRhLWNvbnRlbnQnKSk7XHJcbiAgICAgICAgaWYoJCgnI2NhbmNlbF9tb2RlbCcpLmhhc0NsYXNzKCdib3JkZXJfYmx1ZScpKXtcclxuICAgICAgICAgICAgJCgnLmVkaXRfbW9kZWwnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCcubW9kZWxfdHlwZScpLnJlbW92ZUNsYXNzKCdib3JkZXJfYmx1ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtb2RlbF9pZCA9ICQodGhpcykuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHNtc19uYW1lID0gJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKTtcclxuICAgICAgICBzbXNfY29udGVudCA9ICQodGhpcykuYXR0cignZGF0YS1jb250ZW50Jyk7XHJcbiAgICB9KVxyXG5cclxuICAgICQoJyNzbXNfY29udGVudCcpLmtleXVwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZigkKCcuYm9yZGVyX2JsdWUnKS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAkKCcuZWRpdF9tb2RlbCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI3Ntc19uaWNrbmFtZScpLmtleXVwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZigkKCcuYm9yZGVyX2JsdWUnKS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAkKCcuZWRpdF9tb2RlbCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmVkaXRfbW9kZWwnKS5vbihcImNsaWNrXCIsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5pWw5o2u5bqT5LiN5a2Y5Zyo55u45YWz5qih5p2/XHJcbiAgICAgICAgbW9kZWxfaWQgPSAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgdmFyIG5hbWUgPSAkKCcjc21zX25pY2tuYW1lJykudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQ9ICQoJyNzbXNfY29udGVudCcpLnZhbCgpO1xyXG4gICAgICAgIGlmKG1vZGVsX2lkPT1cIlwiKXtcclxuICAgICAgICAgICAgLy/lkJHlkI7lj7Dmj5LlhaXmqKHmnb9cclxuICAgICAgICAgICAgbW9kZWxfaWQgPSAwO1xyXG4gICAgICAgICAgICBpZihuYW1lIT1cIlwiICYmIGNvbnRlbnQhPVwiXCIpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmlrDlop7mqKHmnb/vvJpcIittb2RlbF9pZCtcIj4+XCIrbmFtZStcIj4+XCIrY29udGVudCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmgqjnmoTlj5HpgIHkurrmmLXnp7Av5YaF5a655Li656m6Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy/mm7TmlrDljp/mnInmqKHmnb9cclxuICAgICAgICAgICAgaWYobmFtZSE9XCJcIiAmJiBjb250ZW50IT1cIlwiKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pu05paw5qih5p2/77yaXCIrbW9kZWxfaWQrXCI+PlwiK25hbWUrXCI+PlwiK2NvbnRlbnQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5oKo55qE5Y+R6YCB5Lq65pi156ewL+WGheWuueS4uuepuicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG5hbWUgPT0gc21zX25hbWUgJiYgY29udGVudCA9PSBzbXNfY29udGVudCl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5oKo5rKh5pyJ5YGa5Lu75L2V5qih5p2/5L+u5pS5Jyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBcIi9tb2RlbGNoYW5nZVwiO1xyXG4gICAgICAgICAgICAkLnBvc3QodXJsLCB7J21vZGVsX2lkJzogbW9kZWxfaWQsJ3NlbmRfbmlja19uYW1lJzpuYW1lLCdjb250ZW50Jzpjb250ZW50fSxmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHZhciBSZUNvZGUgPSByZXN1bHQuY29kZTtcclxuICAgICAgICAgICAgICAgIHZhciBpbmZvID0gcmVzdWx0Lm1zZztcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoaW5mbyk7XHJcbiAgICAgICAgICAgICAgICBpZihSZUNvZGU9PTApeyAvL+aWsOW7uuaooeadv+aIkOWKnyDlubborr7nva7lvZPliY3mnIDmlrDmj5LlhaXnmoTmuKDpgZNpZFxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5ib3JkZXJfYmx1ZScpLmF0dHIoJ2RhdGEtaWQnLHJlc3VsdC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJvcmRlcl9ibHVlJykuYXR0cignZGF0YS1uYW1lJyxuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLWNvbnRlbnQnLGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKFJlQ29kZT09MSl7IC8v6ZSZ6K+vXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmVycm9yTXNnKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKFJlQ29kZT09Mil7IC8v5pu05paw5qih5p2/5oiQ5YqfXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJvcmRlcl9ibHVlJykuYXR0cignZGF0YS1uYW1lJyxuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLWNvbnRlbnQnLGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLy/liKTmlq3mmK/lkKbpnIDopoHliLfmlrBcclxuZnVuY3Rpb24gcmVmcmVzaCgpIHtcclxuICAgICQoXCIjU21zTW9kYWxcIikub24oJ2hpZGUuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/liKTmlq3mmK/lkKbpnIDopoHliLfmlrDnlYzpnaJcclxuICAgICAgICBpZiAobmVlZFJlZnJlc2gpIHtcclxuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7IC8v6YeN5paw5Yqg6L296aG16Z2iXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGJpbmRFbGVtZW50KCkge1xyXG4gICAgJChcIiNsaW5rX3R5cGVfc2VsZWN0b3JcIikub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIHZhciB0eXBlID0gJCh0aGlzKS5maW5kKCdvcHRpb246c2VsZWN0ZWQnKS52YWwoKTtcclxuXHJcbiAgICAgICAgaWYgKHR5cGUgPT0gJ2g1Jykge1xyXG4gICAgICAgICAgICAkKCcjc2tpcF90YXJnZXRfc2VsZWN0b3InKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAkKCcjc2tpcF90YXJnZXRfc2VsZWN0b3InKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCcjc2tpcF90YXJnZXRfaW5wdXQnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlID09ICdub19qdW1wJykge1xyXG4gICAgICAgICAgICAkKCcjc2tpcF90YXJnZXRfc2VsZWN0b3InKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICAkKCcjc2tpcF90YXJnZXRfc2VsZWN0b3InKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCcjc2tpcF90YXJnZXRfaW5wdXQnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykuZW1wdHkoKTtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X2lucHV0JykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQuZ2V0KCcvYmFubmVyL2dldFJlc291cmNlTGlzdD90eXBlPScgKyB0eXBlICwgZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAkKCcjc2tpcF90YXJnZXRfc2VsZWN0b3InKS5lbXB0eSgpO1xyXG4gICAgICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKHJlc3VsdCk7XHJcblxyXG4gICAgICAgICAgICB2YXIgY291bnQgPSByZXN1bHQubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgdmFyIGh0bWxTdHIgPSBcIlwiO1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb3VudDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBodG1sU3RyKz1cIjxvcHRpb24gdmFsdWU9J1wiK3Jlc3VsdFtpXS5pZCtcIic+XCIrcmVzdWx0W2ldLnRpdGxlK1wiPC9vcHRpb24+XCI7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykuYXBwZW5kKGh0bWxTdHIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSk7XHJcbn1cclxuIl19
