$(document).ready(function(){rechargePage.init()});var rechargePage={lastPrice:-1,init:function(){rechargePage.checkInputPrice();$(document).keypress(function(e){if(e.which==13){rechargePage.checkInputPrice()}});$("#money").on("keyup",function(){rechargePage.checkInputPrice()});$("#money").on("blur",function(){rechargePage.checkInputPrice()});$("#returnAccount").click(function(){window.location.href="/accountview"});$("#continueCharge").click(function(){$(".successWindow").fadeOut(100)});$("#payAgain, #refreshCurrentPage").click(function(){window.location.href=window.location.href})},checkInputPrice:function(){var e=$("#money").val();e=e.replace(/[^\d.]/g,"");e=e.replace(/^\./g,"");e=e.replace(/\.{2,}/g,".");e=e.replace(".","$#$").replace(/\./g,"").replace("$#$",".");e=e.replace(/^0[\d]+/g,"0");e=e.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");e=e.replace(/^(\d{6})(\d+)$/,"$1");$("#money").val(e);if(e==rechargePage.lastPrice){console.log("充值价格没有变化。");return false}rechargePage.lastPrice=e;if(e<100){$("#inputPriceTip").css("color","red");$("#qrCodeScan").hide();$("#qrCodeScanTip").hide();return false}$("#inputPriceTip").css("color","#999999");rechargePage.prePayWeChat(e*100);$("#qrCodeScan").fadeIn(300)},prePayWeChat:function(e){$.ajax("/pre_wechatPay",{type:"POST",dataType:"json",data:{price:e,type:$weiXinPay.TYPE_ACCOUNT_CHARGE},success:function(e){if(e.code==0){$("#qr_code").html("");$weiXinPay.createQR(e.data["code_url"]);$("#qrCodeScanTip").fadeIn(300);clearInterval($weiXinPay.repeatQuery);$weiXinPay.repeatQuery=setInterval($weiXinPay.queryPayResult,1e3,e.data["order_id"])}else{console.log(e.msg);alert("生成二维码失败!")}},error:function(e,c,r){console.log(r);alert("服务器出小差了，请刷新页面再试！")}})}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlY2hhcmdlUGFnZS5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsInJlY2hhcmdlUGFnZSIsImluaXQiLCJsYXN0UHJpY2UiLCJjaGVja0lucHV0UHJpY2UiLCJrZXlwcmVzcyIsImUiLCJ3aGljaCIsIm9uIiwiY2xpY2siLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJmYWRlT3V0IiwidmFsdWUiLCJ2YWwiLCJyZXBsYWNlIiwiY29uc29sZSIsImxvZyIsImNzcyIsImhpZGUiLCJwcmVQYXlXZUNoYXQiLCJmYWRlSW4iLCJpbnB1dFByaWNlIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImRhdGEiLCJwcmljZSIsIiR3ZWlYaW5QYXkiLCJUWVBFX0FDQ09VTlRfQ0hBUkdFIiwic3VjY2VzcyIsInJlc3VsdCIsImNvZGUiLCJodG1sIiwiY3JlYXRlUVIiLCJjbGVhckludGVydmFsIiwicmVwZWF0UXVlcnkiLCJzZXRJbnRlcnZhbCIsInF1ZXJ5UGF5UmVzdWx0IiwibXNnIiwiYWxlcnQiLCJlcnJvciIsInhociIsInN0YXR1cyIsImVyciJdLCJtYXBwaW5ncyI6IkFBSUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FDZEMsYUFBYUMsUUFHakIsSUFBSUQsZUFFQUUsV0FBWSxFQUVaRCxLQUFNLFdBR0ZELGFBQWFHLGlCQUdiTixHQUFFQyxVQUFVTSxTQUFTLFNBQVNDLEdBQzFCLEdBQUlBLEVBQUVDLE9BQVMsR0FBSSxDQUNmTixhQUFhRyxvQkFJckJOLEdBQUUsVUFBVVUsR0FBRyxRQUFTLFdBQ3BCUCxhQUFhRyxtQkFHakJOLEdBQUUsVUFBVVUsR0FBRyxPQUFRLFdBQ25CUCxhQUFhRyxtQkFHakJOLEdBQUUsa0JBQWtCVyxNQUFNLFdBQ3RCQyxPQUFPQyxTQUFTQyxLQUFPLGdCQUczQmQsR0FBRSxtQkFBbUJXLE1BQU0sV0FDdkJYLEVBQUUsa0JBQWtCZSxRQUFRLE1BR2hDZixHQUFFLGtDQUFrQ1csTUFBTSxXQUN0Q0MsT0FBT0MsU0FBU0MsS0FBT0YsT0FBT0MsU0FBU0MsUUFLL0NSLGdCQUFpQixXQUViLEdBQUlVLEdBQVFoQixFQUFFLFVBQVVpQixLQUd4QkQsR0FBUUEsRUFBTUUsUUFBUSxVQUFXLEdBR2pDRixHQUFRQSxFQUFNRSxRQUFRLE9BQVEsR0FHOUJGLEdBQVFBLEVBQU1FLFFBQVEsVUFBVyxJQUNqQ0YsR0FBUUEsRUFBTUUsUUFBUSxJQUFLLE9BQU9BLFFBQVEsTUFBTyxJQUFJQSxRQUFRLE1BQU8sSUFFcEVGLEdBQVFBLEVBQU1FLFFBQVEsV0FBWSxJQUdsQ0YsR0FBUUEsRUFBTUUsUUFBUSx5QkFBMEIsVUFHaERGLEdBQVFBLEVBQU1FLFFBQVEsaUJBQWtCLEtBRXhDbEIsR0FBRSxVQUFVaUIsSUFBSUQsRUFFaEIsSUFBSUEsR0FBU2IsYUFBYUUsVUFBVyxDQUNqQ2MsUUFBUUMsSUFBSSxZQUNaLE9BQU8sT0FFWGpCLGFBQWFFLFVBQVlXLENBRXpCLElBQUlBLEVBQVEsSUFBSyxDQUNiaEIsRUFBRSxrQkFBa0JxQixJQUFJLFFBQVMsTUFDakNyQixHQUFFLGVBQWVzQixNQUNqQnRCLEdBQUUsa0JBQWtCc0IsTUFDcEIsT0FBTyxPQUdYdEIsRUFBRSxrQkFBa0JxQixJQUFJLFFBQVMsVUFDakNsQixjQUFhb0IsYUFBYVAsRUFBUSxJQUNsQ2hCLEdBQUUsZUFBZXdCLE9BQU8sTUFLNUJELGFBQWMsU0FBU0UsR0FFbkJ6QixFQUFFMEIsS0FBSyxrQkFDSEMsS0FBTSxPQUNOQyxTQUFVLE9BQ1ZDLE1BQ0lDLE1BQU9MLEVBQ1BFLEtBQU1JLFdBQVdDLHFCQUVyQkMsUUFBUyxTQUFVQyxHQUNmLEdBQUlBLEVBQU9DLE1BQVEsRUFBRyxDQUNsQm5DLEVBQUUsWUFBWW9DLEtBQUssR0FDbkJMLFlBQVdNLFNBQVNILEVBQU9MLEtBQUssWUFDaEM3QixHQUFFLGtCQUFrQndCLE9BQU8sSUFFM0JjLGVBQWNQLFdBQVdRLFlBQ3pCUixZQUFXUSxZQUFjQyxZQUFZVCxXQUFXVSxlQUFnQixJQUFNUCxFQUFPTCxLQUFLLGlCQUUvRSxDQUNIVixRQUFRQyxJQUFJYyxFQUFPUSxJQUNuQkMsT0FBTSxjQUdkQyxNQUFPLFNBQVVDLEVBQUtDLEVBQVFDLEdBQzFCNUIsUUFBUUMsSUFBSTJCLEVBQ1pKLE9BQU0iLCJmaWxlIjoicmVjaGFyZ2VQYWdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgeGlhb2Ugb24gMjAxNy8yLzIyLlxyXG4gKi9cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgIHJlY2hhcmdlUGFnZS5pbml0KCk7XHJcbn0pO1xyXG5cclxudmFyIHJlY2hhcmdlUGFnZSA9IHtcclxuXHJcbiAgICBsYXN0UHJpY2U6IC0xLFxyXG5cclxuICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy/lhYjpu5jorqTnlJ/miJDkuIDkuKrkuoznu7TnoIFcclxuICAgICAgICByZWNoYXJnZVBhZ2UuY2hlY2tJbnB1dFByaWNlKCk7XHJcblxyXG4gICAgICAgIC8vICDlm57ovabkuovku7ZcclxuICAgICAgICAkKGRvY3VtZW50KS5rZXlwcmVzcyhmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLndoaWNoID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICByZWNoYXJnZVBhZ2UuY2hlY2tJbnB1dFByaWNlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIiNtb25leVwiKS5vbihcImtleXVwXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmVjaGFyZ2VQYWdlLmNoZWNrSW5wdXRQcmljZSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKFwiI21vbmV5XCIpLm9uKFwiYmx1clwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlY2hhcmdlUGFnZS5jaGVja0lucHV0UHJpY2UoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIiNyZXR1cm5BY2NvdW50XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9hY2NvdW50dmlld1wiO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKFwiI2NvbnRpbnVlQ2hhcmdlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJChcIi5zdWNjZXNzV2luZG93XCIpLmZhZGVPdXQoMTAwKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIiNwYXlBZ2FpbiwgI3JlZnJlc2hDdXJyZW50UGFnZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gd2luZG93LmxvY2F0aW9uLmhyZWY7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuXHJcbiAgICBjaGVja0lucHV0UHJpY2U6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyIHZhbHVlID0gJChcIiNtb25leVwiKS52YWwoKTtcclxuXHJcbiAgICAgICAgLy/muIXpmaRcIuaVsOWtl1wi5ZKMXCIuXCLku6XlpJbnmoTlrZfnrKZcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1teXFxkLl0vZywgXCJcIik7XHJcblxyXG4gICAgICAgIC8v6aqM6K+B56ys5LiA5Liq5a2X56ym5piv5pWw5a2X6ICM5LiN5pivLlxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXlxcLi9nLCBcIlwiKTtcclxuXHJcbiAgICAgICAgLy/lj6rkv53nlZnnrKzkuIDkuKouIOa4hemZpOWkmuS9meeahFxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXFwuezIsfS9nLCBcIi5cIik7XHJcbiAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKFwiLlwiLCBcIiQjJFwiKS5yZXBsYWNlKC9cXC4vZywgXCJcIikucmVwbGFjZShcIiQjJFwiLCBcIi5cIik7XHJcblxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXjBbXFxkXSsvZywgXCIwXCIpO1xyXG5cclxuICAgICAgICAvL+WPquiDvei+k+WFpeS4pOS4quWwj+aVsFxyXG4gICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXihcXC0pKihcXGQrKVxcLihcXGRcXGQpLiokLywgJyQxJDIuJDMnKTtcclxuXHJcbiAgICAgICAgLy8gIOWFheWAvOacgOWkp+WAvCAtIDk5OSw5OTlcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL14oXFxkezZ9KShcXGQrKSQvLCAnJDEnKTtcclxuXHJcbiAgICAgICAgJChcIiNtb25leVwiKS52YWwodmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgPT0gcmVjaGFyZ2VQYWdlLmxhc3RQcmljZSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWFheWAvOS7t+agvOayoeacieWPmOWMluOAglwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZWNoYXJnZVBhZ2UubGFzdFByaWNlID0gdmFsdWU7XHJcblxyXG4gICAgICAgIGlmICh2YWx1ZSA8IDEwMCkge1xyXG4gICAgICAgICAgICAkKFwiI2lucHV0UHJpY2VUaXBcIikuY3NzKFwiY29sb3JcIiwgXCJyZWRcIik7XHJcbiAgICAgICAgICAgICQoXCIjcXJDb2RlU2NhblwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICQoXCIjcXJDb2RlU2NhblRpcFwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgICQoXCIjaW5wdXRQcmljZVRpcFwiKS5jc3MoXCJjb2xvclwiLCBcIiM5OTk5OTlcIik7XHJcbiAgICAgICAgcmVjaGFyZ2VQYWdlLnByZVBheVdlQ2hhdCh2YWx1ZSAqIDEwMCk7XHJcbiAgICAgICAgJChcIiNxckNvZGVTY2FuXCIpLmZhZGVJbigzMDApO1xyXG5cclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHByZVBheVdlQ2hhdDogZnVuY3Rpb24oaW5wdXRQcmljZSkge1xyXG5cclxuICAgICAgICAkLmFqYXgoXCIvcHJlX3dlY2hhdFBheVwiLCB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHByaWNlOiBpbnB1dFByaWNlLFxyXG4gICAgICAgICAgICAgICAgdHlwZTogJHdlaVhpblBheS5UWVBFX0FDQ09VTlRfQ0hBUkdFXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNxcl9jb2RlXCIpLmh0bWwoXCJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJHdlaVhpblBheS5jcmVhdGVRUihyZXN1bHQuZGF0YVsnY29kZV91cmwnXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNxckNvZGVTY2FuVGlwXCIpLmZhZGVJbigzMDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKCR3ZWlYaW5QYXkucmVwZWF0UXVlcnkpO1xyXG4gICAgICAgICAgICAgICAgICAgICR3ZWlYaW5QYXkucmVwZWF0UXVlcnkgPSBzZXRJbnRlcnZhbCgkd2VpWGluUGF5LnF1ZXJ5UGF5UmVzdWx0LCAxMDAwLCByZXN1bHQuZGF0YVsnb3JkZXJfaWQnXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIueUn+aIkOS6jOe7tOeggeWksei0pSFcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwi5pyN5Yqh5Zmo5Ye65bCP5beu5LqG77yM6K+35Yi35paw6aG16Z2i5YaN6K+V77yBXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuXHJcbn07XHJcblxyXG4iXX0=
