(function(a){var t=a(document).data("func",{});a.smartMenu=a.noop;a.fn.smartMenu=function(e,i){var n=a("body"),r={name:"",offsetX:2,offsetY:2,textLimit:6,beforeShow:a.noop,afterShow:a.noop};var s=a.extend(r,i||{});var o=function(i){var n=i||e,r=i?Math.random().toString():s.name,c="",l="",f="smart_menu_";if(a.isArray(n)&&n.length){c='<div id="smartMenu_'+r+'" class="'+f+'box">'+'<div class="'+f+'body">'+'<ul class="'+f+'ul">';a.each(n,function(e,i){if(e){c=c+'<li class="'+f+'li_separate">&nbsp;</li>'}if(a.isArray(i)){a.each(i,function(e,i){var n=i.text,r="",l="",d=Math.random().toString().replace(".","");if(n){if(n.length>s.textLimit){n=n.slice(0,s.textLimit)+"â€¦";l=' title="'+i.text+'"'}if(a.isArray(i.data)&&i.data.length){r='<li class="'+f+'li" data-hover="true">'+o(i.data)+'<a href="javascript:" class="'+f+'a"'+l+' data-key="'+d+'"><i class="'+f+'triangle"></i>'+n+"</a>"+"</li>"}else{r='<li class="'+f+'li">'+'<a href="javascript:" class="'+f+'a"'+l+' data-key="'+d+'">'+n+"</a>"+"</li>"}c+=r;var u=t.data("func");u[d]=i.func;t.data("func",u)}})}});c=c+"</ul>"+"</div>"+"</div>"}return c},c=function(){var e="#smartMenu_",i="smart_menu_",n=a(e+s.name);if(!n.size()){a("body").append(o());a(e+s.name+" a").bind("click",function(){var e=a(this).attr("data-key"),i=t.data("func")[e];if(a.isFunction(i)){i.call(t.data("trigger"))}a.smartMenu.hide();return false});a(e+s.name+" li").each(function(){var t=a(this).attr("data-hover"),e=i+"li_hover";a(this).hover(function(){var n=a(this).siblings("."+e);n.removeClass(e).children("."+i+"box").hide();n.children("."+i+"a").removeClass(i+"a_hover");if(t){a(this).addClass(e).children("."+i+"box").show();a(this).children("."+i+"a").addClass(i+"a_hover")}})});return a(e+s.name)}return n};a(this).each(function(){this.oncontextmenu=function(e){if(a.isFunction(s.beforeShow)){s.beforeShow.call(this)}e=e||window.event;e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}a.smartMenu.hide();var i=t.scrollTop();var n=c();if(n){n.css({display:"block",left:e.clientX+s.offsetX,top:e.clientY+i+s.offsetY});t.data("target",n);t.data("trigger",this);if(a.isFunction(s.afterShow)){s.afterShow.call(this)}return false}}});if(!n.data("bind")){n.bind("click",a.smartMenu.hide).data("bind",true)}};a.extend(a.smartMenu,{hide:function(){var a=t.data("target");if(a&&a.css("display")==="block"){a.hide()}},removeevent:function(e){var i=t.data("target");if(i){i.remove();if(a.isFunction(e)){e.call(this)}}},remove:function(){var a=t.data("target");if(a){a.remove()}}})})(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4dGVybmFsL2pxdWVyeS1zbWFydE1lbnUuanMiXSwibmFtZXMiOlsiJCIsIkQiLCJkb2N1bWVudCIsImRhdGEiLCJzbWFydE1lbnUiLCJub29wIiwiZm4iLCJvcHRpb25zIiwiQiIsImRlZmF1bHRzIiwibmFtZSIsIm9mZnNldFgiLCJvZmZzZXRZIiwidGV4dExpbWl0IiwiYmVmb3JlU2hvdyIsImFmdGVyU2hvdyIsInBhcmFtcyIsImV4dGVuZCIsImh0bWxDcmVhdGVNZW51IiwiZGF0dW0iLCJkYXRhTWVudSIsIm5hbWVNZW51IiwiTWF0aCIsInJhbmRvbSIsInRvU3RyaW5nIiwiaHRtbE1lbnUiLCJodG1sQ29ybmVyIiwiY2xLZXkiLCJpc0FycmF5IiwibGVuZ3RoIiwiZWFjaCIsImkiLCJhcnIiLCJqIiwib2JqIiwidGV4dCIsImh0bWxNZW51TGkiLCJzdHJUaXRsZSIsInJhbmQiLCJyZXBsYWNlIiwic2xpY2UiLCJvYmpGdW5jIiwiZnVuYyIsImZ1blNtYXJ0TWVudSIsImlkS2V5IiwianF1ZXJ5TWVudSIsInNpemUiLCJhcHBlbmQiLCJiaW5kIiwia2V5IiwidGhpcyIsImF0dHIiLCJjYWxsYmFjayIsImlzRnVuY3Rpb24iLCJjYWxsIiwiaGlkZSIsImlzSG92ZXIiLCJjbEhvdmVyIiwiaG92ZXIiLCJqcXVlcnlIb3ZlciIsInNpYmxpbmdzIiwicmVtb3ZlQ2xhc3MiLCJjaGlsZHJlbiIsImFkZENsYXNzIiwic2hvdyIsIm9uY29udGV4dG1lbnUiLCJlIiwid2luZG93IiwiZXZlbnQiLCJjYW5jZWxCdWJibGUiLCJzdG9wUHJvcGFnYXRpb24iLCJzdCIsInNjcm9sbFRvcCIsImNzcyIsImRpc3BsYXkiLCJsZWZ0IiwiY2xpZW50WCIsInRvcCIsImNsaWVudFkiLCJ0YXJnZXQiLCJyZW1vdmVldmVudCIsInJlbW92ZSIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBWUEsU0FBVUEsR0FDVCxHQUFJQyxHQUFJRCxFQUFFRSxVQUFVQyxLQUFLLFVBQ3pC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U0FBVVosR0FDbkIsR0FBSVcsR0FBUzlFLEVBQUVFLEtBQUssU0FDcEIsSUFBSTRFLEVBQVEsQ0FDUkEsRUFBT0UsUUFDUCxJQUFJakYsRUFBRXFELFdBQVdlLEdBQVEsQ0FDckJBLEVBQU1kLEtBQUtKLFNBSXZCK0IsT0FBUSxXQUNQLEdBQUlGLEdBQVM5RSxFQUFFRSxLQUFLLFNBQ3BCLElBQUk0RSxFQUFRLENBQ1hBLEVBQU9FLGVBSVJDIiwiZmlsZSI6ImV4dGVybmFsL2pxdWVyeS1zbWFydE1lbnUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBzbWFydE1lbnUuanMg5pm66IO95LiK5LiL5paH6I+c5Y2V5o+S5Lu2XHJcbiAqIGh0dHA6Ly93d3cuemhhbmd4aW54dS5jb20vXHJcbiAqXHJcbiAqIENvcHlyaWdodCAyMDExLCB6aGFuZ3hpbnh1XHJcbiAqXHJcbiAqIDIwMTEtMDUtMjYgdjEuMFx057yW5YaZXHJcbiAqIDIwMTEtMDYtMDMgdjEuMVx05L+u5aSNZnVuY+S4rXRoaXPlpLHlh4bpl67pophcclxuICogMjAxMS0xMC0xMCB2MS4yICDkv67lpI3ohJrmnKzmlL7lnKg8aGVhZD7moIfnrb7kuK3lsYLml6Dms5XpmpDol4/nmoTpl67pophcclxuICogMjAxMS0xMC0zMCB2MS4zICDkv67lpI1JRTZ+N+S4i+S6jOe6p+iPnOWNleenu+WIsOesrOS6jOmhuemakOiXj+eahOmXrumimFxyXG4gKi9cclxuIFxyXG4oZnVuY3Rpb24oJCkge1xyXG5cdHZhciBEID0gJChkb2N1bWVudCkuZGF0YShcImZ1bmNcIiwge30pO1x0XHJcblx0JC5zbWFydE1lbnUgPSAkLm5vb3A7XHJcblx0JC5mbi5zbWFydE1lbnUgPSBmdW5jdGlvbihkYXRhLCBvcHRpb25zKSB7XHJcblx0XHR2YXIgQiA9ICQoXCJib2R5XCIpLCBkZWZhdWx0cyA9IHtcclxuXHRcdFx0bmFtZTogXCJcIixcclxuXHRcdFx0b2Zmc2V0WDogMixcclxuXHRcdFx0b2Zmc2V0WTogMixcclxuXHRcdFx0dGV4dExpbWl0OiA2LFxyXG5cdFx0XHRiZWZvcmVTaG93OiAkLm5vb3AsXHJcblx0XHRcdGFmdGVyU2hvdzogJC5ub29wXHJcblx0XHR9O1xyXG5cdFx0dmFyIHBhcmFtcyA9ICQuZXh0ZW5kKGRlZmF1bHRzLCBvcHRpb25zIHx8IHt9KTtcclxuXHRcdFxyXG5cdFx0dmFyIGh0bWxDcmVhdGVNZW51ID0gZnVuY3Rpb24oZGF0dW0pIHtcclxuXHRcdFx0dmFyIGRhdGFNZW51ID0gZGF0dW0gfHwgZGF0YSwgbmFtZU1lbnUgPSBkYXR1bT8gTWF0aC5yYW5kb20oKS50b1N0cmluZygpOiBwYXJhbXMubmFtZSwgaHRtbE1lbnUgPSBcIlwiLCBodG1sQ29ybmVyID0gXCJcIiwgY2xLZXkgPSBcInNtYXJ0X21lbnVfXCI7XHJcblx0XHRcdGlmICgkLmlzQXJyYXkoZGF0YU1lbnUpICYmIGRhdGFNZW51Lmxlbmd0aCkge1xyXG5cdFx0XHRcdGh0bWxNZW51ID0gJzxkaXYgaWQ9XCJzbWFydE1lbnVfJysgbmFtZU1lbnUgKydcIiBjbGFzcz1cIicrIGNsS2V5ICsnYm94XCI+JyArXHJcblx0XHRcdFx0XHRcdFx0XHQnPGRpdiBjbGFzcz1cIicrIGNsS2V5ICsnYm9keVwiPicgK1xyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPHVsIGNsYXNzPVwiJysgY2xLZXkgKyd1bFwiPic7XHJcblx0XHRcdFx0XHRcdFx0XHRcdFxyXG5cdFx0XHRcdCQuZWFjaChkYXRhTWVudSwgZnVuY3Rpb24oaSwgYXJyKSB7XHJcblx0XHRcdFx0XHRpZiAoaSkge1xyXG5cdFx0XHRcdFx0XHRodG1sTWVudSA9IGh0bWxNZW51ICsgJzxsaSBjbGFzcz1cIicrIGNsS2V5ICsnbGlfc2VwYXJhdGVcIj4mbmJzcDs8L2xpPic7XHRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdGlmICgkLmlzQXJyYXkoYXJyKSkge1xyXG5cdFx0XHRcdFx0XHQkLmVhY2goYXJyLCBmdW5jdGlvbihqLCBvYmopIHtcclxuXHRcdFx0XHRcdFx0XHR2YXIgdGV4dCA9IG9iai50ZXh0LCBodG1sTWVudUxpID0gXCJcIiwgc3RyVGl0bGUgPSBcIlwiLCByYW5kID0gTWF0aC5yYW5kb20oKS50b1N0cmluZygpLnJlcGxhY2UoXCIuXCIsIFwiXCIpO1xyXG5cdFx0XHRcdFx0XHRcdGlmICh0ZXh0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRpZiAodGV4dC5sZW5ndGggPiBwYXJhbXMudGV4dExpbWl0KSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHRleHQgPSB0ZXh0LnNsaWNlKDAsIHBhcmFtcy50ZXh0TGltaXQpXHQrIFwi4oCmXCI7XHJcblx0XHRcdFx0XHRcdFx0XHRcdHN0clRpdGxlID0gJyB0aXRsZT1cIicrIG9iai50ZXh0ICsnXCInO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCQuaXNBcnJheShvYmouZGF0YSkgJiYgb2JqLmRhdGEubGVuZ3RoKSB7XHJcblx0XHRcdFx0XHRcdFx0XHRcdGh0bWxNZW51TGkgPSAnPGxpIGNsYXNzPVwiJysgY2xLZXkgKydsaVwiIGRhdGEtaG92ZXI9XCJ0cnVlXCI+JyArIGh0bWxDcmVhdGVNZW51KG9iai5kYXRhKSArXHJcblx0XHRcdFx0XHRcdFx0XHRcdFx0JzxhIGhyZWY9XCJqYXZhc2NyaXB0OlwiIGNsYXNzPVwiJysgY2xLZXkgKydhXCInKyBzdHJUaXRsZSArJyBkYXRhLWtleT1cIicrIHJhbmQgKydcIj48aSBjbGFzcz1cIicrIGNsS2V5ICsndHJpYW5nbGVcIj48L2k+JysgdGV4dCArJzwvYT4nICsgXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8L2xpPic7XHJcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0XHRcdFx0XHRodG1sTWVudUxpID0gJzxsaSBjbGFzcz1cIicrIGNsS2V5ICsnbGlcIj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdFx0XHQnPGEgaHJlZj1cImphdmFzY3JpcHQ6XCIgY2xhc3M9XCInKyBjbEtleSArJ2FcIicrIHN0clRpdGxlICsnIGRhdGEta2V5PVwiJysgcmFuZCArJ1wiPicrIHRleHQgKyc8L2E+JyArIFxyXG5cdFx0XHRcdFx0XHRcdFx0XHQnPC9saT4nO1xyXG5cdFx0XHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHRodG1sTWVudSArPSBodG1sTWVudUxpO1xyXG5cdFx0XHRcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0XHR2YXIgb2JqRnVuYyA9IEQuZGF0YShcImZ1bmNcIik7XHJcblx0XHRcdFx0XHRcdFx0XHRvYmpGdW5jW3JhbmRdID0gb2JqLmZ1bmM7XHJcblx0XHRcdFx0XHRcdFx0XHRELmRhdGEoXCJmdW5jXCIsIG9iakZ1bmMpO1xyXG5cdFx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdFx0fSk7XHRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRodG1sTWVudSA9IGh0bWxNZW51ICsgJzwvdWw+JyArXHJcblx0XHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nICtcclxuXHRcdFx0XHRcdFx0XHRcdCc8L2Rpdj4nO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBodG1sTWVudTtcclxuXHRcdH0sIGZ1blNtYXJ0TWVudSA9IGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR2YXIgaWRLZXkgPSBcIiNzbWFydE1lbnVfXCIsIGNsS2V5ID0gXCJzbWFydF9tZW51X1wiLCBqcXVlcnlNZW51ID0gJChpZEtleSArIHBhcmFtcy5uYW1lKTtcclxuXHRcdFx0aWYgKCFqcXVlcnlNZW51LnNpemUoKSkge1xyXG5cdFx0XHRcdCQoXCJib2R5XCIpLmFwcGVuZChodG1sQ3JlYXRlTWVudSgpKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvL+S6i+S7tlxyXG5cdFx0XHRcdCQoaWRLZXkgKyBwYXJhbXMubmFtZSArXCIgYVwiKS5iaW5kKFwiY2xpY2tcIiwgZnVuY3Rpb24oKSB7XHJcblx0XHRcdFx0XHR2YXIga2V5ID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1rZXlcIiksXHJcblx0XHRcdFx0XHRcdGNhbGxiYWNrID0gRC5kYXRhKFwiZnVuY1wiKVtrZXldO1xyXG5cdFx0XHRcdFx0aWYgKCQuaXNGdW5jdGlvbihjYWxsYmFjaykpIHtcclxuXHRcdFx0XHRcdFx0Y2FsbGJhY2suY2FsbChELmRhdGEoXCJ0cmlnZ2VyXCIpKTtcdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0JC5zbWFydE1lbnUuaGlkZSgpO1xyXG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdCQoaWRLZXkgKyBwYXJhbXMubmFtZSArXCIgbGlcIikuZWFjaChmdW5jdGlvbigpIHtcclxuXHRcdFx0XHRcdHZhciBpc0hvdmVyID0gJCh0aGlzKS5hdHRyKFwiZGF0YS1ob3ZlclwiKSwgY2xIb3ZlciA9IGNsS2V5ICsgXCJsaV9ob3ZlclwiO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0XHQkKHRoaXMpLmhvdmVyKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdFx0XHR2YXIganF1ZXJ5SG92ZXIgPSAkKHRoaXMpLnNpYmxpbmdzKFwiLlwiICsgY2xIb3Zlcik7XHJcblx0XHRcdFx0XHRcdGpxdWVyeUhvdmVyLnJlbW92ZUNsYXNzKGNsSG92ZXIpLmNoaWxkcmVuKFwiLlwiKyBjbEtleSArXCJib3hcIikuaGlkZSgpO1xyXG5cdFx0XHRcdFx0XHRqcXVlcnlIb3Zlci5jaGlsZHJlbihcIi5cIisgY2xLZXkgK1wiYVwiKS5yZW1vdmVDbGFzcyhjbEtleSArXCJhX2hvdmVyXCIpO1xyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdFx0aWYgKGlzSG92ZXIpIHtcdFx0XHRcdFx0XHJcblx0XHRcdFx0XHRcdFx0JCh0aGlzKS5hZGRDbGFzcyhjbEhvdmVyKS5jaGlsZHJlbihcIi5cIisgY2xLZXkgK1wiYm94XCIpLnNob3coKTtcclxuXHRcdFx0XHRcdFx0XHQkKHRoaXMpLmNoaWxkcmVuKFwiLlwiKyBjbEtleSArXCJhXCIpLmFkZENsYXNzKGNsS2V5ICtcImFfaG92ZXJcIik7XHRcclxuXHRcdFx0XHRcdFx0fVxyXG5cdFx0XHRcdFx0XHRcclxuXHRcdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFx0XHJcblx0XHRcdFx0fSk7XHJcblx0XHRcdFx0cmV0dXJuICQoaWRLZXkgKyBwYXJhbXMubmFtZSk7XHJcblx0XHRcdH0gXHJcblx0XHRcdHJldHVybiBqcXVlcnlNZW51O1xyXG5cdFx0fTtcclxuXHRcdFxyXG5cdFx0JCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHR0aGlzLm9uY29udGV4dG1lbnUgPSBmdW5jdGlvbihlKSB7XHJcblx0XHRcdFx0Ly/lm57osINcclxuXHRcdFx0XHRpZiAoJC5pc0Z1bmN0aW9uKHBhcmFtcy5iZWZvcmVTaG93KSkge1xyXG5cdFx0XHRcdFx0cGFyYW1zLmJlZm9yZVNob3cuY2FsbCh0aGlzKTtcdFxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRlID0gZSB8fCB3aW5kb3cuZXZlbnQ7XHJcblx0XHRcdFx0Ly/pmLvmraLlhpLms6FcclxuXHRcdFx0XHRlLmNhbmNlbEJ1YmJsZSA9IHRydWU7XHJcblx0XHRcdFx0aWYgKGUuc3RvcFByb3BhZ2F0aW9uKSB7XHJcblx0XHRcdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHQvL+makOiXj+W9k+WJjeS4iuS4i+aWh+iPnOWNle+8jOehruS/nemhtemdouS4iuS4gOasoeWPquacieS4gOS4quS4iuS4i+aWh+iPnOWNlVxyXG5cdFx0XHRcdCQuc21hcnRNZW51LmhpZGUoKTtcclxuXHRcdFx0XHR2YXIgc3QgPSBELnNjcm9sbFRvcCgpO1xyXG5cdFx0XHRcdHZhciBqcXVlcnlNZW51ID0gZnVuU21hcnRNZW51KCk7XHJcblx0XHRcdFx0aWYgKGpxdWVyeU1lbnUpIHtcclxuXHRcdFx0XHRcdGpxdWVyeU1lbnUuY3NzKHtcclxuXHRcdFx0XHRcdFx0ZGlzcGxheTogXCJibG9ja1wiLFxyXG5cdFx0XHRcdFx0XHRsZWZ0OiBlLmNsaWVudFggKyBwYXJhbXMub2Zmc2V0WCxcclxuXHRcdFx0XHRcdFx0dG9wOiBlLmNsaWVudFkgKyBzdCArIHBhcmFtcy5vZmZzZXRZXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHRcdEQuZGF0YShcInRhcmdldFwiLCBqcXVlcnlNZW51KTtcclxuXHRcdFx0XHRcdEQuZGF0YShcInRyaWdnZXJcIiwgdGhpcyk7XHJcblx0XHRcdFx0XHQvL+Wbnuiwg1xyXG5cdFx0XHRcdFx0aWYgKCQuaXNGdW5jdGlvbihwYXJhbXMuYWZ0ZXJTaG93KSkge1xyXG5cdFx0XHRcdFx0XHRwYXJhbXMuYWZ0ZXJTaG93LmNhbGwodGhpcyk7XHRcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH07XHJcblx0XHR9KTtcclxuXHRcdGlmICghQi5kYXRhKFwiYmluZFwiKSkge1xyXG5cdFx0XHRCLmJpbmQoXCJjbGlja1wiLCAkLnNtYXJ0TWVudS5oaWRlKS5kYXRhKFwiYmluZFwiLCB0cnVlKTtcclxuXHRcdH1cclxuXHR9O1xyXG5cdCQuZXh0ZW5kKCQuc21hcnRNZW51LCB7XHJcblx0XHRoaWRlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHRhcmdldCA9IEQuZGF0YShcInRhcmdldFwiKTtcclxuXHRcdFx0aWYgKHRhcmdldCAmJiB0YXJnZXQuY3NzKFwiZGlzcGxheVwiKSA9PT0gXCJibG9ja1wiKSB7XHJcblx0XHRcdFx0dGFyZ2V0LmhpZGUoKTtcclxuXHRcdFx0fVx0XHRcclxuXHRcdH0sXHJcblx0XHRyZW1vdmVldmVudDogZnVuY3Rpb24gKGV2ZW50KSB7XHJcblx0XHQgICAgdmFyIHRhcmdldCA9IEQuZGF0YShcInRhcmdldFwiKTtcclxuXHRcdCAgICBpZiAodGFyZ2V0KSB7XHJcblx0XHQgICAgICAgIHRhcmdldC5yZW1vdmUoKTtcclxuXHRcdCAgICAgICAgaWYgKCQuaXNGdW5jdGlvbihldmVudCkpIHtcclxuXHRcdCAgICAgICAgICAgIGV2ZW50LmNhbGwodGhpcyk7XHJcblx0XHQgICAgICAgIH1cclxuXHRcdCAgICB9XHJcblx0XHR9LFxyXG5cdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcclxuXHRcdFx0dmFyIHRhcmdldCA9IEQuZGF0YShcInRhcmdldFwiKTtcclxuXHRcdFx0aWYgKHRhcmdldCkge1xyXG5cdFx0XHRcdHRhcmdldC5yZW1vdmUoKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH0pO1xyXG59KShqUXVlcnkpOyJdfQ==
