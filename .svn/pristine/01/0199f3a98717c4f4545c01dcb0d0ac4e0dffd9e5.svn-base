var newFormFlag=false;$(function(){init();newCoupon()});function newCoupon(){var e=0;var t=0;var a=[];var s;var o;var r;var n;var l=[];var c=0;var d;var u;var p;var h;var f;var v;var m;var b=$.trim($('[name="count"]').val());n="0";m=$(".formContent").data("page_type");var g=GetQueryString("id");console.log(g);if(GetQueryString("type")==0||GetQueryString("type")==1){v=GetQueryString("type");console.log("shang")}else{v=$(".plusArea").attr("data-plus-type");console.log("xia")}$(".addedList .addedItem").each(function(){a.push($(this).data("id"))});console.log(v);aliveTimeConfig(".dateSetInput");+function(){if(v==0){$(".isGoods").attr("style","")}else{$(".isGoods").attr("style","display:none")}$(".remindTop a").on("click",function(){var e="/coupon/close/"+$(this).siblings("span").attr("data-place");$(".remindTop").remove();$.ajax({type:"GET",url:e,data:{},success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg)}else{baseUtils.show.blueTip(e.msg)}},error:function(e,t,a){console.log(e);console.error(a);console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$('[for="useCdn_1"]').on("click",function(){$('[name="re_price"]').removeAttr("disabled").removeAttr("readonly")});$('[for="useCdn_2"]').on("click",function(){$('[name="re_price"]').attr("disabled",true).attr("readonly",true).val("");setCondition()});$(".plusArea").on("click",function(){console.log("plusArea test");$(".initList").html();$('.addBox [type="checkBox"]').removeAttr("checked");$("#addModal").fadeIn(200)});$(".closePop").on("click",function(){$("#addModal").fadeOut(200)});$("div.tab a").on("click",function(){$(this).addClass("clicked").siblings().removeClass("clicked");e=$(this).attr("data-type");console.log(e);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}});$("#forTab").on("click",function(){var t=$("#kwContent").val();$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",data:{state:e,kw:t},success:function(t){$(".initList").html(t);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}},error:function(e,t,a){console.log(e);console.error(a);console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$("input.func").on("click",function(){console.log("teste");$(this).addClass("funcClick").siblings().removeClass("funcClick");console.log($(this).val());if($(this).val()=="用户领取"){$(".aboutGet").show();n="0"}else{$(".aboutGet").hide();$(".aboutGet #putOn").removeAttr("checked");n="1"}});$("#add").on("click",function(){var e=[];var t=[];var s=[];var o=[];$('#tab_0 input[type="checkbox"]:checked').each(function(){e.push($(this).val());var t=[];t.push($(this).attr("data-name"));t.push($(this).attr("data-img"));t.push("单品");t.push($(this).val());t.push($(this).attr("data-style"));o.push(t)});$('#tab_1 input[type="checkbox"]:checked').each(function(){t.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("专栏");e.push($(this).val());e.push($(this).attr("data-style"));o.push(e)});$('#tab_2 input[type="checkbox"]:checked').each(function(){s.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("会员");e.push($(this).val());e.push($(this).attr("data-style"));o.push(e)});console.log(e);var r=e.concat(s,t);console.log(a);if(r==""){baseUtils.show.redTip("请选择要添加的商品。");return false}if(w(a,r)==1){baseUtils.show.redTip("请勿重复选择添加的商品。");return false}else{for(i=0;i<o.length;i++){$(".addedList").append("<div data-tab="+o[i][4]+' class="addedItem" data-id="'+o[i][3]+'"><span>'+o[i][2]+'</span><img src="'+o[i][1]+'" alt="'+o[i][0]+'"><span class="spanCon">'+o[i][0]+'</span><button type="button" class="close closeItem">×</button></div>')}a=a.concat(r);$("#addModal").fadeOut(200)}});$(".addedList").on("click",".closeItem",function(){$(this).prev().prev().click();$(this).parent().remove();var e=$(this).parent().attr("data-id");console.log(e);a.remove(e);console.log(a)});$("#submitList").on("click",function(){if(newFormFlag){return false}newFormFlag=true;l=[];$(".addedItem").each(function(){l.push($(this).attr("data-id")+"--"+$(this).attr("data-tab"))});console.log(l);o=$.trim($('[name="title"]').val());r=Math.round($.trim($('[name="price"]').val())*100);if($("#useCdn_1").prop("checked")){t=1;c=Math.round(parseFloat($('[name="re_price"]').val())*100)||"empty";console.log("使用条件"+c)}else if($("#useCdn_2").prop("checked")){t=0;c=0}console.log("isTen",c);d=$.trim($('[name="valid_at"]').val());u=$.trim($('[name="invalid_at"]').val());p=$.trim($('[name="count"]').val());h=$('[name="receive_rule"]').val();if($('[name="extension"]').prop("checked")){f=1}else{f=0}s={title:o,price:r,receive_rule:h,valid_at:d,invalid_at:u,require_price:c,count:p,spread_type:n,is_show:f,resource:l,type:v};if(g){s.id=g}console.log(s.price);console.log(s.require_price);if(m==0&&k(s,b,t)){_("/coupon/add",s)}else if(m==1&&k(s,b)){console.log("check is ture");_("/coupon/editCoupon",s)}})}();function k(e,t,a){newFormFlag=false;if($formCheck.emptyString(e.title)){baseUtils.show.redTip("优惠券名称不能为空！");console.log(newFormFlag);return false}if($formCheck.emptyString(e.price)){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(parseFloat(e.count)<parseFloat(t)){baseUtils.show.redTip("修改发行量只能增不能减！");return false}if($formCheck.emptyString(e.valid_at)&&$formCheck.emptyString(e.invalid_at)){baseUtils.show.redTip("有效期起止时间不能为空！");return false}if($formCheck.emptyString(e.count)){baseUtils.show.redTip("发行数量不能为空！");return false}if(!$formCheck.checkTime(e.valid_at)){baseUtils.show.redTip("有效期开始时间格式错误");return false}if(!$formCheck.checkTime(e.invalid_at)){baseUtils.show.redTip("有效期结束时间格式错误");return false}if(e.require_price==="empty"){baseUtils.show.redTip("使用条件不能为空！");return false}if(!$formCheck.checkTimeOrder(e.valid_at,e.invalid_at)){baseUtils.show.redTip("有效期结束时间必须大于开始时间！");return false}if(!$formCheck.checkNum(e.price)){baseUtils.show.redTip("您的面额输入格式有误，请重新输入！");return false}if(!$formCheck.checkNum(e.count)){baseUtils.show.redTip("您的发行量输入格式有误，请重新输入！");return false}if(e.require_price==NaN||e.require_price==null){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(e.price>=e.require_price&&a==1){baseUtils.show.redTip("优惠券面额要小于使用条件！");return false}newFormFlag=true;return true}function _(e,t){$.ajax(e,{type:"POST",dataType:"JSON",data:t,success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg);window.location.href="/coupon/index"}else if(e.code==-1){baseUtils.show.redTip(e.msg);newFormFlag=false}},error:function(e,t,a){newFormFlag=false;hideLoading();console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function w(e,t){var a=0;for(var i=0;i<e.length;i++){if(t.indexOf(e[i])!=-1){a=1}}return a}Array.prototype.remove=function(e){var t=this.indexOf(e);if(t>-1){this.splice(t,1)}}}function init(){$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",success:function(e){$(".initList").html(e)},error:function(e,t,a){console.log(e);console.error(a);console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function clearNoNum(e){e.value=e.value.replace(/[^\d.]/g,"");e.value=e.value.replace(/\.{2,}/g,".");e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");if(e.value.indexOf(".")<0&&e.value!=""){e.value=parseFloat(e.value)}}function setCondition(){$(".theTen").html(parseFloat($('[name="price"]').val())+.1)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL21hcmtldGluZy9jb3Vwb24vbmV3Rm9ybS5qcyJdLCJuYW1lcyI6WyJuZXdGb3JtRmxhZyIsIiQiLCJpbml0IiwibmV3Q291cG9uIiwidGFiU3RhdHVzIiwibGltaXRTdGF0dXMiLCJoYXNDaG9pY2UiLCJhbGxGb3JtTXNnIiwiY291cG9uTmFtZSIsImNvdXBvblByaWNlIiwicG9wV2F5IiwiZ29vZHNSYW5nZSIsImlzVGVuIiwidGltZVN0YXJ0IiwidGltZUVuZCIsInBvcE51bSIsInBlb3BsZUxpbSIsImlzVG9EZXRhaWwiLCJ0eXBlIiwicGFnZV90eXBlIiwiY21wIiwidHJpbSIsInZhbCIsImRhdGEiLCJlZGl0SWQiLCJHZXRRdWVyeVN0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJhdHRyIiwiZWFjaCIsInB1c2giLCJ0aGlzIiwiYWxpdmVUaW1lQ29uZmlnIiwib24iLCJ1cmwiLCJzaWJsaW5ncyIsInJlbW92ZSIsImFqYXgiLCJzdWNjZXNzIiwiY29kZSIsImJhc2VVdGlscyIsInNob3ciLCJibHVlVGlwIiwibXNnIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJyZWRUaXAiLCJyZW1vdmVBdHRyIiwic2V0Q29uZGl0aW9uIiwiaHRtbCIsImZhZGVJbiIsImZhZGVPdXQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaGlkZSIsImt3IiwiZGF0YVR5cGUiLCJzdGF0ZSIsImFyclNpbmdsZSIsImFyclBybyIsImFyck51bSIsInN0YXRlQWxsIiwibmV3QXJyIiwiY29uY2F0IiwidW5pcXVlIiwiaSIsImxlbmd0aCIsImFwcGVuZCIsInByZXYiLCJjbGljayIsInBhcmVudCIsImRlbGV0ZUl0ZW0iLCJNYXRoIiwicm91bmQiLCJwcm9wIiwicGFyc2VGbG9hdCIsInRpdGxlIiwicHJpY2UiLCJyZWNlaXZlX3J1bGUiLCJ2YWxpZF9hdCIsImludmFsaWRfYXQiLCJyZXF1aXJlX3ByaWNlIiwiY291bnQiLCJzcHJlYWRfdHlwZSIsImlzX3Nob3ciLCJyZXNvdXJjZSIsImlkIiwiY2hlY2tGb3JtIiwic3VibWl0Rm9ybSIsImluZm8iLCJsaW1pdCIsIiRmb3JtQ2hlY2siLCJlbXB0eVN0cmluZyIsImNoZWNrVGltZSIsImNoZWNrVGltZU9yZGVyIiwiY2hlY2tOdW0iLCJOYU4iLCJhbGxtYWciLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJoaWRlTG9hZGluZyIsImFycjEiLCJhcnIyIiwiaXRlbSIsImluZGV4T2YiLCJBcnJheSIsInByb3RvdHlwZSIsImluZGV4Iiwic3BsaWNlIiwiY2xlYXJOb051bSIsIm9iaiIsInZhbHVlIiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBSUEsYUFBWSxLQUNoQkMsR0FBRSxXQUNFQyxNQUNBQyxjQUdKLFNBQVNBLGFBQ0wsR0FBSUMsR0FBWSxDQUNoQixJQUFJQyxHQUFhLENBQ2pCLElBQUlDLEtBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxLQUNKLElBQUlDLEdBQU0sQ0FDVixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEdBQUluQixFQUFFb0IsS0FBS3BCLEVBQUUsa0JBQWtCcUIsTUFDbkNaLEdBQU8sR0FDUFMsR0FBVWxCLEVBQUUsZ0JBQWdCc0IsS0FBSyxZQUVqQyxJQUFJQyxHQUFPQyxlQUFlLEtBQzFCQyxTQUFRQyxJQUFJSCxFQUNaLElBQUdDLGVBQWUsU0FBUyxHQUFLQSxlQUFlLFNBQVMsRUFBRyxDQUN2RFAsRUFBS08sZUFBZSxPQUNwQkMsU0FBUUMsSUFBSSxhQUNYLENBQ0RULEVBQUtqQixFQUFFLGFBQWEyQixLQUFLLGlCQUN6QkYsU0FBUUMsSUFBSSxPQUdoQjFCLEVBQUUseUJBQXlCNEIsS0FBSyxXQUM1QnZCLEVBQVV3QixLQUFLN0IsRUFBRThCLE1BQU1SLEtBQUssUUFFaENHLFNBQVFDLElBQUlULEVB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QixJQUFLLHVCQUNMd0IsU0FBVSxPQUNWcEIsUUFBUyxTQUFTZixHQUVkdEIsRUFBRSxhQUFha0QsS0FBSzVCLElBRXhCcUIsTUFBTyxTQUFTQyxFQUFLQyxFQUFRQyxHQUN6QnJCLFFBQVFDLElBQUlrQixFQUNabkIsU0FBUWtCLE1BQU1HLEVBQ2RyQixTQUFRa0IsTUFBTUUsRUFDZE4sV0FBVUMsS0FBS08sT0FBTyxrQkFNbEMsUUFBU2dFLFlBQVdDLEdBQ2pCQSxFQUFJQyxNQUFRRCxFQUFJQyxNQUFNQyxRQUFRLFVBQVUsR0FDeENGLEdBQUlDLE1BQVFELEVBQUlDLE1BQU1DLFFBQVEsVUFBVSxJQUN4Q0YsR0FBSUMsTUFBUUQsRUFBSUMsTUFBTUMsUUFBUSxJQUFJLE9BQU9BLFFBQVEsTUFBTSxJQUFJQSxRQUFRLE1BQU0sSUFDekVGLEdBQUlDLE1BQVFELEVBQUlDLE1BQU1DLFFBQVEseUJBQXlCLFVBQ3ZELElBQUdGLEVBQUlDLE1BQU1QLFFBQVEsS0FBTSxHQUFLTSxFQUFJQyxPQUFRLEdBQUcsQ0FDM0NELEVBQUlDLE1BQU9yQyxXQUFXb0MsRUFBSUMsUUFHakMsUUFBU2hFLGdCQUNMakQsRUFBRSxXQUFXa0QsS0FBSzBCLFdBQVc1RSxFQUFFLGtCQUFrQnFCLE9BQU8iLCJmaWxlIjoiYWRtaW4vbWFya2V0aW5nL2NvdXBvbi9uZXdGb3JtLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gY3JlYXQgYnkgSmVydmlzXHJcbnZhciBuZXdGb3JtRmxhZz1mYWxzZTsvL+aWueazlemUgeWPmOmHj1xyXG4kKGZ1bmN0aW9uKCl7XHJcbiAgICBpbml0KCk7XHJcbiAgICBuZXdDb3Vwb24oKTtcclxufSk7XHJcblxyXG5mdW5jdGlvbiBuZXdDb3Vwb24oKXtcclxuICAgIHZhciB0YWJTdGF0dXMgPSAwOy8vdGFi6YCJ6aG55Y2h54q25oCB5Yid5aeL54q25oCBMFxyXG4gICAgdmFyIGxpbWl0U3RhdHVzPSAwOy8v5L2/55So5p2h5Lu26ZmQ5Yi2IDAt5peg5p2h5Lu25L2/55SoIDEt5L2/55So6ZmQ5Yi25p2h5Lu2XHJcbiAgICB2YXIgaGFzQ2hvaWNlPVtdOy8vVE9ETzrogIPomZHliLDlkI7lj7DkvKDlgLzvvIzpnIDopoHmm7TliqDlrozlloTlip/og71cclxuICAgIHZhciBhbGxGb3JtTXNnOy8v6KGo5Y2V5L+h5oGv5a+56LGhXHJcbiAgICB2YXIgY291cG9uTmFtZTsvL+S8mOaDoOWIuOWQjeensFxyXG4gICAgdmFyIGNvdXBvblByaWNlOy8v5LyY5oOg5Yi46Z2i6aKdXHJcbiAgICB2YXIgcG9wV2F5Oy8v5Y+R6KGM5pa55byPXHJcbiAgICB2YXIgZ29vZHNSYW5nZT1bXTsvL+WVhuWTgeiMg+WbtOaVsOe7hGlkLS10YWJcclxuICAgIHZhciBpc1Rlbj0wOy8v5L2/55So5p2h5Lu2XHJcbiAgICB2YXIgdGltZVN0YXJ0Oy8v5byA5aeL5pe26Ze0XHJcbiAgICB2YXIgdGltZUVuZDsvL+e7k+adn+aXtumXtFxyXG4gICAgdmFyIHBvcE51bTsvL+WPkeihjOmHj1xyXG4gICAgdmFyIHBlb3BsZUxpbTsvL+avj+S6uumZkOmihlxyXG4gICAgdmFyIGlzVG9EZXRhaWw7Ly/mmK/lkKbmipXmlL7oh7PllYblk4Hor6bmg4XpobVcclxuICAgIHZhciB0eXBlOy8v6aG16Z2i5Zue5Lyg5pWwIDAt5ZWG5ZOBIDEt5bqX6ZO6XHJcbiAgICB2YXIgcGFnZV90eXBlOy8v5b2T5YmN6aG16Z2i5piv57yW6L6R6aG16L+Y5piv5Yib5bu66aG1ICAtMOWIm+W7uiAgMee8lui+kVxyXG4gICAgdmFyIGNtcD0kLnRyaW0oJCgnW25hbWU9XCJjb3VudFwiXScpLnZhbCgpKTsvL+WPmOmHj+S4uue8lui+kemhteWPkeihjOmHj+aXp+WAvFxyXG4gICAgcG9wV2F5PVwiMFwiO1xyXG4gICAgcGFnZV90eXBlPSQoJy5mb3JtQ29udGVudCcpLmRhdGEoXCJwYWdlX3R5cGVcIik7XHJcbiAgICAvL+WIneWni+WMluW3suacieaVsOe7hOWvueixoVxyXG4gICAgdmFyIGVkaXRJZD1HZXRRdWVyeVN0cmluZyhcImlkXCIpO1xyXG4gICAgY29uc29sZS5sb2coZWRpdElkKTtcclxuICAgIGlmKEdldFF1ZXJ5U3RyaW5nKFwidHlwZVwiKT09MCB8fCBHZXRRdWVyeVN0cmluZyhcInR5cGVcIik9PTEgKXsvL+iOt+WPlnR5cGXlgLzvvIznvJbovpHpobXkuI7liJvlu7rpobVcclxuICAgICAgICB0eXBlPUdldFF1ZXJ5U3RyaW5nKFwidHlwZVwiKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnc2hhbmcnKVxyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgdHlwZT0kKCcucGx1c0FyZWEnKS5hdHRyKCdkYXRhLXBsdXMtdHlwZScpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCd4aWEnKVxyXG4gICAgfVxyXG4gICAgLy/nvJbovpHpobXliJ3lp4vljJZoYXNDaG9pY2XlgLwgXHJcbiAgICAkKCcuYWRkZWRMaXN0IC5hZGRlZEl0ZW0nKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaGFzQ2hvaWNlLnB1c2goJCh0aGlzKS5kYXRhKCdpZCcpKTtcclxuICAgIH0pXHJcbiAgICBjb25zb2xlLmxvZyh0eXBlKTtcclxuICAgIC8v5pel5pyf6YCJ5oup5Zmo5Yid5aeL5YyWICAgIFxyXG4gICAgYWxpdmVUaW1lQ29uZmlnKFwiLmRhdGVTZXRJbnB1dFwiKTtcclxuICAgICtmdW5jdGlvbigpe1xyXG4gICAgICAgIC8v5b2T5YmN5Yib5bu655qE5LyY5oOg5Yi45piv77yaIDAt5ZWG5ZOBIDEt5bqX6ZO6XHJcbiAgICAgICAgaWYodHlwZT09MCl7XHJcbiAgICAgICAgICAgICQoJy5pc0dvb2RzJykuYXR0cignc3R5bGUnLCcnKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgJCgnLmlzR29vZHMnKS5hdHRyKCdzdHlsZScsJ2Rpc3BsYXk6bm9uZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+ihqOagvOWktOmDqOaPkOekui0t5LiN5YaN5o+Q56S6XHJcbiAgICAgICAgJCgnLnJlbWluZFRvcCBhJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgdXJsPScvY291cG9uL2Nsb3NlLycgKyAkKHRoaXMpLnNpYmxpbmdzKCdzcGFuJykuYXR0cignZGF0YS1wbGFjZScpO1xyXG4gICAgICAgICAgICAkKCcucmVtaW5kVG9wJykucmVtb3ZlKCk7XHJcblxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIHVybDogdXJsLFxyXG4gICAgICAgICAgICAgICAgZGF0YTp7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuY29kZT09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKGRhdGEubXNnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChkYXRhLm1zZylcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4aHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2hpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gJChcIi5sb2FkaW5nU1wiKS5mYWRlT3V0KDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIOS8mOaDoOWIuOS9v+eUqOiMg+WbtOmZkOWumlxyXG4gICAgICAgICQoJ1tmb3I9XCJ1c2VDZG5fMVwiXScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnW25hbWU9XCJyZV9wcmljZVwiXScpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKS5yZW1vdmVBdHRyKFwicmVhZG9ubHlcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJCgnW2Zvcj1cInVzZUNkbl8yXCJdJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCdbbmFtZT1cInJlX3ByaWNlXCJdJykuYXR0cihcImRpc2FibGVkXCIsdHJ1ZSkuYXR0cihcInJlYWRvbmx5XCIsdHJ1ZSkudmFsKCcnKTtcclxuICAgICAgICAgICAgc2V0Q29uZGl0aW9uKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g5re75Yqg5ZWG5ZOB6IyD5Zu0XHJcbiAgICAgICAgJChcIi5wbHVzQXJlYVwiKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIC8vICQodGhpcykudW5iaW5kKFwiY2xpY2tcIik7IFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygncGx1c0FyZWEgdGVzdCcpXHJcbiAgICAgICAgICAgICQoJy5pbml0TGlzdCcpLmh0bWwoKTtcclxuICAgICAgICAgICAgJCgnLmFkZEJveCBbdHlwZT1cImNoZWNrQm94XCJdJykucmVtb3ZlQXR0cignY2hlY2tlZCcpO1xyXG4gICAgICAgICAgICAkKCcjYWRkTW9kYWwnKS5mYWRlSW4oMjAwKTtcclxuXHJcbiAgICAgICAgICAgIC8vICQodGhpcykuYmluZChcImNsaWNrXCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5YWz6Zet5by556qXXHJcbiAgICAgICAgJCgnLmNsb3NlUG9wJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCcjYWRkTW9kYWwnKS5mYWRlT3V0KDIwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gdGFi5YiH5o2iXHJcbiAgICAgICAgJCgnZGl2LnRhYiBhJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiY2xpY2tlZFwiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiY2xpY2tlZFwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHRhYlN0YXR1cz0kKHRoaXMpLmF0dHIoXCJkYXRhLXR5cGVcIilcclxuICAgICAgICAgICAgY29uc29sZS5sb2codGFiU3RhdHVzKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCh0YWJTdGF0dXMpe1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjBcIjokKCcjdGFiXzAnKS5zaG93KCkuc2libGluZ3MoXCIjdGFiXzEsI3RhYl8yXCIpLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiMVwiOiQoJyN0YWJfMScpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMCwjdGFiXzJcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIyXCI6JCgnI3RhYl8yJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8xLCN0YWJfMFwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8v5ZWG5ZOB6IyD5Zu05pCc57Si5oyJ6ZSu6YOo5YiGXHJcbiAgICAgICAgJCgnI2ZvclRhYicpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGt3ID0gJCgnI2t3Q29udGVudCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhrdyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRhYlN0YXR1cylcclxuICAgICAgICAgICAgLy8gaWYoa3cubGVuZ3RoPT0wKXtcclxuICAgICAgICAgICAgLy8gICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+i+k+WFpeaQnOe0ouWGheWuue+8gVwiKTtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIHVybDogJy9jb3Vwb24vYWRkX3Byb2R1Y3RzJyxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcclxuICAgICAgICAgICAgICAgIGRhdGE6e1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOnRhYlN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBrdzprd1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuaW5pdExpc3QnKS5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCh0YWJTdGF0dXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiMFwiOiQoJyN0YWJfMCcpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMSwjdGFiXzJcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiMVwiOiQoJyN0YWJfMScpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMCwjdGFiXzJcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiMlwiOiQoJyN0YWJfMicpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMSwjdGFiXzBcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Ioc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyDpg6jliIbkuovku7bvvIjkvb/nlKjmnaHku7bkuI7llYblrrblj5HmlL7vvIlcclxuICAgICAgICAkKCdpbnB1dC5mdW5jJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygndGVzdGUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImZ1bmNDbGlja1wiKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKFwiZnVuY0NsaWNrXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgaWYoJCh0aGlzKS52YWwoKT09XCLnlKjmiLfpooblj5ZcIil7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWJvdXRHZXQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICAgICBwb3BXYXk9XCIwXCI7Ly/nlKjmiLfpooblj5ZcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWJvdXRHZXQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAkKCcuYWJvdXRHZXQgI3B1dE9uJykucmVtb3ZlQXR0cignY2hlY2tlZCcpXHJcbiAgICAgICAgICAgICAgICBwb3BXYXk9XCIxXCI7Ly/llYblrrblj5HmlL5cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+a3u+WKoOaMiemSrumDqOWIhlxyXG4gICAgICAgICQoJyNhZGQnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBhcnJTaW5nbGU9W107XHJcbiAgICAgICAgICAgIHZhciBhcnJQcm89W107XHJcbiAgICAgICAgICAgIHZhciBhcnJOdW09W107XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZUFsbD1bXTtcclxuICAgICAgICAgICAgLy/ojrflj5blvLnnqpfliJfooajkuK3mr4/kuKrpgInpobnnmoTnibnmrorlgLxcclxuICAgICAgICAgICAgJCgnI3RhYl8wIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgYXJyU2luZ2xlLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGU9W107XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1uYW1lJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtaW1nJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgn5Y2V5ZOBJyk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtc3R5bGUnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZUFsbC5wdXNoKHN0YXRlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICQoJyN0YWJfMSBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGFyclByby5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlPVtdO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLWltZycpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJ+S4k+agjycpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLXN0eWxlJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGVBbGwucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICQoJyN0YWJfMiBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGFyck51bS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlPVtdO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLWltZycpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJ+S8muWRmCcpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLXN0eWxlJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGVBbGwucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdGF0ZUFsbCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFyck51bSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFyclBybyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFyclNpbmdsZSk7XHJcbiAgICAgICAgICAgIHZhciBuZXdBcnI9IGFyclNpbmdsZS5jb25jYXQoYXJyTnVtLGFyclBybyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhoYXNDaG9pY2UpO1xyXG4gICAgICAgICAgICBpZihuZXdBcnI9PVwiXCIpe1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+36YCJ5oup6KaB5re75Yqg55qE5ZWG5ZOB44CCXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKHVuaXF1ZShoYXNDaG9pY2UsbmV3QXJyKT09MSl7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fli7/ph43lpI3pgInmi6nmt7vliqDnmoTllYblk4HjgIJcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZm9yKGk9MDtpPHN0YXRlQWxsLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5hZGRlZExpc3QnKS5hcHBlbmQoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGRhdGEtdGFiPScgK3N0YXRlQWxsW2ldWzRdKyAnIGNsYXNzPVwiYWRkZWRJdGVtXCIgZGF0YS1pZD1cIicgKyBzdGF0ZUFsbFtpXVszXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICArICdcIj48c3Bhbj4nK3N0YXRlQWxsW2ldWzJdICsgJzwvc3Bhbj48aW1nIHNyYz1cIicgKyBzdGF0ZUFsbFtpXVsxXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICArICdcIiBhbHQ9XCInK3N0YXRlQWxsW2ldWzBdICsgJ1wiPjxzcGFuIGNsYXNzPVwic3BhbkNvblwiPicgKyBzdGF0ZUFsbFtpXVswXVxyXG4gICAgICAgICAgICAgICAgICAgICAgICArICc8L3NwYW4+PGJ1dHRvbiB0eXBlPVwiYnV0dG9uXCIgY2xhc3M9XCJjbG9zZSBjbG9zZUl0ZW1cIj7DlzwvYnV0dG9uPjwvZGl2PidcclxuICAgICAgICAgICAgICAgICAgICApXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBoYXNDaG9pY2U9aGFzQ2hvaWNlLmNvbmNhdChuZXdBcnIpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2FkZE1vZGFsJykuZmFkZU91dCgyMDApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5Yig6Zmk5bey6YCJ5ZWG5ZOBXHJcbiAgICAgICAgJChcIi5hZGRlZExpc3RcIikub24oXCJjbGlja1wiLFwiLmNsb3NlSXRlbVwiLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wcmV2KCkucHJldigpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIHZhciBkZWxldGVJdGVtPSQodGhpcykucGFyZW50KCkuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhkZWxldGVJdGVtKTtcclxuICAgICAgICAgICAgaGFzQ2hvaWNlLnJlbW92ZShkZWxldGVJdGVtKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaGFzQ2hvaWNlKTtcclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5L+d5a2Y5o+Q5Lqk6YOo5YiGKHN1Ym1pdClcclxuICAgICAgICAkKCcjc3VibWl0TGlzdCcpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coXCJjZXNoaVwiK25ld0Zvcm1GbGFnKTtcclxuICAgICAgICAgICAgaWYobmV3Rm9ybUZsYWcpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOyAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG5ld0Zvcm1GbGFnPXRydWU7XHJcbiAgICAgICAgICAgIGdvb2RzUmFuZ2U9W107Ly/nva7nqbrmlbDnu4TvvIzpmLLmraLmj5DkuqTlpLHotKXml7bnlJ/miJDph43lpI1pZFxyXG4gICAgICAgICAgICAkKCcuYWRkZWRJdGVtJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgZ29vZHNSYW5nZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1pZCcpKyctLScrJCh0aGlzKS5hdHRyKCdkYXRhLXRhYicpKTtcclxuICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXRlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGdvb2RzUmFuZ2UpOyAgXHJcblxyXG4gICAgICAgICAgICAvL+iOt+WPluWAvFxyXG4gICAgICAgICAgICBjb3Vwb25OYW1lPSQudHJpbSgkKCdbbmFtZT1cInRpdGxlXCJdJykudmFsKCkpO1xyXG4gICAgICAgICAgICBjb3Vwb25QcmljZT1NYXRoLnJvdW5kKCgkLnRyaW0oJCgnW25hbWU9XCJwcmljZVwiXScpLnZhbCgpKSkqMTAwKTtcclxuICAgICAgICAgICAgLy/ojrflj5bkvb/nlKjmnaHku7ZcclxuICAgICAgICAgICAgaWYoJCgnI3VzZUNkbl8xJykucHJvcCgnY2hlY2tlZCcpKXtcclxuICAgICAgICAgICAgICAgIC8vIGlzVGVuPXBhcnNlRmxvYXQoJCgnW25hbWU9XCJyZV9wcmljZVwiXScpLnZhbCgpKSoxMDA7XHJcbiAgICAgICAgICAgICAgICBsaW1pdFN0YXR1cyA9IDE7XHJcbiAgICAgICAgICAgICAgICBpc1Rlbj1NYXRoLnJvdW5kKHBhcnNlRmxvYXQoJCgnW25hbWU9XCJyZV9wcmljZVwiXScpLnZhbCgpKSoxMDApIHx8IFwiZW1wdHlcIjtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5L2/55So5p2h5Lu2XCIraXNUZW4pO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZigkKCcjdXNlQ2RuXzInKS5wcm9wKCdjaGVja2VkJykpe1xyXG4gICAgICAgICAgICAgICAgbGltaXRTdGF0dXMgPSAwO1xyXG4gICAgICAgICAgICAgICAgaXNUZW49IDAgO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAvLyBpc1Rlbj1NYXRoLnJvdW5kKHBhcnNlRmxvYXQoJCgnW25hbWU9XCJyZV9wcmljZVwiXScpLnZhbCgpKSoxMDApIHx8IDA7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXNUZW5cIixpc1RlbilcclxuICAgICAgICAgICAgdGltZVN0YXJ0PSQudHJpbSgkKCdbbmFtZT1cInZhbGlkX2F0XCJdJykudmFsKCkpO1xyXG4gICAgICAgICAgICB0aW1lRW5kPSQudHJpbSgkKCdbbmFtZT1cImludmFsaWRfYXRcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIHBvcE51bT0kLnRyaW0oJCgnW25hbWU9XCJjb3VudFwiXScpLnZhbCgpKTtcclxuICAgICAgICAgICAgcGVvcGxlTGltPSQoJ1tuYW1lPVwicmVjZWl2ZV9ydWxlXCJdJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmKCQoJ1tuYW1lPVwiZXh0ZW5zaW9uXCJdJykucHJvcCgnY2hlY2tlZCcpKXtcclxuICAgICAgICAgICAgICAgIGlzVG9EZXRhaWw9MTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBpc1RvRGV0YWlsPTA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v5Lyg5Ye65pWw5o2u5a+56LGhXHJcbiAgICAgICAgICAgIGFsbEZvcm1Nc2c9e1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6Y291cG9uTmFtZSxcclxuICAgICAgICAgICAgICAgIHByaWNlOmNvdXBvblByaWNlLFxyXG4gICAgICAgICAgICAgICAgcmVjZWl2ZV9ydWxlOnBlb3BsZUxpbSxcclxuICAgICAgICAgICAgICAgIHZhbGlkX2F0OnRpbWVTdGFydCxcclxuICAgICAgICAgICAgICAgIGludmFsaWRfYXQ6dGltZUVuZCxcclxuICAgICAgICAgICAgICAgIHJlcXVpcmVfcHJpY2U6aXNUZW4sXHJcbiAgICAgICAgICAgICAgICBjb3VudDpwb3BOdW0sXHJcbiAgICAgICAgICAgICAgICBzcHJlYWRfdHlwZTpwb3BXYXksXHJcbiAgICAgICAgICAgICAgICBpc19zaG93OmlzVG9EZXRhaWwsXHJcbiAgICAgICAgICAgICAgICByZXNvdXJjZTpnb29kc1JhbmdlLFxyXG4gICAgICAgICAgICAgICAgdHlwZTp0eXBlXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoZWRpdElkKXtcclxuICAgICAgICAgICAgICAgIGFsbEZvcm1Nc2cuaWQ9ZWRpdElkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFsbEZvcm1Nc2cpO1xyXG5cclxuICAgICAgICAgICAgY29uc29sZS5sb2coYWxsRm9ybU1zZy5wcmljZSlcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYWxsRm9ybU1zZy5yZXF1aXJlX3ByaWNlKVxyXG4gICAgICAgICAgICBpZihwYWdlX3R5cGU9PTAgJiYgY2hlY2tGb3JtKGFsbEZvcm1Nc2csY21wLGxpbWl0U3RhdHVzKSl7XHJcbiAgICAgICAgICAgICAgICBzdWJtaXRGb3JtKFwiL2NvdXBvbi9hZGRcIixhbGxGb3JtTXNnKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYocGFnZV90eXBlPT0xICYmIGNoZWNrRm9ybShhbGxGb3JtTXNnLGNtcCkpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2NoZWNrIGlzIHR1cmUnKVxyXG4gICAgICAgICAgICAgICAgc3VibWl0Rm9ybShcIi9jb3Vwb24vZWRpdENvdXBvblwiLGFsbEZvcm1Nc2cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgIH0oKVxyXG4gICAgLy/mj5DkuqTml7bpqozor4HooajljZVcclxuICAgIGZ1bmN0aW9uIGNoZWNrRm9ybShpbmZvLGNtcCxsaW1pdCkge1xyXG4gICAgICAgIG5ld0Zvcm1GbGFnPWZhbHNlO1xyXG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8udGl0bGUpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS8mOaDoOWIuOWQjeensOS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2cobmV3Rm9ybUZsYWcpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8ucHJpY2UpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS8mOaDoOWIuOmdoumineS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwYXJzZUZsb2F0KGluZm8uY291bnQpPHBhcnNlRmxvYXQoY21wKSl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS/ruaUueWPkeihjOmHj+WPquiDveWinuS4jeiDveWHj++8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnZhbGlkX2F0KSYmJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLmludmFsaWRfYXQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacieaViOacn+i1t+atouaXtumXtOS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLmNvdW50KSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLlj5HooYzmlbDph4/kuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gaWYoaW5mby50eXBlPT0wKXtcclxuICAgICAgICAvLyAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5yZXNvdXJjZSkpIHtcclxuICAgICAgICAvLyAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuWVhuWTgeiMg+WbtOS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAvLyAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vIH1cclxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8udmFsaWRfYXQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacieaViOacn+W8gOWni+aXtumXtOagvOW8j+mUmeivr1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8uaW52YWxpZF9hdCkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pyJ5pWI5pyf57uT5p2f5pe26Ze05qC85byP6ZSZ6K+vXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGluZm8ucmVxdWlyZV9wcmljZSA9PT0gXCJlbXB0eVwiKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5L2/55So5p2h5Lu25LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCEkZm9ybUNoZWNrLmNoZWNrVGltZU9yZGVyKGluZm8udmFsaWRfYXQsaW5mby5pbnZhbGlkX2F0KSl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacieaViOacn+e7k+adn+aXtumXtOW/hemhu+Wkp+S6juW8gOWni+aXtumXtO+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tOdW0oaW5mby5wcmljZSkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oKo55qE6Z2i6aKd6L6T5YWl5qC85byP5pyJ6K+v77yM6K+36YeN5paw6L6T5YWl77yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja051bShpbmZvLmNvdW50KSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmgqjnmoTlj5HooYzph4/ovpPlhaXmoLzlvI/mnInor6/vvIzor7fph43mlrDovpPlhaXvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaW5mby5yZXF1aXJlX3ByaWNlPT1OYU4gfHwgaW5mby5yZXF1aXJlX3ByaWNlPT1udWxsKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LyY5oOg5Yi46Z2i6aKd5LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGluZm8ucHJpY2U+PWluZm8ucmVxdWlyZV9wcmljZSAmJiBsaW1pdCA9PSAxKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LyY5oOg5Yi46Z2i6aKd6KaB5bCP5LqO5L2/55So5p2h5Lu277yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG5ld0Zvcm1GbGFnPXRydWU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gaWYodXBsb2FkQ2hhbm5lbFR5cGU9PSAxICYmIGluZm8ucGF5bWVudF90eXBlPT0gMiAmJiBpbmZvLnBpZWNlX3ByaWNlID4gYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKiAxMDApe1xyXG4gICAgICAgIC8vICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLku7fmoLzkuI3og73lpKfkuo4gXCIgKyBiYXNlVXRpbHMubWF4SW5wdXRQcmljZSArIFwiIOW8oFwiKTtcclxuICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vIH1cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuICAgIC8v6KGo5Y2V5o+Q5Lqk5pa55rOVXHJcbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKHVybCxhbGxtYWcpe1xyXG4gICAgICAgICQuYWpheCh1cmwse1xyXG4gICAgICAgICAgICB0eXBlOidQT1NUJyxcclxuICAgICAgICAgICAgZGF0YVR5cGU6J0pTT04nLFxyXG4gICAgICAgICAgICBkYXRhOmFsbG1hZyxcclxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgIGlmKGRhdGEuY29kZT09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChkYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9XCIvY291cG9uL2luZGV4XCJcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKGRhdGEuY29kZT09LTEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3Rm9ybUZsYWc9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gcmVsb2FkUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLHN0YXR1cyxlcnIpe1xyXG4gICAgICAgICAgICAgICAgbmV3Rm9ybUZsYWc9ZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIEnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcbiAgICAvL+afpemHjeaWueazlVxyXG4gICAgZnVuY3Rpb24gdW5pcXVlKGFycjEsYXJyMil7XHJcbiAgICAgICAgdmFyIGl0ZW09MDtcclxuICAgICAgICBmb3IodmFyIGk9MDtpPGFycjEubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGlmKGFycjIuaW5kZXhPZihhcnIxW2ldKSE9LTEpe1xyXG4gICAgICAgICAgICAgICAgaXRlbT0xO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBpdGVtO1xyXG4gICAgfVxyXG4gICAgLy/liKDpmaTmlbDnu4TlhYPntKDmlrnms5VcclxuICAgIEFycmF5LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbih2YWwpIHtcclxuICAgICAgICB2YXIgaW5kZXggPSB0aGlzLmluZGV4T2YodmFsKTtcclxuICAgICAgICBpZiAoaW5kZXggPiAtMSkge1xyXG4gICAgICAgICAgICB0aGlzLnNwbGljZShpbmRleCwgMSk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8vIGluaXQoKVxyXG4gICAgLy8gZnVuY3Rpb24gaW5pdCgpe1xyXG4gICAgLy8gICAgIHN3aXRjaCh0YWJTdGF0dXMpe1xyXG4gICAgLy8gICAgICAgICBjYXNlIFwiMFwiOiQoJyN0YWJfMCcpLnNob3coKS4kKFwiI3RhYl8xLCN0YWJfMlwiKS5oaWRkZW4oKVxyXG4gICAgLy8gICAgICAgICBicmVhaztcclxuICAgIC8vICAgICAgICAgY2FzZSBcIjFcIjokKCcjdGFiXzEnKS5zaG93KCkuJChcIiN0YWJfMCwjdGFiXzJcIikuaGlkZGVuKClcclxuICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAvLyAgICAgICAgIGNhc2UgXCIyXCI6JCgnI3RhYl8yJykuc2hvdygpLiQoXCIjdGFiXzEsI3RhYl8wXCIpLmhpZGRlbigpXHJcbiAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vIH1cclxufVxyXG5mdW5jdGlvbiBpbml0KCl7Ly/liJ3lp4vljJbkvJjmg6DliLjllYblk4HlvLnnqpflhoXlrrlcclxuICAgICQuYWpheCh7XHJcbiAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICB1cmw6ICcvY291cG9uL2FkZF9wcm9kdWN0cycsXHJcbiAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG4gICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICQoJy5pbml0TGlzdCcpLmh0bWwoZGF0YSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh4aHIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Ioc3RhdHVzKTtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIEnKTtcclxuICAgICAgICAgICAgLy9oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAvLyAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICB9XHJcbiAgICB9KVxyXG59XHJcbmZ1bmN0aW9uIGNsZWFyTm9OdW0ob2JqKXsgXHJcbiAgIG9iai52YWx1ZSA9IG9iai52YWx1ZS5yZXBsYWNlKC9bXlxcZC5dL2csXCJcIik7ICAvL+a4hemZpOKAnOaVsOWtl+KAneWSjOKAnC7igJ3ku6XlpJbnmoTlrZfnrKYgIFxyXG4gICBvYmoudmFsdWUgPSBvYmoudmFsdWUucmVwbGFjZSgvXFwuezIsfS9nLFwiLlwiKTsgLy/lj6rkv53nlZnnrKzkuIDkuKouIOa4hemZpOWkmuS9meeahCAgXHJcbiAgIG9iai52YWx1ZSA9IG9iai52YWx1ZS5yZXBsYWNlKFwiLlwiLFwiJCMkXCIpLnJlcGxhY2UoL1xcLi9nLFwiXCIpLnJlcGxhY2UoXCIkIyRcIixcIi5cIik7IFxyXG4gICBvYmoudmFsdWUgPSBvYmoudmFsdWUucmVwbGFjZSgvXihcXC0pKihcXGQrKVxcLihcXGRcXGQpLiokLywnJDEkMi4kMycpOy8v5Y+q6IO96L6T5YWl5Lik5Liq5bCP5pWwICBcclxuICAgaWYob2JqLnZhbHVlLmluZGV4T2YoXCIuXCIpPCAwICYmIG9iai52YWx1ZSAhPVwiXCIpey8v5Lul5LiK5bey57uP6L+H5ruk77yM5q2k5aSE5o6n5Yi255qE5piv5aaC5p6c5rKh5pyJ5bCP5pWw54K577yM6aaW5L2N5LiN6IO95Li657G75Ly85LqOIDAx44CBMDLnmoTph5Hpop0gXHJcbiAgICAgICBvYmoudmFsdWU9IHBhcnNlRmxvYXQob2JqLnZhbHVlKTsgXHJcbiAgIH0gXHJcbn0gXHJcbmZ1bmN0aW9uIHNldENvbmRpdGlvbigpe1xyXG4gICAgJCgnLnRoZVRlbicpLmh0bWwocGFyc2VGbG9hdCgkKCdbbmFtZT1cInByaWNlXCJdJykudmFsKCkpKzAuMSk7XHJcbn0iXX0=
