$(function(){manageAlive.init()});var manageAlive=function(){var e={};var a;function r(e){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("直播名称不能为空！");return false}if($formCheck.emptyString(e.summary)){baseUtils.show.redTip("直播简介不能为空！");return false}if(e.alive_type==1&&fileId==null){baseUtils.show.redTip("请上传直播资源！");return false}if(is_edit){baseUtils.show.redTip("直播资源上传中！");return false}if($formCheck.emptyString(e.img_url)){baseUtils.show.redTip("请上传您的直播封面！");return false}if($formCheck.emptyString(e.start_at)){baseUtils.show.redTip("请填入您的直播上架时间！");return false}if($formCheck.emptyString(e.zb_start_at)){baseUtils.show.redTip("请填入您的直播开始时间！");return false}if($formCheck.emptyString(e.zb_stop_at)){baseUtils.show.redTip("请填入您的直播结束时间！");return false}if(!$formCheck.checkTime(e.start_at)){baseUtils.show.redTip("直播上架时间错误");return false}if(!$formCheck.checkTime(e.zb_start_at)){baseUtils.show.redTip("直播开始时间错误");return false}if(!$formCheck.checkTime(e.zb_stop_at)){baseUtils.show.redTip("直播结束时间错误");return false}if(uploadChannelType==1&&e.payment_type==2&&$formCheck.emptyString(e.piece_price)){baseUtils.show.redTip("您选择的付费形式为付费，请输入价格！");return false}if(uploadChannelType==1&&e.payment_type==2&&!$formCheck.checkNum(e.piece_price)){baseUtils.show.redTip("您的价格输入格式有误，请重新输入！");return false}if(uploadChannelType==1&&e.payment_type==2&&e.piece_price>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}if(!$formCheck.checkTimeOrder(e.zb_start_at,e.zb_stop_at)){baseUtils.show.redTip("直播结束时间必须大于直播开始时间！");return false}return true}function t(e,a){showLoading();$.ajax(e,{type:"POST",dataType:"json",data:a,success:function(e){if(parseInt(e.code)===0){baseUtils.show.blueTip("保存成功");window.location.href=backURL}else{hideLoading();baseUtils.show.redTip(e.msg);submitLimt=false}},error:function(e,a,r){hideLoading();console.error(r);baseUtils.show.redTip("网络错误，请稍后再试！");submitLimt=false}})}var i="";var s;var l;var n;classArray=[];function m(){$("#searchInput").val("");$(".memberPart").remove();$(".darkScreen").fadeOut(300)}e.init=function(){aliveTimeConfig("#zb_start_at");aliveTimeConfig("#zb_stop_at");$(".memberClassAdd").click(function(){i="";$(".eachLineContent").append("<div class='eachLine'>"+"<div class='memberName'>点击添加</div>"+"<input type='text' class='inputDefault memberCall' value='讲师'>"+"<div class='memberClear'>清空</div>"+"<input type='hidden' class='userId' />"+"<div class='btnLine'></div>"+"<div class='memberClassDelete'>删除</div>"+"</div>")});$(".eachLineContent").on("click",".memberClassDelete",function(){$(this).prev().prev().click();$(this).parent().remove()});$(".eachLineContent").on("click",".memberName",function(){l=$(".memberName").index($(this));console.log($(".memberName").eq(l).text());if($(".memberName").eq(l).text()=="点击添加"){console.log(l);$(".darkScreen").show()}});$(".eachLineContent").on("click",".memberClear",function(){var e=$(".memberClear").index($(this));$(".memberName").eq(e).text("点击添加");$(".memberCall").eq(e).val("讲师");$(".userId").eq(e).val("")});$(".boxCancel,.userSelectBoxClose").click(function(){m()});$(".memberList").on("click",".memberPart",function(){$(this).find("input").prop("checked",true);i=$(this).attr("id");console.log(i);s=$(this).find(".memberNickName").text()});$(".boxConfirm").click(function(){console.log(i);if(i==""){baseUtils.show.redTip("亲,请选择人哦~");return false}else{$(".userId").each(function(e){if($(this).val()==i){n=true}})}if(n){baseUtils.show.redTip("亲，请勿重复选择人员哦~");n=false;return false}if(i==""){baseUtils.show.redTip("亲，请选择人员哦~")}else{n=false;$(".memberName").eq(l).html(s);$(".userId").eq(l).val(i);i="";m()}});$(".memberSearchBtn").click(function(){$(".search_none").hide();var e=$("#searchInput").val();if(e.length==0){baseUtils.show.redTip("请输入搜索内容！");return false}$.get("/zbsearch",{search:e},function(e){$(".memberPart").remove();console.log(e);if(e.data.length>0){for(var a=0;a<e.data.length;a++){$(".memberList").append("<div class='memberPart' id='"+e.data[a].user_id+"'> "+"<div class='memberCheck'> <input class='with-gap' name='group10' type='radio' id='test"+a+"'/> "+"<label for='test"+a+"'></label> </div> "+"<div class='memberlogo'> <div class='memberImage'><img src="+e.data[a].wx_avatar+" alt=''>"+"</div> <div class='memberNickName'>"+e.data[a].wx_nickname+"</div> </div>"+"<div class='memberSex'>"+e.data[a].wx_gender+"</div>"+"<div class='memberPhone'>"+e.data[a].phone+"</div> </div>")}}else{$(".search_none").show()}})});$(".completeBtn").click(function(){var e=$.trim($(".resName").val());var a=$.trim($("#aliveAbstract").val());var i=aliveT;var s=fileId;var l=$.trim($("#zb_start_at").val());var n=$.trim($("#zb_stop_at").val());var m=videoGsize;var o=$.trim($("#Image1Url").val());var c=$.trim($("#Image3Url").val());var d=UE.getEditor("resource_desc");var p=d.getContent();var u=d.getPlainTxt();if(u.length==0){baseUtils.show.redTip("描述不能为空!");return false}var f=$.trim($(".resPrize").val())*100;$('input[name="aliveClass"]:checked').each(function(){classArray.push($(this).attr("id"))});console.log(classArray);var h=aliveState;var v=$.trim($("#dateInput").val());for(var b=0,_=0;b<$(".eachLine").length;b++){var g={};g["role_name"]=$(".memberCall").eq(b).val().trim();g["user_name"]=$(".memberName").eq(b).html().trim();g["user_id"]=$(".userId").eq(b).val().trim();if(g["user_id"].length!=0){roleParams[_]=g;_++}}var k={title:e,summary:a,alive_type:i,img_url:o,alive_img_url:c,file_name:VideoName,zb_start_at:l,zb_stop_at:n,descrb:u,org_content:p,piece_price:f,state:h,start_at:v,id:GetQueryString("id")||null};var y={public_video:s,public_size_text:m};if(resourceFree){k.payment_type=resourceFree}k.if_push=if_push;if(if_push==0||if_push==1){k.push_ahead=push_ahead}if(r(k)){var T={params:k,resource_type:resourceType,upload_channel_type:uploadChannelType,package_id:packageId,resource_params:y,package_name:packageName,roleParams:roleParams,category_type:classArray};t(golbalUrl,T);console.log(T)}else{return false}})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZUFsaXZlLmpzIl0sIm5hbWVzIjpbIiQiLCJtYW5hZ2VBbGl2ZSIsImluaXQiLCJyZXNVcmwiLCJjaGVja0FsaXZlRm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJ0aXRsZSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJzdW1tYXJ5IiwiYWxpdmVfdHlwZSIsImZpbGVJZCIsImlzX2VkaXQiLCJpbWdfdXJsIiwic3RhcnRfYXQiLCJ6Yl9zdGFydF9hdCIsInpiX3N0b3BfYXQiLCJjaGVja1RpbWUiLCJ1cGxvYWRDaGFubmVsVHlwZSIsInBheW1lbnRfdHlwZSIsInBpZWNlX3ByaWNlIiwiY2hlY2tOdW0iLCJtYXhJbnB1dFByaWNlIiwiY2hlY2tUaW1lT3JkZXIiLCJzdWJtaXRGb3JtIiwidXJsIiwiYWxsUGFyYW1zIiwic2hvd0xvYWRpbmciLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwiZGF0YSIsInN1Y2Nlc3MiLCJwYXJzZUludCIsImNvZGUiLCJibHVlVGlwIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiYmFja1VSTCIsImhpZGVMb2FkaW5nIiwibXNnIiwic3VibWl0TGltdCIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiY29uc29sZSIsIm5vd1VzZXJpZCIsIm5vd1VzZXJOYW1lIiwiYWRkSW5kZXgiLCJzYW1lSWQiLCJjbGFzc0FycmF5IiwiYm94Q29udGVudFJlc2V0IiwidmFsIiwicmVtb3ZlIiwiZmFkZU91dCIsImFsaXZlVGltZUNvbmZpZyIsImNsaWNrIiwiYXBwZW5kIiwib24iLCJ0aGlzIiwicHJldiIsInBhcmVudCIsImluZGV4IiwibG9nIiwiZXEiLCJ0ZXh0IiwidGVtcEluZGV4IiwiZmluZCIsInByb3AiLCJhdHRyIiwiZWFjaCIsImkiLCJodG1sIiwiaGlkZSIsInNlYXJjaCIsImxlbmd0aCIsImdldCIsInVzZXJfaWQiLCJ3eF9hdmF0YXIiLCJ3eF9uaWNrbmFtZSIsInd4X2dlbmRlciIsInBob25lIiwidHJpbSIsImFsaXZlVHlwZSIsImFsaXZlVCIsIkFsaXZlRmlsZUlkIiwiemJTdGFydEF0IiwiemJFbmRBdCIsIkFsaXZlU2l6ZSIsInZpZGVvR3NpemUiLCJpbWFnZTFVcmwiLCJpbWFnZTNVcmwiLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwib3JnQ29udGVudCIsImdldENvbnRlbnQiLCJkZXNjcmliIiwiZ2V0UGxhaW5UeHQiLCJyZXNQcml6ZSIsInB1c2giLCJzdGF0ZSIsImFsaXZlU3RhdGUiLCJzdGFydEF0IiwiaiIsInRtcCIsInJvbGVQYXJhbXMiLCJyZXNJbmZvIiwiYWxpdmVfaW1nX3VybCIsImZpbGVfbmFtZSIsIlZpZGVvTmFtZSIsImRlc2NyYiIsIm9yZ19jb250ZW50IiwiaWQiLCJHZXRRdWVyeVN0cmluZyIsInJlc291cmNlUGFyYW1zIiwicHVibGljX3ZpZGVvIiwicHVibGljX3NpemVfdGV4dCIsInJlc291cmNlRnJlZSIsImlmX3B1c2giLCJwdXNoX2FoZWFkIiwicGFyYW1zIiwicmVzb3VyY2VfdHlwZSIsInJlc291cmNlVHlwZSIsInVwbG9hZF9jaGFubmVsX3R5cGUiLCJwYWNrYWdlX2lkIiwicGFja2FnZUlkIiwicmVzb3VyY2VfcGFyYW1zIiwicGFja2FnZV9uYW1lIiwicGFja2FnZU5hbWUiLCJjYXRlZ29yeV90eXBlIiwiZ29sYmFsVXJsIl0sIm1hcHBpbmdzIjoiQUFJQUEsRUFBRSxXQUNFQyxZQUFZQyxRQUVoQixJQUFJRCxhQUFjLFdBQ2QsR0FBSUEsS0FFSixJQUFJRSxFQUdKLFNBQVNDLEdBQWVDLEdBQ3BCLEdBQUlDLFdBQVdDLFlBQVlGLEVBQUtHLE9BQVEsQ0FDcENDLFVBQVVDLEtBQUtDLE9BQU8sWUFDdEIsT0FBTyxPQUVYLEdBQUlMLFdBQVdDLFlBQVlGLEVBQUtPLFNBQVUsQ0FDdENILFVBQVVDLEtBQUtDLE9BQU8sWUFDdEIsT0FBTyxPQUVYLEdBQUlOLEVBQUtRLFlBQVksR0FBSUMsUUFBVSxLQUFPLENBQ3RDTCxV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LFlBQWFpRixFQUViRSxNQUFNQSxFQUVOekYsU0FBVTJGLEVBRVZVLEdBQUlDLGVBQWUsT0FBUyxLQUdoQyxJQUFJQyxJQUVBQyxhQUFjL0IsRUFFZGdDLGlCQUFrQjdCLEVBR3RCLElBQUc4QixhQUFjLENBQ2JYLEVBQVExRixhQUFlcUcsYUFJM0JYLEVBQVFZLFFBQVVBLE9BQ2xCLElBQUdBLFNBQVMsR0FBS0EsU0FBUyxFQUFFLENBQ3hCWixFQUFRYSxXQUFhQSxXQUl6QixHQUFJekgsRUFBZTRHLEdBQVUsQ0FDekIsR0FBSW5GLElBQ0FpRyxPQUFRZCxFQUNSZSxjQUFlQyxhQUNmQyxvQkFBcUI1RyxrQkFDckI2RyxXQUFZQyxVQUNaQyxnQkFBaUJaLEVBQ2pCYSxhQUFjQyxZQUNkdkIsV0FBWUEsV0FDWndCLGNBQWNoRixXQUVsQjVCLEdBQVc2RyxVQUFXM0csRUFDdEJxQixTQUFRa0IsSUFBSXZDLE9BQ1QsQ0FDSCxNQUFPLFVBS25CLE9BQU81QiIsImZpbGUiOiJtYW5hZ2VBbGl2ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBqc2VyayBvbiAyMDE3LzMvMjMuXG4gKi9cblxuJChmdW5jdGlvbiAoKSB7XG4gICAgbWFuYWdlQWxpdmUuaW5pdCgpO1xufSk7XG52YXIgbWFuYWdlQWxpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1hbmFnZUFsaXZlID0ge307XG5cbiAgICB2YXIgcmVzVXJsO1xuXG4gICAgLy/mo4Dmn6Xnm7Tmkq3mj5DkuqTooajljZVcbiAgICBmdW5jdGlvbiBjaGVja0FsaXZlRm9ybShpbmZvKSB7XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8udGl0bGUpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3lkI3np7DkuI3og73kuLrnqbrvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5zdW1tYXJ5KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt566A5LuL5LiN6IO95Li656m677yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmZvLmFsaXZlX3R5cGU9PTEmJihmaWxlSWQgPT0gbnVsbCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+S4iuS8oOebtOaSrei1hOa6kO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNfZWRpdCkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt6LWE5rqQ5LiK5Lyg5Lit77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uaW1nX3VybCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+S4iuS8oOaCqOeahOebtOaSreWwgemdou+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnN0YXJ0X2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35aGr5YWl5oKo55qE55u05pKt5LiK5p625pe26Ze077yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uemJfc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7floavlhaXmgqjnmoTnm7Tmkq3lvIDlp4vml7bpl7TvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby56Yl9zdG9wX2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35aGr5YWl5oKo55qE55u05pKt57uT5p2f5pe26Ze077yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja1RpbWUoaW5mby5zdGFydF9hdCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSreS4iuaetuaXtumXtOmUmeivr1wiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8uemJfc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3lvIDlp4vml7bpl7TplJnor69cIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLnpiX3N0b3BfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3nu5PmnZ/ml7bpl7TplJnor69cIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZENoYW5uZWxUeXBlPT0xICYmIGluZm8ucGF5bWVudF90eXBlID09IDIgJiYgJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnBpZWNlX3ByaWNlKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oKo6YCJ5oup55qE5LuY6LS55b2i5byP5Li65LuY6LS577yM6K+36L6T5YWl5Lu35qC877yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRDaGFubmVsVHlwZT09MSAmJiBpbmZvLnBheW1lbnRfdHlwZSA9PSAyICYmICEkZm9ybUNoZWNrLmNoZWNrTnVtKGluZm8ucGllY2VfcHJpY2UpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmgqjnmoTku7fmoLzovpPlhaXmoLzlvI/mnInor6/vvIzor7fph43mlrDovpPlhaXvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYodXBsb2FkQ2hhbm5lbFR5cGU9PSAxICYmIGluZm8ucGF5bWVudF90eXBlPT0gMiAmJiBpbmZvLnBpZWNlX3ByaWNlID4gYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKiAxMDApe1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Lu35qC85LiN6IO95aSn5LqOIFwiICsgYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKyBcIiDlhYNcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYoISRmb3JtQ2hlY2suY2hlY2tUaW1lT3JkZXIoaW5mby56Yl9zdGFydF9hdCxpbmZvLnpiX3N0b3BfYXQpKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSree7k+adn+aXtumXtOW/hemhu+Wkp+S6juebtOaSreW8gOWni+aXtumXtO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy/mj5DkuqTkv6Hmga9cbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKHVybCwgYWxsUGFyYW1zKSB7XG4gICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICQuYWpheCh1cmwsIHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOmFsbFBhcmFtcyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoZGF0YS5jb2RlKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5L+d5a2Y5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGJhY2tVUkw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXRMaW10ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsc3RhdHVzLGVycikge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XG4gICAgICAgICAgICAgICAgc3VibWl0TGltdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvL+W9k+WJjea3u+WKoOeahOeUqOaIt1xuICAgIHZhciBub3dVc2VyaWQgPSAnJztcblxuICAgIC8v6YCJ5Lit55So5oi355qE55So5oi35ZCNXG4gICAgdmFyIG5vd1VzZXJOYW1lO1xuXG4gICAgLy/lvZPliY3pgInkuK3nmoTmrKHluo9cbiAgICB2YXIgYWRkSW5kZXg7XG5cbiAgICAvL+ebuOWQjOWvvOW4iOWIpOWummlkXG4gICAgdmFyICBzYW1lSWQ7XG5cbiAgICAvL+e9ruepuuWIhuexu+aVsOe7hFxuICAgIGNsYXNzQXJyYXk9W107XG4gICAgLy/ph43nva7lvLnlh7rmoYblhoXlrrnlubblhbPpl63lvLnlh7rmoYZcbiAgICBmdW5jdGlvbiBib3hDb250ZW50UmVzZXQoKXtcbiAgICAgICAgJChcIiNzZWFyY2hJbnB1dFwiKS52YWwoXCJcIik7XG4gICAgICAgICQoXCIubWVtYmVyUGFydFwiKS5yZW1vdmUoKTtcbiAgICAgICAgJChcIi5kYXJrU2NyZWVuXCIpLmZhZGVPdXQoMzAwKTtcbiAgICB9XG5cbiAgICBtYW5hZ2VBbGl2ZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGFsaXZlVGltZUNvbmZpZyhcIiN6Yl9zdGFydF9hdFwiKTtcbiAgICAgICAgYWxpdmVUaW1lQ29uZmlnKFwiI3piX3N0b3BfYXRcIik7XG4gICAgICAgIC8vIOa3u+WKoOiusuW4iOexu1xuICAgICAgICAkKFwiLm1lbWJlckNsYXNzQWRkXCIpLmNsaWNrKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBub3dVc2VyaWQ9Jyc7XG4gICAgICAgICAgICAkKFwiLmVhY2hMaW5lQ29udGVudFwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdlYWNoTGluZSc+XCIrXG4gICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdtZW1iZXJOYW1lJz7ngrnlh7vmt7vliqA8L2Rpdj5cIitcbiAgICAgICAgICAgICAgICBcIjxpbnB1dCB0eXBlPSd0ZXh0JyBjbGFzcz0naW5wdXREZWZhdWx0IG1lbWJlckNhbGwnIHZhbHVlPSforrLluIgnPlwiK1xuICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nbWVtYmVyQ2xlYXInPua4heepujwvZGl2PlwiK1xuICAgICAgICAgICAgICAgIFwiPGlucHV0IHR5cGU9J2hpZGRlbicgY2xhc3M9J3VzZXJJZCcgLz5cIitcbiAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J2J0bkxpbmUnPjwvZGl2PlwiK1xuICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nbWVtYmVyQ2xhc3NEZWxldGUnPuWIoOmZpDwvZGl2PlwiK1xuICAgICAgICAgICAgICAgIFwiPC9kaXY+XCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+WIoOmZpOWvvOW4iOexu1xuICAgICAgICAkKFwiLmVhY2hMaW5lQ29udGVudFwiKS5vbihcImNsaWNrXCIsXCIubWVtYmVyQ2xhc3NEZWxldGVcIixmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLnByZXYoKS5wcmV2KCkuY2xpY2soKTtcbiAgICAgICAgICAgICQodGhpcykucGFyZW50KCkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v54K55Ye75re75YqgXG4gICAgICAgICQoXCIuZWFjaExpbmVDb250ZW50XCIpLm9uKFwiY2xpY2tcIixcIi5tZW1iZXJOYW1lXCIsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGFkZEluZGV4ID0gKCQoXCIubWVtYmVyTmFtZVwiKS5pbmRleCgkKHRoaXMpKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkKFwiLm1lbWJlck5hbWVcIikuZXEoYWRkSW5kZXgpLnRleHQoKSk7XG4gICAgICAgICAgICBpZigkKFwiLm1lbWJlck5hbWVcIikuZXEoYWRkSW5kZXgpLnRleHQoKT09XCLngrnlh7vmt7vliqBcIikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFkZEluZGV4KTtcbiAgICAgICAgICAgICAgICAkKFwiLmRhcmtTY3JlZW5cIikuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvL+a4heepulxuICAgICAgICAkKFwiLmVhY2hMaW5lQ29udGVudFwiKS5vbihcImNsaWNrXCIsXCIubWVtYmVyQ2xlYXJcIixmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdGVtcEluZGV4ID0gJChcIi5tZW1iZXJDbGVhclwiKS5pbmRleCgkKHRoaXMpKTtcbiAgICAgICAgICAgICQoXCIubWVtYmVyTmFtZVwiKS5lcSh0ZW1wSW5kZXgpLnRleHQoXCLngrnlh7vmt7vliqBcIik7XG4gICAgICAgICAgICAkKFwiLm1lbWJlckNhbGxcIikuZXEodGVtcEluZGV4KS52YWwoXCLorrLluIhcIik7XG4gICAgICAgICAgICAkKFwiLnVzZXJJZFwiKS5lcSh0ZW1wSW5kZXgpLnZhbChcIlwiKTtcbiAgICAgICAgfSlcblxuICAgICAgICAvL+WFs+mXreW8ueWHuuahhlxuICAgICAgICAkKFwiLmJveENhbmNlbCwudXNlclNlbGVjdEJveENsb3NlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGJveENvbnRlbnRSZXNldCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+e7meW8ueWHuuahhueUqOaIt+WIl+ihqOWtkOWNleWFg+e7keWummNsaWNr5LqL5Lu2XG4gICAgICAgICQoXCIubWVtYmVyTGlzdFwiKS5vbihcImNsaWNrXCIsIFwiLm1lbWJlclBhcnRcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5maW5kKFwiaW5wdXRcIikucHJvcChcImNoZWNrZWRcIiwgdHJ1ZSk7XG4gICAgICAgICAgICAvLyAgICDojrflj5bpgInkuK3nlKjmiLfnmoRpZOWQjVxuICAgICAgICAgICAgbm93VXNlcmlkID0gJCh0aGlzKS5hdHRyKCdpZCcpO1xuICAgICAgICAgICAgY29uc29sZS5sb2cobm93VXNlcmlkKTtcbiAgICAgICAgICAgIC8vICAgIOiOt+WPlumAieS4reeUqOaIt+eahOaYteensFxuICAgICAgICAgICAgbm93VXNlck5hbWUgPSAkKHRoaXMpLmZpbmQoXCIubWVtYmVyTmlja05hbWVcIikudGV4dCgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+ehruiupOa3u+WKoOiusui/sFxuICAgICAgICAkKFwiLmJveENvbmZpcm1cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29uc29sZS5sb2cobm93VXNlcmlkKTtcbiAgICAgICAgICAgIGlmKG5vd1VzZXJpZD09JycpIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkurIs6K+36YCJ5oup5Lq65ZOmflwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9ZWxzZSB7XG4gICAgICAgICAgICAgICAgJChcIi51c2VySWRcIikuZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoJCh0aGlzKS52YWwoKSA9PSBub3dVc2VyaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNhbWVJZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKHNhbWVJZCl7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Lqy77yM6K+35Yu/6YeN5aSN6YCJ5oup5Lq65ZGY5ZOmflwiKTtcbiAgICAgICAgICAgICAgICBzYW1lSWQ9ZmFsc2U7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChub3dVc2VyaWQgPT0gXCJcIikge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkurLvvIzor7fpgInmi6nkurrlkZjlk6Z+XCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNhbWVJZD1mYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgLy8gICAg6Z2i5p2/6LWL5YC8XG4gICAgICAgICAgICAgICAgICAgICQoXCIubWVtYmVyTmFtZVwiKS5lcShhZGRJbmRleCkuaHRtbChub3dVc2VyTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgIC8v5bim5YWldXNlcmlkXG4gICAgICAgICAgICAgICAgICAgICQoXCIudXNlcklkXCIpLmVxKGFkZEluZGV4KS52YWwobm93VXNlcmlkKTtcbiAgICAgICAgICAgICAgICAgICAgbm93VXNlcmlkID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgYm94Q29udGVudFJlc2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8v54K55Ye75pCc57Si5oyJ6ZKu5pCc57Si6K6y5biIXG4gICAgICAgICQoXCIubWVtYmVyU2VhcmNoQnRuXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoJy5zZWFyY2hfbm9uZScpLmhpZGUoKTtcbiAgICAgICAgICAgIC8v5Yik56m6XG4gICAgICAgICAgICB2YXIgc2VhcmNoID0gJChcIiNzZWFyY2hJbnB1dFwiKS52YWwoKTtcbiAgICAgICAgICAgIGlmIChzZWFyY2gubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fovpPlhaXmkJzntKLlhoXlrrnvvIFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJC5nZXQoXCIvemJzZWFyY2hcIiwge1wic2VhcmNoXCI6IHNlYXJjaH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgJChcIi5tZW1iZXJQYXJ0XCIpLnJlbW92ZSgpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmRhdGEubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5tZW1iZXJMaXN0XCIpLmFwcGVuZChcIjxkaXYgY2xhc3M9J21lbWJlclBhcnQnIGlkPSdcIiArIGRhdGEuZGF0YVtpXS51c2VyX2lkICsgXCInPiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdtZW1iZXJDaGVjayc+IDxpbnB1dCBjbGFzcz0nd2l0aC1nYXAnIG5hbWU9J2dyb3VwMTAnIHR5cGU9J3JhZGlvJyBpZD0ndGVzdFwiICsgaSArIFwiJy8+IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxsYWJlbCBmb3I9J3Rlc3RcIiArIGkgKyBcIic+PC9sYWJlbD4gPC9kaXY+IFwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlcmxvZ28nPiA8ZGl2IGNsYXNzPSdtZW1iZXJJbWFnZSc+PGltZyBzcmM9XCIgKyBkYXRhLmRhdGFbaV0ud3hfYXZhdGFyICsgXCIgYWx0PScnPlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjwvZGl2PiA8ZGl2IGNsYXNzPSdtZW1iZXJOaWNrTmFtZSc+XCIgKyBkYXRhLmRhdGFbaV0ud3hfbmlja25hbWUgKyBcIjwvZGl2PiA8L2Rpdj5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdtZW1iZXJTZXgnPlwiICsgZGF0YS5kYXRhW2ldLnd4X2dlbmRlciArIFwiPC9kaXY+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nbWVtYmVyUGhvbmUnPlwiICsgZGF0YS5kYXRhW2ldLnBob25lICsgXCI8L2Rpdj4gPC9kaXY+XCIpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgJCgnLnNlYXJjaF9ub25lJykuc2hvdygpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8gIOW8ueeql+aPkOekuumCgOivt+iusuW4iOmihOiniOWbvlxuICAgICAgICAvLyAkKFwiLmludml0ZV90ZWFjaGVyX3RpcCBzcGFuXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy9cbiAgICAgICAgLy9cbiAgICAgICAgLy9cbiAgICAgICAgLy8gfSk7XG5cblxuXG4gICAgICAgIC8vIOaPkOS6pOebtOaSreihqOWNlVxuICAgICAgICAkKFwiLmNvbXBsZXRlQnRuXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAgICAgLy/ojrflj5bnm7Tmkq3ooajljZXmlbDmja5cbiAgICAgICAgICAgIC8v55u05pKt5ZCN56ewXG4gICAgICAgICAgICB2YXIgdGl0bGUgPSAkLnRyaW0oJChcIi5yZXNOYW1lXCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3nroDku4tcbiAgICAgICAgICAgIHZhciBzdW1tYXJ5PSQudHJpbSgkKFwiI2FsaXZlQWJzdHJhY3RcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreexu+Wei1xuICAgICAgICAgICAgdmFyIGFsaXZlVHlwZT1hbGl2ZVQ7XG5cbiAgICAgICAgICAgIC8v55u05pKt54K55pKtaWRcbiAgICAgICAgICAgIHZhciBBbGl2ZUZpbGVJZCA9IGZpbGVJZDtcblxuICAgICAgICAgICAgLy/nm7Tmkq3lvIDlp4vml7bpl7RcbiAgICAgICAgICAgIHZhciB6YlN0YXJ0QXQgPSAkLnRyaW0oJChcIiN6Yl9zdGFydF9hdFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt57uT5p2f5pe26Ze0XG4gICAgICAgICAgICB2YXIgemJFbmRBdCA9ICQudHJpbSgkKFwiI3piX3N0b3BfYXRcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreWkp+Wwj1xuICAgICAgICAgICAgdmFyIEFsaXZlU2l6ZSA9IHZpZGVvR3NpemU7XG5cbiAgICAgICAgICAgIC8v55u05pKt5bCB6Z2i5Zyw5Z2AXG4gICAgICAgICAgICB2YXIgaW1hZ2UxVXJsID0gJC50cmltKCQoXCIjSW1hZ2UxVXJsXCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3otLTniYflnLDlnYBcbiAgICAgICAgICAgIHZhciBpbWFnZTNVcmwgPSAkLnRyaW0oJChcIiNJbWFnZTNVcmxcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreWOn+Wni+WGheWuueivpuaDhVxuICAgICAgICAgICAgdmFyIHVlID0gVUUuZ2V0RWRpdG9yKCdyZXNvdXJjZV9kZXNjJyk7XG4gICAgICAgICAgICB2YXIgb3JnQ29udGVudCA9IHVlLmdldENvbnRlbnQoKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3lhoXlrrnmj4/ov7BcbiAgICAgICAgICAgIHZhciBkZXNjcmliID0gdWUuZ2V0UGxhaW5UeHQoKTtcbiAgICAgICAgICAgIGlmIChkZXNjcmliLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmj4/ov7DkuI3og73kuLrnqbohJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8v5LuY6LS55Lu35qC8XG4gICAgICAgICAgICB2YXIgcmVzUHJpemUgPSAkLnRyaW0oJChcIi5yZXNQcml6ZVwiKS52YWwoKSkgKiAxMDA7XG5cbiAgICAgICAgICAgIC8v55u05pKt6YCJ5oup5YiG57G7XG4gICAgICAgICAgICAkKCdpbnB1dFtuYW1lPVwiYWxpdmVDbGFzc1wiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGNsYXNzQXJyYXkucHVzaCgkKHRoaXMpLmF0dHIoJ2lkJykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjbGFzc0FycmF5KTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3nirbmgIFcbiAgICAgICAgICAgIHZhciBzdGF0ZT1hbGl2ZVN0YXRlO1xuICAgICAgICAgICAgLy/kuIrmnrbml7bpl7RcbiAgICAgICAgICAgIHZhciBzdGFydEF0ID0gJC50cmltKCQoXCIjZGF0ZUlucHV0XCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgZm9yKHZhciBpPTAsaj0wO2k8JChcIi5lYWNoTGluZVwiKS5sZW5ndGg7aSsrKSB7XG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3op5LoibLnmoTlgLxcbiAgICAgICAgICAgICAgICB2YXIgdG1wID0ge307XG4gICAgICAgICAgICAgICAgdG1wW1wicm9sZV9uYW1lXCJdID0gJChcIi5tZW1iZXJDYWxsXCIpLmVxKGkpLnZhbCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB0bXBbXCJ1c2VyX25hbWVcIl0gPSAkKFwiLm1lbWJlck5hbWVcIikuZXEoaSkuaHRtbCgpLnRyaW0oKTtcbiAgICAgICAgICAgICAgICB0bXBbXCJ1c2VyX2lkXCJdID0gJChcIi51c2VySWRcIikuZXEoaSkudmFsKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIGlmICh0bXBbXCJ1c2VyX2lkXCJdLmxlbmd0aCAhPSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIC8v6K6y5biI5YiX6KGoXG4gICAgICAgICAgICAgICAgICAgIHJvbGVQYXJhbXNbal0gPSB0bXA7XG4gICAgICAgICAgICAgICAgICAgIGorKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL+ebtOaSreWNleWTgeS4iuS8oOS/oeaBr1xuICAgICAgICAgICAgdmFyIHJlc0luZm8gPSB7XG4gICAgICAgICAgICAgICAgLy8g55u05pKt5ZCN56ewXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgIC8v55u05pKt566A5LuLXG4gICAgICAgICAgICAgICAgc3VtbWFyeTpzdW1tYXJ5LFxuICAgICAgICAgICAgICAgIC8v55u05pKt57G75Z6LXG4gICAgICAgICAgICAgICAgYWxpdmVfdHlwZTphbGl2ZVR5cGUsXG4gICAgICAgICAgICAgICAgLy8gICDnm7Tmkq3lsIHpnaLlnLDlnYBcbiAgICAgICAgICAgICAgICBpbWdfdXJsOiBpbWFnZTFVcmwsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3lrqPkvKDlsIHpnaLlnLDlnYBcbiAgICAgICAgICAgICAgICBhbGl2ZV9pbWdfdXJsOiBpbWFnZTNVcmwsXG4gICAgICAgICAgICAgICAgLy/op4bpopHlkI3np7BcbiAgICAgICAgICAgICAgICBmaWxlX25hbWU6IFZpZGVvTmFtZSxcbiAgICAgICAgICAgICAgICAvL+ebtOaSreW8gOWni+aXtumXtFxuICAgICAgICAgICAgICAgIHpiX3N0YXJ0X2F0OnpiU3RhcnRBdCxcbiAgICAgICAgICAgICAgICAvL+ebtOaSree7k+adn+aXtumXtFxuICAgICAgICAgICAgICAgIHpiX3N0b3BfYXQ6emJFbmRBdCxcbiAgICAgICAgICAgICAgICAvL+S6keeCueaSreaWh+S7tmlkXG4gICAgICAgICAgICAgICAgLy9maWxlX2lkOiBBbGl2ZUZpbGVJZCxcbiAgICAgICAgICAgICAgICAvLy8vIOebtOaSreWkp+Wwj1xuICAgICAgICAgICAgICAgIC8vdmlkZW9fc2l6ZTogQWxpdmVTaXplLFxuICAgICAgICAgICAgICAgIC8v55u05pKt6K+m5oOFXG4gICAgICAgICAgICAgICAgZGVzY3JiOiBkZXNjcmliLFxuICAgICAgICAgICAgICAgIC8v5Y6f5aeL5paH5pysXG4gICAgICAgICAgICAgICAgb3JnX2NvbnRlbnQ6IG9yZ0NvbnRlbnQsXG4gICAgICAgICAgICAgICAgLy/ku5jotLnku7fmoLxcbiAgICAgICAgICAgICAgICBwaWVjZV9wcmljZTogcmVzUHJpemUsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nirbmgIFcbiAgICAgICAgICAgICAgICBzdGF0ZTpzdGF0ZSxcbiAgICAgICAgICAgICAgICAvL+S4iuaetuaXtumXtFxuICAgICAgICAgICAgICAgIHN0YXJ0X2F0OiBzdGFydEF0LFxuICAgICAgICAgICAgICAgIC8vaWRcbiAgICAgICAgICAgICAgICBpZDogR2V0UXVlcnlTdHJpbmcoJ2lkJykgfHwgbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8v55u05pKt6aKd5aSW5L+h5oGvXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2VQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLy/kupHngrnmkq3nm7Tmkq1pZFxuICAgICAgICAgICAgICAgIHB1YmxpY192aWRlbzogQWxpdmVGaWxlSWQsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3lpKflsI9cbiAgICAgICAgICAgICAgICBwdWJsaWNfc2l6ZV90ZXh0OiBBbGl2ZVNpemVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v5piv5ZCm5LuY6LS577yIMeihqOekuuWFjei0ue+8jDLooajnpLrljZXnrJTvvIlcbiAgICAgICAgICAgIGlmKHJlc291cmNlRnJlZSkge1xuICAgICAgICAgICAgICAgIHJlc0luZm8ucGF5bWVudF90eXBlID0gcmVzb3VyY2VGcmVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+ebtOaSreaPkOmGklxuICAgICAgICAgICAgcmVzSW5mby5pZl9wdXNoID0gaWZfcHVzaDtcbiAgICAgICAgICAgIGlmKGlmX3B1c2g9PTAgfHwgaWZfcHVzaD09MSl7XG4gICAgICAgICAgICAgICAgcmVzSW5mby5wdXNoX2FoZWFkID0gcHVzaF9haGVhZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy/ojrflj5booajljZXkuK3nmoTmlbDmja5cbiAgICAgICAgICAgIGlmIChjaGVja0FsaXZlRm9ybShyZXNJbmZvKSkge1xuICAgICAgICAgICAgICAgIHZhciBhbGxQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogcmVzSW5mbyxcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfdHlwZTogcmVzb3VyY2VUeXBlLFxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRfY2hhbm5lbF90eXBlOiB1cGxvYWRDaGFubmVsVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcGFja2FnZV9pZDogcGFja2FnZUlkLFxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV9wYXJhbXM6IHJlc291cmNlUGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX25hbWU6IHBhY2thZ2VOYW1lLFxuICAgICAgICAgICAgICAgICAgICByb2xlUGFyYW1zOiByb2xlUGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeV90eXBlOmNsYXNzQXJyYXlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oZ29sYmFsVXJsLCBhbGxQYXJhbXMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsbFBhcmFtcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gbWFuYWdlQWxpdmU7XG59KCk7XG4iXX0=
