<template>
    <div class="index-part-add">
        <div class="main-title">添加模块</div>
        <div class="operation-part">
            <div class="wrapper">
                <div class="add-button" :class="{cannot:isBanner}" @click="addClick(1)">轮播图</div>
                <div class="add-button" :class="{cannot:isCommunity}" @click="addClick(3)">小社群</div>
                <div class="add-button" :class="{cannot:isMember}" @click="addClick(4)">频道</div>
                <div class="add-button" :class="{cannot:isAlive}" @click="addClick(6)">直播</div>
                <div class="add-button" :class="{cannot:isRecommend}" @click="addClick(7)">最新</div>
                <div class="add-button" :class="{cannot:isActivity}" @click="addClick(8)">活动</div>
                <div class="add-button" :class="{cannot:isCategory}" @click="addClick(2)">分类导航</div>
                <div class="add-button" :class="{cannot:isQuestion}" @click="addClick(5)">问答</div>
            </div>
        </div>
    </div>
</template>

<script>
    import EventBus from '../../libs/eventbus.js';
    export default {
        props:['index_sort'],
        data:function () {
            return {
                all_part:[1, 2, 3, 4, 5, 6, 7, 8],
                isBanner:false,
                isCommunity:false,
                isMember:false,
                isAlive:false,
                isRecommend:false,
                isActivity:false,
                isCategory:false,
                isQuestion:false
            }
        },
        created:function () {
            EventBus.$on('delete_part',this.updatePartArr);

            for (let i=0;i<this.index_sort.length;i++){
                if(this.all_part.indexOf(this.index_sort[i]) > -1){
                    switch(this.index_sort[i]){
                        case 1:
                            this.isBanner = true;
                            break;
                        case 2:
                            this.isCategory = true;
                            break;
                        case 3:
                            this.isCommunity = true;
                            break;
                        case 4:
                            this.isMember = true;
                            break;
                        case 5:
                            this.isQuestion = true;
                            break;
                        case 6:
                            this.isAlive = true;
                            break;
                        case 7:
                            this.isRecommend = true;
                            break;
                        case 8:
                            this.isActivity = true;
                            break;
                        default:
                            break;
                    }
                }
            }
        },
        methods:{
            addClick:function (index) {
                switch(index)
                {
                    case 1:
                        if(!this.isBanner){
                            EventBus.$emit('add_part', 1);
                            this.isBanner = true;
                        }
                        break;
                    case 3:
                        if(!this.isCommunity){
                            EventBus.$emit('add_part', 3);
                            this.isCommunity = true;
                        }
                        break;
                    case 4:
                        if(!this.isMember){
                            EventBus.$emit('add_part', 4);
                            this.isMember = true;
                        }
                        break;
                    case 6:
                        if(!this.isAlive){
                            EventBus.$emit('add_part', 6);
                            this.isAlive = true;
                        }
                        break;
                    case 7:
                        if(!this.isRecommend){
                            EventBus.$emit('add_part', 7);
                            this.isRecommend = true;
                        }
                        break;
                    case 8:
                        if(!this.isActivity){
                            EventBus.$emit('add_part', 8);
                            this.isActivity = true;
                        }
                        break;
                    case 2:
                        if(!this.isCategory){
                            EventBus.$emit('add_part', 2);
                            this.isCategory = true;
                        }
                        break;
                    case 5:
                        if(!this.isQuestion){
                            EventBus.$emit('add_part', 5);
                            this.isQuestion = true;
                        }
                        break;
                    default:
                        break;
                }
            },
            updatePartArr:function (arr) {
                for (let i=0;i<this.all_part.length;i++){
                    if(arr.indexOf(this.all_part[i]) > -1){

                    }else {
                        switch(this.all_part[i]){
                            case 1:
                                this.isBanner = false;
                                break;
                            case 2:
                                this.isCategory = false;
                                break;
                            case 3:
                                this.isCommunity = false;
                                break;
                            case 4:
                                this.isMember = false;
                                break;
                            case 5:
                                this.isQuestion = false;
                                break;
                            case 6:
                                this.isAlive = false;
                                break;
                            case 7:
                                this.isRecommend = false;
                                break;
                            case 8:
                                this.isActivity = false;
                                break;
                            default:
                                break;
                        }
                    }
                }
            }
        }
    }
</script>

<style>
    .main-title {
        height: 22px;
        line-height: 22px;
        font-size: 16px;
        text-align: center;
        color: #353535;
        margin-top: 20px;
        margin-bottom: 10px;
    }
    .operation-part {
        padding: 0 11px;
        background-color: #efeff4;
        width: 100%;
        box-sizing: border-box;
        font-size: 0;
    }
    .sub-title {
        height: 20px;
        line-height: 20px;
        font-size: 14px;
        color: #666666;
        margin-bottom: 10px;
    }
    .wrapper {
        padding-bottom: 15px;
    }
    .add-button {
        display: inline-block;
        font-size: 14px;
        width: calc((100% - 10px) / 3);
        height: 40px;
        line-height: 40px;
        margin-right: 5px;
        margin-bottom: 5px;
        border-radius: 2px;
        background-color: #ffffff;
        border: solid 1px #dedede;
        text-align: center;
        color: #2a75ed;
        box-sizing: border-box;
        cursor: pointer;
    }
    .add-button:nth-child(3), .add-button:nth-child(6) {
        margin-right: 0;
    }
    .cannot {
        cursor: default;
        color: #888888;
    }
</style>