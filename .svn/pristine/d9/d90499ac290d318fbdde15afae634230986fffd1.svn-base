$(document).ready(function(){$exeBookList.init()});$exeBookList=function(){var e={addUserType:0,exerciseBookId:-1};var i={userListPageIndex:1,userListSearchContent:"",isSearchUserWindowLoading:false,isSearchUserWindowToBottom:false};e.init=function(){var c=$("#admin_data").val(),l=GetQueryString("page")||1;var w=sessionStorage.getItem("lastExerciseBookId"),f=sessionStorage.getItem("lastResourceType");if(w&&w!=""){sessionStorage.setItem("lastExerciseBookId","");sessionStorage.setItem("lastResourceType","");e.exerciseBookId=w;if(f==4){baseUtils.show.redTip("直播作业人员管理，请前往直播列表-嘉宾设置进行相关操作")}else{baseUtils.showWindow("roleManageWindow");$("#windowContent1").html('<div class="windowNoData" id="windowNoData1">暂无老师和助教，请点击下方按钮快速添加人员</div>')}}$("._switchOperateArea").on("click","._functionSwitch",function(e){var i=$(e.delegateTarget),a=i.data("switch_state"),t=0;var s={$currentDom:$(this),$delegateDom:i,switchState:a,onText:i.data("on_text"),offText:i.data("off_text")};if(a){t=0}else{t=1}$.ajax("/exercise/set_exercise_book_system_state",{type:"POST",dataType:"json",data:{is_show_exercise_system:t},success:function(e){if(e.code==0){baseUtils.show.blueTip(t==1?"开启成功":"功能已关闭，所有作业内容将不继续在店铺内显示");d(s);if(t==0){if(c){$("#contentNoData").remove()}else{$("#tableContent").hide();$("#listPage").hide()}$("#tableHeader").after('<div class="contentNoData" id="functionHasClose">功能已关闭, 作业内容暂时不显示</div>')}else{$("#functionHasClose").remove();if(c){$("#tableHeader").after('<div class="contentNoData" id="contentNoData">暂无数据</div>')}else{$("#tableContent").show();$("#listPage").show()}}}else{baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,i,a){console.log(a);baseUtils.show.redTip("服务器出小差了，请稍后再试！")}})});$("#createExerciseBook").click(function(){window.location.href="/exercise/create_exercise_book?page_index="+l});$(".operateList > li.operate").click(function(){var i=$(this),t=i.parents(".exerciseBookOperateArea"),s=i.data("type"),o=t.data("resource_id"),n=t.data("resource_type"),r=t.data("exercise_book_id"),d=t.data("role_list");e.exerciseBookId=r;switch(s){case"role_manage":a(n,d);break;case"exercise_list":window.location.href="/exercise/exercise_list?exercise_book_id="+r+"&page_index="+l;break;case"edit_exercise_book":window.location.href="/exercise/edit_exercise_book?exercise_book_id="+r+"&page_index="+l;break;default:console.log("参数错误");break}});$("#windowCloseIcon1").click(function(){baseUtils.hideWindow("roleManageWindow")});$("#windowHoverBox").on("click","li",function(){var i=$(this).data("type");if(i=="add_teacher"){if(o()){baseUtils.show.redTip("一个作业本仅能设置1位老师，请先将已设置的老师改为助教");return false}e.addUserType=0}else if(i=="add_assistant"){e.addUserType=1}t()});$("#windowContent1").on("click",".roleTypeRadio",function(e){var i=$(this),a=i.children(".circleRadio").data("role_type");if(i.children(".circleRadio").hasClass("radioActive")){return false}if(a==0&&o()){baseUtils.show.redTip("一个作业本仅能设置1位老师，请先将已设置的老师改为助教");return false}i.parents(".roleTypeRadioWrapper").find(".circleRadio").removeClass("radioActive");i.children(".circleRadio").addClass("radioActive")});$("#roleManageWindow").on("click",".deleteSingleUser",function(){var e=$(this).parents(".singleUserInfo1");e.css({height:"0",padding:"0"});setTimeout(function(){e.remove();var i=$("#windowContent1").find(".singleUserInfo1").length;if(i==0){$("#windowContent1").html('<div class="windowNoData" id="windowNoData1">暂无老师和助教，请点击下方按钮快速添加人员</div>')}},300)});$("#confirmSaveRole").click(function(){var i=$("#windowContent1").find(".singleUserInfo1"),a={};i.each(function(){var e=$(this).data("user_id"),i=$(this).find(".circleRadio.radioActive").data("role_type");if(a[e]==undefined){a[e]={user_id:e,role_type:i}}});baseUtils.showLoading("roleManageLoading");$.ajax("/exercise/set_exercise_book_role",{type:"POST",dataType:"json",data:{exercise_book_roles:a,exercise_book_id:e.exerciseBookId},success:function(e){baseUtils.hideLoading("roleManageLoading");if(e.code==0){baseUtils.hideWindow("roleManageWindow");baseUtils.show.blueTip("保存成功");setTimeout(function(){window.location.reload()},1e3)}else{baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,i,a){baseUtils.hideLoading("roleManageLoading");console.log(a);alert("服务器出小差了，请稍后再试！")}})});$("#windowCloseIcon2").click(function(){baseUtils.hideWindow("searchUserWindow");baseUtils.showWindow("roleManageWindow")});$("#searchUserWindow").on("click","#windowSearchBtn",function(){i.userListPageIndex=1;i.userListSearchContent=$.trim($("#windowSearchInput").val());i.isSearchUserWindowToBottom=false;$("#searchUserWindow .windowContentWrapper2").scrollTop(0);n()});$("#windowSearchInput").on("keypress",function(e){if(e.keyCode==13){$("#windowSearchBtn").click()}});$("#searchUserWindow .windowContentWrapper2").scroll(function(e){var a=$("#windowContent2").height(),t=$(this).height(),s=$(this).scrollTop();if(s+t>=a-5&&!i.isSearchUserWindowLoading&&!i.isSearchUserWindowToBottom){n()}});$("#windowContent2").on("change",".selectSingleGuest",function(i){var a=$(i.target),t=a.prop("checked");if(t&&e.addUserType==0){var s=$("#windowContent2").find(".selectSingleGuest:checked").not(".disabledInput").length;if(s>1){baseUtils.show.redTip("一个作业本仅能设置1位老师");a.prop("checked",false)}}});$("#confirmSaveAddedUser").click(function(){var i=$(".selectSingleGuest:checked"),a={};i.each(function(){var i=$(this).parents(".singleGuestInfo2"),t=i.data("user_id"),s=i.data("wx_avatar"),o=i.data("wx_nickname"),n=e.addUserType;if(a[t]==undefined){a[t]={user_id:t,wx_avatar:s,wx_nickname:o,role_type:n}}});var t=r();var o="";$.each(a,function(e,i){if(t.indexOf(e)==-1){o+=s(i)}});if(o.length>0){$("#windowNoData1").remove();$("#windowContent1").append(o)}baseUtils.hideWindow("searchUserWindow");baseUtils.showWindow("roleManageWindow")})};function a(e,i){if(e==4){$.alert("直播作业请前往 [直播列表-嘉宾设置] 进行老师/助教设置。标签为讲师的嘉宾为老师，其余为助教",{title:"直播作业人员管理",btn:2});return false}baseUtils.showWindow("roleManageWindow");var a="";$.each(i,function(e,i){a+=s(i)});if(a.length==0){a='<div class="windowNoData" id="windowNoData1">暂无老师和助教，请点击下方按钮快速添加人员</div>'}$("#windowContent1").html(a)}function t(){baseUtils.hideWindow("roleManageWindow");$("#searchUserWindow").find(".headerText1").text(e.addUserType==0?"添加老师":"添加助教");$("#windowContent2").html("");$("#windowSearchInput").val("");baseUtils.showWindow("searchUserWindow");i.isSearchUserWindowToBottom=false;i.userListPageIndex=1;i.userListSearchContent="";n()}function s(e){var i='<div class="singleUserInfo1" data-user_id="'+e.user_id+'">'+'<img class="singleGuestAvatar1" src="'+e.wx_avatar+'">'+'<div class="singleGuestName1" title="'+e.wx_nickname+'">'+e.wx_nickname+"</div>"+'<div class="roleTypeRadioWrapper">'+'<div class="roleTypeRadio">'+'<span class="circleRadio '+(e.role_type==0?"radioActive":"")+'" data-role_type="0"></span><span>老师</span>'+"</div>"+'<div class="roleTypeRadio">'+'<span class="circleRadio '+(e.role_type==1?"radioActive":"")+'" data-role_type="1"></span><span>助教</span>'+"</div>"+"</div>"+'<div class="deleteSingleUser">移除</div>'+"</div>";return i}function o(){var e=false,i=$("#windowContent1").find(".circleRadio.radioActive");i.each(function(){var i=$(this).data("role_type");if(i==0){e=true;return false}});return e}function n(){baseUtils.showLoading("searchUserLoading");i.isSearchUserWindowLoading=true;$.ajax("/zbsearch",{type:"GET",dataType:"json",data:{page:i.userListPageIndex,search:i.userListSearchContent},success:function(e){var a=r();baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;var t=$("#windowContent2"),s="",o=e.page_offset;$.each(e.data,function(e,i){var t=a.indexOf(i.user_id)!=-1;s+='<div class="singleGuestInfo2" data-user_id="'+i.user_id+'" data-wx_avatar="'+i.wx_avatar+'" data-wx_nickname="'+i.wx_nickname+'">'+'<input type="checkbox" '+(t?"checked disabled":"")+' class="selectSingleGuest '+(t?"disabledInput":"")+'" id="'+i.user_id+'">'+'<label for="'+i.user_id+'" class="singleGuestLabel">'+'<img src="'+i.wx_avatar+'" class="singleGuestAvatar2">'+'<div class="singleGuestName2" title="'+i.wx_nickname+'">'+i.wx_nickname+"</div>"+"</label>"+"</div>"});if(s.length==0){s='<div class="windowNoData" id="windowNoData2">暂无数据</div>'}if(i.userListPageIndex==1){t.html(s);t.append('<div class="isDown">更多数据加载中</div>')}else{t.find(".isDown").before(s)}if(o.current_page>=o.total_pages){var n=0;if(o.total_count>10){t.find(".isDown").text("数据已加载完毕");n=3e3}else{n=0}setTimeout(function(){t.find(".isDown").hide()},n);i.isSearchUserWindowToBottom=true}i.userListPageIndex++},error:function(e,a,t){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;console.log(t);alert("服务器出小差了，请稍后再试！")}})}function r(){var e=$("#windowContent1").find(".singleUserInfo1"),i=[];e.each(function(){var e=$(this).data("user_id");i.push(e)});return i}function d(e){var i=!e.switchState;if(i){e.$currentDom.css({"background-color":"#2FCE6F"});e.$currentDom.children("._switchDescText").css({left:"9px"}).text(e.onText);e.$currentDom.children("._switchButtonIcon").css({left:"40px"})}else{e.$currentDom.css({"background-color":"#c2c2c2"});e.$currentDom.children("._switchDescText").css({left:"44px"}).text(e.offText);e.$currentDom.children("._switchButtonIcon").css({left:"0px"})}e.$delegateDom.data("switch_state",i)}return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4ZXJjaXNlQm9va0xpc3QuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCIkZXhlQm9va0xpc3QiLCJpbml0IiwiYWRkVXNlclR5cGUiLCJleGVyY2lzZUJvb2tJZCIsIiRwcml2YXRlIiwidXNlckxpc3RQYWdlSW5kZXgiLCJ1c2VyTGlzdFNlYXJjaENvbnRlbnQiLCJpc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nIiwiaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20iLCJjb250ZW50Tm9EYXRhIiwidmFsIiwiY3VycmVudFBhZ2VJbmRleCIsIkdldFF1ZXJ5U3RyaW5nIiwibGFzdEV4ZXJjaXNlQm9va0lkIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwibGFzdFJlc291cmNlVHlwZSIsInNldEl0ZW0iLCJiYXNlVXRpbHMiLCJzaG93IiwicmVkVGlwIiwic2hvd1dpbmRvdyIsImh0bWwiLCJvbiIsImUiLCIkZGVsZWdhdGVEb20iLCJkZWxlZ2F0ZVRhcmdldCIsInN3aXRjaFN0YXRlIiwiZGF0YSIsImlzX3Nob3dfZXhlcmNpc2Vfc3lzdGVtIiwiY3VycmVudEluZm8iLCIkY3VycmVudERvbSIsInRoaXMiLCJvblRleHQiLCJvZmZUZXh0IiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb2RlIiwiYmx1ZVRpcCIsImNoYW5nZVN3aXRjaEJ0blN0YXRlIiwicmVtb3ZlIiwiaGlkZSIsImFmdGVyIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwiY2xpY2siLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCIkc2VsZiIsIiRwYXJlbnQiLCJwYXJlbnRzIiwicmVzSWQiLCJyZXNUeXBlIiwicm9sZUxpc3RBcnIiLCJvcGVuUm9sZU1hbmFnZVdpbmRvdyIsImhpZGVXaW5kb3ciLCJoYXNTZXRUZWFjaGVyIiwib3BlblNlYXJjaFVzZXJXaW5kb3ciLCJjbGlja1JvbGVUeXBlIiwiY2hpbGRyZW4iLCJoYXNDbGFzcyIsImZpbmQiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiY3NzIiwiaGVpZ2h0IiwicGFkZGluZyIsInNldFRpbWVvdXQiLCJjb3VudCIsImxlbmd0aCIsImFkZGVkVXNlckxpc3QiLCJleGVyY2lzZUJvb2tSb2xlcyIsImVhY2giLCJ1c2VySWQiLCJyb2xlVHlwZSIsInVuZGVmaW5lZCIsInVzZXJfaWQiLCJyb2xlX3R5cGUiLCJzaG93TG9hZGluZyIsImV4ZXJjaXNlX2Jvb2tfcm9sZXMiLCJleGVyY2lzZV9ib29rX2lkIiwiaGlkZUxvYWRpbmciLCJyZWxvYWQiLCJhbGVydCIsInRyaW0iLCJzY3JvbGxUb3AiLCJnZXRBbGxVc2VyTGlzdCIsImtleUNvZGUiLCJzY3JvbGwiLCJEaXZIZWlnaHQiLCJTY3JvbGxIZWlnaHQiLCJTY3JvbGxUb3AiLCIkdGFyZ2V0IiwidGFyZ2V0IiwiaXNDaGVja2VkIiwicHJvcCIsIm5vdCIsImNoZWNrZWRVc2VyIiwidXNlckFyciIsInd4QXZhdGFyIiwid3hOaWNrbmFtZSIsInd4X2F2YXRhciIsInd4X25pY2tuYW1lIiwic3RvcmVkVXNlcklkQXJyIiwiZ2V0QWRkZWRVc2VySWRBcnIiLCJodG1sU3RyIiwiayIsInYiLCJpbmRleE9mIiwiZ2V0VXNlckluZm9JdGVtIiwiYXBwZW5kIiwidGl0bGUiLCJidG4iLCJ0ZXh0IiwiYWN0aXZlUmFkaW9BcnIiLCJwYWdlIiwic2VhcmNoIiwiYWRkZWRVc2VyQXJyIiwiJGFyZWEiLCJvZmZzZXQiLCJwYWdlX29mZnNldCIsImlzQWRkZWQiLCJiZWZvcmUiLCJjdXJyZW50X3BhZ2UiLCJ0b3RhbF9wYWdlcyIsInRpbWVSYW5nZSIsInRvdGFsX2NvdW50IiwicHVzaCIsInN0YXRlIiwiYmFja2dyb3VuZC1jb2xvciIsImxlZnQiXSwibWFwcGluZ3MiOiJBQUlBQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2RDLGFBQWFDLFFBR2pCRCxjQUFlLFdBQ1gsR0FBSUEsSUFDQUUsWUFB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QVdvRCxLQUFLLFVBQzNCWSxHQUFZLFFBQ1QsQ0FDSEEsRUFBWSxFQUVoQjFELFdBQVcsV0FDUG1ELEVBQU16RCxLQUFLLFdBQVd6QixRQUN2QnlGLEVBQ0hqSSxHQUFTSSwyQkFBNkIsS0FFMUNKLEVBQVNDLHFCQUdieUMsTUFBTyxTQUFVQyxFQUFLQyxFQUFRQyxHQUMxQi9CLFVBQVV1RSxZQUFZLG9CQUN0QnJGLEdBQVNHLDBCQUE0QixLQUNyQzJDLFNBQVFDLElBQUlGLEVBQ1owQyxPQUFNLHFCQVFsQixRQUFTcUIsS0FDTCxHQUFJbEMsR0FBZ0JqRixFQUFFLG1CQUFtQndFLEtBQUssb0JBQzFDd0QsSUFFSi9DLEdBQWNFLEtBQUssV0FDZixHQUFJQyxHQUFTcEYsRUFBRW1DLE1BQU1KLEtBQUssVUFDMUJpRyxHQUFhVSxLQUFLdEQsSUFFdEIsT0FBTzRDLEdBRVgsUUFBU25GLEdBQXFCWixHQUMxQixHQUFJMEcsSUFBUzFHLEVBQVlILFdBQ3pCLElBQUk2RyxFQUFPLENBQ1AxRyxFQUFZQyxZQUFZeUMsS0FBS2lFLG1CQUFvQixXQUNqRDNHLEdBQVlDLFlBQVlvQyxTQUFTLG9CQUFvQkssS0FBS2tFLEtBQVEsUUFBUWpCLEtBQUszRixFQUFZRyxPQUMzRkgsR0FBWUMsWUFBWW9DLFNBQVMsc0JBQXNCSyxLQUFLa0UsS0FBUSxhQUNqRSxDQUNINUcsRUFBWUMsWUFBWXlDLEtBQUtpRSxtQkFBb0IsV0FDakQzRyxHQUFZQyxZQUFZb0MsU0FBUyxvQkFBb0JLLEtBQUtrRSxLQUFRLFNBQVNqQixLQUFLM0YsRUFBWUksUUFDNUZKLEdBQVlDLFlBQVlvQyxTQUFTLHNCQUFzQkssS0FBS2tFLEtBQVEsUUFFeEU1RyxFQUFZTCxhQUFhRyxLQUFLLGVBQWdCNEcsR0FHbEQsTUFBT3hJIiwiZmlsZSI6ImV4ZXJjaXNlQm9va0xpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTcvNy8zMS5cclxuICovXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAkZXhlQm9va0xpc3QuaW5pdCgpO1xyXG59KTtcclxuXHJcbiRleGVCb29rTGlzdCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJGV4ZUJvb2tMaXN0ID0ge1xyXG4gICAgICAgIGFkZFVzZXJUeXBlOiAwLCAvLzAt6ICB5biI77ybMS3liqnmlZlcclxuICAgICAgICBleGVyY2lzZUJvb2tJZDogLTEsIC8v54K55Ye755qE5L2c5Lia5pys5p2h55uu55qEaWTlgLxcclxuICAgIH07XHJcbiAgICB2YXIgJHByaXZhdGUgPSB7XHJcbiAgICAgICAgdXNlckxpc3RQYWdlSW5kZXg6IDEsXHJcbiAgICAgICAgdXNlckxpc3RTZWFyY2hDb250ZW50OiBcIlwiLFxyXG4gICAgICAgIGlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tOiBmYWxzZSxcclxuICAgIH07XHJcblxyXG4gICAgJGV4ZUJvb2tMaXN0LmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBjb250ZW50Tm9EYXRhID0gJChcIiNhZG1pbl9kYXRhXCIpLnZhbCgpLFxyXG4gICAgICAgICAgICBjdXJyZW50UGFnZUluZGV4ID0gR2V0UXVlcnlTdHJpbmcoXCJwYWdlXCIpIHx8IDE7XHJcblxyXG4gICAgICAgIHZhciBsYXN0RXhlcmNpc2VCb29rSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwibGFzdEV4ZXJjaXNlQm9va0lkXCIpLFxyXG4gICAgICAgICAgICBsYXN0UmVzb3VyY2VUeXBlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImxhc3RSZXNvdXJjZVR5cGVcIik7XHJcblxyXG4gICAgICAgIC8v5qOA5p+l5piv5ZCm5Yia5Yia5Yib5bu65a6M5L2c5Lia5pysXHJcbiAgICAgICAgaWYgKGxhc3RFeGVyY2lzZUJvb2tJZCAmJiBsYXN0RXhlcmNpc2VCb29rSWQgIT0gXCJcIikge1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwibGFzdEV4ZXJjaXNlQm9va0lkXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwibGFzdFJlc291cmNlVHlwZVwiLCBcIlwiKTtcclxuICAgICAgICAgICAgJGV4ZUJvb2tMaXN0LmV4ZXJjaXNlQm9va0lkID0gbGFzdEV4ZXJjaXNlQm9va0lkO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxhc3RSZXNvdXJjZVR5cGUgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt5L2c5Lia5Lq65ZGY566h55CG77yM6K+35YmN5b6A55u05pKt5YiX6KGoLeWYieWuvuiuvue9rui/m+ihjOebuOWFs+aTjeS9nFwiKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIC8v5omT5byA5Yid5aeL5YyW5Lq65ZGY566h55CG56qX5Y+jXHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvd1dpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3dpbmRvd0NvbnRlbnQxXCIpLmh0bWwoXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ3aW5kb3dOb0RhdGFcIiBpZD1cIndpbmRvd05vRGF0YTFcIj7mmoLml6DogIHluIjlkozliqnmlZnvvIzor7fngrnlh7vkuIvmlrnmjInpkq7lv6vpgJ/mt7vliqDkurrlkZg8L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiLl9zd2l0Y2hPcGVyYXRlQXJlYVwiKS5vbihcImNsaWNrXCIsIFwiLl9mdW5jdGlvblN3aXRjaFwiLCBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICAgICAgdmFyICRkZWxlZ2F0ZURvbSA9ICQoZS5kZWxlZ2F0ZVRhcmdldCksXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hTdGF0ZSA9ICRkZWxlZ2F0ZURvbS5kYXRhKFwic3dpdGNoX3N0YXRlXCIpLFxyXG4gICAgICAgICAgICAgICAgaXNfc2hvd19leGVyY2lzZV9zeXN0ZW0gPSAwO1xyXG5cclxuICAgICAgICAgICAgdmFyIGN1cnJlbnRJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgJGN1cnJlbnREb206ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAkZGVsZWdhdGVEb206ICRkZWxlZ2F0ZURvbSxcclxuICAgICAgICAgICAgICAgIHN3aXRjaFN0YXRlOiBzd2l0Y2hTdGF0ZSxcclxuICAgICAgICAgICAgICAgIG9uVGV4dDogJGRlbGVnYXRlRG9tLmRhdGEoXCJvbl90ZXh0XCIpLFxyXG4gICAgICAgICAgICAgICAgb2ZmVGV4dDogJGRlbGVnYXRlRG9tLmRhdGEoXCJvZmZfdGV4dFwiKVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoc3dpdGNoU3RhdGUpIHsvL+W9k+WJjeS4uuaJk+W8gOeKtuaAgVxyXG4gICAgICAgICAgICAgICAgaXNfc2hvd19leGVyY2lzZV9zeXN0ZW0gPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXNfc2hvd19leGVyY2lzZV9zeXN0ZW0gPSAxO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkLmFqYXgoXCIvZXhlcmNpc2Uvc2V0X2V4ZXJjaXNlX2Jvb2tfc3lzdGVtX3N0YXRlXCIsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIGlzX3Nob3dfZXhlcmNpc2Vfc3lzdGVtOiBpc19zaG93X2V4ZXJjaXNlX3N5c3RlbSwvLygwLeS4jeW8gOWQrzsxLeW8gOWQrylcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChpc19zaG93X2V4ZXJjaXNlX3N5c3RlbSA9PSAxID8gIFwi5byA5ZCv5oiQ5YqfXCIgOiBcIuWKn+iDveW3suWFs+mXre+8jOaJgOacieS9nOS4muWGheWuueWwhuS4jee7p+e7reWcqOW6l+mTuuWGheaYvuekulwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2hhbmdlU3dpdGNoQnRuU3RhdGUoY3VycmVudEluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaXNfc2hvd19leGVyY2lzZV9zeXN0ZW0gPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnROb0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2NvbnRlbnROb0RhdGFcIikucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjdGFibGVDb250ZW50XCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2xpc3RQYWdlXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjdGFibGVIZWFkZXJcIikuYWZ0ZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb250ZW50Tm9EYXRhXCIgaWQ9XCJmdW5jdGlvbkhhc0Nsb3NlXCI+5Yqf6IO95bey5YWz6ZetLCDkvZzkuJrlhoXlrrnmmoLml7bkuI3mmL7npLo8L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNmdW5jdGlvbkhhc0Nsb3NlXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnROb0RhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3RhYmxlSGVhZGVyXCIpLmFmdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImNvbnRlbnROb0RhdGFcIiBpZD1cImNvbnRlbnROb0RhdGFcIj7mmoLml6DmlbDmja48L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiN0YWJsZUNvbnRlbnRcIikuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjbGlzdFBhZ2VcIikuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi572R57uc6Zeu6aKY77yM6K+356iN5ZCO5YaN6K+VXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+aWsOW7uuS9nOS4muacrFxyXG4gICAgICAgICQoXCIjY3JlYXRlRXhlcmNpc2VCb29rXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9leGVyY2lzZS9jcmVhdGVfZXhlcmNpc2VfYm9vaz9wYWdlX2luZGV4PVwiK2N1cnJlbnRQYWdlSW5kZXg7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5L2c5Lia5pys55qE5pON5L2cXHJcbiAgICAgICAgJChcIi5vcGVyYXRlTGlzdCA+IGxpLm9wZXJhdGVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHNlbGYgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgJHBhcmVudCA9ICRzZWxmLnBhcmVudHMoXCIuZXhlcmNpc2VCb29rT3BlcmF0ZUFyZWFcIiksXHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJHNlbGYuZGF0YShcInR5cGVcIiksXHJcbiAgICAgICAgICAgICAgICByZXNJZCA9ICRwYXJlbnQuZGF0YShcInJlc291cmNlX2lkXCIpLFxyXG4gICAgICAgICAgICAgICAgcmVzVHlwZSA9ICRwYXJlbnQuZGF0YShcInJlc291cmNlX3R5cGVcIiksXHJcbiAgICAgICAgICAgICAgICBleGVyY2lzZUJvb2tJZCA9ICRwYXJlbnQuZGF0YShcImV4ZXJjaXNlX2Jvb2tfaWRcIiksXHJcbiAgICAgICAgICAgICAgICByb2xlTGlzdEFyciA9ICRwYXJlbnQuZGF0YShcInJvbGVfbGlzdFwiKTtcclxuXHJcbiAgICAgICAgICAgICRleGVCb29rTGlzdC5leGVyY2lzZUJvb2tJZCA9IGV4ZXJjaXNlQm9va0lkO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwicm9sZV9tYW5hZ2VcIjpcclxuICAgICAgICAgICAgICAgICAgICBvcGVuUm9sZU1hbmFnZVdpbmRvdyhyZXNUeXBlLCByb2xlTGlzdEFycik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZXhlcmNpc2VfbGlzdFwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXCIvZXhlcmNpc2UvZXhlcmNpc2VfbGlzdD9leGVyY2lzZV9ib29rX2lkPVwiK2V4ZXJjaXNlQm9va0lkK1wiJnBhZ2VfaW5kZXg9XCIrY3VycmVudFBhZ2VJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJlZGl0X2V4ZXJjaXNlX2Jvb2tcIjpcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiL2V4ZXJjaXNlL2VkaXRfZXhlcmNpc2VfYm9vaz9leGVyY2lzZV9ib29rX2lkPVwiK2V4ZXJjaXNlQm9va0lkK1wiJnBhZ2VfaW5kZXg9XCIrY3VycmVudFBhZ2VJbmRleDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlj4LmlbDplJnor69cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKiDkurrlkZjorr7nva7nqpflj6MgKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgICAgICAkKFwiI3dpbmRvd0Nsb3NlSWNvbjFcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuaGlkZVdpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/mt7vliqDkurrlkZhcclxuICAgICAgICAkKFwiI3dpbmRvd0hvdmVyQm94XCIpLm9uKFwiY2xpY2tcIiwgXCJsaVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlID0gJCh0aGlzKS5kYXRhKFwidHlwZVwiKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJhZGRfdGVhY2hlclwiKSB7Ly/pnIDopoHliqDpmZDliLZcclxuICAgICAgICAgICAgICAgIGlmIChoYXNTZXRUZWFjaGVyKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIDkuKrkvZzkuJrmnKzku4Xog73orr7nva4x5L2N6ICB5biI77yM6K+35YWI5bCG5bey6K6+572u55qE6ICB5biI5pS55Li65Yqp5pWZXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRleGVCb29rTGlzdC5hZGRVc2VyVHlwZSA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImFkZF9hc3Npc3RhbnRcIikge1xyXG4gICAgICAgICAgICAgICAgJGV4ZUJvb2tMaXN0LmFkZFVzZXJUeXBlID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcGVuU2VhcmNoVXNlcldpbmRvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJhZGlvIOaMiemSrueCueWHu+WIh+aNouaViOaenFxyXG4gICAgICAgICQoJyN3aW5kb3dDb250ZW50MScpLm9uKCdjbGljaycsICcucm9sZVR5cGVSYWRpbycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGNsaWNrUm9sZVR5cGUgPSAkc2VsZi5jaGlsZHJlbihcIi5jaXJjbGVSYWRpb1wiKS5kYXRhKFwicm9sZV90eXBlXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRzZWxmLmNoaWxkcmVuKFwiLmNpcmNsZVJhZGlvXCIpLmhhc0NsYXNzKFwicmFkaW9BY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2xpY2tSb2xlVHlwZSA9PSAwICYmIGhhc1NldFRlYWNoZXIoKSkgeyAgIC8v6K6+572u5Li66ICB5biIXHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIDkuKrkvZzkuJrmnKzku4Xog73orr7nva4x5L2N6ICB5biI77yM6K+35YWI5bCG5bey6K6+572u55qE6ICB5biI5pS55Li65Yqp5pWZXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzZWxmLnBhcmVudHMoXCIucm9sZVR5cGVSYWRpb1dyYXBwZXJcIikuZmluZChcIi5jaXJjbGVSYWRpb1wiKS5yZW1vdmVDbGFzcygncmFkaW9BY3RpdmUnKTtcclxuICAgICAgICAgICAgJHNlbGYuY2hpbGRyZW4oJy5jaXJjbGVSYWRpbycpLmFkZENsYXNzKCdyYWRpb0FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v56e76Zmk55So5oi3XHJcbiAgICAgICAgJChcIiNyb2xlTWFuYWdlV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIuZGVsZXRlU2luZ2xlVXNlclwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKFwiLnNpbmdsZVVzZXJJbmZvMVwiKTtcclxuXHJcbiAgICAgICAgICAgICRwYXJlbnQuY3NzKHtcImhlaWdodFwiOiBcIjBcIiwgXCJwYWRkaW5nXCI6IFwiMFwifSk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHBhcmVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9ICQoXCIjd2luZG93Q29udGVudDFcIikuZmluZChcIi5zaW5nbGVVc2VySW5mbzFcIikubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI3dpbmRvd0NvbnRlbnQxXCIpLmh0bWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwid2luZG93Tm9EYXRhXCIgaWQ9XCJ3aW5kb3dOb0RhdGExXCI+5pqC5peg6ICB5biI5ZKM5Yqp5pWZ77yM6K+354K55Ye75LiL5pa55oyJ6ZKu5b+r6YCf5re75Yqg5Lq65ZGYPC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/kv53lrZjkurrlkZhcclxuICAgICAgICAkKFwiI2NvbmZpcm1TYXZlUm9sZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhZGRlZFVzZXJMaXN0ID0gJChcIiN3aW5kb3dDb250ZW50MVwiKS5maW5kKFwiLnNpbmdsZVVzZXJJbmZvMVwiKSxcclxuICAgICAgICAgICAgICAgIGV4ZXJjaXNlQm9va1JvbGVzID0ge307XHJcblxyXG4gICAgICAgICAgICBhZGRlZFVzZXJMaXN0LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJJZCA9ICQodGhpcykuZGF0YShcInVzZXJfaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZVR5cGUgPSAkKHRoaXMpLmZpbmQoXCIuY2lyY2xlUmFkaW8ucmFkaW9BY3RpdmVcIikuZGF0YShcInJvbGVfdHlwZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChleGVyY2lzZUJvb2tSb2xlc1t1c2VySWRdID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4ZXJjaXNlQm9va1JvbGVzW3VzZXJJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZV90eXBlOiByb2xlVHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvd0xvYWRpbmcoXCJyb2xlTWFuYWdlTG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgJC5hamF4KFwiL2V4ZXJjaXNlL3NldF9leGVyY2lzZV9ib29rX3JvbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhlcmNpc2VfYm9va19yb2xlczogZXhlcmNpc2VCb29rUm9sZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhlcmNpc2VfYm9va19pZDogJGV4ZUJvb2tMaXN0LmV4ZXJjaXNlQm9va0lkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcInJvbGVNYW5hZ2VMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwicm9sZU1hbmFnZVdpbmRvd1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuS/neWtmOaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmXrumimO+8jOivt+eojeWQjuWGjeivlVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVMb2FkaW5nKFwicm9sZU1hbmFnZUxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKiog5Lq65ZGY5pCc57Si56qX5Y+jICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICAgICAgJChcIiN3aW5kb3dDbG9zZUljb24yXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJzZWFyY2hVc2VyV2luZG93XCIpO1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvd1dpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/ngrnlh7vmkJzntKJcclxuICAgICAgICAkKFwiI3NlYXJjaFVzZXJXaW5kb3dcIikub24oXCJjbGlja1wiLCBcIiN3aW5kb3dTZWFyY2hCdG5cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkcHJpdmF0ZS51c2VyTGlzdFBhZ2VJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICRwcml2YXRlLnVzZXJMaXN0U2VhcmNoQ29udGVudCA9ICQudHJpbSgkKFwiI3dpbmRvd1NlYXJjaElucHV0XCIpLnZhbCgpKTtcclxuICAgICAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20gPSBmYWxzZTtcclxuICAgICAgICAgICAgJCgnI3NlYXJjaFVzZXJXaW5kb3cgLndpbmRvd0NvbnRlbnRXcmFwcGVyMicpLnNjcm9sbFRvcCgwKTtcclxuICAgICAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKFwiI3dpbmRvd1NlYXJjaElucHV0XCIpLm9uKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgJChcIiN3aW5kb3dTZWFyY2hCdG5cIikuY2xpY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5ruR5Yqo5Yqg6L295pu05aSaXHJcbiAgICAgICAgJCgnI3NlYXJjaFVzZXJXaW5kb3cgLndpbmRvd0NvbnRlbnRXcmFwcGVyMicpLnNjcm9sbChmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBEaXZIZWlnaHQgPSAkKCcjd2luZG93Q29udGVudDInKS5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIFNjcm9sbEhlaWdodCA9ICQodGhpcykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBTY3JvbGxUb3AgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICBpZiAoKFNjcm9sbFRvcCArIFNjcm9sbEhlaWdodCA+PSBEaXZIZWlnaHQgLSA1KSAmJiAhJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICYmICEkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5re75Yqg6ICB5biI5pe277yM5re75Yqg6ZmQ5Yi277yM5Y+q6IO96YCJ5Lit5LiA5LiqXHJcbiAgICAgICAgJChcIiN3aW5kb3dDb250ZW50MlwiKS5vbihcImNoYW5nZVwiLCBcIi5zZWxlY3RTaW5nbGVHdWVzdFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgaXNDaGVja2VkID0gJHRhcmdldC5wcm9wKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgaWYgKGlzQ2hlY2tlZCAmJiAkZXhlQm9va0xpc3QuYWRkVXNlclR5cGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gJChcIiN3aW5kb3dDb250ZW50MlwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnNlbGVjdFNpbmdsZUd1ZXN0OmNoZWNrZWRcIikubm90KCcuZGlzYWJsZWRJbnB1dCcpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA+IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIDkuKrkvZzkuJrmnKzku4Xog73orr7nva4x5L2N6ICB5biIXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICR0YXJnZXQucHJvcChcImNoZWNrZWRcIiwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/mt7vliqDkurrlkZhcclxuICAgICAgICAkKFwiI2NvbmZpcm1TYXZlQWRkZWRVc2VyXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNoZWNrZWRVc2VyID0gJChcIi5zZWxlY3RTaW5nbGVHdWVzdDpjaGVja2VkXCIpLFxyXG4gICAgICAgICAgICAgICAgdXNlckFyciA9IHt9O1xyXG4gICAgICAgICAgICBjaGVja2VkVXNlci5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKFwiLnNpbmdsZUd1ZXN0SW5mbzJcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkID0gJHBhcmVudC5kYXRhKFwidXNlcl9pZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICB3eEF2YXRhciA9ICRwYXJlbnQuZGF0YShcInd4X2F2YXRhclwiKSxcclxuICAgICAgICAgICAgICAgICAgICB3eE5pY2tuYW1lID0gJHBhcmVudC5kYXRhKFwid3hfbmlja25hbWVcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZVR5cGUgPSAkZXhlQm9va0xpc3QuYWRkVXNlclR5cGU7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJBcnJbdXNlcklkXSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICB1c2VyQXJyW3VzZXJJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3hfYXZhdGFyOiB3eEF2YXRhcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgd3hfbmlja25hbWU6IHd4Tmlja25hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGVfdHlwZTogcm9sZVR5cGVcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIHZhciBzdG9yZWRVc2VySWRBcnIgPSBnZXRBZGRlZFVzZXJJZEFycigpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGh0bWxTdHIgPSBcIlwiO1xyXG4gICAgICAgICAgICAkLmVhY2godXNlckFyciwgZnVuY3Rpb24oaywgdikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlZFVzZXJJZEFyci5pbmRleE9mKGspID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciArPSBnZXRVc2VySW5mb0l0ZW0odik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaHRtbFN0ci5sZW5ndGg+MCkge1xyXG4gICAgICAgICAgICAgICAgJChcIiN3aW5kb3dOb0RhdGExXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJChcIiN3aW5kb3dDb250ZW50MVwiKS5hcHBlbmQoaHRtbFN0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJzZWFyY2hVc2VyV2luZG93XCIpO1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvd1dpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIG9wZW5Sb2xlTWFuYWdlV2luZG93KHJlc1R5cGUsIHJvbGVMaXN0QXJyKSB7XHJcbiAgICAgICAgaWYgKHJlc1R5cGUgPT0gNCkge1xyXG4gICAgICAgICAgICAkLmFsZXJ0KFwi55u05pKt5L2c5Lia6K+35YmN5b6AIFvnm7Tmkq3liJfooagt5ZiJ5a6+6K6+572uXSDov5vooYzogIHluIgv5Yqp5pWZ6K6+572u44CC5qCH562+5Li66K6y5biI55qE5ZiJ5a6+5Li66ICB5biI77yM5YW25L2Z5Li65Yqp5pWZXCIsIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBcIuebtOaSreS9nOS4muS6uuWRmOeuoeeQhlwiLFxyXG4gICAgICAgICAgICAgICAgYnRuOiAyLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBiYXNlVXRpbHMuc2hvd1dpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcbiAgICAgICAgdmFyIGh0bWxTdHIgPSBcIlwiO1xyXG4gICAgICAgICQuZWFjaChyb2xlTGlzdEFyciwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgaHRtbFN0ciArPSBnZXRVc2VySW5mb0l0ZW0odik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKGh0bWxTdHIubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgaHRtbFN0ciA9XHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIndpbmRvd05vRGF0YVwiIGlkPVwid2luZG93Tm9EYXRhMVwiPuaaguaXoOiAgeW4iOWSjOWKqeaVme+8jOivt+eCueWHu+S4i+aWueaMiemSruW/q+mAn+a3u+WKoOS6uuWRmDwvZGl2Pic7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoXCIjd2luZG93Q29udGVudDFcIikuaHRtbChodG1sU3RyKTtcclxuXHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBvcGVuU2VhcmNoVXNlcldpbmRvdygpIHtcclxuICAgICAgICBiYXNlVXRpbHMuaGlkZVdpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcbiAgICAgICAgXHJcbiAgICAgICAgJChcIiNzZWFyY2hVc2VyV2luZG93XCIpLmZpbmQoXCIuaGVhZGVyVGV4dDFcIikudGV4dChcclxuICAgICAgICAgICAgKCRleGVCb29rTGlzdC5hZGRVc2VyVHlwZT09MCk/XCLmt7vliqDogIHluIhcIjpcIua3u+WKoOWKqeaVmVwiXHJcbiAgICAgICAgKTtcclxuICAgICAgICAkKFwiI3dpbmRvd0NvbnRlbnQyXCIpLmh0bWwoXCJcIik7XHJcbiAgICAgICAgJChcIiN3aW5kb3dTZWFyY2hJbnB1dFwiKS52YWwoXCJcIik7XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJzZWFyY2hVc2VyV2luZG93XCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tID0gZmFsc2U7XHJcbiAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggPSAxO1xyXG4gICAgICAgICRwcml2YXRlLnVzZXJMaXN0U2VhcmNoQ29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJJbmZvSXRlbSh2KSB7XHJcbiAgICAgICAgdmFyIGh0bWxTdHIgPVxyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNpbmdsZVVzZXJJbmZvMVwiIGRhdGEtdXNlcl9pZD1cIicrdi51c2VyX2lkKydcIj4nK1xyXG4gICAgICAgICAgICAgICAgJzxpbWcgY2xhc3M9XCJzaW5nbGVHdWVzdEF2YXRhcjFcIiBzcmM9XCInK3Yud3hfYXZhdGFyKydcIj4nK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzaW5nbGVHdWVzdE5hbWUxXCIgdGl0bGU9XCInK3Yud3hfbmlja25hbWUrJ1wiPicrdi53eF9uaWNrbmFtZSsnPC9kaXY+JytcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicm9sZVR5cGVSYWRpb1dyYXBwZXJcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicm9sZVR5cGVSYWRpb1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNpcmNsZVJhZGlvICcrKHYucm9sZV90eXBlPT0wPydyYWRpb0FjdGl2ZSc6JycpKydcIiBkYXRhLXJvbGVfdHlwZT1cIjBcIj48L3NwYW4+PHNwYW4+6ICB5biIPC9zcGFuPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJyb2xlVHlwZVJhZGlvXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiY2lyY2xlUmFkaW8gJysodi5yb2xlX3R5cGU9PTE/J3JhZGlvQWN0aXZlJzonJykrJ1wiIGRhdGEtcm9sZV90eXBlPVwiMVwiPjwvc3Bhbj48c3Bhbj7liqnmlZk8L3NwYW4+JytcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JytcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4nK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkZWxldGVTaW5nbGVVc2VyXCI+56e76ZmkPC9kaXY+JytcclxuICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgcmV0dXJuIGh0bWxTdHI7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBoYXNTZXRUZWFjaGVyKCkge1xyXG4gICAgICAgIHZhciBoYXNTZXRUZWFjaGVyID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGFjdGl2ZVJhZGlvQXJyID0gJChcIiN3aW5kb3dDb250ZW50MVwiKS5maW5kKFwiLmNpcmNsZVJhZGlvLnJhZGlvQWN0aXZlXCIpO1xyXG5cclxuICAgICAgICBhY3RpdmVSYWRpb0Fyci5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJvbGVUeXBlID0gJCh0aGlzKS5kYXRhKFwicm9sZV90eXBlXCIpO1xyXG4gICAgICAgICAgICBpZiAocm9sZVR5cGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaGFzU2V0VGVhY2hlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc1NldFRlYWNoZXI7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRBbGxVc2VyTGlzdCgpIHtcclxuICAgICAgICBiYXNlVXRpbHMuc2hvd0xvYWRpbmcoXCJzZWFyY2hVc2VyTG9hZGluZ1wiKTtcclxuICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAkLmFqYXgoXCIvemJzZWFyY2hcIiwge1xyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHBhZ2U6ICRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4LFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoOiAkcHJpdmF0ZS51c2VyTGlzdFNlYXJjaENvbnRlbnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG5cclxuICAgICAgICAgICAgICAgIHZhciBhZGRlZFVzZXJBcnIgPSBnZXRBZGRlZFVzZXJJZEFycigpO1xyXG5cclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcInNlYXJjaFVzZXJMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgIC8v5aGr5YWF5pWw5o2uXHJcbiAgICAgICAgICAgICAgICB2YXIgJGFyZWEgPSAkKFwiI3dpbmRvd0NvbnRlbnQyXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgPSBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHJlc3VsdC5wYWdlX29mZnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0LmRhdGEsIGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzQWRkZWQgPSAoYWRkZWRVc2VyQXJyLmluZGV4T2Yodi51c2VyX2lkKSAhPSAtMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciArPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNpbmdsZUd1ZXN0SW5mbzJcIiBkYXRhLXVzZXJfaWQ9XCInK3YudXNlcl9pZCtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIgZGF0YS13eF9hdmF0YXI9XCInK3Yud3hfYXZhdGFyKydcIiBkYXRhLXd4X25pY2tuYW1lPVwiJyt2Lnd4X25pY2tuYW1lKydcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAnKyhpc0FkZGVkPydjaGVja2VkIGRpc2FibGVkJzonJykrJyBjbGFzcz1cInNlbGVjdFNpbmdsZUd1ZXN0ICcrKGlzQWRkZWQ/J2Rpc2FibGVkSW5wdXQnOicnKSsnXCIgaWQ9XCInK3YudXNlcl9pZCsnXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8bGFiZWwgZm9yPVwiJyt2LnVzZXJfaWQrJ1wiIGNsYXNzPVwic2luZ2xlR3Vlc3RMYWJlbFwiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3JjPVwiJyt2Lnd4X2F2YXRhcisnXCIgY2xhc3M9XCJzaW5nbGVHdWVzdEF2YXRhcjJcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2luZ2xlR3Vlc3ROYW1lMlwiIHRpdGxlPVwiJyt2Lnd4X25pY2tuYW1lKydcIj4nK3Yud3hfbmlja25hbWUrJzwvZGl2PicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9sYWJlbD4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGh0bWxTdHIubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBodG1sU3RyID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ3aW5kb3dOb0RhdGFcIiBpZD1cIndpbmRvd05vRGF0YTJcIj7mmoLml6DmlbDmja48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4ID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkYXJlYS5odG1sKGh0bWxTdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRhcmVhLmFwcGVuZCgnPGRpdiBjbGFzcz1cImlzRG93blwiPuabtOWkmuaVsOaNruWKoOi9veS4rTwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkYXJlYS5maW5kKCcuaXNEb3duJykuYmVmb3JlKGh0bWxTdHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldC5jdXJyZW50X3BhZ2UgPj0gb2Zmc2V0LnRvdGFsX3BhZ2VzKSB7ICAgICAgLy/mlbDmja7liqDovb3lrozmr5XlkI7nmoTmk43kvZxcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGltZVJhbmdlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0LnRvdGFsX2NvdW50ID4gMTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuZmluZCgnLmlzRG93bicpLnRleHQoXCLmlbDmja7lt7LliqDovb3lrozmr5VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVSYW5nZSA9IDMwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJhbmdlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRhcmVhLmZpbmQoJy5pc0Rvd24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgdGltZVJhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkcHJpdmF0ZS51c2VyTGlzdFBhZ2VJbmRleCArKztcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVMb2FkaW5nKFwic2VhcmNoVXNlckxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIOiOt+WPlueql+WPo+S4gDxyb2xlTWFuYWdlV2luZG93PueahOeUqOaItyBpZCDmlbDnu4RcclxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gZ2V0QWRkZWRVc2VySWRBcnIoKSB7XHJcbiAgICAgICAgdmFyIGFkZGVkVXNlckxpc3QgPSAkKFwiI3dpbmRvd0NvbnRlbnQxXCIpLmZpbmQoXCIuc2luZ2xlVXNlckluZm8xXCIpLFxyXG4gICAgICAgICAgICBhZGRlZFVzZXJBcnIgPSBbXTtcclxuXHJcbiAgICAgICAgYWRkZWRVc2VyTGlzdC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHVzZXJJZCA9ICQodGhpcykuZGF0YShcInVzZXJfaWRcIik7XHJcbiAgICAgICAgICAgIGFkZGVkVXNlckFyci5wdXNoKHVzZXJJZCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGFkZGVkVXNlckFycjtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGNoYW5nZVN3aXRjaEJ0blN0YXRlKGN1cnJlbnRJbmZvKSB7XHJcbiAgICAgICAgdmFyIHN0YXRlID0gIWN1cnJlbnRJbmZvLnN3aXRjaFN0YXRlOyAgICAvL+imgei9rOWPmOWIsOeahOeKtuaAgVxyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICBjdXJyZW50SW5mby4kY3VycmVudERvbS5jc3Moe1wiYmFja2dyb3VuZC1jb2xvclwiOiBcIiMyRkNFNkZcIn0pO1xyXG4gICAgICAgICAgICBjdXJyZW50SW5mby4kY3VycmVudERvbS5jaGlsZHJlbihcIi5fc3dpdGNoRGVzY1RleHRcIikuY3NzKHtcImxlZnRcIjogXCI5cHhcIn0pLnRleHQoY3VycmVudEluZm8ub25UZXh0KTtcclxuICAgICAgICAgICAgY3VycmVudEluZm8uJGN1cnJlbnREb20uY2hpbGRyZW4oXCIuX3N3aXRjaEJ1dHRvbkljb25cIikuY3NzKHtcImxlZnRcIjogXCI0MHB4XCJ9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50SW5mby4kY3VycmVudERvbS5jc3Moe1wiYmFja2dyb3VuZC1jb2xvclwiOiBcIiNjMmMyYzJcIn0pO1xyXG4gICAgICAgICAgICBjdXJyZW50SW5mby4kY3VycmVudERvbS5jaGlsZHJlbihcIi5fc3dpdGNoRGVzY1RleHRcIikuY3NzKHtcImxlZnRcIjogXCI0NHB4XCJ9KS50ZXh0KGN1cnJlbnRJbmZvLm9mZlRleHQpO1xyXG4gICAgICAgICAgICBjdXJyZW50SW5mby4kY3VycmVudERvbS5jaGlsZHJlbihcIi5fc3dpdGNoQnV0dG9uSWNvblwiKS5jc3Moe1wibGVmdFwiOiBcIjBweFwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1cnJlbnRJbmZvLiRkZWxlZ2F0ZURvbS5kYXRhKFwic3dpdGNoX3N0YXRlXCIsIHN0YXRlKTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuICRleGVCb29rTGlzdDtcclxufSkoKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl19
