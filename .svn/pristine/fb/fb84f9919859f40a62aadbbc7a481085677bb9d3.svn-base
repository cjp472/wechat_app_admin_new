$(function(){resAdd.init()});var id;var pageType;var resourceType;var uploadChannelType=GetQueryString("upload_channel_type")||1;var resourceFree=uploadChannelType==1?2:null;var packageId=GetQueryString("package_id");var resourceParams;var packageName;var columnState=1;var show_resourcecount=1;var classArray=[];var fileAudio1Size;var resAudio1Length;var AudioName;var fileAudio2Size;var resAudio2Length;var tryAudioName;var VideoName;var aliveState;var roleParams=[];var aliveT=0;var backURL="";var prevVal;var if_push,push_ahead;var playState=0;var resAdd=function(){var e={};var i;function a(e){var i=null;if(window.createObjectURL!=undefined){i=window.createObjectURL(e)}else if(window.URL!=undefined){i=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){i=window.webkitURL.createObjectURL(e)}return i}function o(e){if(window.revokeObjectURL!=undefined){window.revokeObjectURL(e)}else if(window.URL!=undefined){window.URL.revokeObjectURL(e)}else if(window.webkitURL!=undefined){window.webkitURL.revokeObjectURL(e)}}function n(e,n,t,l){if(e&&e.length>0){var r=e[0];var c=a(r);i=(r.size/(1024*1024)).toFixed(2);resAudio1Lengh=r.duration;if(t=="Audio1"){fileAudio1Size=i;var u=document.getElementById("resourceTime");u.src=c;u.onload=function(){o(c)}}if(t=="Audio2"){fileAudio2Size=i;var s=document.getElementById("tryTime");s.src=c;s.onload=function(){o(c)}}if(n=="audio"){console.log($("#audioURL"+t));$("#audioURL"+t).hide();$(".uploadBox"+t).fadeIn(300);$(".upload"+t+"Name").html(r.name);$(".upload"+t+"Size span").html(i);$(".uploadPLine"+t).show().find(".uploadPLineActive"+t).css("width","0");$(".uploadPersent"+t).html("");if(t=="Audio1"){AudioName=r.name}else if(t=="Audio2"){tryAudioName=r.name}}if($uploadFile.checkFileSize(r,l)){$uploadFile.uploadRes(r,n,function(e){if(n=="audio"){var i=parseInt(e*100);$(".uploadPLineActive"+t).css("width",i+"%");$(".uploadPersent"+t).text(i+"%")}},function(e){console.log(e);baseUtils.show.blueTip("上传成功！");$(".uploadPersent"+t).text("完成");resUrl=e.data.access_url;console.log(resUrl);$("#"+t+"Url").val(resUrl);if(t=="Audio2"){$(".deleteTryAudio").show()}if(n=="image"){$(".previewPic"+t+" img").load(function(){o(c)}).attr("src",c)}},function(e){console.error("上传失败!!!");console.log(e);baseUtils.show.redTip("上传失败！")})}else{baseUtils.show.redTip("上传资源限制在"+l+"MB内！");$(".upLoad"+t).val("")}}else{baseUtils.show.redTip("网络错误，请稍后再试！")}}e.init=function(){$("select").material_select();aliveTimeConfig(".dateSetInput");resourceType=GetQueryString("type");$(".upLoadImage1").on("change",function(){n(this.files,"image","Image1",5)});$(".previewPicImage1").click(function(){$(".upLoadImage1").click()});$(".upLoadImage2").on("change",function(){n(this.files,"image","Image2",5)});$(".previewPicImage2").click(function(){$(".upLoadImage2").click()});$(".upLoadImage3").on("change",function(){n(this.files,"image","Image3",5)});$(".previewPicImage3").click(function(){$(".upLoadImage3").click()});$(".upLoadImage4").on("change",function(){n(this.files,"image","Image4",5)});$(".previewPicImage4").click(function(){$(".upLoadImage4").click()});$(".upLoadAudio1").on("change",function(){console.log($("#audio_url").duration);n(this.files,"audio","Audio1",200)});$(".upLoadAudio2").on("change",function(){n(this.files,"audio","Audio2",200)});$(".deleteTryAudio").click(function(){$(".upLoadAudio2").val("");$(".uploadBoxAudio2").hide();$("#Audio2Url").val("");$(this).hide();$("#audioURLAudio2").remove()});$(".notFreeSelect").click(function(){$(".resPrize").removeAttr("readonly");$(".resPrize").removeAttr("disabled");resourceFree=2;$("#courseRemind").show()});$(".FreeSelect").click(function(){$(".resPrize").attr("readonly","readonly");$(".resPrize").attr("disabled","disabled");$(".resPrize").val(0);resourceFree=1;$("#courseRemind").hide();$("#courseRemind option[value=-1]").prop("selected",true);$("#push_ahead").change()});push_ahead=$("#push_ahead option:selected").val();if_push=$("#if_push").val()||1;function e(){if(push_ahead==-1){if_push=1}else{if_push=0}}var i=$("#push_ahead");if(i.length>0){console.log(push_ahead);e();console.log(if_push);if(i.data("setting")==1){i.on("change",function(i){var a=$(this),o=+a.val();a.find("option[value="+push_ahead+"]").prop("selected",true);if(push_ahead==-1&&o!=-1){var n="您需要到微信公众号后台将您的服务号所在行业设置为“教育/培训”，设置完成后，开启服务号通知方可正常发送模板消息。"+"<br/><a target='_blank' href='/help/instructions#hp5_wx_service' style='margin-top:10px;'>什么是模板消息？</a>";var t={title:"提示",btn:3,oktext:"我已设置",canceltext:"关闭",icon:"blue",onOk:function(){$.ajax("/has_industry",{type:"GET",dataType:"json",data:{}}).done(function(i){var n=i.ret;if(n==0){a.find("option[value="+o+"]").prop("selected",true);push_ahead=o;e();baseUtils.show.blueTip("模板消息推送开启")}else{baseUtils.show.redTip("无法开启消息推送，请按照提示修改设置")}}).fail(function(e,i,a){console.error(a);baseUtils.show.redTip("网络错误，请稍后再试")})}};$.alert(n,"custom",t);return false}else{push_ahead=o;e();a.find("option[value="+o+"]").prop("selected",true)}})}else{i.on("change",function(i){var a=$(this);push_ahead=+a.val();e()})}}$(".videosSelect").click(function(){$(".aliveVideoBox").slideDown(300);aliveT=1;console.log(aliveT);VideoName=null});$(".voiceSelect").click(function(){$(".aliveVideoBox").slideUp(300);aliveT=0;console.log(aliveT)});$(".aliveSelect").click(function(){$(".aliveVideoBox").slideUp(300);aliveT=2;console.log(aliveT)});$(".columnShow").click(function(){columnState=0});$(".columnHide").click(function(){columnState=1});$(".countShow").click(function(){show_resourcecount=1});$(".countHide").click(function(){show_resourcecount=0});$(".lastStepBtn").click(function(){window.history.back()});var a=$("#getBack");if(uploadChannelType==1){backURL="/resource_list_page";a.attr("href",backURL)}else if(uploadChannelType==2){backURL="/package_detail_page?id="+packageId;a.attr("href",backURL)}else if(uploadChannelType==3){backURL="/member_detail_page?id="+packageId;a.attr("href",backURL)}changeSaveFlag(true);var o=$("#serviceToggle");prevVal=+$("#serviceToggle :radio:checked").val()||null;if(o.length>0){if(o.data("setting")==1){o.on("click",":radio",function(e){var i=$(this);var a=+i.val();if(a!==prevVal&&a==1){e.preventDefault();var o="您需要到微信公众号后台将您的服务号所在行业设置为“教育/培训”，设置完成后，开启服务号通知方可正常发送模板消息。"+"<br/><a target='_blank' href='/help/instructions#hp5_wx_service' style='margin-top:10px;'>什么是模板消息？</a>";var n={title:"提示",btn:3,oktext:"我已设置",canceltext:"关闭",icon:"blue",onOk:function(){$.ajax("/has_industry",{type:"GET",dataType:"json",data:{}}).done(function(e){var o=e.ret;if(o==0){i.prop("checked",true);prevVal=a;baseUtils.show.blueTip("模板消息推送开启")}else{baseUtils.show.redTip("无法开启消息推送，请按照提示修改设置")}}).fail(function(e,i,a){console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")})}};$.alert(o,"custom",n);return false}else{prevVal=a;params["push_state"]=a;$("#serviceToggle").data("state",a)}})}else{o.on("click",":radio",function(e){var i=$(this);var a=i.val();if(a!==prevVal&&a==1){prevVal=a;baseUtils.show.blueTip("模板消息推送开启")}else{prevVal=a}})}}};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL3Jlc01hbmFnZS9yZXNBZGQuanMiXSwibmFtZXMiOlsiJCIsInJlc0FkZCIsImluaXQiLCJpZCIsInBhZ2VUeXBlIiwicmVzb3VyY2VUeXBlIiwidXBsb2FkQ2hhbm5lbFR5cGUiLCJHZXRRdWVyeVN0cmluZyIsInJlc291cmNlRnJlZSIsInBhY2thZ2VJZCIsInJlc291cmNlUGFyYW1zIiwicGFja2FnZU5hbWUiLCJjb2x1bW5TdGF0ZSIsInNob3dfcmVzb3VyY2Vjb3VudCIsImNsYXNzQXJyYXkiLCJmaWxlQXVkaW8xU2l6ZSIsInJlc0F1ZGlvMUxlbmd0aCIsIkF1ZGlvTmFtZSIsImZpbGVBdWRpbzJTaXplIiwicmVzQXVkaW8yTGVuZ3RoIiwidHJ5QXVkaW9OYW1lIiwiVmlkZW9OYW1lIiwiYWxpdmVTdGF0ZSIsInJvbGVQYXJhbXMiLCJhbGl2ZVQiLCJiYWNrVVJMIiwicHJldlZhbCIsImlmX3B1c2giLCJwdXNoX2FoZWFkIiwicGxheVN0YXRlIiwiZmlsZVNpemUiLCJnZXRPYmplY3RVUkwiLCJmaWxlIiwidXJsIiwid2luZG93IiwiY3JlYXRlT2JqZWN0VVJMIiwidW5kZWZpbmVkIiwiVVJMIiwid2Via2l0VVJMIiwicmVtb3ZlT2JqZWN0VVJMIiwicmV2b2tlT2JqZWN0VVJMIiwicmVzVXBsb2FkIiwiZmlsZXMiLCJyZXNUeXBlIiwicmVzVHlwZUNsYXNzIiwicmVzTGltaXRTaXplIiwibGVuZ3RoIiwicmVzb3VyY2VMb2NhbFVybCIsInNpemUiLCJ0b0ZpeGVkIiwicmVzQXVkaW8xTGVuZ2giLCJkdXJhdGlvbiIsInJlc291cmNlRWxlbWVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzcmMiLCJvbmxvYWQiLCJ0cnlFbGVtZW50IiwiY29uc29sZSIsImxvZyIsImhpZGUiLCJmYWRlSW4iLCJodG1sIiwibmFtZSIsInNob3ciLCJmaW5kIiwiY3NzIiwiJHVwbG9hZEZpbGUiLCJjaGVja0ZpbGVTaXplIiwidXBsb2FkUmVzIiwiZGF0YSIsInByb2dyZXNzIiwicGFyc2VJbnQiLCJ0ZXh0IiwiYmFzZVV0aWxzIiwiYmx1ZVRpcCIsInJlc1VybCIsImFjY2Vzc191cmwiLCJ2YWwiLCJsb2FkIiwiYXR0ciIsImVycm9yIiwicmVkVGlwIiwibWF0ZXJpYWxfc2VsZWN0IiwiYWxpdmVUaW1lQ29uZmlnIiwib24iLCJ0aGlzIiwiY2xpY2siLCJyZW1vdmUiLCJyZW1vdmVBdHRyIiwicHJvcCIsImNoYW5nZSIsInNldElmUHVzaCIsIiRwdXNoQWhlYWQiLCJlIiwiZWxlIiwiY3VyU2VsZWN0ZWQiLCJ0eHQiLCJvcHRpb24iLCJ0aXRsZSIsImJ0biIsIm9rdGV4dCIsImNhbmNlbHRleHQiLCJpY29uIiwib25PayIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJkb25lIiwiY29kZSIsInJldCIsImZhaWwiLCJ4aHIiLCJlcnIiLCJhbGVydCIsInNsaWRlRG93biIsInNsaWRlVXAiLCJoaXN0b3J5IiwiYmFjayIsIiRnZXRCYWNrIiwiY2hhbmdlU2F2ZUZsYWciLCIkc2VydmljZVRvZ2dsZSIsImN1cnJWYWwiLCJwcmV2ZW50RGVmYXVsdCIsInBhcmFtcyJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUUsV0FDRUMsT0FBT0MsUUFPWCxJQUFJQyxHQUdKLElBQUlDLFNBR0osSUFBSUMsYUFHSixJQUFJQyxtQkFBb0JDLGVBQWUsd0JBQTBCLENBR2pFLElBQUlDLGNBQWVGLG1CQUFtQixFQUFJLEVBQUksSUFHOUMsSUFBSUcsV0FBWUYsZUFBZSxhQUcvQixJQUFJRyxlQUdKLElBQUlDLFlBR0osSUFBSUMsYUFBYyxDQUdsQixJQUFJQyxvQkFBcUIsQ0FHekIsSUFBSUMsY0FJSixJQUFJQyxlQUdKLElBQUlDLGdCQUdKLElBQUlDLFVBR0osSUFBSUMsZUFHSixJQUFJQyxnQkFHSixJQUFJQyxhQVNKLElBQUlDLFVBS0osSUFBSUMsV0FFSixJQUFJQyxjQUdKLElBQUlDLFFBQVMsQ0FNYixJQUFJQyxTQUFVLEVBR2QsSUFBSUMsUUFFSixJQUFJ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QUUsQ0FDVGQsRUFBSUwsS0FBSyxVQUFXLEtBQ3BCaEUsU0FBVWdHLENBRVZoRCxXQUFVVixLQUFLVyxRQUFRLGdCQUNwQixDQUNIRCxVQUFVVixLQUFLa0IsT0FBTyx5QkFFM0I2QixLQUFLLFNBQVNDLEVBQUt2QyxFQUFNd0MsR0FDeEJ2RCxRQUFRdUIsTUFBTWdDLEVBQ2R2QyxXQUFVVixLQUFLa0IsT0FBTyxrQkFJbENsRixHQUFFa0gsTUFBTWpCLEVBQUssU0FBVUMsRUFDdkIsT0FBTyxXQUNKLENBRUh4RSxRQUFVZ0csQ0FDVkUsUUFBTyxjQUFnQkYsQ0FDdkIxSCxHQUFFLGtCQUFrQnNFLEtBQUssUUFBUW9ELFVBR3RDLENBQ0hELEVBQWVwQyxHQUFHLFFBQVMsU0FBVSxTQUFTUyxHQUMxQyxHQUFJQyxHQUFNL0YsRUFBRXNGLEtBQ1osSUFBSW9DLEdBQVUzQixFQUFJakIsS0FDbEIsSUFBSTRDLElBQVloRyxTQUFXZ0csR0FBVyxFQUFJLENBQ3RDaEcsUUFBVWdHLENBQ1ZoRCxXQUFVVixLQUFLVyxRQUFRLGdCQUNwQixDQUNIakQsUUFBVWdHLE9BTTlCLE9BQU96SCIsImZpbGUiOiJhZG1pbi9yZXNNYW5hZ2UvcmVzQWRkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbiAoKSB7XG4gICAgcmVzQWRkLmluaXQoKTtcbn0pO1xuXG4vL+WFrOWFseWPmOmHj+W8gOWni1xuLy/liKTlrprmmK/nvJbovpHov5jmmK/mlrDlu7pcblxuLy/otYTmupDmoIfor4ZcbnZhciBpZDtcblxuLy/nvJbovpHmiJbmmK/kv67mlLlcbnZhciBwYWdlVHlwZTtcblxuLy/otYTmupDnsbvlnotcbnZhciByZXNvdXJjZVR5cGU7XG5cbi8v5paw5aKe55qE5rig6YGTICDpu5jorqTkuLrljZXlk4FcbnZhciB1cGxvYWRDaGFubmVsVHlwZSA9IEdldFF1ZXJ5U3RyaW5nKFwidXBsb2FkX2NoYW5uZWxfdHlwZVwiKSB8fCAxO1xuXG4vL+S7mOi0ueW9ouW8j1xudmFyIHJlc291cmNlRnJlZSA9IHVwbG9hZENoYW5uZWxUeXBlPT0xID8gMiA6IG51bGw7XG5cbi8v5LiT5qCPSURcbnZhciBwYWNrYWdlSWQgPSBHZXRRdWVyeVN0cmluZyhcInBhY2thZ2VfaWRcIik7XG5cbi8vKOW9k+i1hOa6kOS4uuinhumikeOAgeebtOaSreaXtizmnInlgLwpXG52YXIgcmVzb3VyY2VQYXJhbXM7XG5cbi8v5LiT5qCP5ZCN56ewXG52YXIgcGFja2FnZU5hbWU7XG5cbi8v5LiT5qCP5LiK5LiL5p6254q25oCBXG52YXIgY29sdW1uU3RhdGUgPSAxO1xuXG4vL+S4k+agj+acn+aVsOaYvuekulxudmFyIHNob3dfcmVzb3VyY2Vjb3VudCA9IDE7XG5cbi8v5LiT5qCP5YiG57G75pWw57uEXG52YXIgY2xhc3NBcnJheSA9IFtdO1xuXG4vL+mfs+mikeWPguaVsOW8gOWni1xuLy/mraPlvI/pn7PpopHlpKflsI9cbnZhciBmaWxlQXVkaW8xU2l6ZTtcblxuLy/mraPlvI/pn7PpopHplb/luqZcbnZhciByZXNBdWRpbzFMZW5ndGg7XG5cbi8v5q2j5byP6Z+z6aKR5ZCNXG52YXIgQXVkaW9OYW1lO1xuXG4vL+ivleWQrOmfs+mikeWkp+Wwj1xudmFyIGZpbGVBdWRpbzJTaXplO1xuXG4vL+ivleWQrOmfs+mikemVv+W6plxudmFyIHJlc0F1ZGlvMkxlbmd0aDtcblxuLy/or5XlkKzpn7PpopHlkI1cbnZhciB0cnlBdWRpb05hbWU7XG5cbi8v6Z+z6aKR5Y+C5pWw57uT5p2fXG5cbi8v5Zu+5paH5Y+C5pWw5byA5aeLXG4vL+WbvuaWh+WPguaVsOe7k+adn1xuXG4vL+inhumikeWPguaVsOW8gOWni1xuLy/op4bpopHlkI3np7BcbnZhciBWaWRlb05hbWU7XG4vL+inhumikeWPguaVsOe7k+adn1xuXG4vL+ebtOaSreWPguaVsOW8gOWni1xuLy/nm7Tmkq3nirbmgIFcbnZhciBhbGl2ZVN0YXRlO1xuLy8g55u05pKt6K6y5biI5YiX6KGoXG52YXIgcm9sZVBhcmFtcyA9IFtdO1xuXG4vL+ebtOaSreexu+Weiyjpu5jorqTkuLrpn7PpopEpXG52YXIgYWxpdmVUID0gMDtcblxuLy/nm7Tmkq3lj4LmlbDnu5PmnZ9cblxuXG4vL+aIkOWKn+WQjui/lOWbnueahFVSTFxudmFyIGJhY2tVUkwgPSAnJztcblxuLy/mjqjpgIHmtojmga/nmoTlgLxcbnZhciBwcmV2VmFsO1xuXG52YXIgaWZfcHVzaCwgLy/mmK/lkKblvIDlkK/mjqjpgIFcbiAgICBwdXNoX2FoZWFkOyAvL+aPkOWJjeaOqOmAgeaXtumXtFxuXG4vL+ebtOaSreeahOaSreaUvueKtuaAge+8iDDmnKrlvIDlp4vvvIwx44CBNOW3suW8gOWni++8jDIsM+e7k+adn++8iVxudmFyIHBsYXlTdGF0ZT0wO1xuXG4vL+WFrOWFseWPmOmHj+e7k+adn1xuXG52YXIgcmVzQWRkID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgcmVzQWRkID0ge307XG5cbiAgICAvL+aWh+S7tuWkp+Wwj1xuICAgIHZhciBmaWxlU2l6ZTtcblxuICAgIC8v5Y+W5raI5LiK5Lyg5Yik5pat5Y+C5pWwXG4gICAgLy8gdmFyIHVwbG9hZENhbmNlbD0wO1xuICAgIGZ1bmN0aW9uIGdldE9iamVjdFVSTChmaWxlKSB7XG4gICAgICAgIHZhciB1cmwgPSBudWxsO1xuICAgICAgICBpZiAod2luZG93LmNyZWF0ZU9iamVjdFVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LlVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy53ZWJraXRVUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB1cmwgPSB3aW5kb3cud2Via2l0VVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZU9iamVjdFVSTCh1cmwpIHsvL+mHiuaUvui1hOa6kFVSTFxuICAgICAgICBpZiAod2luZG93LnJldm9rZU9iamVjdFVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuVVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cud2Via2l0VVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2luZG93LndlYmtpdFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLy/otYTmupDkuIrkvKDlh73mlbAo5Y+C5pWw77yacmVzVHlwZTrotYTmupDnsbvlnosscmVzVHlwZUNsYXNzOui1hOa6kOexu+Wei+S4ree7huWIhueahOenjeexuyxyZXNMaW1pdFNpemU66LWE5rqQ6ZmQ5Yi25aSn5bCPKVxuICAgIGZ1bmN0aW9uIHJlc1VwbG9hZChmaWxlcywgcmVzVHlwZSwgcmVzVHlwZUNsYXNzLCByZXNMaW1pdFNpemUpIHtcbiAgICAgICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHZhciBmaWxlID0gZmlsZXNbMF07XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbGUpO1xuXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2VMb2NhbFVybCA9IGdldE9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgICAgIGZpbGVTaXplID0gKGZpbGUuc2l6ZSAvICgxMDI0ICogMTAyNCkpLnRvRml4ZWQoMik7XG4gICAgICAgICAgICByZXNBdWRpbzFMZW5naCA9IGZpbGUuZHVyYXRpb247XG4gICAgICAgICAgICAvL+WmguaenOaYr+ato+W8j+mfs+mikVxuICAgICAgICAgICAgaWYgKHJlc1R5cGVDbGFzcyA9PSBcIkF1ZGlvMVwiKSB7XG4gICAgICAgICAgICAgICAgZmlsZUF1ZGlvMVNpemUgPSBmaWxlU2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgcmVzb3VyY2VFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJyZXNvdXJjZVRpbWVcIik7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VFbGVtZW50LnNyYyA9IHJlc291cmNlTG9jYWxVcmw7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VFbGVtZW50Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVPYmplY3RVUkwocmVzb3VyY2VMb2NhbFVybCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAvL+iOt+WPlumfs+mikeaXtumVv1xuICAgICAgICAgICAgICAgIC8vICByZXNBdWRpbzFMZW5naD1yZXNvdXJjZUVsZW1lbnQuZHVyYXRpb247XG4gICAgICAgICAgICAgICAgLy8gIGNvbnNvbGUubG9nKHJlc0F1ZGlvMUxlbmdoKTtcbiAgICAgICAgICAgICAgICAvLyAgY29uc29sZS5sb2coJChcIiNyZXNvdXJjZVRpbWVcIikpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/lpoLmnpzmmK/or5XlkKzpn7PpopFcbiAgICAgICAgICAgIGlmIChyZXNUeXBlQ2xhc3MgPT0gXCJBdWRpbzJcIikge1xuICAgICAgICAgICAgICAgIGZpbGVBdWRpbzJTaXplID0gZmlsZVNpemU7XG4gICAgICAgICAgICAgICAgdmFyIHRyeUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInRyeVRpbWVcIik7XG4gICAgICAgICAgICAgICAgdHJ5RWxlbWVudC5zcmMgPSByZXNvdXJjZUxvY2FsVXJsO1xuICAgICAgICAgICAgICAgIHRyeUVsZW1lbnQub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZU9iamVjdFVSTChyZXNvdXJjZUxvY2FsVXJsKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhmaWxlLm5hbWUpO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhmaWxlU2l6ZSk7XG4gICAgICAgICAgICAvL+WmguaenOaYr+mfs+mikVxuICAgICAgICAgICAgaWYgKHJlc1R5cGUgPT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoJyNhdWRpb1VSTCcrcmVzVHlwZUNsYXNzKSk7XG4gICAgICAgICAgICAgICAgJCgnI2F1ZGlvVVJMJytyZXNUeXBlQ2xhc3MpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZEJveFwiK3Jlc1R5cGVDbGFzcykuZmFkZUluKDMwMCk7XG4gICAgICAgICAgICAgICAgLy8g5Yid5aeL5YyW5paH5Lu25Lul5Y+K6L+b5bqm5p2hXG4gICAgICAgICAgICAgICAgJChcIi51cGxvYWRcIiArIHJlc1R5cGVDbGFzcyArIFwiTmFtZVwiKS5odG1sKGZpbGUubmFtZSk7XG4gICAgICAgICAgICAgICAgJChcIi51cGxvYWRcIiArIHJlc1R5cGVDbGFzcyArIFwiU2l6ZSBzcGFuXCIpLmh0bWwoZmlsZVNpemUpO1xuICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUExpbmVcIiArIHJlc1R5cGVDbGFzcykuc2hvdygpXG4gICAgICAgICAgICAgICAgICAgIC5maW5kKFwiLnVwbG9hZFBMaW5lQWN0aXZlXCIgKyByZXNUeXBlQ2xhc3MpLmNzcyhcIndpZHRoXCIsICcwJyk7XG4gICAgICAgICAgICAgICAgJChcIi51cGxvYWRQZXJzZW50XCIgKyByZXNUeXBlQ2xhc3MpLmh0bWwoJycpO1xuICAgICAgICAgICAgICAgIGlmKHJlc1R5cGVDbGFzcyA9PSBcIkF1ZGlvMVwiKXsvL+ato+W8j+mfs+mikVxuICAgICAgICAgICAgICAgICAgICBBdWRpb05hbWUgPSBmaWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmKHJlc1R5cGVDbGFzcyA9PSBcIkF1ZGlvMlwiKSB7Ly/or5XlkKzpn7PpopFcbiAgICAgICAgICAgICAgICAgICAgdHJ5QXVkaW9OYW1lID0gZmlsZS5uYW1lO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIOmZkOWItui1hOa6kOWcqCpNQuWGhVxuICAgICAgICAgICAgaWYgKCR1cGxvYWRGaWxlLmNoZWNrRmlsZVNpemUoZmlsZSwgcmVzTGltaXRTaXplKSkge1xuICAgICAgICAgICAgICAgICR1cGxvYWRGaWxlLnVwbG9hZFJlcyhmaWxlLCByZXNUeXBlLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1R5cGUgPT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IHBhcnNlSW50KGRhdGEgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocHJvZ3Jlc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUExpbmVBY3RpdmVcIiArIHJlc1R5cGVDbGFzcykuY3NzKFwid2lkdGhcIiwgcHJvZ3Jlc3MgKyAnJScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUGVyc2VudFwiICsgcmVzVHlwZUNsYXNzKS50ZXh0KHByb2dyZXNzICsgXCIlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDmiJDlip/lm57osINcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuS4iuS8oOaIkOWKn++8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUGVyc2VudFwiICsgcmVzVHlwZUNsYXNzKS50ZXh0KFwi5a6M5oiQXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1VybCA9IGRhdGEuZGF0YS5hY2Nlc3NfdXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjXCIgKyByZXNUeXBlQ2xhc3MgKyBcIlVybFwiKS52YWwocmVzVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNUeXBlQ2xhc3MgPT0gXCJBdWRpbzJcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5kZWxldGVUcnlBdWRpb1wiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/lm77niYfotYTmupDvvIzliJnlsZXnpLrlm77niYfpooTop4hcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNUeXBlID09ICdpbWFnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyQoXCIucHJldmlld1BpY1wiICsgcmVzVHlwZUNsYXNzICsgXCIgaW1nXCIpLmF0dHIoXCJzcmNcIiwgcmVzVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ebtOaOpeWKoOi9veacrOWcsOWbvueJh+i/m+ihjOmihOiniFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIucHJldmlld1BpY1wiICsgcmVzVHlwZUNsYXNzICsgXCIgaW1nXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvYWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU9iamVjdFVSTChyZXNvdXJjZUxvY2FsVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3JjXCIsIHJlc291cmNlTG9jYWxVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNVcmwpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDlpLHotKXlm57osINcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLkuIrkvKDlpLHotKUhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOWksei0pe+8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOi1hOa6kOmZkOWItuWcqFwiICsgcmVzTGltaXRTaXplICsgXCJNQuWGhe+8gVwiKTtcbiAgICAgICAgICAgICAgICAkKFwiLnVwTG9hZFwiK3Jlc1R5cGVDbGFzcykudmFsKFwiXCIpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIFcIik7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWxlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc0FkZC5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL+mAieaLqee7hOS7tuagt+W8j1xuICAgICAgICAkKCdzZWxlY3QnKS5tYXRlcmlhbF9zZWxlY3QoKTtcbiAgICAgICAgLy/ml7bpl7TpgInmi6nlmajliJ3lp4vljJZcbiAgICAgICAgLy8gJChcIiNkYXRlSW5wdXRcIikuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICAgICAvLyAgICAgd2Vla1N0YXJ0OiAxLCAvL+S4gOWRqOS7juaYn+acn+S4gOW8gOWni1xuICAgICAgICAvLyAgICAgbWluVmlldzogXCJkYXlcIixcbiAgICAgICAgLy8gICAgIGZvcm1hdDogJ3l5eXktbW0tZGQgaGg6MDA6MDAnLFxuICAgICAgICAvLyAgICAgYXV0b2Nsb3NlOiB0cnVlLCAvL+mAieaLqeaXpeacn+WQjuiHquWKqOWFs+mXrVxuICAgICAgICAvLyAgICAgcGlja2VyUG9zaXRpb246J3RvcC1yaWdodCcgIC8v5by556qX5pi+56S65Zyo6L6T5YWl5qGG5LiK5pa5XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyAkKFwiI2RhdGVJbnB1dDFcIikuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICAgICAvLyAgICAgd2Vla1N0YXJ0OiAxLFxuICAgICAgICAvLyAgICAgbWluVmlldzogXCJkYXlcIixcbiAgICAgICAgLy8gICAgIGZvcm1hdDogJ3l5eXktbW0tZGQgaGg6MDA6MDAnLFxuICAgICAgICAvLyAgICAgYXV0b2Nsb3NlOiB0cnVlLCAvL+mAieaLqeaXpeacn+WQjuiHquWKqOWFs+mXrVxuICAgICAgICAvLyAgICAgcGlja2VyUG9zaXRpb246J3RvcC1yaWdodCdcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vICQoXCIjZGF0ZUlucHV0MlwiKS5kYXRldGltZXBpY2tlcih7XG4gICAgICAgIC8vICAgICB3ZWVrU3RhcnQ6IDEsXG4gICAgICAgIC8vICAgICBtaW5WaWV3OiBcImRheVwiLFxuICAgICAgICAvLyAgICAgZm9ybWF0OiAneXl5eS1tbS1kZCBoaDowMDowMCcsXG4gICAgICAgIC8vICAgICBhdXRvY2xvc2U6IHRydWUsIC8v6YCJ5oup5pel5pyf5ZCO6Ieq5Yqo5YWz6ZetXG4gICAgICAgIC8vICAgICBwaWNrZXJQb3NpdGlvbjondG9wLXJpZ2h0J1xuICAgICAgICAvLyB9KVxuICAgICAgICBhbGl2ZVRpbWVDb25maWcoXCIuZGF0ZVNldElucHV0XCIpO1xuICAgICAgICAvL+iOt+WPlui1hOa6kOexu+Wei1xuICAgICAgICByZXNvdXJjZVR5cGUgPSBHZXRRdWVyeVN0cmluZyhcInR5cGVcIik7XG5cbiAgICAgICAgLy/otYTmupDnsbvlnovvvJrlm77niYfvvJppbWFnZSzpn7PpopHvvJphdWRpb1xuICAgICAgICAvL+i1hOa6kOexu+Wei+WtkOexu++8mlxuICAgICAgICAgICAgLy/mraPlvI/pn7PpopHvvJpBdWRpbzEs6K+V5ZCs6Z+z6aKR77yaQXVkaW8yLFxuICAgICAgICAgICAgLy/lsIHpnaI6SW1hZ2UxLOaXpeetvu+8mkltYWdlMiznm7Tmkq3lrqPkvKDlsIHpnaI6SW1hZ2UzLOi0tOeJhzpJbWFnZTRcbiAgICAgICAgLy8g54K55Ye75oyJ6ZKu5LiK5Lyg5Zu+54mHXG4gICAgICAgICQoXCIudXBMb2FkSW1hZ2UxXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImltYWdlXCIsIFwiSW1hZ2UxXCIsIDUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5wcmV2aWV3UGljSW1hZ2UxXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkSW1hZ2UxXCIpLmNsaWNrKCk7XG4gICAgICAgIH0pXG4gICAgICAgICQoXCIudXBMb2FkSW1hZ2UyXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImltYWdlXCIsIFwiSW1hZ2UyXCIsIDUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5wcmV2aWV3UGljSW1hZ2UyXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkSW1hZ2UyXCIpLmNsaWNrKCk7XG4gICAgICAgIH0pXG4gICAgICAgICQoXCIudXBMb2FkSW1hZ2UzXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImltYWdlXCIsIFwiSW1hZ2UzXCIsIDUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5wcmV2aWV3UGljSW1hZ2UzXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkSW1hZ2UzXCIpLmNsaWNrKCk7XG4gICAgICAgIH0pXG4gICAgICAgICQoXCIudXBMb2FkSW1hZ2U0XCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImltYWdlXCIsIFwiSW1hZ2U0XCIsIDUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5wcmV2aWV3UGljSW1hZ2U0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkSW1hZ2U0XCIpLmNsaWNrKCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8g54K55Ye75oyJ6ZKu5LiK5Lyg6Z+z6aKRXG4gICAgICAgIC8v5q2j5byPXG4gICAgICAgICQoXCIudXBMb2FkQXVkaW8xXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoXCIjYXVkaW9fdXJsXCIpLmR1cmF0aW9uKTtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImF1ZGlvXCIsIFwiQXVkaW8xXCIsIDIwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvL+ivleWQrFxuICAgICAgICAkKFwiLnVwTG9hZEF1ZGlvMlwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNVcGxvYWQodGhpcy5maWxlcywgXCJhdWRpb1wiLCBcIkF1ZGlvMlwiLCAyMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+ivleWQrOmfs+mikee9ruepulxuICAgICAgICAkKFwiLmRlbGV0ZVRyeUF1ZGlvXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkQXVkaW8yXCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICQoXCIudXBsb2FkQm94QXVkaW8yXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICQoXCIjQXVkaW8yVXJsXCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAgICAgJChcIiNhdWRpb1VSTEF1ZGlvMlwiKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v5Y+W5raI5LiK5LygXG4gICAgICAgIC8vICQoXCIudXBsb2FkQ2FuY2VsQTFcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAgICAgJChcIi51cGxvYWRCb3hBdWRpbzFcIikucmVtb3ZlKCk7XG4gICAgICAgIC8vICAgICB1cGxvYWRDYW5jZWw9MTtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8g6YCJ5oup5LuY6LS55LiO5YWN6LS5XG4gICAgICAgICQoXCIubm90RnJlZVNlbGVjdFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLnJlc1ByaXplXCIpLnJlbW92ZUF0dHIoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICAgICQoXCIucmVzUHJpemVcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgcmVzb3VyY2VGcmVlID0gMjtcbiAgICAgICAgICAgICQoJyNjb3Vyc2VSZW1pbmQnKS5zaG93KCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKFwiLkZyZWVTZWxlY3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIi5yZXNQcml6ZVwiKS5hdHRyKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgICAgICQoXCIucmVzUHJpemVcIikuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAkKFwiLnJlc1ByaXplXCIpLnZhbCgwKTtcbiAgICAgICAgICAgIHJlc291cmNlRnJlZSA9IDE7XG4gICAgICAgICAgICAkKCcjY291cnNlUmVtaW5kJykuaGlkZSgpO1xuICAgICAgICAgICAgJCgnI2NvdXJzZVJlbWluZCBvcHRpb25bdmFsdWU9LTFdJykucHJvcCgnc2VsZWN0ZWQnLHRydWUpO1xuICAgICAgICAgICAgJCgnI3B1c2hfYWhlYWQnKS5jaGFuZ2UoKTtcbiAgICAgICAgfSlcblxuICAgICAgICAvL+W8gOivvuaPkOmGklxuICAgICAgICBwdXNoX2FoZWFkID0gJCgnI3B1c2hfYWhlYWQgb3B0aW9uOnNlbGVjdGVkJykudmFsKCk7XG4gICAgICAgIGlmX3B1c2ggPSAkKCcjaWZfcHVzaCcpLnZhbCgpIHx8IDE7XG4gICAgICAgIGZ1bmN0aW9uIHNldElmUHVzaCgpIHtcbiAgICAgICAgICAgIGlmKCBwdXNoX2FoZWFkID09IC0xICkge1xuICAgICAgICAgICAgICAgIGlmX3B1c2ggPSAxO1xuICAgICAgICAgICAgfSBlbHNle1xuICAgICAgICAgICAgICAgIGlmX3B1c2ggPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciAkcHVzaEFoZWFkID0gJCgnI3B1c2hfYWhlYWQnKTtcbiAgICAgICAgaWYoJHB1c2hBaGVhZC5sZW5ndGg+MCl7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhwdXNoX2FoZWFkKTtcbiAgICAgICAgICAgIHNldElmUHVzaCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coaWZfcHVzaCk7XG4gICAgICAgICAgICBpZiggJHB1c2hBaGVhZC5kYXRhKCdzZXR0aW5nJykgPT0gMSApIHsgLy/nlKjmiLfmnKrlsIbmnI3liqHlj7forr7nva7kuLrmlZnogrLooYzkuJpcbiAgICAgICAgICAgICAgICAkcHVzaEFoZWFkLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgY3VyU2VsZWN0ZWQgPSArZWxlLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCdvcHRpb25bdmFsdWU9JysgcHVzaF9haGVhZCArJ10nKS5wcm9wKCdzZWxlY3RlZCcsdHJ1ZSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIHB1c2hfYWhlYWQgPT0gLTEgJiYgY3VyU2VsZWN0ZWQgIT0gLTEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdHh0PSAgXCLmgqjpnIDopoHliLDlvq7kv6HlhazkvJflj7flkI7lj7DlsIbmgqjnmoTmnI3liqHlj7fmiYDlnKjooYzkuJrorr7nva7kuLrigJzmlZnogrIv5Z+56K6t4oCd77yM6K6+572u5a6M5oiQ5ZCO77yM5byA5ZCv5pyN5Yqh5Y+36YCa55+l5pa55Y+v5q2j5bi45Y+R6YCB5qih5p2/5raI5oGv44CCXCIrXG4gICAgICAgICAgICAgICAgICAgICAgICBcIjxici8+PGEgdGFyZ2V0PSdfYmxhbmsnIGhyZWY9Jy9oZWxwL2luc3RydWN0aW9ucyNocDVfd3hfc2VydmljZScgc3R5bGU9J21hcmdpbi10b3A6MTBweDsnPuS7gOS5iOaYr+aooeadv+a2iOaBr++8nzwvYT5cIjtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBvcHRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwi5o+Q56S6XCIsIC8v5by55Ye65qGG5qCH6aKYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAzLCAvL+ehruWumiYm5Y+W5raIXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb2t0ZXh0OiAn5oiR5bey6K6+572uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYW5jZWx0ZXh0OiAn5YWz6ZetJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnYmx1ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PazogZnVuY3Rpb24oKXsvL+WPkemAgeivt+axgu+8jOWIpOaWreeUqOaIt+aYr+WQpuiuvue9ruacjeWKoeWPt+ihjOS4mlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoJy9oYXNfaW5kdXN0cnknLHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdHRVQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmRvbmUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvZGUgPSBkYXRhLnJldDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvZGUgPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlLmZpbmQoJ29wdGlvblt2YWx1ZT0nKyBjdXJTZWxlY3RlZCArJ10nKS5wcm9wKCdzZWxlY3RlZCcsdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHVzaF9haGVhZCA9IGN1clNlbGVjdGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldElmUHVzaCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8q5raI5oGv5o6o6YCB5byA5ZCvKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5qih5p2/5raI5oGv5o6o6YCB5byA5ZCvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLml6Dms5XlvIDlkK/mtojmga/mjqjpgIHvvIzor7fmjInnhafmj5DnpLrkv67mlLnorr7nva5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oeGhyLCB0ZXh0LCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivlVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydCh0eHQsIFwiY3VzdG9tXCIsIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKuWFs+mXrea2iOaBr+aOqOmAgSovXG4gICAgICAgICAgICAgICAgICAgICAgICBwdXNoX2FoZWFkID0gY3VyU2VsZWN0ZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRJZlB1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCdvcHRpb25bdmFsdWU9JysgY3VyU2VsZWN0ZWQgKyddJykucHJvcCgnc2VsZWN0ZWQnLHRydWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRwdXNoQWhlYWQub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgcHVzaF9haGVhZCA9ICtlbGUudmFsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2V0SWZQdXNoKCk7XG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGlmKHBsYXlTdGF0ZSA9PSAwKSB7XG4gICAgICAgICAgICAvLyAgIOmAieaLqeivremfs+aIluiAhemfs+mike+8iOebtOaSre+8iVxuICAgICAgICAgICAgJChcIi52aWRlb3NTZWxlY3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoXCIuYWxpdmVWaWRlb0JveFwiKS5zbGlkZURvd24oMzAwKTtcbiAgICAgICAgICAgICAgICBhbGl2ZVQgPSAxO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsaXZlVCk7XG4gICAgICAgICAgICAgICAgVmlkZW9OYW1lID0gbnVsbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJChcIi52b2ljZVNlbGVjdFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJChcIi5hbGl2ZVZpZGVvQm94XCIpLnNsaWRlVXAoMzAwKTtcbiAgICAgICAgICAgICAgICBhbGl2ZVQgPSAwO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsaXZlVCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoXCIuYWxpdmVTZWxlY3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoXCIuYWxpdmVWaWRlb0JveFwiKS5zbGlkZVVwKDMwMCk7XG4gICAgICAgICAgICAgICAgYWxpdmVUID0gMjtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGl2ZVQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIC8vIH1cblxuICAgICAgICAvL+mAieaLqeS4k+agj+S4iuS4i+aetlxuICAgICAgICAkKFwiLmNvbHVtblNob3dcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29sdW1uU3RhdGUgPSAwO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5jb2x1bW5IaWRlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbHVtblN0YXRlID0gMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy/pgInmi6nmmL7npLrmnJ/mlbBcbiAgICAgICAgJChcIi5jb3VudFNob3dcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2hvd19yZXNvdXJjZWNvdW50ID0gMTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIuY291bnRIaWRlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNob3dfcmVzb3VyY2Vjb3VudCA9IDA7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy/ngrnlh7vkuIrkuIDmraXov5Tlm55cbiAgICAgICAgJCgnLmxhc3RTdGVwQnRuJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciAkZ2V0QmFjayA9ICQoJyNnZXRCYWNrJyk7XG4gICAgICAgIGlmKHVwbG9hZENoYW5uZWxUeXBlID09IDEpIHtcbiAgICAgICAgICAgIGJhY2tVUkwgPSAnL3Jlc291cmNlX2xpc3RfcGFnZSc7XG4gICAgICAgICAgICAkZ2V0QmFjay5hdHRyKCdocmVmJywgYmFja1VSTCk7XG4gICAgICAgIH0gZWxzZSBpZih1cGxvYWRDaGFubmVsVHlwZSA9PSAyKSB7XG4gICAgICAgICAgICBiYWNrVVJMID0gJy9wYWNrYWdlX2RldGFpbF9wYWdlP2lkPScgKyBwYWNrYWdlSWQ7XG4gICAgICAgICAgICAkZ2V0QmFjay5hdHRyKCdocmVmJywgYmFja1VSTCk7XG4gICAgICAgIH0gZWxzZSBpZih1cGxvYWRDaGFubmVsVHlwZSA9PSAzKSB7XG4gICAgICAgICAgICBiYWNrVVJMID0gJy9tZW1iZXJfZGV0YWlsX3BhZ2U/aWQ9JyArIHBhY2thZ2VJZDtcbiAgICAgICAgICAgICRnZXRCYWNrLmF0dHIoJ2hyZWYnLCBiYWNrVVJMKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8v54K55Ye75L6n6L655qCP56a75byA5pe255qE5by55qGGXG4gICAgICAgIGNoYW5nZVNhdmVGbGFnKHRydWUpO1xuXG5cbiAgICAgICAgLy/mnI3liqHlj7fpgJrnn6XlvLnlh7rnmoTpgLvovpHliKTmlq1cbiAgICAgICAgdmFyICRzZXJ2aWNlVG9nZ2xlID0gJCgnI3NlcnZpY2VUb2dnbGUnKTtcbiAgICAgICAgcHJldlZhbCA9ICskKFwiI3NlcnZpY2VUb2dnbGUgOnJhZGlvOmNoZWNrZWRcIikudmFsKCkgfHwgbnVsbDsgLy/lvZPliY3ljZXpgInmoYbnmoTlgLxcbiAgICAgICAgaWYoJHNlcnZpY2VUb2dnbGUubGVuZ3RoPjApe1xuICAgICAgICAgICAgaWYoICRzZXJ2aWNlVG9nZ2xlLmRhdGEoJ3NldHRpbmcnKSA9PSAxICkgeyAvL+eUqOaIt+acquWwhuacjeWKoeWPt+iuvue9ruS4uuaVmeiCsuihjOS4mlxuICAgICAgICAgICAgICAgICRzZXJ2aWNlVG9nZ2xlLm9uKCdjbGljaycsICc6cmFkaW8nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyclZhbCA9ICtlbGUudmFsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1cnJWYWwgIT09IHByZXZWYWwgJiYgY3VyclZhbCA9PSAxICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dD0gIFwi5oKo6ZyA6KaB5Yiw5b6u5L+h5YWs5LyX5Y+35ZCO5Y+w5bCG5oKo55qE5pyN5Yqh5Y+35omA5Zyo6KGM5Lia6K6+572u5Li64oCc5pWZ6IKyL+WfueiureKAne+8jOiuvue9ruWujOaIkOWQju+8jOW8gOWQr+acjeWKoeWPt+mAmuefpeaWueWPr+ato+W4uOWPkemAgeaooeadv+a2iOaBr+OAglwiK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCI8YnIvPjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPScvaGVscC9pbnN0cnVjdGlvbnMjaHA1X3d4X3NlcnZpY2UnIHN0eWxlPSdtYXJnaW4tdG9wOjEwcHg7Jz7ku4DkuYjmmK/mqKHmnb/mtojmga/vvJ88L2E+XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuaPkOekulwiLCAvL+W8ueWHuuahhuagh+mimFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMywgLy/noa7lrpomJuWPlua2iFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+aIkeW3suiuvue9ricsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsdGV4dDogJ+WFs+mXrScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2JsdWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCl7Ly/lj5HpgIHor7fmsYLvvIzliKTmlq3nlKjmiLfmmK/lkKborr7nva7mnI3liqHlj7fooYzkuJpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KCcvaGFzX2luZHVzdHJ5Jyx7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2RlID0gZGF0YS5yZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb2RlID09IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlZhbCA9IGN1cnJWYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyrmtojmga/mjqjpgIHlvIDlkK8qL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLmqKHmnb/mtojmga/mjqjpgIHlvIDlkK9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaXoOazleW8gOWQr+a2iOaBr+aOqOmAge+8jOivt+aMieeFp+aPkOekuuS/ruaUueiuvue9rlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbih4aHIsIHRleHQsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFsZXJ0KHR4dCwgXCJjdXN0b21cIiwgb3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8q5YWz6Zet5raI5oGv5o6o6YCBKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZWYWwgPSBjdXJyVmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zWydwdXNoX3N0YXRlJ10gPSBjdXJyVmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlcnZpY2VUb2dnbGUnKS5kYXRhKCdzdGF0ZScsY3VyclZhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNlcnZpY2VUb2dnbGUub24oJ2NsaWNrJywgJzpyYWRpbycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyVmFsID0gZWxlLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiggY3VyclZhbCAhPT0gcHJldlZhbCAmJiBjdXJyVmFsID09IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2VmFsID0gY3VyclZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLmqKHmnb/mtojmga/mjqjpgIHlvIDlkK9cIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2VmFsID0gY3VyclZhbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gcmVzQWRkO1xufSkoKTtcbiJdfQ==
