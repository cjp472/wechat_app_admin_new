var needRefresh=false;var user_id;var comment_id;var search_content;var comment_attr;var comment_state;var resource_type;var orderParameter="";$(document).ready(function(){refresh();reBack();keyEnter($("#comment_search_btn"));$("tbody tr").mouseover(function(){$(this).css({"background-color":"#f5f5f5"})}).mouseout(function(){$(this).css({"background-color":"#fff"})});setTopUrlCookie("comment_listop","内容评论列表");var e=GetQueryString("reurl");if(e){if(e.indexOf("audio_list")>0){setTopUrlInfo("audio_listop")}if(e.indexOf("video_list")>0){setTopUrlInfo("video_listop")}if(e.indexOf("article_list")>0){setTopUrlInfo("article_listop")}}initMsgModel();$(".avatar_nickname").click(function(){var e=$(this).data("app_id");var t=$(this).data("user_id");jumpDetail(e+"|"+t)})});function jumpDetail(e){var e=e;var t=e.split("|")[0];var o=e.split("|")[1];resetUrl("/customerdetail?appId="+t+"&userId="+o)}function searchComment(){showLoading();var e=$("#comment_attr").val();var t=$("#comment_search_content").val();var o=$("#comment_state").val();var a="";if(microfunc){var n=$("select[name='apptype']").val();a="&apptype="+n}if(t.length==0){var r="/comment_admin?comment_attr="+encodeURI(e)+"&comment_state="+o+a+"&order_parameter="+orderParameter}else{var r="/comment_admin?comment_attr="+encodeURI(e)+"&search_content="+encodeURI(t)+"&comment_state="+o+a+"&order_parameter="+orderParameter}window.location=r}function changeTopState(e,t,o){showLoading();var a="#state_"+e;var n="#btnTop_"+e;var r=o;var i="";if(t==0){i="/update_comment_state?id="+e+"&state=1"+"&type=top&resource_type="+r}else{i="/update_comment_state?id="+e+"&state=0"+"&type=top&resource_type="+r}$.get(i,function(e){hideLoading();if(e.code==0){if(t==0){$(n).html("取消精选");$(n).val(1)}else{$(n).html("精选评论");$(n).val(0)}}baseUtils.show.blueTip(e.msg);window.location.reload()})}function changeState(e,t,o,a){showLoading();var n="#state_"+e;var r="#btn_"+e;var o=o;var i=a;console.log(">>>"+i);var d="";if(t==0){d="/update_comment_state?id="+e+"&state=1"+"&type=show"+"&record_id="+o+"&resource_type="+i}else{d="/update_comment_state?id="+e+"&state=0"+"&type=show"+"&record_id="+o+"&resource_type="+i}$.get(d,function(e){hideLoading();if(e.code==0){if(t==0){$(r).html("显示");$(r).val(1)}else{$(r).html("隐藏");$(r).val(0)}}baseUtils.show.blueTip(e.msg);window.location.reload()})}function hideDialog(){$(".operate_dialog").hide()}function replaySelect(e,t,o){this.user_id=e;this.comment_id=t;if(o){$("#comment_admin_name").val("巴九灵");$("#replay_content").text("您如果遇到无法收听或其它异常情况，可以联系我们技术小哥寻求解决（微信或电话：17817812015）。谢谢！");$("#replay_content").attr("readonly","readonly");$("#replay_content").css("background-color","#fff")}else{$("#comment_admin_name").val("");$("#replay_content").text("");$("#replay_content").removeAttr("readonly")}}function replay(){var e=$("#replay_content").val();var t=$("#comment_admin_name").val();if(!checkForm(e,t)){return}showLoading();var o="/submit_admin_comment";$.post(o,{replay_content:e,comment_admin_name:t,user_id:user_id,comment_id:comment_id},function(e){needRefresh=true;hideLoading();console.log(e);var t=e.code;var o=e.msg;setTimeout(function(){baseUtils.show.blueTip(o);console.log("code:"+t);if(t==0){$("#replayModal").modal("hide")}},100)})}function checkForm(e,t){if(e.length==0){baseUtils.show.redTip("回复内容不能为空");return false}if(t.length==0){baseUtils.show.redTip("管理员昵称不能为空");return false}return true}function refresh(){$("#replayModal").on("hide.bs.modal",function(){if(needRefresh){location.reload()}})}function reBack(){if(microfunc==1){$("select[name='apptype']").val(getUrlParam("apptype")==null||getUrlParam("apptype")==""?0:getUrlParam("apptype"))}var e=document.getElementById("comment_search_content");if(search_content!=""){e.value=search_content;var t=document.getElementById("comment_attr");if(t.length>0){for(var o=0;o<t.options.length;o++){if(t.options[o].value==comment_attr){t.options[o].selected=true;break}}}}var a=document.getElementById("comment_state");if(a.length>0){for(var o=0;o<a.options.length;o++){if(a.options[o].value==comment_state){a.options[o].selected=true;break}}}}function jumpMsg(e){var e=e;var t=e.split("|")[0];var o=e.split("|")[1];var a=e.split("|")[2];$("#SmsModal").modal("show");$(".modal-footer").children("button").eq(0).unbind("click").bind("click",function(){var e=$("#sms_nickname").val();var n=$("#sms_content").val();if(e.length==0){window.wxc.xcConfirm("亲，还未输入发送人昵称哦~","error");return false}if(n.length==0){window.wxc.xcConfirm("亲，还未输入消息内容哦~","error");return false}$("#SmsModal").modal("hide");showLoading();$.post("/customermsg",{appId:t,userId:o,commentId:a,nickname:e,content:n},function(e){hideLoading();if(e.ret==0){baseUtils.show.blueTip("发送成功!");window.location.reload()}else{baseUtils.show.redTip("系统繁忙，请稍后再试!")}})})}function initMsgModel(){$(".model_type").on("click",function(){$(".model_type").removeClass("border_blue");$(this).addClass("border_blue");$("#sms_nickname").val($(this).attr("data-name"));$("#sms_content").val($(this).attr("data-content"));if($("#cancel_model").hasClass("border_blue")){$(".edit_model").addClass("hide");$(".model_type").removeClass("border_blue")}model_id=$(this).attr("data-id");sms_name=$(this).attr("data-name");sms_content=$(this).attr("data-content")});$("#sms_content").keyup(function(){if($(".border_blue").length>0){$(".edit_model").removeClass("hide")}});$("#sms_nickname").keyup(function(){if($(".border_blue").length>0){$(".edit_model").removeClass("hide")}});$(".edit_model").on("click",function(){model_id=$(".border_blue").attr("data-id");var e=$("#sms_nickname").val();var t=$("#sms_content").val();if(model_id==""){model_id=0;if(e!=""&&t!=""){console.log("新增模板："+model_id+">>"+e+">>"+t)}else{baseUtils.show.redTip("您的发送人昵称/内容为空");return}}else{if(e!=""&&t!=""){console.log("更新模板："+model_id+">>"+e+">>"+t)}else{baseUtils.show.redTip("您的发送人昵称/内容为空");return}}if(e==sms_name&&t==sms_content){baseUtils.show.redTip("您没有做任何模板修改")}else{showLoading();var o="/modelchange";$.post(o,{model_id:model_id,send_nick_name:e,content:t},function(o){hideLoading();console.log(o);var a=o.code;var n=o.msg;baseUtils.show.blueTip(n);if(a==0){$(".border_blue").attr("data-id",o.id);$(".border_blue").attr("data-name",e);$(".border_blue").attr("data-content",t);needRefresh=true}else if(a==1){console.log(o.errorMsg)}else if(a==2){$(".border_blue").attr("data-name",e);$(".border_blue").attr("data-content",t);needRefresh=true}})}})}function adminMsg(e,t,o){var e=e;var t=t;var o=o;$("#admin_nickname").val("管理员");$("#AdminModal").modal("show");$("#adminsend").children("button").eq(0).unbind("click").bind("click",function(){if(o==1){window.wxc.xcConfirm("管理员已经回复过了哦~","error");return false}else{var a=$("#admin_nickname").val();var n=$("#admin_content").val();if(a.length==0){window.wxc.xcConfirm("亲，还未输入管理员昵称哦~","error");return false}if(n.length==0){window.wxc.xcConfirm("亲，还未输入消息内容哦~","error");return false}$("#AdminModal").modal("hide");showLoading();$.post("/submit_admin_comment",{comment_id:e,comment_admin_name:a,user_id:t,replay_content:n},function(e){hideLoading();console.log(e);if(e.code==0){baseUtils.show.blueTip("回复成功");window.location.reload()}else{baseUtils.show.redTip("系统繁忙，请稍后再试!")}})}})}function orderByParameter(e){var t=GetQueryString("order_parameter");var o=window.location.href;if(t){o=o.replace("order_parameter="+t,"order_parameter="+e)}else{if(o.indexOf("order_parameter")>0){o=o.replace("order_parameter="+t,"order_parameter="+e)}else{var a=o.indexOf("?")>0?"&":"?";o=o+a+"order_parameter="+e}}if(o.indexOf("page")>0){o=o.replace("page="+GetQueryString("page"),"page=1")}window.location.href=o}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2NvbW1lbnRBZG1pbi5qcyJdLCJuYW1lcyI6WyJuZWVkUmVmcmVzaCIsInVzZXJfaWQiLCJjb21tZW50X2lkIiwic2VhcmNoX2NvbnRlbnQiLCJjb21tZW50X2F0dHIiLCJjb21tZW50X3N0YXRlIiwicmVzb3VyY2VfdHlwZSIsIm9yZGVyUGFyYW1ldGVyIiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJyZWZyZXNoIiwicmVCYWNrIiwia2V5RW50ZXIiLCJtb3VzZW92ZXIiLCJ0aGlzIiwiY3NzIiwiYmFja2dyb3VuZC1jb2xvciIsIm1vdXNlb3V0Iiwic2V0VG9wVXJsQ29va2llIiwicmV1cmxpbmZvIiwiR2V0UXVlcnlTdHJpbmciLCJpbmRleE9mIiwic2V0VG9wVXJsSW5mbyIsImluaXRNc2dNb2RlbCIsImNsaWNrIiwiYXBwX2lkIiwiZGF0YSIsImp1bXBEZXRhaWwiLCJpbmZvIiwiYXBwSWQiLCJzcGxpdCIsInVzZXJJZCIsInJlc2V0VXJsIiwic2VhcmNoQ29tbWVudCIsInNob3dMb2FkaW5nIiwiY29tbWVudEF0dHIiLCJ2YWwiLCJhcHB0eXBlX3NlYXJjaCIsIm1pY3JvZnVuYyIsImFwcHR5cGUiLCJsZW5ndGgiLCJ1cmwiLCJlbmNvZGVVUkkiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImNoYW5nZVRvcFN0YXRlIiwiaWQiLCJjdXJyZW50VG9wU3RhdGUiLCJ0eXBlIiwidGlkIiwiYnRuVG9waWQiLCJnZXQiLCJyZXN1bHQiLCJoaWRlTG9hZGluZyIsImNvZGUiLCJodG1sIiwiYmFzZVV0aWxzIiwic2hvdyIsImJsdWVUaXAiLCJtc2ciLCJyZWxvYWQiLCJjaGFuZ2VTdGF0ZSIsImN1cnJlbnRTdGF0ZSIsInJlY29yZF9pZCIsImJ0blN0YXRlaWQiLCJjb25zb2xlIiwibG9nIiwiaGlkZURpYWxvZyIsImhpZGUiLCJyZXBsYXlTZWxlY3QiLCJpc01vZGVsIiwidGV4dCIsImF0dHIiLCJyZW1vdmVBdHRyIiwicmVwbGF5IiwicmVwbGF5X2NvbnRlbnQiLCJjb21tZW50X2FkbWluX25hbWUiLCJjaGVja0Zvcm0iLCJwb3N0Iiwic2V0VGltZW91dCIsIm1vZGFsIiwicmVkVGlwIiwib24iLCJnZXRVcmxQYXJhbSIsImNvbW1lbnRfc2VhcmNoX2NvbnRlbnQiLCJnZXRFbGVtZW50QnlJZCIsInZhbHVlIiwiY29tbWVudF9hdHRyX2VsZW1lbnQiLCJpIiwib3B0aW9ucyIsInNlbGVjdGVkIiwiY29tbWVudF9zdGF0ZV9lbGVtZW50IiwianVtcE1zZyIsImNtSWQiLCJjaGlsZHJlbiIsImVxIiwidW5iaW5kIiwiYmluZCIsIm5pY2tuYW1lIiwiY29udGVudCIsInd4YyIsInhjQ29uZmlybSIsImNvbW1lbnRJZCIsInJldCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJoYXNDbGFzcyIsIm1vZGVsX2lkIiwic21zX25hbWUiLCJzbXNfY29udGVudCIsImtleXVwIiwibmFtZSIsInNlbmRfbmlja19uYW1lIiwiUmVDb2RlIiwiZXJyb3JNc2ciLCJhZG1pbk1zZyIsImlzX2FkbWluIiwib3JkZXJCeVBhcmFtZXRlciIsIm5ld1BhcmFtZXRlciIsIm9sZFBhcmFtZXRlciIsIm9ialVybCIsImhyZWYiLCJyZXBsYWNlIiwiam9pbiJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsYUFBYyxLQUVsQixJQUFJQyxRQUNKLElBQUlDLFdBRUosSUFBSUMsZUFDSixJQUFJQyxhQUNKLElBQUlDLGNBRUosSUFBSUMsY0FHSixJQUFJQyxnQkFBaUIsRUFHckJDLEdBQUVDLFVBQVVDLE1BQU0sV0FDZEMsU0FDQUMsU0FDQUMsVUFBU0wsRUFBRSx1QkFFWEEsR0FBRSxZQUFZTSxVQUFVLFdBRXBCTixFQUFFTyxNQUFNQyxLQUFLQyxtQkFBbUIsY0FDakNDLFNBQVMsV0FFUlYsRUFBRU8sTUFBTUMsS0FBS0MsbUJBQW1CLFVBRXBDRSxpQkFBZ0IsaUJBQWlCLFNBQ2pDLElBQUlDLEdBQVlDLGVBQWUsUUFDL0IsSUFBR0QsRUFDSCxDQUNJLEdBQUdBLEVBQVVFLFFBQVEs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LFFBQVEsT0FDdkJmLFFBQU9DLFNBQVNnQixhQUdwQixDQUVJSixVQUFVQyxLQUFLd0IsT0FBTyxxQkFTMUMsUUFBU29DLGtCQUFpQkMsR0FDdEIsR0FBSUMsR0FBZW5HLGVBQWUsa0JBRWxDLElBQUlvRyxHQUFTN0UsT0FBT0MsU0FBUzZFLElBQzdCLElBQUdGLEVBQWEsQ0FDWkMsRUFBU0EsRUFBT0UsUUFBUSxtQkFBbUJILEVBQWEsbUJBQW1CRCxPQUMxRSxDQUNELEdBQUdFLEVBQU9uRyxRQUFRLG1CQUFtQixFQUFFLENBQ25DbUcsRUFBU0EsRUFBT0UsUUFBUSxtQkFBbUJILEVBQWEsbUJBQW1CRCxPQUMxRSxDQUNELEdBQUlLLEdBQU9ILEVBQU9uRyxRQUFRLEtBQUssRUFBRyxJQUFNLEdBQ3hDbUcsR0FBU0EsRUFBU0csRUFBTSxtQkFBcUJMLEdBSXJELEdBQUdFLEVBQU9uRyxRQUFRLFFBQVEsRUFBRyxDQUN6Qm1HLEVBQVNBLEVBQU9FLFFBQVEsUUFBU3RHLGVBQWUsUUFBUyxVQUc3RHVCLE9BQU9DLFNBQVM2RSxLQUFPRCIsImZpbGUiOiJhZG1pbi9jb21tZW50QWRtaW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgbmVlZFJlZnJlc2ggPSBmYWxzZTtcclxuXHJcbnZhciB1c2VyX2lkO1xyXG52YXIgY29tbWVudF9pZDtcclxuXHJcbnZhciBzZWFyY2hfY29udGVudDtcclxudmFyIGNvbW1lbnRfYXR0cjtcclxudmFyIGNvbW1lbnRfc3RhdGU7XHJcblxyXG52YXIgcmVzb3VyY2VfdHlwZTtcclxuXHJcbi8vICDmjpLluo/lj4LmlbBcclxudmFyIG9yZGVyUGFyYW1ldGVyID0gJyc7XHJcblxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgcmVmcmVzaCgpO1xyXG4gICAgcmVCYWNrKCk7XHJcbiAgICBrZXlFbnRlcigkKCcjY29tbWVudF9zZWFyY2hfYnRuJykpO1xyXG5cclxuICAgICQoXCJ0Ym9keSB0clwiKS5tb3VzZW92ZXIoZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgICQodGhpcykuY3NzKHsnYmFja2dyb3VuZC1jb2xvcic6JyNmNWY1ZjUnfSk7XHJcbiAgICB9KS5tb3VzZW91dChmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgJCh0aGlzKS5jc3MoeydiYWNrZ3JvdW5kLWNvbG9yJzonI2ZmZid9KTtcclxuICAgIH0pO1xyXG4gICAgc2V0VG9wVXJsQ29va2llKCdjb21tZW50X2xpc3RvcCcsJ+WGheWuueivhOiuuuWIl+ihqCcpO1xyXG4gICAgdmFyIHJldXJsaW5mbyA9IEdldFF1ZXJ5U3RyaW5nKCdyZXVybCcpO1xyXG4gICAgaWYocmV1cmxpbmZvKVxyXG4gICAge1xyXG4gICAgICAgIGlmKHJldXJsaW5mby5pbmRleE9mKCdhdWRpb19saXN0Jyk+MCl7XHJcbiAgICAgICAgICAgIHNldFRvcFVybEluZm8oJ2F1ZGlvX2xpc3RvcCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihyZXVybGluZm8uaW5kZXhPZigndmlkZW9fbGlzdCcpPjApe1xyXG4gICAgICAgICAgICBzZXRUb3BVcmxJbmZvKCd2aWRlb19saXN0b3AnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocmV1cmxpbmZvLmluZGV4T2YoJ2FydGljbGVfbGlzdCcpPjApe1xyXG4gICAgICAgICAgICBzZXRUb3BVcmxJbmZvKCdhcnRpY2xlX2xpc3RvcCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpbml0TXNnTW9kZWwoKTtcclxuXHJcbiAgICAkKFwiLmF2YXRhcl9uaWNrbmFtZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIGFwcF9pZCA9ICQodGhpcykuZGF0YShcImFwcF9pZFwiKTtcclxuICAgICAgICB2YXIgdXNlcl9pZCA9ICQodGhpcykuZGF0YShcInVzZXJfaWRcIik7XHJcblxyXG4gICAgICAgIGp1bXBEZXRhaWwoYXBwX2lkICsgXCJ8XCIgKyB1c2VyX2lkKTtcclxuICAgIH0pO1xyXG5cclxufSk7XHJcblxyXG4vL+iwg+WIsOivpuaDhemhtVxyXG5mdW5jdGlvbiBqdW1wRGV0YWlsKGluZm8pXHJcbntcclxuICAgIHZhciBpbmZvPWluZm87XHJcbiAgICB2YXIgYXBwSWQ9aW5mby5zcGxpdChcInxcIilbMF07XHJcbiAgICB2YXIgdXNlcklkPWluZm8uc3BsaXQoXCJ8XCIpWzFdO1xyXG4gICAgcmVzZXRVcmwoJy9jdXN0b21lcmRldGFpbD9hcHBJZD0nK2FwcElkKycmdXNlcklkPScrdXNlcklkKTtcclxufVxyXG4vL+aooeeziuafpeivouivhOiuulxyXG5mdW5jdGlvbiAgc2VhcmNoQ29tbWVudCgpe1xyXG4gICAgc2hvd0xvYWRpbmcoKTtcclxuICAgIHZhciBjb21tZW50QXR0ciA9ICQoXCIjY29tbWVudF9hdHRyXCIpLnZhbCgpOyAvL+iOt+WPluWIsOmAieS4reeahOWAvFxyXG4gICAgLy/ojrflj5bmkJzntKLlhoXlrrlcclxuICAgIHZhciBzZWFyY2hfY29udGVudCA9ICQoXCIjY29tbWVudF9zZWFyY2hfY29udGVudFwiKS52YWwoKTsgLy/ojrflj5bliLDpgInkuK3nmoTlgLxcclxuICAgIC8v6K+E6K6654q25oCBXHJcbiAgICB2YXIgY29tbWVudF9zdGF0ZSA9ICQoXCIjY29tbWVudF9zdGF0ZVwiKS52YWwoKTsgLy/ojrflj5bmiYDpgInnirbmgIFcclxuICAgIHZhciBhcHB0eXBlX3NlYXJjaCA9ICcnO1xyXG4gICAgaWYobWljcm9mdW5jKXtcclxuICAgICAgICB2YXIgYXBwdHlwZT0kKFwic2VsZWN0W25hbWU9J2FwcHR5cGUnXVwiKS52YWwoKTtcclxuICAgICAgICBhcHB0eXBlX3NlYXJjaCA9ICcmYXBwdHlwZT0nK2FwcHR5cGU7XHJcbiAgICB9XHJcbiAgICBpZiAoc2VhcmNoX2NvbnRlbnQubGVuZ3RoID09IDApIHtcclxuICAgICAgICB2YXIgdXJsID0gXCIvY29tbWVudF9hZG1pbj9jb21tZW50X2F0dHI9XCIgKyBlbmNvZGVVUkkoY29tbWVudEF0dHIpKycmY29tbWVudF9zdGF0ZT0nK2NvbW1lbnRfc3RhdGUrYXBwdHlwZV9zZWFyY2ggKyAnJm9yZGVyX3BhcmFtZXRlcj0nICsgb3JkZXJQYXJhbWV0ZXI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciB1cmwgPSBcIi9jb21tZW50X2FkbWluP2NvbW1lbnRfYXR0cj1cIiArIGVuY29kZVVSSShjb21tZW50QXR0cikgKyBcIiZzZWFyY2hfY29udGVudD1cIiArIGVuY29kZVVSSShzZWFyY2hfY29udGVudCkrJyZjb21tZW50X3N0YXRlPScrY29tbWVudF9zdGF0ZSthcHB0eXBlX3NlYXJjaCArICcmb3JkZXJfcGFyYW1ldGVyPScgKyBvcmRlclBhcmFtZXRlcjtcclxuICAgIH1cclxuXHJcbiAgICB3aW5kb3cubG9jYXRpb24gPSB1cmw7XHJcbn1cclxuXHJcbi8v5pS55Y+YIOe9rumhtiDnirbmgIFcclxuZnVuY3Rpb24gY2hhbmdlVG9wU3RhdGUoaWQgLGN1cnJlbnRUb3BTdGF0ZSAsIHR5cGUpIHtcclxuICAgIHNob3dMb2FkaW5nKCk7XHJcbiAgICB2YXIgdGlkID0gJyNzdGF0ZV8nICsgaWQ7XHJcbiAgICB2YXIgYnRuVG9waWQgPSAnI2J0blRvcF8nK2lkO1xyXG4gICAgdmFyIHJlc291cmNlX3R5cGUgPSB0eXBlO1xyXG4gICAgdmFyIHVybCA9IFwiXCI7XHJcbiAgICBpZihjdXJyZW50VG9wU3RhdGU9PTApe1xyXG4gICAgICAgIHVybCA9IFwiL3VwZGF0ZV9jb21tZW50X3N0YXRlP2lkPVwiICsgaWQgKyBcIiZzdGF0ZT0xXCIgK1wiJnR5cGU9dG9wJnJlc291cmNlX3R5cGU9XCIgKyByZXNvdXJjZV90eXBlO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgdXJsID0gXCIvdXBkYXRlX2NvbW1lbnRfc3RhdGU/aWQ9XCIgKyBpZCArIFwiJnN0YXRlPTBcIiArXCImdHlwZT10b3AmcmVzb3VyY2VfdHlwZT1cIiArIHJlc291cmNlX3R5cGU7XHJcbiAgICB9XHJcbiAgICAvL+S/ruaUueeVjOmdouS/oeaBr1xyXG4gICAgJC5nZXQodXJsLGZ1bmN0aW9uKHJlc3VsdCkge1xyXG4gICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcblxyXG4gICAgICAgIGlmKHJlc3VsdC5jb2RlPT0wKXtcclxuICAgICAgICAgICAgLy/lvZPliY3nirbmgIHvvJrmnKrnva7pobZcclxuICAgICAgICAgICAgaWYoY3VycmVudFRvcFN0YXRlPT0wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJCh0aWQpLmNoaWxkcmVuKCkuZXEoMCkuYXR0cignY2xhc3MnLCdidG4gYnRuLXByaW1hcnkgYnRuLXNtJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICQodGlkKS5jaGlsZHJlbigpLmVxKDApLmh0bWwoJ+eyvumAiScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkKHRpZCkuY2hpbGRyZW4oKS5lcSgwKS5hdHRyKCdjb2xvcicsJ3doaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoYnRuVG9waWQpLmh0bWwoJ+WPlua2iOeyvumAiScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGJ0blRvcGlkKS52YWwoMSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAkKHRpZCkuY2hpbGRyZW4oKS5lcSgwKS5hdHRyKCdjbGFzcycsJ2J0biBidG4tbGluayBidG4tc20nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gJCh0aWQpLmNoaWxkcmVuKCkuZXEoMCkuaHRtbCgnJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoYnRuVG9waWQpLmh0bWwoJ+eyvumAieivhOiuuicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGJ0blRvcGlkKS52YWwoMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChyZXN1bHQubXNnKTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICB9KVxyXG59XHJcblxyXG4vLyDmlLnlj5jmmL7npLov6ZqQ6JeP54q25oCBXHJcbmZ1bmN0aW9uIGNoYW5nZVN0YXRlKGlkICxjdXJyZW50U3RhdGUscmVjb3JkX2lkLHR5cGUpXHJcbntcclxuICAgIHNob3dMb2FkaW5nKCk7XHJcbiAgICB2YXIgdGlkID0gJyNzdGF0ZV8nICsgaWQ7XHJcbiAgICB2YXIgYnRuU3RhdGVpZCA9ICcjYnRuXycgKyBpZDtcclxuICAgIHZhciByZWNvcmRfaWQ9cmVjb3JkX2lkO1xyXG4gICAgdmFyIHJlc291cmNlX3R5cGUgPSB0eXBlO1xyXG4gICAgY29uc29sZS5sb2coJz4+PicrcmVzb3VyY2VfdHlwZSk7XHJcblxyXG4gICAgdmFyIHVybCA9IFwiXCI7XHJcbiAgICBpZiAoY3VycmVudFN0YXRlID09IDApXHJcbiAgICB7XHJcbiAgICAgICAgdXJsID0gXCIvdXBkYXRlX2NvbW1lbnRfc3RhdGU/aWQ9XCIgKyBpZCArIFwiJnN0YXRlPTFcIitcIiZ0eXBlPXNob3dcIitcIiZyZWNvcmRfaWQ9XCIrcmVjb3JkX2lkK1wiJnJlc291cmNlX3R5cGU9XCIrcmVzb3VyY2VfdHlwZTtcclxuICAgIH1cclxuICAgIGVsc2VcclxuICAgIHtcclxuICAgICAgICB1cmwgPSBcIi91cGRhdGVfY29tbWVudF9zdGF0ZT9pZD1cIiArIGlkICsgXCImc3RhdGU9MFwiK1wiJnR5cGU9c2hvd1wiK1wiJnJlY29yZF9pZD1cIityZWNvcmRfaWQrXCImcmVzb3VyY2VfdHlwZT1cIityZXNvdXJjZV90eXBlO1xyXG4gICAgfVxyXG4gICAgLy/mm7TmlrDnlYzpnaJcclxuICAgICQuZ2V0KHVybCwgZnVuY3Rpb24gKHJlc3VsdClcclxuICAgIHtcclxuICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgIC8v5b2T5YmN6K+E6K6654q25oCB77ya5pi+56S6XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgLy8gJCh0aWQpLmNoaWxkcmVuKCkuZXEoMCkuYXR0cignY2xhc3MnLCAnYnRuIGJ0bi1kYW5nZXIgYnRuLXNtJyk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKHRpZCkuY2hpbGRyZW4oKS5lcSgwKS5odG1sKCfpmpDol48nKTtcclxuICAgICAgICAgICAgICAgIC8vICQodGlkKS5jaGlsZHJlbigpLmVxKDApLmF0dHIoJ2NvbG9yJywgJ3doaXRlJyk7XHJcbiAgICAgICAgICAgICAgICAkKGJ0blN0YXRlaWQpLmh0bWwoJ+aYvuekuicpO1xyXG4gICAgICAgICAgICAgICAgJChidG5TdGF0ZWlkKS52YWwoMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvLyAkKHRpZCkuY2hpbGRyZW4oKS5lcSgwKS5hdHRyKCdjbGFzcycsICdidG4gYnRuLWxpbmsgYnRuLXNtJyk7XHJcbiAgICAgICAgICAgICAgICAvLyAkKHRpZCkuY2hpbGRyZW4oKS5lcSgwKS5odG1sKCcnKTtcclxuICAgICAgICAgICAgICAgICQoYnRuU3RhdGVpZCkuaHRtbCgn6ZqQ6JePJyk7XHJcbiAgICAgICAgICAgICAgICAkKGJ0blN0YXRlaWQpLnZhbCgwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKHJlc3VsdC5tc2cpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgIH0pXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhpZGVEaWFsb2coKXtcclxuXHJcbiAgICAkKFwiLm9wZXJhdGVfZGlhbG9nXCIpLmhpZGUoKTtcclxuXHJcbn07XHJcblxyXG5mdW5jdGlvbiByZXBsYXlTZWxlY3QodXNlcl9pZCwgY29tbWVudF9pZCxpc01vZGVsKSB7XHJcbiAgICB0aGlzLnVzZXJfaWQgPSB1c2VyX2lkO1xyXG4gICAgdGhpcy5jb21tZW50X2lkID0gY29tbWVudF9pZDtcclxuICAgIGlmKGlzTW9kZWwpeyAvL+aooeadv+WbnuWkjVxyXG4gICAgICAgIC8v6K6+572u5aW95qih5p2/5YaF5a65XHJcbiAgICAgICAgJCgnI2NvbW1lbnRfYWRtaW5fbmFtZScpLnZhbChcIuW3tOS5neeBtVwiKTtcclxuICAgICAgICAkKCcjcmVwbGF5X2NvbnRlbnQnKS50ZXh0KFwi5oKo5aaC5p6c6YGH5Yiw5peg5rOV5pS25ZCs5oiW5YW25a6D5byC5bi45oOF5Ya177yM5Y+v5Lul6IGU57O75oiR5Lus5oqA5pyv5bCP5ZOl5a+75rGC6Kej5Yaz77yI5b6u5L+h5oiW55S16K+d77yaMTc4MTc4MTIwMTXvvInjgILosKLosKLvvIFcIik7XHJcbiAgICAgICAgJCgnI3JlcGxheV9jb250ZW50JykuYXR0cihcInJlYWRvbmx5XCIsXCJyZWFkb25seVwiKTtcclxuICAgICAgICAkKCcjcmVwbGF5X2NvbnRlbnQnKS5jc3MoXCJiYWNrZ3JvdW5kLWNvbG9yXCIsXCIjZmZmXCIpO1xyXG4gICAgfWVsc2V7XHJcbiAgICAgICAgJCgnI2NvbW1lbnRfYWRtaW5fbmFtZScpLnZhbChcIlwiKTtcclxuICAgICAgICAkKCcjcmVwbGF5X2NvbnRlbnQnKS50ZXh0KFwiXCIpO1xyXG4gICAgICAgICQoJyNyZXBsYXlfY29udGVudCcpLnJlbW92ZUF0dHIoXCJyZWFkb25seVwiKTtcclxuXHJcbiAgICB9XHJcbn1cclxuLy/lm57lpI1cclxuZnVuY3Rpb24gcmVwbGF5KCkge1xyXG4gICAgdmFyIHJlcGxheV9jb250ZW50ID0gJChcIiNyZXBsYXlfY29udGVudFwiKS52YWwoKTtcclxuICAgIHZhciBjb21tZW50X2FkbWluX25hbWUgPSAkKFwiI2NvbW1lbnRfYWRtaW5fbmFtZVwiKS52YWwoKTtcclxuICAgIGlmICghY2hlY2tGb3JtKHJlcGxheV9jb250ZW50LCBjb21tZW50X2FkbWluX25hbWUpKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgc2hvd0xvYWRpbmcoKTtcclxuXHJcbiAgICB2YXIgdXJsID0gXCIvc3VibWl0X2FkbWluX2NvbW1lbnRcIjtcclxuICAgICQucG9zdCh1cmwsIHtcclxuICAgICAgICAncmVwbGF5X2NvbnRlbnQnOiByZXBsYXlfY29udGVudCxcclxuICAgICAgICAnY29tbWVudF9hZG1pbl9uYW1lJzogY29tbWVudF9hZG1pbl9uYW1lLFxyXG4gICAgICAgICd1c2VyX2lkJzogdXNlcl9pZCxcclxuICAgICAgICAnY29tbWVudF9pZCc6IGNvbW1lbnRfaWQsXHJcbiAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgbmVlZFJlZnJlc2ggPSB0cnVlO1xyXG4gICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICB2YXIgY29kZSA9IHJlc3VsdC5jb2RlO1xyXG4gICAgICAgIHZhciBtc2cgPSByZXN1bHQubXNnO1xyXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKG1zZyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiY29kZTpcIiArIGNvZGUpO1xyXG4gICAgICAgICAgICBpZiAoY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcjcmVwbGF5TW9kYWwnKS5tb2RhbCgnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSwgMTAwKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vL+aguOWvueihqOWNleWhq+WGmeaDheWGtVxyXG5mdW5jdGlvbiBjaGVja0Zvcm0ocmVwbGF5X2NvbnRlbnQsIGNvbW1lbnRfYWRtaW5fbmFtZSkge1xyXG5cclxuICAgIGlmIChyZXBsYXlfY29udGVudC5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuWbnuWkjeWGheWuueS4jeiDveS4uuepulwiKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGNvbW1lbnRfYWRtaW5fbmFtZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIueuoeeQhuWRmOaYteensOS4jeiDveS4uuepulwiKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlZnJlc2goKSB7XHJcbiAgICAkKFwiI3JlcGxheU1vZGFsXCIpLm9uKCdoaWRlLmJzLm1vZGFsJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5Yik5pat5piv5ZCm6ZyA6KaB5Yi35paw55WM6Z2iXHJcbiAgICAgICAgaWYgKG5lZWRSZWZyZXNoKSB7XHJcbiAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpOyAvL+mHjeaWsOWKoOi9vemhtemdolxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4vL+WbnuaYvui+k+WFpeahhuWSjOmAieaLqeahhueahOWAvFxyXG5mdW5jdGlvbiByZUJhY2soKSB7XHJcbiAgICBpZihtaWNyb2Z1bmM9PTEpe1xyXG4gICAgICAgICQoXCJzZWxlY3RbbmFtZT0nYXBwdHlwZSddXCIpLnZhbCgoZ2V0VXJsUGFyYW0oXCJhcHB0eXBlXCIpPT1udWxsICB8fCBnZXRVcmxQYXJhbShcImFwcHR5cGVcIik9PScnKSA/IDAgOmdldFVybFBhcmFtKFwiYXBwdHlwZVwiKSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGNvbW1lbnRfc2VhcmNoX2NvbnRlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImNvbW1lbnRfc2VhcmNoX2NvbnRlbnRcIik7XHJcblxyXG4gICAgaWYgKHNlYXJjaF9jb250ZW50ICE9IFwiXCIpIHtcclxuICAgICAgICBjb21tZW50X3NlYXJjaF9jb250ZW50LnZhbHVlID0gc2VhcmNoX2NvbnRlbnQ7XHJcbiAgICAgICAgdmFyIGNvbW1lbnRfYXR0cl9lbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21tZW50X2F0dHJcIik7XHJcbiAgICAgICAgaWYgKGNvbW1lbnRfYXR0cl9lbGVtZW50Lmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb21tZW50X2F0dHJfZWxlbWVudC5vcHRpb25zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY29tbWVudF9hdHRyX2VsZW1lbnQub3B0aW9uc1tpXS52YWx1ZSA9PSBjb21tZW50X2F0dHIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb21tZW50X2F0dHJfZWxlbWVudC5vcHRpb25zW2ldLnNlbGVjdGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgY29tbWVudF9zdGF0ZV9lbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJjb21tZW50X3N0YXRlXCIpO1xyXG4gICAgaWYgKGNvbW1lbnRfc3RhdGVfZWxlbWVudC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBjb21tZW50X3N0YXRlX2VsZW1lbnQub3B0aW9ucy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBpZiAoY29tbWVudF9zdGF0ZV9lbGVtZW50Lm9wdGlvbnNbaV0udmFsdWUgPT0gY29tbWVudF9zdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgY29tbWVudF9zdGF0ZV9lbGVtZW50Lm9wdGlvbnNbaV0uc2VsZWN0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8v5Y+R5raI5oGvLOWFiOi1sOi/meS4qmpz5YaN6LWw5by55qGGXHJcbmZ1bmN0aW9uIGp1bXBNc2coaW5mbylcclxue1xyXG4gICAgdmFyIGluZm89aW5mbztcclxuICAgIHZhciBhcHBJZD1pbmZvLnNwbGl0KFwifFwiKVswXTtcclxuICAgIHZhciB1c2VySWQ9aW5mby5zcGxpdChcInxcIilbMV07XHJcbiAgICB2YXIgY21JZD1pbmZvLnNwbGl0KFwifFwiKVsyXTtcclxuICAgICQoXCIjU21zTW9kYWxcIikubW9kYWwoJ3Nob3cnKTtcclxuICAgIC8v56Gu6K6k5oyJ6ZKu54K55Ye7XHJcbiAgICAkKFwiLm1vZGFsLWZvb3RlclwiKS5jaGlsZHJlbihcImJ1dHRvblwiKS5lcSgwKS51bmJpbmQoXCJjbGlja1wiKS5iaW5kKFwiY2xpY2tcIiAsIGZ1bmN0aW9uICgpXHJcbiAgICB7XHJcbiAgICAgICAgdmFyIG5pY2tuYW1lPSQoXCIjc21zX25pY2tuYW1lXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBjb250ZW50PSQoXCIjc21zX2NvbnRlbnRcIikudmFsKCk7XHJcbiAgICAgICAgaWYobmlja25hbWUubGVuZ3RoID09IDApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aW5kb3cud3hjLnhjQ29uZmlybSgn5Lqy77yM6L+Y5pyq6L6T5YWl5Y+R6YCB5Lq65pi156ew5ZOmficsJ2Vycm9yJyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoY29udGVudC5sZW5ndGggPT0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdpbmRvdy53eGMueGNDb25maXJtKCfkurLvvIzov5jmnKrovpPlhaXmtojmga/lhoXlrrnlk6Z+JywnZXJyb3InKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKFwiI1Ntc01vZGFsXCIpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAkLnBvc3QoXCIvY3VzdG9tZXJtc2dcIix7XCJhcHBJZFwiOmFwcElkLFwidXNlcklkXCI6dXNlcklkLFwiY29tbWVudElkXCI6Y21JZCxcIm5pY2tuYW1lXCI6bmlja25hbWUsXCJjb250ZW50XCI6Y29udGVudH0sZnVuY3Rpb24oZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIGlmKGRhdGEucmV0PT0wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL3dpbmRvdy53eGMueGNDb25maXJtKFwi5Y+R6YCB5oiQ5YqfXCIsXCJzdWNjZXNzXCIse29uT2s6ZnVuY3Rpb24gKClcclxuICAgICAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAgICAgLy8gICAgLy8gd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgLy99fSk7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5Y+R6YCB5oiQ5YqfIVwiKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIC8vd2luZG93Lnd4Yy54Y0NvbmZpcm0oXCLns7vnu5/nuYHlv5nvvIzor7fnqI3lkI7lho3or5UhXCIsXCJlcnJvclwiKTtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuezu+e7n+e5geW/me+8jOivt+eojeWQjuWGjeivlSFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBpbml0TXNnTW9kZWwoKSB7XHJcblxyXG4gICAgJCgnLm1vZGVsX3R5cGUnKS5vbihcImNsaWNrXCIsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5tb2RlbF90eXBlJykucmVtb3ZlQ2xhc3MoJ2JvcmRlcl9ibHVlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYm9yZGVyX2JsdWUnKTtcclxuICAgICAgICAkKCcjc21zX25pY2tuYW1lJykudmFsKCQodGhpcykuYXR0cignZGF0YS1uYW1lJykpO1xyXG4gICAgICAgICQoJyNzbXNfY29udGVudCcpLnZhbCgkKHRoaXMpLmF0dHIoJ2RhdGEtY29udGVudCcpKTtcclxuICAgICAgICBpZigkKCcjY2FuY2VsX21vZGVsJykuaGFzQ2xhc3MoJ2JvcmRlcl9ibHVlJykpe1xyXG4gICAgICAgICAgICAkKCcuZWRpdF9tb2RlbCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICQoJy5tb2RlbF90eXBlJykucmVtb3ZlQ2xhc3MoJ2JvcmRlcl9ibHVlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIG1vZGVsX2lkID0gJCh0aGlzKS5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgc21zX25hbWUgPSAkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpO1xyXG4gICAgICAgIHNtc19jb250ZW50ID0gJCh0aGlzKS5hdHRyKCdkYXRhLWNvbnRlbnQnKTtcclxuICAgIH0pXHJcblxyXG4gICAgJCgnI3Ntc19jb250ZW50Jykua2V5dXAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCQoJy5ib3JkZXJfYmx1ZScpLmxlbmd0aCA+MCl7XHJcbiAgICAgICAgICAgICQoJy5lZGl0X21vZGVsJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjc21zX25pY2tuYW1lJykua2V5dXAoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmKCQoJy5ib3JkZXJfYmx1ZScpLmxlbmd0aCA+MCl7XHJcbiAgICAgICAgICAgICQoJy5lZGl0X21vZGVsJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcuZWRpdF9tb2RlbCcpLm9uKFwiY2xpY2tcIixmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/mlbDmja7lupPkuI3lrZjlnKjnm7jlhbPmqKHmnb9cclxuICAgICAgICBtb2RlbF9pZCA9ICQoJy5ib3JkZXJfYmx1ZScpLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICB2YXIgbmFtZSA9ICQoJyNzbXNfbmlja25hbWUnKS52YWwoKTtcclxuICAgICAgICB2YXIgY29udGVudD0gJCgnI3Ntc19jb250ZW50JykudmFsKCk7XHJcbiAgICAgICAgaWYobW9kZWxfaWQ9PVwiXCIpe1xyXG4gICAgICAgICAgICAvL+WQkeWQjuWPsOaPkuWFpeaooeadv1xyXG4gICAgICAgICAgICBtb2RlbF9pZCA9IDA7XHJcbiAgICAgICAgICAgIGlmKG5hbWUhPVwiXCIgJiYgY29udGVudCE9XCJcIil7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaWsOWinuaooeadv++8mlwiK21vZGVsX2lkK1wiPj5cIituYW1lK1wiPj5cIitjb250ZW50KTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+aCqOeahOWPkemAgeS6uuaYteensC/lhoXlrrnkuLrnqbonKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvL+abtOaWsOWOn+acieaooeadv1xyXG4gICAgICAgICAgICBpZihuYW1lIT1cIlwiICYmIGNvbnRlbnQhPVwiXCIpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmm7TmlrDmqKHmnb/vvJpcIittb2RlbF9pZCtcIj4+XCIrbmFtZStcIj4+XCIrY29udGVudCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmgqjnmoTlj5HpgIHkurrmmLXnp7Av5YaF5a655Li656m6Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYobmFtZSA9PSBzbXNfbmFtZSAmJiBjb250ZW50ID09IHNtc19jb250ZW50KXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmgqjmsqHmnInlgZrku7vkvZXmqKHmnb/kv67mlLknKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgICAgdmFyIHVybCA9IFwiL21vZGVsY2hhbmdlXCI7XHJcbiAgICAgICAgICAgICQucG9zdCh1cmwsIHsnbW9kZWxfaWQnOiBtb2RlbF9pZCwnc2VuZF9uaWNrX25hbWUnOm5hbWUsJ2NvbnRlbnQnOmNvbnRlbnR9LGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4gICAgICAgICAgICAgICAgdmFyIFJlQ29kZSA9IHJlc3VsdC5jb2RlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGluZm8gPSByZXN1bHQubXNnO1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChpbmZvKTtcclxuICAgICAgICAgICAgICAgIGlmKFJlQ29kZT09MCl7IC8v5paw5bu65qih5p2/5oiQ5YqfIOW5tuiuvue9ruW9k+WJjeacgOaWsOaPkuWFpeeahOa4oOmBk2lkXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJvcmRlcl9ibHVlJykuYXR0cignZGF0YS1pZCcscmVzdWx0LmlkKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLW5hbWUnLG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5ib3JkZXJfYmx1ZScpLmF0dHIoJ2RhdGEtY29udGVudCcsY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVlZFJlZnJlc2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoUmVDb2RlPT0xKXsgLy/plJnor69cclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZXJyb3JNc2cpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoUmVDb2RlPT0yKXsgLy/mm7TmlrDmqKHmnb/miJDlip9cclxuICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLW5hbWUnLG5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5ib3JkZXJfYmx1ZScpLmF0dHIoJ2RhdGEtY29udGVudCcsY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgbmVlZFJlZnJlc2ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuLy8gZnVuY3Rpb24gaW5pdE1zZ01vZGVsKCkge1xyXG4vL1xyXG4vLyAgICAgJCgnLm1vZGVsX3R5cGUnKS5vbihcImNsaWNrXCIsZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgICQoJy5tb2RlbF90eXBlJykucmVtb3ZlQ2xhc3MoJ2JvcmRlcl9ibHVlJyk7XHJcbi8vICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnYm9yZGVyX2JsdWUnKTtcclxuLy8gICAgICAgICAkKCcjYWRtaW5fbmlja25hbWUnKS52YWwoJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKSk7XHJcbi8vICAgICAgICAgJCgnI2FkbWluX2NvbnRlbnQnKS52YWwoJCh0aGlzKS5hdHRyKCdkYXRhLWNvbnRlbnQnKSk7XHJcbi8vICAgICAgICAgaWYoJCgnI2NhbmNlbF9tb2RlbCcpLmhhc0NsYXNzKCdib3JkZXJfYmx1ZScpKXtcclxuLy8gICAgICAgICAgICAgJCgnLmVkaXRfbW9kZWwnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4vLyAgICAgICAgICAgICAkKCcubW9kZWxfdHlwZScpLnJlbW92ZUNsYXNzKCdib3JkZXJfYmx1ZScpO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgICAgICBtb2RlbF9pZCA9ICQodGhpcykuYXR0cignZGF0YS1pZCcpO1xyXG4vLyAgICAgICAgIHNtc19uYW1lID0gJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKTtcclxuLy8gICAgICAgICBzbXNfY29udGVudCA9ICQodGhpcykuYXR0cignZGF0YS1jb250ZW50Jyk7XHJcbi8vICAgICB9KVxyXG4vL1xyXG4vLyAgICAgJCgnI2FkbWluX2NvbnRlbnQnKS5rZXl1cChmdW5jdGlvbiAoKSB7XHJcbi8vICAgICAgICAgaWYoJCgnLmJvcmRlcl9ibHVlJykubGVuZ3RoID4wKXtcclxuLy8gICAgICAgICAgICAgJCgnLmVkaXRfbW9kZWwnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH0pO1xyXG4vL1xyXG4vLyAgICAgJCgnI2FkbWluX25pY2tuYW1lJykua2V5dXAoZnVuY3Rpb24gKCkge1xyXG4vLyAgICAgICAgIGlmKCQoJy5ib3JkZXJfYmx1ZScpLmxlbmd0aCA+MCl7XHJcbi8vICAgICAgICAgICAgICQoJy5lZGl0X21vZGVsJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy9cclxuLy8gICAgICQoJy5lZGl0X21vZGVsJykub24oXCJjbGlja1wiLGZ1bmN0aW9uICgpIHtcclxuLy8gICAgICAgICAvL+aVsOaNruW6k+S4jeWtmOWcqOebuOWFs+aooeadv1xyXG4vLyAgICAgICAgIG1vZGVsX2lkID0gJCgnLmJvcmRlcl9ibHVlJykuYXR0cignZGF0YS1pZCcpO1xyXG4vLyAgICAgICAgIHZhciBuYW1lID0gJCgnI2FkbWluX25pY2tuYW1lJykudmFsKCk7XHJcbi8vICAgICAgICAgdmFyIGNvbnRlbnQ9ICQoJyNhZG1pbl9jb250ZW50JykudmFsKCk7XHJcbi8vICAgICAgICAgaWYobW9kZWxfaWQ9PVwiXCIpe1xyXG4vLyAgICAgICAgICAgICAvL+WQkeWQjuWPsOaPkuWFpeaooeadv1xyXG4vLyAgICAgICAgICAgICBtb2RlbF9pZCA9IDA7XHJcbi8vICAgICAgICAgICAgIGlmKG5hbWUhPVwiXCIgJiYgY29udGVudCE9XCJcIil7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaWsOWinuaooeadv++8mlwiK21vZGVsX2lkK1wiPj5cIituYW1lK1wiPj5cIitjb250ZW50KTtcclxuLy8gICAgICAgICAgICAgfWVsc2V7XHJcbi8vICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+aCqOeahOWPkemAgeS6uuaYteensC/lhoXlrrnkuLrnqbonKTtcclxuLy8gICAgICAgICAgICAgICAgIHJldHVybjtcclxuLy8gICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgIH1lbHNle1xyXG4vLyAgICAgICAgICAgICAvL+abtOaWsOWOn+acieaooeadv1xyXG4vLyAgICAgICAgICAgICBpZihuYW1lIT1cIlwiICYmIGNvbnRlbnQhPVwiXCIpe1xyXG4vLyAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmm7TmlrDmqKHmnb/vvJpcIittb2RlbF9pZCtcIj4+XCIrbmFtZStcIj4+XCIrY29udGVudCk7XHJcbi8vICAgICAgICAgICAgIH1lbHNle1xyXG4vLyAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmgqjnmoTlj5HpgIHkurrmmLXnp7Av5YaF5a655Li656m6Jyk7XHJcbi8vICAgICAgICAgICAgICAgICByZXR1cm47XHJcbi8vICAgICAgICAgICAgIH1cclxuLy8gICAgICAgICB9XHJcbi8vICAgICAgICAgaWYobmFtZSA9PSBzbXNfbmFtZSAmJiBjb250ZW50ID09IHNtc19jb250ZW50KXtcclxuLy8gICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmgqjmsqHmnInlgZrku7vkvZXmqKHmnb/kv67mlLknKTtcclxuLy8gICAgICAgICB9ZWxzZXtcclxuLy8gICAgICAgICAgICAgc2hvd0xvYWRpbmcoKTtcclxuLy8gICAgICAgICAgICAgdmFyIHVybCA9IFwiL21vZGVsY2hhbmdlXCI7XHJcbi8vICAgICAgICAgICAgICQucG9zdCh1cmwsIHsnbW9kZWxfaWQnOiBtb2RlbF9pZCwnc2VuZF9uaWNrX25hbWUnOm5hbWUsJ2NvbnRlbnQnOmNvbnRlbnR9LGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuLy8gICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcbi8vICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xyXG4vLyAgICAgICAgICAgICAgICAgdmFyIFJlQ29kZSA9IHJlc3VsdC5jb2RlO1xyXG4vLyAgICAgICAgICAgICAgICAgdmFyIGluZm8gPSByZXN1bHQubXNnO1xyXG4vLyAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChpbmZvKTtcclxuLy8gICAgICAgICAgICAgICAgIGlmKFJlQ29kZT09MCl7IC8v5paw5bu65qih5p2/5oiQ5YqfIOW5tuiuvue9ruW9k+WJjeacgOaWsOaPkuWFpeeahOa4oOmBk2lkXHJcbi8vICAgICAgICAgICAgICAgICAgICAgJCgnLmJvcmRlcl9ibHVlJykuYXR0cignZGF0YS1pZCcscmVzdWx0LmlkKTtcclxuLy8gICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLW5hbWUnLG5hbWUpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICQoJy5ib3JkZXJfYmx1ZScpLmF0dHIoJ2RhdGEtY29udGVudCcsY29udGVudCk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgbmVlZFJlZnJlc2ggPSB0cnVlO1xyXG4vLyAgICAgICAgICAgICAgICAgfWVsc2UgaWYoUmVDb2RlPT0xKXsgLy/plJnor69cclxuLy8gICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQuZXJyb3JNc2cpO1xyXG4vLyAgICAgICAgICAgICAgICAgfWVsc2UgaWYoUmVDb2RlPT0yKXsgLy/mm7TmlrDmqKHmnb/miJDlip9cclxuLy8gICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLW5hbWUnLG5hbWUpO1xyXG4vLyAgICAgICAgICAgICAgICAgICAgICQoJy5ib3JkZXJfYmx1ZScpLmF0dHIoJ2RhdGEtY29udGVudCcsY29udGVudCk7XHJcbi8vICAgICAgICAgICAgICAgICAgICAgbmVlZFJlZnJlc2ggPSB0cnVlO1xyXG4vLyAgICAgICAgICAgICAgICAgfVxyXG4vLyAgICAgICAgICAgICB9KTtcclxuLy8gICAgICAgICB9XHJcbi8vICAgICB9KTtcclxuLy8gfVxyXG5cclxuLy/nrqHnkIblkZjlm57lpI1cclxuZnVuY3Rpb24gYWRtaW5Nc2coY29tbWVudF9pZCx1c2VyX2lkLGlzX2FkbWluKSB7XHJcbiAgICB2YXIgY29tbWVudF9pZCA9IGNvbW1lbnRfaWQ7XHJcbiAgICB2YXIgdXNlcl9pZCA9IHVzZXJfaWQ7XHJcbiAgICB2YXIgaXNfYWRtaW4gPSBpc19hZG1pbjtcclxuICAgICQoJyNhZG1pbl9uaWNrbmFtZScpLnZhbCgn566h55CG5ZGYJyk7XHJcbiAgICAkKFwiI0FkbWluTW9kYWxcIikubW9kYWwoJ3Nob3cnKTtcclxuICAgIC8v56Gu6K6k5oyJ6ZKu54K55Ye7XHJcbiAgICAkKFwiI2FkbWluc2VuZFwiKS5jaGlsZHJlbihcImJ1dHRvblwiKS5lcSgwKS51bmJpbmQoXCJjbGlja1wiKS5iaW5kKFwiY2xpY2tcIiAsIGZ1bmN0aW9uICgpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoaXNfYWRtaW4gPT0gMSl7XHJcbiAgICAgICAgICAgIC8v5aaC5p6c6K+l6K+E6K665piv566h55CG5ZGY5Zue5aSN77yM5YiZ5o+Q56S66ZSZ6K+v44CCXHJcbiAgICAgICAgICAgIHdpbmRvdy53eGMueGNDb25maXJtKCfnrqHnkIblkZjlt7Lnu4/lm57lpI3ov4fkuoblk6Z+JywnZXJyb3InKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB2YXIgbmlja25hbWU9JChcIiNhZG1pbl9uaWNrbmFtZVwiKS52YWwoKTtcclxuICAgICAgICAgICAgdmFyIGNvbnRlbnQ9JChcIiNhZG1pbl9jb250ZW50XCIpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZihuaWNrbmFtZS5sZW5ndGggPT0gMClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgd2luZG93Lnd4Yy54Y0NvbmZpcm0oJ+S6su+8jOi/mOacqui+k+WFpeeuoeeQhuWRmOaYteensOWTpn4nLCdlcnJvcicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGNvbnRlbnQubGVuZ3RoID09IDApXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy53eGMueGNDb25maXJtKCfkurLvvIzov5jmnKrovpPlhaXmtojmga/lhoXlrrnlk6Z+JywnZXJyb3InKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKFwiI0FkbWluTW9kYWxcIikubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICAgICAgc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAgICAgJC5wb3N0KFwiL3N1Ym1pdF9hZG1pbl9jb21tZW50XCIse1wiY29tbWVudF9pZFwiOmNvbW1lbnRfaWQsXCJjb21tZW50X2FkbWluX25hbWVcIjpuaWNrbmFtZSxcInVzZXJfaWRcIjp1c2VyX2lkLFwicmVwbGF5X2NvbnRlbnRcIjpjb250ZW50fSxmdW5jdGlvbihkYXRhKVxyXG4gICAgICAgICAgICB7XHJcblxyXG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5jb2RlPT0wKVxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHdpbmRvdy53eGMueGNDb25maXJtKFwi5Zue5aSN5oiQ5YqfXCIsXCJzdWNjZXNzXCIse29uT2s6ZnVuY3Rpb24gKClcclxuICAgICAgICAgICAgICAgICAgICAvLyB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9fSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuWbnuWkjeaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy93aW5kb3cud3hjLnhjQ29uZmlybShcIuezu+e7n+e5geW/me+8jOivt+eojeWQjuWGjeivlSFcIixcImVycm9yXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuezu+e7n+e5geW/me+8jOivt+eojeWQjuWGjeivlSFcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuLy/liIfmjaLmjpLluo9cclxuZnVuY3Rpb24gb3JkZXJCeVBhcmFtZXRlcihuZXdQYXJhbWV0ZXIpIHtcclxuICAgIHZhciBvbGRQYXJhbWV0ZXIgPSBHZXRRdWVyeVN0cmluZygnb3JkZXJfcGFyYW1ldGVyJyk7XHJcbiAgICAvL+iOt+WPluW9k+WJjemhtXVybFxyXG4gICAgdmFyIG9ialVybCA9IHdpbmRvdy5sb2NhdGlvbi5ocmVmO1xyXG4gICAgaWYob2xkUGFyYW1ldGVyKXsgICAvLyAgb2xkUGFyYW1ldGVy5LiN5Li6dW5kZWZpbmVk44CBbnVsbOOAgU5hTu+8jOaVsOWtl+S4jeS4ujDvvIzlrZfnrKbkuLLkuI3kuLpcIlwi77yMXHJcbiAgICAgICAgb2JqVXJsID0gb2JqVXJsLnJlcGxhY2UoJ29yZGVyX3BhcmFtZXRlcj0nK29sZFBhcmFtZXRlciwnb3JkZXJfcGFyYW1ldGVyPScrbmV3UGFyYW1ldGVyKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGlmKG9ialVybC5pbmRleE9mKCdvcmRlcl9wYXJhbWV0ZXInKT4wKXtcclxuICAgICAgICAgICAgb2JqVXJsID0gb2JqVXJsLnJlcGxhY2UoJ29yZGVyX3BhcmFtZXRlcj0nK29sZFBhcmFtZXRlciwnb3JkZXJfcGFyYW1ldGVyPScrbmV3UGFyYW1ldGVyKTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgdmFyIGpvaW4gPSBvYmpVcmwuaW5kZXhPZignPycpPjA/ICcmJyA6ICc/JztcclxuICAgICAgICAgICAgb2JqVXJsID0gb2JqVXJsICsgam9pbiArJ29yZGVyX3BhcmFtZXRlcj0nICsgbmV3UGFyYW1ldGVyO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8v5bCG6aG156CB6YeN572u5Yiw56ys5LiA6aG1XHJcbiAgICBpZihvYmpVcmwuaW5kZXhPZigncGFnZScpPjApIHtcclxuICAgICAgICBvYmpVcmwgPSBvYmpVcmwucmVwbGFjZSgncGFnZT0nKyBHZXRRdWVyeVN0cmluZygncGFnZScpLCAncGFnZT0xJyk7XHJcbiAgICB9XHJcbiAgICAvL+i9rOWQkeebruagh+WcsOWdgFxyXG4gICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBvYmpVcmw7XHJcbn1cclxuIl19
