$(function(){videoUpload.init();$(".videoUploadCancle").hide()});var is_edit=false;var fileId;var videoGsize;var transcodeNotifyUrl;var videoTypes=["WMV","WM","ASF","ASX","RM","RMVB","RA","RAM","MPG","MPEG","MPE","VOB","DAT","MOV","3GP","MP4","MP4V","M4V","MKV","AVI","FLV","F4V","wmv","wm","asf","asx","rm","rmvb","ra","ram","mpg","mpeg","mpe","vob","dat","mov","3gp","mp4","mp4v","m4v","mkv","avi","flv","f4v"];var videoUpload=function(){var e={};var o=function(e){$.ajax({url:"/getsigv4",data:JSON.stringify({Action:"GetVodSignatureV2"}),type:"POST",dataType:"json",success:function(o){console.log(o);if(o.result){console.log("成功");e(o.result)}else{console.log("获取签名失败");return"获取签名失败"}}})};e.init=function(){$("#video_file").click(function(){$("#uploadVideoNow-file").click()});function e(e,o){var i=e.length;while(i--){if(e[i]===o){return true}}console.log("找不到");return false}var i=function(e,o){var i={};return i.type=e.name.slice(e.name.match(/\.[^\.]+$/).index+1),i.name=o||e.name.slice(0,e.name.match(/\.[^\.]+$/).index),i.size=e.size,i.error="",(void 0==i.name||""==i.name||/[:*?,<>\'\"\\]/g.test(i.name))&&(i.error='文件名不得包含 / : * ? "  < > 等字符'),i};$("#uploadVideoNow-file").on("change",function(t){var a=this.files[0];var r=i(a,a.name);console.log(r);console.log(r.error);if(r.error!=""){baseUtils.show.redTip(r.error);$("#uploadVideoNow-file").val("");return false}if(!e(videoTypes,r.type)){baseUtils.show.redTip("上传的文件必须为视频文件哦~");$("#uploadVideoNow-file").val("");return false}var n=a.size;videoGsize=Number(n/(1024*1024)).toFixed(2);if(videoGsize>1024){baseUtils.show.redTip("请将视频文件压缩到 1G 以内");return false}var s=qcVideo.ugcUploader.start({videoFile:a,getSignature:o,allowAudio:0,isTranscode:true,transcodeNotifyUrl:transcodeNotifyUrl,success:function(e){console.log("上传成功");console.log(e);is_edit=false;$(".videoUploadLineA").css("width","100%");$(".videoPercent").text("已完成");$(".uploadRatio span:nth-of-type(1)").text(videoGsize+"M");$(".uploadRatio span:nth-of-type(2)").text(videoGsize+"M")},error:function(e){console.log("上传失败");console.log(e)},progress:function(e){is_edit=true;$("#videoName").hide();$(".videoUploadBox").fadeIn(300);$(".videoBoxTitle").text(e.name);$(".videoSize").text(videoGsize+"M");if(e.shacurr<1){$(".videoPercent").text("视频正在解析中");$(".uploadRatio span").text("");$(".videoUploadLineA").css("width","0%")}else if(e.shacurr==1){var o=parseFloat(videoGsize)*parseFloat(e.curr);o=o.toFixed(2);var i=Number(e.curr*100).toFixed(2);$(".videoUploadLineA").css("width",i+"%");$(".videoPercent").text(i+"%");$(".uploadRatio span:nth-of-type(1)").text(o+"M");$(".uploadRatio span:nth-of-type(2)").text(videoGsize+"M")}if(e.type=="video"){console.log(e)}},finish:function(e){console.log("finish");console.log(e);fileId=e.fileId;VideoName=e.videoName}})})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvVXBsb2FkVWdjLmpzIl0sIm5hbWVzIjpbIiQiLCJ2aWRlb1VwbG9hZCIsImluaXQiLCJoaWRlIiwiaXNfZWRpdCIsImZpbGVJZCIsInZpZGVvR3NpemUiLCJ0cmFuc2NvZGVOb3RpZnlVcmwiLCJ2aWRlb1R5cGVzIiwiZ2V0U2lnbmF0dXJlIiwiY2FsbGJhY2siLCJhamF4IiwidXJsIiwiZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJBY3Rpb24iLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwicmVzIiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImNsaWNrIiwiY29udGFpbnMiLCJhcnIiLCJvYmoiLCJpIiwibGVuZ3RoIiwiZ2V0RmlsZU1lc3NhZ2UiLCJmaWxlIiwibmV3bmFtZSIsImZpbGVNc2ciLCJuYW1lIiwic2xpY2UiLCJtYXRjaCIsImluZGV4Iiwic2l6ZSIsImVycm9yIiwidGVzdCIsIm9uIiwiZSIsInZpZGVvRmlsZSIsInRoaXMiLCJmaWxlcyIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJ2YWwiLCJ2aWRlb1NpemUiLCJOdW1iZXIiLCJ0b0ZpeGVkIiwicmVzdWx0TXNnIiwicWNWaWRlbyIsInVnY1VwbG9hZGVyIiwic3RhcnQiLCJhbGxvd0F1ZGlvIiwiaXNUcmFuc2NvZGUiLCJjc3MiLCJ0ZXh0IiwicHJvZ3Jlc3MiLCJmYWRlSW4iLCJzaGFjdXJyIiwidXBsb2FkQ29tcGxldGVTaXplIiwicGFyc2VGbG9hdCIsImN1cnIiLCJjdXJyUGVyY2VudCIsImZpbmlzaCIsIlZpZGVvTmFtZSIsInZpZGVvTmFtZSJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUUsV0FDRUMsWUFBWUMsTUFFWkYsR0FBRSxzQkFBc0JHLFFBRzVCLElBQUlDLFNBQVUsS0FDZCxJQUFJQyxPQUNKLElBQUlDLFdBQ0osSUFBSUMsbUJBQ0osSUFBSUMsYUFBYyxNQUFPLEtBQU0sTUFBTyxNQUFPLEtBQU0sT0FBUSxLQUFNLE1BQU8sTUFBTyxPQUFR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SUFDNUI5RCxHQUFFLGtCQUFrQjRELEtBQUtyQyxFQUFPVyxLQUNoQ2xDLEdBQUUsY0FBYzRELEtBQUt0RCxXQUFXLElBRWhDLElBQUdpQixFQUFPd0MsUUFBUSxFQUFFLENBQ2hCL0QsRUFBRSxpQkFBaUI0RCxLQUFLLFVBQ3hCNUQsR0FBRSxxQkFBcUI0RCxLQUFLLEdBQzVCNUQsR0FBRSxxQkFBcUIyRCxJQUFJLFFBQVEsVUFDakMsSUFBR3BDLEVBQU93QyxTQUFTLEVBQUcsQ0FDeEIsR0FBSUMsR0FBbUJDLFdBQVczRCxZQUFZMkQsV0FBVzFDLEVBQU8yQyxLQUNoRUYsR0FBbUJBLEVBQW1CWixRQUFRLEVBRTlDLElBQUllLEdBQVloQixPQUFPNUIsRUFBTzJDLEtBQUssS0FBS2QsUUFBUSxFQUNoRHBELEdBQUUscUJBQXFCMkQsSUFBSSxRQUFRUSxFQUFZLElBQy9DbkUsR0FBRSxpQkFBaUI0RCxLQUFLTyxFQUFZLElBQ3BDbkUsR0FBRSxvQ0FBb0M0RCxLQUFLSSxFQUFtQixJQUM5RGhFLEdBQUUsb0NBQW9DNEQsS0FBS3RELFdBQVcsS0FFMUQsR0FBR2lCLEVBQU9OLE1BQVEsUUFBUyxDQUN2QkksUUFBUUMsSUFBSUMsS0FHcEI2QyxPQUFRLFNBQVM3QyxHQUNiRixRQUFRQyxJQUFJLFNBQ1pELFNBQVFDLElBQUlDLEVBQ1psQixRQUFPa0IsRUFBT2xCLE1BQ2RnRSxXQUFZOUMsRUFBTytDLGVBTW5DLE9BQU9yRSIsImZpbGUiOiJ2aWRlb1VwbG9hZFVnYy5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24gKCkge1xuICAgIHZpZGVvVXBsb2FkLmluaXQoKTtcblxuICAgICQoXCIudmlkZW9VcGxvYWRDYW5jbGVcIikuaGlkZSgpO1xufSk7XG5cbnZhciBpc19lZGl0ID0gZmFsc2U7XG52YXIgZmlsZUlkO1xudmFyIHZpZGVvR3NpemU7XG52YXIgdHJhbnNjb2RlTm90aWZ5VXJsOyAvLyDovaznoIHmiJDlip/lm57osIPlnLDlnYBcbnZhciB2aWRlb1R5cGVzID0gW1wiV01WXCIsIFwiV01cIiwgXCJBU0ZcIiwgXCJBU1hcIiwgXCJSTVwiLCBcIlJNVkJcIiwgXCJSQVwiLCBcIlJBTVwiLCBcIk1QR1wiLCBcIk1QRUdcIiwgXCJNUEVcIiwgXCJWT0JcIiwgXCJEQVRcIiwgXCJNT1ZcIiwgXCIzR1BcIiwgXCJNUDRcIiwgXCJNUDRWXCIsIFwiTTRWXCIsIFwiTUtWXCIsIFwiQVZJXCIsIFwiRkxWXCIsIFwiRjRWXCIsXCJ3bXZcIiwgXCJ3bVwiLCBcImFzZlwiLCBcImFzeFwiLCBcInJtXCIsIFwicm12YlwiLCBcInJhXCIsIFwicmFtXCIsIFwibXBnXCIsIFwibXBlZ1wiLCBcIm1wZVwiLCBcInZvYlwiLCBcImRhdFwiLCBcIm1vdlwiLCBcIjNncFwiLCBcIm1wNFwiLCBcIm1wNHZcIiwgXCJtNHZcIiwgXCJta3ZcIiwgXCJhdmlcIiwgXCJmbHZcIiwgXCJmNHZcIl1cbnZhciB2aWRlb1VwbG9hZD1mdW5jdGlvbiAoKSB7XG4gICAgdmFyIHZpZGVvVXBsb2FkPXt9O1xuXG4gICAgLyoqXG4gICAgICog6K6h566X562+5ZCNXG4gICAgICoqL1xuICAgICAgICAvLyBodHRwOi8vMTIzLjIwNi44My4xMjA6ODAvaW50ZXJmYWNlLnBocFxuICAgIHZhciBnZXRTaWduYXR1cmUgPSBmdW5jdGlvbihjYWxsYmFjayl7XG4gICAgICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgICAgIHVybDogJy9nZXRzaWd2NCcsXG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgICAgICBcIkFjdGlvblwiOlwiR2V0Vm9kU2lnbmF0dXJlVjJcIlxuICAgICAgICAgICAgICAgIH0pLFxuICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlcyl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICAgICAgICAgICAgIGlmKHJlcy5yZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuiOt+WPluetvuWQjeWksei0pVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAn6I635Y+W562+5ZCN5aSx6LSlJztcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICB2aWRlb1VwbG9hZC5pbml0PWZ1bmN0aW9uICgpIHtcbiAgICAgICAgJChcIiN2aWRlb19maWxlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIjdXBsb2FkVmlkZW9Ob3ctZmlsZVwiKS5jbGljaygpO1xuICAgICAgICB9KTtcblxuICAgICAgICBmdW5jdGlvbiBjb250YWlucyhhcnIsIG9iaikge1xuICAgICAgICAgICAgdmFyIGkgPSBhcnIubGVuZ3RoO1xuICAgICAgICAgICAgd2hpbGUgKGktLSkge1xuICAgICAgICAgICAgICAgIGlmIChhcnJbaV0gPT09IG9iaikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zb2xlLmxvZygn5om+5LiN5YiwJyk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGdldEZpbGVNZXNzYWdlID0gZnVuY3Rpb24oZmlsZSwgbmV3bmFtZSkge1xuICAgICAgICAgICAgdmFyIGZpbGVNc2cgPSB7fTtcbiAgICAgICAgICAgIHJldHVybiBmaWxlTXNnLnR5cGUgPSBmaWxlLm5hbWUuc2xpY2UoZmlsZS5uYW1lLm1hdGNoKC9cXC5bXlxcLl0rJC8pLmluZGV4ICsgMSksXG4gICAgICAgICAgICAgICAgZmlsZU1zZy5uYW1lID0gbmV3bmFtZSB8fCBmaWxlLm5hbWUuc2xpY2UoMCwgZmlsZS5uYW1lLm1hdGNoKC9cXC5bXlxcLl0rJC8pLmluZGV4KSxcbiAgICAgICAgICAgICAgICBmaWxlTXNnLnNpemUgPSBmaWxlLnNpemUsXG4gICAgICAgICAgICAgICAgZmlsZU1zZy5lcnJvciA9IFwiXCIsXG4gICAgICAgICAgICAodm9pZCAwID09IGZpbGVNc2cubmFtZSB8fCBcIlwiID09IGZpbGVNc2cubmFtZSB8fCAvWzoqPyw8PlxcJ1xcXCJcXFxcXS9nLnRlc3QoZmlsZU1zZy5uYW1lKSkgJiYgKGZpbGVNc2cuZXJyb3IgPSAn5paH5Lu25ZCN5LiN5b6X5YyF5ZCrIC8gOiAqID8gXCIgIDwgPiDnrYnlrZfnrKYnKSxcbiAgICAgICAgICAgICAgICBmaWxlTXNnXG4gICAgICAgIH1cbiAgICAgICAgJCgnI3VwbG9hZFZpZGVvTm93LWZpbGUnKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciB2aWRlb0ZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuICAgICAgICAgICAgdmFyIGZpbGVNc2cgPSBnZXRGaWxlTWVzc2FnZSh2aWRlb0ZpbGUsdmlkZW9GaWxlLm5hbWUpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coZmlsZU1zZyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlTXNnLmVycm9yKTtcbiAgICAgICAgICAgIC8v6ZmQ5Yi26KeG6aKR5paH5Lu25ZCN5LiN6IO95YyF5ZCr54m55q6K56ym5Y+3XG4gICAgICAgICAgICBpZihmaWxlTXNnLmVycm9yIT0nJyl7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGZpbGVNc2cuZXJyb3IpO1xuICAgICAgICAgICAgICAgICQoJyN1cGxvYWRWaWRlb05vdy1maWxlJykudmFsKCcnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL+mZkOWItuinhumikeaWh+S7tuexu+Wei+S4um1wNOaWh+S7tlxuICAgICAgICAgICAgaWYoIWNvbnRhaW5zKHZpZGVvVHlwZXMsZmlsZU1zZy50eXBlKSl7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfkuIrkvKDnmoTmlofku7blv4XpobvkuLrop4bpopHmlofku7blk6Z+Jyk7XG4gICAgICAgICAgICAgICAgJCgnI3VwbG9hZFZpZGVvTm93LWZpbGUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v6I635Y+W5paH5Lu25aSn5bCPXG4gICAgICAgICAgICB2YXIgdmlkZW9TaXplID0gdmlkZW9GaWxlLnNpemU7XG4gICAgICAgICAgICB2aWRlb0dzaXplID0gTnVtYmVyKHZpZGVvU2l6ZS8oMTAyNCoxMDI0KSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIGlmKHZpZGVvR3NpemU+MTAyNCl7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35bCG6KeG6aKR5paH5Lu25Y6L57yp5YiwIDFHIOS7peWGhVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyB2aWRlb0ZpbGUubmFtZVxuICAgICAgICAgICAgdmFyIHJlc3VsdE1zZyA9IHFjVmlkZW8udWdjVXBsb2FkZXIuc3RhcnQoe1xuICAgICAgICAgICAgICAgIHZpZGVvRmlsZTogdmlkZW9GaWxlLFxuICAgICAgICAgICAgICAgIGdldFNpZ25hdHVyZTogZ2V0U2lnbmF0dXJlLFxuICAgICAgICAgICAgICAgIGFsbG93QXVkaW86IDAsXG4gICAgICAgICAgICAgICAgaXNUcmFuc2NvZGU6IHRydWUsLy/mmK/lkKbovaznoIFcbiAgICAgICAgICAgICAgICB0cmFuc2NvZGVOb3RpZnlVcmw6IHRyYW5zY29kZU5vdGlmeVVybCwgLy8o6L2s56CB5oiQ5Yqf5ZCO55qE5Zue6LCD5Zyw5Z2AKWlzVHJhbnNjb2RlPT10cnVlLOaXtuW8gOWQr++8myDlm57osIN1cmznmoTov5Tlm57mlbDmja7moLzlvI/lj4LogIMgIGh0dHA6Ly93d3cucWNsb3VkLmNvbS93aWtpL3YyL011bHRpcGFydFVwbG9hZFZvZEZpbGVcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5LiK5Lyg5oiQ5YqfJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGlzX2VkaXQgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi52aWRlb1VwbG9hZExpbmVBXCIpLmNzcygnd2lkdGgnLCBcIjEwMCVcIik7XG4gICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW9QZXJjZW50XCIpLnRleHQoXCLlt7LlrozmiJBcIik7XG4gICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUmF0aW8gc3BhbjpudGgtb2YtdHlwZSgxKVwiKS50ZXh0KHZpZGVvR3NpemUrXCJNXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFJhdGlvIHNwYW46bnRoLW9mLXR5cGUoMilcIikudGV4dCh2aWRlb0dzaXplK1wiTVwiKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygn5LiK5Lyg5aSx6LSlJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBwcm9ncmVzczogZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICAgICAgICAgICAgaXNfZWRpdCA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgICQoJyN2aWRlb05hbWUnKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW9VcGxvYWRCb3hcIikuZmFkZUluKDMwMCk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW9Cb3hUaXRsZVwiKS50ZXh0KHJlc3VsdC5uYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi52aWRlb1NpemVcIikudGV4dCh2aWRlb0dzaXplKydNJyk7XG4gICAgICAgICAgICAgICAgICAgIC8v6KeG6aKR5q2j5Zyo6Kej5p6Q5LitXG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5zaGFjdXJyPDEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi52aWRlb1BlcmNlbnRcIikudGV4dChcIuinhumikeato+WcqOino+aekOS4rVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUmF0aW8gc3BhblwiKS50ZXh0KFwiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi52aWRlb1VwbG9hZExpbmVBXCIpLmNzcyhcIndpZHRoXCIsXCIwJVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfWVsc2UgaWYocmVzdWx0LnNoYWN1cnI9PTEpIHsgICAvL+inhumikeino+aekOWujOaIkO+8jOW8gOWni+S4iuS8oFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVwbG9hZENvbXBsZXRlU2l6ZT1wYXJzZUZsb2F0KHZpZGVvR3NpemUpKnBhcnNlRmxvYXQocmVzdWx0LmN1cnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkQ29tcGxldGVTaXplPXVwbG9hZENvbXBsZXRlU2l6ZS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/lvZPliY3nmb7liIbmr5RcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjdXJyUGVyY2VudD1OdW1iZXIocmVzdWx0LmN1cnIqMTAwKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi52aWRlb1VwbG9hZExpbmVBXCIpLmNzcyhcIndpZHRoXCIsY3VyclBlcmNlbnQrXCIlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi52aWRlb1BlcmNlbnRcIikudGV4dChjdXJyUGVyY2VudCtcIiVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFJhdGlvIHNwYW46bnRoLW9mLXR5cGUoMSlcIikudGV4dCh1cGxvYWRDb21wbGV0ZVNpemUrXCJNXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi51cGxvYWRSYXRpbyBzcGFuOm50aC1vZi10eXBlKDIpXCIpLnRleHQodmlkZW9Hc2l6ZStcIk1cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LnR5cGUgPT0gJ3ZpZGVvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZmluaXNoOiBmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnZmluaXNoJyk7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIGZpbGVJZD1yZXN1bHQuZmlsZUlkO1xuICAgICAgICAgICAgICAgICAgICBWaWRlb05hbWUgPSByZXN1bHQudmlkZW9OYW1lO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHZpZGVvVXBsb2FkO1xufSgpO1xuXG5cbiJdfQ==
