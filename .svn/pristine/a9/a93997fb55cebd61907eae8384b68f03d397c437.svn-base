$(function(){shareUse.init()});var shareUse=function(){var e={};var s={num:0,id:"",share_knock:0,listen_count:0};e.init=function(){var e;$(".searchAllBtn").on("click",function(){var e=$(this).siblings("input").val();url="/invite/shareUseList/"+$(this).data("url")+"?search="+e;window.location.href=url});$(".shareNumSet").on("click",function(){var n=$(this).parent("td");e=n;s.id=$(this).data("good-id");s.listen_count=$(this).data("listen-count");var t=n.siblings(".share_use_num").html();if(t==="未参与"){$("#shareClose").prop("checked",true);$(".set_share_good_num").prop("disabled",true);s.num=0;s.share_knock=0}else{$("#shareOpen").prop("checked",true);$(".set_share_good_num").prop("disabled",false);s.num=t;s.share_knock=1}$(".set_share_good_title").html(n.siblings(".td_resource").children("p").html());$(".set_share_good_num").val(s.listen_count);$(".set_share_num").addClass("active")});$("#shareOpen").on("click",function(){s.share_knock=1;$(".set_share_good_num").prop("disabled",false)});$("#shareClose").on("click",function(){s.share_knock=0;$(".set_share_good_num").prop("disabled",true)});$(".cancel_sale_btn").on("click",function(){$(".set_share_num").removeClass("active")});$(".confirm_sale_btn").on("click",function(){s.listen_count=$(".set_share_good_num").val();if(s.share_knock===1&&s.listen_count<1){baseUtils.show.redTip("领取上限不能小于1");return false}$("#base_loading").show();$.ajax("/invite/setShareNum",{type:"get",data:s,success:function(n){if(n.code===0){$(".set_share_num").removeClass("active");if(s.share_knock==0){e.siblings(".share_use_num").html("未参与")}else{e.siblings(".share_use_num").html(s.listen_count)}e.children("a").data("listen-count",s.listen_count);baseUtils.show.blueTip("设置成功")}else{$(".set_share_num").removeClass("active");baseUtils.show.redTip(n.msg)}},error:function(e){baseUtils.show.redTip("网络错误")},complete:function(){$("#base_loading").hide()}})})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoYXJlVXNlLmpzIl0sIm5hbWVzIjpbIiQiLCJzaGFyZVVzZSIsImluaXQiLCJzaGFyZUluZm8iLCJudW0iLCJpZCIsInNoYXJlX2tub2NrIiwibGlzdGVuX2NvdW50Iiwibm93RWwiLCJvbiIsInNlYXJjaFRleHQiLCJ0aGlzIiwic2libGluZ3MiLCJ2YWwiLCJ1cmwiLCJkYXRhIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZWwiLCJwYXJlbnQiLCJudW1UZXh0IiwiaHRtbCIsInByb3AiLCJjaGlsZHJlbiIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJiYXNlVXRpbHMiLCJzaG93IiwicmVkVGlwIiwiYWpheCIsInR5cGUiLCJzdWNjZXNzIiwiY29kZSIsImJsdWVUaXAiLCJtc2ciLCJlcnJvciIsImNvbXBsZXRlIiwiaGlkZSJdLCJtYXBwaW5ncyI6IkFBSUFBLEVBQUUsV0FDQ0MsU0FBU0MsUUFHWixJQUFJRCxVQUFXLFdBQ1gsR0FBSUEsS0FDSixJQUFJRSxJQUNBQyxJQUFJLEVBQ0pDLEdBQUcsR0FDSEMsWUFBWSxFQUNaQyxhQUFhLEVBSWpCTixHQUFTQyxLQUFPLFdBRVosR0FBSU0sRUFDSlIsR0FBRSxpQkFBaUJTLEdBQUcsUUFBUSxXQUMxQixHQUFJQyxHQUFhVixFQUFFVyxNQUFNQyxTQUFTLFNBQVNDLEtBQzNDQyxLQUFNLHdCQUF3QmQsRUFBRVcsTUFBTUksS0FBSyxPQUFPLFdBQVdMLENBQzdETSxRQUFPQyxTQUFTQyxLQUFLSixLQUV6QmQsR0FBRSxnQkFBZ0JTLEdBQUcsUUFBUSxXQUN6QixHQUFJVSxHQUFLbkIsRUFBRVcsTUFBTVMsT0FBTyxLQUN4QlosR0FBUVcsQ0FDUmhCLEdBQVVFLEdBQUtMLEVBQUVXLE1BQU1JLEtBQUssVUFDNUJaLEdBQVVJLGFBQWVQLEVBQUVXLE1BQU1JLEtBQUssZUFDdEMsSUFBSU0sR0FBVUYsRUFBR1AsU0FBUyxrQkFBa0JVLE1BRTVDLElBQUdELElBQVksTUFBTSxDQUNqQnJCLEVBQUUsZUFBZXVCLEtBQUssVUFBVSxLQUNoQ3ZCLEdBQUUsdUJBQXVCdUIsS0FBSyxXQUFXLEtBQ3pDcEIsR0FBVUMsSUFBSSxDQUNkRCxHQUFVRyxZQUFZLE1BQ3JCLENBQ0ROLEVBQUUsY0FBY3VCLEtBQUssVUFBVSxLQUMvQnZCLEdBQUUsdUJBQXVCdUIsS0FBSyxXQUFXLE1BQ3pDcEIsR0FBVUMsSUFBTWlCLENBQ2hCbEIsR0FBVUcsWUFBWSxFQUcxQk4sRUFBRSx5QkFBeUJzQixLQUFLSCxFQUFHUCxTQUFTLGdCQUFnQlksU0FBUyxLQUFLRixPQUMxRXRCLEdBQUUsdUJBQXVCYSxJQUFJVixFQUFVSSxhQUN2Q1AsR0FBRSxrQkFBa0J5QixTQUFTLFdBR2pDekIsR0FBRSxjQUFjUyxHQUFHLFFBQVEsV0FDdkJOLEVBQVVHLFlBQVksQ0FDdEJOLEdBQUUsdUJBQXVCdUIsS0FBSyxXQUFXLFFBRzdDdkIsR0FBRSxlQUFlUyxHQUFHLFFBQVEsV0FDeEJOLEVBQVVHLFlBQVksQ0FDdEJOLEdBQUUsdUJBQXVCdUIsS0FBSyxXQUFXLE9BRzdDdkIsR0FBRSxvQkFBb0JTLEdBQUcsUUFBUSxXQUM3QlQsRUFBRSxrQkFBa0IwQixZQUFZLFdBSXBDMUIsR0FBRSxxQkFBcUJTLEdBQUcsUUFBUSxXQUM5Qk4sRUFBVUksYUFBZVAsRUFBRSx1QkFBdUJhLEtBQ2xELElBQUdWLEVBQVVHLGNBQWMsR0FBR0gsRUFBVUksYUFBYSxFQUFFLENBQ25Eb0IsVUFBVUMsS0FBS0MsT0FBTyxZQUN0QixPQUFPLE9BRVg3QixFQUFFLGlCQUFpQjRCLE1BQ25CNUIsR0FBRThCLEtBQUssdUJBQ0hDLEtBQUssTUFDTGhCLEtBQUtaLEVBQ0w2QixRQUFRLFNBQVNqQixHQUNiLEdBQUdBLEVBQUtrQixPQUFPLEVBQUUsQ0FDYmpDLEVBQUUsa0JBQWtCMEIsWUFBWSxTQUNoQyxJQUFHdkIsRUFBVUcsYUFBYSxFQUFFLENBQ3hCRSxFQUFNSSxTQUFTLGtCQUFrQlUsS0FBSyxXQUNwQyxDQUNGZCxFQUFNSSxTQUFTLGtCQUFrQlUsS0FBS25CLEVBQVVJLGNBRXBEQyxFQUFNZ0IsU0FBUyxLQUFLVCxLQUFLLGVBQWVaLEVBQVVJLGFBQ2xEb0IsV0FBVUMsS0FBS00sUUFBUSxZQUN0QixDQUNEbEMsRUFBRSxrQkFBa0IwQixZQUFZLFNBQ2hDQyxXQUFVQyxLQUFLQyxPQUFPZCxFQUFLb0IsT0FJbkNDLE1BQU0sU0FBVXJCLEdBQ2JZLFVBQVVDLEtBQUtDLE9BQU8sU0FFekJRLFNBQVMsV0FDTHJDLEVBQUUsaUJBQWlCc0MsWUFNbkMsT0FBT3JDIiwiZmlsZSI6InNoYXJlVXNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgUm9hbSBvbiAyMDE3LzYvMjMuXHJcbiAqL1xyXG5cclxuJChmdW5jdGlvbigpe1xyXG4gICBzaGFyZVVzZS5pbml0KCk7XHJcbn0pXHJcblxyXG52YXIgc2hhcmVVc2UgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNoYXJlVXNlID0ge307XHJcbiAgICB2YXIgc2hhcmVJbmZvID0ge1xyXG4gICAgICAgIG51bTowLFxyXG4gICAgICAgIGlkOicnLFxyXG4gICAgICAgIHNoYXJlX2tub2NrOjAsXHJcbiAgICAgICAgbGlzdGVuX2NvdW50OjBcclxuICAgIH07XHJcblxyXG5cclxuICAgIHNoYXJlVXNlLmluaXQgPSBmdW5jdGlvbigpe1xyXG4gICAgICAgIC8v5pi+56S65by556qXXHJcbiAgICAgICAgdmFyIG5vd0VsO1xyXG4gICAgICAgICQoJy5zZWFyY2hBbGxCdG4nKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBzZWFyY2hUZXh0ID0gJCh0aGlzKS5zaWJsaW5ncygnaW5wdXQnKS52YWwoKTtcclxuICAgICAgICAgICAgdXJsID0gJy9pbnZpdGUvc2hhcmVVc2VMaXN0LycrJCh0aGlzKS5kYXRhKCd1cmwnKSsnP3NlYXJjaD0nK3NlYXJjaFRleHQ7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPXVybDtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCcuc2hhcmVOdW1TZXQnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBlbCA9ICQodGhpcykucGFyZW50KCd0ZCcpO1xyXG4gICAgICAgICAgICBub3dFbCA9IGVsO1xyXG4gICAgICAgICAgICBzaGFyZUluZm8uaWQgPSAkKHRoaXMpLmRhdGEoJ2dvb2QtaWQnKTtcclxuICAgICAgICAgICAgc2hhcmVJbmZvLmxpc3Rlbl9jb3VudCA9ICQodGhpcykuZGF0YSgnbGlzdGVuLWNvdW50Jyk7XHJcbiAgICAgICAgICAgIHZhciBudW1UZXh0ID0gZWwuc2libGluZ3MoJy5zaGFyZV91c2VfbnVtJykuaHRtbCgpO1xyXG4gICAgICAgICAgICAvL+WIpOaWreW8gOWQr+S4juWFs+mXreiuvue9ruaVsOaNrlxyXG4gICAgICAgICAgICBpZihudW1UZXh0ID09PSBcIuacquWPguS4jlwiKXtcclxuICAgICAgICAgICAgICAgICQoJyNzaGFyZUNsb3NlJykucHJvcCgnY2hlY2tlZCcsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2V0X3NoYXJlX2dvb2RfbnVtJykucHJvcCgnZGlzYWJsZWQnLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgc2hhcmVJbmZvLm51bT0wO1xyXG4gICAgICAgICAgICAgICAgc2hhcmVJbmZvLnNoYXJlX2tub2NrPTA7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJCgnI3NoYXJlT3BlbicpLnByb3AoJ2NoZWNrZWQnLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgJCgnLnNldF9zaGFyZV9nb29kX251bScpLnByb3AoJ2Rpc2FibGVkJyxmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICBzaGFyZUluZm8ubnVtID0gbnVtVGV4dDtcclxuICAgICAgICAgICAgICAgIHNoYXJlSW5mby5zaGFyZV9rbm9jaz0xO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKCcuc2V0X3NoYXJlX2dvb2RfdGl0bGUnKS5odG1sKGVsLnNpYmxpbmdzKCcudGRfcmVzb3VyY2UnKS5jaGlsZHJlbigncCcpLmh0bWwoKSk7XHJcbiAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfZ29vZF9udW0nKS52YWwoc2hhcmVJbmZvLmxpc3Rlbl9jb3VudCk7XHJcbiAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfbnVtJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5byA5ZCv5YiG5LqrXHJcbiAgICAgICAgJCgnI3NoYXJlT3BlbicpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc2hhcmVJbmZvLnNoYXJlX2tub2NrPTE7XHJcbiAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfZ29vZF9udW0nKS5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5YWz6Zet5YiG5LqrXHJcbiAgICAgICAgJCgnI3NoYXJlQ2xvc2UnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNoYXJlSW5mby5zaGFyZV9rbm9jaz0wO1xyXG4gICAgICAgICAgICAkKCcuc2V0X3NoYXJlX2dvb2RfbnVtJykucHJvcCgnZGlzYWJsZWQnLHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcuY2FuY2VsX3NhbGVfYnRuJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCcuc2V0X3NoYXJlX251bScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/mj5DkuqTmlbDmja5cclxuICAgICAgICAkKCcuY29uZmlybV9zYWxlX2J0bicpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc2hhcmVJbmZvLmxpc3Rlbl9jb3VudCA9ICQoJy5zZXRfc2hhcmVfZ29vZF9udW0nKS52YWwoKTtcclxuICAgICAgICAgICAgaWYoc2hhcmVJbmZvLnNoYXJlX2tub2NrPT09MSYmc2hhcmVJbmZvLmxpc3Rlbl9jb3VudDwxKXtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn6aKG5Y+W5LiK6ZmQ5LiN6IO95bCP5LqOMScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJyNiYXNlX2xvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQuYWpheCgnL2ludml0ZS9zZXRTaGFyZU51bScse1xyXG4gICAgICAgICAgICAgICAgdHlwZTonZ2V0JyxcclxuICAgICAgICAgICAgICAgIGRhdGE6c2hhcmVJbmZvLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGU9PT0wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNldF9zaGFyZV9udW0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNoYXJlSW5mby5zaGFyZV9rbm9jaz09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dFbC5zaWJsaW5ncygnLnNoYXJlX3VzZV9udW0nKS5odG1sKFwi5pyq5Y+C5LiOXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dFbC5zaWJsaW5ncygnLnNoYXJlX3VzZV9udW0nKS5odG1sKHNoYXJlSW5mby5saXN0ZW5fY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vd0VsLmNoaWxkcmVuKCdhJykuZGF0YSgnbGlzdGVuLWNvdW50JyxzaGFyZUluZm8ubGlzdGVuX2NvdW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcCgn6K6+572u5oiQ5YqfJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfbnVtJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+vJyk7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgY29tcGxldGU6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjYmFzZV9sb2FkaW5nJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIHNoYXJlVXNlO1xyXG59KCk7Il19
