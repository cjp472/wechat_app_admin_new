$(document).ready(function(){$manageFunction.init()});$manageFunction={currentInfo:{},editState:"",init:function(){this.editState=GetQueryString("state");$("._switchOperateArea").on("click","._functionSwitch",function(e){var t=$(e.delegateTarget),n=t.data("switch_id");$manageFunction.currentInfo={$delegateDom:t,$currentDom:$(this),switchState:t.data("switch_state"),onText:t.data("on_text"),offText:t.data("off_text")};switch(n){case"category_navigation":$manageFunction.handleCategoryNavigation();break;case"subscribe_count":$manageFunction.handleSubscribeCount();break;case"update_num":$manageFunction.handleUpdateNum();break;case"message_remind":$manageFunction.handleMessageRemind();break;case"service_remind":$manageFunction.handleServiceRemind();break;default:console.log("参数错误！");break}});$("#editCategoryNav").click(function(){window.location.href="/category_setting"});if($manageFunction.editState=="finish_edit"){baseUtils.show.blueTip("分类导航编辑完成!");history.replaceState(null,"","/manage_function")}},handleCategoryNavigation:function(){if(this.currentInfo.switchState){$.alert("关闭分类导航后，分类将会隐藏，所有内容均展示在首页","info",{btn:3,oktext:"确认关闭",onOk:function(){$.ajax("/category_switch",{type:"POST",dataType:"json",data:{type:0},success:function(e){if(e.ret==0){$switchBtn.changeSwitchBtnState($manageFunction.currentInfo);baseUtils.show.blueTip("分类导航已隐藏！")}else{if(e.msg!=""&&e.msg!=undefined){baseUtils.show.redTip(e.msg)}else{baseUtils.show.redTip("关闭分类导航失败！")}}},error:function(e,t,n){console.error(n);baseUtils.show.redTip("网络错误，请稍后再试！")}})}})}else{showLoading();$.ajax("/category_switch",{type:"POST",dataType:"json",data:{type:1},success:function(e){hideLoading();if(e.ret==0){$.alert("已成功开启首页分类导航，您现在可以在编辑专栏时选择专栏的所属分类了","info",{btn:2});$switchBtn.changeSwitchBtnState($manageFunction.currentInfo)}else{if(e.msg!=""&&e.msg!=undefined){$.alert("您还未完成首页分类导航的编辑，暂时无法开启该功能","info",{btn:3,onOk:function(){window.location.href="/category_setting"}})}else{baseUtils.show.redTip("开启分类导航失败！")}}},error:function(e,t,n){hideLoading();console.error(n);baseUtils.show.redTip("网络错误，请稍后再试！")}})}},handleSubscribeCount:function(){var e=$(".user_version_num").data("version_type");if(e&&e==3){if(this.currentInfo.switchState){$.alert("关闭后用户将无法看到商品订阅数","error",{title:"提示",icon:"blue",btn:3,onOk:function(){$.ajax("/set_hid_sub",{type:"POST",dataType:"json",data:{status:0},success:function(e){if(e.code==0){baseUtils.show.blueTip("关闭成功！");$switchBtn.changeSwitchBtnState($manageFunction.currentInfo)}else{baseUtils.show.redTip("关闭失败！")}},error:function(e,t,n){console.error(n);baseUtils.show.redTip("网络错误，请稍后再试！")}})}})}else{$.alert("开启后您的用户可以看到商品的订阅数","success",{title:"提示",icon:"blue",btn:3,onOk:function(){$.ajax("/set_hid_sub",{type:"POST",dataType:"json",data:{status:1},success:function(e){console.log(e);if(e.code==0){baseUtils.show.blueTip("开启成功！");$switchBtn.changeSwitchBtnState($manageFunction.currentInfo)}else{baseUtils.show.redTip("开启失败！")}},error:function(e,t,n){console.error(n);baseUtils.show.redTip("网络错误，请稍后再试！")}})}})}}else{baseUtils.show.redTip("当前版本不支持订阅量展示控制功能，如需使用请升级至专业版")}},handleUpdateNum:function(){var e=$(".user_version_num").data("version_type");if(e&&e==3){if(this.currentInfo.switchState){$.alert("关闭后用户将无法看到商品的更新期数","error",{title:"提示",icon:"blue",btn:3,onOk:function(){$.ajax("/set_resource_count",{type:"POST",dataType:"json",data:{status:0},success:function(e){if(e.code==0){baseUtils.show.blueTip("关闭成功！");$switchBtn.changeSwitchBtnState($manageFunction.currentInfo)}else{baseUtils.show.redTip("关闭失败！")}},error:function(e,t,n){console.error(n);baseUtils.show.redTip("网络错误，请稍后再试！")}})}})}else{$.alert("开启后您的用户可以看到商品的更新期数","success",{title:"提示",icon:"blue",btn:3,onOk:function(){$.ajax("/set_resource_count",{type:"POST",dataType:"json",data:{status:1},success:function(e){if(e.code==0){baseUtils.show.blueTip("开启成功！");$switchBtn.changeSwitchBtnState($manageFunction.currentInfo)}else{baseUtils.show.redTip("开启失败！")}},error:function(e,t,n){console.error(n);baseUtils.show.redTip("网络错误，请稍后再试！")}})}})}}else{baseUtils.show.redTip("当前版本不支持更新期数展控制功能，如需使用请升级至专业版")}},handleMessageRemind:function(){$.ajax("/set_alert_message",{type:"POST",dataType:"json",data:{},success:function(e){if(e.code==0){if($manageFunction.currentInfo.switchState){baseUtils.show.blueTip("已关闭消息提醒")}else{baseUtils.show.blueTip("已开启消息提醒")}$switchBtn.changeSwitchBtnState($manageFunction.currentInfo)}else{baseUtils.show.redTip("操作失败，请稍后再试。")}},error:function(e,t,n){console.log(n);baseUtils.show.redTip("服务器出小差了，请稍后再试！")}})},handleServiceRemind:function(){var e=$(".serviceRemind").data("is-push");var t=e==1?0:1;$.ajax("/set_service_notification",{type:"POST",dataType:"json",data:{status:t},success:function(e){if(e.code==0){if($manageFunction.currentInfo.switchState){baseUtils.show.blueTip("已关闭服务号消息通知")}else{baseUtils.show.blueTip("已开启服务号消息通知")}$switchBtn.changeSwitchBtnState($manageFunction.currentInfo)}else{baseUtils.show.redTip("操作失败，请稍后再试。")}},error:function(e,t,n){console.log(n);baseUtils.show.redTip("服务器出小差了，请稍后再试！")}})}};$switchBtn={changeSwitchBtnState:function(e){var t=!e.switchState;if(t){e.$currentDom.css({"background-color":"#2FCE6F"});e.$currentDom.children("._switchDescText").css({left:"9px"});e.$currentDom.children("._switchDescText").text(e.onText);e.$currentDom.children("._switchButtonIcon").css({left:"40px"})}else{e.$currentDom.css({"background-color":"#c2c2c2"});e.$currentDom.children("._switchDescText").css({left:"44px"});e.$currentDom.children("._switchDescText").text(e.offText);e.$currentDom.children("._switchButtonIcon").css({left:"0px"})}e.$delegateDom.data("switch_state",t)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL21hbmFnZUZ1bmN0aW9uLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiJG1hbmFnZUZ1bmN0aW9uIiwiaW5pdCIsImN1cnJlbnRJbmZvIiwiZWRpdFN0YXRlIiwidGhpcyIsIkdldFF1ZXJ5U3RyaW5nIiwib24iLCJlIiwiJGRlbGVnYXRlRG9tIiwiZGVsZWdhdGVUYXJnZXQiLCJzd2l0Y2hJZCIsImRhdGEiLCIkY3VycmVudERvbSIsInN3aXRjaFN0YXRlIiwib25UZXh0Iiwib2ZmVGV4dCIsImhhbmRsZUNhdGVnb3J5TmF2aWdhdGlvbiIsImhhbmRsZVN1YnNjcmliZUNvdW50IiwiaGFuZGxlVXBkYXRlTnVtIiwiaGFuZGxlTWVzc2FnZVJlbWluZCIsImhhbmRsZVNlcnZpY2VSZW1pbmQiLCJjb25zb2xlIiwibG9nIiwiY2xpY2siLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJiYXNlVXRpbHMiLCJzaG93IiwiYmx1ZVRpcCIsImhpc3RvcnkiLCJyZXBsYWNlU3RhdGUiLCJhbGVydCIsImJ0biIsIm9rdGV4dCIsIm9uT2siLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwic3VjY2VzcyIsInJldCIsIiRzd2l0Y2hCdG4iLCJjaGFuZ2VTd2l0Y2hCdG5TdGF0ZSIsIm1zZyIsInVuZGVmaW5lZCIsInJlZFRpcCIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwic2hvd0xvYWRpbmciLCJoaWRlTG9hZGluZyIsInZlcnNpb24iLCJ0aXRsZSIsImljb24iLCJjb2RlIiwicmVzdWx0IiwibWlkIiwia2V5Iiwic3RhdGUiLCJjc3MiLCJiYWNrZ3JvdW5kLWNvbG9yIiwiY2hpbGRyZW4iLCJsZWZ0IiwidGV4dCJdLCJtYXBwaW5ncyI6IkFBSUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FDZEMsZ0JBQWdCQyxRQUdwQkQsa0JBRUlFLGVBRUFDLFVBQVcsR0FFWEYsS0FBTSxXQUVGRyxLQUFLRCxVQUFZRSxlQUFlLFFBR2hDUixHQUFFLHVCQUF1QlMsR0FBRyxRQUFTLG1CQUFvQixTQUFVQyxHQUUvRCxHQUFJQyxHQUFlWCxFQUFFVSxFQUFFRSxnQkFDbkJDLEVBQVdGLEVBQWFHLEtBQUssWUFFakNYLGlCQUFnQkUsYUFDWk0sYUFBY0EsRUFDZEksWUFBYWYsRUFBRU8sTUFDZlMsWUFBYUwsRUFBYUcsS0FBSyxnQkFDL0JHLE9BQVFOLEVBQWFHLEtBQUssV0FDMUJJLFFBQVNQLEVBQWFHLEtBQUssWUFHL0IsUUFBUUQsR0FDSixJQUFLLHNCQUNEVixnQkFBZ0JnQiwwQkFDaEIsTUFDSixLQUFLLGtCQUNEaEIsZ0JBQWdCaUIsc0JBQ2hCLE1BQ0osS0FBSyxhQUNEakIsZ0JBQWdCa0IsaUJBQ2hCLE1BQ0osS0FBSyxpQkFDRGxCLGdCQUFnQm1CLHFCQUNoQixNQUNKLEtBQUssaUJBQ0RuQixnQkFBZ0JvQixxQkFDaEIsTUFDSixTQUNJQyxRQUFRQyxJQUFJLFFBQ1osU0FNWnpCLEdBQUUsb0JBQW9CMEIsTUFBTSxXQUN4QkMsT0FBT0MsU0FBU0MsS0FBTyxxQkFJM0IsSUFBSTFCLGdCQUFnQkcsV0FBYSxjQUFlLENBQzVDd0IsVUFBVUMsS0FBS0MsUUFBUSxZQUN2QkMsU0FBUUMsYUFBYSxLQUFNLEdBQUksc0JBS3ZDZix5QkFBMEIsV0FFbEIsR0FBSVosS0FBS0YsWUFBWVcsWUFBYSxDQUM5QmhCLEVBQUVtQyxNQUFNLDRCQUE2QixRQUNqQ0MsSUFBSyxFQUNMQyxPQUFRLE9BQ1JDLEtBQU0sV0FDRnRDLEVBQUV1QyxLQUFLLG9CQUNIQyxLQUFNLE9BQ05DLFNBQVUsT0FDVjNCLE1BQU8wQixLQUFNLEdBQ2JFLFFBQVMsU0FBVTVCLEdBQ2YsR0FBSUEsRUFBSzZCLEtBQU8sRUFBRyxDQUNmQyxXQUFXQyxxQkFBcUIxQyxnQkFBZ0JFLFlBQ2hEeUIsV0FBVUMsS0FBS0MsUUFBUSxnQkFDcEIsQ0FDSCxHQUFJbEIsRUFBS2dDLEtBQU8sSUFBTWhDLEVBQUtnQyxLQUFPQyxVQUFXLENBQ3pDakIsVUFBVUMsS0FBS2lCLE9BQU9sQyxFQUFLZ0MsU0FDeEIsQ0FDSGhCLFVBQVVDLEtBQUtpQixPQUFPLGdCQUlsQ0MsTUFBTyxTQUFVQyxFQUFLQyxFQUFRQyxHQUMxQjVCLFFBQVF5QixNQUFNRyxFQUNkdEIsV0FBVUMsS0FBS2lCLE9BQU8seUJBTW5DLENBQ0hLLGFBRUFyRCxHQUFFdUMsS0FBSyxvQkFDSEMsS0FBSyxPQUNMQyxTQUFTLE9BQ1QzQixNQUFNMEIsS0FBTSxHQUNaRSxRQUFTLFNBQVU1QixHQUNmd0MsYUFDQSxJQUFJeEMsRUFBSzZCLEtBQU8sRUFBRyxDQUNmM0MsRUFBRW1DLE1BQU0sb0NBQXFDLFFBQ3pDQyxJQUFLLEdBRVRRLFlBQVdDLHFCQUFxQjFDLGdCQUFnQkUsaUJBQzdDLENBQ0gsR0FBSVMsRUFBS2dDLEtBQU8sSUFBTWhDLEVBQUtnQyxLQUFPQyxVQUFXLENBQ3pDL0MsRUFBRW1DLE1BQU0sMkJBQTRCLFFBQ2hDQyxJQUFLLEVBQ0xFLEtBQU0sV0FDRlgsT0FBT0MsU0FBU0MsS0FBTywyQkFHNUIsQ0FDSEMsVUFBVUMsS0FBS2lCLE9BQU8sZ0JBSWxDQyxNQUFPLFNBQVVDLEVBQUtDLEVBQVFDLEdBQzFCRSxhQUNBOUIsU0FBUXlCLE1BQU1HLEVBQ2R0QixXQUFVQyxLQUFLaUIsT0FBTyxvQkFLMUM1QixxQkFBc0IsV0FFZCxHQUFJbUMsR0FBUXZELEVBQUUscUJBQXFCYyxLQUFLLGVBQ3hDLElBQUd5QyxHQUFXQSxHQUFTLEVBQUcsQ0FDdEIsR0FBSWhELEtBQUtGLFlBQVlXLFlBQWEsQ0FDOUJoQixFQUFFbUMsTUFBTSxrQkFBbUIsU0FDdkJxQixNQUFPLEtBQ1BDLEtBQU0sT0FDTnJCLElBQUssRUFDTEUsS0FBTSxXQUNGdEMsRUFBRXVDLEtBQUssZ0JBQ0hDLEtBQU0sT0FDTkMsU0FBVSxPQUNWM0IsTUFBT3FDLE9BQVEsR0FDZlQsUUFBUyxTQUFVNUIsR0FDZixHQUFJQSxFQUFLNEMsTUFBUSxFQUFHLENBQ2hCNUIsVUFBVUMsS0FBS0MsUUFBUSxRQUN2QlksWUFBV0MscUJBQXFCMUMsZ0JBQWdCRSxpQkFDN0MsQ0FDSHlCLFVBQVVDLEtBQUtpQixPQUFPLFdBRzlCQyxNQUFPLFNBQVVDLEVBQUtDLEVBQVFDLEdBQzFCNUIsUUFBUXlCLE1BQU1HLEVBQ2R0QixXQUFVQyxLQUFLaUIsT0FBTyx5QkFLbkMsQ0FDSGhELEVBQUVtQyxNQUFNLG9CQUFxQixXQUN6QnFCLE1BQU8sS0FDUEMsS0FBTSxPQUNOckIsSUFBSyxFQUNMRSxLQUFNLFdBQ0Z0QyxFQUFFdUMsS0FBSyxnQkFDSEMsS0FBTSxPQUNOQyxTQUFVLE9BQ1YzQixNQUFPcUMsT0FBUSxHQUNmVCxRQUFTLFNBQVU1QixHQUNmVSxRQUFRQyxJQUFJWCxFQUNaLElBQUlBLEVBQUs0QyxNQUFRLEVBQUcsQ0FDaEI1QixVQUFVQyxLQUFLQyxRQUFRLFFBQ3ZCWSxZQUFXQyxxQkFBcUIxQyxnQkFBZ0JFLGlCQUM3QyxDQUNIeUIsVUFBVUMsS0FBS2lCLE9BQU8sV0FHOUJDLE1BQU8sU0FBVUMsRUFBS0MsRUFBUUMsR0FDMUI1QixRQUFReUIsTUFBTUcsRUFDZHRCLFdBQVVDLEtBQUtpQixPQUFPLDBCQU12QyxDQUNIbEIsVUFBVUMsS0FBS2lCLE9BQU8sa0NBSWxDM0IsZ0JBQWlCLFdBRVQsR0FBSWtDLEdBQVV2RCxFQUFFLHFCQUFxQmMsS0FBSyxlQUMxQyxJQUFHeUMsR0FBV0EsR0FBVyxFQUFHLENBQ3hCLEdBQUloRCxLQUFLRixZQUFZVyxZQUFhLENBQzlCaEIsRUFBRW1DLE1BQU0sb0JBQXFCLFNBQ3pCcUIsTUFBTyxLQUNQQyxLQUFNLE9BQ05yQixJQUFLLEVBQ0xFLEtBQU0sV0FDRnRDLEVBQUV1QyxLQUFLLHVCQUNIQyxLQUFNLE9BQ05DLFNBQVUsT0FDVjNCLE1BQU9xQyxPQUFRLEdBQ2ZULFFBQVMsU0FBVTVCLEdBQ2YsR0FBSUEsRUFBSzRDLE1BQVEsRUFBRyxDQUNoQjVCLFVBQVVDLEtBQUtDLFFBQVEsUUFDdkJZLFlBQVdDLHFCQUFxQjFDLGdCQUFnQkUsaUJBQzdDLENBQ0h5QixVQUFVQyxLQUFLaUIsT0FBTyxXQUc5QkMsTUFBTyxTQUFVQyxFQUFLQyxFQUFRQyxHQUMxQjVCLFFBQVF5QixNQUFNRyxFQUNkdEIsV0FBVUMsS0FBS2lCLE9BQU8seUJBS25DLENBQ0hoRCxFQUFFbUMsTUFBTSxxQkFBc0IsV0FDMUJxQixNQUFPLEtBQ1BDLEtBQU0sT0FDTnJCLElBQUssRUFDTEUsS0FBTSxXQUNGdEMsRUFBRXVDLEtBQUssdUJBQ0hDLEtBQU0sT0FDTkMsU0FBVSxPQUNWM0IsTUFBT3FDLE9BQVEsR0FDZlQsUUFBUyxTQUFVNUIsR0FDZixHQUFJQSxFQUFLNEMsTUFBUSxFQUFHLENBQ2hCNUIsVUFBVUMsS0FBS0MsUUFBUSxRQUN2QlksWUFBV0MscUJBQXFCMUMsZ0JBQWdCRSxpQkFDN0MsQ0FDSHlCLFVBQVVDLEtBQUtpQixPQUFPLFdBRzlCQyxNQUFPLFNBQVVDLEVBQUtDLEVBQVFDLEdBQzFCNUIsUUFBUXlCLE1BQU1HLEVBQ2R0QixXQUFVQyxLQUFLaUIsT0FBTywwQkFNdkMsQ0FDSGxCLFVBQVVDLEtBQUtpQixPQUFPLGtDQUlsQzFCLG9CQUFxQixXQUVidEIsRUFBRXVDLEtBQUssc0JBQ0hDLEtBQU0sT0FDTkMsU0FBVSxPQUNWM0IsUUFDQTRCLFFBQVMsU0FBVWlCLEdBQ2YsR0FBSUEsRUFBT0QsTUFBUSxFQUFHLENBQ2xCLEdBQUl2RCxnQkFBZ0JFLFlBQVlXLFlBQWEsQ0FDekNjLFVBQVVDLEtBQUtDLFFBQVEsZUFDcEIsQ0FDSEYsVUFBVUMsS0FBS0MsUUFBUSxXQUUzQlksV0FBV0MscUJBQXFCMUMsZ0JBQWdCRSxpQkFDN0MsQ0FDSHlCLFVBQVVDLEtBQUtpQixPQUFPLGlCQUc5QkMsTUFBTyxTQUFVQyxFQUFLQyxFQUFRQyxHQUMxQjVCLFFBQVFDLElBQUkyQixFQUNadEIsV0FBVUMsS0FBS2lCLE9BQU8sc0JBS3RDekIsb0JBQXFCLFdBQ2pCLEdBQUlxQyxHQUFNNUQsRUFBRSxrQkFBa0JjLEtBQUssVUFDbkMsSUFBSStDLEdBQUtELEdBQU8sRUFBRSxFQUFFLENBQ3BCNUQsR0FBRXVDLEtBQUssNkJBQ0hDLEtBQU0sT0FDTkMsU0FBVSxPQUNWM0IsTUFBT3FDLE9BQU9VLEdBQ2RuQixRQUFTLFNBQVVpQixHQUNmLEdBQUlBLEVBQU9ELE1BQVEsRUFBRyxDQUNsQixHQUFJdkQsZ0JBQWdCRSxZQUFZVyxZQUFhLENBQ3pDYyxVQUFVQyxLQUFLQyxRQUFRLGtCQUNwQixDQUNIRixVQUFVQyxLQUFLQyxRQUFRLGNBRTNCWSxXQUFXQyxxQkFBcUIxQyxnQkFBZ0JFLGlCQUM3QyxDQUNIeUIsVUFBVUMsS0FBS2lCLE9BQU8saUJBRzlCQyxNQUFPLFNBQVVDLEVBQUtDLEVBQVFDLEdBQzFCNUIsUUFBUUMsSUFBSTJCLEVBQ1p0QixXQUFVQyxLQUFLaUIsT0FBTyxzQkFPdENKLGFBS0lDLHFCQUFzQixTQUFVeEMsR0FDNUIsR0FBSXlELElBQVN6RCxFQUFZVyxXQUN6QixJQUFJOEMsRUFBTyxDQUNQekQsRUFBWVUsWUFBWWdELEtBQUtDLG1CQUFvQixXQUNqRDNELEdBQVlVLFlBQVlrRCxTQUFTLG9CQUFvQkYsS0FBS0csS0FBUSxPQUNsRTdELEdBQVlVLFlBQVlrRCxTQUFTLG9CQUFvQkUsS0FBSzlELEVBQVlZLE9BQ3RFWixHQUFZVSxZQUFZa0QsU0FBUyxzQkFBc0JGLEtBQUtHLEtBQVEsYUFDakUsQ0FDSDdELEVBQVlVLFlBQVlnRCxLQUFLQyxtQkFBb0IsV0FDakQzRCxHQUFZVSxZQUFZa0QsU0FBUyxvQkFBb0JGLEtBQUtHLEtBQVEsUUFDbEU3RCxHQUFZVSxZQUFZa0QsU0FBUyxvQkFBb0JFLEtBQUs5RCxFQUFZYSxRQUN0RWIsR0FBWVUsWUFBWWtELFNBQVMsc0JBQXNCRixLQUFLRyxLQUFRLFFBRXhFN0QsRUFBWU0sYUFBYUcsS0FBSyxlQUFnQmdEIiwiZmlsZSI6ImFkbWluL21hbmFnZUZ1bmN0aW9uLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQWRtaW5pc3RyYXRvciBvbiAyMDE3LzMvMTMuXHJcbiAqL1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgJG1hbmFnZUZ1bmN0aW9uLmluaXQoKTtcclxufSk7XHJcblxyXG4kbWFuYWdlRnVuY3Rpb24gPSB7XHJcblxyXG4gICAgY3VycmVudEluZm86IHt9LCAgICAvL+eCueWHu+iKgueCueS/oeaBr1xyXG5cclxuICAgIGVkaXRTdGF0ZTogXCJcIiwgLy/mmK/lkKbnvJbovpHmiJDlip/nirbmgIHlj5jph49cclxuXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHRoaXMuZWRpdFN0YXRlID0gR2V0UXVlcnlTdHJpbmcoXCJzdGF0ZVwiKTtcclxuXHJcbiAgICAgICAgLy/lvIDlhbNcclxuICAgICAgICAkKFwiLl9zd2l0Y2hPcGVyYXRlQXJlYVwiKS5vbihcImNsaWNrXCIsIFwiLl9mdW5jdGlvblN3aXRjaFwiLCBmdW5jdGlvbiAoZSkge1xyXG5cclxuICAgICAgICAgICAgdmFyICRkZWxlZ2F0ZURvbSA9ICQoZS5kZWxlZ2F0ZVRhcmdldCksXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hJZCA9ICRkZWxlZ2F0ZURvbS5kYXRhKFwic3dpdGNoX2lkXCIpO1xyXG5cclxuICAgICAgICAgICAgJG1hbmFnZUZ1bmN0aW9uLmN1cnJlbnRJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgJGRlbGVnYXRlRG9tOiAkZGVsZWdhdGVEb20sXHJcbiAgICAgICAgICAgICAgICAkY3VycmVudERvbTogJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIHN3aXRjaFN0YXRlOiAkZGVsZWdhdGVEb20uZGF0YShcInN3aXRjaF9zdGF0ZVwiKSwgICAgLy/lvZPliY3lvIDlhbPnmoTnirbmgIE8dHJ1ZS9mYWxzZT5cclxuICAgICAgICAgICAgICAgIG9uVGV4dDogJGRlbGVnYXRlRG9tLmRhdGEoXCJvbl90ZXh0XCIpLFxyXG4gICAgICAgICAgICAgICAgb2ZmVGV4dDogJGRlbGVnYXRlRG9tLmRhdGEoXCJvZmZfdGV4dFwiKVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChzd2l0Y2hJZCkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImNhdGVnb3J5X25hdmlnYXRpb25cIjogLy/pppbpobXliIbnsbvlr7zoiKpcclxuICAgICAgICAgICAgICAgICAgICAkbWFuYWdlRnVuY3Rpb24uaGFuZGxlQ2F0ZWdvcnlOYXZpZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwic3Vic2NyaWJlX2NvdW50XCI6IC8v6K6i6ZiF6YeP5bGV56S6XHJcbiAgICAgICAgICAgICAgICAgICAgJG1hbmFnZUZ1bmN0aW9uLmhhbmRsZVN1YnNjcmliZUNvdW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwidXBkYXRlX251bVwiOiAgLy/mm7TmlrDmnJ/mlbDlsZXnpLpcclxuICAgICAgICAgICAgICAgICAgICAkbWFuYWdlRnVuY3Rpb24uaGFuZGxlVXBkYXRlTnVtKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibWVzc2FnZV9yZW1pbmRcIjogIC8v5raI5oGv5o+Q6YaSXHJcbiAgICAgICAgICAgICAgICAgICAgJG1hbmFnZUZ1bmN0aW9uLmhhbmRsZU1lc3NhZ2VSZW1pbmQoKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJzZXJ2aWNlX3JlbWluZFwiOiAgLy/mnI3liqHlj7fmtojmga/pgJrnn6VcclxuICAgICAgICAgICAgICAgICAgICAkbWFuYWdlRnVuY3Rpb24uaGFuZGxlU2VydmljZVJlbWluZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWPguaVsOmUmeivr++8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/nvJbovpHliIbnsbvlr7zoiKpcclxuICAgICAgICAkKFwiI2VkaXRDYXRlZ29yeU5hdlwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvY2F0ZWdvcnlfc2V0dGluZ1wiO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyAg5Yid5aeL5YyW5pe25p+l55yL5piv5ZCm57yW6L6R5YiG57G75a+86Iiq5oiQ5YqfXHJcbiAgICAgICAgaWYgKCRtYW5hZ2VGdW5jdGlvbi5lZGl0U3RhdGUgPT0gXCJmaW5pc2hfZWRpdFwiKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLliIbnsbvlr7zoiKrnvJbovpHlrozmiJAhXCIpO1xyXG4gICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBcIlwiLCBcIi9tYW5hZ2VfZnVuY3Rpb25cIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcblxyXG4gICAgaGFuZGxlQ2F0ZWdvcnlOYXZpZ2F0aW9uOiBmdW5jdGlvbiAoKSB7ICAvLyAg54K55Ye75YiH5o2i5YiG57G75a+86Iiq5byA5YWzXHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5mby5zd2l0Y2hTdGF0ZSkgeyAgICAgIC8vICDlhbPpl63liIbnsbvlr7zoiKpcclxuICAgICAgICAgICAgICAgICQuYWxlcnQoXCLlhbPpl63liIbnsbvlr7zoiKrlkI7vvIzliIbnsbvlsIbkvJrpmpDol4/vvIzmiYDmnInlhoXlrrnlnYflsZXnpLrlnKjpppbpobVcIiwgXCJpbmZvXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICBidG46IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgb2t0ZXh0OiBcIuehruiupOWFs+mXrVwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KFwiL2NhdGVnb3J5X3N3aXRjaFwiLHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge3R5cGU6IDB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXQgPT0gMCkgeyAgICAgICAgLy8gIOWFs+mXreWIhuexu+WvvOiIquaIkOWKnyAtIOaYvuekuuaPkOekulxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkc3dpdGNoQnRuLmNoYW5nZVN3aXRjaEJ0blN0YXRlKCRtYW5hZ2VGdW5jdGlvbi5jdXJyZW50SW5mbyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLliIbnsbvlr7zoiKrlt7LpmpDol4/vvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubXNnICE9IFwiXCIgJiYgZGF0YS5tc2cgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5YWz6Zet5YiG57G75a+86Iiq5aSx6LSl77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICDmiZPlvIDliIbnsbvlr7zoiKpcclxuICAgICAgICAgICAgICAgIHNob3dMb2FkaW5nKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5hamF4KCcvY2F0ZWdvcnlfc3dpdGNoJyx7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTpcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTpcImpzb25cIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOnt0eXBlOiAxfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXQgPT0gMCkgeyAgICAgICAgLy8gIOW8gOWQr+WIhuexu+WvvOiIquaIkOWKnyAtIOaYvuekuuaPkOekulxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIuW3suaIkOWKn+W8gOWQr+mmlumhteWIhuexu+WvvOiIqu+8jOaCqOeOsOWcqOWPr+S7peWcqOe8lui+keS4k+agj+aXtumAieaLqeS4k+agj+eahOaJgOWxnuWIhuexu+S6hlwiLCBcImluZm9cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN3aXRjaEJ0bi5jaGFuZ2VTd2l0Y2hCdG5TdGF0ZSgkbWFuYWdlRnVuY3Rpb24uY3VycmVudEluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEubXNnICE9IFwiXCIgJiYgZGF0YS5tc2cgIT0gdW5kZWZpbmVkKSB7ICAvL+Wksei0peWOn+WboCAtIC0g5pyq5a6M5oiQ5YiG57G75a+86Iiq55qE57yW6L6RXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIuaCqOi/mOacquWujOaIkOmmlumhteWIhuexu+WvvOiIqueahOe8lui+ke+8jOaaguaXtuaXoOazleW8gOWQr+ivpeWKn+iDvVwiLCBcImluZm9cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IDMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uICgpIHsgLy/nq4vljbPnvJbovpFcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9jYXRlZ29yeV9zZXR0aW5nJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5aSx6LSl5Y6f5ZugIC0gLSDlhbblroPplJnor69cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLlvIDlkK/liIbnsbvlr7zoiKrlpLHotKXvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgIH0sXHJcbiAgICBoYW5kbGVTdWJzY3JpYmVDb3VudDogZnVuY3Rpb24gKCkgeyAvL+aYvuekum9y6ZqQ6JeP55So5oi36K6i6ZiF5pWwXHJcblxyXG4gICAgICAgICAgICB2YXIgdmVyc2lvbj0kKFwiLnVzZXJfdmVyc2lvbl9udW1cIikuZGF0YShcInZlcnNpb25fdHlwZVwiKTtcclxuICAgICAgICAgICAgaWYodmVyc2lvbiAmJiB2ZXJzaW9uPT0zKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5mby5zd2l0Y2hTdGF0ZSkgeyAvL+makOiXj+iuoumYheaVsOaYvuekulxyXG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLlhbPpl63lkI7nlKjmiLflsIbml6Dms5XnnIvliLDllYblk4HorqLpmIXmlbBcIiwgXCJlcnJvclwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuaPkOekulwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnYmx1ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25PazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KFwiL3NldF9oaWRfc3ViXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge3N0YXR1czogMH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5YWz6Zet5oiQ5Yqf77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN3aXRjaEJ0bi5jaGFuZ2VTd2l0Y2hCdG5TdGF0ZSgkbWFuYWdlRnVuY3Rpb24uY3VycmVudEluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5YWz6Zet5aSx6LSl77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgeyAvL+W8gOWQr+iuoumYheaVsOaYvuekulxyXG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLlvIDlkK/lkI7mgqjnmoTnlKjmiLflj6/ku6XnnIvliLDllYblk4HnmoTorqLpmIXmlbBcIiwgXCJzdWNjZXNzXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwi5o+Q56S6XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdibHVlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoXCIvc2V0X2hpZF9zdWJcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7c3RhdHVzOiAxfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5byA5ZCv5oiQ5Yqf77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN3aXRjaEJ0bi5jaGFuZ2VTd2l0Y2hCdG5TdGF0ZSgkbWFuYWdlRnVuY3Rpb24uY3VycmVudEluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5byA5ZCv5aSx6LSl77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuW9k+WJjeeJiOacrOS4jeaUr+aMgeiuoumYhemHj+WxleekuuaOp+WItuWKn+iDve+8jOWmgumcgOS9v+eUqOivt+WNh+e6p+iHs+S4k+S4mueJiFwiKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICBoYW5kbGVVcGRhdGVOdW06IGZ1bmN0aW9uICgpIHsgIC8v5pi+56S6b3LpmpDol4/kuJPmoI/kvJrlkZjmnJ/mlbBcclxuXHJcbiAgICAgICAgICAgIHZhciB2ZXJzaW9uID0gJChcIi51c2VyX3ZlcnNpb25fbnVtXCIpLmRhdGEoXCJ2ZXJzaW9uX3R5cGVcIik7XHJcbiAgICAgICAgICAgIGlmKHZlcnNpb24gJiYgdmVyc2lvbiA9PSAzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5jdXJyZW50SW5mby5zd2l0Y2hTdGF0ZSkgeyAvL+makOiXj+iuoumYheaVsOaYvuekulxyXG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLlhbPpl63lkI7nlKjmiLflsIbml6Dms5XnnIvliLDllYblk4HnmoTmm7TmlrDmnJ/mlbBcIiwgXCJlcnJvclwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuaPkOekulwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpY29uOiAnYmx1ZScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25PazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KFwiL3NldF9yZXNvdXJjZV9jb3VudFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHtzdGF0dXM6IDB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuWFs+mXreaIkOWKn++8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRzd2l0Y2hCdG4uY2hhbmdlU3dpdGNoQnRuU3RhdGUoJG1hbmFnZUZ1bmN0aW9uLmN1cnJlbnRJbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuWFs+mXreWksei0pe+8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHsvL+W8gOWQr+iuoumYheaVsOaYvuekulxyXG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLlvIDlkK/lkI7mgqjnmoTnlKjmiLflj6/ku6XnnIvliLDllYblk4HnmoTmm7TmlrDmnJ/mlbBcIiwgXCJzdWNjZXNzXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwi5o+Q56S6XCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdibHVlJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoXCIvc2V0X3Jlc291cmNlX2NvdW50XCIsIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge3N0YXR1czogMX0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5byA5ZCv5oiQ5Yqf77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHN3aXRjaEJ0bi5jaGFuZ2VTd2l0Y2hCdG5TdGF0ZSgkbWFuYWdlRnVuY3Rpb24uY3VycmVudEluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5byA5ZCv5aSx6LSl77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLlvZPliY3niYjmnKzkuI3mlK/mjIHmm7TmlrDmnJ/mlbDlsZXmjqfliLblip/og73vvIzlpoLpnIDkvb/nlKjor7fljYfnuqfoh7PkuJPkuJrniYhcIik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG4gICAgaGFuZGxlTWVzc2FnZVJlbWluZDogZnVuY3Rpb24gKCkgeyAvL+a2iOaBr+aPkOmGkuW8gOWFs1xyXG5cclxuICAgICAgICAgICAgJC5hamF4KFwiL3NldF9hbGVydF9tZXNzYWdlXCIsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge30sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRtYW5hZ2VGdW5jdGlvbi5jdXJyZW50SW5mby5zd2l0Y2hTdGF0ZSkgeyAgICAgICAvL+W9k+WJjeeKtuaAgSAtIOW8gOWQr1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuW3suWFs+mXrea2iOaBr+aPkOmGklwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLlt7LlvIDlkK/mtojmga/mj5DphpJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJHN3aXRjaEJ0bi5jaGFuZ2VTd2l0Y2hCdG5TdGF0ZSgkbWFuYWdlRnVuY3Rpb24uY3VycmVudEluZm8pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaTjeS9nOWksei0pe+8jOivt+eojeWQjuWGjeivleOAglwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgIH0sXHJcbiAgICBoYW5kbGVTZXJ2aWNlUmVtaW5kOiBmdW5jdGlvbiAoKSB7Ly/mnI3liqHlj7fmtojmga/pgJrnn6XlvIDlhbNcclxuICAgICAgICB2YXIgbWlkID0gJCgnLnNlcnZpY2VSZW1pbmQnKS5kYXRhKCdpcy1wdXNoJyk7XHJcbiAgICAgICAgdmFyIGtleT0gbWlkID09IDE/MDoxO1xyXG4gICAgICAgICQuYWpheChcIi9zZXRfc2VydmljZV9ub3RpZmljYXRpb25cIiwge1xyXG4gICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICBkYXRhOiB7c3RhdHVzOmtleX0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCRtYW5hZ2VGdW5jdGlvbi5jdXJyZW50SW5mby5zd2l0Y2hTdGF0ZSkgeyAgICAgICAvL+W9k+WJjeeKtuaAgSAtIOW8gOWQr1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5bey5YWz6Zet5pyN5Yqh5Y+35raI5oGv6YCa55+lXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLlt7LlvIDlkK/mnI3liqHlj7fmtojmga/pgJrnn6VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICRzd2l0Y2hCdG4uY2hhbmdlU3dpdGNoQnRuU3RhdGUoJG1hbmFnZUZ1bmN0aW9uLmN1cnJlbnRJbmZvKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pON5L2c5aSx6LSl77yM6K+356iN5ZCO5YaN6K+V44CCXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbn07XHJcblxyXG4kc3dpdGNoQnRuID0ge1xyXG5cclxuICAgIC8qKlxyXG4gICAgICog5YiH5o2i5oyJ6ZKu55qE54q25oCBXHJcbiAgICAgKi9cclxuICAgIGNoYW5nZVN3aXRjaEJ0blN0YXRlOiBmdW5jdGlvbiAoY3VycmVudEluZm8pIHtcclxuICAgICAgICB2YXIgc3RhdGUgPSAhY3VycmVudEluZm8uc3dpdGNoU3RhdGU7ICAgIC8v6KaB6L2s5Y+Y5Yiw55qE54q25oCBXHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNzcyh7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwiIzJGQ0U2RlwifSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNoaWxkcmVuKFwiLl9zd2l0Y2hEZXNjVGV4dFwiKS5jc3Moe1wibGVmdFwiOiBcIjlweFwifSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNoaWxkcmVuKFwiLl9zd2l0Y2hEZXNjVGV4dFwiKS50ZXh0KGN1cnJlbnRJbmZvLm9uVGV4dCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNoaWxkcmVuKFwiLl9zd2l0Y2hCdXR0b25JY29uXCIpLmNzcyh7XCJsZWZ0XCI6IFwiNDBweFwifSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VycmVudEluZm8uJGN1cnJlbnREb20uY3NzKHtcImJhY2tncm91bmQtY29sb3JcIjogXCIjYzJjMmMyXCJ9KTtcclxuICAgICAgICAgICAgY3VycmVudEluZm8uJGN1cnJlbnREb20uY2hpbGRyZW4oXCIuX3N3aXRjaERlc2NUZXh0XCIpLmNzcyh7XCJsZWZ0XCI6IFwiNDRweFwifSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNoaWxkcmVuKFwiLl9zd2l0Y2hEZXNjVGV4dFwiKS50ZXh0KGN1cnJlbnRJbmZvLm9mZlRleHQpO1xyXG4gICAgICAgICAgICBjdXJyZW50SW5mby4kY3VycmVudERvbS5jaGlsZHJlbihcIi5fc3dpdGNoQnV0dG9uSWNvblwiKS5jc3Moe1wibGVmdFwiOiBcIjBweFwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGN1cnJlbnRJbmZvLiRkZWxlZ2F0ZURvbS5kYXRhKFwic3dpdGNoX3N0YXRlXCIsIHN0YXRlKTtcclxuXHJcbiAgICB9LFxyXG5cclxufVxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
