$(document).ready(function(){Business.init()});var Business=function(){var e={};e.isLoading=false;e.tabState="singleList";e.member_id=-1;e.member_price=0;e.searchContentForSingle="";e.searchContentForPackage="";e.resource_type=0;e.pageIndex=1;e.init=function(){e.member_id=GetQueryString("id");modal.id=GetQueryString("id");e.member_price=$(".admin_data").data("member_price");$(".toolBox").on("click","li",function(){var t=$(this).data("type");switch(t){case"edit":window.location.href="/edit_member_page?id="+e.member_id+"&page_origin=member_detail";break;case"newListShow":memberDetailUtils.changeNewlListState(e.member_id,0,0);break;case"newListHide":memberDetailUtils.changeNewlListState(e.member_id,0,1);break;case"show_member":memberDetailUtils.changeGoodsState(e.member_id,0,0);break;case"hide_member":memberDetailUtils.changeGoodsState(e.member_id,0,1);break;case"openForm":memberDetailUtils.packageForm(e.member_id,1);break;case"closeForm":memberDetailUtils.packageForm(e.member_id,0);break;default:console.log("会员操作，参数错误。");break}});$(".member_list_wrapper").on("click",".hover_tool_box li.operate",function(t){t.stopPropagation();var a=$(this).parents(".member_list_item").data("resource_id"),i=$(this).parents(".member_list_item").data("resource_type"),s=$(this).parents(".member_list_item").data("res_title"),o=$(this).parents(".member_list_item").data("is_try"),r=$(this).parents(".member_list_item").data("show_time"),n=$(this).parents(".member_list_item").data("img_url"),c=$(this).parents(".member_list_item").data("payment_type");var l=$(this).data("type");switch(l){case"to_top":memberDetailUtils.setResourceTop(e.member_id,i,a,1);break;case"cancel_top":memberDetailUtils.setResourceTop(e.member_id,i,a,0);break;case"look_comments":if(i==4){contentDetail("/alivecomment?alive_id="+a)}else{contentDetail("/comment_admin?type="+(i-1)+"&record_id="+a)}break;case"edit":window.location.href="/edit_resource_page?type="+i+"&id="+a+"&upload_channel_type=3"+"&package_id="+e.member_id+"&price="+e.member_price;break;case"set_try":memberDetailUtils.setResourceTry(e.member_id,i,a,c,1);break;case"cancel_try":memberDetailUtils.setResourceTry(e.member_id,i,a,c,0);break;case"export_audio":memberDetailUtils.exportAudio(a);break;case"set_single_sale":memberDetailUtils.setSingleSale(i,a,s,o,r,n);break;case"cancel_single_sale":memberDetailUtils.cancelSingleSale(i,a,c);break;case"show_resource":memberDetailUtils.changeGoodsState(a,i,0);break;case"hide_resource":memberDetailUtils.changeGoodsState(a,i,1);break;case"delete":memberDetailUtils.querySingleResource(a,i,e.member_id);break;case"enable_copy":memberDetailUtils.changeCanSelectState(a,true);break;case"forbid_copy":$.alert("禁止复制后，该篇图文的图片点击放大和长按识别二维码功能将被禁用","info",{btn:3,onOk:function(){memberDetailUtils.changeCanSelectState(a,false)}});break;default:console.error("参数错误");break}});$(".member_list_wrapper").on("click","#package_item_operate li.operate",function(e){e.stopPropagation();var t=$(this).parents(".package_list_item").data("package_id"),a=$(this).data("type");switch(a){case"soldout":memberDetailUtils.packageisShow(t,false);break;case"putaway":memberDetailUtils.packageisShow(t,true);break;case"edit_package":window.location.href="edit_package_page?id="+t+"&member_id="+modal.id;break;case"remove_package":memberDetailUtils.queryPackageResource(t);break;default:console.log("参数错误");break}});(function(){var e=new Clipboard(".copyHref");e.on("success",function(e){if(e.trigger.id=="copy_app_href"){baseUtils.show.blueTip("复制成功！")}else{baseUtils.show.blueTip("复制成功！请在微信内打开哦 。")}e.clearSelection()})})();$(".content_tab_wrapper li").click(function(){if(!e.isLoading){$(".inputSearchAll").val("");e.pageIndex=1;e.isLoading=true;var t=$(this).text();if(!$(this).hasClass("activeContentTab")){if(t=="专栏"){$("#packageTab").addClass("activeContentTab");$("#singleTab").removeClass("activeContentTab");$(".selector_resource_type").addClass("hide")}else if(t=="单品"){$("#singleTab").addClass("activeContentTab");$("#packageTab").removeClass("activeContentTab");$(".selector_resource_type").removeClass("hide")}}if(t=="专栏"){e.searchContentForPackage="";e.tabState="packageList";memberDetailUtils.switchWindowTab("packageTab");modal.initPackageListOfMember()}else if(t=="单品"){e.searchContentForSingle="";e.resource_type=0;$("#firstOption").removeAttr("selected").attr("selected","selected");e.tabState="singleList";memberDetailUtils.switchWindowTab("singleTab");modal.initResourceListOfMember()}}});modal.selectResource();modal.initResourceAndPackageSearch();memberDetailUtils.initListPagination();$(".member_list_wrapper").on("click"," .pagination li a",function(t){var a=$(t.target),i=a.data("url");e.pageIndex=a.text();if(e.tabState=="packageList"){modal.initPackageListOfMember()}else if(e.tabState=="singleList"){modal.initResourceListOfMember()}});$(".userDefined").click(function(){var e=$(".admin_data").data("member_id");window.location.href="/user_defined?id="+e});var t=$(".addMemberRights").data("distribute");if(t==0){$(".addMemberRights").removeAttr("style");$(".addMemberRights").hover(function(){$(".clickBtnWrapper").removeClass("hide")},function(){$(".clickBtnWrapper").addClass("hide")});$(".more_operate").removeAttr("style");$(".more_operate").hover(function(){$(".more_operate_wrapper").removeClass("hide")},function(){$(".more_operate_wrapper").addClass("hide")})}};return e}();var modal=function(){var e={};e.initResourceListOfMember=function(){$(".loadingS").fadeIn(300);$.ajax("/singe_list_member",{type:"GET",dataType:"html",data:{id:Business.member_id,search_content:Business.searchContentForSingle,resource_type:Business.resource_type,page:Business.pageIndex},success:function(e){Business.isLoading=false;$(".loadingS").fadeOut(100);if(e&&e.length>0){$(".member_list_wrapper").html(e);memberDetailUtils.initListPagination()}else{console.log("请求数据为空");baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,t,a){Business.isLoading=false;$(".loadingS").fadeOut(100);console.log(a);baseUtils.show.redTip("获取单品列表失败")}})};e.initPackageListOfMember=function(){$(".loadingS").fadeIn(300);$.ajax("/package_list_member",{type:"GET",dataType:"html",data:{id:Business.member_id,search_content:Business.searchContentForPackage,page:Business.pageIndex},success:function(e){Business.isLoading=false;$(".loadingS").fadeOut(100);if(e&&e.length>0){$(".member_list_wrapper").html(e);memberDetailUtils.initListPagination()}else{console.log("请求数据为空");baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,t,a){Business.isLoading=false;$(".loadingS").fadeOut(100);console.log(a);baseUtils.show.redTip("获取单品列表失败")}})};e.hasDown=false;e.hasClose=true;e.page=1;e.searchContent="";e.isLoading=false;e.resType=0;e.tabState="singleList";e.selectResource=function(){var t=this;$("#addSingle").on("click",function(){t.page=1;t.hasDown=false;t.hasClose=false;t.getSelectData()});$("#selectWindow #selctClose, #selectWindow #selectCancelBtn").on("click",function(){var e=$("#selectWindow");e.fadeOut("normal",function(){$(this).find("#selectAreaList").html("")});e.find(".inputSearchPart").val("");t.page=1;t.hasClose=true;t.searchContent=""});$("#selectWindow #selectSearchBtn").on("click",function(){var e=$.trim($(this).prev().val());t.searchContent=e;t.page=1;t.hasClose=true;t.getSelectData()}).prev().on("keypress",function(e){if(e.keyCode=="13"){$("#selectWindow #selectSearchBtn").click()}});$(".selectGoodTabWrapper li").click(function(){var a=$(this).val();if(!e.isLoading){t.page=1;$("#selectWindow #selectAreaListWrapper").scrollTop(0);e.isLoading=true;if(a==1){memberDetailUtils.switchWindowTab("singleTab")}else{memberDetailUtils.switchWindowTab("packageTab")}t.getSelectData()}});$("#selectWindow #selectAreaListWrapper").scroll(function(e){var a=$("#selectAreaList").height(),i=$(this).height(),s=$(this).scrollTop();if(s+i>=a-5&&!t.hasDown&&!t.hasClose){t.hasClose=true;t.getSelectData()}else{}});$("#selectWindow #selectOkBtn").on("click",function(a){var i=$("#selectWindow #selectAreaListWrapper"),s=[];i.find(":checkbox:checked").each(function(t,a){if(e.tabState=="packageList"){var i={resource_id:a.getAttribute("id"),resource_type:6}}else if(e.tabState=="singleList"){var i={resource_id:a.getAttribute("id"),resource_type:a.getAttribute("value")}}s[s.length]=i});$.ajax("/submit_choice_resource",{type:"POST",dataType:"json",data:{channel_type:3,resource_list:s,package_id:t.id},success:function(t){console.log(t);if(t.code==0){$("#selectWindow #selctClose").click();baseUtils.show.blueTip(t.msg);if(e.tabState=="packageList"){$("#packageTab").click()}else if(e.tabState=="singleList"){$("#singleTab").click()}}else{baseUtils.show.redTip(t.msg)}},error:function(e,t,a){console.error(a);baseUtils.show.redTip("操作失败，请稍后再试")}})})};e.getSelectData=function(){var t=this;if(t.page==1){$(".loadingS_in_window").fadeIn(300)}$.ajax("/choice_resource_list",{type:"POST",dataType:"json",data:{search_content:t.searchContent||"",channel_type:3,resource_type:t.resType,package_id:t.id,page:t.page},success:function(a){$(".loadingS_in_window").fadeOut(300);e.isLoading=false;console.log(a);if(a.code==0){var i=$("#selectAreaList"),s="",o=JSON.parse(a.data.page_offset);$.each(a.data.resource_list,function(e,a){var i="";if(t.resType==0){switch(+this.resource_type){case 1:i="图文";break;case 2:i="音频";break;case 3:i="视频";break;case 4:i="直播";break;default:i="无";break}}if(t.resType==0){s+='<div class="resourceItemWrapper">'+'<input value="'+this.resource_type+'" id="'+this.id+'" class="with-gap resource_radio" name="select_resource" type="checkbox">'+'<label for="'+this.id+'" class="radio_desc">'+'<div class="resource_icon_wrapper">'+'<img class="resource_icon" src="'+this.img_url+'">'+"</div>"+this.title+"</label>"+'<span class="resource_type">'+i+"</span>"+'<span class="resource_time">'+this.start_at+"</span>"+"</div>"}else{s+='<div class="resourceItemWrapper">'+"<input"+' id="'+this.id+'" class="with-gap resource_radio" name="select_resource" type="checkbox">'+'<label for="'+this.id+'" class="radio_desc">'+'<div class="resource_icon_wrapper">'+'<img class="resource_icon" src="'+this.img_url+'">'+"</div>"+this.name+"</label>"+'<span class="resource_time">'+this.updated_at+"</span>"+"</div>"}});if(t.page==1||!t.page){i.html(s);i.append('<div class="isDown">资源加载中</div>');t.hasClose=false;if(!t.searchContent){$("#selectWindow").fadeIn()}}else if(t.page>1){i.find(".isDown").before(s);t.hasClose=false}if(o.current_page>=o.total_pages){i.find(".isDown").hide();t.hasDown=true}t.page++}else{baseUtils.show.redTip("拉取已有单品失败！")}},error:function(t,a,i){$(".loadingS_in_window").fadeOut(300);e.isLoading=false;console.error(i);baseUtils.show.redTip("操作失败，请稍后再试")}})};e.initResourceAndPackageSearch=function(){$(".searchAllBtn").click(function(){if(Business.tabState=="packageList"){Business.searchContentForPackage=$.trim($(".inputSearchAll").val());e.initPackageListOfMember()}else if(Business.tabState=="singleList"){Business.resource_type=$(".selector_resource_type").val();Business.searchContentForSingle=$.trim($(".inputSearchAll").val());e.initResourceListOfMember()}});$(".inputSearchAll").on("keypress",function(e){if(e.keyCode==13){$(".searchAllBtn").click()}});$(".selector_resource_type").on("change",function(){$(".searchAllBtn").click()})};e.initSetSingleSaleWindow=function(t,a,i,s,o){$(".resource_icon_3").attr("src",t);$(".resource_title_3").html(a);switch(i){case 1:$(".resource_type_3").html("图文");break;case 2:$(".resource_type_3").html("音频");break;case 3:$(".resource_type_3").html("视频");break;case 4:$(".resource_type_3").html("直播");break;default:break}$(".resource_time_3").html(s);$(".close_icon_wrapper_2, .cancel_set_price").click(function(){$(".set_price_window").fadeOut(300)});$(".confirm_price_btn").click(function(){var t=$.trim($(".input_setting_price").val());var a=/^([1-9][\d]*|0)([\/.][\d]{1,2})?$/;if(!a.test(t)){baseUtils.show.redTip("价格输入有误");$(".input_setting_price").val("");return false}if(t<=0){baseUtils.show.redTip("价格不能为0 或 负数!");return false}if(t>baseUtils.maxInputPrice){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}var s={};s["resource_id"]=o;s["resource_type"]=i;var r=[s];showLoading();$.ajax("/submit_choice_resource",{type:"POST",data:{channel_type:1,resource_list:r,piece_price:t*100,submit_type:0},success:function(t){hideLoading();if(t.code==0){$(".set_price_window").fadeOut(300);baseUtils.show.blueTip("设为单卖成功");e.initResourceListOfMember()}else{baseUtils.show.redTip("操作失败，请稍后再试!")}},error:function(e,t,a){hideLoading();console.log(a);baseUtils.show.redTip("服务器开小差啦，请稍后再操作！")}})})};return e}();var memberDetailUtils=function(){var e={};e.changeGoodsState=function(e,t,a){if(t==0){var i=a==0?"上架后该会员将对外显示":"下架后该会员将不对外显示"}else if(t==1||t==2||t==3||t==4){var i=a==0?"上架后该单品将对外显示":"下架后该单品将不对外显示"}$.alert(i,"info",{onOk:function(){showLoading();$.ajax("/change_goods_state",{type:"POST",dataType:"json",data:{goods_id:e,goods_type:t,operate_type:a},success:function(e){hideLoading();if(e.code==0){if(a==0){baseUtils.show.blueTip("上架成功！")}else{baseUtils.show.blueTip("下架成功！")}if(t==0){setTimeout(function(){window.location.reload()},1500)}else{modal.initResourceListOfMember()}}else{baseUtils.show.redTip("操作失败，请稍后重试！")}},error:function(e,t,a){hideLoading();console.log(a);baseUtils.show.redTip("操作失败，请稍后重试！")}})}})};e.changeNewlListState=function(e,t,a){showLoading();$.ajax("/set_h5_newest_hide",{type:"POST",dataType:"json",data:{id:e,h5_newest_hide:a},success:function(e){hideLoading();if(e.code==0){if(a==0){baseUtils.show.blueTip("设置成功！")}else{baseUtils.show.blueTip("设置成功！")}if(t==0){setTimeout(function(){window.location.reload()},1500)}else{modal.initResourceListOfMember()}}else{baseUtils.show.redTip("操作失败，请稍后重试！")}},error:function(e,t,a){hideLoading();console.log(a);baseUtils.show.redTip("操作失败，请稍后重试！")}})};e.setResourceTop=function(e,t,a,i){showLoading();$.ajax("/set_package_resource_top",{type:"POST",dataType:"json",data:{package_id:e,resource_type:t,resource_id:a,top_state:i},success:function(e){hideLoading();if(e.code==0){if(i==0){baseUtils.show.blueTip("已经取消置顶！")}else{baseUtils.show.blueTip("置顶成功！")}modal.initResourceListOfMember()}else{baseUtils.show.redTip(e.msg)}},error:function(e,t,a){hideLoading();console.error(a);baseUtils.show.redTip("操作失败，请稍后再试")}})};e.packageisShow=function(e,t){$.alert(t?"上架后该专栏将对外显示":"下架后该专栏将不对外显示","info",{onOk:function(){showLoading();$.ajax("/change_goods_state",{type:"POST",dataType:"json",data:{goods_id:e,goods_type:0,operate_type:t?0:1},success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg);setTimeout(function(){reloadPage()},700)}else{baseUtils.show.redTip(e.msg);hideLoading();self.btnState=true}},error:function(e,t,a){console.error(a);hideLoading();self.btnState=true;baseUtils.show.redTip("操作失败，请稍后再试")}})}})};e.querySingleResource=function(t,a,i){showLoading();$.ajax("/query_goods_state",{type:"POST",dataType:"json",data:{goods_id:t,goods_type:a,channel_type:2,package_id:i},success:function(s){hideLoading();if(s.code==0){var o=s.data["is_exist"],r=s.data["records_list"],n=Object.keys(r).length,c="";if(o==0){c="确认移除该内容，移除后所有用户将无法查看此内容且<spa style='color: red;'>不可恢复</spa>"}else if(r[0]==undefined){for(var l=1;l<=n;l++){c+="《"+r[l]["title"]+"》"}c="确认移除该内容，移除后该会员用户将无法查看此内容。此内容仍存在于"+c+"中"}else{if(n==1){c="确认移除该内容，移除后该会员用户将无法查看此内容。此内容仍在单品列表且单独售卖"}else{for(var l=1;l<n;l++){c+="《"+r[l]["title"]+"》"}c="确认移除该内容，移除后该会员用户将无法查看此内容。此内容单独售卖且仍存在于"+c+"中"}}$.alert(c,"info",{oktext:"确认移除",onOk:function(){e.deleteSingleResource(t,a,i)}})}else{baseUtils.show.redTip("操作失败！")}},error:function(e,t,a){hideLoading();console.log(a);baseUtils.show.redTip("服务器开小差了，请稍后再试！")}})};e.queryPackageResource=function(t){showLoading();$.ajax("/query_goods_state",{type:"POST",dataType:"json",data:{goods_id:t,goods_type:6,channel_type:2,package_id:Business.member_id},success:function(a){hideLoading();if(a.code==0){var i=a.data["is_exist"],s=a.data["records_list"],o=Object.keys(s).length,r="";if(i==0){r="确认移除该专栏，移除后该会员用户将无法查看此专栏，此专栏仍在专栏列表且单独售卖"}else{for(var n=1;n<=o;n++){r+="《"+s[n]["title"]+"》"}r="确认移除该专栏，移除后该会员用户将无法查看此专栏，此专栏仍存在于"+r+"中"}$.alert(r,"info",{oktext:"确认移除",onOk:function(){e.deleteSingleResource(t,6,Business.member_id)}})}else{baseUtils.show.redTip("操作失败！");console.log(a.msg)}},error:function(e,t,a){hideLoading();console.log(a);baseUtils.show.redTip("服务器开小差了，请稍后再试！")}})};e.packageForm=function(e,t){var a=$(".user_version_num").data("version_type");if(a&&a==3){$.alert(t?"开启资料填写后，用户在付费购买本会员前将填写个人信息，您确认要开启么？":"关闭资料填写后，用户在付费购买本会员前将不再填写个人信息，您确认要关闭么？","info",{icon:"blue",onOk:function(){showLoading();$.ajax("/set_is_complete_info",{type:"POST",dataType:"json",data:{id:e,is_complete_info:t},success:function(e){console.log(e);location.reload();if(e.code==0){baseUtils.show.blueTip(e.msg);setTimeout(function(){reloadPage()},200)}else{baseUtils.show.redTip(e.msg);hideLoading()}}})}})}else{baseUtils.show.redTip("当前版本不支持开启资料填写，如需开启请升级至专业版")}};e.deleteSingleResource=function(e,t,a){$.ajax("/move_goods",{type:"POST",dataType:"json",data:{goods_id:e,goods_type:t,channel_type:2,package_id:a},success:function(e){$(".loadingS").fadeOut(300);if(e.code==0){baseUtils.show.blueTip("移除成功！")}else{baseUtils.show.redTip("移除失败，请稍后再试")}if(t==6){modal.initPackageListOfMember()}else{modal.initResourceListOfMember()}},error:function(e,t,a){$(".loadingS").fadeOut(300);console.log(a);baseUtils.show.redTip("服务器开小差了，请稍后再试！")}})};e.setResourceTry=function(e,t,a,i,s){if(i==1||i==2){if(t==2){$.alert("该单品已设为单卖，取消单卖后方可设为试听","info",{btn:2})}else if(t==1||t==3||t==4){$.alert("该单品已设为单卖，取消单卖后方可设为试看","info",{btn:2})}return false}showLoading();$.ajax("/set_package_resource_try",{type:"POST",dataType:"json",data:{package_id:e,resource_type:t,resource_id:a,try_state:s},success:function(e){hideLoading();if(e.code==0){if(s==1){baseUtils.show.blueTip("设置成功！")}else{baseUtils.show.blueTip("取消成功！")}modal.initResourceListOfMember()}else{baseUtils.show.redTip("操作失败！")}},error:function(e,t,a){console.error(a);hideLoading();baseUtils.show.redTip("操作失败，请稍后再试")}})};e.exportAudio=function(e){$.ajax("/async_download_alive_voice",{type:"POST",dataType:"json",data:{alive_id:e},success:function(e){switch(e.code){case 0:window.location.href=e.data["url"];break;case 1:$.alert("语音正在合成中，根据您直播间内的音频数量需要10分钟到4个小时不等，请稍候访问。","info",{btn:2});break;case 2:$.alert("开始进行语音合成，根据您直播间内的音频数量需要10分钟到4个小时不等，请稍候访问。","info",{btn:2});break;case 3:$.alert("服务器正在维护，直播音频导出功能受到影响，请稍后再试。","info",{btn:2});break;case 4:$.alert("该直播没有音频。","info",{btn:2});break;case 5:$.alert("这个直播不是语音类型的，不支持音频导出。","info",{btn:2});break;case 6:$.alert("这个直播还没结束，暂不支持音频导出。","info",{btn:2});break;default:console.log("参数错误");baseUtils.show.redTip(e.msg);break}console.log(e.msg)},error:function(e,t,a){console.log(a);baseUtils.show.redTip("服务器出小差了，请稍后再试！")}})};e.setSingleSale=function(e,t,a,i,s,o){if(i==1){if(e==2){$.alert("该单品已设为试听，取消试听后方可设为单卖","info",{btn:2})}else if(e==1||e==3||e==4){$.alert("该单品已设为试看，取消试看后方可设为单卖","info",{btn:2})}}else{modal.initSetSingleSaleWindow(o,a,e,s,t);$(".set_price_window").fadeIn(300)}};e.cancelSingleSale=function(e,t,a){if(a==1){var i="取消单卖后，未开通会员的用户将不可单独查看该单品!"}else if(a==2){var i="取消单卖后，未开通会员的用户将不可单独付费购买该单品!"}$.alert(i,"info",{onOk:function(){showLoading();var a={};a["resource_id"]=t;a["resource_type"]=e;var i=[a];$.ajax("/submit_choice_resource",{type:"POST",data:{channel_type:1,resource_list:i,submit_type:1},success:function(e){hideLoading();if(e.code==0){baseUtils.show.blueTip("取消单卖成功！");modal.initResourceListOfMember()}else{baseUtils.show.redTip("操作失败，请稍后再试!")}},error:function(e,t,a){hideLoading();console.log(a);baseUtils.show.redTip("服务器开小差啦，请稍后再搜索！")}})}})};e.changeCanSelectState=function(e,t){$.ajax("/set_resource_select_can",{type:"POST",dataType:"json",data:{id:e,resource_type:1,can_select:t?1:0},success:function(e){if(e.code==0){if(t){baseUtils.show.blueTip("已经允许复制")}else{baseUtils.show.blueTip("已经禁止复制")}window.location.reload()}else{baseUtils.show.redTip("操作失败，请稍后再试")}},error:function(e,t,a){console.log(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})};e.initListPagination=function(){$(".list-page .pagination li a").each(function(){var e=$(this);e.attr("data-url",e.attr("href"));e.removeAttr("href")})};e.switchWindowTab=function(e){var t=$(".selectGoodTabWrapper>li.activeContentTab").val();if(t==1&&e=="singleTab"||t==0&&e=="packageTab"){return false}if(e=="singleTab"){$("#selectGoodSingleTab").addClass("activeContentTab");$("#selectGoodPackageTab").removeClass("activeContentTab");modal.tabState="singleList";modal.resType=0}else if(e=="packageTab"){$("#selectGoodPackageTab").addClass("activeContentTab");$("#selectGoodSingleTab").removeClass("activeContentTab");modal.tabState="packageList";modal.resType=6}};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL3Jlc01hbmFnZS9tZW1iZXJEZXRhaWwuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCJCdXNpbmVzcyIsImluaXQiLCJpc0xvYWRpbmciLCJ0YWJTdGF0ZSIsIm1lbWJlcl9pZCIsIm1lbWJlcl9wcmljZSIsInNlYXJjaENvbnRlbnRGb3JTaW5nbGUiLCJzZWFyY2hDb250ZW50Rm9yUGFja2FnZSIsInJlc291cmNlX3R5cGUiLCJwYWdlSW5kZXgiLCJHZXRRdWVyeVN0cmluZyIsIm1vZGFsIiwiaWQiLCJkYXRhIiwib24iLCJ0eXBlIiwidGhpcyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsIm1lbWJlckRldGFpbFV0aWxzIiwiY2hhbmdlTmV3bExpc3RTdGF0ZSIsImNoYW5nZUdvb2RzU3RhdGUiLCJwYWNrYWdlRm9ybSIsImNvbnNvbGUiLCJsb2ciLCJlIiwic3RvcFByb3BhZ2F0aW9uIiwicmVzSWQiLCJwYXJlbnRzIiwicmVzVHlwZSIsInJlc1RpdGxlIiwiaXNUcnkiLCJzaG93VGltZSIsInJlc0ltZ1VybCIsInBheW1lbnRUeXBlIiwic2V0UmVzb3VyY2VUb3AiLCJjb250ZW50RGV0YWlsIiwic2V0UmVzb3VyY2VUcnkiLCJleHBvcnRBdWRpbyIsInNldFNpbmdsZVNhbGUiLCJjYW5jZWxTaW5nbGVTYWxlIiwicXVlcnlTaW5nbGVSZXNvdXJjZSIsImNoYW5nZUNhblNlbGVjdFN0YXRlIiwiYWxlcnQiLCJidG4iLCJvbk9rIiwiZXJyb3IiLCJwYWNrYWdlSWQiLCJwYWNrYWdlaXNTaG93IiwicXVlcnlQYWNrYWdlUmVzb3VyY2UiLCJjbGlwYm9hcmQiLCJDbGlwYm9hcmQiLCJ0cmlnZ2VyIiwiYmFzZVV0aWxzIiwic2hvdyIsImJsdWVUaXAiLCJjbGVhclNlbGVjdGlvbiIsImNsaWNrIiwidmFsIiwidGV4dCIsImhhc0NsYXNzIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsInN3aXRjaFdpbmRvd1RhYiIsImluaXRQYWNrYWdlTGlzdE9mTWVtYmVyIiwicmVtb3ZlQXR0ciIsImF0dHIiLCJpbml0UmVzb3VyY2VMaXN0T2ZNZW1iZXIiLCJzZWxlY3RSZXNvdXJjZSIsImluaXRSZXNvdXJjZUFuZFBhY2thZ2VTZWFyY2giLCJpbml0TGlzdFBhZ2luYXRpb24iLCJlbGUiLCJ0YXJnZXQiLCJ1cmwiLCJwaWQiLCJpc19kaXN0cmlidXRlIiwiaG92ZXIiLCJmYWRlSW4iLCJhamF4IiwiZGF0YVR5cGUiLCJzZWFyY2hfY29udGVudCIsInBhZ2UiLCJzdWNjZXNzIiwicmVzdWx0IiwiZmFkZU91dCIsImxlbmd0aCIsImh0bWwiLCJyZWRUaXAiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJoYXNEb3duIiwiaGFzQ2xvc2UiLCJzZWFyY2hDb250ZW50Iiwic2VsZiIsImdldFNlbGVjdERhdGEiLCIkc2VsZWN0V2luIiwiZmluZCIsInNlYXJjaFZhbCIsInRyaW0iLCJwcmV2Iiwia2V5Q29kZSIsInZhbHVlIiwic2Nyb2xsVG9wIiwic2Nyb2xsIiwiRGl2SGVpZ2h0IiwiaGVpZ2h0IiwiU2Nyb2xsSGVpZ2h0IiwiU2Nyb2xsVG9wIiwiJHNlbGVjdEFyZWEiLCJyZXNMaXN0IiwiZWFjaCIsImkiLCJpdGVtIiwicmVzT2JqIiwicmVzb3VyY2VfaWQiLCJnZXRBdHRyaWJ1dGUiLCJjaGFubmVsX3R5cGUiLCJyZXNvdXJjZV9saXN0IiwicGFja2FnZV9pZCIsImNvZGUiLCJtc2ciLCJzZWxlY3RTdHIiLCJwYWdlT2JqIiwiSlNPTiIsInBhcnNlIiwicGFnZV9vZmZzZXQiLCJpbWdfdXJsIiwidGl0bGUiLCJzdGFydF9hdCIsIm5hbWUiLCJ1cGRhdGVkX2F0IiwiYXBwZW5kIiwiYmVmb3JlIiwiY3VycmVudF9wYWdlIiwidG90YWxfcGFnZXMiLCJoaWRlIiwiaW5pdFNldFNpbmdsZVNhbGVXaW5kb3ciLCJwcmljZSIsInJlZyIsInRlc3QiLCJtYXhJbnB1dFByaWNlIiwiYXJyIiwicmVzb3VyY2VMaXN0QXJyIiwic2hvd0xvYWRpbmciLCJwaWVjZV9wcmljZSIsInN1Ym1pdF90eXBlIiwiaGlkZUxvYWRpbmciLCJ1dGlscyIsImdvb2RzSWQiLCJnb29kc1R5cGUiLCJvcGVyYXRlX3R5cGUiLCJnb29kc19pZCIsImdvb2RzX3R5cGUiLCJzZXRUaW1lb3V0IiwicmVsb2FkIiwiaDVfbmV3ZXN0X2hpZGUiLCJyZXNvdXJjZVR5cGUiLCJyZXNvdXJjZUlkIiwidG9wU3RhdGUiLCJ0b3Bfc3RhdGUiLCJjaGFuZ2VUeXBlIiwicmVsb2FkUGFnZSIsImJ0blN0YXRlIiwiaXNFeGlzdCIsInJlY29yZHNMaXN0IiwiYXJyTGVuZ3RoIiwiT2JqZWN0Iiwia2V5cyIsInVuZGVmaW5lZCIsImluZGV4Iiwib2t0ZXh0IiwiZGVsZXRlU2luZ2xlUmVzb3VyY2UiLCJmb3JtVHlwZSIsInZlcnNpb24iLCJpY29uIiwiaXNfY29tcGxldGVfaW5mbyIsIm1lbWJlcklkIiwidHJ5U3RhdGUiLCJ0cnlfc3RhdGUiLCJhbGl2ZUlkIiwiYWxpdmVfaWQiLCJjYW5TZWxlY3QiLCJjYW5fc2VsZWN0IiwiJGVsZSIsInRhYlZhbHVlIl0sIm1hcHBpbmdzIjoiQUFJQUEsRUFBRUMsVUFBVUMsTUFBTSxXQUNkQyxTQUFTQyxRQUliLElBQUlELFVBQVcsV0FFWCxHQUFJQSxLQUVKQSxHQUFTRSxVQUFZLEtBQ3JCRixHQUFTRyxTQUFXLFlBRXBCSCxHQUFTSSxXQUFhLENBQ3RCSixHQUFTSyxhQUFlLENBR3hCTCxHQUFTTSx1QkFBeUIsRUFDbENOLEdBQVNPLHdCQUEwQixFQUNuQ1AsR0FBU1EsY0FBZ0IsQ0FFekJSLEdBQVNTLFVBQVksQ0FFckJULEdBQVNDLEtBQU8sV0FFWkQsRUFBU0ksVUFBWU0sZUFBZSxLQUNwQ0MsT0FBTUMsR0FBS0YsZUFBZSxLQUMxQlYsR0FBU0ssYUFBZVIsRUFBRSxlQUFlZ0IsS0FBSyxlQU05Q2hCLEdBQUUsWUFBWWlCLEdBQUcsUUFBUyxLQUFNLFdBQzVCLEdBQUlDLEdBQU9sQixFQUFFbUIsTUFBTUgsS0FBSyxPQUN4QixRQUFRRSxHQUNK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TVIsU0FBVyxhQUNqQlEsT0FBTW1CLFFBQVUsR0FNeEIsT0FBT3VIIiwiZmlsZSI6ImFkbWluL3Jlc01hbmFnZS9tZW1iZXJEZXRhaWwuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgQWRtaW5pc3RyYXRvciBvbiAyMDE3LzMvMjEuXG4gKi9cblxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKSB7XG4gICAgQnVzaW5lc3MuaW5pdCgpO1xuXG59KTtcblxudmFyIEJ1c2luZXNzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIEJ1c2luZXNzID0ge307XG5cbiAgICBCdXNpbmVzcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICBCdXNpbmVzcy50YWJTdGF0ZSA9IFwic2luZ2xlTGlzdFwiOyAgLy8g6buY6K6k5pi+56S65LiT5qCP5YiX6KGoICAgICDvvIhcInBhY2thZ2VMaXN0XCIsIFwic2luZ2xlTGlzdFwi77yJXG5cbiAgICBCdXNpbmVzcy5tZW1iZXJfaWQgPSAtMTtcbiAgICBCdXNpbmVzcy5tZW1iZXJfcHJpY2UgPSAwO1xuXG4gICAgLy8gIOaQnOe0olxuICAgIEJ1c2luZXNzLnNlYXJjaENvbnRlbnRGb3JTaW5nbGUgPSBcIlwiO1xuICAgIEJ1c2luZXNzLnNlYXJjaENvbnRlbnRGb3JQYWNrYWdlID0gXCJcIjtcbiAgICBCdXNpbmVzcy5yZXNvdXJjZV90eXBlID0gMDtcblxuICAgIEJ1c2luZXNzLnBhZ2VJbmRleCA9IDE7XG5cbiAgICBCdXNpbmVzcy5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICDku47lvZPliY1VUkzkuK3lj5blh7rlj4LmlbBcbiAgICAgICAgQnVzaW5lc3MubWVtYmVyX2lkID0gR2V0UXVlcnlTdHJpbmcoXCJpZFwiKTtcbiAgICAgICAgbW9kYWwuaWQgPSBHZXRRdWVyeVN0cmluZyhcImlkXCIpO1xuICAgICAgICBCdXNpbmVzcy5tZW1iZXJfcHJpY2UgPSAkKFwiLmFkbWluX2RhdGFcIikuZGF0YShcIm1lbWJlcl9wcmljZVwiKTtcblxuXG5cblxuICAgICAgICAvLyAg6ZKI5a+55Lya5ZGY5L+h5oGv55qE5pON5L2cXG4gICAgICAgICQoJy50b29sQm94Jykub24oXCJjbGlja1wiLCBcImxpXCIsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIHR5cGUgPSAkKHRoaXMpLmRhdGEoXCJ0eXBlXCIpO1xuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSBcImVkaXRcIjovLyAg57yW6L6RXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvZWRpdF9tZW1iZXJfcGFnZT9pZD1cIiArIEJ1c2luZXNzLm1lbWJlcl9pZCArIFwiJnBhZ2Vfb3JpZ2luPW1lbWJlcl9kZXRhaWxcIjtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm5ld0xpc3RTaG93XCI6Ly/lnKjmnIDmlrDliJfooajkuK3mmL7npLpcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuY2hhbmdlTmV3bExpc3RTdGF0ZShCdXNpbmVzcy5tZW1iZXJfaWQsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwibmV3TGlzdEhpZGVcIjovL+WcqOacgOaWsOWIl+ihqOS4reaYvuekulxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5jaGFuZ2VOZXdsTGlzdFN0YXRlKEJ1c2luZXNzLm1lbWJlcl9pZCwgMCwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzaG93X21lbWJlclwiOi8vICDkuIrmnrZcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuY2hhbmdlR29vZHNTdGF0ZShCdXNpbmVzcy5tZW1iZXJfaWQsIDAsIDApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiaGlkZV9tZW1iZXJcIjovLyAg5LiL5p62XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLmNoYW5nZUdvb2RzU3RhdGUoQnVzaW5lc3MubWVtYmVyX2lkLCAwLCAxKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcIm9wZW5Gb3JtXCI6Ly8gIOW8gOWQr+i1hOaWmeWhq+WGmVxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5wYWNrYWdlRm9ybShCdXNpbmVzcy5tZW1iZXJfaWQsIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2xvc2VGb3JtXCI6Ly8gIOWFs+mXrei1hOaWmeWhq+WGmVxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5wYWNrYWdlRm9ybShCdXNpbmVzcy5tZW1iZXJfaWQsIDApO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuS8muWRmOaTjeS9nO+8jOWPguaVsOmUmeivr+OAglwiKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gIOmSiOWvueWNleWTgeWIl+ihqOS4reavj+S4gOS4quadoeebrueahOaTjeS9nFxuICAgICAgICAkKFwiLm1lbWJlcl9saXN0X3dyYXBwZXJcIikub24oXCJjbGlja1wiLCBcIi5ob3Zlcl90b29sX2JveCBsaS5vcGVyYXRlXCIsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIC8vICDpmLvmraLkuovku7blkJHkuIvkvKDpgJJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgIC8vICDlvZPliY3mnaHnm67nmoTotYTmupBpZFxuICAgICAgICAgICAgdmFyIHJlc0lkID0gJCh0aGlzKS5wYXJlbnRzKFwiLm1lbWJlcl9saXN0X2l0ZW1cIikuZGF0YShcInJlc291cmNlX2lkXCIpLFxuICAgICAgICAgICAgICAgIHJlc1R5cGUgPSAkKHRoaXMpLnBhcmVudHMoXCIubWVtYmVyX2xpc3RfaXRlbVwiKS5kYXRhKFwicmVzb3VyY2VfdHlwZVwiKSxcbiAgICAgICAgICAgICAgICByZXNUaXRsZSA9ICQodGhpcykucGFyZW50cyhcIi5tZW1iZXJfbGlzdF9pdGVtXCIpLmRhdGEoXCJyZXNfdGl0bGVcIiksXG4gICAgICAgICAgICAgICAgaXNUcnkgPSAkKHRoaXMpLnBhcmVudHMoXCIubWVtYmVyX2xpc3RfaXRlbVwiKS5kYXRhKFwiaXNfdHJ5XCIpLFxuICAgICAgICAgICAgICAgIHNob3dUaW1lID0gJCh0aGlzKS5wYXJlbnRzKFwiLm1lbWJlcl9saXN0X2l0ZW1cIikuZGF0YShcInNob3dfdGltZVwiKSxcbiAgICAgICAgICAgICAgICByZXNJbWdVcmwgPSAkKHRoaXMpLnBhcmVudHMoXCIubWVtYmVyX2xpc3RfaXRlbVwiKS5kYXRhKFwiaW1nX3VybFwiKSxcbiAgICAgICAgICAgICAgICBwYXltZW50VHlwZSA9ICQodGhpcykucGFyZW50cyhcIi5tZW1iZXJfbGlzdF9pdGVtXCIpLmRhdGEoXCJwYXltZW50X3R5cGVcIik7XG5cbiAgICAgICAgICAgIHZhciB0eXBlID0gJCh0aGlzKS5kYXRhKFwidHlwZVwiKTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIGNhc2UgXCJ0b190b3BcIjovLyAg572u6aG2XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLnNldFJlc291cmNlVG9wKEJ1c2luZXNzLm1lbWJlcl9pZCwgcmVzVHlwZSwgcmVzSWQsIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2FuY2VsX3RvcFwiOi8vICDlj5bmtojnva7pobZcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuc2V0UmVzb3VyY2VUb3AoQnVzaW5lc3MubWVtYmVyX2lkLCByZXNUeXBlLCByZXNJZCwgMCk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJsb29rX2NvbW1lbnRzXCI6Ly8gIOafpeeci+ivhOiuulxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzVHlwZSA9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RGV0YWlsKFwiL2FsaXZlY29tbWVudD9hbGl2ZV9pZD1cIiArIHJlc0lkKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnREZXRhaWwoXCIvY29tbWVudF9hZG1pbj90eXBlPVwiICsgKHJlc1R5cGUgLSAxKSArIFwiJnJlY29yZF9pZD1cIiArIHJlc0lkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWRpdFwiOi8vICDnvJbovpFcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9lZGl0X3Jlc291cmNlX3BhZ2U/dHlwZT1cIiArIHJlc1R5cGUgKyBcIiZpZD1cIiArIHJlc0lkICtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiJnVwbG9hZF9jaGFubmVsX3R5cGU9M1wiICsgXCImcGFja2FnZV9pZD1cIiArIEJ1c2luZXNzLm1lbWJlcl9pZCArIFwiJnByaWNlPVwiICsgQnVzaW5lc3MubWVtYmVyX3ByaWNlO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic2V0X3RyeVwiOi8vICDorr7kuLror5XlkKwg5oiWIOivleeci1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5zZXRSZXNvdXJjZVRyeShCdXNpbmVzcy5tZW1iZXJfaWQsIHJlc1R5cGUsIHJlc0lkLCBwYXltZW50VHlwZSwgMSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJjYW5jZWxfdHJ5XCI6Ly8gIOWPlua2iOivleWQrCDmiJYg6K+V55yLXG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLnNldFJlc291cmNlVHJ5KEJ1c2luZXNzLm1lbWJlcl9pZCwgcmVzVHlwZSwgcmVzSWQsIHBheW1lbnRUeXBlLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImV4cG9ydF9hdWRpb1wiOi8vICDlr7zlh7rpn7PpopFcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuZXhwb3J0QXVkaW8ocmVzSWQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwic2V0X3NpbmdsZV9zYWxlXCI6Ly8gIOiuvue9ruWNleWNllxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5zZXRTaW5nbGVTYWxlKHJlc1R5cGUsIHJlc0lkLCByZXNUaXRsZSwgaXNUcnksIHNob3dUaW1lLCByZXNJbWdVcmwpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiY2FuY2VsX3NpbmdsZV9zYWxlXCI6Ly8gIOWPlua2iOWNleWNllxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5jYW5jZWxTaW5nbGVTYWxlKHJlc1R5cGUsIHJlc0lkLCBwYXltZW50VHlwZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJzaG93X3Jlc291cmNlXCI6Ly8gIOS4iuaetlxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5jaGFuZ2VHb29kc1N0YXRlKHJlc0lkLCByZXNUeXBlLCAwKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSBcImhpZGVfcmVzb3VyY2VcIjovLyAg5LiL5p62XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLmNoYW5nZUdvb2RzU3RhdGUocmVzSWQsIHJlc1R5cGUsIDEpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlIFwiZGVsZXRlXCI6Ly8gIOenu+mZpOivpeWVhuWTgVxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5xdWVyeVNpbmdsZVJlc291cmNlKHJlc0lkLCByZXNUeXBlLCBCdXNpbmVzcy5tZW1iZXJfaWQpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdlbmFibGVfY29weSc6Ly/lhYHorrjlpI3liLZcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuY2hhbmdlQ2FuU2VsZWN0U3RhdGUocmVzSWQsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdmb3JiaWRfY29weSc6Ly/npoHmraLlpI3liLZcbiAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIuemgeatouWkjeWItuWQju+8jOivpeevh+WbvuaWh+eahOWbvueJh+eCueWHu+aUvuWkp+WSjOmVv+aMieivhuWIq+S6jOe7tOeggeWKn+iDveWwhuiiq+emgeeUqFwiLCBcImluZm9cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAzLFxuICAgICAgICAgICAgICAgICAgICAgICAgb25PazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLmNoYW5nZUNhblNlbGVjdFN0YXRlKHJlc0lkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCflj4LmlbDplJnor68nKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gIOmSiOWvueS4k+agj+WIl+ihqOS4reavj+S4gOS4quadoeebrueahOaTjeS9nFxuICAgICAgICAkKFwiLm1lbWJlcl9saXN0X3dyYXBwZXJcIikub24oXCJjbGlja1wiLCBcIiNwYWNrYWdlX2l0ZW1fb3BlcmF0ZSBsaS5vcGVyYXRlXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgdmFyIHBhY2thZ2VJZCA9ICQodGhpcykucGFyZW50cyhcIi5wYWNrYWdlX2xpc3RfaXRlbVwiKS5kYXRhKFwicGFja2FnZV9pZFwiKSxcbiAgICAgICAgICAgICAgICB0eXBlID0gJCh0aGlzKS5kYXRhKFwidHlwZVwiKTtcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xuICAgICAgICAgICAgICAgIC8vIGNhc2UgXCJ0b190b3BcIjogIC8v572u6aG2XG4gICAgICAgICAgICAgICAgLy8gICAgIG1lbWJlckRldGFpbFV0aWxzLnNldFJlc291cmNlVG9wKEJ1c2luZXNzLm1lbWJlcl9pZCwgNiwgcGFja2FnZUlkLCAxKTtcbiAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgLy8gY2FzZSBcImNhbmNlbF90b3BcIjogIC8v572u6aG2XG4gICAgICAgICAgICAgICAgLy8gICAgIG1lbWJlckRldGFpbFV0aWxzLnNldFJlc291cmNlVG9wKEJ1c2luZXNzLm1lbWJlcl9pZCwgNiwgcGFja2FnZUlkLCAwKTtcbiAgICAgICAgICAgICAgICAvLyAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnc29sZG91dCc6XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLnBhY2thZ2Vpc1Nob3cocGFja2FnZUlkLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ3B1dGF3YXknOlxuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5wYWNrYWdlaXNTaG93KHBhY2thZ2VJZCwgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJlZGl0X3BhY2thZ2VcIjogICAgLy/nvJbovpFcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcImVkaXRfcGFja2FnZV9wYWdlP2lkPVwiICsgcGFja2FnZUlkICsgXCImbWVtYmVyX2lkPVwiICsgbW9kYWwuaWQ7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgXCJyZW1vdmVfcGFja2FnZVwiOiAgLy/np7vpmaTor6XmnYPnm4pcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMucXVlcnlQYWNrYWdlUmVzb3VyY2UocGFja2FnZUlkKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlj4LmlbDplJnor69cIik7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAg5pON5L2cIC0g5aSN5Yi25Yiw5Ymq6LS05p2/XG4gICAgICAgIChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciBjbGlwYm9hcmQgPSBuZXcgQ2xpcGJvYXJkKCcuY29weUhyZWYnKTtcbiAgICAgICAgICAgIGNsaXBib2FyZC5vbignc3VjY2VzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICBpZihlLnRyaWdnZXIuaWQ9PSdjb3B5X2FwcF9ocmVmJyl7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLlpI3liLbmiJDlip/vvIFcIik7XG5cbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuWkjeWItuaIkOWKn++8geivt+WcqOW+ruS/oeWGheaJk+W8gOWTpiDjgIJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGUuY2xlYXJTZWxlY3Rpb24oKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9KSgpO1xuXG4gICAgICAgIC8vIOS4k+agjyArIOWNleWTgSB0YWIg5YiH5o2iXG4gICAgICAgICQoXCIuY29udGVudF90YWJfd3JhcHBlciBsaVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoIUJ1c2luZXNzLmlzTG9hZGluZykge1xuICAgICAgICAgICAgICAgICQoXCIuaW5wdXRTZWFyY2hBbGxcIikudmFsKFwiXCIpO1xuICAgICAgICAgICAgICAgIEJ1c2luZXNzLnBhZ2VJbmRleCA9IDE7ICAgICAvL+WIh+aNouWQju+8jOWIhumhtemhteeggee9ruS4ujFcbiAgICAgICAgICAgICAgICBCdXNpbmVzcy5pc0xvYWRpbmcgPSB0cnVlOyAgLy/orrDlvZXliqDovb3nirbmgIHvvIzpmLLph43lpI3ngrnlh7tcbiAgICAgICAgICAgICAgICB2YXIgdGV4dCA9ICQodGhpcykudGV4dCgpO1xuICAgICAgICAgICAgICAgIGlmICghJCh0aGlzKS5oYXNDbGFzcyhcImFjdGl2ZUNvbnRlbnRUYWJcIikpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRleHQgPT0gXCLkuJPmoI9cIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNwYWNrYWdlVGFiXCIpLmFkZENsYXNzKFwiYWN0aXZlQ29udGVudFRhYlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2luZ2xlVGFiXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlQ29udGVudFRhYlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuc2VsZWN0b3JfcmVzb3VyY2VfdHlwZVwiKS5hZGRDbGFzcyhcImhpZGVcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodGV4dCA9PSBcIuWNleWTgVwiKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3NpbmdsZVRhYlwiKS5hZGRDbGFzcyhcImFjdGl2ZUNvbnRlbnRUYWJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3BhY2thZ2VUYWJcIikucmVtb3ZlQ2xhc3MoXCJhY3RpdmVDb250ZW50VGFiXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5zZWxlY3Rvcl9yZXNvdXJjZV90eXBlXCIpLnJlbW92ZUNsYXNzKFwiaGlkZVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAodGV4dCA9PSBcIuS4k+agj1wiKSB7XG4gICAgICAgICAgICAgICAgICAgIEJ1c2luZXNzLnNlYXJjaENvbnRlbnRGb3JQYWNrYWdlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgQnVzaW5lc3MudGFiU3RhdGUgPSBcInBhY2thZ2VMaXN0XCI7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLnN3aXRjaFdpbmRvd1RhYihcInBhY2thZ2VUYWJcIik7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmluaXRQYWNrYWdlTGlzdE9mTWVtYmVyKCk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHRleHQgPT0gXCLljZXlk4FcIikge1xuICAgICAgICAgICAgICAgICAgICBCdXNpbmVzcy5zZWFyY2hDb250ZW50Rm9yU2luZ2xlID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgQnVzaW5lc3MucmVzb3VyY2VfdHlwZSA9IDA7XG4gICAgICAgICAgICAgICAgICAgICQoJyNmaXJzdE9wdGlvbicpLnJlbW92ZUF0dHIoXCJzZWxlY3RlZFwiKS5hdHRyKFwic2VsZWN0ZWRcIixcInNlbGVjdGVkXCIpO1xuICAgICAgICAgICAgICAgICAgICBCdXNpbmVzcy50YWJTdGF0ZSA9IFwic2luZ2xlTGlzdFwiO1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5zd2l0Y2hXaW5kb3dUYWIoXCJzaW5nbGVUYWJcIik7XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmluaXRSZXNvdXJjZUxpc3RPZk1lbWJlcigpO1xuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gIOWIneWni+WMlumAieaLqeW3suacieWNleWTgVxuICAgICAgICBtb2RhbC5zZWxlY3RSZXNvdXJjZSgpO1xuXG4gICAgICAgIC8vICDliJ3lp4vljJbmkJzntKLnrZvpgIlcbiAgICAgICAgbW9kYWwuaW5pdFJlc291cmNlQW5kUGFja2FnZVNlYXJjaCgpO1xuXG4gICAgICAgIC8vICDliJ3lp4vljJbliJfooajnmoTliIbpobVcbiAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuaW5pdExpc3RQYWdpbmF0aW9uKCk7XG5cbiAgICAgICAgLy/liIbpobXor7fmsYJcbiAgICAgICAgJChcIi5tZW1iZXJfbGlzdF93cmFwcGVyXCIpLm9uKCdjbGljaycsICcgLnBhZ2luYXRpb24gbGkgYScsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKGUudGFyZ2V0KSxcbiAgICAgICAgICAgICAgICB1cmwgPSBlbGUuZGF0YSgndXJsJyk7XG4gICAgICAgICAgICBCdXNpbmVzcy5wYWdlSW5kZXggPSBlbGUudGV4dCgpO1xuICAgICAgICAgICAgaWYgKEJ1c2luZXNzLnRhYlN0YXRlID09IFwicGFja2FnZUxpc3RcIikge1xuICAgICAgICAgICAgICAgIG1vZGFsLmluaXRQYWNrYWdlTGlzdE9mTWVtYmVyKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEJ1c2luZXNzLnRhYlN0YXRlID09IFwic2luZ2xlTGlzdFwiKSB7XG4gICAgICAgICAgICAgICAgbW9kYWwuaW5pdFJlc291cmNlTGlzdE9mTWVtYmVyKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v5ZC05pmT5rOi5LiT55So6Ieq5a6a5LmJ5YaF5a655YiX6KGo6Lez6L2s5oyJ6ZKuXG4gICAgICAgICQoXCIudXNlckRlZmluZWRcIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBwaWQgPSAkKCcuYWRtaW5fZGF0YScpLmRhdGEoXCJtZW1iZXJfaWRcIik7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj1cIi91c2VyX2RlZmluZWQ/aWQ9XCIgKyBwaWQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vICDmt7vliqDljZXlk4FcbiAgICAgICAgdmFyIGlzX2Rpc3RyaWJ1dGU9JCgnLmFkZE1lbWJlclJpZ2h0cycpLmRhdGEoXCJkaXN0cmlidXRlXCIpO1xuICAgICAgICBpZihpc19kaXN0cmlidXRlID09IDApe1xuICAgICAgICAgICAgJChcIi5hZGRNZW1iZXJSaWdodHNcIikucmVtb3ZlQXR0cihcInN0eWxlXCIpO1xuICAgICAgICAgICAgJChcIi5hZGRNZW1iZXJSaWdodHNcIikuaG92ZXIoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJChcIi5jbGlja0J0bldyYXBwZXJcIikucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgICAgICAgfSwgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgJChcIi5jbGlja0J0bldyYXBwZXJcIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKFwiLm1vcmVfb3BlcmF0ZVwiKS5yZW1vdmVBdHRyKFwic3R5bGVcIik7XG4gICAgICAgICAgICAkKFwiLm1vcmVfb3BlcmF0ZVwiKS5ob3ZlcihmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAkKFwiLm1vcmVfb3BlcmF0ZV93cmFwcGVyXCIpLnJlbW92ZUNsYXNzKFwiaGlkZVwiKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQoXCIubW9yZV9vcGVyYXRlX3dyYXBwZXJcIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICB9O1xuXG4gICAgcmV0dXJuIEJ1c2luZXNzO1xuXG59KSgpO1xuXG52YXIgbW9kYWwgPSAoZnVuY3Rpb24oKSB7XG5cbiAgICB2YXIgbW9kYWwgPSB7fTtcblxuICAgIC8qKlxuICAgICAqIOaooeWdl+S4gO+8muWIneWni+WMluWNleWTgeWIl+ihqFxuICAgICAqL1xuICAgIG1vZGFsLmluaXRSZXNvdXJjZUxpc3RPZk1lbWJlciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkKFwiLmxvYWRpbmdTXCIpLmZhZGVJbigzMDApO1xuXG4gICAgICAgICQuYWpheChcIi9zaW5nZV9saXN0X21lbWJlclwiLCB7XG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIFwiaWRcIjogQnVzaW5lc3MubWVtYmVyX2lkLFxuICAgICAgICAgICAgICAgIFwic2VhcmNoX2NvbnRlbnRcIjogQnVzaW5lc3Muc2VhcmNoQ29udGVudEZvclNpbmdsZSxcbiAgICAgICAgICAgICAgICBcInJlc291cmNlX3R5cGVcIjogQnVzaW5lc3MucmVzb3VyY2VfdHlwZSxcbiAgICAgICAgICAgICAgICBcInBhZ2VcIjogQnVzaW5lc3MucGFnZUluZGV4XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgQnVzaW5lc3MuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJChcIi5sb2FkaW5nU1wiKS5mYWRlT3V0KDEwMCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiLm1lbWJlcl9saXN0X3dyYXBwZXJcIikuaHRtbChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5pbml0TGlzdFBhZ2luYXRpb24oKTsvL+WIneWni+WMluWIhumhteaMiemSrlxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6K+35rGC5pWw5o2u5Li656m6XCIpO1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zpl67popjvvIzor7fnqI3lkI7lho3or5VcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgICAgICAgICAgQnVzaW5lc3MuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJChcIi5sb2FkaW5nU1wiKS5mYWRlT3V0KDEwMCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLojrflj5bljZXlk4HliJfooajlpLHotKVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOaooeWdl+S6jO+8muWIneWni+WMluS4k+agj+WIl+ihqFxuICAgICAqL1xuICAgIG1vZGFsLmluaXRQYWNrYWdlTGlzdE9mTWVtYmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICQoXCIubG9hZGluZ1NcIikuZmFkZUluKDMwMCk7XG4gICAgICAgICQuYWpheChcIi9wYWNrYWdlX2xpc3RfbWVtYmVyXCIsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJodG1sXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgaWQ6IEJ1c2luZXNzLm1lbWJlcl9pZCxcbiAgICAgICAgICAgICAgICBzZWFyY2hfY29udGVudDogQnVzaW5lc3Muc2VhcmNoQ29udGVudEZvclBhY2thZ2UsXG4gICAgICAgICAgICAgICAgcGFnZTogQnVzaW5lc3MucGFnZUluZGV4XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgQnVzaW5lc3MuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgJChcIi5sb2FkaW5nU1wiKS5mYWRlT3V0KDEwMCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAmJiByZXN1bHQubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAkKFwiLm1lbWJlcl9saXN0X3dyYXBwZXJcIikuaHRtbChyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBtZW1iZXJEZXRhaWxVdGlscy5pbml0TGlzdFBhZ2luYXRpb24oKTsvL+WIneWni+WMluWIhumhteaMiemSrlxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLor7fmsYLmlbDmja7kuLrnqbpcIik7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmXrumimO+8jOivt+eojeWQjuWGjeivlVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBCdXNpbmVzcy5pc0xvYWRpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMTAwKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuiOt+WPluWNleWTgeWIl+ihqOWksei0pVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqICDmqKHlnZfkuIkg77yaIOmAieaLqeW3suacieWNleWTgVxuICAgICAqL1xuICAgIG1vZGFsLmhhc0Rvd24gPSBmYWxzZTtcbiAgICBtb2RhbC5oYXNDbG9zZSA9IHRydWU7XG4gICAgbW9kYWwucGFnZSA9IDE7IC8v5re75Yqg5bey5pyJ5Y2V5ZOB55qE6aG156CBXG4gICAgbW9kYWwuc2VhcmNoQ29udGVudCA9ICcnO1xuXG4gICAgbW9kYWwuaXNMb2FkaW5nID0gZmFsc2U7ICAgIC8v5piv5ZCm5aSE5LqO5Yqg6L2954q25oCBXG4gICAgbW9kYWwucmVzVHlwZSA9IDA7ICAvLyAgNi3ojrflj5bkuJPmoI/kv6Hmga/vvIwgMC3ojrflj5bljZXlk4Hkv6Hmga9cbiAgICBtb2RhbC50YWJTdGF0ZSA9IFwic2luZ2xlTGlzdFwiOyAgLy8g6buY6K6k5pi+56S65Y2V5ZOB5YiX6KGoICAgICDvvIhcInBhY2thZ2VMaXN0XCIsIFwic2luZ2xlTGlzdFwi77yJXG5cblxuICAgIG1vZGFsLnNlbGVjdFJlc291cmNlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcbiAgICAgICAgJCgnI2FkZFNpbmdsZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvL+W8ueWHuumAieaLqeahhlxuICAgICAgICAgICAgc2VsZi5wYWdlID0gMTtcbiAgICAgICAgICAgIHNlbGYuaGFzRG93biA9IGZhbHNlO1xuICAgICAgICAgICAgc2VsZi5oYXNDbG9zZSA9IGZhbHNlO1xuICAgICAgICAgICAgc2VsZi5nZXRTZWxlY3REYXRhKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyNzZWxlY3RXaW5kb3cgI3NlbGN0Q2xvc2UsICNzZWxlY3RXaW5kb3cgI3NlbGVjdENhbmNlbEJ0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCkgeyAvL+WFs+mXremAieaLqeW8ueeql1xuICAgICAgICAgICAgdmFyICRzZWxlY3RXaW4gPSAkKCcjc2VsZWN0V2luZG93Jyk7XG4gICAgICAgICAgICAkc2VsZWN0V2luLmZhZGVPdXQoJ25vcm1hbCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykuZmluZCgnI3NlbGVjdEFyZWFMaXN0JykuaHRtbCgnJyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICRzZWxlY3RXaW4uZmluZCgnLmlucHV0U2VhcmNoUGFydCcpLnZhbCgnJyk7IC8v5riF56m65pCc57Si5qGGXG4gICAgICAgICAgICBzZWxmLnBhZ2UgPSAxO1xuICAgICAgICAgICAgc2VsZi5oYXNDbG9zZSA9IHRydWU7XG4gICAgICAgICAgICBzZWxmLnNlYXJjaENvbnRlbnQgPSAnJztcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnI3NlbGVjdFdpbmRvdyAjc2VsZWN0U2VhcmNoQnRuJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8v6YCJ5oup5qGG55qE5Y2V5ZOB5pCc57SiXG4gICAgICAgICAgICB2YXIgc2VhcmNoVmFsID0gJC50cmltKCQodGhpcykucHJldigpLnZhbCgpKTtcbiAgICAgICAgICAgIHNlbGYuc2VhcmNoQ29udGVudCA9IHNlYXJjaFZhbDtcbiAgICAgICAgICAgIHNlbGYucGFnZSA9IDE7XG4gICAgICAgICAgICBzZWxmLmhhc0Nsb3NlID0gdHJ1ZTtcbiAgICAgICAgICAgIHNlbGYuZ2V0U2VsZWN0RGF0YSgpO1xuICAgICAgICB9KVxuICAgICAgICAucHJldigpLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gXCIxM1wiKSB7XG4gICAgICAgICAgICAgICAgJCgnI3NlbGVjdFdpbmRvdyAjc2VsZWN0U2VhcmNoQnRuJykuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy90YWLliIfmjaJcbiAgICAgICAgJChcIi5zZWxlY3RHb29kVGFiV3JhcHBlciBsaVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgdmFsdWUgPSAkKHRoaXMpLnZhbCgpO1xuXG4gICAgICAgICAgICBpZiAoIW1vZGFsLmlzTG9hZGluZykge1xuICAgICAgICAgICAgICAgIHNlbGYucGFnZSA9IDE7XG4gICAgICAgICAgICAgICAgJCgnI3NlbGVjdFdpbmRvdyAjc2VsZWN0QXJlYUxpc3RXcmFwcGVyJykuc2Nyb2xsVG9wKDApO1xuICAgICAgICAgICAgICAgIG1vZGFsLmlzTG9hZGluZyA9IHRydWU7ICAvL+iusOW9leWKoOi9veeKtuaAge+8jOmYsumHjeWkjeeCueWHu1xuXG4gICAgICAgICAgICAgICAgaWYgKHZhbHVlID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgbWVtYmVyRGV0YWlsVXRpbHMuc3dpdGNoV2luZG93VGFiKFwic2luZ2xlVGFiXCIpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1lbWJlckRldGFpbFV0aWxzLnN3aXRjaFdpbmRvd1RhYihcInBhY2thZ2VUYWJcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGYuZ2V0U2VsZWN0RGF0YSgpO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnI3NlbGVjdFdpbmRvdyAjc2VsZWN0QXJlYUxpc3RXcmFwcGVyJykuc2Nyb2xsKGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBEaXZIZWlnaHQgPSAkKCcjc2VsZWN0QXJlYUxpc3QnKS5oZWlnaHQoKSxcbiAgICAgICAgICAgICAgICBTY3JvbGxIZWlnaHQgPSAkKHRoaXMpLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgIFNjcm9sbFRvcCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XG5cbiAgICAgICAgICAgIGlmICgoU2Nyb2xsVG9wICsgU2Nyb2xsSGVpZ2h0ID49IERpdkhlaWdodCAtIDUpICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuaGFzRG93biAvL+WIpOaWreaYr+WQpuWIsOi+vuW6lemDqFxuICAgICAgICAgICAgICAgICYmXG4gICAgICAgICAgICAgICAgIXNlbGYuaGFzQ2xvc2UgLy/liKTmlq3lvLnmoYbmmK/lkKblhbPpl61cbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAgIHNlbGYuaGFzQ2xvc2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHNlbGYuZ2V0U2VsZWN0RGF0YSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvLyAkKFwiI3NlbGVjdEFyZWFMaXN0IC5pc0Rvd25cIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvL+aPkOS6pOimgea3u+WKoOeahOWNleWTgVxuICAgICAgICAkKCcjc2VsZWN0V2luZG93ICNzZWxlY3RPa0J0bicpLm9uKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciAkc2VsZWN0QXJlYSA9ICQoJyNzZWxlY3RXaW5kb3cgI3NlbGVjdEFyZWFMaXN0V3JhcHBlcicpLFxuICAgICAgICAgICAgICAgIHJlc0xpc3QgPSBbXTtcblxuICAgICAgICAgICAgJHNlbGVjdEFyZWEuZmluZCgnOmNoZWNrYm94OmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uKGksIGl0ZW0pIHtcbiAgICAgICAgICAgICAgICBpZiAobW9kYWwudGFiU3RhdGUgPT0gXCJwYWNrYWdlTGlzdFwiKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciByZXNPYmogPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV9pZDogaXRlbS5nZXRBdHRyaWJ1dGUoJ2lkJyksXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiA2XG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RhbC50YWJTdGF0ZSA9PSBcInNpbmdsZUxpc3RcIikge1xuICAgICAgICAgICAgICAgICAgICB2YXIgcmVzT2JqID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfaWQ6IGl0ZW0uZ2V0QXR0cmlidXRlKCdpZCcpLFxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfdHlwZTogaXRlbS5nZXRBdHRyaWJ1dGUoJ3ZhbHVlJylcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmVzTGlzdFtyZXNMaXN0Lmxlbmd0aF0gPSByZXNPYmo7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8q5Y+C5pWwOlxuICAgICAgICAgICAgIDEtY2hhbm5lbF90eXBlKDEt5Y2V5ZOBLDIt5LiT5qCPLDMt5Lya5ZGYKTtcbiAgICAgICAgICAgICAyLXJlc291cmNlX2xpc3Qo6YCJ5Lit55qE6LWE5rqQ6ZuG5ZCIKOaVsOe7hCksXG4gICAgICAgICAgICAg6ZSu5YC85a+555qE5qC85byP5aaCOnJlc291cmNlX2lkOmFfa2pqYWszNDUscmVzb3VyY2VfdHlwZToxKTtcbiAgICAgICAgICAgICAzLXBhY2thZ2VfaWQo5b2TY2hhbm5lbF90eXBlPTLjgIEz5pe2LOacieWAvCk7XG4gICAgICAgICAgICAgNC1waWVjZV9wcmljZSjkvYZjaGFubmVsX3R5cGU9MeaXtuacieWAvCkqL1xuICAgICAgICAgICAgJC5hamF4KCcvc3VibWl0X2Nob2ljZV9yZXNvdXJjZScsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIGNoYW5uZWxfdHlwZTogMyxcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfbGlzdDogcmVzTGlzdCxcbiAgICAgICAgICAgICAgICAgICAgcGFja2FnZV9pZDogc2VsZi5pZCxcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2VsZWN0V2luZG93ICNzZWxjdENsb3NlJykuY2xpY2soKTsgLy/pgInmi6nmiJDlip/vvIzkuLvliqjlhbPpl63pgInmi6nlvLnnqpdcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKG1vZGFsLnRhYlN0YXRlID09IFwicGFja2FnZUxpc3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcGFja2FnZVRhYlwiKS5jbGljaygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChtb2RhbC50YWJTdGF0ZSA9PSBcInNpbmdsZUxpc3RcIikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjc2luZ2xlVGFiXCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5pON5L2c5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VJyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIG1vZGFsLmdldFNlbGVjdERhdGEgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuICAgICAgICBpZiAoc2VsZi5wYWdlID09IDEpIHtcbiAgICAgICAgICAgICQoXCIubG9hZGluZ1NfaW5fd2luZG93XCIpLmZhZGVJbigzMDApO1xuICAgICAgICB9XG4gICAgICAgICQuYWpheCgnL2Nob2ljZV9yZXNvdXJjZV9saXN0Jywge1xuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIC8q5Y+C5pWwOlxuICAgICAgICAgICAgIDEtY2hhbm5lbF90eXBlKDEt5Y2V5ZOBLDIt5LiT5qCPLDMt5Lya5ZGYKVxuICAgICAgICAgICAgIDIt5pCc57Si5YaF5a65LXNlYXJjaF9jb250ZW50O1xuICAgICAgICAgICAgIDMtcmVzb3VyY2VfdHlwZSgwLeWFqOmDqCwxLeWbvuaWhywyLemfs+mikSwzLeinhumikSw0LeebtOaSrSk7XG4gICAgICAgICAgICAgNC1wYWdlKOWIhumhtemhteeggSk7XG4gICAgICAgICAgICAgNS1wYWNrYWdlX2lkKOW9k2NoYW5uZWxfdHlwZT0y44CBM+aXtizmnInlgLwpXG4gICAgICAgICAgICAgKi9cbiAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICBzZWFyY2hfY29udGVudDogc2VsZi5zZWFyY2hDb250ZW50IHx8ICcnLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxfdHlwZTogMyxcbiAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiBzZWxmLnJlc1R5cGUsXG4gICAgICAgICAgICAgICAgcGFja2FnZV9pZDogc2VsZi5pZCxcbiAgICAgICAgICAgICAgICBwYWdlOiBzZWxmLnBhZ2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTX2luX3dpbmRvd1wiKS5mYWRlT3V0KDMwMCk7XG4gICAgICAgICAgICAgICAgbW9kYWwuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgJHNlbGVjdEFyZWEgPSAkKCcjc2VsZWN0QXJlYUxpc3QnKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGVjdFN0ciA9ICcnLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFnZU9iaiA9IEpTT04ucGFyc2UocmVzdWx0LmRhdGEucGFnZV9vZmZzZXQpO1xuICAgICAgICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0LmRhdGEucmVzb3VyY2VfbGlzdCwgZnVuY3Rpb24oaSwgaXRlbSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc291cmNlX3R5cGUgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChzZWxmLnJlc1R5cGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoK3RoaXMucmVzb3VyY2VfdHlwZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlID0gJ+WbvuaWhyc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfdHlwZSA9ICfpn7PpopEnO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGUgPSAn6KeG6aKRJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlID0gJ+ebtOaSrSc7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGUgPSAn5pegJztcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucmVzVHlwZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0U3RyICs9ICc8ZGl2IGNsYXNzPVwicmVzb3VyY2VJdGVtV3JhcHBlclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGlucHV0IHZhbHVlPVwiJyArIHRoaXMucmVzb3VyY2VfdHlwZSArICdcIiBpZD1cIicgKyB0aGlzLmlkICsgJ1wiIGNsYXNzPVwid2l0aC1nYXAgcmVzb3VyY2VfcmFkaW9cIiBuYW1lPVwic2VsZWN0X3Jlc291cmNlXCIgdHlwZT1cImNoZWNrYm94XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8bGFiZWwgZm9yPVwiJyArIHRoaXMuaWQgKyAnXCIgY2xhc3M9XCJyYWRpb19kZXNjXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicmVzb3VyY2VfaWNvbl93cmFwcGVyXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW1nIGNsYXNzPVwicmVzb3VyY2VfaWNvblwiIHNyYz1cIicgKyB0aGlzLmltZ191cmwgKyAnXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy50aXRsZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2xhYmVsPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJyZXNvdXJjZV90eXBlXCI+JyArIHJlc291cmNlX3R5cGUgKyAnPC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJyZXNvdXJjZV90aW1lXCI+JyArIHRoaXMuc3RhcnRfYXQgKyAnPC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0U3RyICs9ICc8ZGl2IGNsYXNzPVwicmVzb3VyY2VJdGVtV3JhcHBlclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGlucHV0JyArICcgaWQ9XCInICsgdGhpcy5pZCArICdcIiBjbGFzcz1cIndpdGgtZ2FwIHJlc291cmNlX3JhZGlvXCIgbmFtZT1cInNlbGVjdF9yZXNvdXJjZVwiIHR5cGU9XCJjaGVja2JveFwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj1cIicgKyB0aGlzLmlkICsgJ1wiIGNsYXNzPVwicmFkaW9fZGVzY1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJlc291cmNlX2ljb25fd3JhcHBlclwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBjbGFzcz1cInJlc291cmNlX2ljb25cIiBzcmM9XCInICsgdGhpcy5pbWdfdXJsICsgJ1wiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubmFtZSArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2xhYmVsPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJyZXNvdXJjZV90aW1lXCI+JyArIHRoaXMudXBkYXRlZF9hdCArICc8L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHNlbGYucGFnZSA9PSAxIHx8ICFzZWxmLnBhZ2UpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3RBcmVhLmh0bWwoc2VsZWN0U3RyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3RBcmVhLmFwcGVuZCgnPGRpdiBjbGFzcz1cImlzRG93blwiPui1hOa6kOWKoOi9veS4rTwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNDbG9zZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy/pppbmrKHliqDovb3vvIzmmL7npLpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghc2VsZi5zZWFyY2hDb250ZW50KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlbGVjdFdpbmRvdycpLmZhZGVJbigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHNlbGYucGFnZSA+IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICRzZWxlY3RBcmVhLmZpbmQoJy5pc0Rvd24nKS5iZWZvcmUoc2VsZWN0U3RyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuaGFzQ2xvc2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8v5pWw5o2u5Yqg6L295a6M5q+V5ZCO55qE5pON5L2cXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlT2JqLmN1cnJlbnRfcGFnZSA+PSBwYWdlT2JqLnRvdGFsX3BhZ2VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkc2VsZWN0QXJlYS5maW5kKCcuaXNEb3duJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZi5oYXNEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBzZWxmLnBhZ2UrKztcblxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaLieWPluW3suacieWNleWTgeWksei0pe+8gVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTX2luX3dpbmRvd1wiKS5mYWRlT3V0KDMwMCk7XG4gICAgICAgICAgICAgICAgbW9kYWwuaXNMb2FkaW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5pON5L2c5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOaooeWdl+Wbm++8miDljZXlk4Ev5LiT5qCP5YiX6KGo55qE5pCc57SiXG4gICAgICovXG4gICAgbW9kYWwuaW5pdFJlc291cmNlQW5kUGFja2FnZVNlYXJjaCA9IGZ1bmN0aW9uKCkge1xuXG4gICAgICAgIC8vICAx44CB5byA5aeL5pCc57Si44CB5Y2V5ZOBL+S4k+agj1xuICAgICAgICAkKFwiLnNlYXJjaEFsbEJ0blwiKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgaWYgKEJ1c2luZXNzLnRhYlN0YXRlID09IFwicGFja2FnZUxpc3RcIikge1xuICAgICAgICAgICAgICAgIEJ1c2luZXNzLnNlYXJjaENvbnRlbnRGb3JQYWNrYWdlID0gJC50cmltKCQoXCIuaW5wdXRTZWFyY2hBbGxcIikudmFsKCkpO1xuICAgICAgICAgICAgICAgIG1vZGFsLmluaXRQYWNrYWdlTGlzdE9mTWVtYmVyKCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKEJ1c2luZXNzLnRhYlN0YXRlID09IFwic2luZ2xlTGlzdFwiKSB7XG4gICAgICAgICAgICAgICAgQnVzaW5lc3MucmVzb3VyY2VfdHlwZSA9ICQoXCIuc2VsZWN0b3JfcmVzb3VyY2VfdHlwZVwiKS52YWwoKTtcbiAgICAgICAgICAgICAgICBCdXNpbmVzcy5zZWFyY2hDb250ZW50Rm9yU2luZ2xlID0gJC50cmltKCQoXCIuaW5wdXRTZWFyY2hBbGxcIikudmFsKCkpO1xuICAgICAgICAgICAgICAgIG1vZGFsLmluaXRSZXNvdXJjZUxpc3RPZk1lbWJlcigpO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gMeOAgei+k+WFpeWujOaIkOWQju+8jOWbnui9puW8gOWni+aQnOe0oiAtIOWFqOmDqOWNleWTgS/kuJPmoI9cbiAgICAgICAgJChcIi5pbnB1dFNlYXJjaEFsbFwiKS5vbigna2V5cHJlc3MnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgICAgICQoJy5zZWFyY2hBbGxCdG4nKS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAg55uR5ZCs562b6YCJ5qGG6YCJ5oup5LqL5Lu2XG4gICAgICAgICQoXCIuc2VsZWN0b3JfcmVzb3VyY2VfdHlwZVwiKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCgnLnNlYXJjaEFsbEJ0bicpLmNsaWNrKCk7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOaooeWdl+S6lO+8miDliJ3lp4vljJbkvJrlkZjlpJbljZXljZborr7nva7nqpflj6NcbiAgICAgKi9cbiAgICBtb2RhbC5pbml0U2V0U2luZ2xlU2FsZVdpbmRvdyA9IGZ1bmN0aW9uKHJlc0ltZ1VybCwgcmVzVGl0bGUsIHJlc1R5cGUsIHNob3dUaW1lLCByZXNJZCkge1xuXG4gICAgICAgIC8vICDnu5norr7nva7ku7fmoLzloavlhYXmlbDmja5cbiAgICAgICAgJChcIi5yZXNvdXJjZV9pY29uXzNcIikuYXR0cihcInNyY1wiLCByZXNJbWdVcmwpO1xuICAgICAgICAkKFwiLnJlc291cmNlX3RpdGxlXzNcIikuaHRtbChyZXNUaXRsZSk7XG4gICAgICAgIHN3aXRjaCAocmVzVHlwZSkge1xuICAgICAgICAgICAgY2FzZSAxOlxuICAgICAgICAgICAgICAgICQoXCIucmVzb3VyY2VfdHlwZV8zXCIpLmh0bWwoXCLlm77mlodcIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgJChcIi5yZXNvdXJjZV90eXBlXzNcIikuaHRtbChcIumfs+mikVwiKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAkKFwiLnJlc291cmNlX3R5cGVfM1wiKS5odG1sKFwi6KeG6aKRXCIpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSA0OlxuICAgICAgICAgICAgICAgICQoXCIucmVzb3VyY2VfdHlwZV8zXCIpLmh0bWwoXCLnm7Tmkq1cIik7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgICQoXCIucmVzb3VyY2VfdGltZV8zXCIpLmh0bWwoc2hvd1RpbWUpO1xuXG4gICAgICAgICQoXCIuY2xvc2VfaWNvbl93cmFwcGVyXzIsIC5jYW5jZWxfc2V0X3ByaWNlXCIpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJChcIi5zZXRfcHJpY2Vfd2luZG93XCIpLmZhZGVPdXQoMzAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIi5jb25maXJtX3ByaWNlX2J0blwiKS5jbGljayhmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyIHByaWNlID0gJC50cmltKCQoXCIuaW5wdXRfc2V0dGluZ19wcmljZVwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIHZhciByZWcgPSAvXihbMS05XVtcXGRdKnwwKShbLy5dW1xcZF17MSwyfSk/JC87XG4gICAgICAgICAgICBpZiAoIXJlZy50ZXN0KHByaWNlKSkge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5Lu35qC86L6T5YWl5pyJ6K+vJyk7XG4gICAgICAgICAgICAgICAgJCgnLmlucHV0X3NldHRpbmdfcHJpY2UnKS52YWwoXCJcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHByaWNlIDw9IDApIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLku7fmoLzkuI3og73kuLowIOaIliDotJ/mlbAhXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHByaWNlID4gYmFzZVV0aWxzLm1heElucHV0UHJpY2UpIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLku7fmoLzkuI3og73lpKfkuo4gXCIgKyBiYXNlVXRpbHMubWF4SW5wdXRQcmljZSArIFwiIOWFg1wiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBhcnIgPSB7fTtcbiAgICAgICAgICAgIGFycltcInJlc291cmNlX2lkXCJdID0gcmVzSWQ7XG4gICAgICAgICAgICBhcnJbXCJyZXNvdXJjZV90eXBlXCJdID0gcmVzVHlwZTtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZUxpc3RBcnIgPSBbYXJyXTtcblxuICAgICAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgICAgICQuYWpheChcIi9zdWJtaXRfY2hvaWNlX3Jlc291cmNlXCIsIHtcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgIFwiY2hhbm5lbF90eXBlXCI6IDEsXG4gICAgICAgICAgICAgICAgICAgIFwicmVzb3VyY2VfbGlzdFwiOiByZXNvdXJjZUxpc3RBcnIsXG4gICAgICAgICAgICAgICAgICAgIFwicGllY2VfcHJpY2VcIjogcHJpY2UgKiAxMDAsIC8vIOWNleS9je+8miDliIZcbiAgICAgICAgICAgICAgICAgICAgXCJzdWJtaXRfdHlwZVwiOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuc2V0X3ByaWNlX3dpbmRvd1wiKS5mYWRlT3V0KDMwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi6K6+5Li65Y2V5Y2W5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwuaW5pdFJlc291cmNlTGlzdE9mTWVtYmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5UhXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlvIDlsI/lt67llabvvIzor7fnqI3lkI7lho3mk43kvZzvvIFcIik7XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG5cbiAgICByZXR1cm4gbW9kYWw7XG5cbn0pKCk7XG5cblxudmFyIG1lbWJlckRldGFpbFV0aWxzID0gKGZ1bmN0aW9uKCkge1xuXG4gICAgdmFyIHV0aWxzID0ge307XG5cbiAgICAvKipcbiAgICAgKiDkvJrlkZgg5oiW6ICFIOWNleWTgSDlrp7njrDkuIrmnrYgKyDkuIvmnrZcbiAgICAgKiBAcGFyYW0gbWVtYmVySWRcbiAgICAgKiBAcGFyYW0gb3BlcmF0ZV90eXBlXG4gICAgICovXG4gICAgdXRpbHMuY2hhbmdlR29vZHNTdGF0ZSA9IGZ1bmN0aW9uKGdvb2RzSWQsIGdvb2RzVHlwZSwgb3BlcmF0ZV90eXBlKSB7XG5cbiAgICAgICAgaWYgKGdvb2RzVHlwZSA9PSAwKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IG9wZXJhdGVfdHlwZSA9PSAwID8gXCLkuIrmnrblkI7or6XkvJrlkZjlsIblr7nlpJbmmL7npLpcIiA6IFwi5LiL5p625ZCO6K+l5Lya5ZGY5bCG5LiN5a+55aSW5pi+56S6XCI7XG4gICAgICAgIH0gZWxzZSBpZiAoZ29vZHNUeXBlID09IDEgfHwgZ29vZHNUeXBlID09IDIgfHwgZ29vZHNUeXBlID09IDMgfHwgZ29vZHNUeXBlID09IDQpIHtcbiAgICAgICAgICAgIHZhciB0ZXh0ID0gb3BlcmF0ZV90eXBlID09IDAgPyBcIuS4iuaetuWQjuivpeWNleWTgeWwhuWvueWkluaYvuekulwiIDogXCLkuIvmnrblkI7or6XljZXlk4HlsIbkuI3lr7nlpJbmmL7npLpcIjtcbiAgICAgICAgfVxuXG4gICAgICAgICQuYWxlcnQodGV4dCwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgJC5hamF4KFwiL2NoYW5nZV9nb29kc19zdGF0ZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZ29vZHNfaWRcIjogZ29vZHNJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiZ29vZHNfdHlwZVwiOiBnb29kc1R5cGUsIC8vICBnb29kc190eXBlKDAt5LiT5qCPIOaIliDkvJrlkZgsMS3lm77mlocsMi3pn7PpopEsMy3op4bpopEsNC3nm7Tmkq0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJvcGVyYXRlX3R5cGVcIjogb3BlcmF0ZV90eXBlIC8vICAwLeS4iuaetiwxLeS4i+aetlxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRlX3R5cGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5LiK5p625oiQ5Yqf77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLkuIvmnrbmiJDlip/vvIFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChnb29kc1R5cGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAxNTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbC5pbml0UmVzb3VyY2VMaXN0T2ZNZW1iZXIoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaTjeS9nOWksei0pe+8jOivt+eojeWQjumHjeivle+8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pON5L2c5aSx6LSl77yM6K+356iN5ZCO6YeN6K+V77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5piv5ZCm5Zyo5pyA5paw5YiX6KGo5Lit5pi+56S6XG4gICAgICogQHBhcmFtIG1lbWJlcklkXG4gICAgICogQHBhcmFtIG9wZXJhdGVfdHlwZVxuICAgICAqL1xuICAgIHV0aWxzLmNoYW5nZU5ld2xMaXN0U3RhdGUgPSBmdW5jdGlvbihnb29kc0lkLCBnb29kc1R5cGUsIG9wZXJhdGVfdHlwZSkge1xuICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICAkLmFqYXgoXCIvc2V0X2g1X25ld2VzdF9oaWRlXCIsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIFwiaWRcIjogZ29vZHNJZCxcbiAgICAgICAgICAgICAgICBcImg1X25ld2VzdF9oaWRlXCI6IG9wZXJhdGVfdHlwZSAvLyAgMC3mmL7npLosMS3pmpDol49cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChvcGVyYXRlX3R5cGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuiuvue9ruaIkOWKn++8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLorr7nva7miJDlip/vvIFcIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGdvb2RzVHlwZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDE1MDApO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kYWwuaW5pdFJlc291cmNlTGlzdE9mTWVtYmVyKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIzor7fnqI3lkI7ph43or5XvvIFcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaTjeS9nOWksei0pe+8jOivt+eojeWQjumHjeivle+8gVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiDnva7pobbmk43kvZxcbiAgICAgKiBAcGFyYW0gcGFja2FnZUlkXG4gICAgICogQHBhcmFtIHJlc291cmNlVHlwZSAgLT4gKDAt5LiT5qCPLDEt5Zu+5paHLDIt6Z+z6aKRLDMt6KeG6aKRLDQt55u05pKtKTtcbiAgICAgKiBAcGFyYW0gcmVzb3VyY2VJZFxuICAgICAqIEBwYXJhbSB0b3BTdGF0ZSAgICAgIC0+ICgwLeWPlua2iOe9rumhtiwxLeiuvue9rue9rumhtilcbiAgICAgKi9cbiAgICB1dGlscy5zZXRSZXNvdXJjZVRvcCA9IGZ1bmN0aW9uKHBhY2thZ2VJZCwgcmVzb3VyY2VUeXBlLCByZXNvdXJjZUlkLCB0b3BTdGF0ZSkge1xuICAgICAgICBzaG93TG9hZGluZygpO1xuXG4gICAgICAgICQuYWpheCgnL3NldF9wYWNrYWdlX3Jlc291cmNlX3RvcCcsIHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgcGFja2FnZV9pZDogcGFja2FnZUlkLFxuICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGU6IHJlc291cmNlVHlwZSxcbiAgICAgICAgICAgICAgICByZXNvdXJjZV9pZDogcmVzb3VyY2VJZCxcbiAgICAgICAgICAgICAgICB0b3Bfc3RhdGU6IHRvcFN0YXRlXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh0b3BTdGF0ZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5bey57uP5Y+W5raI572u6aG277yBXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIue9rumhtuaIkOWKn++8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBtb2RhbC5pbml0UmVzb3VyY2VMaXN0T2ZNZW1iZXIoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5pON5L2c5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIOWNleWTgeS4iuS4i+aetlxuICAgICAqIEBwYXJhbSByZXNvdXJjZV9pZFxuICAgICAqIEBwYXJhbSBjaGFuZ2VUeXBlICB0cnVlLeS4iuaetu+8jCBmYWxzZS3kuIvmnrZcbiAgICAgKi9cbiAgICB1dGlscy5wYWNrYWdlaXNTaG93ID0gZnVuY3Rpb24oaWQsIGNoYW5nZVR5cGUpIHsgLy/kuJPmoI/kuIrkuIvmnrZcbiAgICAgICAgJC5hbGVydChjaGFuZ2VUeXBlID8gXCLkuIrmnrblkI7or6XkuJPmoI/lsIblr7nlpJbmmL7npLpcIiA6IFwi5LiL5p625ZCO6K+l5LiT5qCP5bCG5LiN5a+55aSW5pi+56S6XCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICBvbk9rOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICAgICAgICAgICQuYWpheCgnL2NoYW5nZV9nb29kc19zdGF0ZScsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKlxuICAgICAgICAgICAgICAgICAgICAgICAgMS1nb29kc19pZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIDItZ29vZHNfdHlwZSgwLeS4k+agjywxLeWbvuaWhywyLemfs+mikSwzLeinhumikSw0LeebtOaSrSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAzLW9wZXJhdGVfdHlwZSgwLeS4iuaetiwxLeS4i+aetilcbiAgICAgICAgICAgICAgICAgICAgICAgICovXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29kc19pZDogaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBnb29kc190eXBlOiAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlcmF0ZV90eXBlOiBjaGFuZ2VUeXBlID8gMCA6IDEsXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxvYWRQYWdlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSwgNzAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuU3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbGYuYnRuU3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5UnKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5p+l6K+i5Y2V5ZOBIOaYr+WQpuWcqOWNleWTgeWIl+ihqCDmiJYg5LiT5qCP5YiX6KGoXG4gICAgICogQHBhcmFtIHJlc291cmNlX2lkXG4gICAgICogQHBhcmFtIHJlc291cmNlX3R5cGUgICgxLeWbvuaWhywyLemfs+mikSwzLeinhumikSw0LeebtOaSrSk7XG4gICAgICogQHBhcmFtIHBhY2thZ2VfaWQgICjlvZNjaGFubmVsX3R5cGU9MeaXtuacieWAvClcbiAgICAgKi9cbiAgICB1dGlscy5xdWVyeVNpbmdsZVJlc291cmNlID0gZnVuY3Rpb24ocmVzb3VyY2VfaWQsIHJlc291cmNlX3R5cGUsIHBhY2thZ2VfaWQpIHtcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgJC5hamF4KFwiL3F1ZXJ5X2dvb2RzX3N0YXRlXCIsIHsgLy8gIDEgLT4g5p+l6K+i5Y2V5ZOBIOaYr+WQpuWcqOWNleWTgeWIl+ihqOaIluiAheWFtuWug+S4k+agj+OAgeS8muWRmOWIl+ihqFxuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZ29vZHNfaWQ6IHJlc291cmNlX2lkLFxuICAgICAgICAgICAgICAgIGdvb2RzX3R5cGU6IHJlc291cmNlX3R5cGUsXG4gICAgICAgICAgICAgICAgY2hhbm5lbF90eXBlOiAyLCAvLyAgY2hhbm5lbF90eXBlICggMC3ljZXlk4EsMS3kuJPmoI/lhoXotYTmupAsMi3kvJrlkZjlhoUgKVxuICAgICAgICAgICAgICAgIHBhY2thZ2VfaWQ6IHBhY2thZ2VfaWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0V4aXN0ID0gcmVzdWx0LmRhdGFbJ2lzX2V4aXN0J10sXG4gICAgICAgICAgICAgICAgICAgICAgICByZWNvcmRzTGlzdCA9IHJlc3VsdC5kYXRhWydyZWNvcmRzX2xpc3QnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGFyckxlbmd0aCA9IE9iamVjdC5rZXlzKHJlY29yZHNMaXN0KS5sZW5ndGgsXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gXCJcIjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaXNFeGlzdCA9PSAwKSB7ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAg5Y+q5bGe5LqO5p+Q5Liq5LiT5qCP55qE5Y2V5ZOBLOWFtuWug+WcsOaWueS4jeWtmOWcqFxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCA9IFwi56Gu6K6k56e76Zmk6K+l5YaF5a6577yM56e76Zmk5ZCO5omA5pyJ55So5oi35bCG5peg5rOV5p+l55yL5q2k5YaF5a655LiUPHNwYSBzdHlsZT0nY29sb3I6IHJlZDsnPuS4jeWPr+aBouWkjTwvc3BhPlwiO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHJlY29yZHNMaXN0WzBdID09IHVuZGVmaW5lZCkgeyAgICAgICAvLyAg5Y+q5bGe5LqO5aSa5Liq5LiT5qCP55qE5Y2V5ZOBXG5cbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGluZGV4ID0gMTsgaW5kZXggPD0gYXJyTGVuZ3RoOyBpbmRleCArKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgKz0gKFwi44CKXCIgKyByZWNvcmRzTGlzdFtpbmRleF1bJ3RpdGxlJ10gKyBcIuOAi1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gKFwi56Gu6K6k56e76Zmk6K+l5YaF5a6577yM56e76Zmk5ZCO6K+l5Lya5ZGY55So5oi35bCG5peg5rOV5p+l55yL5q2k5YaF5a6544CC5q2k5YaF5a655LuN5a2Y5Zyo5LqOXCIgKyB0ZXh0ICsgXCLkuK1cIik7XG5cbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChhcnJMZW5ndGggPT0gMSkgeyAgICAgICAgICAgICAgLy8gIOWNleWTgeWNleWNluS4lOWxnuS6juS4gOS4quS4k+agj1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBcIuehruiupOenu+mZpOivpeWGheWuue+8jOenu+mZpOWQjuivpeS8muWRmOeUqOaIt+WwhuaXoOazleafpeeci+atpOWGheWuueOAguatpOWGheWuueS7jeWcqOWNleWTgeWIl+ihqOS4lOWNleeLrOWUruWNllwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAg5Y2V5ZOB5Y2V5Y2W5LiU5bGe5LqO5aSa5Liq5LiT5qCPXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpbmRleCA9IDE7IGluZGV4IDwgYXJyTGVuZ3RoOyBpbmRleCArKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ICs9IChcIuOAilwiICsgcmVjb3Jkc0xpc3RbaW5kZXhdWyd0aXRsZSddICsgXCLjgItcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gXCLnoa7orqTnp7vpmaTor6XlhoXlrrnvvIznp7vpmaTlkI7or6XkvJrlkZjnlKjmiLflsIbml6Dms5Xmn6XnnIvmraTlhoXlrrnjgILmraTlhoXlrrnljZXni6zllK7ljZbkuJTku43lrZjlnKjkuo5cIiArIHRleHQgKyBcIuS4rVwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQodGV4dCwgXCJpbmZvXCIsIHsgLy8gMiAtPiDkvZzlh7rnm7jlupTnmoTmj5DnpLpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+ehruiupOenu+mZpCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5kZWxldGVTaW5nbGVSZXNvdXJjZShyZXNvdXJjZV9pZCwgcmVzb3VyY2VfdHlwZSwgcGFja2FnZV9pZCk7IC8vIDMgLT4g56e76ZmkXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pON5L2c5aSx6LSl77yBXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlvIDlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIC8vICDmn6Xor6LkuJPmoI8g5piv5ZCm5Zyo5YW25a6D5Lya5ZGY5YiX6KGoXG4gICAgdXRpbHMucXVlcnlQYWNrYWdlUmVzb3VyY2UgPSBmdW5jdGlvbiAocmVzb3VyY2VfaWQpIHtcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgJC5hamF4KFwiL3F1ZXJ5X2dvb2RzX3N0YXRlXCIsIHsgLy8gIDEgLT4g5p+l6K+i5LiT5qCPIOaYr+WQpuWcqOWFtuWug+S8muWRmOWIl+ihqFxuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZ29vZHNfaWQ6IHJlc291cmNlX2lkLFxuICAgICAgICAgICAgICAgIGdvb2RzX3R5cGU6IDYsXG4gICAgICAgICAgICAgICAgY2hhbm5lbF90eXBlOiAyLCAvLyAgY2hhbm5lbF90eXBlICggMC3ljZXlk4EsMS3kuJPmoI/lhoXotYTmupAsMi3kvJrlkZjlhoUgKVxuICAgICAgICAgICAgICAgIHBhY2thZ2VfaWQ6IEJ1c2luZXNzLm1lbWJlcl9pZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGlzRXhpc3QgPSByZXN1bHQuZGF0YVsnaXNfZXhpc3QnXSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlY29yZHNMaXN0ID0gcmVzdWx0LmRhdGFbJ3JlY29yZHNfbGlzdCddLFxuICAgICAgICAgICAgICAgICAgICAgICAgYXJyTGVuZ3RoID0gT2JqZWN0LmtleXMocmVjb3Jkc0xpc3QpLmxlbmd0aCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBcIlwiO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0V4aXN0ID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSBcIuehruiupOenu+mZpOivpeS4k+agj++8jOenu+mZpOWQjuivpeS8muWRmOeUqOaIt+WwhuaXoOazleafpeeci+atpOS4k+agj++8jOatpOS4k+agj+S7jeWcqOS4k+agj+WIl+ihqOS4lOWNleeLrOWUruWNllwiO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAxOyBpbmRleCA8PSBhcnJMZW5ndGg7IGluZGV4ICsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGV4dCArPSAoXCLjgIpcIiArIHJlY29yZHNMaXN0W2luZGV4XVsndGl0bGUnXSArIFwi44CLXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQgPSAoXCLnoa7orqTnp7vpmaTor6XkuJPmoI/vvIznp7vpmaTlkI7or6XkvJrlkZjnlKjmiLflsIbml6Dms5Xmn6XnnIvmraTkuJPmoI/vvIzmraTkuJPmoI/ku43lrZjlnKjkuo5cIiArIHRleHQgKyBcIuS4rVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQodGV4dCwgXCJpbmZvXCIsIHsgLy8gMiAtPiDkvZzlh7rnm7jlupTnmoTmj5DnpLpcbiAgICAgICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+ehruiupOenu+mZpCcsXG4gICAgICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGlscy5kZWxldGVTaW5nbGVSZXNvdXJjZShyZXNvdXJjZV9pZCwgNiwgQnVzaW5lc3MubWVtYmVyX2lkKTsgLy8gMyAtPiDnp7vpmaTkuJPmoI9cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIFcIik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdC5tc2cpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlvIDlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICB9O1xuICAgIHV0aWxzLnBhY2thZ2VGb3JtID0gZnVuY3Rpb24oaWQsZm9ybVR5cGUpe1xuICAgICAgICAvLyBpZDrkuJPmoI/mmK/lkKbopoHorr7nva7mlK/ku5jml7bloavlhpnkv6Hmga/nmoTkuJPmoI9pZO+8jGZvcm1UeXBlIO+8mnRydWUt5YWB6K64IGZhbHNlLeemgeatoi5cbiAgICAgICAgdmFyIHZlcnNpb249JChcIi51c2VyX3ZlcnNpb25fbnVtXCIpLmRhdGEoXCJ2ZXJzaW9uX3R5cGVcIik7XG4gICAgICAgIGlmKHZlcnNpb24gJiYgdmVyc2lvbj09Mykge1xuICAgICAgICAgICAgJC5hbGVydChmb3JtVHlwZSA/IFwi5byA5ZCv6LWE5paZ5aGr5YaZ5ZCO77yM55So5oi35Zyo5LuY6LS56LSt5Lmw5pys5Lya5ZGY5YmN5bCG5aGr5YaZ5Liq5Lq65L+h5oGv77yM5oKo56Gu6K6k6KaB5byA5ZCv5LmI77yfXCIgOlxuICAgICAgICAgICAgICAgIFwi5YWz6Zet6LWE5paZ5aGr5YaZ5ZCO77yM55So5oi35Zyo5LuY6LS56LSt5Lmw5pys5Lya5ZGY5YmN5bCG5LiN5YaN5aGr5YaZ5Liq5Lq65L+h5oGv77yM5oKo56Gu6K6k6KaB5YWz6Zet5LmI77yfXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgaWNvbjogXCJibHVlXCIsXG4gICAgICAgICAgICAgICAgb25PazogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoJy9zZXRfaXNfY29tcGxldGVfaW5mbycsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGlkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzX2NvbXBsZXRlX2luZm86IGZvcm1UeXBlXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsb2FkUGFnZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCAyMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLlvZPliY3niYjmnKzkuI3mlK/mjIHlvIDlkK/otYTmlpnloavlhpnvvIzlpoLpnIDlvIDlkK/or7fljYfnuqfoh7PkuJPkuJrniYhcIik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDnp7vpmaTljZXlk4HotYTmupBcbiAgICAgKiBAcGFyYW0gcmVzb3VyY2VJZFxuICAgICAqIEBwYXJhbSByZXNvdXJjZVR5cGVcbiAgICAgKiBAcGFyYW0gbWVtYmVySWRcbiAgICAgKi9cbiAgICB1dGlscy5kZWxldGVTaW5nbGVSZXNvdXJjZSA9IGZ1bmN0aW9uKHJlc291cmNlSWQsIHJlc291cmNlVHlwZSwgbWVtYmVySWQpIHtcbiAgICAgICAgLy8gJChcIi5sb2FkaW5nU1wiKS5mYWRlSW4oMzAwKTtcbiAgICAgICAgJC5hamF4KFwiL21vdmVfZ29vZHNcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgZ29vZHNfaWQ6IHJlc291cmNlSWQsXG4gICAgICAgICAgICAgICAgZ29vZHNfdHlwZTogcmVzb3VyY2VUeXBlLFxuICAgICAgICAgICAgICAgIGNoYW5uZWxfdHlwZTogMiwgLy8gIGNoYW5uZWxfdHlwZSgwLeWNleWTgSwxLeS4k+agj+WGhei1hOa6kCwyLeS8muWRmOWGhSlcbiAgICAgICAgICAgICAgICBwYWNrYWdlX2lkOiBtZW1iZXJJZFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCkge1xuICAgICAgICAgICAgICAgICQoXCIubG9hZGluZ1NcIikuZmFkZU91dCgzMDApO1xuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLnp7vpmaTmiJDlip/vvIFcIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi56e76Zmk5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAocmVzb3VyY2VUeXBlID09IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgbW9kYWwuaW5pdFBhY2thZ2VMaXN0T2ZNZW1iZXIoKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtb2RhbC5pbml0UmVzb3VyY2VMaXN0T2ZNZW1iZXIoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMzAwKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacjeWKoeWZqOW8gOWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog6K6+572u6K+V5ZCsIOaIliDor5XnnItcbiAgICAgKiBAcGFyYW0gcGFja2FnZUlkXG4gICAgICogQHBhcmFtIHJlc0lkXG4gICAgICogQHBhcmFtIHRyeVN0YXRlICAoMC3lj5bmtojor5XlkKwsMS3orr7kuLror5XlkKwpXG4gICAgICovXG4gICAgdXRpbHMuc2V0UmVzb3VyY2VUcnkgPSBmdW5jdGlvbihwYWNrYWdlSWQsIHJlc1R5cGUsIHJlc0lkLCBwYXltZW50VHlwZSwgdHJ5U3RhdGUpIHtcblxuICAgICAgICAvLyBpZiAocmVzVHlwZSA9PSA0KSB7XG4gICAgICAgIC8vICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmmoLkuI3mlK/mjIHlsIbnm7Tmkq3orr7kuLror5XnnIshXCIpO1xuICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyB9XG4gICAgICAgIGlmIChwYXltZW50VHlwZSA9PSAxIHx8IHBheW1lbnRUeXBlID09IDIpIHtcbiAgICAgICAgICAgIGlmIChyZXNUeXBlID09IDIpIHtcbiAgICAgICAgICAgICAgICAkLmFsZXJ0KFwi6K+l5Y2V5ZOB5bey6K6+5Li65Y2V5Y2W77yM5Y+W5raI5Y2V5Y2W5ZCO5pa55Y+v6K6+5Li66K+V5ZCsXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGJ0bjogMixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzVHlwZSA9PSAxIHx8IHJlc1R5cGUgPT0gMyB8fCByZXNUeXBlID09IDQpIHtcbiAgICAgICAgICAgICAgICAkLmFsZXJ0KFwi6K+l5Y2V5ZOB5bey6K6+5Li65Y2V5Y2W77yM5Y+W5raI5Y2V5Y2W5ZCO5pa55Y+v6K6+5Li66K+V55yLXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgICAgIGJ0bjogMixcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICQuYWpheCgnL3NldF9wYWNrYWdlX3Jlc291cmNlX3RyeScsIHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgcGFja2FnZV9pZDogcGFja2FnZUlkLFxuICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGU6IHJlc1R5cGUsXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VfaWQ6IHJlc0lkLFxuICAgICAgICAgICAgICAgIHRyeV9zdGF0ZTogdHJ5U3RhdGVcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRyeVN0YXRlID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLorr7nva7miJDlip/vvIFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5Y+W5raI5oiQ5Yqf77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG1vZGFsLmluaXRSZXNvdXJjZUxpc3RPZk1lbWJlcigpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaTjeS9nOWksei0pe+8gVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+aTjeS9nOWksei0pe+8jOivt+eojeWQjuWGjeivlScpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICAvL+WvvOWHuumfs+mikVxuICAgIHV0aWxzLmV4cG9ydEF1ZGlvID0gZnVuY3Rpb24gKGFsaXZlSWQpIHtcblxuICAgICAgICAkLmFqYXgoXCIvYXN5bmNfZG93bmxvYWRfYWxpdmVfdm9pY2VcIiwge1xuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXG4gICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgYWxpdmVfaWQ6IGFsaXZlSWRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChyZXN1bHQuY29kZSkge1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDA6XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHJlc3VsdC5kYXRhWyd1cmwnXTsgICAgICAvL+ebtOaOpeW8gOWni+S4i+i9vemfs+mikeaWh+S7tlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLor63pn7PmraPlnKjlkIjmiJDkuK3vvIzmoLnmja7mgqjnm7Tmkq3pl7TlhoXnmoTpn7PpopHmlbDph4/pnIDopoExMOWIhumSn+WIsDTkuKrlsI/ml7bkuI3nrYnvvIzor7fnqI3lgJnorr/pl67jgIJcIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFsZXJ0KFwi5byA5aeL6L+b6KGM6K+t6Z+z5ZCI5oiQ77yM5qC55o2u5oKo55u05pKt6Ze05YaF55qE6Z+z6aKR5pWw6YeP6ZyA6KaBMTDliIbpkp/liLA05Liq5bCP5pe25LiN562J77yM6K+356iN5YCZ6K6/6Zeu44CCXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAzOlxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIuacjeWKoeWZqOato+WcqOe7tOaKpO+8jOebtOaSremfs+mikeWvvOWHuuWKn+iDveWPl+WIsOW9seWTje+8jOivt+eojeWQjuWGjeivleOAglwiLCBcImluZm9cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLor6Xnm7Tmkq3msqHmnInpn7PpopHjgIJcIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDU6XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFsZXJ0KFwi6L+Z5Liq55u05pKt5LiN5piv6K+t6Z+z57G75Z6L55qE77yM5LiN5pSv5oyB6Z+z6aKR5a+85Ye644CCXCIsIFwiaW5mb1wiLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSA2OlxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIui/meS4quebtOaSrei/mOayoee7k+adn++8jOaaguS4jeaUr+aMgemfs+mikeWvvOWHuuOAglwiLCBcImluZm9cIiwge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMixcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWPguaVsOmUmeivr1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChyZXN1bHQubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQubXNnKTtcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgdXRpbHMuc2V0U2luZ2xlU2FsZSA9IGZ1bmN0aW9uKHJlc1R5cGUsIHJlc0lkLCByZXNUaXRsZSwgaXNUcnksIHNob3dUaW1lLCByZXNJbWdVcmwpIHtcblxuICAgICAgICBpZiAoaXNUcnkgPT0gMSkgeyAvL+aYr1xuICAgICAgICAgICAgaWYgKHJlc1R5cGUgPT0gMikge1xuICAgICAgICAgICAgICAgICQuYWxlcnQoXCLor6XljZXlk4Hlt7Lorr7kuLror5XlkKzvvIzlj5bmtojor5XlkKzlkI7mlrnlj6/orr7kuLrljZXljZZcIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChyZXNUeXBlID09IDEgfHwgcmVzVHlwZSA9PSAzIHx8IHJlc1R5cGUgPT0gNCkge1xuICAgICAgICAgICAgICAgICQuYWxlcnQoXCLor6XljZXlk4Hlt7Lorr7kuLror5XnnIvvvIzlj5bmtojor5XnnIvlkI7mlrnlj6/orr7kuLrljZXljZZcIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbW9kYWwuaW5pdFNldFNpbmdsZVNhbGVXaW5kb3cocmVzSW1nVXJsLCByZXNUaXRsZSwgcmVzVHlwZSwgc2hvd1RpbWUsIHJlc0lkKTtcbiAgICAgICAgICAgICQoXCIuc2V0X3ByaWNlX3dpbmRvd1wiKS5mYWRlSW4oMzAwKTtcbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHV0aWxzLmNhbmNlbFNpbmdsZVNhbGUgPSBmdW5jdGlvbihyZXNUeXBlLCByZXNJZCwgcGF5bWVudFR5cGUpIHtcblxuICAgICAgICBpZiAocGF5bWVudFR5cGUgPT0gMSkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSBcIuWPlua2iOWNleWNluWQju+8jOacquW8gOmAmuS8muWRmOeahOeUqOaIt+WwhuS4jeWPr+WNleeLrOafpeeci+ivpeWNleWTgSFcIjtcbiAgICAgICAgfSBlbHNlIGlmIChwYXltZW50VHlwZSA9PSAyKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9IFwi5Y+W5raI5Y2V5Y2W5ZCO77yM5pyq5byA6YCa5Lya5ZGY55qE55So5oi35bCG5LiN5Y+v5Y2V54us5LuY6LS56LSt5Lmw6K+l5Y2V5ZOBIVwiO1xuICAgICAgICB9XG4gICAgICAgICQuYWxlcnQodGV4dCwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgdmFyIGFyciA9IHt9O1xuICAgICAgICAgICAgICAgIGFycltcInJlc291cmNlX2lkXCJdID0gcmVzSWQ7XG4gICAgICAgICAgICAgICAgYXJyW1wicmVzb3VyY2VfdHlwZVwiXSA9IHJlc1R5cGU7XG4gICAgICAgICAgICAgICAgdmFyIHJlc291cmNlTGlzdEFyciA9IFthcnJdO1xuXG4gICAgICAgICAgICAgICAgJC5hamF4KFwiL3N1Ym1pdF9jaG9pY2VfcmVzb3VyY2VcIiwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgXCJjaGFubmVsX3R5cGVcIjogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgIFwicmVzb3VyY2VfbGlzdFwiOiByZXNvdXJjZUxpc3RBcnIsXG4gICAgICAgICAgICAgICAgICAgICAgICBcInN1Ym1pdF90eXBlXCI6IDFcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5Y+W5raI5Y2V5Y2W5oiQ5Yqf77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vZGFsLmluaXRSZXNvdXJjZUxpc3RPZk1lbWJlcigpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5UhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlvIDlsI/lt67llabvvIzor7fnqI3lkI7lho3mkJzntKLvvIFcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICB1dGlscy5jaGFuZ2VDYW5TZWxlY3RTdGF0ZSA9IGZ1bmN0aW9uIChyZXNJZCwgY2FuU2VsZWN0KSB7XG5cbiAgICAgICAgJC5hamF4KFwiL3NldF9yZXNvdXJjZV9zZWxlY3RfY2FuXCIsIHtcbiAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxuICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgIGlkOiByZXNJZCxcbiAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiAxLFxuICAgICAgICAgICAgICAgIGNhbl9zZWxlY3Q6IGNhblNlbGVjdCA/IDEgOiAwLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoY2FuU2VsZWN0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5bey57uP5YWB6K645aSN5Yi2XCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuW3sue7j+emgeatouWkjeWItlwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XG5cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5VcIik7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgIH07XG5cbiAgICB1dGlscy5pbml0TGlzdFBhZ2luYXRpb24gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgJCgnLmxpc3QtcGFnZSAucGFnaW5hdGlvbiBsaSBhJykuZWFjaChmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciAkZWxlID0gJCh0aGlzKTtcbiAgICAgICAgICAgICRlbGUuYXR0cignZGF0YS11cmwnLCAkZWxlLmF0dHIoJ2hyZWYnKSk7XG4gICAgICAgICAgICAkZWxlLnJlbW92ZUF0dHIoJ2hyZWYnKTtcbiAgICAgICAgfSk7XG5cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICog5YiH5o2i6YCJ5oup5bey5pyJ56qX5Y+j5LitIHRhYiDnmoTmmL7npLpcbiAgICAgKiBAcGFyYW0gdGFyZ2V0KFN0cmluZykgICAgcGFja2FnZVRhYiAtIOWIh+aNouWIsOS4k+agj++8myBzaW5nbGVUYWIgLSDliIfmjaLliLDljZXlk4FcbiAgICAgKi9cbiAgICB1dGlscy5zd2l0Y2hXaW5kb3dUYWIgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG5cbiAgICAgICAgdmFyIHRhYlZhbHVlID0gJChcIi5zZWxlY3RHb29kVGFiV3JhcHBlcj5saS5hY3RpdmVDb250ZW50VGFiXCIpLnZhbCgpOyAvLyAgICAxLeWNleWTgSAgMC3kuJPmoI9cblxuICAgICAgICBpZiAoKHRhYlZhbHVlID09IDEgJiYgdGFyZ2V0ID09IFwic2luZ2xlVGFiXCIpIHx8ICh0YWJWYWx1ZSA9PSAwICYmIHRhcmdldCA9PSBcInBhY2thZ2VUYWJcIikpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGFyZ2V0ID09IFwic2luZ2xlVGFiXCIpIHtcbiAgICAgICAgICAgICQoXCIjc2VsZWN0R29vZFNpbmdsZVRhYlwiKS5hZGRDbGFzcyhcImFjdGl2ZUNvbnRlbnRUYWJcIik7XG4gICAgICAgICAgICAkKFwiI3NlbGVjdEdvb2RQYWNrYWdlVGFiXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlQ29udGVudFRhYlwiKTtcblxuICAgICAgICAgICAgbW9kYWwudGFiU3RhdGUgPSBcInNpbmdsZUxpc3RcIjtcbiAgICAgICAgICAgIG1vZGFsLnJlc1R5cGUgPSAwO1xuXG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0ID09IFwicGFja2FnZVRhYlwiKSB7XG4gICAgICAgICAgICAkKFwiI3NlbGVjdEdvb2RQYWNrYWdlVGFiXCIpLmFkZENsYXNzKFwiYWN0aXZlQ29udGVudFRhYlwiKTtcbiAgICAgICAgICAgICQoXCIjc2VsZWN0R29vZFNpbmdsZVRhYlwiKS5yZW1vdmVDbGFzcyhcImFjdGl2ZUNvbnRlbnRUYWJcIik7XG5cbiAgICAgICAgICAgIG1vZGFsLnRhYlN0YXRlID0gXCJwYWNrYWdlTGlzdFwiO1xuICAgICAgICAgICAgbW9kYWwucmVzVHlwZSA9IDY7XG5cbiAgICAgICAgfVxuXG4gICAgfTtcblxuICAgIHJldHVybiB1dGlscztcblxufSkoKTtcbiJdfQ==
