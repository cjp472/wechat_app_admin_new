$(document).ready(function(){$chosenShop.init()});$chosenShop={tabState:"goods",init:function(){$("._switchOperateArea").on("click","._functionSwitch",function(e){var t=$(e.delegateTarget).data("switch_state");if(t){baseUtils.show.redTip("开关已开启，暂不支持关闭");return false}$chosenShop.showOpenChosenTip()});$("#_contentTabWrapper").on("click","li",function(){var e=$(this).val();if(e==1){history.replaceState(null,"","/chosen/homepage?page_type=goods");$chosenShop.getNewPage("goods");$chosenShop.tabState="goods"}else{history.replaceState(null,"","/chosen/homepage?page_type=record");$chosenShop.getNewPage("record");$chosenShop.tabState="record";$recordList.search=""}});$("#_mainContentPart").on("click"," .pagination li a",function(e){var t=$(e.target),o=t.data("url");$chosenShop.getNewPage($chosenShop.tabState,{},o)})},upDatePaging:function(e){var e=e||".list-page";$(e+" .pagination li a").each(function(){var e=$(this);e.attr("data-url",e.attr("href"));e.removeAttr("href")})},getNewPage:function(e,t,o){var t=t||{};var o=o||"";if(!o){if(e=="goods"){o="/chosen/get_goods_list"}else if(e=="record"){o="/chosen/get_record_list"}else{console.log("参数错误.");return false}}else{var a=o,s=/(\/chosen\/.*)\?/,n=/(\?|&)(.+?)=/g,c=/=([^&]*)(&|$)/g;o=a.match(s)[1];var i=a.match(n),r=a.match(c);var h=i.length;for(var l=0;l<h;l++){var d=i[l];var g=r[l];g=decodeURI(g.slice(1,g.length));if(g[g.length-1]==="&"){t[d.slice(1,d.length-1)]=g.slice(0,g.length-1)}else{t[d.slice(1,d.length-1)]=g}}}baseUtils.showLoading("mainContentLoading");$.ajax(o,{type:"POST",dataType:"html",data:t,success:function(t){baseUtils.hideLoading("mainContentLoading");if(t.length>0){$("#_mainContentPart").html(t);$chosenShop.switchContentTab(e);if(e!=="goods"){$chosenShop.upDatePaging()}else{$goodsList.goodsCount=$("#addDistributeGoods").data("count")}if(e==="record"){$("#search_content").val($recordList.search)}}else{baseUtils.show.redTip("没有数据，请稍后再试")}},error:function(e,t,o){baseUtils.hideLoading("mainContentLoading");console.log(o);alert("服务器出小差了，请稍后再试！")}})},showOpenChosenTip:function(){$.alert("您第一次使用小鹅通精选服务，是否打开推广开关，并开启小鹅通精选服务（开启后暂不支持关闭）","info",{oktext:"立即开启",onOk:function(){$.ajax("/chosen/chosen_enable",{type:"POST",dataType:"json",data:{is_enable_chosen:1},success:function(e){if(e.code==0){baseUtils.show.blueTip("开启成功");$chosenShop.changeSwitchState()}else{alert("服务器出小差了，请稍后再试！")}},error:function(e,t,o){console.log(o);alert("服务器出小差了，请稍后再试！")}})}})},switchContentTab:function(e){if(e=="goods"){$("#_goodsListTab").addClass("_activeTab");$("#_recordListTab").removeClass("_activeTab")}else if(e=="record"){$("#_recordListTab").addClass("_activeTab");$("#_goodsListTab").removeClass("_activeTab")}},changeSwitchState:function(){var e=$("._switchOperateArea ._functionSwitch"),t=!$("._switchOperateArea").data("switch_state");if(t){e.css({"background-color":"#2FCE6F"});e.children("._switchDescText").css({left:"9px"});e.children("._switchDescText").text("开启");e.children("._switchButtonIcon").css({left:"40px"})}else{e.css({"background-color":"#c2c2c2"});e.children("._switchDescText").css({left:"44px"});e.children("._switchDescText").text("关闭");e.children("._switchButtonIcon").css({left:"0px"})}$("._switchOperateArea").data("switch_state",t)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2Nob3Nlbi9ob21lcGFnZS5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIiRjaG9zZW5TaG9wIiwiaW5pdCIsInRhYlN0YXRlIiwib24iLCJlIiwic3dpdGNoU3RhdGUiLCJkZWxlZ2F0ZVRhcmdldCIsImRhdGEiLCJiYXNlVXRpbHMiLCJzaG93IiwicmVkVGlwIiwic2hvd09wZW5DaG9zZW5UaXAiLCJzdGF0ZSIsInRoaXMiLCJ2YWwiLCJoaXN0b3J5IiwicmVwbGFjZVN0YXRlIiwiZ2V0TmV3UGFnZSIsIiRyZWNvcmRMaXN0Iiwic2VhcmNoIiwiZWwiLCJ0YXJnZXQiLCJ1cmwiLCJ1cERhdGVQYWdpbmciLCJwYWdpbmdDbGFzcyIsImVhY2giLCJhdHRyIiwicmVtb3ZlQXR0ciIsInRhcmdldFRhYiIsInBhcmFtcyIsInBvc3RVcmwiLCJjb25zb2xlIiwibG9nIiwicG9ydHVybF9wYXR0ZXJuIiwicGFyYW1fcGF0dGVybiIsInBhcmFtX3ZhbHVlX3BhdHRlcm4iLCJtYXRjaCIsInBhcmFtX2FyciIsInBhcmFtX3ZhbHVlX2FyciIsImxlbiIsImxlbmd0aCIsImkiLCJwYXJhbSIsInBhcmFtX3ZhbHVlIiwiZGVjb2RlVVJJIiwic2xpY2UiLCJzaG93TG9hZGluZyIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwicmVzdWx0IiwiaGlkZUxvYWRpbmciLCJodG1sIiwic3dpdGNoQ29udGVudFRhYiIsIiRnb29kc0xpc3QiLCJnb29kc0NvdW50IiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJhbGVydCIsIm9rdGV4dCIsIm9uT2siLCJpc19lbmFibGVfY2hvc2VuIiwiY29kZSIsImJsdWVUaXAiLCJjaGFuZ2VTd2l0Y2hTdGF0ZSIsInRhcmdldFN0YXRlIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsIiR0YXJnZXQiLCJjc3MiLCJiYWNrZ3JvdW5kLWNvbG9yIiwiY2hpbGRyZW4iLCJsZWZ0IiwidGV4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OUUsRUFBRSx1QkFBdUJVLEtBQUssZUFBZ0JLIiwiZmlsZSI6ImFkbWluL2Nob3Nlbi9ob21lcGFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgJGNob3NlblNob3AuaW5pdCgpO1xyXG59KTtcclxuXHJcbiRjaG9zZW5TaG9wID0ge1xyXG5cclxuICAgIHRhYlN0YXRlOiBcImdvb2RzXCIsICAgLy9cImdvb2RzXCIsIFwicmVjb3JkXCJcclxuXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy8g5byA5YWzXHJcbiAgICAgICAgJChcIi5fc3dpdGNoT3BlcmF0ZUFyZWFcIikub24oXCJjbGlja1wiLCBcIi5fZnVuY3Rpb25Td2l0Y2hcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyIHN3aXRjaFN0YXRlID0gJChlLmRlbGVnYXRlVGFyZ2V0KS5kYXRhKFwic3dpdGNoX3N0YXRlXCIpOy8v5b2T5YmN54q25oCBXHJcblxyXG4gICAgICAgICAgICBpZiAoc3dpdGNoU3RhdGUpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuW8gOWFs+W3suW8gOWQr++8jOaaguS4jeaUr+aMgeWFs+mXrVwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkY2hvc2VuU2hvcC5zaG93T3BlbkNob3NlblRpcCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vdGFi5YiH5o2iXHJcbiAgICAgICAgJChcIiNfY29udGVudFRhYldyYXBwZXJcIikub24oXCJjbGlja1wiLCBcImxpXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHN0YXRlID0gJCh0aGlzKS52YWwoKTtcclxuICAgICAgICAgICAgaWYgKHN0YXRlID09IDEpIHtcclxuICAgICAgICAgICAgICAgIGhpc3RvcnkucmVwbGFjZVN0YXRlKG51bGwsIFwiXCIsIFwiL2Nob3Nlbi9ob21lcGFnZT9wYWdlX3R5cGU9Z29vZHNcIik7XHJcbiAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC5nZXROZXdQYWdlKFwiZ29vZHNcIik7XHJcbiAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC50YWJTdGF0ZSA9ICdnb29kcyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBcIlwiLCBcIi9jaG9zZW4vaG9tZXBhZ2U/cGFnZV90eXBlPXJlY29yZFwiKTtcclxuICAgICAgICAgICAgICAgICRjaG9zZW5TaG9wLmdldE5ld1BhZ2UoXCJyZWNvcmRcIik7XHJcbiAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC50YWJTdGF0ZSA9ICdyZWNvcmQnO1xyXG4gICAgICAgICAgICAgICAgJHJlY29yZExpc3Quc2VhcmNoID0gJyc7IC8vIOa4heepuuaQnOe0ouWbnuWhq+aVsOWAvFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIOWIhumhteivt+axglxyXG4gICAgICAgICQoXCIjX21haW5Db250ZW50UGFydFwiKS5vbihcImNsaWNrXCIsXCIgLnBhZ2luYXRpb24gbGkgYVwiLCBmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgdmFyIGVsID0gJChlLnRhcmdldCksXHJcbiAgICAgICAgICAgICAgICB1cmwgPSBlbC5kYXRhKCd1cmwnKTtcclxuICAgICAgICAgICAgJGNob3NlblNob3AuZ2V0TmV3UGFnZSgkY2hvc2VuU2hvcC50YWJTdGF0ZSwge30sIHVybCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgfSxcclxuICAgIC8qIOabtOaWsOWIhumhteeahOWIneWni+eKtuaAgVxyXG4gICAgICog5Y+C5pWw6K+05piO77yaXHJcbiAgICAgKiAgcGFnaW5nQ2xhc3Mg5YiG6aG15aSW5bGC55qEZGl2XHJcbiAgICAgKi9cclxuICAgIHVwRGF0ZVBhZ2luZzogZnVuY3Rpb24ocGFnaW5nQ2xhc3Mpe1xyXG4gICAgICAgIHZhciBwYWdpbmdDbGFzcyA9IHBhZ2luZ0NsYXNzIHx8ICcubGlzdC1wYWdlJztcclxuICAgICAgICAkKHBhZ2luZ0NsYXNzICsgJyAucGFnaW5hdGlvbiBsaSBhJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgIHZhciBlbCA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgZWwuYXR0cignZGF0YS11cmwnLCBlbC5hdHRyKCdocmVmJykpO1xyXG4gICAgICAgICAgIGVsLnJlbW92ZUF0dHIoJ2hyZWYnKTtcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcblxyXG4gICAgLyog5pu05paw6aG16Z2i5pWw5o2uXHJcbiAgICAgKiDlj4LmlbDor7TmmI7vvJpcclxuICAgICAqICB0YXJnZXRUYWIgOiDopoHliqDovb3nmoTnm67moIfpobVcclxuICAgICAqICBwYXJhbXMgOiDlj4LmlbDlr7nosaFcclxuICAgICAqICBwb3N0VXJsIDog6YCa6L+HYeagh+etvuiOt+W+l+eahOmTvuaOpe+8muWmgu+8mmh0dHA6Ly9sb2NhbGhvc3QvY2hvc2VuL2dldF9yZWNvcmRfbGlzdD9zZWFyY2g9JnBhZ2U9M1xyXG4gICAgICogIOazqOaEj++8mnBhcmFtcyDlkowgcG9zdFVybCDkuozpgInkuIDvvIzosIPnlKjmlrnlvI/liIbliKvlpoLkuIvvvJpcclxuICAgICAqICAgICAgJGNob3NlblNob3AuZ2V0TmV3UGFnZSh0YXJnZXRUYWIse30sdXJsKTsgLy8g5Y+q5Lyg6YCSdGFyZ2V0VGFi5ZKMdXJs77yM55So5LqO5YiG6aG1XHJcbiAgICAgKiAgICAgICRjaG9zZW5TaG9wLmdldE5ld1BhZ2UodGFyZ2V0VGFiLHBhcmFtcyk7IC8vIOWPquS8oOmAknRhcmdldFRhYuWSjHBhcmFt77yM55So5LqO5pCc57SiXHJcbiAgICAgKi9cclxuICAgIGdldE5ld1BhZ2U6IGZ1bmN0aW9uICh0YXJnZXRUYWIsIHBhcmFtcywgcG9zdFVybCkgeyAgLy9cImdvb2RzXCIsIFwicmVjb3JkXCJcclxuICAgICAgICB2YXIgcGFyYW1zID0gcGFyYW1zIHx8IHt9O1xyXG4gICAgICAgIHZhciBwb3N0VXJsID0gcG9zdFVybCB8fCBcIlwiO1xyXG5cclxuICAgICAgICAvLyDliJ3lp4vljJbnirbmgIFcclxuICAgICAgICBpZighcG9zdFVybCl7XHJcbiAgICAgICAgICAgIGlmICh0YXJnZXRUYWIgPT0gXCJnb29kc1wiKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0VXJsID0gXCIvY2hvc2VuL2dldF9nb29kc19saXN0XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0VGFiID09IFwicmVjb3JkXCIpIHtcclxuICAgICAgICAgICAgICAgIHBvc3RVcmwgPSBcIi9jaG9zZW4vZ2V0X3JlY29yZF9saXN0XCI7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWPguaVsOmUmeivry5cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy8g6Kej5p6QdXJsXHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBwb3N0VXJsLFxyXG4gICAgICAgICAgICAgICAgcG9ydHVybF9wYXR0ZXJuID0gLyhcXC9jaG9zZW5cXC8uKilcXD8vLCAvLyDljLnphY3ot6/nlLFcclxuICAgICAgICAgICAgICAgIHBhcmFtX3BhdHRlcm4gPSAvKFxcP3wmKSguKz8pPS9nLCAvLyDljLnphY3lj4LmlbBcclxuICAgICAgICAgICAgICAgIHBhcmFtX3ZhbHVlX3BhdHRlcm4gPSAvPShbXiZdKikoJnwkKS9nOyAvLyDljLnphY3lj4LmlbDlgLxcclxuICAgICAgICAgICAgcG9zdFVybCA9IHVybC5tYXRjaChwb3J0dXJsX3BhdHRlcm4pWzFdO1xyXG4gICAgICAgICAgICB2YXIgcGFyYW1fYXJyID0gdXJsLm1hdGNoKHBhcmFtX3BhdHRlcm4pLFxyXG4gICAgICAgICAgICAgICAgcGFyYW1fdmFsdWVfYXJyID0gdXJsLm1hdGNoKHBhcmFtX3ZhbHVlX3BhdHRlcm4pO1xyXG4gICAgICAgICAgICB2YXIgbGVuID0gcGFyYW1fYXJyLmxlbmd0aDtcclxuICAgICAgICAgICAgLy8g57uE5ZCIcGFyYW1z5a+56LGhXHJcbiAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7IGkgPCBsZW47IGkrKyl7XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW0gPSBwYXJhbV9hcnJbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgcGFyYW1fdmFsdWUgPSBwYXJhbV92YWx1ZV9hcnJbaV07XHJcbiAgICAgICAgICAgICAgICBwYXJhbV92YWx1ZSA9IGRlY29kZVVSSShwYXJhbV92YWx1ZS5zbGljZSgxLHBhcmFtX3ZhbHVlLmxlbmd0aCkpO1xyXG4gICAgICAgICAgICAgICAgaWYocGFyYW1fdmFsdWVbcGFyYW1fdmFsdWUubGVuZ3RoIC0gMV0gPT09ICcmJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zW3BhcmFtLnNsaWNlKDEscGFyYW0ubGVuZ3RoIC0gMSldID0gcGFyYW1fdmFsdWUuc2xpY2UoMCxwYXJhbV92YWx1ZS5sZW5ndGgtMSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbcGFyYW0uc2xpY2UoMSxwYXJhbS5sZW5ndGggLSAxKV0gPSBwYXJhbV92YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3dMb2FkaW5nKFwibWFpbkNvbnRlbnRMb2FkaW5nXCIpO1xyXG4gICAgICAgICQuYWpheChwb3N0VXJsLCB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJodG1sXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHBhcmFtcyxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVMb2FkaW5nKFwibWFpbkNvbnRlbnRMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNfbWFpbkNvbnRlbnRQYXJ0XCIpLmh0bWwocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC5zd2l0Y2hDb250ZW50VGFiKHRhcmdldFRhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0VGFiICE9PSAnZ29vZHMnKXsgLy8g6Zmk5LqG5o6o5bm/5ZWG5ZOB77yM5YW25LuW55qE6YO95YiG6aG1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjaG9zZW5TaG9wLnVwRGF0ZVBhZ2luZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRnb29kc0xpc3QuZ29vZHNDb3VudCA9ICQoXCIjYWRkRGlzdHJpYnV0ZUdvb2RzXCIpLmRhdGEoXCJjb3VudFwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0VGFiID09PSAncmVjb3JkJyl7IC8vIOaOqOW5v+iuouWNleWbnuWhq1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcjc2VhcmNoX2NvbnRlbnQnKS52YWwoJHJlY29yZExpc3Quc2VhcmNoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5rKh5pyJ5pWw5o2u77yM6K+356iN5ZCO5YaN6K+VJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVMb2FkaW5nKFwibWFpbkNvbnRlbnRMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwi5pyN5Yqh5Zmo5Ye65bCP5beu5LqG77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgIH0pO1xyXG5cclxuICAgIH0sXHJcbiAgICAvL+W8ueeql+aPkOmGkuaYr+WQpuaJk+W8gOeyvumAie+8jFxyXG4gICAgc2hvd09wZW5DaG9zZW5UaXA6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkLmFsZXJ0KFwi5oKo56ys5LiA5qyh5L2/55So5bCP6bmF6YCa57K+6YCJ5pyN5Yqh77yM5piv5ZCm5omT5byA5o6o5bm/5byA5YWz77yM5bm25byA5ZCv5bCP6bmF6YCa57K+6YCJ5pyN5Yqh77yI5byA5ZCv5ZCO5pqC5LiN5pSv5oyB5YWz6Zet77yJXCIsIFwiaW5mb1wiLCB7XHJcbiAgICAgICAgICAgIG9rdGV4dDogXCLnq4vljbPlvIDlkK9cIixcclxuICAgICAgICAgICAgb25PazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJC5hamF4KFwiL2Nob3Nlbi9jaG9zZW5fZW5hYmxlXCIsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc19lbmFibGVfY2hvc2VuOiAxLC8vMC3lhbPpl63vvIwgMS3lvIDlkK9cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLlvIDlkK/miJDlip9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC5jaGFuZ2VTd2l0Y2hTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBzd2l0Y2hDb250ZW50VGFiOiBmdW5jdGlvbiAodGFyZ2V0U3RhdGUpIHsgIC8vXCJnb29kc1wiLCBcInJlY29yZFwiXHJcbiAgICAgICAgaWYgKHRhcmdldFN0YXRlID09IFwiZ29vZHNcIikge1xyXG4gICAgICAgICAgICAkKFwiI19nb29kc0xpc3RUYWJcIikuYWRkQ2xhc3MoXCJfYWN0aXZlVGFiXCIpO1xyXG4gICAgICAgICAgICAkKFwiI19yZWNvcmRMaXN0VGFiXCIpLnJlbW92ZUNsYXNzKFwiX2FjdGl2ZVRhYlwiKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHRhcmdldFN0YXRlID09IFwicmVjb3JkXCIpIHtcclxuICAgICAgICAgICAgJChcIiNfcmVjb3JkTGlzdFRhYlwiKS5hZGRDbGFzcyhcIl9hY3RpdmVUYWJcIik7XHJcbiAgICAgICAgICAgICQoXCIjX2dvb2RzTGlzdFRhYlwiKS5yZW1vdmVDbGFzcyhcIl9hY3RpdmVUYWJcIik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH0sXHJcbiAgICAvKipcclxuICAgICAqIOWIh+aNouaMiemSrueahOeKtuaAgVxyXG4gICAgICovXHJcbiAgICBjaGFuZ2VTd2l0Y2hTdGF0ZTogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB2YXIgJHRhcmdldCA9ICQoXCIuX3N3aXRjaE9wZXJhdGVBcmVhIC5fZnVuY3Rpb25Td2l0Y2hcIiksXHJcbiAgICAgICAgICAgIHN0YXRlID0gISQoXCIuX3N3aXRjaE9wZXJhdGVBcmVhXCIpLmRhdGEoXCJzd2l0Y2hfc3RhdGVcIik7XHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgICR0YXJnZXQuY3NzKHtcImJhY2tncm91bmQtY29sb3JcIjogXCIjMkZDRTZGXCJ9KTtcclxuICAgICAgICAgICAgJHRhcmdldC5jaGlsZHJlbihcIi5fc3dpdGNoRGVzY1RleHRcIikuY3NzKHtcImxlZnRcIjogXCI5cHhcIn0pO1xyXG4gICAgICAgICAgICAkdGFyZ2V0LmNoaWxkcmVuKFwiLl9zd2l0Y2hEZXNjVGV4dFwiKS50ZXh0KFwi5byA5ZCvXCIpO1xyXG4gICAgICAgICAgICAkdGFyZ2V0LmNoaWxkcmVuKFwiLl9zd2l0Y2hCdXR0b25JY29uXCIpLmNzcyh7XCJsZWZ0XCI6IFwiNDBweFwifSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgJHRhcmdldC5jc3Moe1wiYmFja2dyb3VuZC1jb2xvclwiOiBcIiNjMmMyYzJcIn0pO1xyXG4gICAgICAgICAgICAkdGFyZ2V0LmNoaWxkcmVuKFwiLl9zd2l0Y2hEZXNjVGV4dFwiKS5jc3Moe1wibGVmdFwiOiBcIjQ0cHhcIn0pO1xyXG4gICAgICAgICAgICAkdGFyZ2V0LmNoaWxkcmVuKFwiLl9zd2l0Y2hEZXNjVGV4dFwiKS50ZXh0KFwi5YWz6ZetXCIpO1xyXG4gICAgICAgICAgICAkdGFyZ2V0LmNoaWxkcmVuKFwiLl9zd2l0Y2hCdXR0b25JY29uXCIpLmNzcyh7XCJsZWZ0XCI6IFwiMHB4XCJ9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJChcIi5fc3dpdGNoT3BlcmF0ZUFyZWFcIikuZGF0YShcInN3aXRjaF9zdGF0ZVwiLCBzdGF0ZSk7XHJcblxyXG4gICAgfSxcclxuXHJcbn07XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl19
