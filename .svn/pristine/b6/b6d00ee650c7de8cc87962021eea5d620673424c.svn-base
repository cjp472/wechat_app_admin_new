$(document).ready(function(){$exeBookList.init()});$exeBookList=function(){var e={addUserType:0};var i={userListPageIndex:1,userListSearchContent:"",isSearchUserWindowLoading:false,isSearchUserWindowToBottom:false};e.init=function(){$(".operateList > li.operate").click(function(){var e=$(this),i=e.parents(".exerciseBookOperateArea"),a=e.data("type"),s=i.data("resource_id"),n=i.data("resource_type"),o=i.data("exercise_book_id");switch(a){case"role_manage":if(n==4){baseUtils.show.redTip("直播类型不支持人员管理操作");return false}baseUtils.showWindow("roleManageWindow");break;case"exercise_list":window.location.href="/exercise/exercise_list";break;case"edit_exercise_book":window.location.href="/exercise/edit_exercise_book?exercise_book_id="+o;break;default:console.log("参数错误");break}});$("#windowCloseIcon1").click(function(){baseUtils.hideWindow("roleManageWindow")});$("#windowHoverBox").on("click","li",function(){var i=$(this).data("type");if(i=="add_teacher"){e.addUserType=0}else if(i=="add_assistant"){e.addUserType=1}a()});$(".roleTypeRadioWrapper").on("click",".roleTypeRadio",function(e){var i=$(this),a=$(e.delegateTarget),s=$("#windowContent1").find(".circleRadio.radioActive"),n=false;s.each(function(){var e=$(this).data("role_type");if(e==0){n=true;return false}});if(n){baseUtils.show.redTip("一个作业本仅能设置1位老师，请先将已设置的老师改为助教");return false}a.find(".circleRadio").removeClass("radioActive");i.children(".circleRadio").addClass("radioActive")});$("#windowCloseIcon2").click(function(){baseUtils.hideWindow("searchUserWindow");baseUtils.showWindow("roleManageWindow")});$("#searchUserWindow").on("click","#windowSearchBtn",function(){i.userListPageIndex=1;i.userListSearchContent=$.trim($("#windowSearchInput").val());i.isSearchUserWindowToBottom=false;$("#searchUserWindow .windowContentWrapper2").scrollTop(0);s()});$("#windowSearchInput").on("keypress",function(e){if(e.keyCode==13){$("#windowSearchBtn").click()}});$("#searchUserWindow .windowContentWrapper2").scroll(function(e){var a=$("#windowContent2").height(),n=$(this).height(),o=$(this).scrollTop();if(o+n>=a-5&&!i.isSearchUserWindowLoading&&!i.isSearchUserWindowToBottom){s()}});$("#confirmSaveAddedUser").click(function(){var e=$(".selectSingleGuest:checked"),i={};e.each(function(){var e=$(this).parents(".singleGuestInfo2"),a=e.data("user_id"),s=e.data("wx_avatar"),n=e.data("wx_nickname");if(i.userId==undefined){i.userId={user_id:a,wx_avatar:s,wx_nickname:n}}})})};function a(){baseUtils.hideWindow("roleManageWindow");$("#searchUserWindow").find(".headerText1").text(e.addUserType==0?"添加老师":"添加助教");baseUtils.showWindow("searchUserWindow");i.isSearchUserWindowToBottom=false;i.userListPageIndex=1;i.userListSearchContent="";s()}function s(){baseUtils.showLoading("searchUserLoading");i.isSearchUserWindowLoading=true;$.ajax("/zbsearch",{type:"GET",dataType:"json",data:{page:i.userListPageIndex,search:i.userListSearchContent},success:function(e){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;var a=$("#windowContent2"),s="",n=e.page_offset;$.each(e.data,function(e,i){s+='<div class="singleGuestInfo2" data-user_id="'+i.user_id+'" data-wx_avatar="'+i.wx_avatar+'" data-wx_nickname="'+i.wx_nickname+'">'+'<input type="checkbox" class="selectSingleGuest" id="'+i.user_id+'">'+'<label for="'+i.user_id+'" class="singleGuestLabel">'+'<img src="'+i.wx_avatar+'" class="singleGuestAvatar2">'+'<div class="singleGuestName2" title="'+i.wx_nickname+'">'+i.wx_nickname+"</div>"+"</label>"+"</div>"});if(s.length==0){s='<div class="windowNoData" id="windowNoData">暂无数据</div>'}if(i.userListPageIndex==1){a.html(s);a.append('<div class="isDown">更多数据加载中</div>')}else{a.find(".isDown").before(s)}if(n.current_page>=n.total_pages){var o=0;if(n.total_count>10){a.find(".isDown").text("数据已加载完毕");o=3e3}else{o=0}setTimeout(function(){a.find(".isDown").hide()},o);i.isSearchUserWindowToBottom=true}i.userListPageIndex++},error:function(e,a,s){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;console.log(s);alert("服务器出小差了，请稍后再试！")}})}return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4ZXJjaXNlQm9va0xpc3QuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCIkZXhlQm9va0xpc3QiLCJpbml0IiwiYWRkVXNlclR5cGUiLCIkcHJpdmF0ZSIsInVzZXJMaXN0UGFnZUluZGV4IiwidXNlckxpc3RTZWFyY2hDb250ZW50IiwiaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZyIsImlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tIiwiY2xpY2siLCIkc2VsZiIsInRoaXMiLCIkcGFyZW50IiwicGFyZW50cyIsInR5cGUiLCJkYXRhIiwicmVzSWQiLCJyZXNUeXBlIiwiZXhlcmNpc2VCb29rSWQiLCJiYXNlVXRpbHMiLCJzaG93IiwicmVkVGlwIiwic2hvd1dpbmRvdyIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImNvbnNvbGUiLCJsb2ciLCJoaWRlV2luZG93Iiwib24iLCJvcGVuU2VhcmNoVXNlcldpbmRvdyIsImUiLCJkZWxlZ2F0ZVRhcmdldCIsImFjdGl2ZVJhZGlvQXJyIiwiZmluZCIsImhhc1NldFRlYWNoZXIiLCJlYWNoIiwicm9sZVR5cGUiLCJyZW1vdmVDbGFzcyIsImNoaWxkcmVuIiwiYWRkQ2xhc3MiLCJ0cmltIiwidmFsIiwic2Nyb2xsVG9wIiwiZ2V0QWxsVXNlckxpc3QiLCJrZXlDb2RlIiwic2Nyb2xsIiwiRGl2SGVpZ2h0IiwiaGVpZ2h0IiwiU2Nyb2xsSGVpZ2h0IiwiU2Nyb2xsVG9wIiwiY2hlY2tlZFVzZXIiLCJ1c2VyQXJyIiwidXNlcklkIiwid3hBdmF0YXIiLCJ3eE5pY2tuYW1lIiwidW5kZWZpbmVkIiwidXNlcl9pZCIsInd4X2F2YXRhciIsInd4X25pY2tuYW1lIiwidGV4dCIsInNob3dMb2FkaW5nIiwiYWpheCIsImRhdGFUeXBlIiwicGFnZSIsInNlYXJjaCIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJoaWRlTG9hZGluZyIsIiRhcmVhIiwiaHRtbFN0ciIsIm9mZnNldCIsInBhZ2Vfb2Zmc2V0IiwiayIsInYiLCJsZW5ndGgiLCJodG1sIiwiYXBwZW5kIiwiYmVmb3JlIiwiY3VycmVudF9wYWdlIiwidG90YWxfcGFnZXMiLCJ0aW1lUmFuZ2UiLCJ0b3RhbF9jb3VudCIsInNldFRpbWVvdXQiLCJoaWRlIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJhbGVydCJdLCJtYXBwaW5ncyI6IkFBSUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FDZEMsYUFBYUMsUUFHakJELGNBQWUsV0FDWCxHQUFJQSxJQUNBRSxZQUFhLEVBRWpCLElBQUlDLElBQ0FDLGtCQUFtQixFQUNuQkMsc0JBQXVCLEdBQ3ZCQywwQkFBMkIsTUFDM0JDLDJCQUE0QixNQUdoQ1AsR0FBYUMsS0FBTyxXQUdoQkosRUFBRSw2QkFBNkJXLE1BQU0sV0FDakMsR0FBSUMsR0FBUVosRUFBRWEsTUFDVkMsRUFBVUYsRUFBTUcsUUFBUSw0QkFDeEJDLEVBQU9KLEVBQU1LLEtBQUssUUFDbEJDLEVBQVFKLEVBQVFHLEtBQUssZUFDckJFLEVBQVVMLEVBQVFHLEtBQUssaUJBQ3ZCRyxFQUFpQk4sRUFBUUcsS0FBSyxtQkFFbEMsUUFBUUQsR0FDSixJQUFLLGNBQ0QsR0FBSUcsR0FBVyxFQUFHLENBQ2RFLFVBQVVDLEtBQUtDLE9BQU8sZ0JBQ3RCLE9BQU8sT0FFWEYsVUFBVUcsV0FBVyxtQkFDckIsTUFDSixLQUFLLGdCQUNEQyxPQUFPQyxTQUFTQyxLQUFPLHlCQUN2QixNQUNKLEtBQUsscUJBQ0RGLE9BQU9DLFNBQVNDLEtBQU8saURBQWlEUCxDQUN4RSxNQUNKLFNBQ0lRLFFBQVFDLElBQUksT0FDWixTQU1aN0IsR0FBRSxxQkFBcUJXLE1BQU0sV0FDekJVLFVBQVVTLFdBQVcscUJBR3pCOUIsR0FBRSxtQkFBbUIrQixHQUFHLFFBQVMsS0FBTSxXQUNuQyxHQUFJZixHQUFPaEIsRUFBRWEsTUFBTUksS0FBSyxPQUN4QixJQUFJRCxHQUFRLGNBQWUsQ0FDdkJiLEVBQWFFLFlBQWMsTUFDeEIsSUFBSVcsR0FBUSxnQkFBaUIsQ0FDaENi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ekIsd0NBQXdDZ0IsRUFBRWYsWUFBWSxLQUFLZSxFQUFFZixZQUFZLFNBQzdFLFdBQ0osVUFFUixJQUFJVyxFQUFRSyxRQUFVLEVBQUcsQ0FDckJMLEVBQ0kseURBRVIsR0FBSWxFLEVBQVNDLG1CQUFxQixFQUFHLENBQ2pDZ0UsRUFBTU8sS0FBS04sRUFDWEQsR0FBTVEsT0FBTyx5Q0FDVixDQUNIUixFQUFNbkMsS0FBSyxXQUFXNEMsT0FBT1IsR0FFakMsR0FBSUMsRUFBT1EsY0FBZ0JSLEVBQU9TLFlBQWEsQ0FDM0MsR0FBSUMsR0FBWSxDQUNoQixJQUFJVixFQUFPVyxZQUFjLEdBQUksQ0FDekJiLEVBQU1uQyxLQUFLLFdBQVcwQixLQUFLLFVBQzNCcUIsR0FBWSxRQUNULENBQ0hBLEVBQVksRUFFaEJFLFdBQVcsV0FDUGQsRUFBTW5DLEtBQUssV0FBV2tELFFBQ3ZCSCxFQUNIN0UsR0FBU0ksMkJBQTZCLEtBRTFDSixFQUFTQyxxQkFHYmdGLE1BQU8sU0FBVUMsRUFBS0MsRUFBUUMsR0FDMUJyRSxVQUFVaUQsWUFBWSxvQkFDdEJoRSxHQUFTRywwQkFBNEIsS0FDckNtQixTQUFRQyxJQUFJNkQsRUFDWkMsT0FBTSxxQkFLbEIsTUFBT3hGIiwiZmlsZSI6ImV4ZXJjaXNlQm9va0xpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTcvNy8zMS5cclxuICovXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAkZXhlQm9va0xpc3QuaW5pdCgpO1xyXG59KTtcclxuXHJcbiRleGVCb29rTGlzdCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJGV4ZUJvb2tMaXN0ID0ge1xyXG4gICAgICAgIGFkZFVzZXJUeXBlOiAwLCAvLzAt6ICB5biI77ybMS3liqnmlZlcclxuICAgIH07XHJcbiAgICB2YXIgJHByaXZhdGUgPSB7XHJcbiAgICAgICAgdXNlckxpc3RQYWdlSW5kZXg6IDEsXHJcbiAgICAgICAgdXNlckxpc3RTZWFyY2hDb250ZW50OiBcIlwiLFxyXG4gICAgICAgIGlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tOiBmYWxzZSxcclxuICAgIH07XHJcblxyXG4gICAgJGV4ZUJvb2tMaXN0LmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8v5L2c5Lia5pys55qE5pON5L2cXHJcbiAgICAgICAgJChcIi5vcGVyYXRlTGlzdCA+IGxpLm9wZXJhdGVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHNlbGYgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgJHBhcmVudCA9ICRzZWxmLnBhcmVudHMoXCIuZXhlcmNpc2VCb29rT3BlcmF0ZUFyZWFcIiksXHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJHNlbGYuZGF0YShcInR5cGVcIiksXHJcbiAgICAgICAgICAgICAgICByZXNJZCA9ICRwYXJlbnQuZGF0YShcInJlc291cmNlX2lkXCIpLFxyXG4gICAgICAgICAgICAgICAgcmVzVHlwZSA9ICRwYXJlbnQuZGF0YShcInJlc291cmNlX3R5cGVcIiksXHJcbiAgICAgICAgICAgICAgICBleGVyY2lzZUJvb2tJZCA9ICRwYXJlbnQuZGF0YShcImV4ZXJjaXNlX2Jvb2tfaWRcIik7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyb2xlX21hbmFnZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXNUeXBlID09IDQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt57G75Z6L5LiN5pSv5oyB5Lq65ZGY566h55CG5pON5L2cXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93V2luZG93KFwicm9sZU1hbmFnZVdpbmRvd1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJleGVyY2lzZV9saXN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9leGVyY2lzZS9leGVyY2lzZV9saXN0XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWRpdF9leGVyY2lzZV9ib29rXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9leGVyY2lzZS9lZGl0X2V4ZXJjaXNlX2Jvb2s/ZXhlcmNpc2VfYm9va19pZD1cIitleGVyY2lzZUJvb2tJZDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlj4LmlbDplJnor69cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKiDkurrlkZjorr7nva7nqpflj6MgKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgICAgICAkKFwiI3dpbmRvd0Nsb3NlSWNvbjFcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuaGlkZVdpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCIjd2luZG93SG92ZXJCb3hcIikub24oXCJjbGlja1wiLCBcImxpXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHR5cGUgPSAkKHRoaXMpLmRhdGEoXCJ0eXBlXCIpO1xyXG4gICAgICAgICAgICBpZiAodHlwZSA9PSBcImFkZF90ZWFjaGVyXCIpIHtcclxuICAgICAgICAgICAgICAgICRleGVCb29rTGlzdC5hZGRVc2VyVHlwZSA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImFkZF9hc3Npc3RhbnRcIikge1xyXG4gICAgICAgICAgICAgICAgJGV4ZUJvb2tMaXN0LmFkZFVzZXJUeXBlID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcGVuU2VhcmNoVXNlcldpbmRvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJhZGlvIOaMiemSrueCueWHu+WIh+aNouaViOaenFxyXG4gICAgICAgICQoJy5yb2xlVHlwZVJhZGlvV3JhcHBlcicpLm9uKCdjbGljaycsICcucm9sZVR5cGVSYWRpbycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICRwYXJlbnQgPSAkKGUuZGVsZWdhdGVUYXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlUmFkaW9BcnIgPSAkKFwiI3dpbmRvd0NvbnRlbnQxXCIpLmZpbmQoXCIuY2lyY2xlUmFkaW8ucmFkaW9BY3RpdmVcIiksXHJcbiAgICAgICAgICAgICAgICBoYXNTZXRUZWFjaGVyID0gZmFsc2U7XHJcblxyXG5cclxuICAgICAgICAgICAgYWN0aXZlUmFkaW9BcnIuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcm9sZVR5cGUgPSAkKHRoaXMpLmRhdGEoXCJyb2xlX3R5cGVcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAocm9sZVR5cGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGhhc1NldFRlYWNoZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmIChoYXNTZXRUZWFjaGVyKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIDkuKrkvZzkuJrmnKzku4Xog73orr7nva4x5L2N6ICB5biI77yM6K+35YWI5bCG5bey6K6+572u55qE6ICB5biI5pS55Li65Yqp5pWZXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkcGFyZW50LmZpbmQoXCIuY2lyY2xlUmFkaW9cIikucmVtb3ZlQ2xhc3MoJ3JhZGlvQWN0aXZlJyk7XHJcbiAgICAgICAgICAgICRzZWxmLmNoaWxkcmVuKCcuY2lyY2xlUmFkaW8nKS5hZGRDbGFzcygncmFkaW9BY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqIOS6uuWRmOaQnOe0oueql+WPoyAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAkKFwiI3dpbmRvd0Nsb3NlSWNvbjJcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuaGlkZVdpbmRvdyhcInNlYXJjaFVzZXJXaW5kb3dcIik7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93V2luZG93KFwicm9sZU1hbmFnZVdpbmRvd1wiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+eCueWHu+aQnOe0olxyXG4gICAgICAgICQoXCIjc2VhcmNoVXNlcldpbmRvd1wiKS5vbihcImNsaWNrXCIsIFwiI3dpbmRvd1NlYXJjaEJ0blwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4ID0gMTtcclxuICAgICAgICAgICAgJHByaXZhdGUudXNlckxpc3RTZWFyY2hDb250ZW50ID0gJC50cmltKCQoXCIjd2luZG93U2VhcmNoSW5wdXRcIikudmFsKCkpO1xyXG4gICAgICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAkKCcjc2VhcmNoVXNlcldpbmRvdyAud2luZG93Q29udGVudFdyYXBwZXIyJykuc2Nyb2xsVG9wKDApO1xyXG4gICAgICAgICAgICBnZXRBbGxVc2VyTGlzdCgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoXCIjd2luZG93U2VhcmNoSW5wdXRcIikub24oXCJrZXlwcmVzc1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3dpbmRvd1NlYXJjaEJ0blwiKS5jbGljaygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/mu5HliqjliqDovb3mm7TlpJpcclxuICAgICAgICAkKCcjc2VhcmNoVXNlcldpbmRvdyAud2luZG93Q29udGVudFdyYXBwZXIyJykuc2Nyb2xsKGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIERpdkhlaWdodCA9ICQoJyN3aW5kb3dDb250ZW50MicpLmhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgU2Nyb2xsSGVpZ2h0ID0gJCh0aGlzKS5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIFNjcm9sbFRvcCA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgIGlmICgoU2Nyb2xsVG9wICsgU2Nyb2xsSGVpZ2h0ID49IERpdkhlaWdodCAtIDUpICYmICEkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nXHJcbiAgICAgICAgICAgICAgICAmJiAhJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20pIHtcclxuICAgICAgICAgICAgICAgIGdldEFsbFVzZXJMaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAkKFwiI2NvbmZpcm1TYXZlQWRkZWRVc2VyXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIGNoZWNrZWRVc2VyID0gJChcIi5zZWxlY3RTaW5nbGVHdWVzdDpjaGVja2VkXCIpLFxyXG4gICAgICAgICAgICAgICAgdXNlckFyciA9IHt9O1xyXG4gICAgICAgICAgICBjaGVja2VkVXNlci5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKFwiLnNpbmdsZUd1ZXN0SW5mbzJcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgdXNlcklkID0gJHBhcmVudC5kYXRhKFwidXNlcl9pZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICB3eEF2YXRhciA9ICRwYXJlbnQuZGF0YShcInd4X2F2YXRhclwiKSxcclxuICAgICAgICAgICAgICAgICAgICB3eE5pY2tuYW1lID0gJHBhcmVudC5kYXRhKFwid3hfbmlja25hbWVcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHVzZXJBcnIudXNlcklkID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJBcnIudXNlcklkID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHd4X2F2YXRhcjogd3hBdmF0YXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHd4X25pY2tuYW1lOiB3eE5pY2tuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIG9wZW5TZWFyY2hVc2VyV2luZG93KCkge1xyXG4gICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwicm9sZU1hbmFnZVdpbmRvd1wiKTtcclxuICAgICAgICBcclxuICAgICAgICAkKFwiI3NlYXJjaFVzZXJXaW5kb3dcIikuZmluZChcIi5oZWFkZXJUZXh0MVwiKS50ZXh0KFxyXG4gICAgICAgICAgICAoJGV4ZUJvb2tMaXN0LmFkZFVzZXJUeXBlPT0wKT9cIua3u+WKoOiAgeW4iFwiOlwi5re75Yqg5Yqp5pWZXCJcclxuICAgICAgICApO1xyXG4gICAgICAgIGJhc2VVdGlscy5zaG93V2luZG93KFwic2VhcmNoVXNlcldpbmRvd1wiKTtcclxuICAgICAgICBcclxuICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbSA9IGZhbHNlO1xyXG4gICAgICAgICRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4ID0gMTtcclxuICAgICAgICAkcHJpdmF0ZS51c2VyTGlzdFNlYXJjaENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIGdldEFsbFVzZXJMaXN0KCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRBbGxVc2VyTGlzdCgpIHtcclxuICAgICAgICBiYXNlVXRpbHMuc2hvd0xvYWRpbmcoXCJzZWFyY2hVc2VyTG9hZGluZ1wiKTtcclxuICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAkLmFqYXgoXCIvemJzZWFyY2hcIiwge1xyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHBhZ2U6ICRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4LFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoOiAkcHJpdmF0ZS51c2VyTGlzdFNlYXJjaENvbnRlbnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVMb2FkaW5nKFwic2VhcmNoVXNlckxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyICRhcmVhID0gJChcIiN3aW5kb3dDb250ZW50MlwiKSxcclxuICAgICAgICAgICAgICAgICAgICBodG1sU3RyID0gXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSByZXN1bHQucGFnZV9vZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKHJlc3VsdC5kYXRhLCBmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgKz1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzaW5nbGVHdWVzdEluZm8yXCIgZGF0YS11c2VyX2lkPVwiJyt2LnVzZXJfaWQrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIGRhdGEtd3hfYXZhdGFyPVwiJyt2Lnd4X2F2YXRhcisnXCIgZGF0YS13eF9uaWNrbmFtZT1cIicrdi53eF9uaWNrbmFtZSsnXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJzZWxlY3RTaW5nbGVHdWVzdFwiIGlkPVwiJyt2LnVzZXJfaWQrJ1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj1cIicrdi51c2VyX2lkKydcIiBjbGFzcz1cInNpbmdsZUd1ZXN0TGFiZWxcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW1nIHNyYz1cIicrdi53eF9hdmF0YXIrJ1wiIGNsYXNzPVwic2luZ2xlR3Vlc3RBdmF0YXIyXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNpbmdsZUd1ZXN0TmFtZTJcIiB0aXRsZT1cIicrdi53eF9uaWNrbmFtZSsnXCI+Jyt2Lnd4X25pY2tuYW1lKyc8L2Rpdj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvbGFiZWw+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChodG1sU3RyLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwid2luZG93Tm9EYXRhXCIgaWQ9XCJ3aW5kb3dOb0RhdGFcIj7mmoLml6DmlbDmja48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4ID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkYXJlYS5odG1sKGh0bWxTdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRhcmVhLmFwcGVuZCgnPGRpdiBjbGFzcz1cImlzRG93blwiPuabtOWkmuaVsOaNruWKoOi9veS4rTwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkYXJlYS5maW5kKCcuaXNEb3duJykuYmVmb3JlKGh0bWxTdHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldC5jdXJyZW50X3BhZ2UgPj0gb2Zmc2V0LnRvdGFsX3BhZ2VzKSB7ICAgICAgLy/mlbDmja7liqDovb3lrozmr5XlkI7nmoTmk43kvZxcclxuICAgICAgICAgICAgICAgICAgICB2YXIgdGltZVJhbmdlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0LnRvdGFsX2NvdW50ID4gMTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuZmluZCgnLmlzRG93bicpLnRleHQoXCLmlbDmja7lt7LliqDovb3lrozmr5VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVSYW5nZSA9IDMwMDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZVJhbmdlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRhcmVhLmZpbmQoJy5pc0Rvd24nKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgdGltZVJhbmdlKTtcclxuICAgICAgICAgICAgICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkcHJpdmF0ZS51c2VyTGlzdFBhZ2VJbmRleCArKztcclxuXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVMb2FkaW5nKFwic2VhcmNoVXNlckxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgYWxlcnQoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuICRleGVCb29rTGlzdDtcclxufSkoKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuIl19
