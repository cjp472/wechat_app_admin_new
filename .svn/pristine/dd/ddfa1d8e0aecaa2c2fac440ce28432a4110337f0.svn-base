$(function(){manageVideo.init()});var manageVideo=function(){var e={};var a;function t(e){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("视频名称不能为空！");return false}if(fileId==null){baseUtils.show.redTip("请上传视频资源！");return false}if(is_edit){baseUtils.show.redTip("视频资源上传中！");return false}if($formCheck.emptyString(e.img_url)){baseUtils.show.redTip("请上传您的视频封面！");return false}if($formCheck.emptyString(e.start_at)){baseUtils.show.redTip("请填入您的视频上架时间！");return false}if(!$formCheck.checkTime(e.start_at)){baseUtils.show.redTip("视频上架时间错误");return false}if(uploadChannelType==1&&e.payment_type==2&&$formCheck.emptyString(e.piece_price)){baseUtils.show.redTip("您选择的付费形式为付费，请输入价格！");return false}if(uploadChannelType==1&&e.payment_type==2&&!$formCheck.checkNum(e.piece_price)){baseUtils.show.redTip("您的价格输入格式有误，请重新输入！");return false}if(uploadChannelType==1&&e.payment_type==2&&e.piece_price>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}return true}function r(e,a){showLoading();$.post(e,a,function(e){if(parseInt(e.code)===0){baseUtils.show.blueTip("保存成功");window.location.href=backURL}else{hideLoading();baseUtils.show.redTip(e.msg);submitLimt=false}})}e.init=function(){var e=GetQueryString("package_id");var a=$("#dateInput").val();$("#dateInput").on("change",function(e){a=$(this).val();console.log(currentDate);if(a>currentDate){$("#nextDay").html("上架当日")}else{$("#nextDay").html("今日")}i();console.log(a)});console.log(packageId);i();function i(){$.get("/check_goods_message_push/"+e+"/"+a,function(e){console.log(e);$("#valid_push").html(e.data.valid_push);if(e.data.has_push>=3){$("#fBtn1").attr("disabled",true);$("#has_push").html(3)}else{$("#has_push").html(e.data.has_push);$("#fBtn1").attr("disabled",false)}if(e.code==-1){$("#subMsg").css("display","none")}})}$(".completeBtn").click(function(){var e=$.trim($(".resName").val());var a=fileId;var i=videoGsize;var s=$.trim($("#Image1Url").val());var l=$.trim($("#Image4Url").val());var n=UE.getEditor("resource_desc");var o=n.getContent();var c=n.getPlainTxt();if(c.length==0){baseUtils.show.redTip("描述不能为空!");return false}var p=$.trim($(".resPrize").val())*100;$('input[name="aliveClass"]:checked').each(function(){classArray.push($(this).attr("id"))});console.log(classArray);var u=$.trim($("#dateInput").val());var d={title:e,img_url:s,patch_img_url:l,file_name:VideoName,descrb:c,org_content:o,piece_price:p,start_at:u,id:GetQueryString("id")||null};var h={public_video:a,public_size_text:i};var f=$("#serviceToggle :radio:checked").val();if(f){d.push_state=f}var m=resourceFree;if(m){d.payment_type=m}if(t(d)){var g={params:d,resource_type:resourceType,upload_channel_type:uploadChannelType,package_id:packageId,resource_params:h,package_name:packageName,roleParams:roleParams,category_type:classArray};r(golbalUrl,g)}else{return false}})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZVZpZGVvLmpzIl0sIm5hbWVzIjpbIiQiLCJtYW5hZ2VWaWRlbyIsImluaXQiLCJyZXNVcmwiLCJjaGVja1ZpZGVvRm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJ0aXRsZSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJmaWxlSWQiLCJpc19lZGl0IiwiaW1nX3VybCIsInN0YXJ0X2F0IiwiY2hlY2tUaW1lIiwidXBsb2FkQ2hhbm5lbFR5cGUiLCJwYXltZW50X3R5cGUiLCJwaWVjZV9wcmljZSIsImNoZWNrTnVtIiwibWF4SW5wdXRQcmljZSIsInN1Ym1pdEZvcm0iLCJ1cmwiLCJhbGxQYXJhbXMiLCJzaG93TG9hZGluZyIsInBvc3QiLCJkYXRhIiwicGFyc2VJbnQiLCJjb2RlIiwiYmx1ZVRpcCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImJhY2tVUkwiLCJoaWRlTG9hZGluZyIsIm1zZyIsInN1Ym1pdExpbXQiLCJwX2lkIiwiR2V0UXVlcnlTdHJpbmciLCJzZWxlY3RUaW1lIiwidmFsIiwib24iLCJlIiwidGhpcyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50RGF0ZSIsImh0bWwiLCJwdXNoRnVuY3Rpb24iLCJwYWNrYWdlSWQiLCJnZXQiLCJ2YWxpZF9wdXNoIiwiaGFzX3B1c2giLCJhdHRyIiwiY3NzIiwiY2xpY2siLCJ0cmltIiwidmlkZW9GaWxlSWQiLCJ2aWRlb1NpemUiLCJ2aWRlb0dzaXplIiwiaW1hZ2UxVXJsIiwiaW1hZ2U0VXJsIiwidWUiLCJVRSIsImdldEVkaXRvciIsIm9yZ0NvbnRlbnQiLCJnZXRDb250ZW50IiwiZGVzY3JpYiIsImdldFBsYWluVHh0IiwibGVuZ3RoIiwicmVzUHJpemUiLCJlYWNoIiwiY2xhc3NBcnJheSIsInB1c2giLCJzdGFydEF0IiwicmVzSW5mbyIsInBhdGNoX2ltZ191cmwiLCJmaWxlX25hbWUiLCJWaWRlb05hbWUiLCJkZXNjcmIiLCJvcmdfY29udGVudCIsImlkIiwicmVzb3VyY2VQYXJhbXMiLCJwdWJsaWNfdmlkZW8iLCJwdWJsaWNfc2l6ZV90ZXh0IiwicHVzaFN0YXRlIiwicHVzaF9zdGF0ZSIsInJlc0ZyZWUiLCJyZXNvdXJjZUZyZWUiLCJwYXJhbXMiLCJyZXNvdXJjZV90eXBlIiwicmVzb3VyY2VUeXBlIiwidXBsb2FkX2NoYW5uZWxfdHlwZSIsInBhY2thZ2VfaWQiLCJyZXNvdXJjZV9wYXJhbXMiLCJwYWNrYWdlX25hbWUiLCJwYWNrYWdlTmFtZSIsInJvbGVQYXJhbXMiLCJjYXRlZ29yeV90eXBlIiwiZ29sYmFsVXJsIl0sIm1hcHBpbmdzIjoiQUFNQUEsRUFBRSxXQUVFQyxZQUFZQyxRQUdoQixJQUFJRCxhQUFjLFdBQ2QsR0FBSUEsS0FFSixJQUFJRSxFQUdKLFNBQVNDLEdBQWVDLEdBQ3BCLEdBQUlDLFdBQVdDLFlBQVlGLEVBQUtHLE9BQVEsQ0FDcENDLFVBQVVDLEtBQUtDLE9BQU8sWUFDdEIsT0FBTyxPQUVYLEdBQUlDLFFBQVEsS0FBTSxDQUNkSCxVQUFVQyxLQUFLQyxPQUFPLFdBQ3RCLE9BQU8sT0FFWCxHQUFJRSxRQUFTLENBQ1RKLFVBQVVDLEtBQUtDLE9BQU8sV0FDdEIsT0FBTyxPQUVYLEdBQUlMLFdBQVdDLFlBQVlGLEVBQUtTLFNBQVUsQ0FDdENMLFVBQVVDLEtBQUtDLE9BQU8sYUFDdEIsT0FBTyxPQU1YLEdBQUlMLFdBQVdDLFlBQVlGLEVBQUtVLFVBQVcsQ0FDdkNOLFVBQVVDLEtBQUtDLE9BQU8sZUFDdEIsT0FBTyxPQUVYLElBQUtMLFdBQVdVLFVBQVVYLEVBQUtVLFVBQVcsQ0FDdENOLFVBQVVDLEtBQUtDLE9BQU8sV0FDdEIsT0FBTyxPQUVYLEdBQUdNLG1CQUFtQixHQUFHWixFQUFLYSxjQUFjLEdBQUdaLFdBQVdDLFlBQVlGLEVBQUtjLGFBQWEsQ0FDcEZWLFVBQVVDLEtBQUtDLE9BQU8scUJBQ3RCLE9BQU8sT0FFWCxHQUFHTSxtQkFBbUIsR0FBR1osRUFBS2EsY0FBYyxJQUFJWixXQUFXYyxTQUFTZixF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LEdBQVVDLFlBQ2QsSUFBR0QsRUFBUyxDQUNSWixFQUFRMUQsYUFBZXNFLEVBSzNCLEdBQUlwRixFQUFld0UsR0FBVSxDQUN6QixHQUFJcEQsSUFDQWtFLE9BQVFkLEVBQ1JlLGNBQWVDLGFBQ2ZDLG9CQUFxQjVFLGtCQUNyQjZFLFdBQVk1QyxVQUNaNkMsZ0JBQWlCWixFQUNqQmEsYUFBY0MsWUFDZEMsV0FBWUEsV0FDWkMsY0FBYzFCLFdBRWxCbkQsR0FBVzhFLFVBQVU1RSxPQUNsQixDQUNILE1BQU8sVUFLbkIsT0FBT3ZCIiwiZmlsZSI6Im1hbmFnZVZpZGVvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGpzZXJrIG9uIDIwMTcvMy8yMy5cbiAqL1xuLyoqXG4gKiBDcmVhdGVkIGJ5IGpzZXJrIG9uIDIwMTcvMy8yMy5cbiAqL1xuJChmdW5jdGlvbiAoKSB7XG5cbiAgICBtYW5hZ2VWaWRlby5pbml0KCk7XG5cbn0pO1xudmFyIG1hbmFnZVZpZGVvID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtYW5hZ2VWaWRlbyA9IHt9O1xuXG4gICAgdmFyIHJlc1VybDtcblxuICAgIC8v5qOA5p+l6KeG6aKR5o+Q5Lqk6KGo5Y2VXG4gICAgZnVuY3Rpb24gY2hlY2tWaWRlb0Zvcm0oaW5mbykge1xuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnRpdGxlKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6KeG6aKR5ZCN56ew5LiN6IO95Li656m677yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChmaWxlSWQ9PW51bGwpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+S4iuS8oOinhumikei1hOa6kO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNfZWRpdCkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6KeG6aKR6LWE5rqQ5LiK5Lyg5Lit77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uaW1nX3VybCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+S4iuS8oOaCqOeahOinhumikeWwgemdou+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICAvLyBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnBhdGNoX2ltZ191cmwpKSB7XG4gICAgICAgIC8vICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fkuIrkvKDmgqjnmoTop4bpopHotLTniYfvvIFcIik7XG4gICAgICAgIC8vICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIC8vIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5zdGFydF9hdCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+Whq+WFpeaCqOeahOinhumikeS4iuaetuaXtumXtO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8uc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLop4bpopHkuIrmnrbml7bpl7TplJnor69cIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYodXBsb2FkQ2hhbm5lbFR5cGU9PTEmJmluZm8ucGF5bWVudF90eXBlPT0yJiYkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8ucGllY2VfcHJpY2UpKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaCqOmAieaLqeeahOS7mOi0ueW9ouW8j+S4uuS7mOi0ue+8jOivt+i+k+WFpeS7t+agvO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZih1cGxvYWRDaGFubmVsVHlwZT09MSYmaW5mby5wYXltZW50X3R5cGU9PTImJiEkZm9ybUNoZWNrLmNoZWNrTnVtKGluZm8ucGllY2VfcHJpY2UpKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaCqOeahOS7t+agvOi+k+WFpeagvOW8j+acieivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZih1cGxvYWRDaGFubmVsVHlwZT09MSYmaW5mby5wYXltZW50X3R5cGU9PTIgJiYgaW5mby5waWVjZV9wcmljZSA+IGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICogMTAwKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS7t+agvOS4jeiDveWkp+S6jiBcIiArIGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICsgXCIg5YWDXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8v5o+Q5Lqk5L+h5oGvXG4gICAgZnVuY3Rpb24gc3VibWl0Rm9ybSh1cmwsIGFsbFBhcmFtcykge1xuICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICAkLnBvc3QodXJsLCBhbGxQYXJhbXMsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBpZiAocGFyc2VJbnQoZGF0YS5jb2RlKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLkv53lrZjmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBiYWNrVVJMO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgIHN1Ym1pdExpbXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICBtYW5hZ2VWaWRlby5pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIC8v5paw54mI5raI5oGv5o6o6YCB5ouJ5Y+W5pWw5o2uXG4gICAgICAgIHZhciBwX2lkID1HZXRRdWVyeVN0cmluZygncGFja2FnZV9pZCcpO1xuICAgICAgICB2YXIgc2VsZWN0VGltZSA9ICQoJyNkYXRlSW5wdXQnKS52YWwoKTtcbiAgICAgICAgLy/nm5Hmjqfml7bpl7TlvLnnqpfnu4Tku7ZcbiAgICAgICAgJCgnI2RhdGVJbnB1dCcpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICBzZWxlY3RUaW1lID0gJCh0aGlzKS52YWwoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnREYXRlKTtcbiAgICAgICAgICAgIGlmKHNlbGVjdFRpbWU+Y3VycmVudERhdGUpe1xuICAgICAgICAgICAgICAgICQoJyNuZXh0RGF5JykuaHRtbCgn5LiK5p625b2T5pelJyk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAkKCcjbmV4dERheScpLmh0bWwoJ+S7iuaXpScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHVzaEZ1bmN0aW9uKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzZWxlY3RUaW1lKTtcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKHBhY2thZ2VJZCk7XG4gICAgICAgIHB1c2hGdW5jdGlvbigpO1xuICAgICAgICBmdW5jdGlvbiBwdXNoRnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAkLmdldCgnL2NoZWNrX2dvb2RzX21lc3NhZ2VfcHVzaC8nICsgcF9pZCArICcvJyArIHNlbGVjdFRpbWUsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgJCgnI3ZhbGlkX3B1c2gnKS5odG1sKGRhdGEuZGF0YS52YWxpZF9wdXNoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmhhc19wdXNoID49IDMpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2ZCdG4xJykuYXR0cignZGlzYWJsZWQnLCB0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2hhc19wdXNoJykuaHRtbCgzKTsvL+WGmeatu+W3suWPkTPmnaFcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2hhc19wdXNoJykuaHRtbChkYXRhLmRhdGEuaGFzX3B1c2gpO1xuICAgICAgICAgICAgICAgICAgICAkKCcjZkJ0bjEnKS5hdHRyKCdkaXNhYmxlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PSAtMSkge1xuICAgICAgICAgICAgICAgICAgICAkKCcjc3ViTXNnJykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIC8vIOaPkOS6pOinhumikeihqOWNlVxuXG4gICAgICAgICQoXCIuY29tcGxldGVCdG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAvL+iOt+WPluinhumikeihqOWNleaVsOaNrlxuICAgICAgICAgICAgLy/op4bpopHlkI3np7BcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICQudHJpbSgkKFwiLnJlc05hbWVcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+inhumikeeCueaSrWlkXG4gICAgICAgICAgICB2YXIgdmlkZW9GaWxlSWQgPSBmaWxlSWQ7XG5cbiAgICAgICAgICAgIC8v6KeG6aKR5aSn5bCPXG4gICAgICAgICAgICB2YXIgdmlkZW9TaXplPXZpZGVvR3NpemU7XG5cbiAgICAgICAgICAgIC8v6KeG6aKR5bCB6Z2i5Zyw5Z2AXG4gICAgICAgICAgICB2YXIgaW1hZ2UxVXJsID0gJC50cmltKCQoXCIjSW1hZ2UxVXJsXCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/op4bpopHotLTniYflnLDlnYBcbiAgICAgICAgICAgIHZhciBpbWFnZTRVcmwgPSAkLnRyaW0oJChcIiNJbWFnZTRVcmxcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+inhumikeWOn+Wni+WGheWuueivpuaDhVxuICAgICAgICAgICAgdmFyIHVlID0gVUUuZ2V0RWRpdG9yKCdyZXNvdXJjZV9kZXNjJyk7XG4gICAgICAgICAgICB2YXIgb3JnQ29udGVudCA9IHVlLmdldENvbnRlbnQoKTtcblxuICAgICAgICAgICAgLy/op4bpopHlhoXlrrnmj4/ov7BcbiAgICAgICAgICAgIHZhciBkZXNjcmliID0gdWUuZ2V0UGxhaW5UeHQoKTtcbiAgICAgICAgICAgIGlmIChkZXNjcmliLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmj4/ov7DkuI3og73kuLrnqbohJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG5cblxuICAgICAgICAgICAgLy/ku5jotLnku7fmoLxcbiAgICAgICAgICAgIHZhciByZXNQcml6ZSA9ICQudHJpbSgkKFwiLnJlc1ByaXplXCIpLnZhbCgpKSoxMDA7XG5cbiAgICAgICAgICAgIC8v55u05pKt6YCJ5oup5YiG57G7XG4gICAgICAgICAgICAkKCdpbnB1dFtuYW1lPVwiYWxpdmVDbGFzc1wiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgIGNsYXNzQXJyYXkucHVzaCgkKHRoaXMpLmF0dHIoJ2lkJykpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjbGFzc0FycmF5KTtcblxuICAgICAgICAgICAgLy/kuIrmnrbml7bpl7RcbiAgICAgICAgICAgIHZhciBzdGFydEF0ID0gJC50cmltKCQoXCIjZGF0ZUlucHV0XCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/op4bpopHljZXlk4HkuIrkvKDkv6Hmga9cbiAgICAgICAgICAgIHZhciByZXNJbmZvID0ge1xuICAgICAgICAgICAgICAgIC8vIOinhumikeWQjeensFxuICAgICAgICAgICAgICAgIHRpdGxlOiB0aXRsZSxcbiAgICAgICAgICAgICAgICAvLyAgIOinhumikeWwgemdouWcsOWdgFxuICAgICAgICAgICAgICAgIGltZ191cmw6IGltYWdlMVVybCxcbiAgICAgICAgICAgICAgICAvLyAgIOi0tOeJh+WbvueJh+WcsOWdgFxuICAgICAgICAgICAgICAgIHBhdGNoX2ltZ191cmw6IGltYWdlNFVybCxcbiAgICAgICAgICAgICAgICAvLy8v5LqR54K55pKt5paH5Lu2aWRcbiAgICAgICAgICAgICAgICAvL2ZpbGVfaWQ6dmlkZW9GaWxlSWQsXG4gICAgICAgICAgICAgICAgLy8vLyDop4bpopHlpKflsI9cbiAgICAgICAgICAgICAgICAvL3ZpZGVvX3NpemU6dmlkZW9TaXplLFxuICAgICAgICAgICAgICAgIC8v6KeG6aKR5ZCN56ewXG4gICAgICAgICAgICAgICAgZmlsZV9uYW1lOiBWaWRlb05hbWUsXG4gICAgICAgICAgICAgICAgLy/op4bpopHor6bmg4VcbiAgICAgICAgICAgICAgICBkZXNjcmI6ZGVzY3JpYixcbiAgICAgICAgICAgICAgICAvL+WOn+Wni+aWh+acrFxuICAgICAgICAgICAgICAgIG9yZ19jb250ZW50Om9yZ0NvbnRlbnQsXG4gICAgICAgICAgICAgICAgLy/ku5jotLnku7fmoLxcbiAgICAgICAgICAgICAgICBwaWVjZV9wcmljZTogcmVzUHJpemUsXG4gICAgICAgICAgICAgICAgLy/kuIrmnrbml7bpl7RcbiAgICAgICAgICAgICAgICBzdGFydF9hdDogc3RhcnRBdCxcbiAgICAgICAgICAgICAgICAvL2lkXG4gICAgICAgICAgICAgICAgaWQ6IEdldFF1ZXJ5U3RyaW5nKCdpZCcpIHx8IG51bGxcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvL+inhumikeebtOaSremineWkluS/oeaBr1xuICAgICAgICAgICAgdmFyIHJlc291cmNlUGFyYW1zPXtcbiAgICAgICAgICAgICAgICAgLy/kupHngrnmkq3op4bpopFpZFxuICAgICAgICAgICAgICAgIHB1YmxpY192aWRlbzp2aWRlb0ZpbGVJZCxcbiAgICAgICAgICAgICAgICAvL+inhumikeWkp+Wwj1xuICAgICAgICAgICAgICAgIHB1YmxpY19zaXplX3RleHQ6dmlkZW9TaXplXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy/mtojmga/mjqjpgIFcbiAgICAgICAgICAgIHZhciBwdXNoU3RhdGUgPSAkKCcjc2VydmljZVRvZ2dsZSA6cmFkaW86Y2hlY2tlZCcpLnZhbCgpO1xuICAgICAgICAgICAgaWYocHVzaFN0YXRlKXsvL+WmguaenOaciea2iOaBr+aOqOmAgeadg+mZkFxuICAgICAgICAgICAgICAgIHJlc0luZm8ucHVzaF9zdGF0ZSA9IHB1c2hTdGF0ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v5piv5ZCm5LuY6LS577yIMeihqOekuuWFjei0ue+8jDLooajnpLrljZXnrJTvvIlcbiAgICAgICAgICAgIHZhciByZXNGcmVlID0gcmVzb3VyY2VGcmVlO1xuICAgICAgICAgICAgaWYocmVzRnJlZSkge1xuICAgICAgICAgICAgICAgIHJlc0luZm8ucGF5bWVudF90eXBlID0gcmVzRnJlZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy/ojrflj5booajljZXkuK3nmoTmlbDmja5cblxuICAgICAgICAgICAgaWYgKGNoZWNrVmlkZW9Gb3JtKHJlc0luZm8pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsbFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiByZXNJbmZvLFxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiByZXNvdXJjZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZF9jaGFubmVsX3R5cGU6IHVwbG9hZENoYW5uZWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX2lkOiBwYWNrYWdlSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3BhcmFtczogcmVzb3VyY2VQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHBhY2thZ2VfbmFtZTogcGFja2FnZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGVQYXJhbXM6IHJvbGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5X3R5cGU6Y2xhc3NBcnJheVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgc3VibWl0Rm9ybShnb2xiYWxVcmwsYWxsUGFyYW1zKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBtYW5hZ2VWaWRlbztcbn0oKTsiXX0=
