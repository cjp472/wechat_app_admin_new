$(function(){videoUpload.init();$(".videoUploadCancle").hide()});var is_edit=false;var fileId;var videoGsize;var transcodeNotifyUrl;var videoUpload=function(){var e={};var o=function(e){$.ajax({url:"/getsigv4",data:JSON.stringify({Action:"GetVodSignatureV2"}),type:"POST",dataType:"json",success:function(o){console.log(o);if(o.result){console.log("成功");e(o.result)}else{console.log("获取签名失败");return"获取签名失败"}}})};e.init=function(){$("#video_file").click(function(){$("#uploadVideoNow-file").click()});$("#uploadVideoNow-file").on("change",function(e){var i=this.files[0];var t=i.size;videoGsize=Number(t/(1024*1024)).toFixed(2);if(videoGsize>1e3){baseUtils.show.redTip("请将视频文件压缩到 1G 以内")}var d=qcVideo.ugcUploader.start({videoFile:i,getSignature:o,allowAudio:0,isTranscode:true,transcodeNotifyUrl:transcodeNotifyUrl,success:function(e){console.log("上传成功");console.log(e);is_edit=false;$(".videoUploadLineA").css("width","100%");$(".videoPercent").text("已完成");$(".uploadRatio span:nth-of-type(1)").text(videoGsize+"M");$(".uploadRatio span:nth-of-type(2)").text(videoGsize+"M")},error:function(e){console.log("上传失败");console.log(e)},progress:function(e){is_edit=true;$("#videoName").hide();$(".videoUploadBox").fadeIn(300);$(".videoBoxTitle").text(e.name);$(".videoSize").text(videoGsize+"M");if(e.shacurr<1){$(".videoPercent").text("视频正在解析中");$(".uploadRatio span").text("");$(".videoUploadLineA").css("width","0%")}else if(e.shacurr==1){var o=parseFloat(videoGsize)*parseFloat(e.curr);o=o.toFixed(2);var i=Number(e.curr*100).toFixed(2);$(".videoUploadLineA").css("width",i+"%");$(".videoPercent").text(i+"%");$(".uploadRatio span:nth-of-type(1)").text(o+"M");$(".uploadRatio span:nth-of-type(2)").text(videoGsize+"M")}if(e.type=="video"){console.log(e)}},finish:function(e){console.log("finish");console.log(e);fileId=e.fileId;VideoName=e.videoName}})})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvVXBsb2FkVWdjLmpzIl0sIm5hbWVzIjpbIiQiLCJ2aWRlb1VwbG9hZCIsImluaXQiLCJoaWRlIiwiaXNfZWRpdCIsImZpbGVJZCIsInZpZGVvR3NpemUiLCJ0cmFuc2NvZGVOb3RpZnlVcmwiLCJnZXRTaWduYXR1cmUiLCJjYWxsYmFjayIsImFqYXgiLCJ1cmwiLCJkYXRhIiwiSlNPTiIsInN0cmluZ2lmeSIsIkFjdGlvbiIsInR5cGUiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZXMiLCJjb25zb2xlIiwibG9nIiwicmVzdWx0IiwiY2xpY2siLCJvbiIsImUiLCJ2aWRlb0ZpbGUiLCJ0aGlzIiwiZmlsZXMiLCJ2aWRlb1NpemUiLCJzaXplIiwiTnVtYmVyIiwidG9GaXhlZCIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJyZXN1bHRNc2ciLCJxY1ZpZGVvIiwidWdjVXBsb2FkZXIiLCJzdGFydCIsImFsbG93QXVkaW8iLCJpc1RyYW5zY29kZSIsImNzcyIsInRleHQiLCJlcnJvciIsInByb2dyZXNzIiwiZmFkZUluIiwibmFtZSIsInNoYWN1cnIiLCJ1cGxvYWRDb21wbGV0ZVNpemUiLCJwYXJzZUZsb2F0IiwiY3VyciIsImN1cnJQZXJjZW50IiwiZmluaXNoIiwiVmlkZW9OYW1lIiwidmlkZW9OYW1lIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRSxXQUNFQyxZQUFZQyxNQUVaRixHQUFFLHNCQUFzQkcsUUFHNUIsSUFBSUMsU0FBVSxLQUNkLElBQUlDLE9BQ0osSUFBSUMsV0FDSixJQUFJQyxtQkFFSixJQUFJTixhQUFZLFdBQ1osR0FBSUEsS0FNSixJQUFJTyxHQUFlLFNBQVNDLEdBQ3hCVCxFQUFFVSxNQUNFQyxJQUFLLFlBQ0xDLEtBQU1DLEtBQUtDLFdBQ1BDLE9BQVMsc0JBRWJDLEtBQU0sT0FDTkMsU0FBVSxPQUNWQyxRQUFTLFNBQVNDLEdBQ2RDLFFBQVFDLElBQUlGLEVBQ1osSUFBR0EsRUFBSUcsT0FBUSxDQUNYRixRQUFRQyxJQUFJLEtBQ1paLEdBQVNVLEVBQUlHLFlBQ1YsQ0FDSEYsUUFBUUMsSUFBSSxTQUNaLE9BQU8sYUFPdkJwQixHQUFZQyxLQUFLLFdBQ2JGLEVBQUUsZUFBZXVCLE1BQU0sV0FDbkJ2QixFQUFFLHdCQUF3QnVCLFNBRzlCdkIsR0FBRSx3QkFBd0J3QixHQUFHLFNBQVUsU0FBVUMsR0FDN0MsR0FBSUMsR0FBWUMsS0FBS0MsTUFBTSxFQUUzQixJQUFJQyxHQUFZSCxFQUFVSSxJQUMxQnhCLFlBQWF5QixPQUFPRixHQUFXLEtBQUssT0FBT0csUUFBUSxFQUNuRCxJQUFHMUIsV0FBVyxJQUFLLENBQ2YyQixVQUFVQyxLQUFLQyxPQUFPLG1CQUcxQixHQUFJQyxHQUFZQyxRQUFRQyxZQUFZQyxPQUNoQ2IsVUFBV0EsRUFDWGxCLGFBQWNBLEVBQ2RnQyxXQUFZLEVBQ1pDLFlBQWEsS0FDYmxDLG1CQUFvQkEsbUJBQ3BCVyxRQUFTLFNBQVNJLEdBQ2RGLFFBQVFDLElBQUksT0FDWkQsU0FBUUMsSUFBSUMsRUFDWmxCLFNBQVUsS0FDVkosR0FBRSxxQkFBcUIwQyxJQUFJLFFBQVMsT0FDcEMxQyxHQUFFLGlCQUFpQjJDLEtBQUssTUFDeEIzQyxHQUFFLG9DQUFvQzJDLEtBQUtyQyxXQUFXLElBQ3RETixHQUFFLG9DQUFvQzJDLEtBQUtyQyxXQUFXLE1BRTFEc0MsTUFBTyxTQUFTdEIsR0FDWkYsUUFBUUMsSUFBSSxPQUNaRCxTQUFRQyxJQUFJQyxJQUVoQnVCLFNBQVUsU0FBU3ZCLEdBQ2ZsQixRQUFVLElBQ1ZKLEdBQUUsY0FBY0csTUFDaEJILEdBQUUsbUJBQW1COEMsT0FBTyxJQUM1QjlDLEdBQUUsa0JBQWtCMkMsS0FBS3JCLEVBQU95QixLQUNoQy9DLEdBQUUsY0FBYzJDLEtBQUtyQyxXQUFXLElBRWhDLElBQUdnQixFQUFPMEIsUUFBUSxFQUFFLENBQ2hCaEQsRUFBRSxpQkFBaUIyQyxLQUFLLFVBQ3hCM0MsR0FBRSxxQkFBcUIyQyxLQUFLLEdBQzVCM0MsR0FBRSxxQkFBcUIwQyxJQUFJLFFBQVEsVUFDakMsSUFBR3BCLEVBQU8wQixTQUFTLEVBQUcsQ0FDeEIsR0FBSUMsR0FBbUJDLFdBQVc1QyxZQUFZNEMsV0FBVzVCLEVBQU82QixLQUNoRUYsR0FBbUJBLEVBQW1CakIsUUFBUSxFQUU5QyxJQUFJb0IsR0FBWXJCLE9BQU9ULEVBQU82QixLQUFLLEtBQUtuQixRQUFRLEVBQ2hEaEMsR0FBRSxxQkFBcUIwQyxJQUFJLFFBQVFVLEVBQVksSUFDL0NwRCxHQUFFLGlCQUFpQjJDLEtBQUtTLEVBQVksSUFDcENwRCxHQUFFLG9DQUFvQzJDLEtBQUtNLEVBQW1CLElBQzlEakQsR0FBRSxvQ0FBb0MyQyxLQUFLckMsV0FBVyxLQUUxRCxHQUFHZ0IsRUFBT04sTUFBUSxRQUFTLENBQ3ZCSSxRQUFRQyxJQUFJQyxLQUdwQitCLE9BQVEsU0FBUy9CLEdBQ2JGLFFBQVFDLElBQUksU0FDWkQsU0FBUUMsSUFBSUMsRUFDWmpCLFFBQU9pQixFQUFPakIsTUFDZGlELFdBQVloQyxFQUFPaUMsZUFNbkMsT0FBT3REIiwiZmlsZSI6InZpZGVvVXBsb2FkVWdjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbiAoKSB7XG4gICAgdmlkZW9VcGxvYWQuaW5pdCgpO1xuXG4gICAgJChcIi52aWRlb1VwbG9hZENhbmNsZVwiKS5oaWRlKCk7XG59KTtcblxudmFyIGlzX2VkaXQgPSBmYWxzZTtcbnZhciBmaWxlSWQ7XG52YXIgdmlkZW9Hc2l6ZTtcbnZhciB0cmFuc2NvZGVOb3RpZnlVcmw7IC8vIOi9rOeggeaIkOWKn+Wbnuiwg+WcsOWdgFxuXG52YXIgdmlkZW9VcGxvYWQ9ZnVuY3Rpb24gKCkge1xuICAgIHZhciB2aWRlb1VwbG9hZD17fTtcblxuICAgIC8qKlxuICAgICAqIOiuoeeul+etvuWQjVxuICAgICAqKi9cbiAgICAvLyBodHRwOi8vMTIzLjIwNi44My4xMjA6ODAvaW50ZXJmYWNlLnBocFxuICAgIHZhciBnZXRTaWduYXR1cmUgPSBmdW5jdGlvbihjYWxsYmFjayl7XG4gICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICB1cmw6ICcvZ2V0c2lndjQnLFxuICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICAgICAgICAgIFwiQWN0aW9uXCI6XCJHZXRWb2RTaWduYXR1cmVWMlwiXG4gICAgICAgICAgICB9KSxcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihyZXMpe1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7XG4gICAgICAgICAgICAgICAgaWYocmVzLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuaIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2socmVzLnJlc3VsdCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLojrflj5bnrb7lkI3lpLHotKVcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAn6I635Y+W562+5ZCN5aSx6LSlJztcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHZpZGVvVXBsb2FkLmluaXQ9ZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3ZpZGVvX2ZpbGVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIiN1cGxvYWRWaWRlb05vdy1maWxlXCIpLmNsaWNrKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoJyN1cGxvYWRWaWRlb05vdy1maWxlJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICB2YXIgdmlkZW9GaWxlID0gdGhpcy5maWxlc1swXTtcbiAgICAgICAgICAgIC8v6I635Y+W5paH5Lu25aSn5bCPXG4gICAgICAgICAgICB2YXIgdmlkZW9TaXplID0gdmlkZW9GaWxlLnNpemU7XG4gICAgICAgICAgICB2aWRlb0dzaXplID0gTnVtYmVyKHZpZGVvU2l6ZS8oMTAyNCoxMDI0KSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIGlmKHZpZGVvR3NpemU+MTAwMCl7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35bCG6KeG6aKR5paH5Lu25Y6L57yp5YiwIDFHIOS7peWGhVwiKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIHZpZGVvRmlsZS5uYW1lXG4gICAgICAgICAgICB2YXIgcmVzdWx0TXNnID0gcWNWaWRlby51Z2NVcGxvYWRlci5zdGFydCh7XG4gICAgICAgICAgICAgICAgdmlkZW9GaWxlOiB2aWRlb0ZpbGUsXG4gICAgICAgICAgICAgICAgZ2V0U2lnbmF0dXJlOiBnZXRTaWduYXR1cmUsXG4gICAgICAgICAgICAgICAgYWxsb3dBdWRpbzogMCxcbiAgICAgICAgICAgICAgICBpc1RyYW5zY29kZTogdHJ1ZSwvL+aYr+WQpui9rOeggVxuICAgICAgICAgICAgICAgIHRyYW5zY29kZU5vdGlmeVVybDogdHJhbnNjb2RlTm90aWZ5VXJsLCAvLyjovaznoIHmiJDlip/lkI7nmoTlm57osIPlnLDlnYApaXNUcmFuc2NvZGU9PXRydWUs5pe25byA5ZCv77ybIOWbnuiwg3VybOeahOi/lOWbnuaVsOaNruagvOW8j+WPguiAgyAgaHR0cDovL3d3dy5xY2xvdWQuY29tL3dpa2kvdjIvTXVsdGlwYXJ0VXBsb2FkVm9kRmlsZVxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkuIrkvKDmiJDlip8nKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgaXNfZWRpdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAkKFwiLnZpZGVvVXBsb2FkTGluZUFcIikuY3NzKCd3aWR0aCcsIFwiMTAwJVwiKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi52aWRlb1BlcmNlbnRcIikudGV4dChcIuW3suWujOaIkFwiKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi51cGxvYWRSYXRpbyBzcGFuOm50aC1vZi10eXBlKDEpXCIpLnRleHQodmlkZW9Hc2l6ZStcIk1cIik7XG4gICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUmF0aW8gc3BhbjpudGgtb2YtdHlwZSgyKVwiKS50ZXh0KHZpZGVvR3NpemUrXCJNXCIpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCfkuIrkvKDlpLHotKUnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHByb2dyZXNzOiBmdW5jdGlvbihyZXN1bHQpe1xuICAgICAgICAgICAgICAgICAgICBpc19lZGl0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3ZpZGVvTmFtZScpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi52aWRlb1VwbG9hZEJveFwiKS5mYWRlSW4oMzAwKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi52aWRlb0JveFRpdGxlXCIpLnRleHQocmVzdWx0Lm5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiLnZpZGVvU2l6ZVwiKS50ZXh0KHZpZGVvR3NpemUrJ00nKTtcbiAgICAgICAgICAgICAgICAgICAgLy/op4bpopHmraPlnKjop6PmnpDkuK1cbiAgICAgICAgICAgICAgICAgICAgaWYocmVzdWx0LnNoYWN1cnI8MSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnZpZGVvUGVyY2VudFwiKS50ZXh0KFwi6KeG6aKR5q2j5Zyo6Kej5p6Q5LitXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi51cGxvYWRSYXRpbyBzcGFuXCIpLnRleHQoXCJcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnZpZGVvVXBsb2FkTGluZUFcIikuY3NzKFwid2lkdGhcIixcIjAlXCIpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZSBpZihyZXN1bHQuc2hhY3Vycj09MSkgeyAgIC8v6KeG6aKR6Kej5p6Q5a6M5oiQ77yM5byA5aeL5LiK5LygXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdXBsb2FkQ29tcGxldGVTaXplPXBhcnNlRmxvYXQodmlkZW9Hc2l6ZSkqcGFyc2VGbG9hdChyZXN1bHQuY3Vycik7XG4gICAgICAgICAgICAgICAgICAgICAgICB1cGxvYWRDb21wbGV0ZVNpemU9dXBsb2FkQ29tcGxldGVTaXplLnRvRml4ZWQoMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL+W9k+WJjeeZvuWIhuavlFxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJQZXJjZW50PU51bWJlcihyZXN1bHQuY3VycioxMDApLnRvRml4ZWQoMik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnZpZGVvVXBsb2FkTGluZUFcIikuY3NzKFwid2lkdGhcIixjdXJyUGVyY2VudCtcIiVcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnZpZGVvUGVyY2VudFwiKS50ZXh0KGN1cnJQZXJjZW50K1wiJVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUmF0aW8gc3BhbjpudGgtb2YtdHlwZSgxKVwiKS50ZXh0KHVwbG9hZENvbXBsZXRlU2l6ZStcIk1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFJhdGlvIHNwYW46bnRoLW9mLXR5cGUoMilcIikudGV4dCh2aWRlb0dzaXplK1wiTVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQudHlwZSA9PSAndmlkZW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBmaW5pc2g6IGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdmaW5pc2gnKTtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgZmlsZUlkPXJlc3VsdC5maWxlSWQ7XG4gICAgICAgICAgICAgICAgICAgIFZpZGVvTmFtZSA9IHJlc3VsdC52aWRlb05hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB2aWRlb1VwbG9hZDtcbn0oKTtcblxuXG4iXX0=
