$(function(){manageAlive.init()});var manageAlive=function(){var e={};var a;function r(e){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("直播名称不能为空！");return false}if($formCheck.emptyString(e.summary)){baseUtils.show.redTip("直播简介不能为空！");return false}if(e.alive_type==1&&fileId==null){baseUtils.show.redTip("请上传直播资源！");return false}if(is_edit){baseUtils.show.redTip("直播资源上传中！");return false}if($formCheck.emptyString(e.img_url)){baseUtils.show.redTip("请上传您的直播封面！");return false}if($formCheck.emptyString(e.start_at)){baseUtils.show.redTip("请填入您的直播上架时间！");return false}if($formCheck.emptyString(e.zb_start_at)){baseUtils.show.redTip("请填入您的直播开始时间！");return false}if($formCheck.emptyString(e.zb_stop_at)){baseUtils.show.redTip("请填入您的直播结束时间！");return false}if(!$formCheck.checkTime(e.start_at)){baseUtils.show.redTip("直播上架时间错误");return false}if(!$formCheck.checkTime(e.zb_start_at)){baseUtils.show.redTip("直播开始时间错误");return false}if(!$formCheck.checkTime(e.zb_stop_at)){baseUtils.show.redTip("直播结束时间错误");return false}if(uploadChannelType==1&&e.payment_type==2&&$formCheck.emptyString(e.piece_price)){baseUtils.show.redTip("您选择的付费形式为付费，请输入价格！");return false}if(uploadChannelType==1&&e.payment_type==2&&!$formCheck.checkNum(e.piece_price)){baseUtils.show.redTip("您的价格输入格式有误，请重新输入！");return false}if(uploadChannelType==1&&e.payment_type==2&&e.piece_price>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}if(!$formCheck.checkTimeOrder(e.zb_start_at,e.zb_stop_at)){baseUtils.show.redTip("直播结束时间必须大于直播开始时间！");return false}return true}function t(e,a){showLoading();$.ajax(e,{type:"POST",dataType:"json",data:a,success:function(e){if(parseInt(e.code)===0){baseUtils.show.blueTip("保存成功");window.location.href=backURL}else{hideLoading();baseUtils.show.redTip(e.msg);submitLimt=false}},error:function(e,a,r){hideLoading();console.error(r);baseUtils.show.redTip("网络错误，请稍后再试！");submitLimt=false}})}var i="";var s;var l;var n;classArray=[];var o;var c;var m;var d;function p(){$("#searchInput").val("");$(".memberPart").remove();$(".darkScreen").fadeOut(300)}e.init=function(){aliveTimeConfig("#zb_start_at");aliveTimeConfig("#zb_stop_at");$(".memberClassAdd").click(function(){i="";$(".eachLineContent").append("<div class='eachLine'>"+"<div class='memberName'>点击添加</div>"+"<input type='text' class='inputDefault memberCall' value='讲师'>"+"<div class='memberClear'>清空</div>"+"<input type='hidden' class='userId' />"+"<div class='btnLine'></div>"+"<div class='memberClassDelete'>删除</div>"+"</div>")});$(".eachLineContent").on("click",".memberClassDelete",function(){$(this).prev().prev().click();$(this).parent().remove()});$(".eachLineContent").on("click",".memberName",function(){l=$(".memberName").index($(this));console.log($(".memberName").eq(l).text());if($(".memberName").eq(l).text()=="点击添加"){console.log(l);c="";var e=" <p class='search_none'>暂无搜索结果，已成为讲师的用户可以在直播间快速邀请好友成为讲师</p>";$(".darkScreen").find(".memberList").html(e);$(".darkScreen").show()}});$(".eachLineContent").on("click",".memberClear",function(){var e=$(".memberClear").index($(this));$(".memberName").eq(e).text("点击添加");$(".memberCall").eq(e).val("讲师");$(".userId").eq(e).val("")});$(".boxCancel,.userSelectBoxClose").click(function(){p()});$(".memberList").on("click",".memberPart",function(){$(this).find("input").prop("checked",true);i=$(this).attr("id");console.log(i);s=$(this).find(".memberNickName").text()});$(".boxConfirm").click(function(){console.log(i);if(i==""){baseUtils.show.redTip("亲,请选择人哦~");return false}else{$(".userId").each(function(e){if($(this).val()==i){n=true}})}if(n){baseUtils.show.redTip("亲，请勿重复选择人员哦~");n=false;return false}if(i==""){baseUtils.show.redTip("亲，请选择人员哦~")}else{n=false;$(".memberName").eq(l).html(s);$(".userId").eq(l).val(i);i="";p()}});$("#searchInput").on("keypress",function(e){if(e.keyCode==13){$(".memberSearchBtn").click()}});$(".memberSearchBtn").click(function(){isDown=false;c=$("#searchInput").val();o=1;if(c.length==0){baseUtils.show.redTip("请输入搜索内容！");return false}e()});function e(){d=true;$("#loadingRefund").show();$.get("/zbsearch",{search:c,page:o},function(e){console.log(e);var a="",r=$(".memberList");if(e.data.length==0){$("#loadingRefund").fadeOut(100);a+='<div class="contentNoneTip">暂无数据</div>';r.html(a)}else{for(var t=0;t<e.data.length;t++){a+="<div class='memberPart' id='"+e.data[t].user_id+"'> "+"<div class='memberCheck'> <input class='with-gap' name='group10' type='radio' id='test"+t+"'/> "+"<label for='test"+t+"'></label> </div> "+"<div class='memberlogo'> <div class='memberImage'><img src="+e.data[t].wx_avatar+" alt=''>"+"</div> <div class='memberNickName'>"+e.data[t].wx_nickname+"</div> </div>"+"<div class='memberSex'>"+e.data[t].wx_gender+"</div>"+"<div class='memberPhone'>"+e.data[t].phone+"</div>"+" </div>"}$("#loadingRefund").fadeOut(100);if(o==1){r.html(a);r.append('<div class="hasDown">资源加载中...</div>')}else{r.find(".hasDown").before(a)}if(e.page_offset.current_page>=e.page_offset.total_pages){r.find(".hasDown").html("数据加载完毕。");isDown=true}d=false;o++}})}$(".darkScreen .memberListWrapper").scroll(function(a){var r=$(".memberList").height(),t=$(this).height(),i=$(this).scrollTop();if(i+t>=r-5&&!isDown&&!d){e()}});$(".completeBtn").click(function(){var e=$.trim($(".resName").val());var a=$.trim($("#aliveAbstract").val());var i=aliveT;var s=fileId;var l=$.trim($("#zb_start_at").val());var n=$.trim($("#zb_stop_at").val());var o=videoGsize;var c=$.trim($("#Image1Url").val());var m=$.trim($("#Image3Url").val());var d=UE.getEditor("resource_desc");var p=d.getContent();var f=d.getPlainTxt();if(f.length==0){baseUtils.show.redTip("描述不能为空!");return false}var u=$.trim($(".resPrize").val())*100;$('input[name="aliveClass"]:checked').each(function(){classArray.push($(this).attr("id"))});console.log(classArray);var h=aliveState;var v=$.trim($("#dateInput").val());for(var b=0,_=0;b<$(".eachLine").length;b++){var g={};g["role_name"]=$(".memberCall").eq(b).val().trim();g["user_name"]=$(".memberName").eq(b).html().trim();g["user_id"]=$(".userId").eq(b).val().trim();if(g["user_id"].length!=0){roleParams[_]=g;_++}}var k={title:e,summary:a,alive_type:i,img_url:c,alive_img_url:m,file_name:VideoName,zb_start_at:l,zb_stop_at:n,descrb:f,org_content:p,piece_price:u,state:h,start_at:v,id:GetQueryString("id")||null};var y={public_video:s,public_size_text:o};if(resourceFree){k.payment_type=resourceFree}k.if_push=if_push;if(if_push==0||if_push==1){k.push_ahead=push_ahead}if(r(k)){var T={params:k,resource_type:resourceType,upload_channel_type:uploadChannelType,package_id:packageId,resource_params:y,package_name:packageName,roleParams:roleParams,category_type:classArray};t(golbalUrl,T);console.log(T)}else{return false}})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZUFsaXZlLmpzIl0sIm5hbWVzIjpbIiQiLCJtYW5hZ2VBbGl2ZSIsImluaXQiLCJyZXNVcmwiLCJjaGVja0FsaXZlRm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJ0aXRsZSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJzdW1tYXJ5IiwiYWxpdmVfdHlwZSIsImZpbGVJZCIsImlzX2VkaXQiLCJpbWdfdXJsIiwic3RhcnRfYXQiLCJ6Yl9zdGFydF9hdCIsInpiX3N0b3BfYXQiLCJjaGVja1RpbWUiLCJ1cGxvYWRDaGFubmVsVHlwZSIsInBheW1lbnRfdHlwZSIsInBpZWNlX3ByaWNlIiwiY2hlY2tOdW0iLCJtYXhJbnB1dFByaWNlIiwiY2hlY2tUaW1lT3JkZXIiLCJzdWJtaXRGb3JtIiwidXJsIiwiYWxsUGFyYW1zIiwic2hvd0xvYWRpbmciLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwiZGF0YSIsInN1Y2Nlc3MiLCJwYXJzZUludCIsImNvZGUiLCJibHVlVGlwIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiYmFja1VSTCIsImhpZGVMb2FkaW5nIiwibXNnIiwic3VibWl0TGltdCIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiY29uc29sZSIsIm5vd1VzZXJpZCIsIm5vd1VzZXJOYW1lIiwiYWRkSW5kZXgiLCJzYW1lSWQiLCJjbGFzc0FycmF5IiwicGFnZSIsInNlYWNoZXIiLCJoYXNEb3duIiwiaXNMb2FkaW5nIiwiYm94Q29udGVudFJlc2V0IiwidmFsIiwicmVtb3ZlIiwiZmFkZU91dCIsImFsaXZlVGltZUNvbmZpZyIsImNsaWNrIiwiYXBwZW5kIiwib24iLCJ0aGlzIiwicHJldiIsInBhcmVudCIsImluZGV4IiwibG9nIiwiZXEiLCJ0ZXh0Iiwic3RyIiwiZmluZCIsImh0bWwiLCJ0ZW1wSW5kZXgiLCJwcm9wIiwiYXR0ciIsImVhY2giLCJpIiwiZSIsImtleUNvZGUiLCJpc0Rvd24iLCJsZW5ndGgiLCJnZXRVc2VyTGlzdCIsImdldCIsInNlYXJjaCIsIiRhcmVhIiwidXNlcl9pZCIsInd4X2F2YXRhciIsInd4X25pY2tuYW1lIiwid3hfZ2VuZGVyIiwicGhvbmUiLCJiZWZvcmUiLCJwYWdlX29mZnNldCIsImN1cnJlbnRfcGFnZSIsInRvdGFsX3BhZ2VzIiwic2Nyb2xsIiwiRGl2SGVpZ2h0IiwiaGVpZ2h0IiwiU2Nyb2xsSGVpZ2h0IiwiU2Nyb2xsVG9wIiwic2Nyb2xsVG9wIiwidHJpbSIsImFsaXZlVHlwZSIsImFsaXZlVCIsIkFsaXZlRmlsZUlkIiwiemJTdGFydEF0IiwiemJFbmRBdCIsIkFsaXZlU2l6ZSIsInZpZGVvR3NpemUiLCJpbWFnZTFVcmwiLCJpbWFnZTNVcmwiLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwib3JnQ29udGVudCIsImdldENvbnRlbnQiLCJkZXNjcmliIiwiZ2V0UGxhaW5UeHQiLCJyZXNQcml6ZSIsInB1c2giLCJzdGF0ZSIsImFsaXZlU3RhdGUiLCJzdGFydEF0IiwiaiIsInRtcCIsInJvbGVQYXJhbXMiLCJyZXNJbmZvIiwiYWxpdmVfaW1nX3VybCIsImZpbGVfbmFtZSIsIlZpZGVvTmFtZSIsImRlc2NyYiIsIm9yZ19jb250ZW50IiwiaWQiLCJHZXRRdWVyeVN0cmluZyIsInJlc291cmNlUGFyYW1zIiwicHVibGljX3ZpZGVvIiwicHVibGljX3NpemVfdGV4dCIsInJlc291cmNlRnJlZSIsImlmX3B1c2giLCJwdXNoX2FoZWFkIiwicGFyYW1zIiwicmVzb3VyY2VfdHlwZSIsInJlc291cmNlVHlwZSIsInVwbG9hZF9jaGFubmVsX3R5cGUiLCJwYWNrYWdlX2lkIiwicGFja2FnZUlkIiwicmVzb3VyY2VfcGFyYW1zIiwicGFja2FnZV9uYW1lIiwicGFja2FnZU5hbWUiLCJjYXRlZ29yeV90eXBlIiwiZ29sYmFsVXJsIl0sIm1hcHBpbmdzIjoiQUFJQUEsRUFBRSxXQUNFQyxZQUFZQyxRQUVoQixJQUFJRCxhQUFjLFdBQ2QsR0FBSUEsS0FFSixJQUFJ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QixPQUFRZCxFQUVSZSxZQUFhakIsRUFFYmhHLFlBQWFvRyxFQUViRSxNQUFNQSxFQUVONUcsU0FBVThHLEVBRVZVLEdBQUlDLGVBQWUsT0FBUyxLQUdoQyxJQUFJQyxJQUVBQyxhQUFjL0IsRUFFZGdDLGlCQUFrQjdCLEVBR3RCLElBQUc4QixhQUFjLENBQ2JYLEVBQVE3RyxhQUFld0gsYUFJM0JYLEVBQVFZLFFBQVVBLE9BQ2xCLElBQUdBLFNBQVMsR0FBS0EsU0FBUyxFQUFFLENBQ3hCWixFQUFRYSxXQUFhQSxXQUl6QixHQUFJNUksRUFBZStILEdBQVUsQ0FDekIsR0FBSXRHLElBQ0FvSCxPQUFRZCxFQUNSZSxjQUFlQyxhQUNmQyxvQkFBcUIvSCxrQkFDckJnSSxXQUFZQyxVQUNaQyxnQkFBaUJaLEVBQ2pCYSxhQUFjQyxZQUNkdkIsV0FBWUEsV0FDWndCLGNBQWNuRyxXQUVsQjVCLEdBQVdnSSxVQUFXOUgsRUFDdEJxQixTQUFRc0IsSUFBSTNDLE9BQ1QsQ0FDSCxNQUFPLFVBS25CLE9BQU81QiIsImZpbGUiOiJtYW5hZ2VBbGl2ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBqc2VyayBvbiAyMDE3LzMvMjMuXG4gKi9cblxuJChmdW5jdGlvbiAoKSB7XG4gICAgbWFuYWdlQWxpdmUuaW5pdCgpO1xufSk7XG52YXIgbWFuYWdlQWxpdmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG1hbmFnZUFsaXZlID0ge307XG5cbiAgICB2YXIgcmVzVXJsO1xuXG4gICAgLy/mo4Dmn6Xnm7Tmkq3mj5DkuqTooajljZVcbiAgICBmdW5jdGlvbiBjaGVja0FsaXZlRm9ybShpbmZvKSB7XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8udGl0bGUpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3lkI3np7DkuI3og73kuLrnqbrvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5zdW1tYXJ5KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt566A5LuL5LiN6IO95Li656m677yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpbmZvLmFsaXZlX3R5cGU9PTEmJihmaWxlSWQgPT0gbnVsbCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+S4iuS8oOebtOaSrei1hOa6kO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaXNfZWRpdCkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt6LWE5rqQ5LiK5Lyg5Lit77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uaW1nX3VybCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+S4iuS8oOaCqOeahOebtOaSreWwgemdou+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnN0YXJ0X2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35aGr5YWl5oKo55qE55u05pKt5LiK5p625pe26Ze077yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uemJfc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7floavlhaXmgqjnmoTnm7Tmkq3lvIDlp4vml7bpl7TvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby56Yl9zdG9wX2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35aGr5YWl5oKo55qE55u05pKt57uT5p2f5pe26Ze077yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja1RpbWUoaW5mby5zdGFydF9hdCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSreS4iuaetuaXtumXtOmUmeivr1wiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8uemJfc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3lvIDlp4vml7bpl7TplJnor69cIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLnpiX3N0b3BfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3nu5PmnZ/ml7bpl7TplJnor69cIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZENoYW5uZWxUeXBlPT0xICYmIGluZm8ucGF5bWVudF90eXBlID09IDIgJiYgJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnBpZWNlX3ByaWNlKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oKo6YCJ5oup55qE5LuY6LS55b2i5byP5Li65LuY6LS577yM6K+36L6T5YWl5Lu35qC877yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRDaGFubmVsVHlwZT09MSAmJiBpbmZvLnBheW1lbnRfdHlwZSA9PSAyICYmICEkZm9ybUNoZWNrLmNoZWNrTnVtKGluZm8ucGllY2VfcHJpY2UpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmgqjnmoTku7fmoLzovpPlhaXmoLzlvI/mnInor6/vvIzor7fph43mlrDovpPlhaXvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYodXBsb2FkQ2hhbm5lbFR5cGU9PSAxICYmIGluZm8ucGF5bWVudF90eXBlPT0gMiAmJiBpbmZvLnBpZWNlX3ByaWNlID4gYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKiAxMDApe1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Lu35qC85LiN6IO95aSn5LqOIFwiICsgYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKyBcIiDlhYNcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYoISRmb3JtQ2hlY2suY2hlY2tUaW1lT3JkZXIoaW5mby56Yl9zdGFydF9hdCxpbmZvLnpiX3N0b3BfYXQpKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSree7k+adn+aXtumXtOW/hemhu+Wkp+S6juebtOaSreW8gOWni+aXtumXtO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy/mj5DkuqTkv6Hmga9cbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKHVybCwgYWxsUGFyYW1zKSB7XG4gICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICQuYWpheCh1cmwsIHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOmFsbFBhcmFtcyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoZGF0YS5jb2RlKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5L+d5a2Y5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGJhY2tVUkw7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xuICAgICAgICAgICAgICAgICAgICBzdWJtaXRMaW10ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsc3RhdHVzLGVycikge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XG4gICAgICAgICAgICAgICAgc3VibWl0TGltdCA9IGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICB9XG5cbiAgICAvL+W9k+WJjea3u+WKoOeahOeUqOaIt1xuICAgIHZhciBub3dVc2VyaWQgPSAnJztcblxuICAgIC8v6YCJ5Lit55So5oi355qE55So5oi35ZCNXG4gICAgdmFyIG5vd1VzZXJOYW1lO1xuXG4gICAgLy/lvZPliY3pgInkuK3nmoTmrKHluo9cbiAgICB2YXIgYWRkSW5kZXg7XG5cbiAgICAvL+ebuOWQjOWvvOW4iOWIpOWummlkXG4gICAgdmFyICBzYW1lSWQ7XG5cbiAgICAvL+e9ruepuuWIhuexu+aVsOe7hFxuICAgIGNsYXNzQXJyYXk9W107XG4gICAgdmFyIHBhZ2U7XG4gICAgdmFyIHNlYWNoZXIgO1xuICAgIHZhciBoYXNEb3duIDtcbiAgICB2YXIgaXNMb2FkaW5nO1xuICAgIC8v6YeN572u5by55Ye65qGG5YaF5a655bm25YWz6Zet5by55Ye65qGGXG4gICAgZnVuY3Rpb24gYm94Q29udGVudFJlc2V0KCl7XG4gICAgICAgICQoXCIjc2VhcmNoSW5wdXRcIikudmFsKFwiXCIpO1xuICAgICAgICAkKFwiLm1lbWJlclBhcnRcIikucmVtb3ZlKCk7XG4gICAgICAgICQoXCIuZGFya1NjcmVlblwiKS5mYWRlT3V0KDMwMCk7XG4gICAgfVxuXG4gICAgbWFuYWdlQWxpdmUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICBhbGl2ZVRpbWVDb25maWcoXCIjemJfc3RhcnRfYXRcIik7XG4gICAgICAgIGFsaXZlVGltZUNvbmZpZyhcIiN6Yl9zdG9wX2F0XCIpO1xuICAgICAgICAvLyDmt7vliqDorrLluIjnsbtcbiAgICAgICAgJChcIi5tZW1iZXJDbGFzc0FkZFwiKS5jbGljayhmdW5jdGlvbigpe1xuICAgICAgICAgICAgbm93VXNlcmlkPScnO1xuICAgICAgICAgICAgJChcIi5lYWNoTGluZUNvbnRlbnRcIikuYXBwZW5kKFwiPGRpdiBjbGFzcz0nZWFjaExpbmUnPlwiK1xuICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nbWVtYmVyTmFtZSc+54K55Ye75re75YqgPC9kaXY+XCIrXG4gICAgICAgICAgICAgICAgXCI8aW5wdXQgdHlwZT0ndGV4dCcgY2xhc3M9J2lucHV0RGVmYXVsdCBtZW1iZXJDYWxsJyB2YWx1ZT0n6K6y5biIJz5cIitcbiAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlckNsZWFyJz7muIXnqbo8L2Rpdj5cIitcbiAgICAgICAgICAgICAgICBcIjxpbnB1dCB0eXBlPSdoaWRkZW4nIGNsYXNzPSd1c2VySWQnIC8+XCIrXG4gICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdidG5MaW5lJz48L2Rpdj5cIitcbiAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlckNsYXNzRGVsZXRlJz7liKDpmaQ8L2Rpdj5cIitcbiAgICAgICAgICAgICAgICBcIjwvZGl2PlwiKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy/liKDpmaTlr7zluIjnsbtcbiAgICAgICAgJChcIi5lYWNoTGluZUNvbnRlbnRcIikub24oXCJjbGlja1wiLFwiLm1lbWJlckNsYXNzRGVsZXRlXCIsZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5wcmV2KCkucHJldigpLmNsaWNrKCk7XG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+eCueWHu+a3u+WKoFxuICAgICAgICAkKFwiLmVhY2hMaW5lQ29udGVudFwiKS5vbihcImNsaWNrXCIsXCIubWVtYmVyTmFtZVwiLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICBhZGRJbmRleCA9ICgkKFwiLm1lbWJlck5hbWVcIikuaW5kZXgoJCh0aGlzKSkpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJChcIi5tZW1iZXJOYW1lXCIpLmVxKGFkZEluZGV4KS50ZXh0KCkpO1xuICAgICAgICAgICAgaWYoJChcIi5tZW1iZXJOYW1lXCIpLmVxKGFkZEluZGV4KS50ZXh0KCk9PVwi54K55Ye75re75YqgXCIpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhZGRJbmRleCk7XG4gICAgICAgICAgICAgICAvLyBwYWdlPTE7XG4gICAgICAgICAgICAgICAvLyBzZWFjaGVyPVwiXCIgO1xuICAgICAgICAgICAgICAgLy8gaGFzRG93biA9ZmFsc2U7XG4gICAgICAgICAgICAgICAgLy9pc0xvYWRpbmc9ZmFsc2U7XG4gICAgICAgICAgICAgICAgc2VhY2hlcj1cIlwiIDtcbiAgICAgICAgICAgICAgICB2YXIgc3RyID1cIiA8cCBjbGFzcz0nc2VhcmNoX25vbmUnPuaaguaXoOaQnOe0oue7k+aenO+8jOW3suaIkOS4uuiusuW4iOeahOeUqOaIt+WPr+S7peWcqOebtOaSremXtOW/q+mAn+mCgOivt+WlveWPi+aIkOS4uuiusuW4iDwvcD5cIjtcbiAgICAgICAgICAgICAgICAkKFwiLmRhcmtTY3JlZW5cIikuZmluZCgnLm1lbWJlckxpc3QnKS5odG1sKHN0cik7XG4gICAgICAgICAgICAgICAgJChcIi5kYXJrU2NyZWVuXCIpLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy/muIXnqbpcbiAgICAgICAgJChcIi5lYWNoTGluZUNvbnRlbnRcIikub24oXCJjbGlja1wiLFwiLm1lbWJlckNsZWFyXCIsZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIHRlbXBJbmRleCA9ICQoXCIubWVtYmVyQ2xlYXJcIikuaW5kZXgoJCh0aGlzKSk7XG4gICAgICAgICAgICAkKFwiLm1lbWJlck5hbWVcIikuZXEodGVtcEluZGV4KS50ZXh0KFwi54K55Ye75re75YqgXCIpO1xuICAgICAgICAgICAgJChcIi5tZW1iZXJDYWxsXCIpLmVxKHRlbXBJbmRleCkudmFsKFwi6K6y5biIXCIpO1xuICAgICAgICAgICAgJChcIi51c2VySWRcIikuZXEodGVtcEluZGV4KS52YWwoXCJcIik7XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy/lhbPpl63lvLnlh7rmoYZcbiAgICAgICAgJChcIi5ib3hDYW5jZWwsLnVzZXJTZWxlY3RCb3hDbG9zZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBib3hDb250ZW50UmVzZXQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy/nu5nlvLnlh7rmoYbnlKjmiLfliJfooajlrZDljZXlhYPnu5HlrppjbGlja+S6i+S7tlxuICAgICAgICAkKFwiLm1lbWJlckxpc3RcIikub24oXCJjbGlja1wiLCBcIi5tZW1iZXJQYXJ0XCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykuZmluZChcImlucHV0XCIpLnByb3AoXCJjaGVja2VkXCIsIHRydWUpO1xuICAgICAgICAgICAgLy8gICAg6I635Y+W6YCJ5Lit55So5oi355qEaWTlkI1cbiAgICAgICAgICAgIG5vd1VzZXJpZCA9ICQodGhpcykuYXR0cignaWQnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vd1VzZXJpZCk7XG4gICAgICAgICAgICAvLyAgICDojrflj5bpgInkuK3nlKjmiLfnmoTmmLXnp7BcbiAgICAgICAgICAgIG5vd1VzZXJOYW1lID0gJCh0aGlzKS5maW5kKFwiLm1lbWJlck5pY2tOYW1lXCIpLnRleHQoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy/noa7orqTmt7vliqDorrLov7BcbiAgICAgICAgJChcIi5ib3hDb25maXJtXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG5vd1VzZXJpZCk7XG4gICAgICAgICAgICBpZihub3dVc2VyaWQ9PScnKSB7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LqyLOivt+mAieaLqeS6uuWTpn5cIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCIudXNlcklkXCIpLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCQodGhpcykudmFsKCkgPT0gbm93VXNlcmlkKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBzYW1lSWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZihzYW1lSWQpe1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS6su+8jOivt+WLv+mHjeWkjemAieaLqeS6uuWRmOWTpn5cIik7XG4gICAgICAgICAgICAgICAgc2FtZUlkPWZhbHNlO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobm93VXNlcmlkID09IFwiXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Lqy77yM6K+36YCJ5oup5Lq65ZGY5ZOmflwiKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBzYW1lSWQ9ZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIC8vICAgIOmdouadv+i1i+WAvFxuICAgICAgICAgICAgICAgICAgICAkKFwiLm1lbWJlck5hbWVcIikuZXEoYWRkSW5kZXgpLmh0bWwobm93VXNlck5hbWUpO1xuICAgICAgICAgICAgICAgICAgICAvL+W4puWFpXVzZXJpZFxuICAgICAgICAgICAgICAgICAgICAkKFwiLnVzZXJJZFwiKS5lcShhZGRJbmRleCkudmFsKG5vd1VzZXJpZCk7XG4gICAgICAgICAgICAgICAgICAgIG5vd1VzZXJpZCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgICAgIGJveENvbnRlbnRSZXNldCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgICAgICAkKFwiI3NlYXJjaElucHV0XCIpLm9uKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICQoXCIubWVtYmVyU2VhcmNoQnRuXCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIi5tZW1iZXJTZWFyY2hCdG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXNEb3duID0gZmFsc2U7XG4gICAgICAgICAgICBzZWFjaGVyID0gJChcIiNzZWFyY2hJbnB1dFwiKS52YWwoKTtcbiAgICAgICAgICAgIHBhZ2UgPSAxO1xuICAgICAgICAgICAgaWYgKHNlYWNoZXIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fovpPlhaXmkJzntKLlhoXlrrnvvIFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZ2V0VXNlckxpc3QoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgZnVuY3Rpb24gZ2V0VXNlckxpc3QoKXtcbiAgICAgICAgICAgIGlzTG9hZGluZyA9dHJ1ZTtcbiAgICAgICAgICAgICQoXCIjbG9hZGluZ1JlZnVuZFwiKS5zaG93KCk7XG4gICAgICAgICAgICAkLmdldChcIi96YnNlYXJjaFwiLCB7XCJzZWFyY2hcIjogc2VhY2hlcixcInBhZ2VcIjpwYWdlfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RyPVwiXCIsXG4gICAgICAgICAgICAgICAgICAgICRhcmVhID0gICQoXCIubWVtYmVyTGlzdFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNsb2FkaW5nUmVmdW5kXCIpLmZhZGVPdXQoMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8ZGl2IGNsYXNzPVwiY29udGVudE5vbmVUaXBcIj7mmoLml6DmlbDmja48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAkYXJlYS5odG1sKHN0cik7XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyKz1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlclBhcnQnIGlkPSdcIiArIGRhdGEuZGF0YVtpXS51c2VyX2lkICsgXCInPiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nbWVtYmVyQ2hlY2snPiA8aW5wdXQgY2xhc3M9J3dpdGgtZ2FwJyBuYW1lPSdncm91cDEwJyB0eXBlPSdyYWRpbycgaWQ9J3Rlc3RcIiArIGkgKyBcIicvPiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGxhYmVsIGZvcj0ndGVzdFwiICsgaSArIFwiJz48L2xhYmVsPiA8L2Rpdj4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlcmxvZ28nPiA8ZGl2IGNsYXNzPSdtZW1iZXJJbWFnZSc+PGltZyBzcmM9XCIgKyBkYXRhLmRhdGFbaV0ud3hfYXZhdGFyICsgXCIgYWx0PScnPlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj4gPGRpdiBjbGFzcz0nbWVtYmVyTmlja05hbWUnPlwiICsgZGF0YS5kYXRhW2ldLnd4X25pY2tuYW1lICsgXCI8L2Rpdj4gPC9kaXY+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlclNleCc+XCIgK2RhdGEuZGF0YVtpXS53eF9nZW5kZXIgKyBcIjwvZGl2PlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlclBob25lJz5cIiArIGRhdGEuZGF0YVtpXS5waG9uZSArIFwiPC9kaXY+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiIDwvZGl2PlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICQoXCIjbG9hZGluZ1JlZnVuZFwiKS5mYWRlT3V0KDEwMCk7XG4gICAgICAgICAgICAgICAgICAgIGlmKCBwYWdlID09MSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuaHRtbChzdHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiaGFzRG93blwiPui1hOa6kOWKoOi9veS4rS4uLjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhcmVhLmZpbmQoJy5oYXNEb3duJykuYmVmb3JlKHN0cik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEucGFnZV9vZmZzZXQuY3VycmVudF9wYWdlID49IGRhdGEucGFnZV9vZmZzZXQudG90YWxfcGFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuZmluZCgnLmhhc0Rvd24nKS5odG1sKFwi5pWw5o2u5Yqg6L295a6M5q+V44CCXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Rvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBwYWdlKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuXG4gICAgICAgICQoJy5kYXJrU2NyZWVuIC5tZW1iZXJMaXN0V3JhcHBlcicpLnNjcm9sbChmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIHZhciBEaXZIZWlnaHQgPSAkKCcubWVtYmVyTGlzdCcpLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgIFNjcm9sbEhlaWdodCA9ICQodGhpcykuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgU2Nyb2xsVG9wID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgIGlmICgoU2Nyb2xsVG9wICsgU2Nyb2xsSGVpZ2h0ID49IERpdkhlaWdodCAtIDUpICYmXG4gICAgICAgICAgICAgICAgIWlzRG93biAmJiAhaXNMb2FkaW5nICkge1xuICAgICAgICAgICAgICAgIGdldFVzZXJMaXN0KCk7XG4gICAgICAgICAgICAgICAvKiAkKFwiI2xvYWRpbmdSZWZ1bmRcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgIGdldFVzZXJMaXN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNsb2FkaW5nUmVmdW5kXCIpLmZhZGVPdXQoMTAwKTtcbiAgICAgICAgICAgICAgICB9KTsqL1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAg5by556qX5o+Q56S66YKA6K+36K6y5biI6aKE6KeI5Zu+XG4gICAgICAgIC8vICQoXCIuaW52aXRlX3RlYWNoZXJfdGlwIHNwYW5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAvL1xuICAgICAgICAvL1xuICAgICAgICAvL1xuICAgICAgICAvLyB9KTtcblxuXG5cbiAgICAgICAgLy8g5o+Q5Lqk55u05pKt6KGo5Y2VXG4gICAgICAgICQoXCIuY29tcGxldGVCdG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAvL+iOt+WPluebtOaSreihqOWNleaVsOaNrlxuICAgICAgICAgICAgLy/nm7Tmkq3lkI3np7BcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICQudHJpbSgkKFwiLnJlc05hbWVcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreeugOS7i1xuICAgICAgICAgICAgdmFyIHN1bW1hcnk9JC50cmltKCQoXCIjYWxpdmVBYnN0cmFjdFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt57G75Z6LXG4gICAgICAgICAgICB2YXIgYWxpdmVUeXBlPWFsaXZlVDtcblxuICAgICAgICAgICAgLy/nm7Tmkq3ngrnmkq1pZFxuICAgICAgICAgICAgdmFyIEFsaXZlRmlsZUlkID0gZmlsZUlkO1xuXG4gICAgICAgICAgICAvL+ebtOaSreW8gOWni+aXtumXtFxuICAgICAgICAgICAgdmFyIHpiU3RhcnRBdCA9ICQudHJpbSgkKFwiI3piX3N0YXJ0X2F0XCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3nu5PmnZ/ml7bpl7RcbiAgICAgICAgICAgIHZhciB6YkVuZEF0ID0gJC50cmltKCQoXCIjemJfc3RvcF9hdFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt5aSn5bCPXG4gICAgICAgICAgICB2YXIgQWxpdmVTaXplID0gdmlkZW9Hc2l6ZTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3lsIHpnaLlnLDlnYBcbiAgICAgICAgICAgIHZhciBpbWFnZTFVcmwgPSAkLnRyaW0oJChcIiNJbWFnZTFVcmxcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSrei0tOeJh+WcsOWdgFxuICAgICAgICAgICAgdmFyIGltYWdlM1VybCA9ICQudHJpbSgkKFwiI0ltYWdlM1VybFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt5Y6f5aeL5YaF5a656K+m5oOFXG4gICAgICAgICAgICB2YXIgdWUgPSBVRS5nZXRFZGl0b3IoJ3Jlc291cmNlX2Rlc2MnKTtcbiAgICAgICAgICAgIHZhciBvcmdDb250ZW50ID0gdWUuZ2V0Q29udGVudCgpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreWGheWuueaPj+i/sFxuICAgICAgICAgICAgdmFyIGRlc2NyaWIgPSB1ZS5nZXRQbGFpblR4dCgpO1xuICAgICAgICAgICAgaWYgKGRlc2NyaWIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+aPj+i/sOS4jeiDveS4uuepuiEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy/ku5jotLnku7fmoLxcbiAgICAgICAgICAgIHZhciByZXNQcml6ZSA9ICQudHJpbSgkKFwiLnJlc1ByaXplXCIpLnZhbCgpKSAqIDEwMDtcblxuICAgICAgICAgICAgLy/nm7Tmkq3pgInmi6nliIbnsbtcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJhbGl2ZUNsYXNzXCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgY2xhc3NBcnJheS5wdXNoKCQodGhpcykuYXR0cignaWQnKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNsYXNzQXJyYXkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreeKtuaAgVxuICAgICAgICAgICAgdmFyIHN0YXRlPWFsaXZlU3RhdGU7XG4gICAgICAgICAgICAvL+S4iuaetuaXtumXtFxuICAgICAgICAgICAgdmFyIHN0YXJ0QXQgPSAkLnRyaW0oJChcIiNkYXRlSW5wdXRcIikudmFsKCkpO1xuXG4gICAgICAgICAgICBmb3IodmFyIGk9MCxqPTA7aTwkKFwiLmVhY2hMaW5lXCIpLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgICAgICAvL+ebtOaSreinkuiJsueahOWAvFxuICAgICAgICAgICAgICAgIHZhciB0bXAgPSB7fTtcbiAgICAgICAgICAgICAgICB0bXBbXCJyb2xlX25hbWVcIl0gPSAkKFwiLm1lbWJlckNhbGxcIikuZXEoaSkudmFsKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIHRtcFtcInVzZXJfbmFtZVwiXSA9ICQoXCIubWVtYmVyTmFtZVwiKS5lcShpKS5odG1sKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIHRtcFtcInVzZXJfaWRcIl0gPSAkKFwiLnVzZXJJZFwiKS5lcShpKS52YWwoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRtcFtcInVzZXJfaWRcIl0ubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy/orrLluIjliJfooahcbiAgICAgICAgICAgICAgICAgICAgcm9sZVBhcmFtc1tqXSA9IHRtcDtcbiAgICAgICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v55u05pKt5Y2V5ZOB5LiK5Lyg5L+h5oGvXG4gICAgICAgICAgICB2YXIgcmVzSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAvLyDnm7Tmkq3lkI3np7BcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nroDku4tcbiAgICAgICAgICAgICAgICBzdW1tYXJ5OnN1bW1hcnksXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nsbvlnotcbiAgICAgICAgICAgICAgICBhbGl2ZV90eXBlOmFsaXZlVHlwZSxcbiAgICAgICAgICAgICAgICAvLyAgIOebtOaSreWwgemdouWcsOWdgFxuICAgICAgICAgICAgICAgIGltZ191cmw6IGltYWdlMVVybCxcbiAgICAgICAgICAgICAgICAvL+ebtOaSreWuo+S8oOWwgemdouWcsOWdgFxuICAgICAgICAgICAgICAgIGFsaXZlX2ltZ191cmw6IGltYWdlM1VybCxcbiAgICAgICAgICAgICAgICAvL+inhumikeWQjeensFxuICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogVmlkZW9OYW1lLFxuICAgICAgICAgICAgICAgIC8v55u05pKt5byA5aeL5pe26Ze0XG4gICAgICAgICAgICAgICAgemJfc3RhcnRfYXQ6emJTdGFydEF0LFxuICAgICAgICAgICAgICAgIC8v55u05pKt57uT5p2f5pe26Ze0XG4gICAgICAgICAgICAgICAgemJfc3RvcF9hdDp6YkVuZEF0LFxuICAgICAgICAgICAgICAgIC8v5LqR54K55pKt5paH5Lu2aWRcbiAgICAgICAgICAgICAgICAvL2ZpbGVfaWQ6IEFsaXZlRmlsZUlkLFxuICAgICAgICAgICAgICAgIC8vLy8g55u05pKt5aSn5bCPXG4gICAgICAgICAgICAgICAgLy92aWRlb19zaXplOiBBbGl2ZVNpemUsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3or6bmg4VcbiAgICAgICAgICAgICAgICBkZXNjcmI6IGRlc2NyaWIsXG4gICAgICAgICAgICAgICAgLy/ljp/lp4vmlofmnKxcbiAgICAgICAgICAgICAgICBvcmdfY29udGVudDogb3JnQ29udGVudCxcbiAgICAgICAgICAgICAgICAvL+S7mOi0ueS7t+agvFxuICAgICAgICAgICAgICAgIHBpZWNlX3ByaWNlOiByZXNQcml6ZSxcbiAgICAgICAgICAgICAgICAvL+ebtOaSreeKtuaAgVxuICAgICAgICAgICAgICAgIHN0YXRlOnN0YXRlLFxuICAgICAgICAgICAgICAgIC8v5LiK5p625pe26Ze0XG4gICAgICAgICAgICAgICAgc3RhcnRfYXQ6IHN0YXJ0QXQsXG4gICAgICAgICAgICAgICAgLy9pZFxuICAgICAgICAgICAgICAgIGlkOiBHZXRRdWVyeVN0cmluZygnaWQnKSB8fCBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy/nm7Tmkq3pop3lpJbkv6Hmga9cbiAgICAgICAgICAgIHZhciByZXNvdXJjZVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAvL+S6keeCueaSreebtOaSrWlkXG4gICAgICAgICAgICAgICAgcHVibGljX3ZpZGVvOiBBbGl2ZUZpbGVJZCxcbiAgICAgICAgICAgICAgICAvL+ebtOaSreWkp+Wwj1xuICAgICAgICAgICAgICAgIHB1YmxpY19zaXplX3RleHQ6IEFsaXZlU2l6ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/mmK/lkKbku5jotLnvvIgx6KGo56S65YWN6LS577yMMuihqOekuuWNleeslO+8iVxuICAgICAgICAgICAgaWYocmVzb3VyY2VGcmVlKSB7XG4gICAgICAgICAgICAgICAgcmVzSW5mby5wYXltZW50X3R5cGUgPSByZXNvdXJjZUZyZWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8v55u05pKt5o+Q6YaSXG4gICAgICAgICAgICByZXNJbmZvLmlmX3B1c2ggPSBpZl9wdXNoO1xuICAgICAgICAgICAgaWYoaWZfcHVzaD09MCB8fCBpZl9wdXNoPT0xKXtcbiAgICAgICAgICAgICAgICByZXNJbmZvLnB1c2hfYWhlYWQgPSBwdXNoX2FoZWFkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+iOt+WPluihqOWNleS4reeahOaVsOaNrlxuICAgICAgICAgICAgaWYgKGNoZWNrQWxpdmVGb3JtKHJlc0luZm8pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsbFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiByZXNJbmZvLFxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiByZXNvdXJjZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZF9jaGFubmVsX3R5cGU6IHVwbG9hZENoYW5uZWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX2lkOiBwYWNrYWdlSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3BhcmFtczogcmVzb3VyY2VQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHBhY2thZ2VfbmFtZTogcGFja2FnZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGVQYXJhbXM6IHJvbGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5X3R5cGU6Y2xhc3NBcnJheVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgc3VibWl0Rm9ybShnb2xiYWxVcmwsIGFsbFBhcmFtcyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWxsUGFyYW1zKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBtYW5hZ2VBbGl2ZTtcbn0oKTtcbiJdfQ==
