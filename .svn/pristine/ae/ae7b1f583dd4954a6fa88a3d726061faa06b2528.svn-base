(function(i,e,t,s){e(function(){new n});function n(i){this.options=i||{};this.app_id=e("#app_id").val();this.pay_verify=e("#pay_verify").val();this.is_update=e("#is_update").val();this.change=GetQueryString("change");this.init()}n.prototype={init:function(){var i=this;this.authHandle();if(this.pay_verify==0){if(this.is_update==0){e("#updateBindBtn").click(function(){e.get("/mini/updateBind",function(i){if(i.code==0){reloadPage()}else{console.error(i.msg);reloadPage()}},"json")})}else{e("#experUrlCode").attr("src",miniexperUrl+this.app_id);var t=new QRCode(document.getElementById("H5UrlCode"),{text:e("#H5Url").val(),width:135,height:135,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});e("#screenBtn").click(function(){e.post("/mini/userCheck",function(i){console.log(i);if(i.code==0){e.alert("用户验证成功，您的小程序即将提交微信审核，请耐心等待!","success",{title:"验证成功",btn:2,onOk:function(){window.location.reload()}})}else{console.error(i.msg);e.alert("用户验证失败，请确认您关联至开放平台的小程序和服务号与授权信息一致。或者请重新使用管理员微信扫描两个二维码。确认无误仍无法验证成功，请联系产品鹅微信：chanpine2","error",{title:"",btn:2})}},"json")})}}else{if(this.change==1){this.editInfo()}}e("#editImg").click(this.editInfo.bind(this));e("#saveMer").click(this.saveMer.bind(this));e("#resubmitAudit").click(this.reSubmitAudit.bind(this))},authHandle:function(){var i=this.app_id;e("#reAuth").click(t);e("#bindSuccess").click(function(){window.location.reload()});e("#bindFail").click(t);function t(){var t=window.open("","_blank");e.post("/mini/authority ",{app_id:i},function(s){if(s.code==0){t.location.href=miniauthUrl+i;e("#bindModal").modal("show")}else{baseUtils.show.redTip("系统繁忙")}},"json")}},editInfo:function(){e("#setMiniInfo input").prop("disabled",false).removeClass("disEdit");e("#saveMer").parent().removeClass("hide")},editsuccess:function(){e("#setMiniInfo input").prop("disabled",true).addClass("disEdit");e("#saveMer").parent().addClass("hide");if(e("#editImg").hasClass("hide")){e("#editImg").removeClass("hide")}if(!e("#pay_set_hint").hasClass("hide")){e("#pay_set_hint").addClass("hide")}e.alert("小程序正在开发中，等待提交审核，约1个工作日，请耐心等待","success",{title:"设置成功",btn:2})},saveMer:function(){var i=e.trim(e("#wx_mchid").val()),t=e.trim(e("#wx_mchkey").val()),s=this;if(i==""){baseUtils.show.redTip("商户号不能为空");return false}if(t==""){baseUtils.show.redTip("API密钥不能为空");return false}e.post("/mini/merchant",{wx_mchid:i,wx_mchkey:t},function(i){if(i.code==0){s.editsuccess()}else{baseUtils.show.redTip(i.msg)}},"json")},reSubmitAudit:function(){var i=e("#app_id").val();e.alert("请确认已按照审核失败原因进行修改并重新提交审核!","info",{title:"",btn:3,oktext:"提交审核",onOk:function(){e.post("/mini/resubmitAudit ",{app_id:i},function(i){if(i.code==0){baseUtils.show.blueTip("提交审核成功");window.location.reload()}else{baseUtils.show.redTip("提交审核失败")}},"json")}})}}})(window,window.$,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZm8uanMiXSwibmFtZXMiOlsid2luIiwiJCIsImRvYyIsInVuZGVmaW5lZCIsIlBlcnNvbiIsIm9wdGlvbnMiLCJ0aGlzIiwiYXBwX2lkIiwidmFsIiwicGF5X3ZlcmlmeSIsImlzX3VwZGF0ZSIsImNoYW5nZSIsIkdldFF1ZXJ5U3RyaW5nIiwiaW5pdCIsInByb3RvdHlwZSIsInNlbGYiLCJhdXRoSGFuZGxlIiwiY2xpY2siLCJnZXQiLCJqc29uIiwiY29kZSIsInJlbG9hZFBhZ2UiLCJjb25zb2xlIiwiZXJyb3IiLCJtc2ciLCJhdHRyIiwibWluaWV4cGVyVXJsIiwicXJjb2RlIiwiUVJDb2RlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRleHQiLCJ3aWR0aCIsImhlaWdodCIsImNvbG9yRGFyayIsImNvbG9yTGlnaHQiLCJjb3JyZWN0TGV2ZWwiLCJDb3JyZWN0TGV2ZWwiLCJIIiwicG9zdCIsImxvZyIsImFsZXJ0IiwidGl0bGUiLCJidG4iLCJvbk9rIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJlZGl0SW5mbyIsImJpbmQiLCJzYXZlTWVyIiwicmVTdWJtaXRBdWRpdCIsInNob3dOZXdXaW4iLCJuZXdXaW4iLCJvcGVuIiwiaHJlZiIsIm1pbmlhdXRoVXJsIiwibW9kYWwiLCJiYXNlVXRpbHMiLCJzaG93IiwicmVkVGlwIiwicHJvcCIsInJlbW92ZUNsYXNzIiwicGFyZW50IiwiZWRpdHN1Y2Nlc3MiLCJhZGRDbGFzcyIsImhhc0NsYXNzIiwid3hfbWNoaWQiLCJ0cmltIiwid3hfbWNoa2V5Iiwib2t0ZXh0IiwiYmx1ZVRpcCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBV0EsRUFBS0MsRUFBR0MsRUFBS0MsR0FDcEJGLEVBQUUsV0FDRSxHQUFJRyxJQUlSLFNBQVNBLEdBQU9DLEdBQ1pDLEtBQUtELFFBQVVBLEtBQ2ZDLE1BQUtDLE9BQVNOLEVBQUUsV0FBV08sS0FDM0JGLE1BQUtHLFdBQWFSLEVBQUUsZUFBZU8sS0FDbkNGLE1BQUtJLFVBQVlULEVBQUUsY0FBY08sS0FDakNGLE1BQUtLLE9BQVNDLGVBQWUsU0FDN0JOLE1BQUtPLE9BR1RULEVBQU9VLFdBQ0hELEtBQU0sV0FDRixHQUFJRSxHQUFPVCxJQUNYQSxNQUFLVSxZQUVMLElBQUlWLEtBQUtHLFlBQWMsRUFBRyxDQUN0QixHQUFJSCxLQUFLSSxXQUFhLEVBQUcsQ0FDckJULEVBQUUsa0JBQWtCZ0IsTUFBTSxXQUN0QmhCLEVBQUVpQixJQUFJLG1CQUFvQixTQUFVQyxHQUVoQyxHQUFJQSxFQUFLQyxNQUFRLEVBQUcsQ0FDaEJDLGlCQUNHLENBQ0hDLFFBQVFDLE1BQU1KLEVBQUtLLElBQ25CSCxnQkFFTCxjQUVKLENBQ0hwQixFQUFFLGlCQUFpQndCLEtBQUssTUFBT0MsYUFBZXBCLEtBQUtDLE9BQ25ELElBQUlvQixHQUFTLEdBQUlDLFFBQU9DLFNBQVNDLGVBQWUsY0FDNUNDLEtBQU05QixFQUFFLFVBQVVPLE1BQ2xCd0IsTUFBTyxJQUNQQyxPQUFRLElBQ1JDLFVBQVcsVUFDWEMsV0FBWSxVQUNaQyxhQUFjUixPQUFPUyxhQUFhQyxHQUV0Q3JDLEdBQUUsY0FBY2dCLE1BQU0sV0FDbEJoQixFQUFFc0MsS0FBSyxrQkFBbUIsU0FBVXBCLEdBQ2hDRyxRQUFRa0IsSUFBSXJCLEVBQ1osSUFBSUEsRUFBS0MsTUFBUSxFQUFHLENBTWhCbkIsRUFBRXdDLE1BQU0sOEJBQStCLFdBQ25DQyxNQUFPLE9BQ1BDLElBQUssRUFDTEMsS0FBSyxXQUNEQyxPQUFPQyxTQUFTQyxnQkFHckIsQ0FFSHpCLFFBQVFDLE1BQU1KLEVBQUtLLElBQ25CdkIsR0FBRXdDLE1BQU0sdUZBQ0osU0FFSUMsTUFBTyxHQUNQQyxJQUFLLE1BR2xCLGVBR1IsQ0FDSCxHQUFJckMsS0FBS0ssUUFBVSxFQUFHLENBQ2xCTCxLQUFLMEMsWUFJYi9DLEVBQUUsWUFBWWdCLE1BQU1YLEtBQUswQyxTQUFTQyxLQUFLM0MsTUFFdkNMLEdBQUUsWUFBWWdCLE1BQU1YLEtBQUs0QyxRQUFRRCxLQUFLM0MsTUFFdENMLEdBQUUsa0JBQWtCZ0IsTUFBTVgsS0FBSzZDLGNBQWNGLEtBQUszQyxRQUd0RFUsV0FBWSxXQUNSLEdBQUlULEdBQVNELEtBQUtDLE1BRWxCTixHQUFFLFdBQVdnQixNQUFNbUMsRUFHbkJuRCxHQUFFLGdCQUFnQmdCLE1BQU0sV0FDcEI0QixPQUFPQyxTQUFTQyxVQUlwQjlDLEdBQUUsYUFBYWdCLE1BQU1tQyxFQUVyQixTQUFTQSxLQUNMLEdBQUlDLEdBQVNSLE9BQU9TLEtBQUssR0FBSSxTQUM3QnJELEdBQUVzQyxLQUFLLG9CQUFxQmhDLE9BQVVBLEdBQVMsU0FBVVksR0FDckQsR0FBSUEsRUFBS0MsTUFBUSxFQUFHLENBQ2hCaUMsRUFBT1AsU0FBU1MsS0FBT0MsWUFBY2pELENBQ3JDTixHQUFFLGNBQWN3RCxNQUFNLFlBQ25CLENBQ0hDLFVBQVVDLEtBQUtDLE9BQU8sVUFFM0IsVUFHWFosU0FBVSxXQUNOL0MsRUFBRSxzQkFBc0I0RCxLQUFLLFdBQVksT0FBT0MsWUFBWSxVQUM1RDdELEdBQUUsWUFBWThELFNBQVNELFlBQVksU0FFdkNFLFlBQWEsV0FDVC9ELEVBQUUsc0JBQXNCNEQsS0FBSyxXQUFZLE1BQU1JLFNBQVMsVUFDeERoRSxHQUFFLFlBQVk4RCxTQUFTRSxTQUFTLE9BQ2hDLElBQUloRSxFQUFFLFlBQVlpRSxTQUFTLFFBQVMsQ0FDaENqRSxFQUFFLFlBQVk2RCxZQUFZLFFBRTlCLElBQU03RCxFQUFFLGlCQUFpQmlFLFNBQVMsUUFBVSxDQUN4Q2pFLEVBQUUsaUJBQWlCZ0UsU0FBUyxRQUdoQ2hFLEVBQUV3QyxNQUFNLCtCQUNKLFdBRUlDLE1BQU8sT0FDUEMsSUFBSyxLQUdqQk8sUUFBUyxXQUNMLEdBQUlpQixHQUFXbEUsRUFBRW1FLEtBQUtuRSxFQUFFLGFBQWFPLE9BQ2pDNkQsRUFBWXBFLEVBQUVtRSxLQUFLbkUsRUFBRSxjQUFjTyxPQUNuQ08sRUFBT1QsSUFDWCxJQUFJNkQsR0FBWSxHQUFJLENBQ2hCVCxVQUFVQyxLQUFLQyxPQUFPLFVBQ3RCLE9BQU8sT0FFWCxHQUFJUyxHQUFhLEdBQUksQ0FDakJYLFVBQVVDLEtBQUtDLE9BQU8sWUFDdEIsT0FBTyxPQUVYM0QsRUFBRXNDLEtBQUssa0JBQ0g0QixTQUFVQSxFQUNWRSxVQUFXQSxHQUNaLFNBQVVsRCxHQUNULEdBQUlBLEVBQUtDLE1BQVEsRUFBRyxDQUNoQkwsRUFBS2lELGtCQUNGLENBQ0hOLFVBQVVDLEtBQUtDLE9BQU96QyxFQUFLSyxPQUVoQyxTQUVQMkIsY0FBYyxXQUNWLEdBQUk1QyxHQUFTTixFQUFFLFdBQVdPLEtBQzFCUCxHQUFFd0MsTUFBTSwyQkFBNEIsUUFDaENDLE1BQU8sR0FDUEMsSUFBSyxFQUNMMkIsT0FBTyxPQUNQMUIsS0FBSyxXQUNEM0MsRUFBRXNDLEtBQUssd0JBQXlCaEMsT0FBVUEsR0FBUyxTQUFVWSxHQUN6RCxHQUFJQSxFQUFLQyxNQUFRLEVBQUcsQ0FDaEJzQyxVQUFVQyxLQUFLWSxRQUFRLFNBQ3ZCMUIsUUFBT0MsU0FBU0MsYUFDYixDQUNIVyxVQUFVQyxLQUFLQyxPQUFPLFlBRTNCLGVBUXBCZixPQUFRQSxPQUFPNUMsRUFBRzRCIiwiZmlsZSI6ImluZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKHdpbiwgJCwgZG9jLCB1bmRlZmluZWQpIHtcclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG5ldyBQZXJzb24oKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBQZXJzb24ob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgdGhpcy5hcHBfaWQgPSAkKCcjYXBwX2lkJykudmFsKCk7XHJcbiAgICAgICAgdGhpcy5wYXlfdmVyaWZ5ID0gJCgnI3BheV92ZXJpZnknKS52YWwoKTtcclxuICAgICAgICB0aGlzLmlzX3VwZGF0ZSA9ICQoJyNpc191cGRhdGUnKS52YWwoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZSA9IEdldFF1ZXJ5U3RyaW5nKCdjaGFuZ2UnKTtcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBQZXJzb24ucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhIYW5kbGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBheV92ZXJpZnkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNfdXBkYXRlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjdXBkYXRlQmluZEJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5nZXQoJy9taW5pL3VwZGF0ZUJpbmQnLCBmdW5jdGlvbiAoanNvbikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbG9hZFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihqc29uLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsb2FkUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAnanNvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNleHBlclVybENvZGUnKS5hdHRyKCdzcmMnLCBtaW5pZXhwZXJVcmwgKyB0aGlzLmFwcF9pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHFyY29kZSA9IG5ldyBRUkNvZGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJINVVybENvZGVcIiksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJCgnI0g1VXJsJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMzUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTM1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvckRhcms6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvckxpZ2h0OiBcIiNmZmZmZmZcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdExldmVsOiBRUkNvZGUuQ29ycmVjdExldmVsLkhcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjc2NyZWVuQnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLnBvc3QoJy9taW5pL3VzZXJDaGVjaycsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoJ+mqjOivgeaIkOWKnycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoJyNub3RTY3JlZW5Db2RlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcjaGFzU2NyZWVuQ29kZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJCgnI3NldE1pbmlJbmZvJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmVkaXRJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIueUqOaIt+mqjOivgeaIkOWKn++8jOaCqOeahOWwj+eoi+W6j+WNs+WwhuaPkOS6pOW+ruS/oeWuoeaguO+8jOivt+iAkOW/g+etieW+hSFcIiwgJ3N1Y2Nlc3MnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6aqM6K+B5oiQ5YqfJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9rOmZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoanNvbi5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoanNvbi5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuYWxlcnQoJ+eUqOaIt+mqjOivgeWksei0pe+8jOivt+ehruiupOaCqOWFs+iBlOiHs+W8gOaUvuW5s+WPsOeahOWwj+eoi+W6j+WSjOacjeWKoeWPt+S4juaOiOadg+S/oeaBr+S4gOiHtOOAguaIluiAheivt+mHjeaWsOS9v+eUqOeuoeeQhuWRmOW+ruS/oeaJq+aPj+S4pOS4quS6jOe7tOeggeOAguehruiupOaXoOivr+S7jeaXoOazlemqjOivgeaIkOWKn++8jOivt+iBlOezu+S6p+WTgem5heW+ruS/oe+8mmNoYW5waW5lMicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgJ2pzb24nKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hhbmdlID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQoJyNlZGl0SW1nJykuY2xpY2sodGhpcy5lZGl0SW5mby5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgICQoJyNzYXZlTWVyJykuY2xpY2sodGhpcy5zYXZlTWVyLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAgICAgJChcIiNyZXN1Ym1pdEF1ZGl0XCIpLmNsaWNrKHRoaXMucmVTdWJtaXRBdWRpdC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhdXRoSGFuZGxlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcHBfaWQgPSB0aGlzLmFwcF9pZDtcclxuICAgICAgICAgICAgLy/ph43mlrDmjojmnYPngrnlh7tcclxuICAgICAgICAgICAgJChcIiNyZUF1dGhcIikuY2xpY2soc2hvd05ld1dpbik7XHJcblxyXG4gICAgICAgICAgICAvL+aOiOadg+aIkOWKn+aMiemSrueCueWHu+WIt+aWsFxyXG4gICAgICAgICAgICAkKFwiI2JpbmRTdWNjZXNzXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvL+aOiOadg+Wksei0pe+8jOe7p+e7reW8ueWHulxyXG4gICAgICAgICAgICAkKFwiI2JpbmRGYWlsXCIpLmNsaWNrKHNob3dOZXdXaW4pO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gc2hvd05ld1dpbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdXaW4gPSB3aW5kb3cub3BlbignJywgJ19ibGFuaycpO1xyXG4gICAgICAgICAgICAgICAgJC5wb3N0KFwiL21pbmkvYXV0aG9yaXR5IFwiLCB7XCJhcHBfaWRcIjogYXBwX2lkfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3V2luLmxvY2F0aW9uLmhyZWYgPSBtaW5pYXV0aFVybCArIGFwcF9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNiaW5kTW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuezu+e7n+e5geW/mVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAnanNvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlZGl0SW5mbzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjc2V0TWluaUluZm8gaW5wdXQnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKS5yZW1vdmVDbGFzcygnZGlzRWRpdCcpO1xyXG4gICAgICAgICAgICAkKCcjc2F2ZU1lcicpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlZGl0c3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjc2V0TWluaUluZm8gaW5wdXQnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLmFkZENsYXNzKCdkaXNFZGl0Jyk7XHJcbiAgICAgICAgICAgICQoJyNzYXZlTWVyJykucGFyZW50KCkuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgaWYgKCQoXCIjZWRpdEltZ1wiKS5oYXNDbGFzcyhcImhpZGVcIikpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjZWRpdEltZ1wiKS5yZW1vdmVDbGFzcyhcImhpZGVcIik7IC8v5L+d5a2Y5pSv5LuY6YWN572u5oiQ5YqfLOaYvuekuue8lui+keaMiemSrlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghKCQoXCIjcGF5X3NldF9oaW50XCIpLmhhc0NsYXNzKFwiaGlkZVwiKSkpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjcGF5X3NldF9oaW50XCIpLmFkZENsYXNzKFwiaGlkZVwiKTsgLy/pmpDol4/mlK/ku5jphY3nva7mj5DnpLpcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJC5hbGVydCgn5bCP56iL5bqP5q2j5Zyo5byA5Y+R5Lit77yM562J5b6F5o+Q5Lqk5a6h5qC477yM57qmMeS4quW3peS9nOaXpe+8jOivt+iAkOW/g+etieW+hScsXHJcbiAgICAgICAgICAgICAgICAnc3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICforr7nva7miJDlip8nLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0bjogMlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzYXZlTWVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB3eF9tY2hpZCA9ICQudHJpbSgkKCcjd3hfbWNoaWQnKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICB3eF9tY2hrZXkgPSAkLnRyaW0oJCgnI3d4X21jaGtleScpLnZhbCgpKSxcclxuICAgICAgICAgICAgICAgIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAod3hfbWNoaWQgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5ZWG5oi35Y+35LiN6IO95Li656m6Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHd4X21jaGtleSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCdBUEnlr4bpkqXkuI3og73kuLrnqbonKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkLnBvc3QoJy9taW5pL21lcmNoYW50Jywge1xyXG4gICAgICAgICAgICAgICAgd3hfbWNoaWQ6IHd4X21jaGlkLFxyXG4gICAgICAgICAgICAgICAgd3hfbWNoa2V5OiB3eF9tY2hrZXlcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZWRpdHN1Y2Nlc3MoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGpzb24ubXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgJ2pzb24nKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlU3VibWl0QXVkaXQ6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXBwX2lkID0gJCgnI2FwcF9pZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAkLmFsZXJ0KFwi6K+356Gu6K6k5bey5oyJ54Wn5a6h5qC45aSx6LSl5Y6f5Zug6L+b6KGM5L+u5pS55bm26YeN5paw5o+Q5Lqk5a6h5qC4IVwiLCAnaW5mbycsIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgICAgIGJ0bjogMyxcclxuICAgICAgICAgICAgICAgIG9rdGV4dDpcIuaPkOS6pOWuoeaguFwiLFxyXG4gICAgICAgICAgICAgICAgb25PazpmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5wb3N0KFwiL21pbmkvcmVzdWJtaXRBdWRpdCBcIiwge1wiYXBwX2lkXCI6IGFwcF9pZH0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuaPkOS6pOWuoeaguOaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaPkOS6pOWuoeaguOWksei0pVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sICdqc29uJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufSkod2luZG93LCB3aW5kb3cuJCwgZG9jdW1lbnQpOyJdfQ==
