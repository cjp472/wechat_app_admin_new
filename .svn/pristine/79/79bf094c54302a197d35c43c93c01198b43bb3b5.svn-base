$(function(){var e=new Business;e.init();if(GetQueryString("prompt")==1){$(".red_prompt_word").html("小鹅通内容列表全面升级为商品管理，点击查看更多高级功能<a href='/help/system_update' target='_blank'>查看教程</a>");$(".red_prompt").show()}});function Business(){this.toolBoxBtn=true;this.toDetail=true;this.searchObj={state:GetQueryString("state")||0,search_content:GetQueryString("search_content")||"",is_distribute:GetQueryString("is_distribute")||-1}}Business.prototype={init:function(){if(sessionStorage.getItem("key")==1){setTimeout(function(){baseUtils.show.blueTip("操作成功")},300);sessionStorage.setItem("key",0)}var e=this;$("#packageList").on("click",".listItem",function(){if(e.toDetail){e.toolBoxBtn=false,e.toDetail=false;var t="/package_detail_page?id="+$(this).data("id");contentDetail(t)}});$("#packageList").on("click",".listItem .toolBox li",function(t){t.stopPropagation();var o=$(t.target),s=o.parentsUntil("#packageList",".listItem").data("id");type=o.data("type");type&&e.toolBoxBtn&&e.toDetail&&(e.tool(type,s),e.toDetail=false)});$("#searchBtn").on("click",function(){var e=$("#selector_distribute").val(),t=$("#selector").val(),o=$.trim($("#searchVal").val());if(!!o){window.location.href="/package_list_page?state="+t+"&is_distribute="+e+"&search_content="+o}else{window.location.href="/package_list_page?state="+t+"&is_distribute="+e}});$("#selector").find("option").eq(++this.searchObj.state).attr("selected",true);$("#selector_distribute").find("option").eq(++this.searchObj.is_distribute).attr("selected",true);$("#searchVal").on("keypress",function(e){if(e.keyCode=="13"){$("#searchBtn").click()}}).val(this.searchObj.search_content);$(".selector").on("change",function(){$("#searchBtn").click()})},tool:function(e,t){switch(e){case"edit":contentDetail("/package_detail_page?id="+t);break;case"toup":this.movePackage(t,true);break;case"todown":this.movePackage(t,false);break;case"soldout":this.isShow(t,false);break;case"putaway":this.isShow(t,true);break;default:console.error("参数错误");break}},movePackage:function(e,t){var o=this;showLoading();$.ajax("/change_package_weight",{type:"POST",dataType:"json",data:{package_id:e,order_type:t?0:1},success:function(e){hideLoading();if(e.code==0){sessionStorage.setItem("key",1);console.log(sessionStorage.getItem("key"));reloadPage()}else{o.toolBoxBtn=true;o.toDetail=true;baseUtils.show.redTip(e.msg)}},error:function(e,t,s){console.error(s);hideLoading();o.toolBoxBtn=true;o.toDetail=true;baseUtils.show.redTip("操作失败，请稍后再试")}})},isShow:function(e,t){var o=this;showLoading();$.ajax("/change_goods_state",{type:"POST",dataType:"json",data:{goods_id:e,goods_type:0,operate_type:t?0:1},success:function(e){hideLoading();if(e.code==0){baseUtils.show.blueTip(e.msg);setTimeout(function(){reloadPage()},700)}else{o.toolBoxBtn=true;o.toDetail=true;baseUtils.show.redTip(e.msg)}},error:function(e,t,s){console.error(s);hideLoading();o.toolBoxBtn=true;o.toDetail=true;baseUtils.show.redTip("操作失败，请稍后再试")}})}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL3Jlc01hbmFnZS9wYWNrYWdlTGlzdC5qcyJdLCJuYW1lcyI6WyIkIiwiYnVzaW5lc3MiLCJCdXNpbmVzcyIsImluaXQiLCJHZXRRdWVyeVN0cmluZyIsImh0bWwiLCJzaG93IiwidGhpcyIsInRvb2xCb3hCdG4iLCJ0b0RldGFpbCIsInNlYXJjaE9iaiIsInN0YXRlIiwic2VhcmNoX2NvbnRlbnQiLCJpc19kaXN0cmlidXRlIiwicHJvdG90eXBlIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwic2V0VGltZW91dCIsImJhc2VVdGlscyIsImJsdWVUaXAiLCJzZXRJdGVtIiwic2VsZiIsIm9uIiwiaHJlZiIsImRhdGEiLCJjb250ZW50RGV0YWlsIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsIiRlbGUiLCJ0YXJnZXQiLCJpZCIsInBhcmVudHNVbnRpbCIsInR5cGUiLCJ0b29sIiwidmFsIiwidHJpbSIsIndpbmRvdyIsImxvY2F0aW9uIiwiZmluZCIsImVxIiwiYXR0ciIsImtleUNvZGUiLCJjbGljayIsIm1vdmVQYWNrYWdlIiwiaXNTaG93IiwiY29uc29sZSIsImVycm9yIiwiY2hhbmdlVHlwZSIsInNob3dMb2FkaW5nIiwiYWpheCIsImRhdGFUeXBlIiwicGFja2FnZV9pZCIsIm9yZGVyX3R5cGUiLCJzdWNjZXNzIiwiaGlkZUxvYWRpbmciLCJjb2RlIiwibG9nIiwicmVsb2FkUGFnZSIsInJlZFRpcCIsIm1zZyIsInhociIsInN0YXR1cyIsImVyciIsImdvb2RzX2lkIiwiZ29vZHNfdHlwZSIsIm9wZXJhdGVfdHlwZSJdLCJtYXBwaW5ncyI6IkFBS0FBLEVBQUUsV0FDRSxHQUFJQyxHQUFXLEdBQUlDLFNBQ25CRCxHQUFTRSxNQUdULElBQUlDLGVBQWUsV0FBYSxFQUFHLENBQy9CSixFQUFFLG9CQUFvQkssS0FBSyxvRkFDM0JMLEdBQUUsZUFBZU0sU0FLekIsU0FBU0osWUFDTEssS0FBS0MsV0FBYSxJQUNsQkQsTUFBS0UsU0FBVyxJQUNo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akMsR0FBS2IsV0FBYSxJQUNsQmEsR0FBS1osU0FBVyxJQUNoQlMsV0FBVVosS0FBS29ELE9BQU8sa0JBS2xDZCxPQUFRLFNBQVNkLEVBQUlpQixHQUtqQixHQUFJMUIsR0FBT2QsSUFDWHlDLGNBQ0FoRCxHQUFFaUQsS0FBSyx1QkFDSGpCLEtBQU0sT0FDTmtCLFNBQVUsT0FDVjFCLE1BTUl1QyxTQUFVakMsRUFDVmtDLFdBQVksRUFDWkMsYUFBY2xCLEVBQWEsRUFBSSxHQUVuQ00sUUFBUyxTQUFTN0IsR0FFZDhCLGFBQ0EsSUFBRzlCLEVBQUsrQixNQUFRLEVBQUcsQ0FDZnJDLFVBQVVaLEtBQUthLFFBQVFLLEVBQUttQyxJQUM1QjFDLFlBQVcsV0FDUHdDLGNBQ0YsU0FDQyxDQUNIcEMsRUFBS2IsV0FBYSxJQUNsQmEsR0FBS1osU0FBVyxJQUNoQlMsV0FBVVosS0FBS29ELE9BQU9sQyxFQUFLbUMsT0FHbkNiLE1BQU8sU0FBU2MsRUFBS0MsRUFBUUMsR0FDekJqQixRQUFRQyxNQUFNZ0IsRUFDZFIsY0FDQWpDLEdBQUtiLFdBQWEsSUFDbEJhLEdBQUtaLFNBQVcsSUFDaEJTLFdBQVVaLEtBQUtvRCxPQUFPIiwiZmlsZSI6ImFkbWluL3Jlc01hbmFnZS9wYWNrYWdlTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEZyYW5rIG9uIDIwMTcvMy8yMS5cclxuICovXHJcblxyXG5cclxuJChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgYnVzaW5lc3MgPSBuZXcgQnVzaW5lc3MoKTtcclxuICAgIGJ1c2luZXNzLmluaXQoKTtcclxuXHJcbiAgICAvLyAg5pi+56S65bCP6buE5p2hICAgPOWwj+m5hemAmuWGheWuueWIl+ihqOWFqOmdouWNh+e6p+S4uuWVhuWTgeeuoeeQhu+8jOiOt+WPluabtOWkmumrmOe6p+WKn+iDveS9v+eUqOaVmeeoi+ivt+eCueWHu+OAkOWVhuWTgeeuoeeQhuaVmeeoi+OAkT5cclxuICAgIGlmIChHZXRRdWVyeVN0cmluZyhcInByb21wdFwiKSA9PSAxKSB7XHJcbiAgICAgICAgJChcIi5yZWRfcHJvbXB0X3dvcmRcIikuaHRtbChcIuWwj+m5hemAmuWGheWuueWIl+ihqOWFqOmdouWNh+e6p+S4uuWVhuWTgeeuoeeQhu+8jOeCueWHu+afpeeci+abtOWkmumrmOe6p+WKn+iDvTxhIGhyZWY9Jy9oZWxwL3N5c3RlbV91cGRhdGUnIHRhcmdldD0nX2JsYW5rJz7mn6XnnIvmlZnnqIs8L2E+XCIpO1xyXG4gICAgICAgICQoXCIucmVkX3Byb21wdFwiKS5zaG93KCk7XHJcbiAgICB9XHJcblxyXG59KTtcclxuXHJcbmZ1bmN0aW9uIEJ1c2luZXNzKCkgey8v5a6a5LmJ5LiA5Lqb5YWs5YWx5bGe5oCnXHJcbiAgICB0aGlzLnRvb2xCb3hCdG4gPSB0cnVlO1xyXG4gICAgdGhpcy50b0RldGFpbCA9IHRydWU7XHJcbiAgICB0aGlzLnNlYXJjaE9iaiA9IHtcclxuICAgICAgICBzdGF0ZTogR2V0UXVlcnlTdHJpbmcoJ3N0YXRlJykgfHwgMCxcclxuICAgICAgICBzZWFyY2hfY29udGVudDogR2V0UXVlcnlTdHJpbmcoJ3NlYXJjaF9jb250ZW50JykgfHwgJycsXHJcbiAgICAgICAgaXNfZGlzdHJpYnV0ZTpHZXRRdWVyeVN0cmluZygnaXNfZGlzdHJpYnV0ZScpfHwgLTFcclxuICAgIH1cclxufVxyXG5cclxuQnVzaW5lc3MucHJvdG90eXBlID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkgeyAvL+mhtemdoueahOWIneWni+WMluaTjeS9nO+8jOe7keWumuS6i+S7tlxyXG4gICAgICAgIGlmKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2tleScpPT0xKXsvL+S4iuS4i+enu+WKqOaXtumXtOaIkOWKn+WIt+aWsOWQjuW8ueeql+WIneWni+WMllxyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKCfmk43kvZzmiJDlip8nKVxyXG4gICAgICAgICAgICB9LDMwMCk7XHJcbiAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oJ2tleScsMCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgJCgnI3BhY2thZ2VMaXN0JykgLy/ot7Povazor6bmg4XpobVcclxuICAgICAgICAub24oJ2NsaWNrJywgJy5saXN0SXRlbScsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZihzZWxmLnRvRGV0YWlsKXtcclxuICAgICAgICAgICAgICAgIHNlbGYudG9vbEJveEJ0biA9IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2VsZi50b0RldGFpbCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdmFyIGhyZWYgPSAnL3BhY2thZ2VfZGV0YWlsX3BhZ2U/aWQ9JyArICQodGhpcykuZGF0YSgnaWQnKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnREZXRhaWwoaHJlZik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJCgnI3BhY2thZ2VMaXN0JykgIC8v6LCD55So5bel5YW35Ye95pWwXHJcbiAgICAgICAgLm9uKCdjbGljaycsICcubGlzdEl0ZW0gLnRvb2xCb3ggbGknICxmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAgICAgICAgIHZhciAkZWxlID0gJChlLnRhcmdldCksXHJcbiAgICAgICAgICAgICAgICBpZCA9ICRlbGUucGFyZW50c1VudGlsKCcjcGFja2FnZUxpc3QnLCcubGlzdEl0ZW0nKS5kYXRhKCdpZCcpXHJcbiAgICAgICAgICAgICAgICB0eXBlID0gJGVsZS5kYXRhKCd0eXBlJyk7XHJcbiAgICAgICAgICAgIHR5cGUgJiYgc2VsZi50b29sQm94QnRuICYmIHNlbGYudG9EZXRhaWwgJiYgKFxyXG4gICAgICAgICAgICAgICAgc2VsZi50b29sKHR5cGUsIGlkKSxcclxuICAgICAgICAgICAgICAgIHNlbGYudG9EZXRhaWwgPSBmYWxzZVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCcjc2VhcmNoQnRuJylcclxuICAgICAgICAub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7IC8v5pCc57SiXHJcbiAgICAgICAgICAgIHZhciBpc19kaXN0cmlidXRlID0gJCgnI3NlbGVjdG9yX2Rpc3RyaWJ1dGUnKS52YWwoKSxcclxuICAgICAgICAgICAgICAgIHN0YXRlID0gJCgnI3NlbGVjdG9yJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICBzZWFyY2hfY29udGVudCA9ICQudHJpbSggJCgnI3NlYXJjaFZhbCcpLnZhbCgpICk7XHJcbiAgICAgICAgICAgIGlmKCEhc2VhcmNoX2NvbnRlbnQpe1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3BhY2thZ2VfbGlzdF9wYWdlP3N0YXRlPScrc3RhdGUrJyZpc19kaXN0cmlidXRlPScraXNfZGlzdHJpYnV0ZSsnJnNlYXJjaF9jb250ZW50PScrc2VhcmNoX2NvbnRlbnQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvcGFja2FnZV9saXN0X3BhZ2U/c3RhdGU9JytzdGF0ZSsnJmlzX2Rpc3RyaWJ1dGU9Jytpc19kaXN0cmlidXRlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5Yid5aeL5YyW5pCc57Si5p2h5Lu2XHJcbiAgICAgICAgJCgnI3NlbGVjdG9yJykuZmluZCgnb3B0aW9uJykuZXEoKyt0aGlzLnNlYXJjaE9iai5zdGF0ZSkuYXR0cignc2VsZWN0ZWQnLHRydWUpO1xyXG4gICAgICAgICQoJyNzZWxlY3Rvcl9kaXN0cmlidXRlJykuZmluZCgnb3B0aW9uJykuZXEoKyt0aGlzLnNlYXJjaE9iai5pc19kaXN0cmlidXRlKS5hdHRyKCdzZWxlY3RlZCcsdHJ1ZSk7XHJcbiAgICAgICAgJCgnI3NlYXJjaFZhbCcpLm9uKCdrZXlwcmVzcycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgaWYoZS5rZXlDb2RlID09IFwiMTNcIikge1xyXG4gICAgICAgICAgICAgICAgJCgnI3NlYXJjaEJ0bicpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS52YWwodGhpcy5zZWFyY2hPYmouc2VhcmNoX2NvbnRlbnQpO1xyXG5cclxuICAgICAgICAvLyAg55uR5ZCs562b6YCJ5qGG6YCJ5oup5LqL5Lu2XHJcbiAgICAgICAgJChcIi5zZWxlY3RvclwiKS5vbignY2hhbmdlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjc2VhcmNoQnRuJykuY2xpY2soKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG4gICAgdG9vbDogZnVuY3Rpb24odHlwZSxpZCkge1xyXG4gICAgICAgIHN3aXRjaCh0eXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2VkaXQnOlxyXG4gICAgICAgICAgICAgICAgY29udGVudERldGFpbCgnL3BhY2thZ2VfZGV0YWlsX3BhZ2U/aWQ9JyArIGlkKTtcclxuXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAndG91cCc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVQYWNrYWdlKGlkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICd0b2Rvd24nOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5tb3ZlUGFja2FnZShpZCwgZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ3NvbGRvdXQnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5pc1Nob3coaWQsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdwdXRhd2F5JzpcclxuICAgICAgICAgICAgICAgIHRoaXMuaXNTaG93KGlkLCB0cnVlKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign5Y+C5pWw6ZSZ6K+vJyk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9LFxyXG4gICAgbW92ZVBhY2thZ2U6IGZ1bmN0aW9uKGlkLCBjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgaWQ6IOimgeenu+WKqOeahOS4k+agj2lkXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGXvvJogdHJ1ZS3kuIrnp7vvvIwgZmFsc2Ut5LiL56e7XHJcbiAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAkLmFqYXgoJy9jaGFuZ2VfcGFja2FnZV93ZWlnaHQnLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcGFja2FnZV9pZDogaWQsXHJcbiAgICAgICAgICAgICAgICAvLzDkuIrnp7vvvIwgMeS4i+enu1xyXG4gICAgICAgICAgICAgICAgb3JkZXJfdHlwZTogY2hhbmdlVHlwZSA/IDAgOiAxXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKCdrZXknLDEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oJ2tleScpKTtcclxuICAgICAgICAgICAgICAgICAgICByZWxvYWRQYWdlKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnRvb2xCb3hCdG4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudG9EZXRhaWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50b29sQm94QnRuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNlbGYudG9EZXRhaWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5UnKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH0sXHJcbiAgICBpc1Nob3c6IGZ1bmN0aW9uKGlkLCBjaGFuZ2VUeXBlKSB7XHJcbiAgICAgICAgLypcclxuICAgICAgICAgICAgaWQ6IOimgeS4iuS4i+aetueahOS4k+agj2lkXHJcbiAgICAgICAgICAgIGNoYW5nZVR5cGXvvJogdHJ1ZS3kuIrmnrbvvIwgZmFsc2Ut5LiL5p62XHJcbiAgICAgICAgKi9cclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICAkLmFqYXgoJy9jaGFuZ2VfZ29vZHNfc3RhdGUnLHtcclxuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAvKlxyXG4gICAgICAgICAgICAgICAgMS1nb29kc19pZDtcclxuICAgICAgICAgICAgICAgIDItZ29vZHNfdHlwZSgwLeS4k+agjywxLeWbvuaWhywyLemfs+mikSwzLeinhumikSw0LeebtOaSrSk7XHJcbiAgICAgICAgICAgICAgICAzLW9wZXJhdGVfdHlwZSgwLeS4iuaetiwxLeS4i+aetilcclxuICAgICAgICAgICAgICAgICovXHJcbiAgICAgICAgICAgICAgICBnb29kc19pZDogaWQsXHJcbiAgICAgICAgICAgICAgICBnb29kc190eXBlOiAwLFxyXG4gICAgICAgICAgICAgICAgb3BlcmF0ZV90eXBlOiBjaGFuZ2VUeXBlID8gMCA6IDEsXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKGRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZWxvYWRQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSw3MDApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZWxmLnRvb2xCb3hCdG4gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYudG9EZXRhaWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi50b29sQm94QnRuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIHNlbGYudG9EZXRhaWwgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmk43kvZzlpLHotKXvvIzor7fnqI3lkI7lho3or5UnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59XHJcbiJdfQ==
