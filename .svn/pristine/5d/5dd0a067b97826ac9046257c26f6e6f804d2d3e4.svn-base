<?php
$pageData = [];
$pageData['sideActive'] = 'exerciseSystem';
$pageData['barTitle'] = '作业本';

//dump($exercise_book_list);

?>
@extends('admin.baseLayout',$pageData)

@section('page_css')
    {{--弹窗--}}
    <link type=text/css rel="stylesheet" href="../css/external/jquery-alert.css" />
    <link type=text/css rel="stylesheet" href="../css/admin/exercise/exerciseBookList.css?{{env('timestamp')}}"/>
@stop

@section('page_js')
    {{--弹窗--}}
    <script type="text/javascript" src="../js/external/jquery-alert.js?"></script>
    <script type="text/javascript" src="../js/admin/exercise/exerciseBookList.js?{{env('timestamp')}}"></script>
@stop

@section('base_mainContent')

    <header class="mainHeader">
        <a class="btnMid btnBlue createExerciseBookBtn" href="/exercise/create_exercise_book">新建作业本</a>
        <a class="exerciseHelpDoc" href="https://admin.xiaoe-tech.com/help_document" target="_blank">作业系统功能教程</a>
        <form class="submitSearchPart" action="/exercise/exercise_book_list" method="GET">
            <input class="inputDefault searchContentInput" name="search_content" type="search"
                   placeholder="请输入作业本名称" value="{{trim($search_content)}}">
            <button class="btnMid xeBtnDefault submitSearchBtn" type="submit">搜索</button>
        </form>
    </header>

    <main class="mainContent">
        <div class="tableHeader">
            <div>名称</div>
            <div>关联课程</div>
            <div>老师/助教</div>
            <div>关联社群</div>
            <div>作业数</div>
            <div>操作</div>
        </div>
        <div class="tableContent">
            @foreach($exercise_book_list as $key => $value)
                <?php
                    $relevantRes = "";
                    switch ($value->resource_type) {
                        case 1:
                            $relevantRes= "图文：".$value->resource_name;
                            break;
                        case 2:
                            $relevantRes= "音频：".$value->resource_name;
                            break;
                        case 3:
                            $relevantRes= "视频：".$value->resource_name;
                            break;
                        case 4:
                            $relevantRes= "直播：".$value->resource_name;
                            break;
                        case 5:
                            $relevantRes= "专栏：".$value->resource_name;
                            break;
                        default:
                            $relevantRes= "--";
                            break;
                    }
                ?>
                <div class="exerciseBookItem">
                    <div title="{{$value->title}}">{{$value->title}}</div>
                    <div title="{{$relevantRes}}">{{$relevantRes}}</div>
                    <div>allen3.2/eorifjefj</div>
                    <div>allen的朋友圈</div>
                    <div>12</div>
                    <div class="exerciseBookOperateArea"
                         data-resource_id="{{$value->resource_id}}"
                         data-exercise_book_id="{{$value->exercise_book_id}}"
                    >
                        <ul class="operateList">
                            <li class="operate" data-type="role_manage">人员管理</li>
                            <li class="verticalGapLine">&nbsp;|&nbsp;</li>
                            <li class="operate" data-type="exercise_list">作业列表</li>
                            <li class="verticalGapLine">&nbsp;|&nbsp;</li>
                            <li class="operate" data-type="edit_exercise_book">编辑</li>
                        </ul>
                    </div>
                </div>
            @endforeach
        </div>
        <div class="list-page">
            @if(empty($search_content))
                <?php echo $exercise_book_list->render(); ?>
            @else
                <?php echo $exercise_book_list->appends(['search_content' => $search_content])->render(); ?>
            @endif
        </div>
    </main>

@stop


@section("base_modal")

    <div class="roleManageWindow" id="roleManageWindow">
        <div class="windowHeader">
            <span class="headerText1">人员管理</span>
            <span class="headerText2">1个作业本仅能设置1位老师（布置/点评作业）和多位助教（点评作业）</span>
            <div class="windowCloseIcon" id="windowCloseIcon1">
                <img src="/images/icon_Pop-ups_close.svg">
            </div>
        </div>
        <div class="windowContent">

        </div>
        <div class="windowFooter">
            <div class="windowFooterTip">
                保存后，老师可以在店铺[我的-我的作业]布置课程作业
            </div>
            <div class="footerBtnWrapper">
                <div class="btnBlue btnMid addExerciseBookRoleBtn" id="addExerciseBookRole">
                    添加人员
                    <div class="windowHoverBox">
                        <div class="windowAddTeacher">添加老师</div>
                        <div class="windowAddAssistant">添加助教</div>
                    </div>
                </div>
                <div class="xeBtnDefault btnMid confirmSaveRoleBtn" id="confirmSaveRole">保存</div>
            </div>
        </div>
    </div>

@endsection











