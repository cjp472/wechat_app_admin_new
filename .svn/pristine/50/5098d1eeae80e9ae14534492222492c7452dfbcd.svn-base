$(function(){resAdd.init()});var id;var pageType;var resourceType;var uploadChannelType=GetQueryString("upload_channel_type")||1;var resourceFree=uploadChannelType==1?2:null;var packageId=GetQueryString("package_id");var resourceParams;var packageName;var columnState=1;var show_resourcecount=1;var classArray=[];var fileAudio1Size;var resAudio1Length;var AudioName;var fileAudio2Size;var resAudio2Length;var tryAudioName;var VideoName;var aliveState;var roleParams=[];var aliveT=0;var backURL="";var prevVal;var if_push,push_ahead;var playState=0;var is_distribute=$("#is_distribute").val();var currentDate;var resAdd=function(){var e={};var i;function a(e){var i=null;if(window.createObjectURL!=undefined){i=window.createObjectURL(e)}else if(window.URL!=undefined){i=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){i=window.webkitURL.createObjectURL(e)}return i}function o(e){if(window.revokeObjectURL!=undefined){window.revokeObjectURL(e)}else if(window.URL!=undefined){window.URL.revokeObjectURL(e)}else if(window.webkitURL!=undefined){window.webkitURL.revokeObjectURL(e)}}function t(e,t,n,r){if(e&&e.length>0){var l=e[0];var s=a(l);i=(l.size/(1024*1024)).toFixed(2);resAudio1Lengh=l.duration;if(n=="Audio1"){fileAudio1Size=i;var u=document.getElementById("resourceTime");u.src=s;u.onload=function(){o(s)}}if(n=="Audio2"){fileAudio2Size=i;var c=document.getElementById("tryTime");c.src=s;c.onload=function(){o(s)}}if(t=="audio"){var d=l.name;var p,v;v=d.lastIndexOf(".");if(v!=-1){p=d.substr(v+1).toUpperCase();p=p.toLowerCase();if(p!="mp3"&&p!="m4a"){baseUtils.show.blueTip("请上传音频类型的文件哦~!");if(n=="Audio1"){$(".upLoadAudio1").val("")}else{$(".upLoadAudio2").val("")}return}}else{document.all.submit_upload.disabled=true;if(n=="Audio1"){$(".upLoadAudio1").val("")}else{$(".upLoadAudio2").val("")}baseUtils.show.blueTip("请上传音频类型的文件哦~!");return}$("#audioURL"+n).hide();$(".uploadBox"+n).fadeIn(300);$(".upload"+n+"Name").html(l.name);$(".upload"+n+"Size span").html(i);$(".uploadPLine"+n).show().find(".uploadPLineActive"+n).css("width","0");$(".uploadPersent"+n).html("");if(n=="Audio1"){AudioName=l.name}else if(n=="Audio2"){tryAudioName=l.name}}if($uploadFile.checkFileSize(l,r)){$uploadFile.uploadRes(l,t,function(e){if(t=="audio"){var i=parseInt(e*100);$(".uploadPLineActive"+n).css("width",i+"%");$(".uploadPersent"+n).text(i+"%")}},function(e){console.log(e);baseUtils.show.blueTip("上传成功！");$(".uploadPersent"+n).text("完成");resUrl=e.data.access_url;console.log(resUrl);$("#"+n+"Url").val(resUrl);if(n=="Audio2"){$(".deleteTryAudio").show()}if(t=="image"){var i=l.name;var a,r;r=i.lastIndexOf(".");if(r!=-1){a=i.substr(r+1).toUpperCase();a=a.toLowerCase();if(a!="jpg"&&a!="png"&&a!="jpeg"&&a!="gif"){baseUtils.show.redTip("请上传图片类型的文件哦~");return}}else{document.all.submit_upload.disabled=true;baseUtils.show.redTip("请上传图片类型的文件哦~");return}$(".previewPic"+n+" img").load(function(){o(s)}).attr("src",s)}},function(e){console.error("上传失败!!!");console.log(e);baseUtils.show.redTip("上传失败！")})}else{baseUtils.show.redTip("上传资源限制在"+r+"MB内！");$(".upLoad"+n).val("")}}else{baseUtils.show.redTip("网络错误，请稍后再试！")}}e.init=function(){resourceType=GetQueryString("type");aliveTimeConfig(".dateSetInput");aliveTimeConfig(".dateSetInputBottom","top-right");$(".upLoadImage1").on("change",function(){t(this.files,"image","Image1",5)});$(".previewPicImage1").click(function(){$(".upLoadImage1").click()});$(".upLoadImage2").on("change",function(){t(this.files,"image","Image2",5)});$(".previewPicImage2").click(function(){$(".upLoadImage2").click()});$(".upLoadImage3").on("change",function(){t(this.files,"image","Image3",5)});$(".previewPicImage3").click(function(){$(".upLoadImage3").click()});$(".upLoadImage4").on("change",function(){t(this.files,"image","Image4",5)});$(".previewPicImage4").click(function(){$(".upLoadImage4").click()});$(".upLoadAudio1").on("change",function(){t(this.files,"audio","Audio1",200)});$(".upLoadAudio2").on("change",function(){t(this.files,"audio","Audio2",200)});$(".deleteTryAudio").click(function(){$(".upLoadAudio2").val("");$(".uploadBoxAudio2").hide();$("#Audio2Url").val("");$(this).hide();$("#audioURLAudio2").remove()});if(is_distribute!=1){$(".notFreeSelect").click(function(){$(".resPrize").removeAttr("readonly");$(".resPrize").removeAttr("disabled");resourceFree=2;$("#courseRemind").show()});$(".FreeSelect").click(function(){$(".resPrize").attr("readonly","readonly");$(".resPrize").attr("disabled","disabled");$(".resPrize").val(0);resourceFree=1;$("#courseRemind").hide();$("#courseRemind option[value=-1]").prop("selected",true);$("#push_ahead").change()})}push_ahead=$("#push_ahead option:selected").val();if_push=$("#if_push").val()||1;function e(){if(push_ahead==-1){if_push=1}else{if_push=0}}var i=$("#push_ahead");if(i.length>0){console.log(push_ahead);e();console.log(if_push);if(i.data("setting")==1){i.on("change",function(i){var a=$(this),o=+a.val();a.find("option[value="+push_ahead+"]").prop("selected",true);if(push_ahead==-1&&o!=-1){var t="您需要到微信公众号后台将您的服务号所在行业设置为“教育/培训”，设置完成后，开启服务号通知方可正常发送模板消息。"+"<br/><a target='_blank' href='/help/instructions#hp5_wx_service' style='margin-top:10px;'>什么是模板消息？</a>";var n={title:"提示",btn:3,oktext:"我已设置",canceltext:"关闭",icon:"blue",onOk:function(){$.ajax("/has_industry",{type:"GET",dataType:"json",data:{}}).done(function(i){var t=i.ret;if(t==0){a.find("option[value="+o+"]").prop("selected",true);push_ahead=o;e();baseUtils.show.blueTip("模板消息推送开启")}else{baseUtils.show.redTip("无法开启消息推送，请按照提示修改设置")}}).fail(function(e,i,a){console.error(a);baseUtils.show.redTip("网络错误，请稍后再试")})}};$.alert(t,"custom",n);return false}else{push_ahead=o;e();a.find("option[value="+o+"]").prop("selected",true)}})}else{i.on("change",function(i){var a=$(this);push_ahead=+a.val();e()})}}$("#preview").on("click",function(){var e=ue.getContent();document.getElementById("preview_content").innerHTML=e;$(".preview_con").addClass("active");$(".preview_box").addClass("active");document.documentElement.style.overflow="hidden"});$(".preview_con").on("click",function(){$(this).removeClass("active");$("#preview_content").html("");$(".preview_box").removeClass("active");document.documentElement.style.overflow="auto"});$(".videosSelect").click(function(){$(".aliveVideoBox").slideDown(300);aliveT=1;console.log(aliveT);VideoName=null});$(".voiceSelect").click(function(){$(".aliveVideoBox").slideUp(300);aliveT=0;console.log(aliveT)});$(".aliveSelect").click(function(){$(".aliveVideoBox").slideUp(300);aliveT=2;console.log(aliveT)});$(".pptAliveSelect").click(function(){$(".aliveVideoBox").slideUp(300);aliveT=3;console.log(aliveT)});$(".columnShow").click(function(){columnState=0});$(".columnHide").click(function(){columnState=1});$(".countShow").click(function(){show_resourcecount=1});$(".countHide").click(function(){show_resourcecount=0});$(".lastStepBtn").click(function(){window.history.back()});var a=$("#getBack");if(uploadChannelType==1){console.log(resourceType);if(resourceType==4){console.log("has_come");a.attr("href","/resource_list_page?resource_type=4")}else{backURL="/resource_list_page";a.attr("href",backURL)}}else if(uploadChannelType==2){backURL="/package_detail_page?id="+packageId;a.attr("href",backURL)}else if(uploadChannelType==3){backURL="/member_detail_page?id="+packageId;a.attr("href",backURL)}changeSaveFlag(true);var o=$("#serviceToggle");prevVal=+$("#serviceToggle :radio:checked").val()||null;if(o.length>0){if(o.data("setting")==1){o.on("click",":radio",function(e){var i=$(this);var a=+i.val();if(a!==prevVal&&a==1){e.preventDefault();var o="您需要到微信公众号后台将您的服务号所在行业设置为“教育/培训”，设置完成后，开启服务号通知方可正常发送模板消息。"+"<br/><a target='_blank' href='/help/instructions#hp5_wx_service' style='margin-top:10px;'>什么是模板消息？</a>";var t={title:"提示",btn:3,oktext:"我已设置",canceltext:"关闭",icon:"blue",onOk:function(){$.ajax("/has_industry",{type:"GET",dataType:"json",data:{}}).done(function(e){var o=e.ret;if(o==0){i.prop("checked",true);prevVal=a;baseUtils.show.blueTip("模板消息推送开启")}else{baseUtils.show.redTip("无法开启消息推送，请按照提示修改设置")}}).fail(function(e,i,a){console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")})}};$.alert(o,"custom",t);return false}else{prevVal=a;params["push_state"]=a;$("#serviceToggle").data("state",a)}})}else{o.on("click",":radio",function(e){var i=$(this);var a=i.val();if(a!==prevVal&&a==1){prevVal=a;baseUtils.show.blueTip("模板消息推送开启")}else{prevVal=a}})}}};return e}();getNowFormatDate();function getNowFormatDate(){var e=new Date;var i="-";var a=":";var o=e.getFullYear();var t=e.getMonth()+1;var n=e.getDate();if(t>=1&&t<=9){t="0"+t}if(n>=0&&n<=9){n="0"+n}currentDate=o+i+t+i+n+" "+e.getHours()+a+e.getMinutes()+a+e.getSeconds();return currentDate}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc0FkZC5qcyJdLCJuYW1lcyI6WyIkIiwicmVzQWRkIiwiaW5pdCIsImlkIiwicGFnZVR5cGUiLCJyZXNvdXJjZVR5cGUiLCJ1cGxvYWRDaGFubmVsVHlwZSIsIkdldFF1ZXJ5U3RyaW5nIiwicmVzb3VyY2VGcmVlIiwicGFja2FnZUlkIiwicmVzb3VyY2VQYXJhbXMiLCJwYWNrYWdlTmFtZSIsImNvbHVtblN0YXRlIiwic2hvd19yZXNvdXJjZWNvdW50IiwiY2xhc3NBcnJheSIsImZpbGVBdWRpbzFTaXplIiwicmVzQXVkaW8xTGVuZ3RoIiwiQXVkaW9OYW1lIiwiZmlsZUF1ZGlvMlNpemUiLCJyZXNBdWRpbzJMZW5ndGgiLCJ0cnlBdWRpb05hbWUiLCJWaWRlb05hbWUiLCJhbGl2ZVN0YXRlIiwicm9sZVBhcmFtcyIsImFsaXZlVCIsImJhY2tVUkwiLCJwcmV2VmFsIiwiaWZfcHVzaCIsInB1c2hfYWhlYWQiLCJwbGF5U3RhdGUiLCJpc19kaXN0cmlidXRlIiwidmFsIiwiY3VycmVudERhdGUiLCJmaWxlU2l6ZSIsImdldE9iamVjdFVSTCIsImZpbGUiLCJ1cmwiLCJ3aW5kb3ciLCJjcmVhdGVPYmplY3RVUkwiLCJ1bmRlZmluZWQiLCJVUkwiLCJ3ZWJraXRVUkwiLCJyZW1vdmVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJyZXNVcGxvYWQiLCJmaWxlcyIsInJlc1R5cGUiLCJyZXNUeXBlQ2xhc3MiLCJyZXNMaW1pdFNpemUiLCJsZW5ndGgiLCJyZXNvdXJjZUxvY2FsVXJsIiwic2l6ZSIsInRvRml4ZWQiLCJyZXNBdWRpbzFMZW5naCIsImR1cmF0aW9uIiwicmVzb3VyY2VFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNyYyIsIm9ubG9hZCIsInRyeUVsZW1lbnQiLCJhdWRpb05hbWUiLCJuYW1lIiwiZXh0IiwiaWR4IiwibGFzdEluZGV4T2YiLCJzdWJzdHIiLCJ0b1VwcGVyQ2FzZSIsInRvTG93ZXJDYXNlIiwiYmFzZVV0aWxzIiwic2hvdyIsImJsdWVUaXAiLCJhbGwiLCJzdWJtaXRfdXBsb2FkIiwiZGlzYWJsZWQiLCJoaWRlIiwiZmFkZUluIiwiaHRtbCIsImZpbmQiLCJjc3MiLCIkdXBsb2FkRmlsZSIsImNoZWNrRmlsZVNpemUiLCJ1cGxvYWRSZXMiLCJkYXRhIiwicHJvZ3Jlc3MiLCJwYXJzZUludCIsInRleHQiLCJjb25zb2xlIiwibG9nIiwicmVzVXJsIiwiYWNjZXNzX3VybCIsImltZ05hbWUiLCJyZWRUaXAiLCJsb2FkIiwiYXR0ciIsImVycm9yIiwiYWxpdmVUaW1lQ29uZmlnIiwib24iLCJ0aGlzIiwiY2xpY2siLCJyZW1vdmUiLCJyZW1vdmVBdHRyIiwicHJvcCIsImNoYW5nZSIsInNldElmUHVzaCIsIiRwdXNoQWhlYWQiLCJlIiwiZWxlIiwiY3VyU2VsZWN0ZWQiLCJ0eHQiLCJvcHRpb24iLCJ0aXRsZSIsImJ0biIsIm9rdGV4dCIsImNhbmNlbHRleHQiLCJpY29uIiwib25PayIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJkb25lIiwiY29kZSIsInJldCIsImZhaWwiLCJ4aHIiLCJlcnIiLCJhbGVydCIsInVlIiwiZ2V0Q29udGVudCIsImlubmVySFRNTCIsImFkZENsYXNzIiwiZG9jdW1lbnRFbGVtZW50Iiwic3R5bGUiLCJvdmVyZmxvdyIsInJlbW92ZUNsYXNzIiwic2xpZGVEb3duIiwic2xpZGVVcCIsImhpc3RvcnkiLCJiYWNrIiwiJGdldEJhY2siLCJjaGFuZ2VTYXZlRmxhZyIsIiRzZXJ2aWNlVG9nZ2xlIiwiY3VyclZhbCIsInByZXZlbnREZWZhdWx0IiwicGFyYW1zIiwiZ2V0Tm93Rm9ybWF0RGF0ZSIsImRhdGUiLCJEYXRlIiwic2VwZXJhdG9yMSIsInNlcGVyYXRvcjIiLCJ5ZWFyIiwiZ2V0RnVsbFllYXIiLCJtb250aCIsImdldE1vbnRoIiwic3RyRGF0ZSIsImdldERhdGUiLCJnZXRIb3VycyIsImdldE1pbnV0ZXMiLCJnZXRTZWNvbmRzIl0sIm1hcHBpbmdzIjoiQUFBQUEs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QUU4SCxNQUFNakIsRUFBSyxTQUFVQyxFQUN2QixPQUFPLFdBQ0osQ0FFSHBGLFFBQVVvSCxDQUNWRSxRQUFPLGNBQWdCRixDQUN2QjlJLEdBQUUsa0JBQWtCbUYsS0FBSyxRQUFRMkQsVUFHdEMsQ0FDSEQsRUFBZTVDLEdBQUcsUUFBUyxTQUFVLFNBQVNTLEdBQzFDLEdBQUlDLEdBQU0zRyxFQUFFa0csS0FDWixJQUFJNEMsR0FBVW5DLEVBQUk1RSxLQUNsQixJQUFJK0csSUFBWXBILFNBQVdvSCxHQUFXLEVBQUksQ0FDdENwSCxRQUFVb0gsQ0FDVnpFLFdBQVVDLEtBQUtDLFFBQVEsZ0JBQ3BCLENBQ0g3QyxRQUFVb0gsT0FNOUIsT0FBTzdJLEtBTVhnSixtQkFDQSxTQUFTQSxvQkFDTCxHQUFJQyxHQUFPLEdBQUlDLEtBQ2YsSUFBSUMsR0FBYSxHQUNqQixJQUFJQyxHQUFhLEdBQ2pCLElBQUlDLEdBQU9KLEVBQUtLLGFBQ2hCLElBQUlDLEdBQVFOLEVBQUtPLFdBQWEsQ0FDOUIsSUFBSUMsR0FBVVIsRUFBS1MsU0FDbkIsSUFBSUgsR0FBUyxHQUFLQSxHQUFTLEVBQUcsQ0FDMUJBLEVBQVEsSUFBTUEsRUFFbEIsR0FBSUUsR0FBVyxHQUFLQSxHQUFXLEVBQUcsQ0FDOUJBLEVBQVUsSUFBTUEsRUFFcEIxSCxZQUFjc0gsRUFBT0YsRUFBYUksRUFBUUosRUFBYU0sRUFDakQsSUFBTVIsRUFBS1UsV0FBYVAsRUFBYUgsRUFBS1csYUFDMUNSLEVBQWFILEVBQUtZLFlBQ3hCLE9BQU85SCIsImZpbGUiOiJyZXNBZGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uICgpIHtcbiAgICByZXNBZGQuaW5pdCgpO1xufSk7XG5cbi8v5YWs5YWx5Y+Y6YeP5byA5aeLXG4vL+WIpOWumuaYr+e8lui+kei/mOaYr+aWsOW7ulxuXG4vL+i1hOa6kOagh+ivhlxudmFyIGlkO1xuXG4vL+e8lui+keaIluaYr+S/ruaUuVxudmFyIHBhZ2VUeXBlO1xuXG4vL+i1hOa6kOexu+Wei1xudmFyIHJlc291cmNlVHlwZTtcblxuLy/mlrDlop7nmoTmuKDpgZMgIOm7mOiupOS4uuWNleWTgVxudmFyIHVwbG9hZENoYW5uZWxUeXBlID0gR2V0UXVlcnlTdHJpbmcoXCJ1cGxvYWRfY2hhbm5lbF90eXBlXCIpIHx8IDE7XG5cbi8v5LuY6LS55b2i5byPXG52YXIgcmVzb3VyY2VGcmVlID0gdXBsb2FkQ2hhbm5lbFR5cGU9PTEgPyAyIDogbnVsbDtcblxuLy/kuJPmoI9JRFxudmFyIHBhY2thZ2VJZCA9IEdldFF1ZXJ5U3RyaW5nKFwicGFja2FnZV9pZFwiKTtcblxuLy8o5b2T6LWE5rqQ5Li66KeG6aKR44CB55u05pKt5pe2LOacieWAvClcbnZhciByZXNvdXJjZVBhcmFtcztcblxuLy/kuJPmoI/lkI3np7BcbnZhciBwYWNrYWdlTmFtZTtcblxuLy/kuJPmoI/kuIrkuIvmnrbnirbmgIFcbnZhciBjb2x1bW5TdGF0ZSA9IDE7XG5cbi8v5LiT5qCP5pyf5pWw5pi+56S6XG52YXIgc2hvd19yZXNvdXJjZWNvdW50ID0gMTtcblxuLy/kuJPmoI/liIbnsbvmlbDnu4RcbnZhciBjbGFzc0FycmF5ID0gW107XG5cbi8v6Z+z6aKR5Y+C5pWw5byA5aeLXG4vL+ato+W8j+mfs+mikeWkp+Wwj1xudmFyIGZpbGVBdWRpbzFTaXplO1xuXG4vL+ato+W8j+mfs+mikemVv+W6plxudmFyIHJlc0F1ZGlvMUxlbmd0aDtcblxuLy/mraPlvI/pn7PpopHlkI1cbnZhciBBdWRpb05hbWU7XG5cbi8v6K+V5ZCs6Z+z6aKR5aSn5bCPXG52YXIgZmlsZUF1ZGlvMlNpemU7XG5cbi8v6K+V5ZCs6Z+z6aKR6ZW/5bqmXG52YXIgcmVzQXVkaW8yTGVuZ3RoO1xuXG4vL+ivleWQrOmfs+mikeWQjVxudmFyIHRyeUF1ZGlvTmFtZTtcblxuLy/pn7PpopHlj4LmlbDnu5PmnZ9cblxuLy/lm77mloflj4LmlbDlvIDlp4tcbi8v5Zu+5paH5Y+C5pWw57uT5p2fXG5cbi8v6KeG6aKR5Y+C5pWw5byA5aeLXG4vL+inhumikeWQjeensFxudmFyIFZpZGVvTmFtZTtcbi8v6KeG6aKR5Y+C5pWw57uT5p2fXG5cbi8v55u05pKt5Y+C5pWw5byA5aeLXG4vL+ebtOaSreeKtuaAgVxudmFyIGFsaXZlU3RhdGU7XG4vLyDnm7Tmkq3orrLluIjliJfooahcbnZhciByb2xlUGFyYW1zID0gW107XG5cbi8v55u05pKt57G75Z6LKOm7mOiupOS4uumfs+mikSlcbnZhciBhbGl2ZVQgPSAwO1xuXG4vL+ebtOaSreWPguaVsOe7k+adn1xuXG5cbi8v5oiQ5Yqf5ZCO6L+U5Zue55qEVVJMXG52YXIgYmFja1VSTCA9ICcnO1xuXG4vL+aOqOmAgea2iOaBr+eahOWAvFxudmFyIHByZXZWYWw7XG5cbnZhciBpZl9wdXNoLCAvL+aYr+WQpuW8gOWQr+aOqOmAgVxuICAgIHB1c2hfYWhlYWQ7IC8v5o+Q5YmN5o6o6YCB5pe26Ze0XG5cbi8v55u05pKt55qE5pKt5pS+54q25oCB77yIMOacquW8gOWni++8jDHjgIE05bey5byA5aeL77yMMiwz57uT5p2f77yJXG52YXIgcGxheVN0YXRlPTA7XG5cbnZhciBpc19kaXN0cmlidXRlID0gJCgnI2lzX2Rpc3RyaWJ1dGUnKS52YWwoKTtcblxudmFyIGN1cnJlbnREYXRlOy8v5b2T5YmN55qE5pe26Ze0XG5cbi8v5YWs5YWx5Y+Y6YeP57uT5p2fXG5cbnZhciByZXNBZGQgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciByZXNBZGQgPSB7fTtcblxuICAgIC8v5paH5Lu25aSn5bCPXG4gICAgdmFyIGZpbGVTaXplO1xuXG4gICAgLy/lj5bmtojkuIrkvKDliKTmlq3lj4LmlbBcbiAgICAvLyB2YXIgdXBsb2FkQ2FuY2VsPTA7XG4gICAgZnVuY3Rpb24gZ2V0T2JqZWN0VVJMKGZpbGUpIHtcbiAgICAgICAgdmFyIHVybCA9IG51bGw7XG4gICAgICAgIGlmICh3aW5kb3cuY3JlYXRlT2JqZWN0VVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXJsID0gd2luZG93LmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuVVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LndlYmtpdFVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy53ZWJraXRVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlT2JqZWN0VVJMKHVybCkgey8v6YeK5pS+6LWE5rqQVVJMXG4gICAgICAgIGlmICh3aW5kb3cucmV2b2tlT2JqZWN0VVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2luZG93LnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5VUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy53ZWJraXRVUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3aW5kb3cud2Via2l0VVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvL+i1hOa6kOS4iuS8oOWHveaVsCjlj4LmlbDvvJpyZXNUeXBlOui1hOa6kOexu+WeiyxyZXNUeXBlQ2xhc3M66LWE5rqQ57G75Z6L5Lit57uG5YiG55qE56eN57G7LHJlc0xpbWl0U2l6ZTrotYTmupDpmZDliLblpKflsI8pXG4gICAgZnVuY3Rpb24gcmVzVXBsb2FkKGZpbGVzLCByZXNUeXBlLCByZXNUeXBlQ2xhc3MsIHJlc0xpbWl0U2l6ZSkge1xuICAgICAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGZpbGUgPSBmaWxlc1swXTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZmlsZSk7XG5cbiAgICAgICAgICAgIHZhciByZXNvdXJjZUxvY2FsVXJsID0gZ2V0T2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICAgICAgZmlsZVNpemUgPSAoZmlsZS5zaXplIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIHJlc0F1ZGlvMUxlbmdoID0gZmlsZS5kdXJhdGlvbjtcbiAgICAgICAgICAgIC8v5aaC5p6c5piv5q2j5byP6Z+z6aKRXG4gICAgICAgICAgICBpZiAocmVzVHlwZUNsYXNzID09IFwiQXVkaW8xXCIpIHtcbiAgICAgICAgICAgICAgICBmaWxlQXVkaW8xU2l6ZSA9IGZpbGVTaXplO1xuICAgICAgICAgICAgICAgIHZhciByZXNvdXJjZUVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcInJlc291cmNlVGltZVwiKTtcbiAgICAgICAgICAgICAgICByZXNvdXJjZUVsZW1lbnQuc3JjID0gcmVzb3VyY2VMb2NhbFVybDtcbiAgICAgICAgICAgICAgICByZXNvdXJjZUVsZW1lbnQub25sb2FkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgIHJlbW92ZU9iamVjdFVSTChyZXNvdXJjZUxvY2FsVXJsKTtcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIC8v6I635Y+W6Z+z6aKR5pe26ZW/XG4gICAgICAgICAgICAgICAgLy8gIHJlc0F1ZGlvMUxlbmdoPXJlc291cmNlRWxlbWVudC5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICAvLyAgY29uc29sZS5sb2cocmVzQXVkaW8xTGVuZ2gpO1xuICAgICAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZygkKFwiI3Jlc291cmNlVGltZVwiKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL+WmguaenOaYr+ivleWQrOmfs+mikVxuICAgICAgICAgICAgaWYgKHJlc1R5cGVDbGFzcyA9PSBcIkF1ZGlvMlwiKSB7XG4gICAgICAgICAgICAgICAgZmlsZUF1ZGlvMlNpemUgPSBmaWxlU2l6ZTtcbiAgICAgICAgICAgICAgICB2YXIgdHJ5RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwidHJ5VGltZVwiKTtcbiAgICAgICAgICAgICAgICB0cnlFbGVtZW50LnNyYyA9IHJlc291cmNlTG9jYWxVcmw7XG4gICAgICAgICAgICAgICAgdHJ5RWxlbWVudC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlT2JqZWN0VVJMKHJlc291cmNlTG9jYWxVcmwpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbGUubmFtZSk7XG4gICAgICAgICAgICAvL2NvbnNvbGUubG9nKGZpbGVTaXplKTtcbiAgICAgICAgICAgIC8v5aaC5p6c5piv6Z+z6aKRXG4gICAgICAgICAgICBpZiAocmVzVHlwZSA9PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgdmFyIGF1ZGlvTmFtZSA9IGZpbGUubmFtZTtcbiAgICAgICAgICAgICAgICAvL2FsZXJ0KGltZ05hbWUpO1xuICAgICAgICAgICAgICAgIHZhciBleHQsaWR4O1xuICAgICAgICAgICAgICAgIGlkeCA9IGF1ZGlvTmFtZS5sYXN0SW5kZXhPZihcIi5cIik7XG4gICAgICAgICAgICAgICAgaWYgKGlkeCAhPSAtMSl7XG4gICAgICAgICAgICAgICAgICAgIGV4dCA9IGF1ZGlvTmFtZS5zdWJzdHIoaWR4KzEpLnRvVXBwZXJDYXNlKCk7XG4gICAgICAgICAgICAgICAgICAgIGV4dCA9IGV4dC50b0xvd2VyQ2FzZSggKTtcbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChmaWxlKTtcbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcIuWQjue8gD1cIitleHQrXCLkvY3nva49XCIraWR4K1wi6Lev5b6EPVwiK3Jlc291cmNlTG9jYWxVcmwpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ICE9ICdtcDMnICYmIGV4dCAhPSAnbTRhJyl7XG4gICAgICAgICAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmFsbC5zdWJtaXRfdXBsb2FkLmRpc2FibGVkPXRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi6K+35LiK5Lyg6Z+z6aKR57G75Z6L55qE5paH5Lu25ZOmfiFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNUeXBlQ2xhc3MgPT0gJ0F1ZGlvMScpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy51cExvYWRBdWRpbzEnKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoJy51cExvYWRBdWRpbzInKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KFwiMi7lj6rog73kuIrkvKAuanBnICAucG5nICAuanBlZyAgLmdpZuexu+Wei+eahOaWh+S7tiFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5hbGwuc3VibWl0X3VwbG9hZC5kaXNhYmxlZD10cnVlO1xuICAgICAgICAgICAgICAgICAgICBpZihyZXNUeXBlQ2xhc3MgPT0gJ0F1ZGlvMScpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnVwTG9hZEF1ZGlvMScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJy51cExvYWRBdWRpbzInKS52YWwoJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLor7fkuIrkvKDpn7PpopHnsbvlnovnmoTmlofku7blk6Z+IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgLy9hbGVydChcIuWPquiDveS4iuS8oC5qcGcgIC5wbmcgIC5qcGVnICAuZ2lm57G75Z6L55qE5paH5Lu2IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAkKCcjYXVkaW9VUkwnK3Jlc1R5cGVDbGFzcykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoXCIudXBsb2FkQm94XCIrcmVzVHlwZUNsYXNzKS5mYWRlSW4oMzAwKTtcbiAgICAgICAgICAgICAgICAvLyDliJ3lp4vljJbmlofku7bku6Xlj4rov5vluqbmnaFcbiAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFwiICsgcmVzVHlwZUNsYXNzICsgXCJOYW1lXCIpLmh0bWwoZmlsZS5uYW1lKTtcbiAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFwiICsgcmVzVHlwZUNsYXNzICsgXCJTaXplIHNwYW5cIikuaHRtbChmaWxlU2l6ZSk7XG4gICAgICAgICAgICAgICAgJChcIi51cGxvYWRQTGluZVwiICsgcmVzVHlwZUNsYXNzKS5zaG93KClcbiAgICAgICAgICAgICAgICAgICAgLmZpbmQoXCIudXBsb2FkUExpbmVBY3RpdmVcIiArIHJlc1R5cGVDbGFzcykuY3NzKFwid2lkdGhcIiwgJzAnKTtcbiAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFBlcnNlbnRcIiArIHJlc1R5cGVDbGFzcykuaHRtbCgnJyk7XG4gICAgICAgICAgICAgICAgaWYocmVzVHlwZUNsYXNzID09IFwiQXVkaW8xXCIpey8v5q2j5byP6Z+z6aKRXG4gICAgICAgICAgICAgICAgICAgIEF1ZGlvTmFtZSA9IGZpbGUubmFtZTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYocmVzVHlwZUNsYXNzID09IFwiQXVkaW8yXCIpIHsvL+ivleWQrOmfs+mikVxuICAgICAgICAgICAgICAgICAgICB0cnlBdWRpb05hbWUgPSBmaWxlLm5hbWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDpmZDliLbotYTmupDlnKgqTULlhoVcbiAgICAgICAgICAgIGlmICgkdXBsb2FkRmlsZS5jaGVja0ZpbGVTaXplKGZpbGUsIHJlc0xpbWl0U2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAkdXBsb2FkRmlsZS51cGxvYWRSZXMoZmlsZSwgcmVzVHlwZSwgZnVuY3Rpb24gKGRhdGEpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc1R5cGUgPT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwcm9ncmVzcyA9IHBhcnNlSW50KGRhdGEgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vY29uc29sZS5sb2cocHJvZ3Jlc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUExpbmVBY3RpdmVcIiArIHJlc1R5cGVDbGFzcykuY3NzKFwid2lkdGhcIiwgcHJvZ3Jlc3MgKyAnJScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUGVyc2VudFwiICsgcmVzVHlwZUNsYXNzKS50ZXh0KHByb2dyZXNzICsgXCIlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDmiJDlip/lm57osINcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuS4iuS8oOaIkOWKn++8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUGVyc2VudFwiICsgcmVzVHlwZUNsYXNzKS50ZXh0KFwi5a6M5oiQXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy9kYXRhID0gSlNPTi5wYXJzZShkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1VybCA9IGRhdGEuZGF0YS5hY2Nlc3NfdXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjXCIgKyByZXNUeXBlQ2xhc3MgKyBcIlVybFwiKS52YWwocmVzVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNUeXBlQ2xhc3MgPT0gXCJBdWRpbzJcIil7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5kZWxldGVUcnlBdWRpb1wiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/lm77niYfotYTmupDvvIzliJnlsZXnpLrlm77niYfpooTop4hcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNUeXBlID09ICdpbWFnZScpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpbWdOYW1lID0gZmlsZS5uYW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoaW1nTmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dCxpZHg7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWR4ID0gaW1nTmFtZS5sYXN0SW5kZXhPZihcIi5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkeCAhPSAtMSl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dCA9IGltZ05hbWUuc3Vic3RyKGlkeCsxKS50b1VwcGVyQ2FzZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHQgPSBleHQudG9Mb3dlckNhc2UoICk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoZmlsZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCLlkI7nvIA9XCIrZXh0K1wi5L2N572uPVwiK2lkeCtcIui3r+W+hD1cIityZXNvdXJjZUxvY2FsVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGV4dCAhPSAnanBnJyAmJiBleHQgIT0gJ3BuZycgJiYgZXh0ICE9ICdqcGVnJyAmJiBleHQgIT0gJ2dpZicpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy9kb2N1bWVudC5hbGwuc3VibWl0X3VwbG9hZC5kaXNhYmxlZD10cnVlO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35LiK5Lyg5Zu+54mH57G75Z6L55qE5paH5Lu25ZOmflwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCIyLuWPquiDveS4iuS8oC5qcGcgIC5wbmcgIC5qcGVnICAuZ2lm57G75Z6L55qE5paH5Lu2IVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmFsbC5zdWJtaXRfdXBsb2FkLmRpc2FibGVkPXRydWU7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+S4iuS8oOWbvueJh+exu+Wei+eahOaWh+S7tuWTpn5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCLlj6rog73kuIrkvKAuanBnICAucG5nICAuanBlZyAgLmdpZuexu+Wei+eahOaWh+S7tiFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyQoXCIucHJldmlld1BpY1wiICsgcmVzVHlwZUNsYXNzICsgXCIgaW1nXCIpLmF0dHIoXCJzcmNcIiwgcmVzVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ebtOaOpeWKoOi9veacrOWcsOWbvueJh+i/m+ihjOmihOiniFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIucHJldmlld1BpY1wiICsgcmVzVHlwZUNsYXNzICsgXCIgaW1nXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLmxvYWQoZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU9iamVjdFVSTChyZXNvdXJjZUxvY2FsVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3JjXCIsIHJlc291cmNlTG9jYWxVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNVcmwpO1xuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDlpLHotKXlm57osINcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLkuIrkvKDlpLHotKUhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOWksei0pe+8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOi1hOa6kOmZkOWItuWcqFwiICsgcmVzTGltaXRTaXplICsgXCJNQuWGhe+8gVwiKTtcbiAgICAgICAgICAgICAgICAkKFwiLnVwTG9hZFwiK3Jlc1R5cGVDbGFzcykudmFsKFwiXCIpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIFcIik7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWxlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJlc0FkZC5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvL+mAieaLqee7hOS7tuagt+W8j1xuICAgICAgICAvLyAkKCdzZWxlY3QnKS5tYXRlcmlhbF9zZWxlY3QoKTtcbiAgICAgICAgLy/ml7bpl7TpgInmi6nlmajliJ3lp4vljJZcbiAgICAgICAgLy8gJChcIiNkYXRlSW5wdXRcIikuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICAgICAvLyAgICAgd2Vla1N0YXJ0OiAxLCAvL+S4gOWRqOS7juaYn+acn+S4gOW8gOWni1xuICAgICAgICAvLyAgICAgbWluVmlldzogXCJkYXlcIixcbiAgICAgICAgLy8gICAgIGZvcm1hdDogJ3l5eXktbW0tZGQgaGg6MDA6MDAnLFxuICAgICAgICAvLyAgICAgYXV0b2Nsb3NlOiB0cnVlLCAvL+mAieaLqeaXpeacn+WQjuiHquWKqOWFs+mXrVxuICAgICAgICAvLyAgICAgcGlja2VyUG9zaXRpb246J3RvcC1yaWdodCcgIC8v5by556qX5pi+56S65Zyo6L6T5YWl5qGG5LiK5pa5XG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyAkKFwiI2RhdGVJbnB1dDFcIikuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICAgICAvLyAgICAgd2Vla1N0YXJ0OiAxLFxuICAgICAgICAvLyAgICAgbWluVmlldzogXCJkYXlcIixcbiAgICAgICAgLy8gICAgIGZvcm1hdDogJ3l5eXktbW0tZGQgaGg6MDA6MDAnLFxuICAgICAgICAvLyAgICAgYXV0b2Nsb3NlOiB0cnVlLCAvL+mAieaLqeaXpeacn+WQjuiHquWKqOWFs+mXrVxuICAgICAgICAvLyAgICAgcGlja2VyUG9zaXRpb246J3RvcC1yaWdodCdcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vICQoXCIjZGF0ZUlucHV0MlwiKS5kYXRldGltZXBpY2tlcih7XG4gICAgICAgIC8vICAgICB3ZWVrU3RhcnQ6IDEsXG4gICAgICAgIC8vICAgICBtaW5WaWV3OiBcImRheVwiLFxuICAgICAgICAvLyAgICAgZm9ybWF0OiAneXl5eS1tbS1kZCBoaDowMDowMCcsXG4gICAgICAgIC8vICAgICBhdXRvY2xvc2U6IHRydWUsIC8v6YCJ5oup5pel5pyf5ZCO6Ieq5Yqo5YWz6ZetXG4gICAgICAgIC8vICAgICBwaWNrZXJQb3NpdGlvbjondG9wLXJpZ2h0J1xuICAgICAgICAvLyB9KVxuICAgICAgICByZXNvdXJjZVR5cGUgPSBHZXRRdWVyeVN0cmluZyhcInR5cGVcIik7XG4gICAgICAgIGFsaXZlVGltZUNvbmZpZyhcIi5kYXRlU2V0SW5wdXRcIik7XG4gICAgICAgIGFsaXZlVGltZUNvbmZpZyhcIi5kYXRlU2V0SW5wdXRCb3R0b21cIiwgXCJ0b3AtcmlnaHRcIik7XG4gICAgICAgIC8v6I635Y+W6LWE5rqQ57G75Z6LXG5cbiAgICAgICAgLy/otYTmupDnsbvlnovvvJrlm77niYfvvJppbWFnZSzpn7PpopHvvJphdWRpb1xuICAgICAgICAvL+i1hOa6kOexu+Wei+WtkOexu++8mlxuICAgICAgICAgICAgLy/mraPlvI/pn7PpopHvvJpBdWRpbzEs6K+V5ZCs6Z+z6aKR77yaQXVkaW8yLFxuICAgICAgICAgICAgLy/lsIHpnaI6SW1hZ2UxLOaXpeetvu+8mkltYWdlMiznm7Tmkq3lrqPkvKDlsIHpnaI6SW1hZ2UzLOi0tOeJhzpJbWFnZTRcbiAgICAgICAgLy8g54K55Ye75oyJ6ZKu5LiK5Lyg5Zu+54mHXG4gICAgICAgICQoXCIudXBMb2FkSW1hZ2UxXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImltYWdlXCIsIFwiSW1hZ2UxXCIsIDUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5wcmV2aWV3UGljSW1hZ2UxXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkSW1hZ2UxXCIpLmNsaWNrKCk7XG4gICAgICAgIH0pXG4gICAgICAgICQoXCIudXBMb2FkSW1hZ2UyXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImltYWdlXCIsIFwiSW1hZ2UyXCIsIDUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5wcmV2aWV3UGljSW1hZ2UyXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkSW1hZ2UyXCIpLmNsaWNrKCk7XG4gICAgICAgIH0pXG4gICAgICAgICQoXCIudXBMb2FkSW1hZ2UzXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImltYWdlXCIsIFwiSW1hZ2UzXCIsIDUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5wcmV2aWV3UGljSW1hZ2UzXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkSW1hZ2UzXCIpLmNsaWNrKCk7XG4gICAgICAgIH0pXG4gICAgICAgICQoXCIudXBMb2FkSW1hZ2U0XCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImltYWdlXCIsIFwiSW1hZ2U0XCIsIDUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5wcmV2aWV3UGljSW1hZ2U0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkSW1hZ2U0XCIpLmNsaWNrKCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy8g54K55Ye75oyJ6ZKu5LiK5Lyg6Z+z6aKRXG4gICAgICAgIC8v5q2j5byPXG4gICAgICAgICQoXCIudXBMb2FkQXVkaW8xXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImF1ZGlvXCIsIFwiQXVkaW8xXCIsIDIwMCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvL+ivleWQrFxuICAgICAgICAkKFwiLnVwTG9hZEF1ZGlvMlwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNVcGxvYWQodGhpcy5maWxlcywgXCJhdWRpb1wiLCBcIkF1ZGlvMlwiLCAyMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+ivleWQrOmfs+mikee9ruepulxuICAgICAgICAkKFwiLmRlbGV0ZVRyeUF1ZGlvXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIudXBMb2FkQXVkaW8yXCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICQoXCIudXBsb2FkQm94QXVkaW8yXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICQoXCIjQXVkaW8yVXJsXCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICQodGhpcykuaGlkZSgpO1xuICAgICAgICAgICAgJChcIiNhdWRpb1VSTEF1ZGlvMlwiKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v5Y+W5raI5LiK5LygXG4gICAgICAgIC8vICQoXCIudXBsb2FkQ2FuY2VsQTFcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyAgICAgJChcIi51cGxvYWRCb3hBdWRpbzFcIikucmVtb3ZlKCk7XG4gICAgICAgIC8vICAgICB1cGxvYWRDYW5jZWw9MTtcbiAgICAgICAgLy8gfSlcbiAgICAgICAgLy8g6YCJ5oup5LuY6LS55LiO5YWN6LS5XG4gICAgICAgIGlmKGlzX2Rpc3RyaWJ1dGUgIT0gMSl7XG4gICAgICAgICAgICAkKFwiLm5vdEZyZWVTZWxlY3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoXCIucmVzUHJpemVcIikucmVtb3ZlQXR0cihcInJlYWRvbmx5XCIpO1xuICAgICAgICAgICAgICAgICQoXCIucmVzUHJpemVcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgIHJlc291cmNlRnJlZSA9IDI7XG4gICAgICAgICAgICAgICAgJCgnI2NvdXJzZVJlbWluZCcpLnNob3coKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgJChcIi5GcmVlU2VsZWN0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLnJlc1ByaXplXCIpLmF0dHIoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xuICAgICAgICAgICAgICAgICQoXCIucmVzUHJpemVcIikuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgJChcIi5yZXNQcml6ZVwiKS52YWwoMCk7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2VGcmVlID0gMTtcbiAgICAgICAgICAgICAgICAkKCcjY291cnNlUmVtaW5kJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICQoJyNjb3Vyc2VSZW1pbmQgb3B0aW9uW3ZhbHVlPS0xXScpLnByb3AoJ3NlbGVjdGVkJyx0cnVlKTtcbiAgICAgICAgICAgICAgICAkKCcjcHVzaF9haGVhZCcpLmNoYW5nZSgpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuXG5cbiAgICAgICAgLy/lvIDor77mj5DphpJcbiAgICAgICAgcHVzaF9haGVhZCA9ICQoJyNwdXNoX2FoZWFkIG9wdGlvbjpzZWxlY3RlZCcpLnZhbCgpO1xuICAgICAgICBpZl9wdXNoID0gJCgnI2lmX3B1c2gnKS52YWwoKSB8fCAxO1xuICAgICAgICBmdW5jdGlvbiBzZXRJZlB1c2goKSB7XG4gICAgICAgICAgICBpZiggcHVzaF9haGVhZCA9PSAtMSApIHtcbiAgICAgICAgICAgICAgICBpZl9wdXNoID0gMTtcbiAgICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgICAgICBpZl9wdXNoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgJHB1c2hBaGVhZCA9ICQoJyNwdXNoX2FoZWFkJyk7XG4gICAgICAgIGlmKCRwdXNoQWhlYWQubGVuZ3RoPjApe1xuICAgICAgICAgICAgY29uc29sZS5sb2cocHVzaF9haGVhZCk7XG4gICAgICAgICAgICBzZXRJZlB1c2goKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlmX3B1c2gpO1xuICAgICAgICAgICAgaWYoICRwdXNoQWhlYWQuZGF0YSgnc2V0dGluZycpID09IDEgKSB7IC8v55So5oi35pyq5bCG5pyN5Yqh5Y+36K6+572u5Li65pWZ6IKy6KGM5LiaXG4gICAgICAgICAgICAgICAgJHB1c2hBaGVhZC5vbignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clNlbGVjdGVkID0gK2VsZS52YWwoKTtcblxuICAgICAgICAgICAgICAgICAgICBlbGUuZmluZCgnb3B0aW9uW3ZhbHVlPScrIHB1c2hfYWhlYWQgKyddJykucHJvcCgnc2VsZWN0ZWQnLHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBwdXNoX2FoZWFkID09IC0xICYmIGN1clNlbGVjdGVkICE9IC0xICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dD0gIFwi5oKo6ZyA6KaB5Yiw5b6u5L+h5YWs5LyX5Y+35ZCO5Y+w5bCG5oKo55qE5pyN5Yqh5Y+35omA5Zyo6KGM5Lia6K6+572u5Li64oCc5pWZ6IKyL+WfueiureKAne+8jOiuvue9ruWujOaIkOWQju+8jOW8gOWQr+acjeWKoeWPt+mAmuefpeaWueWPr+ato+W4uOWPkemAgeaooeadv+a2iOaBr+OAglwiK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCI8YnIvPjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPScvaGVscC9pbnN0cnVjdGlvbnMjaHA1X3d4X3NlcnZpY2UnIHN0eWxlPSdtYXJnaW4tdG9wOjEwcHg7Jz7ku4DkuYjmmK/mqKHmnb/mtojmga/vvJ88L2E+XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuaPkOekulwiLCAvL+W8ueWHuuahhuagh+mimFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMywgLy/noa7lrpomJuWPlua2iFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+aIkeW3suiuvue9ricsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsdGV4dDogJ+WFs+mXrScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2JsdWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCl7Ly/lj5HpgIHor7fmsYLvvIzliKTmlq3nlKjmiLfmmK/lkKborr7nva7mnI3liqHlj7fooYzkuJpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KCcvaGFzX2luZHVzdHJ5Jyx7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2RlID0gZGF0YS5yZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb2RlID09IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCdvcHRpb25bdmFsdWU9JysgY3VyU2VsZWN0ZWQgKyddJykucHJvcCgnc2VsZWN0ZWQnLHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hfYWhlYWQgPSBjdXJTZWxlY3RlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJZlB1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKua2iOaBr+aOqOmAgeW8gOWQryovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuaooeadv+a2iOaBr+aOqOmAgeW8gOWQr1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5peg5rOV5byA5ZCv5raI5oGv5o6o6YCB77yM6K+35oyJ54Wn5o+Q56S65L+u5pS56K6+572uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKHhociwgdGV4dCwgZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWxlcnQodHh0LCBcImN1c3RvbVwiLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyrlhbPpl63mtojmga/mjqjpgIEqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaF9haGVhZCA9IGN1clNlbGVjdGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWZQdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuZmluZCgnb3B0aW9uW3ZhbHVlPScrIGN1clNlbGVjdGVkICsnXScpLnByb3AoJ3NlbGVjdGVkJyx0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkcHVzaEFoZWFkLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIHB1c2hfYWhlYWQgPSArZWxlLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldElmUHVzaCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgLy/nvJbovpHlmajpooTop4hcbiAgICAgICAgJCgnI3ByZXZpZXcnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICB2YXIgaHRtbCA9IHVlLmdldENvbnRlbnQoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3X2NvbnRlbnQnKS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgJCgnLnByZXZpZXdfY29uJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLnByZXZpZXdfYm94JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJCgnLnByZXZpZXdfY29uJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xuICAgICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICAkKCcjcHJldmlld19jb250ZW50JykuaHRtbCgnJyk7XG4gICAgICAgICAgICAkKCcucHJldmlld19ib3gnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc3R5bGUub3ZlcmZsb3cgPSBcImF1dG9cIjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gICDpgInmi6nor63pn7PmiJbogIXpn7PpopHvvIjnm7Tmkq3vvIlcbiAgICAgICAgJChcIi52aWRlb3NTZWxlY3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIi5hbGl2ZVZpZGVvQm94XCIpLnNsaWRlRG93bigzMDApO1xuICAgICAgICAgICAgYWxpdmVUID0gMTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsaXZlVCk7XG4gICAgICAgICAgICBWaWRlb05hbWUgPSBudWxsO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi52b2ljZVNlbGVjdFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLmFsaXZlVmlkZW9Cb3hcIikuc2xpZGVVcCgzMDApO1xuICAgICAgICAgICAgYWxpdmVUID0gMDtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsaXZlVCk7XG4gICAgICAgIH0pO1xuICAgICAgICAkKFwiLmFsaXZlU2VsZWN0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIuYWxpdmVWaWRlb0JveFwiKS5zbGlkZVVwKDMwMCk7XG4gICAgICAgICAgICBhbGl2ZVQgPSAyO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYWxpdmVUKTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIucHB0QWxpdmVTZWxlY3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIi5hbGl2ZVZpZGVvQm94XCIpLnNsaWRlVXAoMzAwKTtcbiAgICAgICAgICAgIGFsaXZlVCA9IDM7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhbGl2ZVQpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+mAieaLqeS4k+agj+S4iuS4i+aetlxuICAgICAgICAkKFwiLmNvbHVtblNob3dcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY29sdW1uU3RhdGUgPSAwO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5jb2x1bW5IaWRlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbHVtblN0YXRlID0gMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy/pgInmi6nmmL7npLrmnJ/mlbBcbiAgICAgICAgJChcIi5jb3VudFNob3dcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgc2hvd19yZXNvdXJjZWNvdW50ID0gMTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIuY291bnRIaWRlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNob3dfcmVzb3VyY2Vjb3VudCA9IDA7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy/ngrnlh7vkuIrkuIDmraXov5Tlm55cbiAgICAgICAgJCgnLmxhc3RTdGVwQnRuJykuY2xpY2soZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB3aW5kb3cuaGlzdG9yeS5iYWNrKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHZhciAkZ2V0QmFjayA9ICQoJyNnZXRCYWNrJyk7XG4gICAgICAgIGlmKHVwbG9hZENoYW5uZWxUeXBlID09IDEpIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc291cmNlVHlwZSk7XG4gICAgICAgICAgICBpZihyZXNvdXJjZVR5cGUgPT0gNCl7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2hhc19jb21lJyk7XG4gICAgICAgICAgICAgICAgJGdldEJhY2suYXR0cignaHJlZicsICcvcmVzb3VyY2VfbGlzdF9wYWdlP3Jlc291cmNlX3R5cGU9NCcpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgYmFja1VSTCA9ICcvcmVzb3VyY2VfbGlzdF9wYWdlJztcbiAgICAgICAgICAgICAgICAkZ2V0QmFjay5hdHRyKCdocmVmJywgYmFja1VSTCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZih1cGxvYWRDaGFubmVsVHlwZSA9PSAyKSB7XG4gICAgICAgICAgICBiYWNrVVJMID0gJy9wYWNrYWdlX2RldGFpbF9wYWdlP2lkPScgKyBwYWNrYWdlSWQ7XG4gICAgICAgICAgICAkZ2V0QmFjay5hdHRyKCdocmVmJywgYmFja1VSTCk7XG4gICAgICAgIH0gZWxzZSBpZih1cGxvYWRDaGFubmVsVHlwZSA9PSAzKSB7XG4gICAgICAgICAgICBiYWNrVVJMID0gJy9tZW1iZXJfZGV0YWlsX3BhZ2U/aWQ9JyArIHBhY2thZ2VJZDtcbiAgICAgICAgICAgICRnZXRCYWNrLmF0dHIoJ2hyZWYnLCBiYWNrVVJMKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8v54K55Ye75L6n6L655qCP56a75byA5pe255qE5by55qGGXG4gICAgICAgIGNoYW5nZVNhdmVGbGFnKHRydWUpO1xuXG5cbiAgICAgICAgLy/mnI3liqHlj7fpgJrnn6XlvLnlh7rnmoTpgLvovpHliKTmlq1cbiAgICAgICAgdmFyICRzZXJ2aWNlVG9nZ2xlID0gJCgnI3NlcnZpY2VUb2dnbGUnKTtcbiAgICAgICAgcHJldlZhbCA9ICskKFwiI3NlcnZpY2VUb2dnbGUgOnJhZGlvOmNoZWNrZWRcIikudmFsKCkgfHwgbnVsbDsgLy/lvZPliY3ljZXpgInmoYbnmoTlgLxcbiAgICAgICAgaWYoJHNlcnZpY2VUb2dnbGUubGVuZ3RoPjApe1xuICAgICAgICAgICAgaWYoICRzZXJ2aWNlVG9nZ2xlLmRhdGEoJ3NldHRpbmcnKSA9PSAxICkgeyAvL+eUqOaIt+acquWwhuacjeWKoeWPt+iuvue9ruS4uuaVmeiCsuihjOS4mlxuICAgICAgICAgICAgICAgICRzZXJ2aWNlVG9nZ2xlLm9uKCdjbGljaycsICc6cmFkaW8nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyclZhbCA9ICtlbGUudmFsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1cnJWYWwgIT09IHByZXZWYWwgJiYgY3VyclZhbCA9PSAxICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dD0gIFwi5oKo6ZyA6KaB5Yiw5b6u5L+h5YWs5LyX5Y+35ZCO5Y+w5bCG5oKo55qE5pyN5Yqh5Y+35omA5Zyo6KGM5Lia6K6+572u5Li64oCc5pWZ6IKyL+WfueiureKAne+8jOiuvue9ruWujOaIkOWQju+8jOW8gOWQr+acjeWKoeWPt+mAmuefpeaWueWPr+ato+W4uOWPkemAgeaooeadv+a2iOaBr+OAglwiK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCI8YnIvPjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPScvaGVscC9pbnN0cnVjdGlvbnMjaHA1X3d4X3NlcnZpY2UnIHN0eWxlPSdtYXJnaW4tdG9wOjEwcHg7Jz7ku4DkuYjmmK/mqKHmnb/mtojmga/vvJ88L2E+XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuaPkOekulwiLCAvL+W8ueWHuuahhuagh+mimFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMywgLy/noa7lrpomJuWPlua2iFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+aIkeW3suiuvue9ricsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsdGV4dDogJ+WFs+mXrScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2JsdWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCl7Ly/lj5HpgIHor7fmsYLvvIzliKTmlq3nlKjmiLfmmK/lkKborr7nva7mnI3liqHlj7fooYzkuJpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KCcvaGFzX2luZHVzdHJ5Jyx7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2RlID0gZGF0YS5yZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb2RlID09IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJldlZhbCA9IGN1cnJWYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLyrmtojmga/mjqjpgIHlvIDlkK8qL1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLmqKHmnb/mtojmga/mjqjpgIHlvIDlkK9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaXoOazleW8gOWQr+a2iOaBr+aOqOmAge+8jOivt+aMieeFp+aPkOekuuS/ruaUueiuvue9rlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbih4aHIsIHRleHQsIGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFsZXJ0KHR4dCwgXCJjdXN0b21cIiwgb3B0aW9uKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8q5YWz6Zet5raI5oGv5o6o6YCBKi9cbiAgICAgICAgICAgICAgICAgICAgICAgIHByZXZWYWwgPSBjdXJyVmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zWydwdXNoX3N0YXRlJ10gPSBjdXJyVmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlcnZpY2VUb2dnbGUnKS5kYXRhKCdzdGF0ZScsY3VyclZhbCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNlcnZpY2VUb2dnbGUub24oJ2NsaWNrJywgJzpyYWRpbycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGVsZSA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyVmFsID0gZWxlLnZhbCgpO1xuICAgICAgICAgICAgICAgICAgICBpZiggY3VyclZhbCAhPT0gcHJldlZhbCAmJiBjdXJyVmFsID09IDEgKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2VmFsID0gY3VyclZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLmqKHmnb/mtojmga/mjqjpgIHlvIDlkK9cIik7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2VmFsID0gY3VyclZhbDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gcmVzQWRkO1xufSkoKTtcblxuLy/lhazlhbHmlrnms5VcblxuLy/ojrflj5blvZPliY3ml6XmnJ/moLzlvI9cbmdldE5vd0Zvcm1hdERhdGUoKTtcbmZ1bmN0aW9uIGdldE5vd0Zvcm1hdERhdGUoKSB7XG4gICAgdmFyIGRhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIHZhciBzZXBlcmF0b3IxID0gXCItXCI7XG4gICAgdmFyIHNlcGVyYXRvcjIgPSBcIjpcIjtcbiAgICB2YXIgeWVhciA9IGRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICB2YXIgbW9udGggPSBkYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgIHZhciBzdHJEYXRlID0gZGF0ZS5nZXREYXRlKCk7XG4gICAgaWYgKG1vbnRoID49IDEgJiYgbW9udGggPD0gOSkge1xuICAgICAgICBtb250aCA9IFwiMFwiICsgbW9udGg7XG4gICAgfVxuICAgIGlmIChzdHJEYXRlID49IDAgJiYgc3RyRGF0ZSA8PSA5KSB7XG4gICAgICAgIHN0ckRhdGUgPSBcIjBcIiArIHN0ckRhdGU7XG4gICAgfVxuICAgIGN1cnJlbnREYXRlID0geWVhciArIHNlcGVyYXRvcjEgKyBtb250aCArIHNlcGVyYXRvcjEgKyBzdHJEYXRlXG4gICAgICAgICsgXCIgXCIgKyBkYXRlLmdldEhvdXJzKCkgKyBzZXBlcmF0b3IyICsgZGF0ZS5nZXRNaW51dGVzKClcbiAgICAgICAgKyBzZXBlcmF0b3IyICsgZGF0ZS5nZXRTZWNvbmRzKCk7XG4gICAgcmV0dXJuIGN1cnJlbnREYXRlO1xufVxuIl19
