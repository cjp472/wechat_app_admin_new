$errorReprot={reportedArr:[],reportNum:0,report:function(i){try{limitTag=i.limitTag||false;srcType=i.srcType||"";srcHref=i.srcHref||"";errorEvent=i.errorEvent||"";errorCode=i.errorCode||"";if(!limitTag&&$errorReprot.reportNum>=1){console.log("超过错误上报次数限制");return}$errorReprot.reportNum+=1;var a=location.href;var e=navigator.userAgent;var o="";if(e.indexOf("iPhone")!==-1||e.indexOf("iphone")!==-1){o="iPhone"}else if(e.indexOf("Android")!==-1||e.indexOf("android")!==-1){o="Android"}var t="";if(o==="iPhone"){var n=/iPhone OS (.*?) /g;t=n.exec(e);if(t&&t.length>1){t=t[1]}}else if(o==="Android"){var n=/Android (.*?);/g;t=n.exec(e);if(t&&t.length>1){t=t[1]}}var u="";if(o==="iPhone"){u=o}else if(o==="Android"){var r=/; (.*?)\) AppleWebKit/g;u=r.exec(e);if(u&&u.length>1){u=u[1];var d=u.indexOf(";");if(d!==-1){u=u.substring(d+2)}}}var l=/MicroMessenger\/(.*?) /g;var y=l.exec(e);if(y&&y.length>1){y=y[1]}else{y=""}var s=/NetType\/(.*?) /g;var $=s.exec(e);if($&&$.length>1){$=$[1]}else if(navigator.connection&&navigator.connection.type){$=navigator.connection.type}else{$=""}var c={src_type:srcType,src_href:srcHref,error_event:errorEvent,error_code:errorCode,page_href:a,user_agent:e,phone_type:u,system_type:o,system_ver:t,wx_ver:y,network_type:$};var f=srcType+srcHref+errorEvent+errorCode;if($errorReprot.reportedArr.indexOf(f)>-1){console.log("上报过该类型错误了");return}$errorReprot.reportedArr.push(f);NetWork.request("error_report",c,function(i){});console.log("error_report")}catch(i){console.log(i)}}};$audioContinue={readedArr:[],readTime:function(i,a){try{if(localStorage&&$audioContinue.readedArr.indexOf(i)==-1){var e=localStorage.getItem("audioTime");if(e){e=JSON.parse(e);var o=e[i];if(o&&a.currentTime<3){o=o-3;if(o>0){a.currentTime=o}else{a.currentTime=.01}$audioContinue.readedArr.push(i);console.log($audioContinue.readedArr)}}}}catch(i){console.log(i)}},saveTime:function(i,a){try{if(localStorage){var e=localStorage.getItem("audioTime");if(e){e=JSON.parse(e)}else{e={}}var o=a.currentTime;var t=a.duration;if(e[i]!==o&&o>3){if(t-o<=3){e[i]=0}else{e[i]=o}e=JSON.stringify(e);localStorage.setItem("audioTime",e)}}}catch(i){console.log(i)}}};$audioListPlay={$playingAudio:null,$playingAudioIndex:0,$playingAudioId:null,$playingAudioM3u8:null,$audioType:null,$playNum:[],init:function(){$audioListPlay.clickPlayButton();$audioListPlay.updatePlayInfo();$audioListPlay.playNextAuto()},clickPlayButton:function(){$(".content-list").on("click",".audioPlayButton",function(){var i=$(this);if(i){var a=$audioListPlay.getAudioSrc(i);if(i.hasClass("audioStopStatus")){$audioListPlay.playAudio(i,a)}else if(i.hasClass("audioPlayStatus")){$audioListPlay.pauseAudio(i,a)}}})},updatePlayInfo:function(){setInterval(function(){if($audioListPlay.$playingAudio&&!$audioListPlay.$playingAudio[0].paused){var i=$audioListPlay.$playingAudio[0].currentTime;var a=$audioListPlay.$playingAudio[0].duration;var e=parseInt(i/a*100);if(!isNaN(e)&&e>0&&e<=100){$(".audioPlayPercent").eq($audioListPlay.$playingAudioIndex).html(e)}else if(!isNaN(e)&&e>=100){$(".audioPlayPercent").eq($audioListPlay.$playingAudioIndex).html(100)}var o=$audioListPlay.$playingAudioId;$audioContinue.saveTime(o,$audioListPlay.$playingAudio[0]);if(a-i<=30){if($audioListPlay.$audioType){$audioActionAnalyse.$type=1}else{$audioActionAnalyse.$type=0}$audioActionAnalyse.$audioId=o;$audioActionAnalyse.finishCount()}if(i>1e-4){$audioContinue.readTime(o,$audioListPlay.$playingAudio[0])}}},500)},getAudioSrc:function(i){var a=i.children("audio").eq(0);var e=i.data("m3u8");var o=i.data("mp3compress");var t=n=i.data("mp3");if(!a.attr("src")){var n="";if(o){n=o}else if(e){n=e}else if(t){n=t}a.attr("src",n)}return a},playAudio:function(i,a){if($audioListPlay.$playingAudio){$audioListPlay.$playingAudio[0].pause()}a[0].play();try{wx.getNetworkType({success:function(i){a[0].play()}})}catch(i){}console.log("play");$audioListPlay.$playingAudioIndex=$(".audioDom").index(a);$audioListPlay.$playingAudio=a;$audioListPlay.$playingAudioId=$(".audioPlayButton").eq($audioListPlay.$playingAudioIndex).data("id");$audioListPlay.$playingAudioM3u8=$(".audioPlayButton").eq($audioListPlay.$playingAudioIndex).data("m3u8");$audioListPlay.$audioType=$(".audioPlayButton").eq($audioListPlay.$playingAudioIndex).data("try");$audioListPlay.$playingAudio.on("canplay",function(){$audioContinue.readTime($audioListPlay.$playingAudioId,$audioListPlay.$playingAudio[0]);$audioListPlay.$playingAudio.off("canplay")});$(".audioPlayPercentWrapper").eq($audioListPlay.$playingAudioIndex).show();$(".audioPlayButton").removeClass("audioPlayStatus").addClass("audioStopStatus");$(".audioTitle").removeClass("c7").addClass("c2");$(".audioTitle").eq($audioListPlay.$playingAudioIndex).removeClass("c2").addClass("c7");i.removeClass("audioStopStatus").addClass("audioPlayStatus");if($audioListPlay.$playNum.indexOf($audioListPlay.$playingAudioIndex)===-1){$audioListPlay.$playNum.push($audioListPlay.$playingAudioIndex);NetWork.request("addAudioViewCount/"+i.data("id"),{},function(i){});if($audioListPlay.$audioType){$audioActionAnalyse.$type=1}else{$audioActionAnalyse.$type=0}$audioActionAnalyse.$audioId=$audioListPlay.$playingAudioId;$audioActionAnalyse.playCount();var e=$(".audioViewCount").eq($audioListPlay.$playingAudioIndex).html();if(e&&e.indexOf("W")===-1){e=parseInt(e)+1;$(".audioViewCount").eq($audioListPlay.$playingAudioIndex).html(e)}}},pauseAudio:function(i,a){a[0].pause();i.removeClass("audioPlayStatus").addClass("audioStopStatus");$(".audioTitle").removeClass("c7").addClass("c2")},playByIndex:function(i){var a=$(".audioPlayButton");var e=null;var o=null;if(i<a.length){e=a.eq(i);o=$audioListPlay.getAudioSrc(e);$audioListPlay.playAudio(e,o)}else if(i-1<a.length){e=a.eq(i-1);o=$audioListPlay.getAudioSrc(e);$audioListPlay.pauseAudio(e,o)}},playNextAuto:function(){$(".audioDom").each(function(){$(this).off("ended").on("ended",function(){$audioActionAnalyse.$type=0;$audioActionAnalyse.$audioId=$(".audioPlayButton").eq($audioListPlay.$playingAudioIndex).data("id");$(".audioPlayPercent").eq($audioListPlay.$playingAudioIndex).html(100);var i=$audioListPlay.$playingAudioIndex+1;$audioListPlay.playByIndex(i)})})}};$audioActionAnalyse={$type:"",$audioId:"",$reported:[],playCount:function(){$audioActionAnalyse.reportToServer("play_count")},finishCount:function(){$audioActionAnalyse.reportToServer("finish_count")},reportToServer:function(i){var a={type:$audioActionAnalyse.$type,audio_id:$audioActionAnalyse.$audioId,action:i};var e=JSON.stringify(a);if($audioActionAnalyse.$reported.indexOf(e)===-1){$audioActionAnalyse.$reported.push(e);NetWork.request("audio_action_analyse",a,function(i){});console.log(i)}}};$giftBuy={minLimit:1,maxLimit:100,buyCount:parseInt($("#selector_show").val()),buying:false,piece_price:parseFloat($("#payPrice").val()),init:function(){$(".giftBuyButton").each(function(){$(this).on("click",function(){$(".payManyPart").show();$("body").on("touchmove",function(i){i.preventDefault()})})});$("#closePayMany").on("click",function(){$(".payManyPart").hide();$("body").off("touchmove")});$giftBuy.buyCardAction()},buyCardAction:function(){$("#reduce_count").click(function(i){i.stopPropagation();$giftBuy.buyCount=$giftBuy.buyCount-1;if($giftBuy.buyCount<$giftBuy.minLimit){$giftBuy.buyCount=$giftBuy.minLimit}$giftBuy.updatePrice()});$("#add_count").click(function(i){i.stopPropagation();$giftBuy.buyCount=$giftBuy.buyCount+1;if($giftBuy.buyCount>$giftBuy.maxLimit){$giftBuy.buyCount=$giftBuy.maxLimit}$giftBuy.updatePrice()});$("#selector_show").change(function(){var i=parseInt($(this).val());if(!isNaN(i)){$giftBuy.buyCount=i;if($giftBuy.buyCount<$giftBuy.minLimit){$giftBuy.buyCount=$giftBuy.minLimit}else if($giftBuy.buyCount>$giftBuy.maxLimit){$giftBuy.buyCount=$giftBuy.maxLimit}$giftBuy.updatePrice()}else{$giftBuy.updatePrice()}});$("#giftBuyButton").click(function(){if($giftBuy.buying){return}$giftBuy.buying=true;var i={count:$giftBuy.buyCount,buy_gift:1};NetWork.request("pay/get_info",i,function(i){var a=$.parseJSON(i);if(a&&a.package){var e=a.package.split("=")[1];if(typeof WeixinJSBridge=="undefined"){$giftBuy.buying=false;return}if(WeixinJSBridge){WeixinJSBridge.invoke("getBrandWCPayRequest",{appId:a.appId,timeStamp:a.timeStamp,nonceStr:a.nonceStr,package:a.package,signType:a.signType,paySign:a.paySign},function(i){if(i.err_code){$giftBuy.buying=false;if(i.err_code==3){var a=window.location.hostname.indexOf(".h5.");if(a===-1){$giftBuy.scanUrl="/"+window.APPID+"/pay/scan_image/"+e}else{$giftBuy.scanUrl="/pay/scan_image/"+e}$(".scan_window_image").attr("src",$giftBuy.scanUrl);$(".scan_layer").css("display","block");$(".navigation_menu").css("display","none")}else{alert(i.err_code+" "+i.err_msg)}}else if(i.err_msg=="get_brand_wcpay_request:ok"){var o=new Date;eJump("/gift_list?"+o.getTime(),true)}else if(i.err_msg=="get_brand_wcpay_request:cancel"){$giftBuy.buying=false}else{$giftBuy.buying=false}})}}})})},updatePrice:function(){$("#selector_show").val($giftBuy.buyCount);$("#total_price").html("￥"+($giftBuy.buyCount*$giftBuy.piece_price).toFixed(2))}};$(function(){document.body.addEventListener("touchstart",function(){})});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIl0sIm5hbWVzIjpbIiRlcnJvclJlcHJvdCIsInJlcG9ydGVkQXJyIiwicmVwb3J0TnVtIiwicmVwb3J0IiwicmVwb3J0UGFybSIsImxpbWl0VGFnIiwic3JjVHlwZSIsInNyY0hyZWYiLCJlcnJvckV2ZW50IiwiZXJyb3JDb2RlIiwiY29uc29sZSIsImxvZyIsInBhZ2VVcmwiLCJsb2NhdGlvbiIsImhyZWYiLCJ1c2VyQWdlbnQiLCJuYXZpZ2F0b3IiLCJzeXN0ZW1UeXBlIiwiaW5kZXhPZiIsInN5c3RlbVZlciIsInN5c3RlbVBhdHQiLCJleGVjIiwibGVuZ3RoIiwicGhvbmVUeXBlIiwicGhvbmVUeXBlUGF0dCIsIm51bSIsInN1YnN0cmluZyIsInd4VmVyUGF0dCIsInd4VmVyIiwibmV0d29ya1R5cGVQYXR0IiwibmV0d29ya1R5cGUiLCJjb25uZWN0aW9uIiwidHlwZSIsInBhcmFtcyIsInNyY190eXBlIiwic3JjX2hyZWYiLCJlcnJvcl9ldmVudCIsImVycm9yX2NvZGUiLCJwYWdlX2hyZWYiLCJ1c2VyX2FnZW50IiwicGhvbmVfdHlwZSIsInN5c3RlbV90eXBlIiwic3lzdGVtX3ZlciIsInd4X3ZlciIsIm5ldHdvcmtfdHlwZSIsInJlcG9ydFRhZyIsInB1c2giLCJOZXRXb3JrIiwicmVxdWVzdCIsImRhdGEiLCJlcnIiLCIkYXVkaW9Db250aW51ZSIsInJlYWRlZEFyciIsInJlYWRUaW1lIiwiYXVkaW9JZCIsImF1ZGlvRG9tIiwibG9jYWxTdG9yYWdlIiwiYXVkaW9UaW1lIiwiZ2V0SXRlbSIsIkpTT04iLCJwYXJzZSIsIm5vd1RpbWUiLCJjdXJyZW50VGltZSIsInNhdmVUaW1lIiwiZHVyYXRpb24iLCJzdHJpbmdpZnkiLCJzZXRJdGVtIiwiJGF1ZGlvTGlzdFBsYXkiLCIkcGxheWluZ0F1ZGlvIiwiJHBsYXlpbmdBdWRpb0luZGV4IiwiJHBsYXlpbmdBdWRpb0lkIiwiJHBsYXlpbmdBdWRpb00zdTgiLCIkYXVkaW9UeXBlIiwiJHBsYXlOdW0iLCJpbml0IiwiY2xpY2tQbGF5QnV0dG9uIiwidXBkYXRlUGxheUluZm8iLCJwbGF5TmV4dEF1dG8iLCIkIiwib24iLCJhdWRpb1BsYXlCdXR0b24iLCJ0aGlzIiwiZ2V0QXVkaW9TcmMiLCJoYXNDbGFzcyIsInBsYXlBdWRpbyIsInBhdXNlQXVkaW8iLCJzZXRJbnRlcnZhbCIsInBhdXNlZCIsInBlcmNlbnQiLCJwYXJzZUludCIsImlzTmFOIiwiZXEiLCJodG1sIiwiJGF1ZGlvQWN0aW9uQW5hbHlzZSIsIiR0eXBlIiwiJGF1ZGlvSWQiLCJmaW5pc2hDb3VudCIsImNoaWxkcmVuIiwibTN1OCIsIm1wM2NvbXByZXNzIiwibXAzIiwiYXVkaW9VcmwiLCJhdHRyIiwicGF1c2UiLCJwbGF5Iiwid3giLCJnZXROZXR3b3JrVHlwZSIsInN1Y2Nlc3MiLCJyZXMiLCJpbmRleCIsIm9mZiIsInNob3ciLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwicGxheUNvdW50Iiwidmlld0NvdW50IiwicGxheUJ5SW5kZXgiLCJhdWRpb1BsYXlCdXR0b25BcnIiLCJlYWNoIiwiJHJlcG9ydGVkIiwicmVwb3J0VG9TZXJ2ZXIiLCJhY3Rpb24iLCJidXpEYXRhIiwiYXVkaW9faWQiLCIkZ2lmdEJ1eSIsIm1pbkxpbWl0IiwibWF4TGltaXQiLCJidXlDb3VudCIsInZhbCIsImJ1eWluZyIsInBpZWNlX3ByaWNlIiwicGFyc2VGbG9hdCIsImV2ZW50IiwicHJldmVudERlZmF1bHQiLCJoaWRlIiwiYnV5Q2FyZEFjdGlvbiIsImNsaWNrIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInVwZGF0ZVByaWNlIiwiY2hhbmdlIiwiY291bnQiLCJidXlfZ2lmdCIsIiRjb25mIiwicGFyc2VKU09OIiwicGFja2FnZSIsInByZXBheUlkIiwic3BsaXQiLCJXZWl4aW5KU0JyaWRnZSIsImludm9rZSIsImFwcElkIiwidGltZVN0YW1wIiwibm9uY2VTdHIiLCJzaWduVHlwZSIsInBheVNpZ24iLCJlcnJfY29kZSIsInVybFR5cGUiLCJ3aW5kb3ciLCJob3N0bmFtZSIsInNjYW5VcmwiLCJBUFBJRCIsImNzcyIsImFsZXJ0IiwiZXJyX21zZyIsImRhdGUiLCJEYXRlIiwiZUp1bXAiLCJnZXRUaW1lIiwidG9GaXhlZCIsImRvY3VtZW50IiwiYm9keSIsImFkZEV2ZW50TGlzdGVuZXIiXSwibWFwcGluZ3MiOiJBQWVBQSxjQUVJQyxlQUVBQyxVQUFVLEVBQ1ZDLE9BQU8sU0FBVUMsR0FDYixJQUVJQyxTQUFXRCxFQUFXQyxVQUFZLEtBRWxDQyxTQUFVRixFQUFXRSxTQUFTLEVBRTlCQyxTQUFVSCxFQUFXRyxTQUFTLEVBRTlCQyxZQUFhSixFQUFXSSxZQUFZLEVBRXBDQyxXQUFZTCxFQUFXSyxXQUFXLEVBRWxDLEtBQUlKLFVBQVlMLGFBQWFFLFdBQVcsRUFBRSxDQUN0Q1EsUUFBUUMsSUFBSSxhQUNaLFFBR0pYLGFBQWFFLFdBQWEsQ0FHMUIsSUFBSVUsR0FBVUMsU0FBU0MsSUFFdkIsSUFBSUMsR0FBWUMsVUFBVUQsU0FJMUIsSUFBSUUsR0FBYSxFQUNqQixJQUFHRixFQUFVRyxRQUFRLGFBQWUsR0FBS0gsRUFBVUcsUUFBUSxhQUFlLEVBQUUsQ0FDeEVELEVBQWEsYUFFWixJQUFHRixFQUFVRyxRQUFRLGNBQWdCLEdBQUtILEVBQVVHLFFBQVEsY0FBZ0IsRUFBRSxDQUMvRUQsRUFBYSxVQUtqQixHQUFJRSxHQUFZLEVBQ2hCLElBQUdGLElBQWUsU0FBUyxDQUN2QixHQUFJRyxHQUFhLG1CQUNqQkQsR0FBWUMsRUFBV0MsS0FBS04sRUFDNUIsSUFBR0ksR0FBYUEsRUFBVUcsT0FBTyxFQUFFLENBQy9CSCxFQUFZQSxFQUFVLFFBR3pCLElBQUdGLElBQWUsVUFBVSxDQUM3QixHQUFJRyxHQUFhLGlCQUNqQkQsR0FBWUMsRUFBV0MsS0FBS04sRUFDNUIsSUFBR0ksR0FBYUEsRUFBVUcsT0FBTyxFQUFFLENBQy9CSCxFQUFZQSxFQUFVLElBTTlCLEdBQUlJLEdBQVksRUFDaEIsSUFBR04sSUFBZSxTQUFTLENBQ3ZCTSxFQUFZTixN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U0FBU0MsS0FBS0MsaUJBQWlCLGFBQWMiLCJmaWxlIjoidXRpbHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgTmVvIG9uIDIwMTcvMS81LlxuICovXG5cblxuXG4vKipcbiAqIOi1hOa6kOmUmeivr+S4iuaKpVxuICogcmVwb3J0UGFybVxuICogQHBhcmFtIGxpbWl0VGFnIOmZkOWItuWPkemAgeagh+W/l++8iGZhbHNl5Y+q5LiK5oql5LiA5qyhKOWQjue7reiwg+eUqOaXoOaViCnvvJt0cnVl5Li65Y+q5LiK5oql5LiN5ZCM57G75Z6L6ZSZ6K+vKOS4i+WIl+Wbm+S4quWPguaVsOWujOWFqOebuOWQjOeahOS4jeWGjeS4iuaKpSlcbiAqIEBwYXJhbSBlcnJvckV2ZW50IOmUmeivr+S6i+S7tlxuICogQHBhcmFtIGVycm9yQ29kZSDplJnor6/noIFcbiAqIEBwYXJhbSBzcmNUeXBlIOi1hOa6kOexu+Wei1xuICogQHBhcmFtIHNyY0hyZWYg6LWE5rqQ5Zyw5Z2AXG4gKi9cbiRlcnJvclJlcHJvdCA9IHtcbiAgICAvLyDpmZDliLbkuIrmiqXvvIzlkIznp43mg4XlhrXlj6rkuIrmiqXkuIDmrKFcbiAgICByZXBvcnRlZEFycjpbXSxcbiAgICAvLyDkuIrmiqXmrKHmlbBcbiAgICByZXBvcnROdW06MCxcbiAgICByZXBvcnQ6ZnVuY3Rpb24gKHJlcG9ydFBhcm0pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIOmZkOWItuWPkemAgeagh+W/l1xuICAgICAgICAgICAgbGltaXRUYWcgPSByZXBvcnRQYXJtLmxpbWl0VGFnIHx8IGZhbHNlO1xuICAgICAgICAgICAgLy8g6LWE5rqQ57G75Z6LXG4gICAgICAgICAgICBzcmNUeXBlID0gcmVwb3J0UGFybS5zcmNUeXBlfHwnJztcbiAgICAgICAgICAgIC8vIOi1hOa6kOWcsOWdgFxuICAgICAgICAgICAgc3JjSHJlZiA9IHJlcG9ydFBhcm0uc3JjSHJlZnx8Jyc7XG4gICAgICAgICAgICAvLyDplJnor6/kuovku7ZcbiAgICAgICAgICAgIGVycm9yRXZlbnQgPSByZXBvcnRQYXJtLmVycm9yRXZlbnR8fCcnO1xuICAgICAgICAgICAgLy8g6ZSZ6K+v56CBXG4gICAgICAgICAgICBlcnJvckNvZGUgPSByZXBvcnRQYXJtLmVycm9yQ29kZXx8Jyc7XG5cbiAgICAgICAgICAgIGlmKCFsaW1pdFRhZyAmJiAkZXJyb3JSZXByb3QucmVwb3J0TnVtPj0xKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIui2hei/h+mUmeivr+S4iuaKpeasoeaVsOmZkOWItlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICRlcnJvclJlcHJvdC5yZXBvcnROdW0gKz0gMTtcblxuICAgICAgICAgICAgLy8g6aG16Z2i6ZO+5o6lXG4gICAgICAgICAgICB2YXIgcGFnZVVybCA9IGxvY2F0aW9uLmhyZWY7XG4gICAgICAgICAgICAvLyDor7fmsYLlpLTkv6Hmga9cbiAgICAgICAgICAgIHZhciB1c2VyQWdlbnQgPSBuYXZpZ2F0b3IudXNlckFnZW50O1xuXG5cbiAgICAgICAgICAgIC8vIOezu+e7n+exu+Wei1xuICAgICAgICAgICAgdmFyIHN5c3RlbVR5cGUgPSBcIlwiO1xuICAgICAgICAgICAgaWYodXNlckFnZW50LmluZGV4T2YoXCJpUGhvbmVcIikgIT09IC0xIHx8IHVzZXJBZ2VudC5pbmRleE9mKFwiaXBob25lXCIpICE9PSAtMSl7XG4gICAgICAgICAgICAgICAgc3lzdGVtVHlwZSA9IFwiaVBob25lXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKHVzZXJBZ2VudC5pbmRleE9mKFwiQW5kcm9pZFwiKSAhPT0gLTEgfHwgdXNlckFnZW50LmluZGV4T2YoXCJhbmRyb2lkXCIpICE9PSAtMSl7XG4gICAgICAgICAgICAgICAgc3lzdGVtVHlwZSA9IFwiQW5kcm9pZFwiO1xuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vIOezu+e7n+eJiOacrFxuICAgICAgICAgICAgdmFyIHN5c3RlbVZlciA9IFwiXCI7XG4gICAgICAgICAgICBpZihzeXN0ZW1UeXBlID09PSBcImlQaG9uZVwiKXtcbiAgICAgICAgICAgICAgICB2YXIgc3lzdGVtUGF0dCA9IC9pUGhvbmUgT1MgKC4qPykgL2c7XG4gICAgICAgICAgICAgICAgc3lzdGVtVmVyID0gc3lzdGVtUGF0dC5leGVjKHVzZXJBZ2VudCk7XG4gICAgICAgICAgICAgICAgaWYoc3lzdGVtVmVyICYmIHN5c3RlbVZlci5sZW5ndGg+MSl7XG4gICAgICAgICAgICAgICAgICAgIHN5c3RlbVZlciA9IHN5c3RlbVZlclsxXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKHN5c3RlbVR5cGUgPT09IFwiQW5kcm9pZFwiKXtcbiAgICAgICAgICAgICAgICB2YXIgc3lzdGVtUGF0dCA9IC9BbmRyb2lkICguKj8pOy9nO1xuICAgICAgICAgICAgICAgIHN5c3RlbVZlciA9IHN5c3RlbVBhdHQuZXhlYyh1c2VyQWdlbnQpO1xuICAgICAgICAgICAgICAgIGlmKHN5c3RlbVZlciAmJiBzeXN0ZW1WZXIubGVuZ3RoPjEpe1xuICAgICAgICAgICAgICAgICAgICBzeXN0ZW1WZXIgPSBzeXN0ZW1WZXJbMV07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIC8vIOaJi+acuuWei+WPt1xuICAgICAgICAgICAgdmFyIHBob25lVHlwZSA9IFwiXCI7XG4gICAgICAgICAgICBpZihzeXN0ZW1UeXBlID09PSBcImlQaG9uZVwiKXtcbiAgICAgICAgICAgICAgICBwaG9uZVR5cGUgPSBzeXN0ZW1UeXBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihzeXN0ZW1UeXBlID09PSBcIkFuZHJvaWRcIil7XG4gICAgICAgICAgICAgICAgdmFyIHBob25lVHlwZVBhdHQgPSAvOyAoLio/KVxcKSBBcHBsZVdlYktpdC9nO1xuICAgICAgICAgICAgICAgIHBob25lVHlwZSA9IHBob25lVHlwZVBhdHQuZXhlYyh1c2VyQWdlbnQpO1xuICAgICAgICAgICAgICAgIGlmKHBob25lVHlwZSAmJiBwaG9uZVR5cGUubGVuZ3RoPjEpe1xuICAgICAgICAgICAgICAgICAgICBwaG9uZVR5cGUgPSBwaG9uZVR5cGVbMV07XG4gICAgICAgICAgICAgICAgICAgIHZhciBudW0gPSBwaG9uZVR5cGUuaW5kZXhPZihcIjtcIik7XG4gICAgICAgICAgICAgICAgICAgIGlmKG51bSAhPT0gLTEpe1xuICAgICAgICAgICAgICAgICAgICAgICAgcGhvbmVUeXBlID0gcGhvbmVUeXBlLnN1YnN0cmluZyhudW0rMilcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvLyDlvq7kv6HniYjmnKxcbiAgICAgICAgICAgIHZhciB3eFZlclBhdHQgPSAvTWljcm9NZXNzZW5nZXJcXC8oLio/KSAvZztcbiAgICAgICAgICAgIHZhciB3eFZlciA9IHd4VmVyUGF0dC5leGVjKHVzZXJBZ2VudCk7XG4gICAgICAgICAgICBpZih3eFZlciAmJiB3eFZlci5sZW5ndGg+MSl7XG4gICAgICAgICAgICAgICAgd3hWZXIgPSB3eFZlclsxXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgd3hWZXIgPSBcIlwiO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyDnvZHnu5znsbvlnotcbiAgICAgICAgICAgIHZhciBuZXR3b3JrVHlwZVBhdHQgPSAvTmV0VHlwZVxcLyguKj8pIC9nO1xuICAgICAgICAgICAgdmFyIG5ldHdvcmtUeXBlID0gbmV0d29ya1R5cGVQYXR0LmV4ZWModXNlckFnZW50KTtcbiAgICAgICAgICAgIGlmKG5ldHdvcmtUeXBlICYmIG5ldHdvcmtUeXBlLmxlbmd0aD4xKXtcbiAgICAgICAgICAgICAgICBuZXR3b3JrVHlwZSA9IG5ldHdvcmtUeXBlWzFdO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSBpZihuYXZpZ2F0b3IuY29ubmVjdGlvbiAmJiBuYXZpZ2F0b3IuY29ubmVjdGlvbi50eXBlKXtcbiAgICAgICAgICAgICAgICBuZXR3b3JrVHlwZSA9IG5hdmlnYXRvci5jb25uZWN0aW9uLnR5cGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgIG5ldHdvcmtUeXBlID0gXCJcIjtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xuICAgICAgICAgICAgICAgIC8vIOi1hOa6kOexu+Wei1xuICAgICAgICAgICAgICAgIHNyY190eXBlOnNyY1R5cGUsXG4gICAgICAgICAgICAgICAgLy8g6LWE5rqQ5Zyw5Z2AXG4gICAgICAgICAgICAgICAgc3JjX2hyZWY6c3JjSHJlZixcbiAgICAgICAgICAgICAgICAvLyDplJnor6/kuovku7ZcbiAgICAgICAgICAgICAgICBlcnJvcl9ldmVudDplcnJvckV2ZW50LFxuICAgICAgICAgICAgICAgIC8vIOmUmeivr+eggVxuICAgICAgICAgICAgICAgIGVycm9yX2NvZGU6ZXJyb3JDb2RlLFxuICAgICAgICAgICAgICAgIC8vIOmhtemdoumTvuaOpVxuICAgICAgICAgICAgICAgIHBhZ2VfaHJlZjpwYWdlVXJsLFxuICAgICAgICAgICAgICAgIC8vIOivt+axguWktOS/oeaBr1xuICAgICAgICAgICAgICAgIHVzZXJfYWdlbnQ6dXNlckFnZW50LFxuICAgICAgICAgICAgICAgIC8vIOaJi+acuuWei+WPt1xuICAgICAgICAgICAgICAgIHBob25lX3R5cGU6cGhvbmVUeXBlLFxuICAgICAgICAgICAgICAgIC8vIOezu+e7n+exu+Wei1xuICAgICAgICAgICAgICAgIHN5c3RlbV90eXBlOnN5c3RlbVR5cGUsXG4gICAgICAgICAgICAgICAgLy8g57O757uf54mI5pysXG4gICAgICAgICAgICAgICAgc3lzdGVtX3ZlcjpzeXN0ZW1WZXIsXG4gICAgICAgICAgICAgICAgLy8g5b6u5L+h54mI5pysXG4gICAgICAgICAgICAgICAgd3hfdmVyOnd4VmVyLFxuICAgICAgICAgICAgICAgIC8vIOe9kee7nOexu+Wei1xuICAgICAgICAgICAgICAgIG5ldHdvcmtfdHlwZTpuZXR3b3JrVHlwZVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8g6ZmQ5Yi25LiK5oql77yM5ZCM56eN5oOF5Ya15Y+q5LiK5oql5LiA5qyhXG4gICAgICAgICAgICB2YXIgcmVwb3J0VGFnID0gc3JjVHlwZStzcmNIcmVmK2Vycm9yRXZlbnQrZXJyb3JDb2RlO1xuICAgICAgICAgICAgaWYoJGVycm9yUmVwcm90LnJlcG9ydGVkQXJyLmluZGV4T2YocmVwb3J0VGFnKSA+IC0xKXtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuS4iuaKpei/h+ivpeexu+Wei+mUmeivr+S6hlwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkZXJyb3JSZXByb3QucmVwb3J0ZWRBcnIucHVzaChyZXBvcnRUYWcpO1xuICAgICAgICAgICAgTmV0V29yay5yZXF1ZXN0KFwiZXJyb3JfcmVwb3J0XCIsIHBhcmFtcywgZnVuY3Rpb24gKGRhdGEpIHt9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiZXJyb3JfcmVwb3J0XCIpXG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgICAgIH1cbiAgICB9XG59O1xuXG4vKipcbiAqIOmfs+mikeaWreeCuee7reWQrO+8iOmmlumhtS/kuJPmoI/pobUv6Z+z6aKR6K+m5oOF6aG1KVxuICogQHBhcmFtIGF1ZGlvSWRcbiAqIEBwYXJhbSBhdWRpb0RvbVxuICovXG4kYXVkaW9Db250aW51ZSA9IHtcbiAgICAvLyDlt7Lmlq3ngrnnu63lkKznmoTpn7PpopFcbiAgICByZWFkZWRBcnI6W10sXG4gICAgcmVhZFRpbWU6ZnVuY3Rpb24gKGF1ZGlvSWQsYXVkaW9Eb20pIHtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGlmKGxvY2FsU3RvcmFnZSAmJiAkYXVkaW9Db250aW51ZS5yZWFkZWRBcnIuaW5kZXhPZihhdWRpb0lkKSA9PSAtMSl7XG4gICAgICAgICAgICAgICAgdmFyIGF1ZGlvVGltZSA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiYXVkaW9UaW1lXCIpO1xuICAgICAgICAgICAgICAgIGlmKGF1ZGlvVGltZSl7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvVGltZSA9IEpTT04ucGFyc2UoYXVkaW9UaW1lKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5vd1RpbWUgPSBhdWRpb1RpbWVbYXVkaW9JZF07XG4gICAgICAgICAgICAgICAgICAgIGlmKG5vd1RpbWUgJiYgYXVkaW9Eb20uY3VycmVudFRpbWU8IDMpe1xuICAgICAgICAgICAgICAgICAgICAgICAgbm93VGltZSA9IG5vd1RpbWUtMztcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKG5vd1RpbWUgPjApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvRG9tLmN1cnJlbnRUaW1lID1ub3dUaW1lO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdWRpb0RvbS5jdXJyZW50VGltZSA9MC4wMTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICRhdWRpb0NvbnRpbnVlLnJlYWRlZEFyci5wdXNoKGF1ZGlvSWQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJGF1ZGlvQ29udGludWUucmVhZGVkQXJyKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjYXRjaCAoZXJyKXtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIHNhdmVUaW1lOmZ1bmN0aW9uIChhdWRpb0lkLGF1ZGlvRG9tKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBpZihsb2NhbFN0b3JhZ2Upe1xuICAgICAgICAgICAgICAgIHZhciBhdWRpb1RpbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImF1ZGlvVGltZVwiKTtcbiAgICAgICAgICAgICAgICBpZihhdWRpb1RpbWUpe1xuICAgICAgICAgICAgICAgICAgICBhdWRpb1RpbWUgPSBKU09OLnBhcnNlKGF1ZGlvVGltZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvVGltZSA9IHt9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB2YXIgY3VycmVudFRpbWUgPSBhdWRpb0RvbS5jdXJyZW50VGltZTtcbiAgICAgICAgICAgICAgICB2YXIgZHVyYXRpb24gPSBhdWRpb0RvbS5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICBpZihhdWRpb1RpbWVbYXVkaW9JZF0gIT09IGN1cnJlbnRUaW1lICYmIGN1cnJlbnRUaW1lPjMpe1xuICAgICAgICAgICAgICAgICAgICBpZihkdXJhdGlvbiAtIGN1cnJlbnRUaW1lPD0zKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvVGltZVthdWRpb0lkXSA9IDA7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF1ZGlvVGltZVthdWRpb0lkXSA9IGN1cnJlbnRUaW1lO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGF1ZGlvVGltZSA9IEpTT04uc3RyaW5naWZ5KGF1ZGlvVGltZSk7XG4gICAgICAgICAgICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiYXVkaW9UaW1lXCIsYXVkaW9UaW1lKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycil7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xuICAgICAgICB9XG4gICAgfVxufTtcblxuLyoqXG4gKiDpn7PpopHliJfooajmkq3mlL7vvIjpppbpobUv5LiT5qCP6aG1KVxuICovXG4kYXVkaW9MaXN0UGxheSA9IHtcbiAgICAvLyDmraPlnKjmkq3mlL7nmoRhdWRpb1xuICAgICRwbGF5aW5nQXVkaW86bnVsbCxcbiAgICAkcGxheWluZ0F1ZGlvSW5kZXg6MCxcbiAgICAkcGxheWluZ0F1ZGlvSWQ6bnVsbCxcbiAgICAkcGxheWluZ0F1ZGlvTTN1ODpudWxsLFxuICAgICRhdWRpb1R5cGU6bnVsbCxcbiAgICAkcGxheU51bTpbXSxcbiAgICBpbml0OmZ1bmN0aW9uICgpIHtcbiAgICAgICAgJGF1ZGlvTGlzdFBsYXkuY2xpY2tQbGF5QnV0dG9uKCk7XG4gICAgICAgICRhdWRpb0xpc3RQbGF5LnVwZGF0ZVBsYXlJbmZvKCk7XG4gICAgICAgICRhdWRpb0xpc3RQbGF5LnBsYXlOZXh0QXV0bygpO1xuICAgIH0sXG4gICAgY2xpY2tQbGF5QnV0dG9uOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8g5LqL5Lu25Luj55CGXG4gICAgICAgICQoXCIuY29udGVudC1saXN0XCIpLm9uKFwiY2xpY2tcIixcIi5hdWRpb1BsYXlCdXR0b25cIixmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyDmkq3mlL7ngrnlh7vljLrln59cbiAgICAgICAgICAgIHZhciBhdWRpb1BsYXlCdXR0b24gPSQodGhpcyk7XG4gICAgICAgICAgICBpZihhdWRpb1BsYXlCdXR0b24pe1xuICAgICAgICAgICAgICAgIC8vIOS4umF1ZGlv6LWLc3JjXG4gICAgICAgICAgICAgICAgdmFyIGF1ZGlvRG9tID0gJGF1ZGlvTGlzdFBsYXkuZ2V0QXVkaW9TcmMoYXVkaW9QbGF5QnV0dG9uKTtcbiAgICAgICAgICAgICAgICAvLyDmkq3mlL7mmoLlgZzpn7PpopFcbiAgICAgICAgICAgICAgICBpZihhdWRpb1BsYXlCdXR0b24uaGFzQ2xhc3MoXCJhdWRpb1N0b3BTdGF0dXNcIikpe1xuICAgICAgICAgICAgICAgICAgICAkYXVkaW9MaXN0UGxheS5wbGF5QXVkaW8oYXVkaW9QbGF5QnV0dG9uLGF1ZGlvRG9tKTtcbiAgICAgICAgICAgICAgICAgICAgLy8gJGF1ZGlvUmVjb3Zlci5yZWNvdmVyU3RhdHVzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZihhdWRpb1BsYXlCdXR0b24uaGFzQ2xhc3MoXCJhdWRpb1BsYXlTdGF0dXNcIikpe1xuICAgICAgICAgICAgICAgICAgICAkYXVkaW9MaXN0UGxheS5wYXVzZUF1ZGlvKGF1ZGlvUGxheUJ1dHRvbixhdWRpb0RvbSk7XG4gICAgICAgICAgICAgICAgICAgIC8vICRhdWRpb1JlY292ZXIucmVjb3ZlclN0YXR1cyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9LFxuICAgIC8vIOabtOaWsOaSreaUvui/m+W6plxuICAgIHVwZGF0ZVBsYXlJbmZvOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYoJGF1ZGlvTGlzdFBsYXkuJHBsYXlpbmdBdWRpbyAmJiAhJGF1ZGlvTGlzdFBsYXkuJHBsYXlpbmdBdWRpb1swXS5wYXVzZWQpe1xuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50VGltZSA9ICRhdWRpb0xpc3RQbGF5LiRwbGF5aW5nQXVkaW9bMF0uY3VycmVudFRpbWU7XG4gICAgICAgICAgICAgICAgdmFyIGR1cmF0aW9uID0gJGF1ZGlvTGlzdFBsYXkuJHBsYXlpbmdBdWRpb1swXS5kdXJhdGlvbjtcbiAgICAgICAgICAgICAgICB2YXIgcGVyY2VudCA9IHBhcnNlSW50KChjdXJyZW50VGltZSAvZHVyYXRpb24pKjEwMCk7XG4gICAgICAgICAgICAgICAgaWYoIWlzTmFOKHBlcmNlbnQpICYmIHBlcmNlbnQgPjAgJiYgcGVyY2VudCA8PTEwMCl7XG4gICAgICAgICAgICAgICAgICAgICQoXCIuYXVkaW9QbGF5UGVyY2VudFwiKS5lcSgkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSW5kZXgpLmh0bWwocGVyY2VudClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZSBpZighaXNOYU4ocGVyY2VudCkgICYmIHBlcmNlbnQgPj0xMDApe1xuICAgICAgICAgICAgICAgICAgICAkKFwiLmF1ZGlvUGxheVBlcmNlbnRcIikuZXEoJGF1ZGlvTGlzdFBsYXkuJHBsYXlpbmdBdWRpb0luZGV4KS5odG1sKDEwMClcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8g5L+d5a2Y5pKt5pS+6L+b5bqmXG4gICAgICAgICAgICAgICAgdmFyIGF1ZGlvSWQgPSAkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSWQ7XG4gICAgICAgICAgICAgICAgJGF1ZGlvQ29udGludWUuc2F2ZVRpbWUoYXVkaW9JZCwkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvWzBdKTtcblxuICAgICAgICAgICAgICAgIGlmKGR1cmF0aW9uIC0gY3VycmVudFRpbWUgPD0zMCl7XG4gICAgICAgICAgICAgICAgICAgIGlmKCRhdWRpb0xpc3RQbGF5LiRhdWRpb1R5cGUpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJGF1ZGlvQWN0aW9uQW5hbHlzZS4kdHlwZSA9IDE7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhdWRpb0FjdGlvbkFuYWx5c2UuJHR5cGUgPSAwO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICRhdWRpb0FjdGlvbkFuYWx5c2UuJGF1ZGlvSWQgPSBhdWRpb0lkO1xuICAgICAgICAgICAgICAgICAgICAkYXVkaW9BY3Rpb25BbmFseXNlLmZpbmlzaENvdW50KCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYoY3VycmVudFRpbWU+MC4wMDAxKXtcbiAgICAgICAgICAgICAgICAgICAgJGF1ZGlvQ29udGludWUucmVhZFRpbWUoYXVkaW9JZCwkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvWzBdKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICB9LDUwMClcbiAgICB9LFxuICAgIC8vIOS4umF1ZGlv6LWLc3JjXG4gICAgZ2V0QXVkaW9TcmM6ZnVuY3Rpb24gKGF1ZGlvUGxheUJ1dHRvbikge1xuICAgICAgICAvLyDmkq3mlL5hdWRpb1xuICAgICAgICB2YXIgYXVkaW9Eb20gPSBhdWRpb1BsYXlCdXR0b24uY2hpbGRyZW4oXCJhdWRpb1wiKS5lcSgwKTtcblxuICAgICAgICAvLyDlkITnp43moLzlvI9cbiAgICAgICAgdmFyIG0zdTggPSBhdWRpb1BsYXlCdXR0b24uZGF0YShcIm0zdThcIik7XG4gICAgICAgIHZhciBtcDNjb21wcmVzcyA9IGF1ZGlvUGxheUJ1dHRvbi5kYXRhKFwibXAzY29tcHJlc3NcIik7XG4gICAgICAgIHZhciBtcDMgPSBhdWRpb1VybCA9IGF1ZGlvUGxheUJ1dHRvbi5kYXRhKFwibXAzXCIpO1xuXG4gICAgICAgIC8vIOaSreaUvnVybFxuICAgICAgICBpZighYXVkaW9Eb20uYXR0cihcInNyY1wiKSl7XG4gICAgICAgICAgICB2YXIgYXVkaW9VcmwgPSBcIlwiO1xuXG4gICAgICAgICAgICBpZihtcDNjb21wcmVzcyl7XG4gICAgICAgICAgICAgICAgYXVkaW9VcmwgPSBtcDNjb21wcmVzcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYobTN1OCl7XG4gICAgICAgICAgICAgICAgYXVkaW9VcmwgPSBtM3U4XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmKG1wMyl7XG4gICAgICAgICAgICAgICAgYXVkaW9VcmwgPSBtcDM7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgYXVkaW9Eb20uYXR0cihcInNyY1wiLGF1ZGlvVXJsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXVkaW9Eb207XG4gICAgfSxcbiAgICAvLyDlvIDlp4vmkq3mlL5cbiAgICBwbGF5QXVkaW86ZnVuY3Rpb24gKGF1ZGlvUGxheUJ1dHRvbixhdWRpb0RvbSkge1xuICAgICAgICBpZigkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvKXtcbiAgICAgICAgICAgICRhdWRpb0xpc3RQbGF5LiRwbGF5aW5nQXVkaW9bMF0ucGF1c2UoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBhdWRpb0RvbVswXS5sb2FkKCk7XG4gICAgICAgIGF1ZGlvRG9tWzBdLnBsYXkoKTtcblxuICAgICAgICAvLyDosIPnlKjlvq7kv6HmjqXlj6PvvIzop6PlhrPkuI3og73oh6rliqjmkq3mlL7nmoTpl67pophcbiAgICAgICAgdHJ5e1xuICAgICAgICAgICAgd3guZ2V0TmV0d29ya1R5cGUoe1xuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gYXVkaW9Eb21bMF0ubG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICBhdWRpb0RvbVswXS5wbGF5KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2goZXJyKXtcblxuICAgICAgICB9XG4gICAgICAgIGNvbnNvbGUubG9nKFwicGxheVwiKVxuXG4gICAgICAgICRhdWRpb0xpc3RQbGF5LiRwbGF5aW5nQXVkaW9JbmRleCA9ICQoXCIuYXVkaW9Eb21cIikuaW5kZXgoYXVkaW9Eb20pO1xuICAgICAgICAkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvID0gYXVkaW9Eb207XG4gICAgICAgICRhdWRpb0xpc3RQbGF5LiRwbGF5aW5nQXVkaW9JZCA9ICQoXCIuYXVkaW9QbGF5QnV0dG9uXCIpLmVxKCRhdWRpb0xpc3RQbGF5LiRwbGF5aW5nQXVkaW9JbmRleCkuZGF0YShcImlkXCIpO1xuICAgICAgICAkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvTTN1OCA9ICQoXCIuYXVkaW9QbGF5QnV0dG9uXCIpLmVxKCRhdWRpb0xpc3RQbGF5LiRwbGF5aW5nQXVkaW9JbmRleCkuZGF0YShcIm0zdThcIik7XG4gICAgICAgICRhdWRpb0xpc3RQbGF5LiRhdWRpb1R5cGUgPSAkKFwiLmF1ZGlvUGxheUJ1dHRvblwiKS5lcSgkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSW5kZXgpLmRhdGEoXCJ0cnlcIik7XG5cbiAgICAgICAgJGF1ZGlvTGlzdFBsYXkuJHBsYXlpbmdBdWRpby5vbihcImNhbnBsYXlcIixmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkYXVkaW9Db250aW51ZS5yZWFkVGltZSgkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSWQsJGF1ZGlvTGlzdFBsYXkuJHBsYXlpbmdBdWRpb1swXSk7XG4gICAgICAgICAgICAkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvLm9mZihcImNhbnBsYXlcIik7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgJChcIi5hdWRpb1BsYXlQZXJjZW50V3JhcHBlclwiKS5lcSgkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSW5kZXgpLnNob3coKTtcbiAgICAgICAgJChcIi5hdWRpb1BsYXlCdXR0b25cIikucmVtb3ZlQ2xhc3MoXCJhdWRpb1BsYXlTdGF0dXNcIikuYWRkQ2xhc3MoXCJhdWRpb1N0b3BTdGF0dXNcIik7XG4gICAgICAgICQoXCIuYXVkaW9UaXRsZVwiKS5yZW1vdmVDbGFzcyhcImM3XCIpLmFkZENsYXNzKFwiYzJcIik7XG4gICAgICAgICQoXCIuYXVkaW9UaXRsZVwiKS5lcSgkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSW5kZXgpLnJlbW92ZUNsYXNzKFwiYzJcIikuYWRkQ2xhc3MoXCJjN1wiKTtcbiAgICAgICAgYXVkaW9QbGF5QnV0dG9uLnJlbW92ZUNsYXNzKFwiYXVkaW9TdG9wU3RhdHVzXCIpLmFkZENsYXNzKFwiYXVkaW9QbGF5U3RhdHVzXCIpO1xuXG4gICAgICAgIC8vIOe7n+iuoeS4iuaKpe+8jOS4jemHjeWkjeWfuuaVsFxuICAgICAgICBpZiAoJGF1ZGlvTGlzdFBsYXkuJHBsYXlOdW0uaW5kZXhPZigkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSW5kZXgpID09PSAtMSkge1xuICAgICAgICAgICAgJGF1ZGlvTGlzdFBsYXkuJHBsYXlOdW0ucHVzaCgkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSW5kZXgpO1xuXG4gICAgICAgICAgICBOZXRXb3JrLnJlcXVlc3QoXCJhZGRBdWRpb1ZpZXdDb3VudC9cIiArIGF1ZGlvUGxheUJ1dHRvbi5kYXRhKFwiaWRcIiksIHt9LCBmdW5jdGlvbiAoZGF0YSkge30pO1xuXG4gICAgICAgICAgICBpZigkYXVkaW9MaXN0UGxheS4kYXVkaW9UeXBlKXtcbiAgICAgICAgICAgICAgICAkYXVkaW9BY3Rpb25BbmFseXNlLiR0eXBlID0gMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgJGF1ZGlvQWN0aW9uQW5hbHlzZS4kdHlwZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkYXVkaW9BY3Rpb25BbmFseXNlLiRhdWRpb0lkID0gJGF1ZGlvTGlzdFBsYXkuJHBsYXlpbmdBdWRpb0lkO1xuICAgICAgICAgICAgJGF1ZGlvQWN0aW9uQW5hbHlzZS5wbGF5Q291bnQoKTtcblxuICAgICAgICAgICAgdmFyIHZpZXdDb3VudCA9ICQoXCIuYXVkaW9WaWV3Q291bnRcIikuZXEoJGF1ZGlvTGlzdFBsYXkuJHBsYXlpbmdBdWRpb0luZGV4KS5odG1sKCk7XG4gICAgICAgICAgICBpZih2aWV3Q291bnQgJiYgdmlld0NvdW50LmluZGV4T2YoXCJXXCIpID09PSAtMSl7XG4gICAgICAgICAgICAgICAgdmlld0NvdW50ID0gcGFyc2VJbnQodmlld0NvdW50KSArMTtcbiAgICAgICAgICAgICAgICAkKFwiLmF1ZGlvVmlld0NvdW50XCIpLmVxKCRhdWRpb0xpc3RQbGF5LiRwbGF5aW5nQXVkaW9JbmRleCkuaHRtbCh2aWV3Q291bnQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfSxcbiAgICAvLyDmmoLlgZzmkq3mlL5cbiAgICBwYXVzZUF1ZGlvOmZ1bmN0aW9uIChhdWRpb1BsYXlCdXR0b24sYXVkaW9Eb20pIHtcbiAgICAgICAgYXVkaW9Eb21bMF0ucGF1c2UoKTtcbiAgICAgICAgYXVkaW9QbGF5QnV0dG9uLnJlbW92ZUNsYXNzKFwiYXVkaW9QbGF5U3RhdHVzXCIpLmFkZENsYXNzKFwiYXVkaW9TdG9wU3RhdHVzXCIpO1xuICAgICAgICAkKFwiLmF1ZGlvVGl0bGVcIikucmVtb3ZlQ2xhc3MoXCJjN1wiKS5hZGRDbGFzcyhcImMyXCIpO1xuICAgIH0sXG4gICAgLy8g5qC55o2u57Si5byV5pKt5pS+YXVkaW9cbiAgICBwbGF5QnlJbmRleDpmdW5jdGlvbiAoaW5kZXgpIHtcbiAgICAgICAgdmFyIGF1ZGlvUGxheUJ1dHRvbkFyciA9ICQoXCIuYXVkaW9QbGF5QnV0dG9uXCIpO1xuICAgICAgICB2YXIgYXVkaW9QbGF5QnV0dG9uID0gbnVsbDtcbiAgICAgICAgdmFyIGF1ZGlvRG9tID1udWxsO1xuICAgICAgICBpZihpbmRleCA8IGF1ZGlvUGxheUJ1dHRvbkFyci5sZW5ndGgpe1xuICAgICAgICAgICAgLy8g5pKt5pS+54K55Ye75Yy65Z+fXG4gICAgICAgICAgICBhdWRpb1BsYXlCdXR0b249IGF1ZGlvUGxheUJ1dHRvbkFyci5lcShpbmRleCk7XG4gICAgICAgICAgICAvLyDmkq3mlL5hdWRpb1xuICAgICAgICAgICAgYXVkaW9Eb20gPSAkYXVkaW9MaXN0UGxheS5nZXRBdWRpb1NyYyhhdWRpb1BsYXlCdXR0b24pO1xuICAgICAgICAgICAgJGF1ZGlvTGlzdFBsYXkucGxheUF1ZGlvKGF1ZGlvUGxheUJ1dHRvbixhdWRpb0RvbSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g5pKt5a6M5pyA5ZCO5LiA5Liq5pqC5YGcXG4gICAgICAgIGVsc2UgaWYoaW5kZXgtMSA8IGF1ZGlvUGxheUJ1dHRvbkFyci5sZW5ndGgpe1xuICAgICAgICAgICAgLy8g5pKt5pS+54K55Ye75Yy65Z+fXG4gICAgICAgICAgICBhdWRpb1BsYXlCdXR0b249IGF1ZGlvUGxheUJ1dHRvbkFyci5lcShpbmRleC0xKTtcbiAgICAgICAgICAgIC8vIOaSreaUvmF1ZGlvXG4gICAgICAgICAgICBhdWRpb0RvbSA9ICRhdWRpb0xpc3RQbGF5LmdldEF1ZGlvU3JjKGF1ZGlvUGxheUJ1dHRvbik7XG4gICAgICAgICAgICAkYXVkaW9MaXN0UGxheS5wYXVzZUF1ZGlvKGF1ZGlvUGxheUJ1dHRvbixhdWRpb0RvbSk7XG4gICAgICAgIH1cbiAgICB9LFxuICAgIC8vIOiHquWKqOaSreaUvuS4i+S4gOmmlumAu+i+kVxuICAgIHBsYXlOZXh0QXV0bzpmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIuYXVkaW9Eb21cIikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLm9mZihcImVuZGVkXCIpLm9uKFwiZW5kZWRcIixmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgJGF1ZGlvQWN0aW9uQW5hbHlzZS4kdHlwZSA9IDA7XG4gICAgICAgICAgICAgICAgJGF1ZGlvQWN0aW9uQW5hbHlzZS4kYXVkaW9JZCA9ICQoXCIuYXVkaW9QbGF5QnV0dG9uXCIpLmVxKCRhdWRpb0xpc3RQbGF5LiRwbGF5aW5nQXVkaW9JbmRleCkuZGF0YShcImlkXCIpO1xuICAgICAgICAgICAgICAgICQoXCIuYXVkaW9QbGF5UGVyY2VudFwiKS5lcSgkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSW5kZXgpLmh0bWwoMTAwKTtcbiAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkYXVkaW9MaXN0UGxheS4kcGxheWluZ0F1ZGlvSW5kZXggKyAxO1xuICAgICAgICAgICAgICAgICRhdWRpb0xpc3RQbGF5LnBsYXlCeUluZGV4KGluZGV4KTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgIH0pXG4gICAgfVxufTtcblxuLyoqXG4gKiDpn7PpopHooYzkuLrkuIrmiqXvvIjpppbpobUv5LiT5qCP6aG1L+mfs+mikeivpuaDhemhtSlcbiAqL1xuJGF1ZGlvQWN0aW9uQW5hbHlzZSA9IHtcbiAgICAkdHlwZTpcIlwiLFxuICAgICRhdWRpb0lkOlwiXCIsXG4gICAgJHJlcG9ydGVkOltdLFxuICAgIHBsYXlDb3VudDpmdW5jdGlvbiAoKSB7XG4gICAgICAgICRhdWRpb0FjdGlvbkFuYWx5c2UucmVwb3J0VG9TZXJ2ZXIoXCJwbGF5X2NvdW50XCIpXG4gICAgfSxcbiAgICBmaW5pc2hDb3VudDpmdW5jdGlvbiAoKSB7XG4gICAgICAgICRhdWRpb0FjdGlvbkFuYWx5c2UucmVwb3J0VG9TZXJ2ZXIoXCJmaW5pc2hfY291bnRcIilcbiAgICB9LFxuICAgIHJlcG9ydFRvU2VydmVyOmZ1bmN0aW9uIChhY3Rpb24pIHtcbiAgICAgICAgdmFyIGJ1ekRhdGEgPSB7XG4gICAgICAgICAgICBcInR5cGVcIjokYXVkaW9BY3Rpb25BbmFseXNlLiR0eXBlLFxuICAgICAgICAgICAgXCJhdWRpb19pZFwiOiRhdWRpb0FjdGlvbkFuYWx5c2UuJGF1ZGlvSWQsXG4gICAgICAgICAgICBcImFjdGlvblwiOmFjdGlvblxuICAgICAgICB9O1xuICAgICAgICB2YXIgcmVwb3J0VGFnID0gSlNPTi5zdHJpbmdpZnkoYnV6RGF0YSk7XG4gICAgICAgIGlmKCRhdWRpb0FjdGlvbkFuYWx5c2UuJHJlcG9ydGVkLmluZGV4T2YocmVwb3J0VGFnKSA9PT0gLTEpe1xuICAgICAgICAgICAgJGF1ZGlvQWN0aW9uQW5hbHlzZS4kcmVwb3J0ZWQucHVzaChyZXBvcnRUYWcpO1xuICAgICAgICAgICAgTmV0V29yay5yZXF1ZXN0KFwiYXVkaW9fYWN0aW9uX2FuYWx5c2VcIiwgYnV6RGF0YSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coYWN0aW9uKTtcblxuICAgICAgICB9XG4gICAgfVxufTtcblxuXG4vKipcbiAqIOS5sOi1oOWKn+iDve+8iOS4k+agj+mhte+8jOWQhOivpuaDhemhte+8iVxuICovXG4kZ2lmdEJ1eSA9IHtcbiAgICBtaW5MaW1pdDogMSxcbiAgICBtYXhMaW1pdCA6IDEwMCxcbiAgICBidXlDb3VudDogcGFyc2VJbnQoJChcIiNzZWxlY3Rvcl9zaG93XCIpLnZhbCgpKSxcbiAgICBidXlpbmc6ZmFsc2UsXG4gICAgcGllY2VfcHJpY2U6cGFyc2VGbG9hdCgkKFwiI3BheVByaWNlXCIpLnZhbCgpKSxcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoXCIuZ2lmdEJ1eUJ1dHRvblwiKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykub24oXCJjbGlja1wiLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLnBheU1hbnlQYXJ0XCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAkKCdib2R5Jykub24oJ3RvdWNobW92ZScsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoXCIjY2xvc2VQYXlNYW55XCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLnBheU1hbnlQYXJ0XCIpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJ2JvZHknKS5vZmYoJ3RvdWNobW92ZScpO1xuICAgICAgICB9KTtcblxuICAgICAgICAkZ2lmdEJ1eS5idXlDYXJkQWN0aW9uKCk7XG4gICAgfSxcbiAgICAvLyDngrnlh7vnq4vljbPotK3kubDnmoTnlKjmiLfooYzkuLpcbiAgICBidXlDYXJkQWN0aW9uOmZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy/mlbDph4/lh4/lsJHmjInpkq7ngrnlh7vvvIjpmZDliLbmnIDkvY4z77yJXG4gICAgICAgICQoJyNyZWR1Y2VfY291bnQnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICRnaWZ0QnV5LmJ1eUNvdW50ID0gJGdpZnRCdXkuYnV5Q291bnQgLSAxO1xuICAgICAgICAgICAgaWYgKCRnaWZ0QnV5LmJ1eUNvdW50IDwgJGdpZnRCdXkubWluTGltaXQpIHtcbiAgICAgICAgICAgICAgICAkZ2lmdEJ1eS5idXlDb3VudCA9ICRnaWZ0QnV5Lm1pbkxpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGdpZnRCdXkudXBkYXRlUHJpY2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v5pWw6YeP5aKe5Yqg5oyJ6ZKu54K55Ye7XG4gICAgICAgICQoJyNhZGRfY291bnQnKS5jbGljayhmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgICRnaWZ0QnV5LmJ1eUNvdW50ID0gJGdpZnRCdXkuYnV5Q291bnQgKyAxO1xuICAgICAgICAgICAgaWYgKCRnaWZ0QnV5LmJ1eUNvdW50ID4gJGdpZnRCdXkubWF4TGltaXQpIHtcbiAgICAgICAgICAgICAgICAkZ2lmdEJ1eS5idXlDb3VudCA9ICRnaWZ0QnV5Lm1heExpbWl0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGdpZnRCdXkudXBkYXRlUHJpY2UoKTtcbiAgICAgICAgfSk7XG4gICAgICAgIC8v5omL5Yqo5L+u5pS55pWw6YePXG4gICAgICAgICQoJyNzZWxlY3Rvcl9zaG93JykuY2hhbmdlKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjb3VudCA9IHBhcnNlSW50KCQodGhpcykudmFsKCkpO1xuICAgICAgICAgICAgaWYoIWlzTmFOKGNvdW50KSl7XG4gICAgICAgICAgICAgICAgJGdpZnRCdXkuYnV5Q291bnQgPSBjb3VudDtcbiAgICAgICAgICAgICAgICBpZiAoJGdpZnRCdXkuYnV5Q291bnQgPCAkZ2lmdEJ1eS5taW5MaW1pdCkge1xuICAgICAgICAgICAgICAgICAgICAkZ2lmdEJ1eS5idXlDb3VudCA9ICRnaWZ0QnV5Lm1pbkxpbWl0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIGlmICgkZ2lmdEJ1eS5idXlDb3VudCA+ICRnaWZ0QnV5Lm1heExpbWl0KSB7XG4gICAgICAgICAgICAgICAgICAgICRnaWZ0QnV5LmJ1eUNvdW50ID0gJGdpZnRCdXkubWF4TGltaXQ7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICRnaWZ0QnV5LnVwZGF0ZVByaWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICRnaWZ0QnV5LnVwZGF0ZVByaWNlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy/noa7orqTmlK/ku5hcbiAgICAgICAgJCgnI2dpZnRCdXlCdXR0b24nKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAoJGdpZnRCdXkuYnV5aW5nKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGdpZnRCdXkuYnV5aW5nID0gdHJ1ZTtcbiAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgY291bnQ6ICRnaWZ0QnV5LmJ1eUNvdW50LFxuICAgICAgICAgICAgICAgIGJ1eV9naWZ0OjFcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIE5ldFdvcmsucmVxdWVzdCgncGF5L2dldF9pbmZvJywgcGFyYW1zLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIHZhciAkY29uZiA9ICQucGFyc2VKU09OKGRhdGEpO1xuXG4gICAgICAgICAgICAgICAgLy8g5L+d5a2Y6aKE5pSv5LuY6K6i5Y2V5Y+3XG4gICAgICAgICAgICAgICAgaWYoJGNvbmYgJiYgJGNvbmYucGFja2FnZSl7XG4gICAgICAgICAgICAgICAgICAgIHZhciBwcmVwYXlJZCA9ICgkY29uZi5wYWNrYWdlLnNwbGl0KCc9JykpWzFdO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YoV2VpeGluSlNCcmlkZ2UpID09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkZ2lmdEJ1eS5idXlpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmKFdlaXhpbkpTQnJpZGdlKXtcbiAgICAgICAgICAgICAgICAgICAgICAgIFdlaXhpbkpTQnJpZGdlLmludm9rZShcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZ2V0QnJhbmRXQ1BheVJlcXVlc3QnLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiYXBwSWRcIjogJGNvbmYuYXBwSWQsICAgICAvL+WFrOS8l+WPt+WQjeensO+8jOeUseWVhuaIt+S8oOWFpVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInRpbWVTdGFtcFwiOiAkY29uZi50aW1lU3RhbXAsICAgICAgICAgLy/ml7bpl7TmiLPvvIzoh6oxOTcw5bm05Lul5p2l55qE56eS5pWwXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwibm9uY2VTdHJcIjogJGNvbmYubm9uY2VTdHIsIC8v6ZqP5py65LiyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGFja2FnZVwiOiAkY29uZi5wYWNrYWdlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcInNpZ25UeXBlXCI6ICRjb25mLnNpZ25UeXBlLCAgICAgICAgIC8v5b6u5L+h562+5ZCN5pa55byP77yaXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwicGF5U2lnblwiOiAkY29uZi5wYXlTaWduIC8v5b6u5L+h562+5ZCNXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAocmVzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOajgOafpemUmeivr+eggVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzLmVycl9jb2RlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZ2lmdEJ1eS5idXlpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWJjeerr+Wksei0pVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlcy5lcnJfY29kZSA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/lj5Z1cmznsbvlnosoLTHku6PooajmlrDnmoR1cmwpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHVybFR5cGUgPSB3aW5kb3cubG9jYXRpb24uaG9zdG5hbWUuaW5kZXhPZihcIi5oNS5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g6Leo5Y+35pSv5LuYXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHVybFR5cGUgPT09IC0xKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8v5pawdXJs77yM5YqgYXBwaWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdpZnRCdXkuc2NhblVybCA9ICcvJyArIHdpbmRvdy5BUFBJRCArICcvcGF5L3NjYW5faW1hZ2UvJyArIHByZXBheUlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/ml6d1cmzvvIzkuI3nlKjliqBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdpZnRCdXkuc2NhblVybCA9ICcvcGF5L3NjYW5faW1hZ2UvJyArIHByZXBheUlkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOi3qOWPt+aUr+S7mFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNjYW5fd2luZG93X2ltYWdlJykuYXR0cignc3JjJywgJGdpZnRCdXkuc2NhblVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNjYW5fbGF5ZXInKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKCcubmF2aWdhdGlvbl9tZW51JykuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQocmVzLmVycl9jb2RlICsgXCIgXCIgKyByZXMuZXJyX21zZyk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmVycl9tc2cgPT0gJ2dldF9icmFuZF93Y3BheV9yZXF1ZXN0Om9rJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8g5pSv5LuY5oiQ5Yqf5Yi35paw5LiA5LiLXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgZGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlSnVtcCgnL2dpZnRfbGlzdD8nICsgZGF0ZS5nZXRUaW1lKCksdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocmVzLmVycl9tc2cgPT0gJ2dldF9icmFuZF93Y3BheV9yZXF1ZXN0OmNhbmNlbCcpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWJjeerr+WPlua2iFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGdpZnRCdXkuYnV5aW5nID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZ2lmdEJ1eS5idXlpbmcgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB9KTtcbiAgICB9LFxuICAgIC8vIOabtOaWsOS7t+agvFxuICAgIHVwZGF0ZVByaWNlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICQoJyNzZWxlY3Rvcl9zaG93JykudmFsKCRnaWZ0QnV5LmJ1eUNvdW50KTtcbiAgICAgICAgJCgnI3RvdGFsX3ByaWNlJykuaHRtbChcIu+/pVwiICsgKCRnaWZ0QnV5LmJ1eUNvdW50ICogJGdpZnRCdXkucGllY2VfcHJpY2UpLnRvRml4ZWQoMikpO1xuICAgIH1cbn07XG5cblxuJChmdW5jdGlvbiAoKSB7XG4gICAgLy8g5r+A5rS7YWN0aXZl5Lyq57G75qC35byPXG4gICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgZnVuY3Rpb24gKCkge30pO1xufSk7XG4iXX0=
