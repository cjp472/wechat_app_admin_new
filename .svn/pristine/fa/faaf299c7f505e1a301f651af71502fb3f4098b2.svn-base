$(function(){var e=new Business});function Business(){this.data={};this.spec=$("#specialTicket");this.valueAdded=false;this.inputError=false;this.init()}Business.prototype={init:function(){this.addEvent()},addEvent:function(){var e=this;$("#makeInvoice").click(this.submit.bind(this));$("#radioBox").on("change",":radio",function(t){var i=$(t.target),n=i.val();if(n==2){e.spec.show();e.valueAdded=true}else{e.spec.hide();e.valueAdded=false}})},submit:function(){var e=this.getVal(),t=this;if(t.inputError){return false}$.ajax("/create_invoice",{type:"POST",data:t.data,dataType:"json"}).done(function(e){if(e.code==1){utils.show.blueTip("提交成功，等待审核",function(){window.location.href="/invoice_info"})}else{utils.show.redTip(e.msg)}}).fail(function(e){console.error(e);utils.show.redTip("服务器开小差了，请稍后再试！")})},getVal:function(){var e=this,t=0;$("#formInfo .inputDefault").each(function(t,i){var n=$(i),o=n.attr("name"),a=n.data("value"),r=n.data("text"),d=$.trim(n.val());if(!e.valueAdded){if(a!="add"&&(r!=""&&d=="")){utils.show.redTip(r+"不能为空！");e.inputError=true;return false}else if(a!="add"){e.inputError=false;e.data[o]=d}}else{if(r!=""&&d==""){utils.show.redTip(r+"不能为空！");e.inputError=true;return false}else{e.inputError=false;e.data[o]=d}}});$(":checkbox").each(function(i,n){var o=$(n),a=o.prop("checked"),r=o.val();if(r==1&&a){t+=4800}else if(r==2&&a){t+=100}else if(r==3&&a){var d=Number($.trim($("#flowMoney").val()));if(!d){utils.show.redTip("充值流量费用输入必须为数字！");e.inputError=true;return false}t+=d}});if(!t){utils.show.redTip("开票金额不能为0！");e.inputError=true;return false}e.data["invoice_amount"]=t;e.data["invoice_type"]=$("input:radio[name=type]:checked").val();return e.data}};window.utils=function(){var e={show:{colors:{red:"#f06d6b",blue:"#2a75ed"},defaultTip:function(e,t,i,n){var o=$("#TopPrompt"),a=o.find(".topPromptContent");i=i||2e3;a.text(e);o.css("backgroundColor",this.colors[n]).fadeIn(300);setTimeout(function(){o.fadeOut(300);if(t)t.call()},i)},blueTip:function(e,t,i){this.defaultTip(e,t,i,"blue")},redTip:function(e,t,i){this.defaultTip(e,t,i,"red")}},maxInputPrice:1e6};e.showWindow=function(e){var i='<div class="modal-backdrop in"></div>';$("body").append(i);t.preventScroll();$("#"+e).show()};e.hideWindow=function(e){$("body").find(".modal-backdrop.in").remove();t.enableScroll();$("#"+e).hide()};e.showLoading=function(e){$("#_localLoading"+e).show()};e.hideLoading=function(e){$("#_localLoading"+e).hide()};var t={preventScroll:function(){document.body.style.overflow="hidden";window.addEventListener("touchmove",this._preventDefault)},enableScroll:function(){document.body.style.overflow="auto";window.removeEventListener("touchmove",this._preventDefault)},_preventDefault:function(e){e.preventDefault()}};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2ludm9pY2UvbWFuYWdlLmpzIl0sIm5hbWVzIjpbIiQiLCJidXNpbmVzcyIsIkJ1c2luZXNzIiwidGhpcyIsImRhdGEiLCJzcGVjIiwidmFsdWVBZGRlZCIsImlucHV0RXJyb3IiLCJpbml0IiwicHJvdG90eXBlIiwiYWRkRXZlbnQiLCJzZWxmIiwiY2xpY2siLCJzdWJtaXQiLCJiaW5kIiwib24iLCJlIiwiJGVsZSIsInRhcmdldCIsInZhbCIsInNob3ciLCJoaWRlIiwiRGF0YSIsImdldFZhbCIsImFqYXgiLCJ0eXBlIiwiZGF0YVR5cGUiLCJkb25lIiwianNvbiIsImNvZGUiLCJ1dGlscyIsImJsdWVUaXAiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJyZWRUaXAiLCJtc2ciLCJmYWlsIiwiZXJyb3IiLCJjb25zb2xlIiwiYW1vdW50IiwiZWFjaCIsImluZGV4IiwiaXRlbSIsIm5hbWUiLCJhdHRyIiwidGV4dCIsInZhbHVlIiwidHJpbSIsImNoZWNrZWQiLCJwcm9wIiwibW9uZXkiLCJOdW1iZXIiLCJiYXNlVXRpbHMiLCJjb2xvcnMiLCJyZWQiLCJibHVlIiwiZGVmYXVsdFRpcCIsImNvbnRlbnQiLCJjYWxsYmFjayIsInRpbWUiLCJjb2xvciIsIiRUaXAiLCIkVGlwVGV4dCIsImZpbmQiLCJjc3MiLCJmYWRlSW4iLCJzZXRUaW1lb3V0IiwiZmFkZU91dCIsImNhbGwiLCJtYXhJbnB1dFByaWNlIiwic2hvd1dpbmRvdyIsImRvbUlkIiwiaHRtbFN0cmluZyIsImFwcGVuZCIsInByaXZhdGVGdW4iLCJwcmV2ZW50U2Nyb2xsIiwiaGlkZVdpbmRvdyIsInJlbW92ZSIsImVuYWJsZVNjcm9sbCIsInNob3dMb2FkaW5nIiwibG9hZGluZ0lkIiwiaGlkZUxvYWRpbmciLCJkb2N1bWVudCIsImJvZHkiLCJzdHlsZSIsIm92ZXJmbG93IiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9wcmV2ZW50RGVmYXVsdCIsInJlbW92ZUV2ZW50TGlzdGVuZXIi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LEtBQUtxRixrQkFFOUNULGFBQWMsV0FFVkksU0FBU0MsS0FBS0MsTUFBTUMsU0FBVyxNQUMvQnRELFFBQU95RCxvQkFBb0IsWUFBYXRGLEtBQUtxRixrQkFFakRBLGdCQUFpQixTQUFTeEUsR0FDdEJBLEVBQUUwRSxrQkFLVixPQUFPckMiLCJmaWxlIjoiYWRtaW4vaW52b2ljZS9tYW5hZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBidXNpbmVzcyA9IG5ldyBCdXNpbmVzcygpO1xyXG59KTtcclxuXHJcblxyXG5mdW5jdGlvbiBCdXNpbmVzcygpIHtcclxuICAgIHRoaXMuZGF0YSA9IHt9O1xyXG4gICAgdGhpcy5zcGVjID0gJCgnI3NwZWNpYWxUaWNrZXQnKTtcclxuICAgIHRoaXMudmFsdWVBZGRlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5pbnB1dEVycm9yID0gZmFsc2U7XHJcbiAgICB0aGlzLmluaXQoKTtcclxufVxyXG5cclxuQnVzaW5lc3MucHJvdG90eXBlID0ge1xyXG4gICAgaW5pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdGhpcy5hZGRFdmVudCgpO1xyXG4gICAgfSxcclxuICAgIGFkZEV2ZW50OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICQoJyNtYWtlSW52b2ljZScpLmNsaWNrKHRoaXMuc3VibWl0LmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAkKCcjcmFkaW9Cb3gnKS5vbignY2hhbmdlJywgJzpyYWRpbycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyICRlbGUgPSAkKGUudGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgIHZhbCA9ICRlbGUudmFsKCk7XHJcbiAgICAgICAgICAgIGlmKHZhbCA9PSAyKSB7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnNwZWMuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgc2VsZi52YWx1ZUFkZGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHNlbGYuc3BlYy5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICBzZWxmLnZhbHVlQWRkZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSxcclxuICAgIHN1Ym1pdDogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgdmFyIERhdGEgPSB0aGlzLmdldFZhbCgpLFxyXG4gICAgICAgICAgICBzZWxmID0gdGhpcztcclxuXHJcbiAgICAgICAgaWYoc2VsZi5pbnB1dEVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJC5hamF4KCcvY3JlYXRlX2ludm9pY2UnLCB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgZGF0YTogc2VsZi5kYXRhLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nXHJcbiAgICAgICAgfSkuZG9uZShmdW5jdGlvbihqc29uKSB7XHJcbiAgICAgICAgICAgIGlmKGpzb24uY29kZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICB1dGlscy5zaG93LmJsdWVUaXAoJ+aPkOS6pOaIkOWKn++8jOetieW+heWuoeaguCcsIGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9pbnZvaWNlX2luZm8nO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB1dGlscy5zaG93LnJlZFRpcChqc29uLm1zZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyb3IpO1xyXG4gICAgICAgICAgICB1dGlscy5zaG93LnJlZFRpcCgn5pyN5Yqh5Zmo5byA5bCP5beu5LqG77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgZ2V0VmFsOiBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgc2VsZiA9IHRoaXMsXHJcbiAgICAgICAgICAgIGFtb3VudCA9IDA7XHJcblxyXG4gICAgICAgICQoJyNmb3JtSW5mbyAuaW5wdXREZWZhdWx0JykuZWFjaChmdW5jdGlvbihpbmRleCwgaXRlbSkge1xyXG4gICAgICAgICAgICAgdmFyICRlbGUgPSAkKGl0ZW0pLFxyXG4gICAgICAgICAgICAgbmFtZSA9ICRlbGUuYXR0cignbmFtZScpLFxyXG4gICAgICAgICAgICAgdmFsdWVBZGRlZCA9ICRlbGUuZGF0YSgndmFsdWUnKSxcclxuICAgICAgICAgICAgIHRleHQgPSAkZWxlLmRhdGEoJ3RleHQnKSxcclxuICAgICAgICAgICAgIHZhbHVlID0gJC50cmltKCAkZWxlLnZhbCgpICk7XHJcblxyXG4gICAgICAgICAgICAgaWYoIXNlbGYudmFsdWVBZGRlZCkge1xyXG4gICAgICAgICAgICAgICAgIGlmICh2YWx1ZUFkZGVkIT0nYWRkJyAmJiAodGV4dCAhPSAnJyAmJiB2YWx1ZSA9PSAnJykpIHtcclxuICAgICAgICAgICAgICAgICAgICAgdXRpbHMuc2hvdy5yZWRUaXAodGV4dCArICfkuI3og73kuLrnqbrvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodmFsdWVBZGRlZCE9J2FkZCcpIHtcclxuICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dEVycm9yID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgIHNlbGYuZGF0YVtuYW1lXSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgaWYgKHRleHQgIT0gJycgJiYgdmFsdWUgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgdXRpbHMuc2hvdy5yZWRUaXAodGV4dCArICfkuI3og73kuLrnqbrvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgc2VsZi5pbnB1dEVycm9yID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgIHNlbGYuaW5wdXRFcnJvciA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICBzZWxmLmRhdGFbbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKCc6Y2hlY2tib3gnKS5lYWNoKGZ1bmN0aW9uKGluZGV4LCBpdGVtKXtcclxuICAgICAgICAgICAgdmFyICRlbGUgPSAkKGl0ZW0pLFxyXG4gICAgICAgICAgICAgICAgY2hlY2tlZCA9ICRlbGUucHJvcCgnY2hlY2tlZCcpLFxyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSAkZWxlLnZhbCgpO1xyXG4gICAgICAgICAgICBpZih2YWx1ZSA9PSAxICYmIGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIGFtb3VudCArPSA0ODAwO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZhbHVlID09IDIgJiYgY2hlY2tlZCkge1xyXG4gICAgICAgICAgICAgICAgYW1vdW50ICs9IDEwMDtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh2YWx1ZSA9PSAzICYmIGNoZWNrZWQpIHtcclxuICAgICAgICAgICAgICAgIHZhciBtb25leSA9IE51bWJlciggJC50cmltKCAkKCcjZmxvd01vbmV5JykudmFsKCkgKSApO1xyXG4gICAgICAgICAgICAgICAgaWYoIW1vbmV5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXRpbHMuc2hvdy5yZWRUaXAoJ+WFheWAvOa1gemHj+i0ueeUqOi+k+WFpeW/hemhu+S4uuaVsOWtl++8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuaW5wdXRFcnJvciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYW1vdW50ICs9IG1vbmV5O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYoIWFtb3VudCkge1xyXG4gICAgICAgICAgICB1dGlscy5zaG93LnJlZFRpcCgn5byA56Wo6YeR6aKd5LiN6IO95Li6MO+8gScpO1xyXG4gICAgICAgICAgICBzZWxmLmlucHV0RXJyb3IgPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlbGYuZGF0YVsnaW52b2ljZV9hbW91bnQnXSA9IGFtb3VudDtcclxuICAgICAgICBzZWxmLmRhdGFbJ2ludm9pY2VfdHlwZSddID0gJCgnaW5wdXQ6cmFkaW9bbmFtZT10eXBlXTpjaGVja2VkJykudmFsKCk7XHJcblxyXG4gICAgICAgIHJldHVybiBzZWxmLmRhdGE7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG53aW5kb3cudXRpbHMgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyIGJhc2VVdGlscyA9IHtcclxuICAgICAgICBzaG93OiB7XHJcbiAgICAgICAgICAgIGNvbG9yczoge1xyXG4gICAgICAgICAgICAgICAgcmVkOiAnI2YwNmQ2YicsXHJcbiAgICAgICAgICAgICAgICBibHVlOiAnIzJhNzVlZCdcclxuICAgICAgICAgICAgfSxcclxuXHJcbiAgICAgICAgICAgIGRlZmF1bHRUaXA6IGZ1bmN0aW9uIChjb250ZW50LCBjYWxsYmFjaywgdGltZSwgY29sb3IpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkVGlwID0gJCgnI1RvcFByb21wdCcpLFxyXG4gICAgICAgICAgICAgICAgICAgICRUaXBUZXh0ID0gJFRpcC5maW5kKCcudG9wUHJvbXB0Q29udGVudCcpO1xyXG4gICAgICAgICAgICAgICAgdGltZSA9IHRpbWUgfHwgMjAwMDtcclxuICAgICAgICAgICAgICAgICRUaXBUZXh0LnRleHQoY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAkVGlwLmNzcygnYmFja2dyb3VuZENvbG9yJywgdGhpcy5jb2xvcnNbY29sb3JdKS5mYWRlSW4oMzAwKTtcclxuXHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkVGlwLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2FsbGJhY2spIGNhbGxiYWNrLmNhbGwoKTtcclxuICAgICAgICAgICAgICAgIH0sIHRpbWUpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyAg6JOd6Imy6aG26YOo5o+Q56S65p2hXHJcbiAgICAgICAgICAgIGJsdWVUaXA6IGZ1bmN0aW9uIChjb250ZW50LCBjYWxsYmFjaywgdGltZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kZWZhdWx0VGlwKGNvbnRlbnQsIGNhbGxiYWNrLCB0aW1lLCAnYmx1ZScpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAvLyAg57qi6Imy6aG26YOo5o+Q56S65p2hXHJcbiAgICAgICAgICAgIHJlZFRpcDogZnVuY3Rpb24gKGNvbnRlbnQsIGNhbGxiYWNrLCB0aW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmRlZmF1bHRUaXAoY29udGVudCwgY2FsbGJhY2ssIHRpbWUsICdyZWQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDovpPlhaXnmoTmnIDlpKfku7fmoLwgMTAw5LiH77yMIOWNleS9je+8muWFg1xyXG4gICAgICAgICAqL1xyXG4gICAgICAgIG1heElucHV0UHJpY2U6IDEwMDAwMDAsXHJcbiAgICB9XHJcbiAgICAvL+eql+WPo0lk5YC8XHJcbiAgICBiYXNlVXRpbHMuc2hvd1dpbmRvdyA9IGZ1bmN0aW9uIChkb21JZCkge1xyXG4gICAgICAgIHZhciBodG1sU3RyaW5nID0gJzxkaXYgY2xhc3M9XCJtb2RhbC1iYWNrZHJvcCBpblwiPjwvZGl2Pic7XHJcbiAgICAgICAgJChcImJvZHlcIikuYXBwZW5kKGh0bWxTdHJpbmcpO1xyXG4gICAgICAgIHByaXZhdGVGdW4ucHJldmVudFNjcm9sbCgpO1xyXG4gICAgICAgICQoXCIjXCIgKyBkb21JZCkuc2hvdygpO1xyXG5cclxuICAgIH07XHJcbiAgICBiYXNlVXRpbHMuaGlkZVdpbmRvdyA9IGZ1bmN0aW9uIChkb21JZCkge1xyXG4gICAgICAgICQoXCJib2R5XCIpLmZpbmQoXCIubW9kYWwtYmFja2Ryb3AuaW5cIikucmVtb3ZlKCk7XHJcbiAgICAgICAgcHJpdmF0ZUZ1bi5lbmFibGVTY3JvbGwoKTtcclxuICAgICAgICAkKFwiI1wiICsgZG9tSWQpLmhpZGUoKTtcclxuXHJcbiAgICB9O1xyXG5cclxuICAgIC8v5pi+56S65bGA6YOoIGxvYWRpbmcg5Yqo55S7XHJcbiAgICBiYXNlVXRpbHMuc2hvd0xvYWRpbmcgPSBmdW5jdGlvbiAobG9hZGluZ0lkKSB7XHJcbiAgICAgICAgJChcIiNfbG9jYWxMb2FkaW5nXCIgKyBsb2FkaW5nSWQpLnNob3coKTtcclxuICAgIH07XHJcbiAgICBiYXNlVXRpbHMuaGlkZUxvYWRpbmcgPSBmdW5jdGlvbiAobG9hZGluZ0lkKSB7XHJcbiAgICAgICAgJChcIiNfbG9jYWxMb2FkaW5nXCIgKyBsb2FkaW5nSWQpLmhpZGUoKTtcclxuICAgIH07XHJcblxyXG5cclxuICAgIHZhciBwcml2YXRlRnVuID0ge1xyXG4gICAgICAgIHByZXZlbnRTY3JvbGw6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgLy8g56aB5q2iXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX3ByZXZlbnREZWZhdWx0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVuYWJsZVNjcm9sbDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAvLyDmgaLlpI1cclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdhdXRvJztcclxuICAgICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX3ByZXZlbnREZWZhdWx0KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9wcmV2ZW50RGVmYXVsdDogZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gYmFzZVV0aWxzO1xyXG5cclxufSkoKTsiXX0=
