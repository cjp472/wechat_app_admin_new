$(function(){resAdd.init()});var id;var pageType;var resourceType;var uploadChannelType=GetQueryString("upload_channel_type")||1;var resourceFree=uploadChannelType==1?2:null;var packageId=GetQueryString("package_id");var resourceParams;var packageName;var columnState=1;var show_resourcecount=1;var classArray=[];var fileAudio1Size;var resAudio1Length;var AudioName;var fileAudio2Size;var resAudio2Length;var tryAudioName;var VideoName;var aliveState;var roleParams=[];var aliveT=0;var backURL="";var prevVal;var if_push,push_ahead;var playState=0;var resAdd=function(){var e={};var i;function a(e){var i=null;if(window.createObjectURL!=undefined){i=window.createObjectURL(e)}else if(window.URL!=undefined){i=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){i=window.webkitURL.createObjectURL(e)}return i}function o(e){if(window.revokeObjectURL!=undefined){window.revokeObjectURL(e)}else if(window.URL!=undefined){window.URL.revokeObjectURL(e)}else if(window.webkitURL!=undefined){window.webkitURL.revokeObjectURL(e)}}function n(e,n,t,l){if(e&&e.length>0){var r=e[0];var c=a(r);i=(r.size/(1024*1024)).toFixed(2);resAudio1Lengh=r.duration;if(t=="Audio1"){fileAudio1Size=i;var u=document.getElementById("resourceTime");u.src=c;u.onload=function(){o(c)}}if(t=="Audio2"){fileAudio2Size=i;var s=document.getElementById("tryTime");s.src=c;s.onload=function(){o(c)}}if(n=="audio"){console.log($("#audioURL"+t));$("#audioURL"+t).hide();$(".uploadBox"+t).fadeIn(300);$(".upload"+t+"Name").html(r.name);$(".upload"+t+"Size span").html(i);$(".uploadPLine"+t).show().find(".uploadPLineActive"+t).css("width","0");$(".uploadPersent"+t).html("");if(t=="Audio1"){AudioName=r.name}else if(t=="Audio2"){tryAudioName=r.name}}if($uploadFile.checkFileSize(r,l)){$uploadFile.uploadRes(r,n,function(e){if(n=="audio"){var i=parseInt(e*100);$(".uploadPLineActive"+t).css("width",i+"%");$(".uploadPersent"+t).text(i+"%")}},function(e){console.log(e);baseUtils.show.blueTip("上传成功！");$(".uploadPersent"+t).text("完成");resUrl=e.data.access_url;console.log(resUrl);$("#"+t+"Url").val(resUrl);if(t=="Audio2"){$(".deleteTryAudio").show()}if(n=="image"){$(".previewPic"+t+" img").load(function(){o(c)}).attr("src",c)}},function(e){console.error("上传失败!!!");console.log(e);baseUtils.show.redTip("上传失败！")})}else{baseUtils.show.redTip("上传资源限制在"+l+"MB内！");$(".upLoad"+t).val("")}}else{baseUtils.show.redTip("网络错误，请稍后再试！")}}e.init=function(){$("select").material_select();aliveTimeConfig(".dateSetInput");resourceType=GetQueryString("type");$(".upLoadImage1").on("change",function(){n(this.files,"image","Image1",5)});$(".previewPicImage1").click(function(){$(".upLoadImage1").click()});$(".upLoadImage2").on("change",function(){n(this.files,"image","Image2",5)});$(".previewPicImage2").click(function(){$(".upLoadImage2").click()});$(".upLoadImage3").on("change",function(){n(this.files,"image","Image3",5)});$(".previewPicImage3").click(function(){$(".upLoadImage3").click()});$(".upLoadImage4").on("change",function(){n(this.files,"image","Image4",5)});$(".previewPicImage4").click(function(){$(".upLoadImage4").click()});$(".upLoadAudio1").on("change",function(){console.log($("#audio_url").duration);n(this.files,"audio","Audio1",200)});$(".upLoadAudio2").on("change",function(){n(this.files,"audio","Audio2",200)});$(".deleteTryAudio").click(function(){$(".upLoadAudio2").val("");$(".uploadBoxAudio2").hide();$("#Audio2Url").val("");$(this).hide();$("#audioURLAudio2").remove()});$(".notFreeSelect").click(function(){$(".resPrize").removeAttr("readonly");$(".resPrize").removeAttr("disabled");resourceFree=2;$("#courseRemind").show()});$(".FreeSelect").click(function(){$(".resPrize").attr("readonly","readonly");$(".resPrize").attr("disabled","disabled");$(".resPrize").val(0);resourceFree=1;$("#courseRemind").hide();$("#courseRemind option[value=-1]").prop("selected",true);$("#push_ahead").change()});push_ahead=$("#push_ahead option:selected").val();if_push=$("#if_push").val()||1;function e(){if(push_ahead==-1){if_push=1}else{if_push=0}}var i=$("#push_ahead");if(i.length>0){console.log(push_ahead);e();console.log(if_push);if(i.data("setting")==1){i.on("change",function(i){var a=$(this),o=+a.val();a.find("option[value="+push_ahead+"]").prop("selected",true);if(push_ahead==-1&&o!=-1){var n="您需要到微信公众号后台将您的服务号所在行业设置为“教育/培训”，设置完成后，开启服务号通知方可正常发送模板消息。"+"<br/><a target='_blank' href='/help/instructions#hp5_wx_service' style='margin-top:10px;'>什么是模板消息？</a>";var t={title:"提示",btn:3,oktext:"我已设置",canceltext:"关闭",icon:"blue",onOk:function(){$.ajax("/has_industry",{type:"GET",dataType:"json",data:{}}).done(function(i){var n=i.ret;if(n==0){a.find("option[value="+o+"]").prop("selected",true);push_ahead=o;e();baseUtils.show.blueTip("模板消息推送开启")}else{baseUtils.show.redTip("无法开启消息推送，请按照提示修改设置")}}).fail(function(e,i,a){console.error(a);baseUtils.show.redTip("网络错误，请稍后再试")})}};$.alert(n,"custom",t);return false}else{push_ahead=o;e();a.find("option[value="+o+"]").prop("selected",true)}})}else{i.on("change",function(i){var a=$(this);push_ahead=+a.val();e()})}}$(".videosSelect").click(function(){$(".aliveVideoBox").slideDown(300);aliveT=1;console.log(aliveT);VideoName=null});$(".voiceSelect").click(function(){$(".aliveVideoBox").slideUp(300);aliveT=0;console.log(aliveT)});$(".aliveSelect").click(function(){$(".aliveVideoBox").slideUp(300);aliveT=2;console.log(aliveT)});$(".columnShow").click(function(){columnState=0});$(".columnHide").click(function(){columnState=1});$(".countShow").click(function(){show_resourcecount=1});$(".countHide").click(function(){show_resourcecount=0});$(".lastStepBtn").click(function(){window.history.back()});var a=$("#getBack");if(uploadChannelType==1){backURL="/resource_list_page";a.attr("href",backURL)}else if(uploadChannelType==2){backURL="/package_detail_page?id="+packageId;a.attr("href",backURL)}else if(uploadChannelType==3){backURL="/member_detail_page?id="+packageId;a.attr("href",backURL)}changeSaveFlag(true);var o=$("#serviceToggle");prevVal=+$("#serviceToggle :radio:checked").val()||null;if(o.length>0){if(o.data("setting")==1){o.on("click",":radio",function(e){var i=$(this);var a=+i.val();if(a!==prevVal&&a==1){e.preventDefault();var o="您需要到微信公众号后台将您的服务号所在行业设置为“教育/培训”，设置完成后，开启服务号通知方可正常发送模板消息。"+"<br/><a target='_blank' href='/help/instructions#hp5_wx_service' style='margin-top:10px;'>什么是模板消息？</a>";var n={title:"提示",btn:3,oktext:"我已设置",canceltext:"关闭",icon:"blue",onOk:function(){$.ajax("/has_industry",{type:"GET",dataType:"json",data:{}}).done(function(e){var o=e.ret;if(o==0){i.prop("checked",true);prevVal=a;baseUtils.show.blueTip("模板消息推送开启")}else{baseUtils.show.redTip("无法开启消息推送，请按照提示修改设置")}}).fail(function(e,i,a){console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")})}};$.alert(o,"custom",n);return false}else{prevVal=a;params["push_state"]=a;$("#serviceToggle").data("state",a)}})}else{o.on("click",":radio",function(e){var i=$(this);var a=i.val();if(a!==prevVal&&a==1){prevVal=a;baseUtils.show.blueTip("模板消息推送开启")}else{prevVal=a}})}}};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc0FkZC5qcyJdLCJuYW1lcyI6WyIkIiwicmVzQWRkIiwiaW5pdCIsImlkIiwicGFnZVR5cGUiLCJyZXNvdXJjZVR5cGUiLCJ1cGxvYWRDaGFubmVsVHlwZSIsIkdldFF1ZXJ5U3RyaW5nIiwicmVzb3VyY2VGcmVlIiwicGFja2FnZUlkIiwicmVzb3VyY2VQYXJhbXMiLCJwYWNrYWdlTmFtZSIsImNvbHVtblN0YXRlIiwic2hvd19yZXNvdXJjZWNvdW50IiwiY2xhc3NBcnJheSIsImZpbGVBdWRpbzFTaXplIiwicmVzQXVkaW8xTGVuZ3RoIiwiQXVkaW9OYW1lIiwiZmlsZUF1ZGlvMlNpemUiLCJyZXNBdWRpbzJMZW5ndGgiLCJ0cnlBdWRpb05hbWUiLCJWaWRlb05hbWUiLCJhbGl2ZVN0YXRlIiwicm9sZVBhcmFtcyIsImFsaXZlVCIsImJhY2tVUkwiLCJwcmV2VmFsIiwiaWZfcHVzaCIsInB1c2hfYWhlYWQiLCJwbGF5U3RhdGUiLCJmaWxlU2l6ZSIsImdldE9iamVjdFVSTCIsImZpbGUiLCJ1cmwiLCJ3aW5kb3ciLCJjcmVhdGVPYmplY3RVUkwiLCJ1bmRlZmluZWQiLCJVUkwiLCJ3ZWJraXRVUkwiLCJyZW1vdmVPYmplY3RVUkwiLCJyZXZva2VPYmplY3RVUkwiLCJyZXNVcGxvYWQiLCJmaWxlcyIsInJlc1R5cGUiLCJyZXNUeXBlQ2xhc3MiLCJyZXNMaW1pdFNpemUiLCJsZW5ndGgiLCJyZXNvdXJjZUxvY2FsVXJsIiwic2l6ZSIsInRvRml4ZWQiLCJyZXNBdWRpbzFMZW5naCIsImR1cmF0aW9uIiwicmVzb3VyY2VFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInNyYyIsIm9ubG9hZCIsInRyeUVsZW1lbnQiLCJjb25zb2xlIiwibG9nIiwiaGlkZSIsImZhZGVJbiIsImh0bWwiLCJuYW1lIiwic2hvdyIsImZpbmQiLCJjc3MiLCIkdXBsb2FkRmlsZSIsImNoZWNrRmlsZVNpemUiLCJ1cGxvYWRSZXMiLCJkYXRhIiwicHJvZ3Jlc3MiLCJwYXJzZUludCIsInRleHQiLCJiYXNlVXRpbHMiLCJibHVlVGlwIiwicmVzVXJsIiwiYWNjZXNzX3VybCIsInZhbCIsImxvYWQiLCJhdHRyIiwiZXJyb3IiLCJyZWRUaXAiLCJtYXRlcmlhbF9zZWxlY3QiLCJhbGl2ZVRpbWVDb25maWciLCJvbiIsInRoaXMiLCJjbGljayIsInJlbW92ZSIsInJlbW92ZUF0dHIiLCJwcm9wIiwiY2hhbmdlIiwic2V0SWZQdXNoIiwiJHB1c2hBaGVhZCIsImUiLCJlbGUiLCJjdXJTZWxlY3RlZCIsInR4dCIsIm9wdGlvbiIsInRpdGxlIiwiYnRuIiwib2t0ZXh0IiwiY2FuY2VsdGV4dCIsImljb24iLCJvbk9rIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImRvbmUiLCJjb2RlIiwicmV0IiwiZmFpbCIsInhociIsImVyciIsImFsZXJ0Iiwic2xpZGVEb3duIiwic2xpZGVVcCIsImhpc3RvcnkiLCJiYWNrIiwiJGdldEJhY2siLCJjaGFuZ2VTYXZlRmxhZyIsIiRzZXJ2aWNlVG9nZ2xlIiwiY3VyclZhbCIsInByZXZlbnREZWZhdWx0IiwicGFyYW1zIl0sIm1hcHBpbmdzIjoiQUFBQUEsRUFBRSxXQUNFQyxPQUFPQyxRQU9YLElBQUlDLEdBR0osSUFBSUMsU0FHSixJQUFJQyxhQUdKLElBQUlDLG1CQUFvQkMsZUFBZSx3QkFBMEIsQ0FHakUsSUFBSUMsY0FBZUYsbUJBQW1CLEVBQUksRUFBSSxJQUc5QyxJQUFJRyxXQUFZRixlQUFlLGFBRy9CLElBQUlHLGVBR0osSUFBSUMsWUFHSixJQUFJQyxhQUFjLENBR2xCLElBQUlDLG9CQUFxQixDQUd6QixJQUFJQyxjQUlKLElBQUlDLGVBR0osSUFBSUMsZ0JBR0osSUFBSUMsVUFHSixJQUFJQyxlQUdKLElBQUlDLGdCQUdKLElBQUlDLGFBU0osSUFBSUMsVUFLSixJQUFJQyxXQUVKLElBQUlDLGNBR0osSUFBSUMsUUFBUyxDQU1iLElBQUlDLFNBQVUsRUFHZCxJQUFJQyxRQUVKLElBQUlDLFNBQ0FDLFVBR0osSUFB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QUFLLFVBQVcsS0FDcEJoRSxTQUFVZ0csQ0FFVmhELFdBQVVWLEtBQUtXLFFBQVEsZ0JBQ3BCLENBQ0hELFVBQVVWLEtBQUtrQixPQUFPLHlCQUUzQjZCLEtBQUssU0FBU0MsRUFBS3ZDLEVBQU13QyxHQUN4QnZELFFBQVF1QixNQUFNZ0MsRUFDZHZDLFdBQVVWLEtBQUtrQixPQUFPLGtCQUlsQ2xGLEdBQUVrSCxNQUFNakIsRUFBSyxTQUFVQyxFQUN2QixPQUFPLFdBQ0osQ0FFSHhFLFFBQVVnRyxDQUNWRSxRQUFPLGNBQWdCRixDQUN2QjFILEdBQUUsa0JBQWtCc0UsS0FBSyxRQUFRb0QsVUFHdEMsQ0FDSEQsRUFBZXBDLEdBQUcsUUFBUyxTQUFVLFNBQVNTLEdBQzFDLEdBQUlDLEdBQU0vRixFQUFFc0YsS0FDWixJQUFJb0MsR0FBVTNCLEVBQUlqQixLQUNsQixJQUFJNEMsSUFBWWhHLFNBQVdnRyxHQUFXLEVBQUksQ0FDdENoRyxRQUFVZ0csQ0FDVmhELFdBQVVWLEtBQUtXLFFBQVEsZ0JBQ3BCLENBQ0hqRCxRQUFVZ0csT0FNOUIsT0FBT3pIIiwiZmlsZSI6InJlc0FkZC5qcyIsInNvdXJjZXNDb250ZW50IjpbIiQoZnVuY3Rpb24gKCkge1xuICAgIHJlc0FkZC5pbml0KCk7XG59KTtcblxuLy/lhazlhbHlj5jph4/lvIDlp4tcbi8v5Yik5a6a5piv57yW6L6R6L+Y5piv5paw5bu6XG5cbi8v6LWE5rqQ5qCH6K+GXG52YXIgaWQ7XG5cbi8v57yW6L6R5oiW5piv5L+u5pS5XG52YXIgcGFnZVR5cGU7XG5cbi8v6LWE5rqQ57G75Z6LXG52YXIgcmVzb3VyY2VUeXBlO1xuXG4vL+aWsOWinueahOa4oOmBkyAg6buY6K6k5Li65Y2V5ZOBXG52YXIgdXBsb2FkQ2hhbm5lbFR5cGUgPSBHZXRRdWVyeVN0cmluZyhcInVwbG9hZF9jaGFubmVsX3R5cGVcIikgfHwgMTtcblxuLy/ku5jotLnlvaLlvI9cbnZhciByZXNvdXJjZUZyZWUgPSB1cGxvYWRDaGFubmVsVHlwZT09MSA/IDIgOiBudWxsO1xuXG4vL+S4k+agj0lEXG52YXIgcGFja2FnZUlkID0gR2V0UXVlcnlTdHJpbmcoXCJwYWNrYWdlX2lkXCIpO1xuXG4vLyjlvZPotYTmupDkuLrop4bpopHjgIHnm7Tmkq3ml7Ys5pyJ5YC8KVxudmFyIHJlc291cmNlUGFyYW1zO1xuXG4vL+S4k+agj+WQjeensFxudmFyIHBhY2thZ2VOYW1lO1xuXG4vL+S4k+agj+S4iuS4i+aetueKtuaAgVxudmFyIGNvbHVtblN0YXRlID0gMTtcblxuLy/kuJPmoI/mnJ/mlbDmmL7npLpcbnZhciBzaG93X3Jlc291cmNlY291bnQgPSAxO1xuXG4vL+S4k+agj+WIhuexu+aVsOe7hFxudmFyIGNsYXNzQXJyYXkgPSBbXTtcblxuLy/pn7PpopHlj4LmlbDlvIDlp4tcbi8v5q2j5byP6Z+z6aKR5aSn5bCPXG52YXIgZmlsZUF1ZGlvMVNpemU7XG5cbi8v5q2j5byP6Z+z6aKR6ZW/5bqmXG52YXIgcmVzQXVkaW8xTGVuZ3RoO1xuXG4vL+ato+W8j+mfs+mikeWQjVxudmFyIEF1ZGlvTmFtZTtcblxuLy/or5XlkKzpn7PpopHlpKflsI9cbnZhciBmaWxlQXVkaW8yU2l6ZTtcblxuLy/or5XlkKzpn7PpopHplb/luqZcbnZhciByZXNBdWRpbzJMZW5ndGg7XG5cbi8v6K+V5ZCs6Z+z6aKR5ZCNXG52YXIgdHJ5QXVkaW9OYW1lO1xuXG4vL+mfs+mikeWPguaVsOe7k+adn1xuXG4vL+WbvuaWh+WPguaVsOW8gOWni1xuLy/lm77mloflj4LmlbDnu5PmnZ9cblxuLy/op4bpopHlj4LmlbDlvIDlp4tcbi8v6KeG6aKR5ZCN56ewXG52YXIgVmlkZW9OYW1lO1xuLy/op4bpopHlj4LmlbDnu5PmnZ9cblxuLy/nm7Tmkq3lj4LmlbDlvIDlp4tcbi8v55u05pKt54q25oCBXG52YXIgYWxpdmVTdGF0ZTtcbi8vIOebtOaSreiusuW4iOWIl+ihqFxudmFyIHJvbGVQYXJhbXMgPSBbXTtcblxuLy/nm7Tmkq3nsbvlnoso6buY6K6k5Li66Z+z6aKRKVxudmFyIGFsaXZlVCA9IDA7XG5cbi8v55u05pKt5Y+C5pWw57uT5p2fXG5cblxuLy/miJDlip/lkI7ov5Tlm57nmoRVUkxcbnZhciBiYWNrVVJMID0gJyc7XG5cbi8v5o6o6YCB5raI5oGv55qE5YC8XG52YXIgcHJldlZhbDtcblxudmFyIGlmX3B1c2gsIC8v5piv5ZCm5byA5ZCv5o6o6YCBXG4gICAgcHVzaF9haGVhZDsgLy/mj5DliY3mjqjpgIHml7bpl7RcblxuLy/nm7Tmkq3nmoTmkq3mlL7nirbmgIHvvIgw5pyq5byA5aeL77yMMeOAgTTlt7LlvIDlp4vvvIwyLDPnu5PmnZ/vvIlcbnZhciBwbGF5U3RhdGU9MDtcblxuLy/lhazlhbHlj5jph4/nu5PmnZ9cblxudmFyIHJlc0FkZCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIHJlc0FkZCA9IHt9O1xuXG4gICAgLy/mlofku7blpKflsI9cbiAgICB2YXIgZmlsZVNpemU7XG5cbiAgICAvL+WPlua2iOS4iuS8oOWIpOaWreWPguaVsFxuICAgIC8vIHZhciB1cGxvYWRDYW5jZWw9MDtcbiAgICBmdW5jdGlvbiBnZXRPYmplY3RVUkwoZmlsZSkge1xuICAgICAgICB2YXIgdXJsID0gbnVsbDtcbiAgICAgICAgaWYgKHdpbmRvdy5jcmVhdGVPYmplY3RVUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB1cmwgPSB3aW5kb3cuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy5VUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cud2Via2l0VVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXJsID0gd2luZG93LndlYmtpdFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVybDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVPYmplY3RVUkwodXJsKSB7Ly/ph4rmlL7otYTmupBVUkxcbiAgICAgICAgaWYgKHdpbmRvdy5yZXZva2VPYmplY3RVUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3aW5kb3cucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LlVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LndlYmtpdFVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy53ZWJraXRVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuICAgIC8v6LWE5rqQ5LiK5Lyg5Ye95pWwKOWPguaVsO+8mnJlc1R5cGU66LWE5rqQ57G75Z6LLHJlc1R5cGVDbGFzczrotYTmupDnsbvlnovkuK3nu4bliIbnmoTnp43nsbsscmVzTGltaXRTaXplOui1hOa6kOmZkOWItuWkp+WwjylcbiAgICBmdW5jdGlvbiByZXNVcGxvYWQoZmlsZXMsIHJlc1R5cGUsIHJlc1R5cGVDbGFzcywgcmVzTGltaXRTaXplKSB7XG4gICAgICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZmlsZSA9IGZpbGVzWzBdO1xuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhmaWxlKTtcblxuICAgICAgICAgICAgdmFyIHJlc291cmNlTG9jYWxVcmwgPSBnZXRPYmplY3RVUkwoZmlsZSk7XG4gICAgICAgICAgICBmaWxlU2l6ZSA9IChmaWxlLnNpemUgLyAoMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgcmVzQXVkaW8xTGVuZ2ggPSBmaWxlLmR1cmF0aW9uO1xuICAgICAgICAgICAgLy/lpoLmnpzmmK/mraPlvI/pn7PpopFcbiAgICAgICAgICAgIGlmIChyZXNUeXBlQ2xhc3MgPT0gXCJBdWRpbzFcIikge1xuICAgICAgICAgICAgICAgIGZpbGVBdWRpbzFTaXplID0gZmlsZVNpemU7XG4gICAgICAgICAgICAgICAgdmFyIHJlc291cmNlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVzb3VyY2VUaW1lXCIpO1xuICAgICAgICAgICAgICAgIHJlc291cmNlRWxlbWVudC5zcmMgPSByZXNvdXJjZUxvY2FsVXJsO1xuICAgICAgICAgICAgICAgIHJlc291cmNlRWxlbWVudC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlT2JqZWN0VVJMKHJlc291cmNlTG9jYWxVcmwpO1xuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgLy/ojrflj5bpn7PpopHml7bplb9cbiAgICAgICAgICAgICAgICAvLyAgcmVzQXVkaW8xTGVuZ2g9cmVzb3VyY2VFbGVtZW50LmR1cmF0aW9uO1xuICAgICAgICAgICAgICAgIC8vICBjb25zb2xlLmxvZyhyZXNBdWRpbzFMZW5naCk7XG4gICAgICAgICAgICAgICAgLy8gIGNvbnNvbGUubG9nKCQoXCIjcmVzb3VyY2VUaW1lXCIpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v5aaC5p6c5piv6K+V5ZCs6Z+z6aKRXG4gICAgICAgICAgICBpZiAocmVzVHlwZUNsYXNzID09IFwiQXVkaW8yXCIpIHtcbiAgICAgICAgICAgICAgICBmaWxlQXVkaW8yU2l6ZSA9IGZpbGVTaXplO1xuICAgICAgICAgICAgICAgIHZhciB0cnlFbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ0cnlUaW1lXCIpO1xuICAgICAgICAgICAgICAgIHRyeUVsZW1lbnQuc3JjID0gcmVzb3VyY2VMb2NhbFVybDtcbiAgICAgICAgICAgICAgICB0cnlFbGVtZW50Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVPYmplY3RVUkwocmVzb3VyY2VMb2NhbFVybCk7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZmlsZS5uYW1lKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coZmlsZVNpemUpO1xuICAgICAgICAgICAgLy/lpoLmnpzmmK/pn7PpopFcbiAgICAgICAgICAgIGlmIChyZXNUeXBlID09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygkKCcjYXVkaW9VUkwnK3Jlc1R5cGVDbGFzcykpO1xuICAgICAgICAgICAgICAgICQoJyNhdWRpb1VSTCcrcmVzVHlwZUNsYXNzKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgJChcIi51cGxvYWRCb3hcIityZXNUeXBlQ2xhc3MpLmZhZGVJbigzMDApO1xuICAgICAgICAgICAgICAgIC8vIOWIneWni+WMluaWh+S7tuS7peWPiui/m+W6puadoVxuICAgICAgICAgICAgICAgICQoXCIudXBsb2FkXCIgKyByZXNUeXBlQ2xhc3MgKyBcIk5hbWVcIikuaHRtbChmaWxlLm5hbWUpO1xuICAgICAgICAgICAgICAgICQoXCIudXBsb2FkXCIgKyByZXNUeXBlQ2xhc3MgKyBcIlNpemUgc3BhblwiKS5odG1sKGZpbGVTaXplKTtcbiAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFBMaW5lXCIgKyByZXNUeXBlQ2xhc3MpLnNob3coKVxuICAgICAgICAgICAgICAgICAgICAuZmluZChcIi51cGxvYWRQTGluZUFjdGl2ZVwiICsgcmVzVHlwZUNsYXNzKS5jc3MoXCJ3aWR0aFwiLCAnMCcpO1xuICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUGVyc2VudFwiICsgcmVzVHlwZUNsYXNzKS5odG1sKCcnKTtcbiAgICAgICAgICAgICAgICBpZihyZXNUeXBlQ2xhc3MgPT0gXCJBdWRpbzFcIil7Ly/mraPlvI/pn7PpopFcbiAgICAgICAgICAgICAgICAgICAgQXVkaW9OYW1lID0gZmlsZS5uYW1lO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZihyZXNUeXBlQ2xhc3MgPT0gXCJBdWRpbzJcIikgey8v6K+V5ZCs6Z+z6aKRXG4gICAgICAgICAgICAgICAgICAgIHRyeUF1ZGlvTmFtZSA9IGZpbGUubmFtZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyDpmZDliLbotYTmupDlnKgqTULlhoVcbiAgICAgICAgICAgIGlmICgkdXBsb2FkRmlsZS5jaGVja0ZpbGVTaXplKGZpbGUsIHJlc0xpbWl0U2l6ZSkpIHtcbiAgICAgICAgICAgICAgICAkdXBsb2FkRmlsZS51cGxvYWRSZXMoZmlsZSwgcmVzVHlwZSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNUeXBlID09ICdhdWRpbycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcHJvZ3Jlc3MgPSBwYXJzZUludChkYXRhICogMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2NvbnNvbGUubG9nKHByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFBMaW5lQWN0aXZlXCIgKyByZXNUeXBlQ2xhc3MpLmNzcyhcIndpZHRoXCIsIHByb2dyZXNzICsgJyUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFBlcnNlbnRcIiArIHJlc1R5cGVDbGFzcykudGV4dChwcm9ncmVzcyArIFwiJVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5oiQ5Yqf5Zue6LCDXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLkuIrkvKDmiJDlip/vvIFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFBlcnNlbnRcIiArIHJlc1R5cGVDbGFzcykudGV4dChcIuWujOaIkFwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXNVcmwgPSBkYXRhLmRhdGEuYWNjZXNzX3VybDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc1VybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI1wiICsgcmVzVHlwZUNsYXNzICsgXCJVcmxcIikudmFsKHJlc1VybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzVHlwZUNsYXNzID09IFwiQXVkaW8yXCIpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuZGVsZXRlVHJ5QXVkaW9cIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv5Zu+54mH6LWE5rqQ77yM5YiZ5bGV56S65Zu+54mH6aKE6KeIXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzVHlwZSA9PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8kKFwiLnByZXZpZXdQaWNcIiArIHJlc1R5cGVDbGFzcyArIFwiIGltZ1wiKS5hdHRyKFwic3JjXCIsIHJlc1VybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nm7TmjqXliqDovb3mnKzlnLDlm77niYfov5vooYzpooTop4hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnByZXZpZXdQaWNcIiArIHJlc1R5cGVDbGFzcyArIFwiIGltZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2FkKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVPYmplY3RVUkwocmVzb3VyY2VMb2NhbFVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuYXR0cihcInNyY1wiLCByZXNvdXJjZUxvY2FsVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVzVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5aSx6LSl5Zue6LCDXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwi5LiK5Lyg5aSx6LSlISEhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIrkvKDlpLHotKXvvIFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIrkvKDotYTmupDpmZDliLblnKhcIiArIHJlc0xpbWl0U2l6ZSArIFwiTULlhoXvvIFcIik7XG4gICAgICAgICAgICAgICAgJChcIi51cExvYWRcIityZXNUeXBlQ2xhc3MpLnZhbChcIlwiKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZmlsZXMpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZXNBZGQuaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy/pgInmi6nnu4Tku7bmoLflvI9cbiAgICAgICAgJCgnc2VsZWN0JykubWF0ZXJpYWxfc2VsZWN0KCk7XG4gICAgICAgIC8v5pe26Ze06YCJ5oup5Zmo5Yid5aeL5YyWXG4gICAgICAgIC8vICQoXCIjZGF0ZUlucHV0XCIpLmRhdGV0aW1lcGlja2VyKHtcbiAgICAgICAgLy8gICAgIHdlZWtTdGFydDogMSwgLy/kuIDlkajku47mmJ/mnJ/kuIDlvIDlp4tcbiAgICAgICAgLy8gICAgIG1pblZpZXc6IFwiZGF5XCIsXG4gICAgICAgIC8vICAgICBmb3JtYXQ6ICd5eXl5LW1tLWRkIGhoOjAwOjAwJyxcbiAgICAgICAgLy8gICAgIGF1dG9jbG9zZTogdHJ1ZSwgLy/pgInmi6nml6XmnJ/lkI7oh6rliqjlhbPpl61cbiAgICAgICAgLy8gICAgIHBpY2tlclBvc2l0aW9uOid0b3AtcmlnaHQnICAvL+W8ueeql+aYvuekuuWcqOi+k+WFpeahhuS4iuaWuVxuICAgICAgICAvLyB9KTtcbiAgICAgICAgLy8gJChcIiNkYXRlSW5wdXQxXCIpLmRhdGV0aW1lcGlja2VyKHtcbiAgICAgICAgLy8gICAgIHdlZWtTdGFydDogMSxcbiAgICAgICAgLy8gICAgIG1pblZpZXc6IFwiZGF5XCIsXG4gICAgICAgIC8vICAgICBmb3JtYXQ6ICd5eXl5LW1tLWRkIGhoOjAwOjAwJyxcbiAgICAgICAgLy8gICAgIGF1dG9jbG9zZTogdHJ1ZSwgLy/pgInmi6nml6XmnJ/lkI7oh6rliqjlhbPpl61cbiAgICAgICAgLy8gICAgIHBpY2tlclBvc2l0aW9uOid0b3AtcmlnaHQnXG4gICAgICAgIC8vIH0pO1xuICAgICAgICAvLyAkKFwiI2RhdGVJbnB1dDJcIikuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICAgICAvLyAgICAgd2Vla1N0YXJ0OiAxLFxuICAgICAgICAvLyAgICAgbWluVmlldzogXCJkYXlcIixcbiAgICAgICAgLy8gICAgIGZvcm1hdDogJ3l5eXktbW0tZGQgaGg6MDA6MDAnLFxuICAgICAgICAvLyAgICAgYXV0b2Nsb3NlOiB0cnVlLCAvL+mAieaLqeaXpeacn+WQjuiHquWKqOWFs+mXrVxuICAgICAgICAvLyAgICAgcGlja2VyUG9zaXRpb246J3RvcC1yaWdodCdcbiAgICAgICAgLy8gfSlcbiAgICAgICAgYWxpdmVUaW1lQ29uZmlnKFwiLmRhdGVTZXRJbnB1dFwiKTtcbiAgICAgICAgLy/ojrflj5botYTmupDnsbvlnotcbiAgICAgICAgcmVzb3VyY2VUeXBlID0gR2V0UXVlcnlTdHJpbmcoXCJ0eXBlXCIpO1xuXG4gICAgICAgIC8v6LWE5rqQ57G75Z6L77ya5Zu+54mH77yaaW1hZ2Us6Z+z6aKR77yaYXVkaW9cbiAgICAgICAgLy/otYTmupDnsbvlnovlrZDnsbvvvJpcbiAgICAgICAgICAgIC8v5q2j5byP6Z+z6aKR77yaQXVkaW8xLOivleWQrOmfs+mike+8mkF1ZGlvMixcbiAgICAgICAgICAgIC8v5bCB6Z2iOkltYWdlMSzml6Xnrb7vvJpJbWFnZTIs55u05pKt5a6j5Lyg5bCB6Z2iOkltYWdlMyzotLTniYc6SW1hZ2U0XG4gICAgICAgIC8vIOeCueWHu+aMiemSruS4iuS8oOWbvueJh1xuICAgICAgICAkKFwiLnVwTG9hZEltYWdlMVwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNVcGxvYWQodGhpcy5maWxlcywgXCJpbWFnZVwiLCBcIkltYWdlMVwiLCA1KTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIucHJldmlld1BpY0ltYWdlMVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLnVwTG9hZEltYWdlMVwiKS5jbGljaygpO1xuICAgICAgICB9KVxuICAgICAgICAkKFwiLnVwTG9hZEltYWdlMlwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNVcGxvYWQodGhpcy5maWxlcywgXCJpbWFnZVwiLCBcIkltYWdlMlwiLCA1KTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIucHJldmlld1BpY0ltYWdlMlwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLnVwTG9hZEltYWdlMlwiKS5jbGljaygpO1xuICAgICAgICB9KVxuICAgICAgICAkKFwiLnVwTG9hZEltYWdlM1wiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNVcGxvYWQodGhpcy5maWxlcywgXCJpbWFnZVwiLCBcIkltYWdlM1wiLCA1KTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIucHJldmlld1BpY0ltYWdlM1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLnVwTG9hZEltYWdlM1wiKS5jbGljaygpO1xuICAgICAgICB9KVxuICAgICAgICAkKFwiLnVwTG9hZEltYWdlNFwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNVcGxvYWQodGhpcy5maWxlcywgXCJpbWFnZVwiLCBcIkltYWdlNFwiLCA1KTtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIucHJldmlld1BpY0ltYWdlNFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLnVwTG9hZEltYWdlNFwiKS5jbGljaygpO1xuICAgICAgICB9KVxuXG4gICAgICAgIC8vIOeCueWHu+aMiemSruS4iuS8oOmfs+mikVxuICAgICAgICAvL+ato+W8j1xuICAgICAgICAkKFwiLnVwTG9hZEF1ZGlvMVwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygkKFwiI2F1ZGlvX3VybFwiKS5kdXJhdGlvbik7XG4gICAgICAgICAgICByZXNVcGxvYWQodGhpcy5maWxlcywgXCJhdWRpb1wiLCBcIkF1ZGlvMVwiLCAyMDApO1xuICAgICAgICB9KTtcbiAgICAgICAgLy/or5XlkKxcbiAgICAgICAgJChcIi51cExvYWRBdWRpbzJcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzVXBsb2FkKHRoaXMuZmlsZXMsIFwiYXVkaW9cIiwgXCJBdWRpbzJcIiwgMjAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy/or5XlkKzpn7PpopHnva7nqbpcbiAgICAgICAgJChcIi5kZWxldGVUcnlBdWRpb1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLnVwTG9hZEF1ZGlvMlwiKS52YWwoXCJcIik7XG4gICAgICAgICAgICAkKFwiLnVwbG9hZEJveEF1ZGlvMlwiKS5oaWRlKCk7XG4gICAgICAgICAgICAkKFwiI0F1ZGlvMlVybFwiKS52YWwoXCJcIik7XG4gICAgICAgICAgICAkKHRoaXMpLmhpZGUoKTtcbiAgICAgICAgICAgICQoXCIjYXVkaW9VUkxBdWRpbzJcIikucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvL+WPlua2iOS4iuS8oFxuICAgICAgICAvLyAkKFwiLnVwbG9hZENhbmNlbEExXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8gICAgICQoXCIudXBsb2FkQm94QXVkaW8xXCIpLnJlbW92ZSgpO1xuICAgICAgICAvLyAgICAgdXBsb2FkQ2FuY2VsPTE7XG4gICAgICAgIC8vIH0pXG4gICAgICAgIC8vIOmAieaLqeS7mOi0ueS4juWFjei0uVxuICAgICAgICAkKFwiLm5vdEZyZWVTZWxlY3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIi5yZXNQcml6ZVwiKS5yZW1vdmVBdHRyKFwicmVhZG9ubHlcIik7XG4gICAgICAgICAgICAkKFwiLnJlc1ByaXplXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgIHJlc291cmNlRnJlZSA9IDI7XG4gICAgICAgICAgICAkKCcjY291cnNlUmVtaW5kJykuc2hvdygpO1xuICAgICAgICB9KTtcbiAgICAgICAgJChcIi5GcmVlU2VsZWN0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIucmVzUHJpemVcIikuYXR0cihcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgICAgICAkKFwiLnJlc1ByaXplXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgJChcIi5yZXNQcml6ZVwiKS52YWwoMCk7XG4gICAgICAgICAgICByZXNvdXJjZUZyZWUgPSAxO1xuICAgICAgICAgICAgJCgnI2NvdXJzZVJlbWluZCcpLmhpZGUoKTtcbiAgICAgICAgICAgICQoJyNjb3Vyc2VSZW1pbmQgb3B0aW9uW3ZhbHVlPS0xXScpLnByb3AoJ3NlbGVjdGVkJyx0cnVlKTtcbiAgICAgICAgICAgICQoJyNwdXNoX2FoZWFkJykuY2hhbmdlKCk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgLy/lvIDor77mj5DphpJcbiAgICAgICAgcHVzaF9haGVhZCA9ICQoJyNwdXNoX2FoZWFkIG9wdGlvbjpzZWxlY3RlZCcpLnZhbCgpO1xuICAgICAgICBpZl9wdXNoID0gJCgnI2lmX3B1c2gnKS52YWwoKSB8fCAxO1xuICAgICAgICBmdW5jdGlvbiBzZXRJZlB1c2goKSB7XG4gICAgICAgICAgICBpZiggcHVzaF9haGVhZCA9PSAtMSApIHtcbiAgICAgICAgICAgICAgICBpZl9wdXNoID0gMTtcbiAgICAgICAgICAgIH0gZWxzZXtcbiAgICAgICAgICAgICAgICBpZl9wdXNoID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgJHB1c2hBaGVhZCA9ICQoJyNwdXNoX2FoZWFkJyk7XG4gICAgICAgIGlmKCRwdXNoQWhlYWQubGVuZ3RoPjApe1xuICAgICAgICAgICAgY29uc29sZS5sb2cocHVzaF9haGVhZCk7XG4gICAgICAgICAgICBzZXRJZlB1c2goKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGlmX3B1c2gpO1xuICAgICAgICAgICAgaWYoICRwdXNoQWhlYWQuZGF0YSgnc2V0dGluZycpID09IDEgKSB7IC8v55So5oi35pyq5bCG5pyN5Yqh5Y+36K6+572u5Li65pWZ6IKy6KGM5LiaXG4gICAgICAgICAgICAgICAgJHB1c2hBaGVhZC5vbignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1clNlbGVjdGVkID0gK2VsZS52YWwoKTtcblxuICAgICAgICAgICAgICAgICAgICBlbGUuZmluZCgnb3B0aW9uW3ZhbHVlPScrIHB1c2hfYWhlYWQgKyddJykucHJvcCgnc2VsZWN0ZWQnLHRydWUpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBwdXNoX2FoZWFkID09IC0xICYmIGN1clNlbGVjdGVkICE9IC0xICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR4dD0gIFwi5oKo6ZyA6KaB5Yiw5b6u5L+h5YWs5LyX5Y+35ZCO5Y+w5bCG5oKo55qE5pyN5Yqh5Y+35omA5Zyo6KGM5Lia6K6+572u5Li64oCc5pWZ6IKyL+WfueiureKAne+8jOiuvue9ruWujOaIkOWQju+8jOW8gOWQr+acjeWKoeWPt+mAmuefpeaWueWPr+ato+W4uOWPkemAgeaooeadv+a2iOaBr+OAglwiK1xuICAgICAgICAgICAgICAgICAgICAgICAgXCI8YnIvPjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPScvaGVscC9pbnN0cnVjdGlvbnMjaHA1X3d4X3NlcnZpY2UnIHN0eWxlPSdtYXJnaW4tdG9wOjEwcHg7Jz7ku4DkuYjmmK/mqKHmnb/mtojmga/vvJ88L2E+XCI7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgb3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcIuaPkOekulwiLCAvL+W8ueWHuuahhuagh+mimFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMywgLy/noa7lrpomJuWPlua2iFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+aIkeW3suiuvue9ricsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FuY2VsdGV4dDogJ+WFs+mXrScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2JsdWUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uKCl7Ly/lj5HpgIHor7fmsYLvvIzliKTmlq3nlKjmiLfmmK/lkKborr7nva7mnI3liqHlj7fooYzkuJpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KCcvaGFzX2luZHVzdHJ5Jyx7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb2RlID0gZGF0YS5yZXQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihjb2RlID09IDApe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5maW5kKCdvcHRpb25bdmFsdWU9JysgY3VyU2VsZWN0ZWQgKyddJykucHJvcCgnc2VsZWN0ZWQnLHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHB1c2hfYWhlYWQgPSBjdXJTZWxlY3RlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXRJZlB1c2goKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKua2iOaBr+aOqOmAgeW8gOWQryovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuaooeadv+a2iOaBr+aOqOmAgeW8gOWQr1wiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5peg5rOV5byA5ZCv5raI5oGv5o6o6YCB77yM6K+35oyJ54Wn5o+Q56S65L+u5pS56K6+572uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKHhociwgdGV4dCwgZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5VcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICQuYWxlcnQodHh0LCBcImN1c3RvbVwiLCBvcHRpb24pO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgLyrlhbPpl63mtojmga/mjqjpgIEqL1xuICAgICAgICAgICAgICAgICAgICAgICAgcHVzaF9haGVhZCA9IGN1clNlbGVjdGVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2V0SWZQdXNoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGUuZmluZCgnb3B0aW9uW3ZhbHVlPScrIGN1clNlbGVjdGVkICsnXScpLnByb3AoJ3NlbGVjdGVkJyx0cnVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAkcHVzaEFoZWFkLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIHB1c2hfYWhlYWQgPSArZWxlLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIHNldElmUHVzaCgpO1xuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBpZihwbGF5U3RhdGUgPT0gMCkge1xuICAgICAgICAgICAgLy8gICDpgInmi6nor63pn7PmiJbogIXpn7PpopHvvIjnm7Tmkq3vvIlcbiAgICAgICAgICAgICQoXCIudmlkZW9zU2VsZWN0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmFsaXZlVmlkZW9Cb3hcIikuc2xpZGVEb3duKDMwMCk7XG4gICAgICAgICAgICAgICAgYWxpdmVUID0gMTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGl2ZVQpO1xuICAgICAgICAgICAgICAgIFZpZGVvTmFtZSA9IG51bGw7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICQoXCIudm9pY2VTZWxlY3RcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQoXCIuYWxpdmVWaWRlb0JveFwiKS5zbGlkZVVwKDMwMCk7XG4gICAgICAgICAgICAgICAgYWxpdmVUID0gMDtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhhbGl2ZVQpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAkKFwiLmFsaXZlU2VsZWN0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmFsaXZlVmlkZW9Cb3hcIikuc2xpZGVVcCgzMDApO1xuICAgICAgICAgICAgICAgIGFsaXZlVCA9IDI7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWxpdmVUKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAvLyB9XG5cbiAgICAgICAgLy/pgInmi6nkuJPmoI/kuIrkuIvmnrZcbiAgICAgICAgJChcIi5jb2x1bW5TaG93XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNvbHVtblN0YXRlID0gMDtcbiAgICAgICAgfSk7XG4gICAgICAgICQoXCIuY29sdW1uSGlkZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb2x1bW5TdGF0ZSA9IDE7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v6YCJ5oup5pi+56S65pyf5pWwXG4gICAgICAgICQoXCIuY291bnRTaG93XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHNob3dfcmVzb3VyY2Vjb3VudCA9IDE7XG4gICAgICAgIH0pO1xuICAgICAgICAkKFwiLmNvdW50SGlkZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBzaG93X3Jlc291cmNlY291bnQgPSAwO1xuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8v54K55Ye75LiK5LiA5q2l6L+U5ZueXG4gICAgICAgICQoJy5sYXN0U3RlcEJ0bicpLmNsaWNrKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgJGdldEJhY2sgPSAkKCcjZ2V0QmFjaycpO1xuICAgICAgICBpZih1cGxvYWRDaGFubmVsVHlwZSA9PSAxKSB7XG4gICAgICAgICAgICBiYWNrVVJMID0gJy9yZXNvdXJjZV9saXN0X3BhZ2UnO1xuICAgICAgICAgICAgJGdldEJhY2suYXR0cignaHJlZicsIGJhY2tVUkwpO1xuICAgICAgICB9IGVsc2UgaWYodXBsb2FkQ2hhbm5lbFR5cGUgPT0gMikge1xuICAgICAgICAgICAgYmFja1VSTCA9ICcvcGFja2FnZV9kZXRhaWxfcGFnZT9pZD0nICsgcGFja2FnZUlkO1xuICAgICAgICAgICAgJGdldEJhY2suYXR0cignaHJlZicsIGJhY2tVUkwpO1xuICAgICAgICB9IGVsc2UgaWYodXBsb2FkQ2hhbm5lbFR5cGUgPT0gMykge1xuICAgICAgICAgICAgYmFja1VSTCA9ICcvbWVtYmVyX2RldGFpbF9wYWdlP2lkPScgKyBwYWNrYWdlSWQ7XG4gICAgICAgICAgICAkZ2V0QmFjay5hdHRyKCdocmVmJywgYmFja1VSTCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL+eCueWHu+S+p+i+ueagj+emu+W8gOaXtueahOW8ueahhlxuICAgICAgICBjaGFuZ2VTYXZlRmxhZyh0cnVlKTtcblxuXG4gICAgICAgIC8v5pyN5Yqh5Y+36YCa55+l5by55Ye655qE6YC76L6R5Yik5patXG4gICAgICAgIHZhciAkc2VydmljZVRvZ2dsZSA9ICQoJyNzZXJ2aWNlVG9nZ2xlJyk7XG4gICAgICAgIHByZXZWYWwgPSArJChcIiNzZXJ2aWNlVG9nZ2xlIDpyYWRpbzpjaGVja2VkXCIpLnZhbCgpIHx8IG51bGw7IC8v5b2T5YmN5Y2V6YCJ5qGG55qE5YC8XG4gICAgICAgIGlmKCRzZXJ2aWNlVG9nZ2xlLmxlbmd0aD4wKXtcbiAgICAgICAgICAgIGlmKCAkc2VydmljZVRvZ2dsZS5kYXRhKCdzZXR0aW5nJykgPT0gMSApIHsgLy/nlKjmiLfmnKrlsIbmnI3liqHlj7forr7nva7kuLrmlZnogrLooYzkuJpcbiAgICAgICAgICAgICAgICAkc2VydmljZVRvZ2dsZS5vbignY2xpY2snLCAnOnJhZGlvJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZWxlID0gJCh0aGlzKTtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGN1cnJWYWwgPSArZWxlLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmKCBjdXJyVmFsICE9PSBwcmV2VmFsICYmIGN1cnJWYWwgPT0gMSApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0eHQ9ICBcIuaCqOmcgOimgeWIsOW+ruS/oeWFrOS8l+WPt+WQjuWPsOWwhuaCqOeahOacjeWKoeWPt+aJgOWcqOihjOS4muiuvue9ruS4uuKAnOaVmeiCsi/ln7norq3igJ3vvIzorr7nva7lrozmiJDlkI7vvIzlvIDlkK/mnI3liqHlj7fpgJrnn6Xmlrnlj6/mraPluLjlj5HpgIHmqKHmnb/mtojmga/jgIJcIitcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiPGJyLz48YSB0YXJnZXQ9J19ibGFuaycgaHJlZj0nL2hlbHAvaW5zdHJ1Y3Rpb25zI2hwNV93eF9zZXJ2aWNlJyBzdHlsZT0nbWFyZ2luLXRvcDoxMHB4Oyc+5LuA5LmI5piv5qih5p2/5raI5oGv77yfPC9hPlwiO1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCLmj5DnpLpcIiwgLy/lvLnlh7rmoYbmoIfpophcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IDMsIC8v56Gu5a6aJiblj5bmtohcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBva3RleHQ6ICfmiJHlt7Lorr7nva4nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbmNlbHRleHQ6ICflhbPpl60nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGljb246ICdibHVlJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbigpey8v5Y+R6YCB6K+35rGC77yM5Yik5pat55So5oi35piv5ZCm6K6+572u5pyN5Yqh5Y+36KGM5LiaXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuYWpheCgnL2hhc19pbmR1c3RyeScse1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGRhdGEucmV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29kZSA9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZWYWwgPSBjdXJyVmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8q5raI5oGv5o6o6YCB5byA5ZCvKi9cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5qih5p2/5raI5oGv5o6o6YCB5byA5ZCvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLml6Dms5XlvIDlkK/mtojmga/mjqjpgIHvvIzor7fmjInnhafmj5DnpLrkv67mlLnorr7nva5cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmZhaWwoZnVuY3Rpb24oeGhyLCB0ZXh0LCBlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydCh0eHQsIFwiY3VzdG9tXCIsIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvKuWFs+mXrea2iOaBr+aOqOmAgSovXG4gICAgICAgICAgICAgICAgICAgICAgICBwcmV2VmFsID0gY3VyclZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1sncHVzaF9zdGF0ZSddID0gY3VyclZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoJyNzZXJ2aWNlVG9nZ2xlJykuZGF0YSgnc3RhdGUnLGN1cnJWYWwpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICRzZXJ2aWNlVG9nZ2xlLm9uKCdjbGljaycsICc6cmFkaW8nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgY3VyclZhbCA9IGVsZS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYoIGN1cnJWYWwgIT09IHByZXZWYWwgJiYgY3VyclZhbCA9PSAxICkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlZhbCA9IGN1cnJWYWw7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5qih5p2/5raI5oGv5o6o6YCB5byA5ZCvXCIpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcHJldlZhbCA9IGN1cnJWYWw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG4gICAgcmV0dXJuIHJlc0FkZDtcbn0pKCk7XG4iXX0=
