$(function(){manageAlive.init()});var manageAlive=function(){var e={};var a;function r(e){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("直播名称不能为空！");return false}if($formCheck.emptyString(e.summary)){baseUtils.show.redTip("直播简介不能为空！");return false}if(e.alive_type==1&&fileId==null){baseUtils.show.redTip("请上传直播资源！");return false}if(is_edit){baseUtils.show.redTip("直播资源上传中！");return false}if($formCheck.emptyString(e.img_url)){baseUtils.show.redTip("请上传您的直播封面！");return false}if($formCheck.emptyString(e.start_at)){baseUtils.show.redTip("请填入您的直播上架时间！");return false}if($formCheck.emptyString(e.zb_start_at)){baseUtils.show.redTip("请填入您的直播开始时间！");return false}if($formCheck.emptyString(e.zb_stop_at)){baseUtils.show.redTip("请填入您的直播结束时间！");return false}if(!$formCheck.checkTime(e.start_at)){baseUtils.show.redTip("直播上架时间错误");return false}if(!$formCheck.checkTime(e.zb_start_at)){baseUtils.show.redTip("直播开始时间错误");return false}if(uploadChannelType==1&&e.payment_type==2&&$formCheck.emptyString(e.piece_price)){baseUtils.show.redTip("您选择的付费形式为付费，请输入价格！");return false}if(uploadChannelType==1&&e.payment_type==2&&!$formCheck.checkNum(e.piece_price)){baseUtils.show.redTip("您的价格输入格式有误，请重新输入！");return false}if(uploadChannelType==1&&e.payment_type==2&&e.piece_price>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}return true}function t(e,a){showLoading();$.ajax(e,{type:"POST",dataType:"json",data:a,success:function(e){if(parseInt(e.code)===0){baseUtils.show.blueTip("保存成功");var a=$("#_manageAlive").val();if(a==0){sessionStorage.setItem("inviteGuestAliveId",e.alive_id)}window.location.href=backURL}else{hideLoading();baseUtils.show.redTip(e.msg);submitLimt=false}},error:function(e,a,r){hideLoading();console.error(r);baseUtils.show.redTip("网络错误，请稍后再试！");submitLimt=false}})}classArray=[];e.init=function(){aliveTimeConfig("#zb_start_at");$(".completeBtn").click(function(){var e=$.trim($(".resName").val());var a=$.trim($("#aliveAbstract").val());var i=aliveT;var s=fileId;var l=$.trim($("#zb_start_at").val());var n=$("#_aliveDuration").val();var o=videoGsize;var p=$.trim($("#Image1Url").val());var c=$.trim($("#Image3Url").val());var u=UE.getEditor("resource_desc");var f=u.getContent();var m=u.getPlainTxt();if(m.length==0){baseUtils.show.redTip("描述不能为空!");return false}var _=$.trim($(".resPrize").val())*100;$('input[name="aliveClass"]:checked').each(function(){classArray.push($(this).attr("id"))});console.log(classArray);var h=aliveState;var d=$.trim($("#dateInput").val());var v={title:e,summary:a,alive_type:i,img_url:p,alive_img_url:c,file_name:VideoName,zb_start_at:l,zb_stop_at:n,descrb:m,org_content:f,piece_price:_,state:h,start_at:d,id:GetQueryString("id")||null};var b={public_video:s,public_size_text:o};if(resourceFree){v.payment_type=resourceFree}v.if_push=if_push;if(if_push==0||if_push==1){v.push_ahead=push_ahead}if(r(v)){var g={params:v,resource_type:resourceType,upload_channel_type:uploadChannelType,package_id:packageId,resource_params:b,package_name:packageName,category_type:classArray};t(golbalUrl,g);console.log(g)}else{return false}})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZUFsaXZlLmpzIl0sIm5hbWVzIjpbIiQiLCJtYW5hZ2VBbGl2ZSIsImluaXQiLCJyZXNVcmwiLCJjaGVja0FsaXZlRm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJ0aXRsZSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJzdW1tYXJ5IiwiYWxpdmVfdHlwZSIsImZpbGVJZCIsImlzX2VkaXQiLCJpbWdfdXJsIiwic3RhcnRfYXQiLCJ6Yl9zdGFydF9hdCIsInpiX3N0b3BfYXQiLCJjaGVja1RpbWUiLCJ1cGxvYWRDaGFubmVsVHlwZSIsInBheW1lbnRfdHlwZSIsInBpZWNlX3ByaWNlIiwiY2hlY2tOdW0iLCJtYXhJbnB1dFByaWNlIiwic3VibWl0Rm9ybSIsInVybCIsImFsbFBhcmFtcyIsInNob3dMb2FkaW5nIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImRhdGEiLCJzdWNjZXNzIiwicGFyc2VJbnQiLCJjb2RlIiwiYmx1ZVRpcCIsInBhZ2VUeXBlIiwidmFsIiwic2Vzc2lvblN0b3JhZ2UiLCJzZXRJdGVtIiwiYWxpdmVfaWQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJiYWNrVVJMIiwiaGlkZUxvYWRpbmciLCJtc2ciLCJzdWJtaXRMaW10IiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJjb25zb2xlIiwiY2xhc3NBcnJheSIsImFsaXZlVGltZUNvbmZpZyIsImNsaWNrIiwidHJpbSIsImFsaXZlVHlwZSIsImFsaXZlVCIsIkFsaXZlRmlsZUlkIiwiemJTdGFydEF0IiwiYWxpdmVEdXJhdGlvbiIsIkFsaXZlU2l6ZSIsInZpZGVvR3NpemUiLCJpbWFnZTFVcmwiLCJpbWFnZTNVcmwiLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwib3JnQ29udGVudCIsImdldENvbnRlbnQiLCJkZXNjcmliIiwiZ2V0UGxhaW5UeHQiLCJsZW5ndGgiLCJyZXNQcml6ZSIsImVhY2giLCJwdXNoIiwidGhpcyIsImF0dHIiLCJsb2ciLCJzdGF0ZSIsImFsaXZlU3RhdGUiLCJzdGFydEF0IiwicmVzSW5mbyIsImFsaXZlX2ltZ191cmwiLCJmaWxlX25hbWUiLCJWaWRlb05hbWUiLCJkZXNjcmIiLCJvcmdfY29udGVudCIsImlkIiwiR2V0UXVlcnlTdHJpbmciLCJyZXNvdXJjZVBhcmFtcyIsInB1YmxpY192aWRlbyIsInB1YmxpY19zaXplX3RleHQiLCJyZXNvdXJjZUZyZWUiLCJpZl9wdXNoIiwicHVzaF9haGVhZCIsInBhcmFtcyIsInJlc291cmNlX3R5cGUiLCJyZXNvdXJjZVR5cGUiLCJ1cGxvYWRfY2hhbm5lbF90eXBlIiwicGFja2FnZV9pZCIsInBhY2thZ2VJZCIsInJlc291cmNlX3BhcmFtcyIsInBhY2thZ2VfbmFtZSIsInBhY2thZ2VOYW1lIiwiY2F0ZWdvcnlfdHlwZSIsImdvbGJhbFVybCJdLCJtYXBwaW5ncyI6IkFBSUFBLEVBQUUsV0FDRUMsWUFBWUMsUUFFaEIsSUFBSUQsYUFBYyxXQUNkLEdBQUlBLEtBRUosSUFBSUUsRUFHSixTQUFTQyxHQUFlQyxHQUNwQixHQUFJQyxXQUFXQyxZQUFZRixFQUFLRyxPQUFRLENBQ3BDQyxVQUFVQyxLQUFLQyxPQUFPLFlBQ3RCLE9BQU8sT0FFWCxHQUFJTCxXQUFXQyxZQUFZRixFQUFLTyxTQUFVLENBQ3RDSCxVQUFVQyxLQUFLQyxPQUFPLFlBQ3RCLE9BQU8sT0FFWCxHQUFJTixFQUFLUSxZQUFZLEdBQUlDLFFBQVUsS0FBTyxDQUN0Q0wsVUFBVUMsS0FBS0MsT0FBTyxXQUN0QixPQUFPLE9BRVgsR0FBSUksUUFBUyxDQUNUTixVQUFVQyxLQUFLQyxPQUFPLFdBQ3RCLE9BQU8sT0FFWCxHQUFJTCxXQUFXQyxZQUFZRixFQUFLVyxTQUFVLENBQ3RDUCxVQUFVQyxLQUFLQyxPQUFPLGFBQ3RCLE9BQU8sT0FFWCxHQUFJTCxXQUFXQyxZQUFZRixFQUFLWSxVQUFXLENBQ3ZDUixVQUFVQyxLQUFLQyxPQUFPLGVBQ3RCLE9BQU8sT0FFWCxHQUFJTCxXQUFXQyxZ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QUVSQyxXQUFXOEMsRUFFWDNDLFFBQVNrRCxFQUVUb0IsY0FBZW5CLEVBRWZvQixVQUFXQyxVQUVYdEUsWUFBWTRDLEVBRVozQyxXQUFXNEMsRUFFWDBCLE9BQVFoQixFQUVSaUIsWUFBYW5CLEVBRWJoRCxZQUFhcUQsRUFFYk0sTUFBTUEsRUFFTmpFLFNBQVVtRSxFQUVWTyxHQUFJQyxlQUFlLE9BQVMsS0FHaEMsSUFBSUMsSUFFQUMsYUFBY2pDLEVBRWRrQyxpQkFBa0IvQixFQUd0QixJQUFHZ0MsYUFBYyxDQUNiWCxFQUFRL0QsYUFBZTBFLGFBSTNCWCxFQUFRWSxRQUFVQSxPQUNsQixJQUFHQSxTQUFTLEdBQUtBLFNBQVMsRUFBRSxDQUN4QlosRUFBUWEsV0FBYUEsV0FJekIsR0FBSTlGLEVBQWVpRixHQUFVLENBQ3pCLEdBQUl6RCxJQUNBdUUsT0FBUWQsRUFDUmUsY0FBZUMsYUFDZkMsb0JBQXFCakYsa0JBQ3JCa0YsV0FBWUMsVUFDWkMsZ0JBQWlCWixFQUNqQmEsYUFBY0MsWUFDZEMsY0FBY3JELFdBRWxCN0IsR0FBV21GLFVBQVdqRixFQUN0QjBCLFNBQVEyQixJQUFJckQsT0FDVCxDQUNILE1BQU8sVUFLbkIsT0FBTzNCIiwiZmlsZSI6Im1hbmFnZUFsaXZlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGpzZXJrIG9uIDIwMTcvMy8yMy5cbiAqL1xuXG4kKGZ1bmN0aW9uICgpIHtcbiAgICBtYW5hZ2VBbGl2ZS5pbml0KCk7XG59KTtcbnZhciBtYW5hZ2VBbGl2ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWFuYWdlQWxpdmUgPSB7fTtcblxuICAgIHZhciByZXNVcmw7XG5cbiAgICAvL+ajgOafpeebtOaSreaPkOS6pOihqOWNlVxuICAgIGZ1bmN0aW9uIGNoZWNrQWxpdmVGb3JtKGluZm8pIHtcbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby50aXRsZSkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSreWQjeensOS4jeiDveS4uuepuu+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnN1bW1hcnkpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3nroDku4vkuI3og73kuLrnqbrvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGluZm8uYWxpdmVfdHlwZT09MSYmKGZpbGVJZCA9PSBudWxsKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35LiK5Lyg55u05pKt6LWE5rqQ77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmIChpc19lZGl0KSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3otYTmupDkuIrkvKDkuK3vvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5pbWdfdXJsKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35LiK5Lyg5oKo55qE55u05pKt5bCB6Z2i77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7floavlhaXmgqjnmoTnm7Tmkq3kuIrmnrbml7bpl7TvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby56Yl9zdGFydF9hdCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+Whq+WFpeaCqOeahOebtOaSreW8gOWni+aXtumXtO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnpiX3N0b3BfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7floavlhaXmgqjnmoTnm7Tmkq3nu5PmnZ/ml7bpl7TvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLnN0YXJ0X2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt5LiK5p625pe26Ze06ZSZ6K+vXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja1RpbWUoaW5mby56Yl9zdGFydF9hdCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSreW8gOWni+aXtumXtOmUmeivr1wiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBsb2FkQ2hhbm5lbFR5cGU9PTEgJiYgaW5mby5wYXltZW50X3R5cGUgPT0gMiAmJiAkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8ucGllY2VfcHJpY2UpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmgqjpgInmi6nnmoTku5jotLnlvaLlvI/kuLrku5jotLnvvIzor7fovpPlhaXku7fmoLzvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHVwbG9hZENoYW5uZWxUeXBlPT0xICYmIGluZm8ucGF5bWVudF90eXBlID09IDIgJiYgISRmb3JtQ2hlY2suY2hlY2tOdW0oaW5mby5waWVjZV9wcmljZSkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaCqOeahOS7t+agvOi+k+WFpeagvOW8j+acieivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZih1cGxvYWRDaGFubmVsVHlwZT09IDEgJiYgaW5mby5wYXltZW50X3R5cGU9PSAyICYmIGluZm8ucGllY2VfcHJpY2UgPiBiYXNlVXRpbHMubWF4SW5wdXRQcmljZSAqIDEwMCl7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLku7fmoLzkuI3og73lpKfkuo4gXCIgKyBiYXNlVXRpbHMubWF4SW5wdXRQcmljZSArIFwiIOWFg1wiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy/mj5DkuqTkv6Hmga9cbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKHVybCwgYWxsUGFyYW1zKSB7XG4gICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICQuYWpheCh1cmwsIHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOmFsbFBhcmFtcyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoZGF0YS5jb2RlKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5L+d5a2Y5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICB2YXIgcGFnZVR5cGUgPSAkKFwiI19tYW5hZ2VBbGl2ZVwiKS52YWwoKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhZ2VUeXBlID09IDApIHsgICAgLy/mlrDlop7nm7Tmkq1cbiAgICAgICAgICAgICAgICAgICAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oXCJpbnZpdGVHdWVzdEFsaXZlSWRcIiwgZGF0YS5hbGl2ZV9pZCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBiYWNrVVJMO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0TGltdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLHN0YXR1cyxlcnIpIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xuICAgICAgICAgICAgICAgIHN1Ym1pdExpbXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvL+e9ruepuuWIhuexu+aVsOe7hFxuICAgIGNsYXNzQXJyYXk9W107XG5cbiAgICBtYW5hZ2VBbGl2ZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGFsaXZlVGltZUNvbmZpZyhcIiN6Yl9zdGFydF9hdFwiKTtcbiAgICAgICAgLy8gYWxpdmVUaW1lQ29uZmlnKFwiI3piX3N0b3BfYXRcIik7XG5cbiAgICAgICAgLy8g5o+Q5Lqk55u05pKt6KGo5Y2VXG4gICAgICAgICQoXCIuY29tcGxldGVCdG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAvL+iOt+WPluebtOaSreihqOWNleaVsOaNrlxuICAgICAgICAgICAgLy/nm7Tmkq3lkI3np7BcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICQudHJpbSgkKFwiLnJlc05hbWVcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreeugOS7i1xuICAgICAgICAgICAgdmFyIHN1bW1hcnk9JC50cmltKCQoXCIjYWxpdmVBYnN0cmFjdFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt57G75Z6LXG4gICAgICAgICAgICB2YXIgYWxpdmVUeXBlPWFsaXZlVDtcblxuICAgICAgICAgICAgLy/nm7Tmkq3ngrnmkq1pZFxuICAgICAgICAgICAgdmFyIEFsaXZlRmlsZUlkID0gZmlsZUlkO1xuXG4gICAgICAgICAgICAvL+ebtOaSreW8gOWni+aXtumXtFxuICAgICAgICAgICAgdmFyIHpiU3RhcnRBdCA9ICQudHJpbSgkKFwiI3piX3N0YXJ0X2F0XCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3ml7bplb9cbiAgICAgICAgICAgIHZhciBhbGl2ZUR1cmF0aW9uID0gJChcIiNfYWxpdmVEdXJhdGlvblwiKS52YWwoKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3lpKflsI9cbiAgICAgICAgICAgIHZhciBBbGl2ZVNpemUgPSB2aWRlb0dzaXplO1xuXG4gICAgICAgICAgICAvL+ebtOaSreWwgemdouWcsOWdgFxuICAgICAgICAgICAgdmFyIGltYWdlMVVybCA9ICQudHJpbSgkKFwiI0ltYWdlMVVybFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt6LS054mH5Zyw5Z2AXG4gICAgICAgICAgICB2YXIgaW1hZ2UzVXJsID0gJC50cmltKCQoXCIjSW1hZ2UzVXJsXCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3ljp/lp4vlhoXlrrnor6bmg4VcbiAgICAgICAgICAgIHZhciB1ZSA9IFVFLmdldEVkaXRvcigncmVzb3VyY2VfZGVzYycpO1xuICAgICAgICAgICAgdmFyIG9yZ0NvbnRlbnQgPSB1ZS5nZXRDb250ZW50KCk7XG5cbiAgICAgICAgICAgIC8v55u05pKt5YaF5a655o+P6L+wXG4gICAgICAgICAgICB2YXIgZGVzY3JpYiA9IHVlLmdldFBsYWluVHh0KCk7XG4gICAgICAgICAgICBpZiAoZGVzY3JpYi5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5o+P6L+w5LiN6IO95Li656m6IScpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvL+S7mOi0ueS7t+agvFxuICAgICAgICAgICAgdmFyIHJlc1ByaXplID0gJC50cmltKCQoXCIucmVzUHJpemVcIikudmFsKCkpICogMTAwO1xuXG4gICAgICAgICAgICAvL+ebtOaSremAieaLqeWIhuexu1xuICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT1cImFsaXZlQ2xhc3NcIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBjbGFzc0FycmF5LnB1c2goJCh0aGlzKS5hdHRyKCdpZCcpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coY2xhc3NBcnJheSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt54q25oCBXG4gICAgICAgICAgICB2YXIgc3RhdGU9YWxpdmVTdGF0ZTtcbiAgICAgICAgICAgIC8v5LiK5p625pe26Ze0XG4gICAgICAgICAgICB2YXIgc3RhcnRBdCA9ICQudHJpbSgkKFwiI2RhdGVJbnB1dFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt5Y2V5ZOB5LiK5Lyg5L+h5oGvXG4gICAgICAgICAgICB2YXIgcmVzSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAvLyDnm7Tmkq3lkI3np7BcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nroDku4tcbiAgICAgICAgICAgICAgICBzdW1tYXJ5OnN1bW1hcnksXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nsbvlnotcbiAgICAgICAgICAgICAgICBhbGl2ZV90eXBlOmFsaXZlVHlwZSxcbiAgICAgICAgICAgICAgICAvLyAgIOebtOaSreWwgemdouWcsOWdgFxuICAgICAgICAgICAgICAgIGltZ191cmw6IGltYWdlMVVybCxcbiAgICAgICAgICAgICAgICAvL+ebtOaSreWuo+S8oOWwgemdouWcsOWdgFxuICAgICAgICAgICAgICAgIGFsaXZlX2ltZ191cmw6IGltYWdlM1VybCxcbiAgICAgICAgICAgICAgICAvL+inhumikeWQjeensFxuICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogVmlkZW9OYW1lLFxuICAgICAgICAgICAgICAgIC8v55u05pKt5byA5aeL5pe26Ze0XG4gICAgICAgICAgICAgICAgemJfc3RhcnRfYXQ6emJTdGFydEF0LFxuICAgICAgICAgICAgICAgIC8v55u05pKt57uT5p2f5pe26Ze0XG4gICAgICAgICAgICAgICAgemJfc3RvcF9hdDphbGl2ZUR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIC8v55u05pKt6K+m5oOFXG4gICAgICAgICAgICAgICAgZGVzY3JiOiBkZXNjcmliLFxuICAgICAgICAgICAgICAgIC8v5Y6f5aeL5paH5pysXG4gICAgICAgICAgICAgICAgb3JnX2NvbnRlbnQ6IG9yZ0NvbnRlbnQsXG4gICAgICAgICAgICAgICAgLy/ku5jotLnku7fmoLxcbiAgICAgICAgICAgICAgICBwaWVjZV9wcmljZTogcmVzUHJpemUsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nirbmgIFcbiAgICAgICAgICAgICAgICBzdGF0ZTpzdGF0ZSxcbiAgICAgICAgICAgICAgICAvL+S4iuaetuaXtumXtFxuICAgICAgICAgICAgICAgIHN0YXJ0X2F0OiBzdGFydEF0LFxuICAgICAgICAgICAgICAgIC8vaWRcbiAgICAgICAgICAgICAgICBpZDogR2V0UXVlcnlTdHJpbmcoJ2lkJykgfHwgbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8v55u05pKt6aKd5aSW5L+h5oGvXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2VQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLy/kupHngrnmkq3nm7Tmkq1pZFxuICAgICAgICAgICAgICAgIHB1YmxpY192aWRlbzogQWxpdmVGaWxlSWQsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3lpKflsI9cbiAgICAgICAgICAgICAgICBwdWJsaWNfc2l6ZV90ZXh0OiBBbGl2ZVNpemVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v5piv5ZCm5LuY6LS577yIMeihqOekuuWFjei0ue+8jDLooajnpLrljZXnrJTvvIlcbiAgICAgICAgICAgIGlmKHJlc291cmNlRnJlZSkge1xuICAgICAgICAgICAgICAgIHJlc0luZm8ucGF5bWVudF90eXBlID0gcmVzb3VyY2VGcmVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+ebtOaSreaPkOmGklxuICAgICAgICAgICAgcmVzSW5mby5pZl9wdXNoID0gaWZfcHVzaDtcbiAgICAgICAgICAgIGlmKGlmX3B1c2g9PTAgfHwgaWZfcHVzaD09MSl7XG4gICAgICAgICAgICAgICAgcmVzSW5mby5wdXNoX2FoZWFkID0gcHVzaF9haGVhZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy/ojrflj5booajljZXkuK3nmoTmlbDmja5cbiAgICAgICAgICAgIGlmIChjaGVja0FsaXZlRm9ybShyZXNJbmZvKSkge1xuICAgICAgICAgICAgICAgIHZhciBhbGxQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogcmVzSW5mbyxcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfdHlwZTogcmVzb3VyY2VUeXBlLFxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRfY2hhbm5lbF90eXBlOiB1cGxvYWRDaGFubmVsVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcGFja2FnZV9pZDogcGFja2FnZUlkLFxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV9wYXJhbXM6IHJlc291cmNlUGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX25hbWU6IHBhY2thZ2VOYW1lLFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeV90eXBlOmNsYXNzQXJyYXlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oZ29sYmFsVXJsLCBhbGxQYXJhbXMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsbFBhcmFtcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gbWFuYWdlQWxpdmU7XG59KCk7XG4iXX0=
