var search_content;var order_attr;var generate_type;var timeRange={start:"",end:""};$(document).ready(function(){reBack();$("select[id='generate_type']").val(getUrlParam("generate_type")==null||getUrlParam("generate_type")==""?"":getUrlParam("generate_type"));setTopUrlCookie("payadmin_listop","财务管理");keyEnter($("#pay_search_btn"));$("tbody tr").mouseover(function(){$(this).css({"background-color":"#f5f5f5"})}).mouseout(function(){$(this).css({"background-color":"#fff"})});$(".datetimepicker-months").find(".month").click(function(){return false});$("#export_time").on("click",function(){if($(".datetimepicker-days").css("display")=="block"){$(".datetimepicker-days").find(".switch").trigger("click")}if($(".datetimepicker").css("display")=="block"){}});var e=new pickerDateRange("SelectData",{isTodayValid:true,defaultText:" ~ ",inputTrigger:"optional",theme:"ta",success:function(e){timeRange={start:e.startDate,end:e.endDate};updateTime(timeRange)}});$("#SelectRange").on("click","li",function(e){var t=$(this),a=t.data("type"),r=t.text();if(a=="all"){timeRange={start:"",end:""}}else if(a=="nowMonth"){timeRange={start:getNowMonth(),end:getNowDay()}}updateTime(timeRange)});$("#optional").click(function(){$("#dropdown-toggle").dropdown("toggle")});$("#SelectData").off("click").text("全部记录");reBack();updateTime(timeRange)});function updateTime(e){$("#startTime").val(e.start);$("#endTime").val(e.end);if(e.start&&e.start!="2016"){$("#SelectData").text(e.start+" ~ "+e.end)}else{$("#SelectData").text("全部记录")}}function reBack(){var e=GetQueryString("search_content");$("#search_content").val(e||"");var t=GetQueryString("search_type");if(t){$("#search_type option[value="+t+"]").prop("selected",true)}var a=GetQueryString("generate_type");if(a){$("#generate_type option[value="+a+"]").prop("selected",true)}var r=GetQueryString("start_time"),i=GetQueryString("end_time");timeRange={start:r||"",end:i||""}}function deletePurchase(e,t,a,r,i){window.wxc.xcConfirm("<div class='msgdiv'>仅删除记录，不会自动退款<br />您确定要删除吗?</div>","confirm",{onOk:function(){deletePurchaser(e,t,a,r,i)}})}function deletePurchaser(e,t,a,r,i){showLoading();var o={};o["user_id"]=e;o["payment_type"]=t;o["resource_type"]=a;o["product_id"]=r;o["resource_id"]=i;$.post("/delete_purchase",o,function(e){hideLoading();var t=e.code;var a=e.msg;if(t==0){baseUtils.show.blueTip(a,function(){window.location.reload()},1500)}else{baseUtils.show.redTip(a)}})}function jumpDetail(e){resetUrl("/customerdetail?userId="+e)}function exportOrderRecords(){$("#ExportModal").modal("show")}function exportorderToExcel(){showLoading();var e=$("#export_time").val();var t={};t["export_time"]=e;if(e!=""){var a="/export_order_excel?export_time="+e;window.location.href=a;hideLoading();$("#ExportModal").modal("hide")}else{baseUtils.show.redTip("请检查时间选择是否正确")}}function exportRecords(){$("#ExportModal").modal("show")}function exportToExcel(){showLoading();var e=$("#export_time").val();var t=null;var a=0;var r=$("[name='selectOffice']");if(r){for(var i=0;i<r.length;i++){if(r[i].checked){t=r[i].value;if(t==1){a=2003}}}}var o={};o["export_time"]=e;if(e!=""){var n="/excel/purchase?export_time="+e+"&&version="+a;window.location.href=n;hideLoading();$("#ExportModal").modal("hide")}else{baseUtils.show.redTip("请检查时间选择是否正确")}}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInBheUFkbWluLmpzIl0sIm5hbWVzIjpbInNlYXJjaF9jb250ZW50Iiwib3JkZXJfYXR0ciIsImdlbmVyYXRlX3R5cGUiLCJ0aW1lUmFuZ2UiLCJzdGFydCIsImVuZCIsIiQiLCJkb2N1bWVudCIsInJlYWR5IiwicmVCYWNrIiwidmFsIiwiZ2V0VXJsUGFyYW0iLCJzZXRUb3BVcmxDb29raWUiLCJrZXlFbnRlciIsIm1vdXNlb3ZlciIsInRoaXMiLCJjc3MiLCJiYWNrZ3JvdW5kLWNvbG9yIiwibW91c2VvdXQiLCJmaW5kIiwiY2xpY2siLCJvbiIsInRyaWdnZXIiLCJkYXRhUmFuZ2VJbnN0YW5jZSIsInBpY2tlckRhdGVSYW5nZSIsImlzVG9kYXlWYWxpZCIsImRlZmF1bHRUZXh0IiwiaW5wdXRUcmlnZ2VyIiwidGhlbWUiLCJzdWNjZXNzIiwib2JqIiwic3RhcnREYXRlIiwiZW5kRGF0ZSIsInVwZGF0ZVRpbWUiLCJlIiwiZWxlIiwidHlwZSIsImRhdGEiLCJ0ZXh0IiwiZ2V0Tm93TW9udGgiLCJnZXROb3dEYXkiLCJkcm9wZG93biIsIm9mZiIsInRpbWUiLCJHZXRRdWVyeVN0cmluZyIsInNlYXJjaF90eXBlIiwicHJvcCIsInN0YXJ0VGltZSIsImVuZFRpbWUiLCJkZWxldGVQdXJjaGFzZSIsInVzZXJfaWQiLCJwYXltZW50X3R5cGUiLCJyZXNvdXJjZV90eXBlIiwicHJvZHVjdF9pZCIsInJlc291cmNlX2lkIiwid2luZG93Iiwid3hjIiwieGNDb25maXJtIiwib25PayIsImRlbGV0ZVB1cmNoYXNlciIsInNob3dMb2FkaW5nIiwiYWxsUGFyYW1zIiwicG9zdCIsInJlc3VsdCIsImhpZGVMb2FkaW5nIiwiY29kZSIsIm1zZyIsImJhc2VVdGlscyIsInNob3ciLCJibHVlVGlwIiwibG9jYXRpb24iLCJyZWxvYWQiLCJyZWRUaXAiLCJqdW1wRGV0YWlsIiwiaW5mbyIsInJlc2V0VXJsIiwiZXhwb3J0T3JkZXJSZWNvcmRzIiwibW9kYWwiLCJleHBvcnRvcmRlclRvRXhjZWwiLCJleHBvcnRfdGltZSIsIlBhcmFtcyIsInVybCIsImhyZWYiLCJleHBvcnRSZWNvcmRzIiwiZXhwb3J0VG9FeGNlbCIsImNoa09ianMiLCJPZmZpY2UyMDAzIiwiaSIsImxlbmd0aCIsImNoZWNrZWQiLCJ2YWx1ZSJdLCJtYXBwaW5ncyI6IkFBQ0EsR0FBSUEsZUFDSixJQUFJQyxXQUNKLElBQUlDLGNBQ0osSUFBSUMsWUFDQUMsTUFBTyxHQUNQQyxJQUFLLEdBRVRDLEdBQUVDLFVBQVVDLE1BQU0sV0FDZEMsUUFHQUgsR0FBRSw4QkFBOEJJLElBQUtDLFlBQVksa0JBQWtCLE1BQVNBLFlBQVksa0JBQWtCLEdBQU0sR0FBSUEsWUFBWSxpQkFFaElDLGlCQUFnQixrQkFBa0IsT0FDbENDLFVBQVNQLEVBQUUsbUJBQ1hBLEdBQUUsWUFBWVEsVUFBVSxXQUVwQlIsRUFBRVMsTUFBTUMsS0FBS0MsbUJBQW1CLGNBQ2pDQyxTQUFTLFdBRVJaLEVBQUVTLE1BQU1DLEtBQUtDLG1CQUFtQixVQUlwQ1gsR0FBRSwwQkFBMEJhLEtBQUssVUFBVUMsTUFBTSxXQUM3QyxNQUFPLFFBR1hkLEdBQUUsZ0JBQWdCZSxHQUFHLFFBQVMsV0FDMUIsR0FBR2YsRUFBRSx3QkFBd0JVLElBQUksWUFBWSxRQUFRLENBQ2pEVixFQUFFLHdCQUF3QmEsS0FBSyxXQUFXRyxRQUFRLFNBR3RELEdBQUdoQixFQUFFLG1CQUFtQlUsSUFBSSxZQUFZLFFBQVEsSUFPcEQsSUFBSU8sR0FBb0IsR0FBSUMsaUJBQWdCLGNBQ3hDQyxhQUFlLEtBQ2ZDLFlBQWMsTUFDZEMsYUFBZSxXQUNmQyxNQUFRLEtBQ1JDLFFBQVUsU0FBU0MsR0FDZjNCLFdBQ0lDLE1BQU8wQixFQUFJQyxVQUNYMUIsSUFBS3lCLEVBQUlFLFFBRWJDLFlBQVc5QixhQUduQkcsR0FBRSxnQkFBZ0JlLEdBQUcsUUFBUyxLQUFNLFNBQVNhLEdBQ3pDLEdBQUlDLEdBQU03QixFQUFFUyxNQUNScUIsRUFBT0QsRUFBSUUsS0FBSyxRQUNoQkMsRUFBT0gs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QVF2RCxFQUFJeUQsR0FBR0csS0FDWCxJQUFHTCxHQUFTLEVBQUUsQ0FDVkMsRUFBVyxRQU0vQixHQUFJTixLQUNKQSxHQUFPLGVBQWlCRCxDQU14QixJQUFHQSxHQUFlLEdBQUcsQ0FHakIsR0FBSUUsR0FBTSwrQkFBK0JGLEVBQVksYUFBYU8sQ0FDbEUvQixRQUFPZSxTQUFTWSxLQUFPRCxDQUN2QmpCLGNBQ0ExRCxHQUFFLGdCQUFnQnVFLE1BQU0sWUFDdkIsQ0FDRFYsVUFBVUMsS0FBS0ksT0FBTyIsImZpbGUiOiJwYXlBZG1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG52YXIgc2VhcmNoX2NvbnRlbnQ7XHJcbnZhciBvcmRlcl9hdHRyO1xyXG52YXIgZ2VuZXJhdGVfdHlwZTtcclxudmFyIHRpbWVSYW5nZSA9IHtcclxuICAgIHN0YXJ0OiAnJyxcclxuICAgIGVuZDogJydcclxufVxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICByZUJhY2soKTtcclxuXHJcbiAgICAvL+Whq+WFpeaQnOe0ouWAvFxyXG4gICAgJChcInNlbGVjdFtpZD0nZ2VuZXJhdGVfdHlwZSddXCIpLnZhbCgoZ2V0VXJsUGFyYW0oXCJnZW5lcmF0ZV90eXBlXCIpPT1udWxsICB8fCBnZXRVcmxQYXJhbShcImdlbmVyYXRlX3R5cGVcIik9PScnKSA/ICcnIDpnZXRVcmxQYXJhbShcImdlbmVyYXRlX3R5cGVcIikpO1xyXG5cclxuICAgIHNldFRvcFVybENvb2tpZSgncGF5YWRtaW5fbGlzdG9wJywn6LSi5Yqh566h55CGJyk7XHJcbiAgICBrZXlFbnRlcigkKCcjcGF5X3NlYXJjaF9idG4nKSk7XHJcbiAgICAkKFwidGJvZHkgdHJcIikubW91c2VvdmVyKGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICAkKHRoaXMpLmNzcyh7J2JhY2tncm91bmQtY29sb3InOicjZjVmNWY1J30pO1xyXG4gICAgfSkubW91c2VvdXQoZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgICQodGhpcykuY3NzKHsnYmFja2dyb3VuZC1jb2xvcic6JyNmZmYnfSk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgJCgnLmRhdGV0aW1lcGlja2VyLW1vbnRocycpLmZpbmQoJy5tb250aCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9KTtcclxuXHJcbiAgICAkKCcjZXhwb3J0X3RpbWUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgaWYoJCgnLmRhdGV0aW1lcGlja2VyLWRheXMnKS5jc3MoJ2Rpc3BsYXknKT09J2Jsb2NrJyl7XHJcbiAgICAgICAgICAgICQoJy5kYXRldGltZXBpY2tlci1kYXlzJykuZmluZCgnLnN3aXRjaCcpLnRyaWdnZXIoXCJjbGlja1wiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKCQoJy5kYXRldGltZXBpY2tlcicpLmNzcygnZGlzcGxheScpPT0nYmxvY2snKXtcclxuICAgICAgICAgICAgLy9hbGVydCgnb2shIScpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgdmFyIGRhdGFSYW5nZUluc3RhbmNlID0gbmV3IHBpY2tlckRhdGVSYW5nZSgnU2VsZWN0RGF0YScsIHsgLy/liJ3lp4vljJbml7bpl7Tmj5Lku7ZcclxuICAgICAgICBpc1RvZGF5VmFsaWQgOiB0cnVlLFxyXG4gICAgICAgIGRlZmF1bHRUZXh0IDogJyB+ICcsXHJcbiAgICAgICAgaW5wdXRUcmlnZ2VyIDogJ29wdGlvbmFsJyxcclxuICAgICAgICB0aGVtZSA6ICd0YScsXHJcbiAgICAgICAgc3VjY2VzcyA6IGZ1bmN0aW9uKG9iaikge1xyXG4gICAgICAgICAgICB0aW1lUmFuZ2UgPSB7XHJcbiAgICAgICAgICAgICAgICBzdGFydDogb2JqLnN0YXJ0RGF0ZSxcclxuICAgICAgICAgICAgICAgIGVuZDogb2JqLmVuZERhdGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB1cGRhdGVUaW1lKHRpbWVSYW5nZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKCcjU2VsZWN0UmFuZ2UnKS5vbignY2xpY2snLCAnbGknLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgdmFyIGVsZSA9ICQodGhpcyksXHJcbiAgICAgICAgICAgIHR5cGUgPSBlbGUuZGF0YSgndHlwZScpLFxyXG4gICAgICAgICAgICB0ZXh0ID0gZWxlLnRleHQoKTtcclxuICAgICAgICBpZih0eXBlID09ICdhbGwnKSB7XHJcbiAgICAgICAgICAgIHRpbWVSYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiAnJyxcclxuICAgICAgICAgICAgICAgIGVuZDogJydcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGVsc2UgaWYodHlwZSA9PSAnbm93TW9udGgnKSB7XHJcbiAgICAgICAgICAgIHRpbWVSYW5nZSA9IHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0OiBnZXROb3dNb250aCgpLFxyXG4gICAgICAgICAgICAgICAgZW5kOiBnZXROb3dEYXkoKVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB1cGRhdGVUaW1lKHRpbWVSYW5nZSk7XHJcbiAgICB9KTtcclxuICAgICQoJyNvcHRpb25hbCcpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICQoJyNkcm9wZG93bi10b2dnbGUnKS5kcm9wZG93bigndG9nZ2xlJyk7XHJcbiAgICB9KTtcclxuICAgICQoJyNTZWxlY3REYXRhJykub2ZmKCdjbGljaycpLnRleHQoJ+WFqOmDqOiusOW9lScpOyAgLy/orr7nva7lvIDlp4vnu5PmnZ/ml7bpl7RcclxuXHJcbiAgICAvL+etm+mAieWPguaVsOeahOWbnuaYvlxyXG4gICAgcmVCYWNrKCk7XHJcblxyXG4gICAgdXBkYXRlVGltZSh0aW1lUmFuZ2UpO1xyXG5cclxufSk7XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVUaW1lICh0aW1lKSB7XHJcbiAgICAkKCcjc3RhcnRUaW1lJykudmFsKHRpbWUuc3RhcnQpO1xyXG4gICAgJCgnI2VuZFRpbWUnKS52YWwodGltZS5lbmQpO1xyXG4gICAgaWYodGltZS5zdGFydCAmJiB0aW1lLnN0YXJ0IT0nMjAxNicpe1xyXG4gICAgICAgICQoJyNTZWxlY3REYXRhJykudGV4dCh0aW1lLnN0YXJ0ICsgJyB+ICcgKyB0aW1lLmVuZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNTZWxlY3REYXRhJykudGV4dCgn5YWo6YOo6K6w5b2VJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vL+WbnuaYvui+k+WFpeahhuWSjOmAieaLqeahhueahOWAvFxyXG5mdW5jdGlvbiByZUJhY2soKXtcclxuICAgIHZhciBzZWFyY2hfY29udGVudCA9IEdldFF1ZXJ5U3RyaW5nKFwic2VhcmNoX2NvbnRlbnRcIik7XHJcbiAgICAkKFwiI3NlYXJjaF9jb250ZW50XCIpLnZhbChzZWFyY2hfY29udGVudCB8fCAnJyk7XHJcblxyXG4gICAgdmFyIHNlYXJjaF90eXBlID0gR2V0UXVlcnlTdHJpbmcoXCJzZWFyY2hfdHlwZVwiKTtcclxuICAgIGlmKCBzZWFyY2hfdHlwZSApe1xyXG4gICAgICAgICQoXCIjc2VhcmNoX3R5cGUgb3B0aW9uW3ZhbHVlPVwiK3NlYXJjaF90eXBlK1wiXVwiKS5wcm9wKCdzZWxlY3RlZCcsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBnZW5lcmF0ZV90eXBlID0gR2V0UXVlcnlTdHJpbmcoJ2dlbmVyYXRlX3R5cGUnKTtcclxuICAgIGlmKCBnZW5lcmF0ZV90eXBlICl7XHJcbiAgICAgICAgJChcIiNnZW5lcmF0ZV90eXBlIG9wdGlvblt2YWx1ZT1cIitnZW5lcmF0ZV90eXBlK1wiXVwiKS5wcm9wKCdzZWxlY3RlZCcsIHRydWUpO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBzdGFydFRpbWUgPSBHZXRRdWVyeVN0cmluZygnc3RhcnRfdGltZScpLFxyXG4gICAgICAgIGVuZFRpbWUgPSBHZXRRdWVyeVN0cmluZygnZW5kX3RpbWUnKTtcclxuXHJcbiAgICB0aW1lUmFuZ2UgPSB7XHJcbiAgICAgICAgc3RhcnQ6IHN0YXJ0VGltZSB8fCAnJyxcclxuICAgICAgICBlbmQ6IGVuZFRpbWUgfHwgJydcclxuICAgIH1cclxufVxyXG5cclxuXHJcblxyXG4vL+WIoOmZpOiuouWNlVxyXG5mdW5jdGlvbiBkZWxldGVQdXJjaGFzZSh1c2VyX2lkLHBheW1lbnRfdHlwZSxyZXNvdXJjZV90eXBlLHByb2R1Y3RfaWQscmVzb3VyY2VfaWQpe1xyXG4gICAgd2luZG93Lnd4Yy54Y0NvbmZpcm0oXCI8ZGl2IGNsYXNzPSdtc2dkaXYnPuS7heWIoOmZpOiusOW9le+8jOS4jeS8muiHquWKqOmAgOasvjxiciAvPuaCqOehruWumuimgeWIoOmZpOWQlz88L2Rpdj5cIixcImNvbmZpcm1cIix7b25PazpmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgZGVsZXRlUHVyY2hhc2VyKHVzZXJfaWQscGF5bWVudF90eXBlLHJlc291cmNlX3R5cGUscHJvZHVjdF9pZCxyZXNvdXJjZV9pZCk7XHJcbiAgICB9fSk7XHJcbn1cclxuZnVuY3Rpb24gZGVsZXRlUHVyY2hhc2VyKHVzZXJfaWQscGF5bWVudF90eXBlLHJlc291cmNlX3R5cGUscHJvZHVjdF9pZCxyZXNvdXJjZV9pZCl7XHJcbiAgICBzaG93TG9hZGluZygpO1xyXG4gICAgdmFyIGFsbFBhcmFtcyA9IHt9O1xyXG4gICAgYWxsUGFyYW1zWyd1c2VyX2lkJ10gPSB1c2VyX2lkO1xyXG4gICAgYWxsUGFyYW1zWydwYXltZW50X3R5cGUnXSA9IHBheW1lbnRfdHlwZTtcclxuICAgIGFsbFBhcmFtc1sncmVzb3VyY2VfdHlwZSddID0gcmVzb3VyY2VfdHlwZTtcclxuICAgIGFsbFBhcmFtc1sncHJvZHVjdF9pZCddID0gcHJvZHVjdF9pZDtcclxuICAgIGFsbFBhcmFtc1sncmVzb3VyY2VfaWQnXSA9IHJlc291cmNlX2lkO1xyXG4gICAgLy93cml0ZU9iaihhbGxQYXJhbXMpO1xyXG4gICAgJC5wb3N0KCcvZGVsZXRlX3B1cmNoYXNlJywgYWxsUGFyYW1zLCBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICB2YXIgY29kZSA9IHJlc3VsdC5jb2RlO1xyXG4gICAgICAgIHZhciBtc2cgPSByZXN1bHQubXNnO1xyXG4gICAgICAgIGlmIChjb2RlID09IDApIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChtc2csZnVuY3Rpb24gKCkge3dpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKX0sMTUwMCk7XHJcbiAgICAgICAgfSBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAobXNnKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxufVxyXG5cclxuXHJcbi8v6LCD5Yiw6K+m5oOF6aG1XHJcbmZ1bmN0aW9uIGp1bXBEZXRhaWwoaW5mbyl7XHJcbiAgICByZXNldFVybCgnL2N1c3RvbWVyZGV0YWlsP3VzZXJJZD0nK2luZm8pO1xyXG59XHJcblxyXG4vL+iuouWNleiusOW9leW8ueahhlxyXG5mdW5jdGlvbiBleHBvcnRPcmRlclJlY29yZHMoKSB7XHJcbiAgICAkKFwiI0V4cG9ydE1vZGFsXCIpLm1vZGFsKCdzaG93Jyk7XHJcbn1cclxuXHJcbi8v5a+85Ye66K6i5Y2V6K6w5b2VXHJcbmZ1bmN0aW9uIGV4cG9ydG9yZGVyVG9FeGNlbCgpIHtcclxuICAgIHNob3dMb2FkaW5nKCk7XHJcbiAgICB2YXIgZXhwb3J0X3RpbWUgPSAkKCcjZXhwb3J0X3RpbWUnKS52YWwoKTtcclxuICAgIC8vIHZhciBzdGFydF90aW1lID0gJCgnI3N0YXJ0X3RpbWUnKS52YWwoKTtcclxuICAgIC8vIHZhciBlbmRfdGltZSA9ICQoJyNlbmRfdGltZScpLnZhbCgpO1xyXG4gICAgdmFyIFBhcmFtcyA9IHt9O1xyXG4gICAgUGFyYW1zWydleHBvcnRfdGltZSddID0gZXhwb3J0X3RpbWU7XHJcbiAgICAvL1BhcmFtc1snc3RhcnRfdGltZSddID0gc3RhcnRfdGltZTtcclxuICAgIC8vUGFyYW1zWydlbmRfdGltZSddID0gZW5kX3RpbWU7XHJcblxyXG4gICAgLy/lr7zlh7rmlbDmja5cclxuICAgIC8vaWYoc3RhcnRfdGltZSAhPSAnJyAmJiBlbmRfdGltZSAhPSAnJyAmJiBzdGFydF90aW1lIDwgZW5kX3RpbWUpe1xyXG4gICAgaWYoZXhwb3J0X3RpbWUgIT0gJycpe1xyXG4gICAgICAgIC8vdmFyIHVybCA9ICcvZXhwb3J0X2V4Y2VsP3N0YXJ0X3RpbWU9JytzdGFydF90aW1lKycmZW5kX3RpbWU9JytlbmRfdGltZTtcclxuICAgICAgICB2YXIgdXJsID0gJy9leHBvcnRfb3JkZXJfZXhjZWw/ZXhwb3J0X3RpbWU9JytleHBvcnRfdGltZTtcclxuICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IHVybDtcclxuICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICQoXCIjRXhwb3J0TW9kYWxcIikubW9kYWwoJ2hpZGUnKTtcclxuICAgIH1lbHNle1xyXG4gICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn6K+35qOA5p+l5pe26Ze06YCJ5oup5piv5ZCm5q2j56GuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG4vL+iuoui0reiusOW9leW8ueahhlxyXG5mdW5jdGlvbiBleHBvcnRSZWNvcmRzKCkge1xyXG4gICAgJChcIiNFeHBvcnRNb2RhbFwiKS5tb2RhbCgnc2hvdycpO1xyXG4gICAgLy/liJ3lp4vljJbml7bpl7TpgInmi6nlmahcclxuICAgIC8vIGV4cG9ydFRpbWVwaWNrZXJjb25maWcoJyNleHBvcnRfdGltZScpO1xyXG4gICAgLy8gZGF0ZXRpbWVwaWNrZXJjb25maWcoJyNzdGFydF90aW1lJyk7XHJcbiAgICAvLyBkYXRldGltZXBpY2tlcmNvbmZpZygnI2VuZF90aW1lJyk7XHJcbn1cclxuXHJcbi8v5a+85Ye66K6i6LSt6K6w5b2VXHJcbmZ1bmN0aW9uIGV4cG9ydFRvRXhjZWwoKSB7XHJcbiAgICBzaG93TG9hZGluZygpO1xyXG4gICAgdmFyIGV4cG9ydF90aW1lID0gJCgnI2V4cG9ydF90aW1lJykudmFsKCk7XHJcbiAgIC8vIHZhciBzdGFydF90aW1lID0gJCgnI3N0YXJ0X3RpbWUnKS52YWwoKTtcclxuICAgLy8gdmFyIGVuZF90aW1lID0gJCgnI2VuZF90aW1lJykudmFsKCk7XHJcbiAgICB2YXIgY2hrT2Jqcz1udWxsOyBcclxuICAgIHZhciBPZmZpY2UyMDAzPTA7XHJcbiAgICB2YXIgb2JqPSQoXCJbbmFtZT0nc2VsZWN0T2ZmaWNlJ11cIik7ICAgIFxyXG4gICAgaWYob2JqKXtcclxuICAgICAgICBmb3IgKHZhciBpPTA7aTxvYmoubGVuZ3RoO2krKyl7IC8v6YGN5Y6GUmFkaW8gXHJcbiAgICAgICAgICAgIGlmKG9ialtpXS5jaGVja2VkKXsgXHJcbiAgICAgICAgICAgICAgICBjaGtPYmpzPW9ialtpXS52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBpZihjaGtPYmpzPT0xKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgT2ZmaWNlMjAwMz0yMDAzO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgfSBcclxuICAgIH1cclxuXHJcbiAgICB2YXIgUGFyYW1zID0ge307XHJcbiAgICBQYXJhbXNbJ2V4cG9ydF90aW1lJ10gPSBleHBvcnRfdGltZTtcclxuICAgIC8vUGFyYW1zWydzdGFydF90aW1lJ10gPSBzdGFydF90aW1lO1xyXG4gICAgLy9QYXJhbXNbJ2VuZF90aW1lJ10gPSBlbmRfdGltZTtcclxuXHJcbiAgICAvL+WvvOWHuuaVsOaNrlxyXG4gICAgLy9pZihzdGFydF90aW1lICE9ICcnICYmIGVuZF90aW1lICE9ICcnICYmIHN0YXJ0X3RpbWUgPCBlbmRfdGltZSl7XHJcbiAgICBpZihleHBvcnRfdGltZSAhPSAnJyl7XHJcbiAgICAgICAgLy92YXIgdXJsID0gJy9leHBvcnRfZXhjZWw/c3RhcnRfdGltZT0nK3N0YXJ0X3RpbWUrJyZlbmRfdGltZT0nK2VuZF90aW1lO1xyXG5cclxuICAgICAgICB2YXIgdXJsID0gJy9leGNlbC9wdXJjaGFzZT9leHBvcnRfdGltZT0nK2V4cG9ydF90aW1lK1wiJiZ2ZXJzaW9uPVwiK09mZmljZTIwMDM7XHJcbiAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSB1cmw7XHJcbiAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAkKFwiI0V4cG9ydE1vZGFsXCIpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICB9ZWxzZXtcclxuICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+ivt+ajgOafpeaXtumXtOmAieaLqeaYr+WQpuato+ehricpO1xyXG4gICAgfVxyXG59Il19
