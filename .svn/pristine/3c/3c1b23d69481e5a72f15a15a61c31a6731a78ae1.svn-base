$(function(){shareUse.init()});var shareUse=function(){var e={};var i={num:0,id:"",share_knock:0,listen_count:0,share_limit:0,defined_num:0};e.init=function(){var e;$(".searchAllBtn").on("click",function(){var e=$(this).siblings("input").val();url="/invite/shareUseList/"+$(this).data("url")+"?search="+e;window.location.href=url});$(".shareNumSet").on("click",function(){var s=$(this).parent("td");e=s;i.id=$(this).data("good-id");i.listen_count=$(this).data("listen-count");i.defined_num=$(this).data("listen_resource");var t=s.siblings(".share_use_num").html();var n=s.siblings(".share_limit_num").html();if(t==="未参与"){$("#shareClose").prop("checked",true);$(".set_share_good_num").prop("disabled",true);$(".limit_number").prop("disabled",true);i.num=0;i.share_knock=0;$("#withoutLimit").prop("disabled",true);$("#definedLimit").prop("disabled",true)}else{$("#shareOpen").prop("checked",true);$(".set_share_good_num").prop("disabled",false);$(".limit_number").prop("disabled",true);i.num=t;i.share_knock=1}if(n==="未参与"||n==="不限制"){i.share_limit=0;$("#withoutLimit").prop("checked",true);$(".limit_number").prop("disabled",true)}else{i.share_limit=1;$(".limit_number").prop("disabled",false);$(".limit_number").val(n);$("#definedLimit").prop("checked",true)}console.log(i.defined_num);$(".set_share_good_title").html(s.siblings(".td_resource").children("p").html());$(".set_share_good_num").val(i.listen_count);$(".limit_number").val(i.defined_num);$(".set_share_num").addClass("active")});$("#shareOpen").on("click",function(){i.share_knock=1;$(".set_share_good_num").prop("disabled",false);$("#withoutLimit").prop("disabled",false);$("#definedLimit").prop("disabled",false)});$("#shareClose").on("click",function(){i.share_knock=0;i.share_limit=0;$(".set_share_good_num").prop("disabled",true);$("#withoutLimit").prop("checked",true);$(".limit_number").prop("disabled",true);$("#withoutLimit").prop("disabled",true);$("#definedLimit").prop("disabled",true)});$("#withoutLimit").click(function(){i.share_limit=0;$(".limit_number").prop("disabled",true)});$("#definedLimit").click(function(){i.share_limit=1;$(".limit_number").prop("disabled",false)});$(".cancel_sale_btn").on("click",function(){$(".set_share_num").removeClass("active")});$(".confirm_sale_btn").on("click",function(){i.defined_num=$(".limit_number").val();i.listen_count=$(".set_share_good_num").val();if(i.share_knock===1&&i.listen_count<1){baseUtils.show.redTip("领取上限不能小于1");return false}if(i.share_limit===1&&i.defined_num<1){baseUtils.show.redTip("分享上限不能少于1")}$("#base_loading").show();$.ajax("/invite/setShareNum",{type:"get",data:i,success:function(s){if(s.code===0){$(".set_share_num").removeClass("active");if(i.share_knock==0){e.siblings(".share_use_num").html("未参与")}else{e.siblings(".share_use_num").html(i.listen_count)}e.children("a").data("listen-count",i.listen_count);if(i.share_limit==0){if(i.share_knock==0){e.siblings(".share_limit_num").html("未参与")}else{e.siblings(".share_limit_num").html("不限制")}}else{e.siblings(".share_limit_num").html(i.defined_num)}e.children("a").data("listen_resource",i.defined_num);baseUtils.show.blueTip("设置成功")}else{$(".set_share_num").removeClass("active");baseUtils.show.redTip(s.msg)}},error:function(e){baseUtils.show.redTip("网络错误")},complete:function(){$("#base_loading").hide()}})})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoYXJlVXNlLmpzIl0sIm5hbWVzIjpbIiQiLCJzaGFyZVVzZSIsImluaXQiLCJzaGFyZUluZm8iLCJudW0iLCJpZCIsInNoYXJlX2tub2NrIiwibGlzdGVuX2NvdW50Iiwic2hhcmVfbGltaXQiLCJkZWZpbmVkX251bSIsIm5vd0VsIiwib24iLCJzZWFyY2hUZXh0IiwidGhpcyIsInNpYmxpbmdzIiwidmFsIiwidXJsIiwiZGF0YSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImVsIiwicGFyZW50IiwibnVtVGV4dCIsImh0bWwiLCJsaW1pdFRleHQiLCJwcm9wIiwiY29uc29sZSIsImxvZyIsImNoaWxkcmVuIiwiYWRkQ2xhc3MiLCJjbGljayIsInJlbW92ZUNsYXNzIiwiYmFzZVV0aWxzIiwic2hvdyIsInJlZFRpcCIsImFqYXgiLCJ0eXBlIiwic3VjY2VzcyIsImNvZGUiLCJibHVlVGlwIiwibXNnIiwiZXJyb3IiLCJjb21wbGV0ZSIsImhpZGUiXSwibWFwcGluZ3MiOiJBQUlBQSxFQUFFLFdBQ0NDLFNBQVNDLFFBR1osSUFBSUQsVUFBVyxXQUNYLEdBQUlBLEtBQ0osSUFBSUUsSUFDQUMsSUFBSSxFQUNKQyxHQUFHLEdBQ0hDLFlBQVksRUFDWkMsYUFBYSxFQUNiQyxZQUFZLEVBQ1pDLFlBQVksRUFJaEJSLEdBQVNDLEtBQU8sV0FFWixHQUFJUSxFQUVKVixHQUFFLGlCQUFpQlcsR0FBRyxRQUFRLFdBQzFCLEdBQUlDLEdBQWFaLEVBQUVhLE1BQU1DLFNBQVMsU0FBU0MsS0FDM0NDLEtBQU0sd0JBQXdCaEIsRUFBRWEsTUFBTUksS0FBSyxPQUFPLFdBQVdMLENBQzdETSxRQUFPQyxTQUFTQyxLQUFLSixLQUl6QmhCLEdBQUUsZ0JBQWdCVyxHQUFHLFFBQVEsV0FDekIsR0FBSVUsR0FBS3JCLEVBQUVhLE1BQU1TLE9BQU8sS0FDeEJaLEdBQVFXLENBQ1JsQixHQUFVRSxHQUFLTCxFQUFFYSxNQUFNSSxLQUFLLFVBQzVCZCxHQUFVSSxhQUFlUCxF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R0FBR0EsRUFBS3NCLE9BQU8sRUFBRSxDQUNidkMsRUFBRSxrQkFBa0JnQyxZQUFZLFNBQ2hDLElBQUc3QixFQUFVRyxhQUFhLEVBQUUsQ0FDeEJJLEVBQU1JLFNBQVMsa0JBQWtCVSxLQUFLLFdBQ3BDLENBQ0ZkLEVBQU1JLFNBQVMsa0JBQWtCVSxLQUFLckIsRUFBVUksY0FFcERHLEVBQU1tQixTQUFTLEtBQUtaLEtBQUssZUFBZWQsRUFBVUksYUFFbEQsSUFBR0osRUFBVUssYUFBYSxFQUFFLENBQ3hCLEdBQUdMLEVBQVVHLGFBQWEsRUFBRSxDQUN4QkksRUFBTUksU0FBUyxvQkFBb0JVLEtBQUssV0FDdkMsQ0FDRGQsRUFBTUksU0FBUyxvQkFBb0JVLEtBQUssWUFFMUMsQ0FDRmQsRUFBTUksU0FBUyxvQkFBb0JVLEtBQUtyQixFQUFVTSxhQUV0REMsRUFBTW1CLFNBQVMsS0FBS1osS0FBSyxrQkFBa0JkLEVBQVVNLFlBQ3JEd0IsV0FBVUMsS0FBS00sUUFBUSxZQUN0QixDQUNEeEMsRUFBRSxrQkFBa0JnQyxZQUFZLFNBQ2hDQyxXQUFVQyxLQUFLQyxPQUFPbEIsRUFBS3dCLE9BSW5DQyxNQUFNLFNBQVV6QixHQUNiZ0IsVUFBVUMsS0FBS0MsT0FBTyxTQUV6QlEsU0FBUyxXQUNMM0MsRUFBRSxpQkFBaUI0QyxZQU1uQyxPQUFPM0MiLCJmaWxlIjoic2hhcmVVc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBSb2FtIG9uIDIwMTcvNi8yMy5cclxuICovXHJcblxyXG4kKGZ1bmN0aW9uKCl7XHJcbiAgIHNoYXJlVXNlLmluaXQoKTtcclxufSk7XHJcblxyXG52YXIgc2hhcmVVc2UgPSBmdW5jdGlvbigpe1xyXG4gICAgdmFyIHNoYXJlVXNlID0ge307XHJcbiAgICB2YXIgc2hhcmVJbmZvID0ge1xyXG4gICAgICAgIG51bTowLFxyXG4gICAgICAgIGlkOicnLFxyXG4gICAgICAgIHNoYXJlX2tub2NrOjAsXHJcbiAgICAgICAgbGlzdGVuX2NvdW50OjAsXHJcbiAgICAgICAgc2hhcmVfbGltaXQ6MCwgIC8v5YiG5Lqr5LiK6ZmQIDAt5LiN6ZmQ5Yi2IDEt6Ieq5a6a5LmJXHJcbiAgICAgICAgZGVmaW5lZF9udW06MCwgIC8v6Ieq5a6a5LmJ5LiK6ZmQ77yI5aSn5LqO6Zu25pW05pWw77yJXHJcbiAgICB9O1xyXG5cclxuXHJcbiAgICBzaGFyZVVzZS5pbml0ID0gZnVuY3Rpb24oKXtcclxuXHJcbiAgICAgICAgdmFyIG5vd0VsOy8v6K6+572u5a+56LGhXHJcbiAgICAgICAgLy/mkJzntKLkuovku7ZcclxuICAgICAgICAkKCcuc2VhcmNoQWxsQnRuJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgc2VhcmNoVGV4dCA9ICQodGhpcykuc2libGluZ3MoJ2lucHV0JykudmFsKCk7XHJcbiAgICAgICAgICAgIHVybCA9ICcvaW52aXRlL3NoYXJlVXNlTGlzdC8nKyQodGhpcykuZGF0YSgndXJsJykrJz9zZWFyY2g9JytzZWFyY2hUZXh0O1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj11cmw7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v6K6+572u5LqL5Lu2XHJcbiAgICAgICAgJCgnLnNoYXJlTnVtU2V0Jykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgZWwgPSAkKHRoaXMpLnBhcmVudCgndGQnKTtcclxuICAgICAgICAgICAgbm93RWwgPSBlbDtcclxuICAgICAgICAgICAgc2hhcmVJbmZvLmlkID0gJCh0aGlzKS5kYXRhKCdnb29kLWlkJyk7XHJcbiAgICAgICAgICAgIHNoYXJlSW5mby5saXN0ZW5fY291bnQgPSAkKHRoaXMpLmRhdGEoJ2xpc3Rlbi1jb3VudCcpO1xyXG4gICAgICAgICAgICBzaGFyZUluZm8uZGVmaW5lZF9udW0gPSAkKHRoaXMpLmRhdGEoJ2xpc3Rlbl9yZXNvdXJjZScpXHJcbiAgICAgICAgICAgIHZhciBudW1UZXh0ID0gZWwuc2libGluZ3MoJy5zaGFyZV91c2VfbnVtJykuaHRtbCgpO1xyXG4gICAgICAgICAgICB2YXIgbGltaXRUZXh0ID0gZWwuc2libGluZ3MoJy5zaGFyZV9saW1pdF9udW0nKS5odG1sKCk7XHJcblxyXG4gICAgICAgICAgICAvL+WIpOaWreW8ueeql+WIneWni+WMluaVsOaNrlxyXG5cclxuICAgICAgICAgICAgaWYobnVtVGV4dCA9PT0gXCLmnKrlj4LkuI5cIil7Ly/liKTmlq3lvZPliY3pooblj5bkuIrpmZBcclxuICAgICAgICAgICAgICAgICQoJyNzaGFyZUNsb3NlJykucHJvcCgnY2hlY2tlZCcsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2V0X3NoYXJlX2dvb2RfbnVtJykucHJvcCgnZGlzYWJsZWQnLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxpbWl0X251bWJlcicpLnByb3AoJ2Rpc2FibGVkJyx0cnVlKTtcclxuICAgICAgICAgICAgICAgIHNoYXJlSW5mby5udW09MDtcclxuICAgICAgICAgICAgICAgIHNoYXJlSW5mby5zaGFyZV9rbm9jaz0wO1xyXG5cclxuICAgICAgICAgICAgICAgICQoJyN3aXRob3V0TGltaXQnKS5wcm9wKCdkaXNhYmxlZCcsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcjZGVmaW5lZExpbWl0JykucHJvcCgnZGlzYWJsZWQnLHRydWUpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICQoJyNzaGFyZU9wZW4nKS5wcm9wKCdjaGVja2VkJyx0cnVlKTtcclxuICAgICAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfZ29vZF9udW0nKS5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxpbWl0X251bWJlcicpLnByb3AoJ2Rpc2FibGVkJyx0cnVlKTtcclxuICAgICAgICAgICAgICAgIHNoYXJlSW5mby5udW0gPSBudW1UZXh0O1xyXG4gICAgICAgICAgICAgICAgc2hhcmVJbmZvLnNoYXJlX2tub2NrPTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmKGxpbWl0VGV4dCA9PT0gXCLmnKrlj4LkuI5cIiB8fCBsaW1pdFRleHQgPT09IFwi5LiN6ZmQ5Yi2XCIpey8v5Yik5pat5b2T5YmN5YiG5Lqr5LiK6ZmQXHJcbiAgICAgICAgICAgICAgICBzaGFyZUluZm8uc2hhcmVfbGltaXQgPSAwO1xyXG4gICAgICAgICAgICAgICAgLy8gc2hhcmVJbmZvLmRlZmluZWRfbnVtID0gMDtcclxuICAgICAgICAgICAgICAgICQoJyN3aXRob3V0TGltaXQnKS5wcm9wKCdjaGVja2VkJyx0cnVlKTtcclxuICAgICAgICAgICAgICAgICQoJy5saW1pdF9udW1iZXInKS5wcm9wKCdkaXNhYmxlZCcsdHJ1ZSk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgc2hhcmVJbmZvLnNoYXJlX2xpbWl0ID0gMTtcclxuICAgICAgICAgICAgICAgICQoJy5saW1pdF9udW1iZXInKS5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmxpbWl0X251bWJlcicpLnZhbChsaW1pdFRleHQpO1xyXG4gICAgICAgICAgICAgICAgJCgnI2RlZmluZWRMaW1pdCcpLnByb3AoJ2NoZWNrZWQnLHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhzaGFyZUluZm8uZGVmaW5lZF9udW0pO1xyXG5cclxuICAgICAgICAgICAgLy/liJ3lp4vljJbnvJbovpHlvLnnqpfmlbDmja5cclxuICAgICAgICAgICAgJCgnLnNldF9zaGFyZV9nb29kX3RpdGxlJykuaHRtbChlbC5zaWJsaW5ncygnLnRkX3Jlc291cmNlJykuY2hpbGRyZW4oJ3AnKS5odG1sKCkpOy8vP1xyXG4gICAgICAgICAgICAkKCcuc2V0X3NoYXJlX2dvb2RfbnVtJykudmFsKHNoYXJlSW5mby5saXN0ZW5fY291bnQpO1xyXG4gICAgICAgICAgICAkKCcubGltaXRfbnVtYmVyJykudmFsKHNoYXJlSW5mby5kZWZpbmVkX251bSk7XHJcbiAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfbnVtJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+W8gOWQr+WIhuS6q1xyXG4gICAgICAgICQoJyNzaGFyZU9wZW4nKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNoYXJlSW5mby5zaGFyZV9rbm9jaz0xO1xyXG4gICAgICAgICAgICAkKCcuc2V0X3NoYXJlX2dvb2RfbnVtJykucHJvcCgnZGlzYWJsZWQnLGZhbHNlKTtcclxuXHJcbiAgICAgICAgICAgICQoJyN3aXRob3V0TGltaXQnKS5wcm9wKCdkaXNhYmxlZCcsZmFsc2UpO1xyXG4gICAgICAgICAgICAkKCcjZGVmaW5lZExpbWl0JykucHJvcCgnZGlzYWJsZWQnLGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/lhbPpl63liIbkuqsgIC0t5pWw5o2u5riF56m6IOWIhuS6q+S4iumZkOWNlemAieS4umRpc2FibGVkXHJcbiAgICAgICAgJCgnI3NoYXJlQ2xvc2UnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHNoYXJlSW5mby5zaGFyZV9rbm9jaz0wO1xyXG4gICAgICAgICAgICBzaGFyZUluZm8uc2hhcmVfbGltaXQgPSAwO1xyXG4gICAgICAgICAgICAkKCcuc2V0X3NoYXJlX2dvb2RfbnVtJykucHJvcCgnZGlzYWJsZWQnLHRydWUpO1xyXG4gICAgICAgICAgICAkKCcjd2l0aG91dExpbWl0JykucHJvcCgnY2hlY2tlZCcsdHJ1ZSk7XHJcbiAgICAgICAgICAgICQoJy5saW1pdF9udW1iZXInKS5wcm9wKCdkaXNhYmxlZCcsdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAkKCcjd2l0aG91dExpbWl0JykucHJvcCgnZGlzYWJsZWQnLHRydWUpO1xyXG4gICAgICAgICAgICAkKCcjZGVmaW5lZExpbWl0JykucHJvcCgnZGlzYWJsZWQnLHRydWUpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8v5YiG5Lqr5LiK6ZmQLeS4jemZkOWItlxyXG4gICAgICAgICQoJyN3aXRob3V0TGltaXQnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzaGFyZUluZm8uc2hhcmVfbGltaXQgPSAwO1xyXG4gICAgICAgICAgICAkKCcubGltaXRfbnVtYmVyJykucHJvcCgnZGlzYWJsZWQnLHRydWUpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5YiG5Lqr5LiK6ZmQLeiHquWumuS5iVxyXG4gICAgICAgICQoJyNkZWZpbmVkTGltaXQnKS5jbGljayhmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzaGFyZUluZm8uc2hhcmVfbGltaXQgPSAxO1xyXG4gICAgICAgICAgICAkKCcubGltaXRfbnVtYmVyJykucHJvcCgnZGlzYWJsZWQnLGZhbHNlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/lj5bmtojkuovku7ZcclxuICAgICAgICAkKCcuY2FuY2VsX3NhbGVfYnRuJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCcuc2V0X3NoYXJlX251bScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTsvL+makOiXj+W8ueeql+aTjeS9nFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+aPkOS6pOaVsOaNruS6i+S7tlxyXG4gICAgICAgICQoJy5jb25maXJtX3NhbGVfYnRuJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzaGFyZUluZm8uZGVmaW5lZF9udW0gPSAkKCcubGltaXRfbnVtYmVyJykudmFsKCk7XHJcbiAgICAgICAgICAgIHNoYXJlSW5mby5saXN0ZW5fY291bnQgPSAkKCcuc2V0X3NoYXJlX2dvb2RfbnVtJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmKHNoYXJlSW5mby5zaGFyZV9rbm9jaz09PTEmJnNoYXJlSW5mby5saXN0ZW5fY291bnQ8MSl7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+mihuWPluS4iumZkOS4jeiDveWwj+S6jjEnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihzaGFyZUluZm8uc2hhcmVfbGltaXQgPT09IDEgJiYgc2hhcmVJbmZvLmRlZmluZWRfbnVtIDwgMSl7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+WIhuS6q+S4iumZkOS4jeiDveWwkeS6jjEnKVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJyNiYXNlX2xvYWRpbmcnKS5zaG93KCk7XHJcbiAgICAgICAgICAgICQuYWpheCgnL2ludml0ZS9zZXRTaGFyZU51bScse1xyXG4gICAgICAgICAgICAgICAgdHlwZTonZ2V0JyxcclxuICAgICAgICAgICAgICAgIGRhdGE6c2hhcmVJbmZvLFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbihkYXRhKXtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGU9PT0wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNldF9zaGFyZV9udW0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNoYXJlSW5mby5zaGFyZV9rbm9jaz09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dFbC5zaWJsaW5ncygnLnNoYXJlX3VzZV9udW0nKS5odG1sKFwi5pyq5Y+C5LiOXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBub3dFbC5zaWJsaW5ncygnLnNoYXJlX3VzZV9udW0nKS5odG1sKHNoYXJlSW5mby5saXN0ZW5fY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5vd0VsLmNoaWxkcmVuKCdhJykuZGF0YSgnbGlzdGVuLWNvdW50JyxzaGFyZUluZm8ubGlzdGVuX2NvdW50KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHNoYXJlSW5mby5zaGFyZV9saW1pdD09MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihzaGFyZUluZm8uc2hhcmVfa25vY2s9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vd0VsLnNpYmxpbmdzKCcuc2hhcmVfbGltaXRfbnVtJykuaHRtbChcIuacquWPguS4jlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vd0VsLnNpYmxpbmdzKCcuc2hhcmVfbGltaXRfbnVtJykuaHRtbChcIuS4jemZkOWItlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbm93RWwuc2libGluZ3MoJy5zaGFyZV9saW1pdF9udW0nKS5odG1sKHNoYXJlSW5mby5kZWZpbmVkX251bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm93RWwuY2hpbGRyZW4oJ2EnKS5kYXRhKCdsaXN0ZW5fcmVzb3VyY2UnLHNoYXJlSW5mby5kZWZpbmVkX251bSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoJ+iuvue9ruaIkOWKnycpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2V0X3NoYXJlX251bScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOmZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivrycpO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGNvbXBsZXRlOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI2Jhc2VfbG9hZGluZycpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIHJldHVybiBzaGFyZVVzZTtcclxufSgpOyJdfQ==
