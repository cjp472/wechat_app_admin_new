$(document).ready(function(){$chosenShop.init()});$chosenShop={tabState:"goods",init:function(){$("._switchOperateArea").on("click","._functionSwitch",function(e){var t=$(e.delegateTarget).data("switch_state");if(t){baseUtils.show.redTip("开关已开启，暂不支持关闭");return false}$.alert("您第一次使用小鹅通精选服务，是否打开推广开关，并开启小鹅通精选服务（开启后暂不支持关闭）","info",{oktext:"立即开启",onOk:function(){$.ajax("/chosen/chosen_enable",{type:"POST",dataType:"json",data:{is_enable_chosen:t?0:1},success:function(e){if(e.code==0){baseUtils.show.blueTip(t?"关闭成功":"开启成功");$chosenShop.changeSwitchState()}else{alert("服务器出小差了，请稍后再试！")}},error:function(e,t,a){console.log(a);alert("服务器出小差了，请稍后再试！")}})}})});$("#_contentTabWrapper").on("click","li",function(){var e=$(this).val();if(e==1){$chosenShop.getNewPage("goods");$chosenShop.tabState="goods"}else{$chosenShop.getNewPage("record");$chosenShop.tabState="record"}});$("#_mainContentPart").on("click"," .pagination li a",function(e){var t=$(e.target),a=t.data("url");$chosenShop.getNewPage($chosenShop.tabState,{},a)})},upDatePaging:function(e){var e=e||".list-page";$(e+" .pagination li a").each(function(){var e=$(this);e.attr("data-url",e.attr("href"));e.removeAttr("href")})},getNewPage:function(e,t,a){var t=t||{};var a=a||"";if(!a){if(e=="goods"){a="/chosen/get_goods_list"}else if(e=="record"){a="/chosen/get_record_list"}else{console.log("参数错误.");return false}}else{var o=a,c=/(\/chosen\/.*)\?/,s=/(\?|&)(.+?)=/g,n=/=([^&]*)(&|$)/g;a=o.match(c)[1];var i=o.match(s),r=o.match(n);var h=i.length;for(var l=0;l<h;l++){var d=i[l];var g=r[l];g=decodeURI(g.slice(1,g.length));t[d.slice(1,d.length-1)]=g==="&"?"":g}}console.log("postUrl:",a);console.log("params:",t);$(".loadingS").fadeIn(300);$.ajax(a,{type:"POST",dataType:"html",data:t,success:function(t){$(".loadingS").fadeOut(100);if(t.length>0){$("#_mainContentPart").html(t);$chosenShop.switchContentTab(e);if(e!=="goods"){$chosenShop.upDatePaging()}}else{baseUtils.show.redTip("没有数据，请稍后再试")}},error:function(e,t,a){$(".loadingS").fadeOut(100);console.log(a);alert("服务器出小差了，请稍后再试！")}})},switchContentTab:function(e){if(e=="goods"){$("#_goodsListTab").addClass("_activeTab");$("#_recordListTab").removeClass("_activeTab")}else if(e=="record"){$("#_recordListTab").addClass("_activeTab");$("#_goodsListTab").removeClass("_activeTab")}},changeSwitchState:function(){var e=$("._switchOperateArea ._functionSwitch"),t=!$("._switchOperateArea").data("switch_state");if(t){e.css({"background-color":"#2FCE6F"});e.children("._switchDescText").css({left:"9px"});e.children("._switchDescText").text("开启");e.children("._switchButtonIcon").css({left:"40px"})}else{e.css({"background-color":"#c2c2c2"});e.children("._switchDescText").css({left:"44px"});e.children("._switchDescText").text("关闭");e.children("._switchButtonIcon").css({left:"0px"})}$("._switchOperateArea").data("switch_state",t)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWVwYWdlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiJGNob3NlblNob3AiLCJpbml0IiwidGFiU3RhdGUiLCJvbiIsImUiLCJzd2l0Y2hTdGF0ZSIsImRlbGVnYXRlVGFyZ2V0IiwiZGF0YSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJhbGVydCIsIm9rdGV4dCIsIm9uT2siLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwiaXNfZW5hYmxlX2Nob3NlbiIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb2RlIiwiYmx1ZVRpcCIsImNoYW5nZVN3aXRjaFN0YXRlIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJjb25zb2xlIiwibG9nIiwic3RhdGUiLCJ0aGlzIiwidmFsIiwiZ2V0TmV3UGFnZSIsImVsIiwidGFyZ2V0IiwidXJsIiwidXBEYXRlUGFnaW5nIiwicGFnaW5nQ2xhc3MiLCJlYWNoIiwiYXR0ciIsInJlbW92ZUF0dHIiLCJ0YXJnZXRUYWIiLCJwYXJhbXMiLCJwb3N0VXJsIiwicG9ydHVybF9wYXR0ZXJuIiwicGFyYW1fcGF0dGVybiIsInBhcmFtX3ZhbHVlX3BhdHRlcm4iLCJtYXRjaCIsInBhcmFtX2FyciIsInBhcmFtX3ZhbHVlX2FyciIsImxlbiIsImxlbmd0aCIsImkiLCJwYXJhbSIsInBhcmFtX3ZhbHVlIiwiZGVjb2RlVVJJIiwic2xpY2UiLCJmYWRlSW4iLCJmYWRlT3V0IiwiaHRtbCIsInN3aXRjaENvbnRlbnRUYWIiLCJ0YXJnZXRTdGF0ZSIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCIkdGFyZ2V0IiwiY3NzIiwiYmFja2dyb3VuZC1jb2xvciIsImNoaWxkcmVuIiwibGVmdCIsInRleHQiXSwibWFwcGluZ3MiOiJBQUVBQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2RDLFlBQVlDLFFBR2hCRCxjQUVJRSxTQUFVLFFBRVZELEtBQU0sV0FHRkosRUFBRSx1QkFBdUJNLEdBQUcsUUFBUyxtQkFBb0Is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U0FBUUMsSUFBSUYsRUFDWmYsT0FBTSxzQkFNbEJpRCxpQkFBa0IsU0FBVUMsR0FDeEIsR0FBSUEsR0FBZSxRQUFTLENBQ3hCaEUsRUFBRSxrQkFBa0JpRSxTQUFTLGFBQzdCakUsR0FBRSxtQkFBbUJrRSxZQUFZLGtCQUM5QixJQUFJRixHQUFlLFNBQVUsQ0FDaENoRSxFQUFFLG1CQUFtQmlFLFNBQVMsYUFDOUJqRSxHQUFFLGtCQUFrQmtFLFlBQVksZ0JBT3hDekMsa0JBQW1CLFdBRWYsR0FBSTBDLEdBQVVuRSxFQUFFLHdDQUNaZ0MsR0FBU2hDLEVBQUUsdUJBQXVCVSxLQUFLLGVBQzNDLElBQUlzQixFQUFPLENBQ1BtQyxFQUFRQyxLQUFLQyxtQkFBb0IsV0FDakNGLEdBQVFHLFNBQVMsb0JBQW9CRixLQUFLRyxLQUFRLE9BQ2xESixHQUFRRyxTQUFTLG9CQUFvQkUsS0FBSyxLQUMxQ0wsR0FBUUcsU0FBUyxzQkFBc0JGLEtBQUtHLEtBQVEsYUFDakQsQ0FDSEosRUFBUUMsS0FBS0MsbUJBQW9CLFdBQ2pDRixHQUFRRyxTQUFTLG9CQUFvQkYsS0FBS0csS0FBUSxRQUNsREosR0FBUUcsU0FBUyxvQkFBb0JFLEtBQUssS0FDMUNMLEdBQVFHLFNBQVMsc0JBQXNCRixLQUFLRyxLQUFRLFFBRXhEdkUsRUFBRSx1QkFBdUJVLEtBQUssZUFBZ0JzQiIsImZpbGUiOiJob21lcGFnZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgJGNob3NlblNob3AuaW5pdCgpO1xyXG59KTtcclxuXHJcbiRjaG9zZW5TaG9wID0ge1xyXG5cclxuICAgIHRhYlN0YXRlOiBcImdvb2RzXCIsICAgLy9cImdvb2RzXCIsIFwicmVjb3JkXCJcclxuXHJcbiAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8vIOW8gOWFs1xyXG4gICAgICAgICQoXCIuX3N3aXRjaE9wZXJhdGVBcmVhXCIpLm9uKFwiY2xpY2tcIiwgXCIuX2Z1bmN0aW9uU3dpdGNoXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBzd2l0Y2hTdGF0ZSA9ICQoZS5kZWxlZ2F0ZVRhcmdldCkuZGF0YShcInN3aXRjaF9zdGF0ZVwiKTsvL+W9k+WJjeeKtuaAgVxyXG5cclxuICAgICAgICAgICAgaWYgKHN3aXRjaFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLlvIDlhbPlt7LlvIDlkK/vvIzmmoLkuI3mlK/mjIHlhbPpl61cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQuYWxlcnQoXCLmgqjnrKzkuIDmrKHkvb/nlKjlsI/puYXpgJrnsr7pgInmnI3liqHvvIzmmK/lkKbmiZPlvIDmjqjlub/lvIDlhbPvvIzlubblvIDlkK/lsI/puYXpgJrnsr7pgInmnI3liqHvvIjlvIDlkK/lkI7mmoLkuI3mlK/mjIHlhbPpl63vvIlcIiwgXCJpbmZvXCIsIHtcclxuICAgICAgICAgICAgICAgIG9rdGV4dDogXCLnq4vljbPlvIDlkK9cIixcclxuICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLmFqYXgoXCIvY2hvc2VuL2Nob3Nlbl9lbmFibGVcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc19lbmFibGVfY2hvc2VuOiBzd2l0Y2hTdGF0ZSA/IDAgOiAxLC8vMC3lhbPpl63vvIwgMS3lvIDlkK9cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKHN3aXRjaFN0YXRlPyBcIuWFs+mXreaIkOWKn1wiOiBcIuW8gOWQr+aIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC5jaGFuZ2VTd2l0Y2hTdGF0ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL3RhYuWIh+aNolxyXG4gICAgICAgICQoXCIjX2NvbnRlbnRUYWJXcmFwcGVyXCIpLm9uKFwiY2xpY2tcIiwgXCJsaVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC5nZXROZXdQYWdlKFwiZ29vZHNcIik7XHJcbiAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC50YWJTdGF0ZSA9ICdnb29kcyc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC5nZXROZXdQYWdlKFwicmVjb3JkXCIpO1xyXG4gICAgICAgICAgICAgICAgJGNob3NlblNob3AudGFiU3RhdGUgPSAncmVjb3JkJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDliIbpobXor7fmsYJcclxuICAgICAgICAkKFwiI19tYWluQ29udGVudFBhcnRcIikub24oXCJjbGlja1wiLFwiIC5wYWdpbmF0aW9uIGxpIGFcIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIHZhciBlbCA9ICQoZS50YXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgdXJsID0gZWwuZGF0YSgndXJsJyk7XHJcbiAgICAgICAgICAgICRjaG9zZW5TaG9wLmdldE5ld1BhZ2UoJGNob3NlblNob3AudGFiU3RhdGUsIHt9LCB1cmwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0sXHJcbiAgICAvKiDmm7TmlrDliIbpobXnmoTliJ3lp4vnirbmgIFcclxuICAgICAqIOWPguaVsO+8mlxyXG4gICAgICogIHBhZ2luZ0NsYXNzIOWIhumhteWkluWxgueahGRpdlxyXG4gICAgICovXHJcbiAgICB1cERhdGVQYWdpbmc6IGZ1bmN0aW9uKHBhZ2luZ0NsYXNzKXtcclxuICAgICAgICB2YXIgcGFnaW5nQ2xhc3MgPSBwYWdpbmdDbGFzcyB8fCAnLmxpc3QtcGFnZSc7XHJcbiAgICAgICAgJChwYWdpbmdDbGFzcyArICcgLnBhZ2luYXRpb24gbGkgYScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICB2YXIgZWwgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgIGVsLmF0dHIoJ2RhdGEtdXJsJywgZWwuYXR0cignaHJlZicpKTtcclxuICAgICAgICAgICBlbC5yZW1vdmVBdHRyKCdocmVmJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qIOabtOaWsOmhtemdouaVsOaNrlxyXG4gICAgICog5Y+C5pWw6K+05piO77yaXHJcbiAgICAgKiAgdGFyZ2V0VGFiIDog6KaB5Yqg6L2955qE55uu5qCH6aG1XHJcbiAgICAgKiAgcGFyYW1zIDog5Y+C5pWwXHJcbiAgICAgKiAgcG9zdFVybCA6IOmAmui/h2HmoIfnrb7ojrflvpfnmoTpk77mjqXvvJrlpoLvvJpodHRwOi8vbG9jYWxob3N0L2Nob3Nlbi9nZXRfcmVjb3JkX2xpc3Q/c2VhcmNoPSZwYWdlPTNcclxuICAgICAqICDms6jmhI/vvJpwYXJhbXMg5ZKMIHBvc3RVcmwg5LqM6YCJ5LiA77yM6LCD55So5pa55byP5YiG5Yir5aaC5LiL77yaXHJcbiAgICAgKiAgICAgICRjaG9zZW5TaG9wLmdldE5ld1BhZ2UodGFyZ2V0VGFiLHt9LHVybCk7IC8vIOWPquS8oOmAknRhcmdldFRhYuWSjHVybO+8jOeUqOS6juWIhumhtVxyXG4gICAgICogICAgICAkY2hvc2VuU2hvcC5nZXROZXdQYWdlKHRhcmdldFRhYixwYXJhbXMpOyAvLyDlj6rkvKDpgJJ0YXJnZXRUYWLlkoxwYXJhbe+8jOeUqOS6juaQnOe0olxyXG4gICAgICovXHJcbiAgICBnZXROZXdQYWdlOiBmdW5jdGlvbiAodGFyZ2V0VGFiLCBwYXJhbXMsIHBvc3RVcmwpIHsgIC8vXCJnb29kc1wiLCBcInJlY29yZFwiXHJcbiAgICAgICAgdmFyIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcclxuICAgICAgICB2YXIgcG9zdFVybCA9IHBvc3RVcmwgfHwgXCJcIjtcclxuXHJcbiAgICAgICAgLy8g5Yid5aeL5YyW54q25oCBXHJcbiAgICAgICAgaWYoIXBvc3RVcmwpe1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0VGFiID09IFwiZ29vZHNcIikge1xyXG4gICAgICAgICAgICAgICAgcG9zdFVybCA9IFwiL2Nob3Nlbi9nZXRfZ29vZHNfbGlzdFwiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldFRhYiA9PSBcInJlY29yZFwiKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0VXJsID0gXCIvY2hvc2VuL2dldF9yZWNvcmRfbGlzdFwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlj4LmlbDplJnor68uXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8vIOino+aekHVybFxyXG4gICAgICAgICAgICB2YXIgdXJsID0gcG9zdFVybCxcclxuICAgICAgICAgICAgICAgIHBvcnR1cmxfcGF0dGVybiA9IC8oXFwvY2hvc2VuXFwvLiopXFw/LywgLy8g5Yy56YWN6Lev55SxXHJcbiAgICAgICAgICAgICAgICBwYXJhbV9wYXR0ZXJuID0gLyhcXD98JikoLis/KT0vZywgLy8g5Yy56YWN5Y+C5pWwXHJcbiAgICAgICAgICAgICAgICBwYXJhbV92YWx1ZV9wYXR0ZXJuID0gLz0oW14mXSopKCZ8JCkvZzsgLy8g5Yy56YWN5Y+C5pWw5YC8XHJcbiAgICAgICAgICAgIHBvc3RVcmwgPSB1cmwubWF0Y2gocG9ydHVybF9wYXR0ZXJuKVsxXTtcclxuICAgICAgICAgICAgdmFyIHBhcmFtX2FyciA9IHVybC5tYXRjaChwYXJhbV9wYXR0ZXJuKSxcclxuICAgICAgICAgICAgICAgIHBhcmFtX3ZhbHVlX2FyciA9IHVybC5tYXRjaChwYXJhbV92YWx1ZV9wYXR0ZXJuKTtcclxuICAgICAgICAgICAgdmFyIGxlbiA9IHBhcmFtX2Fyci5sZW5ndGg7XHJcbiAgICAgICAgICAgIC8vIOe7hOWQiHBhcmFtc+WvueixoVxyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1fYXJyW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtX3ZhbHVlID0gcGFyYW1fdmFsdWVfYXJyW2ldO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1fdmFsdWUgPSBkZWNvZGVVUkkocGFyYW1fdmFsdWUuc2xpY2UoMSxwYXJhbV92YWx1ZS5sZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgIHBhcmFtc1twYXJhbS5zbGljZSgxLHBhcmFtLmxlbmd0aCAtIDEpXSA9IHBhcmFtX3ZhbHVlID09PSAnJic/IFwiXCI6IHBhcmFtX3ZhbHVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZyhcInBvc3RVcmw6XCIscG9zdFVybCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJwYXJhbXM6XCIscGFyYW1zKTtcclxuXHJcbiAgICAgICAgJChcIi5sb2FkaW5nU1wiKS5mYWRlSW4oMzAwKTtcclxuICAgICAgICAkLmFqYXgocG9zdFVybCwge1xyXG4gICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXJhbXMsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICQoXCIubG9hZGluZ1NcIikuZmFkZU91dCgxMDApO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNfbWFpbkNvbnRlbnRQYXJ0XCIpLmh0bWwocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC5zd2l0Y2hDb250ZW50VGFiKHRhcmdldFRhYik7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGFyZ2V0VGFiICE9PSAnZ29vZHMnKXsgLy8g6Zmk5LqG5o6o5bm/5ZWG5ZOB77yM5YW25LuW55qE6YO95YiG6aG1XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRjaG9zZW5TaG9wLnVwRGF0ZVBhZ2luZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmsqHmnInmlbDmja7vvIzor7fnqI3lkI7lho3or5UnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMTAwKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG5cclxuICAgIHN3aXRjaENvbnRlbnRUYWI6IGZ1bmN0aW9uICh0YXJnZXRTdGF0ZSkgeyAgLy9cImdvb2RzXCIsIFwicmVjb3JkXCJcclxuICAgICAgICBpZiAodGFyZ2V0U3RhdGUgPT0gXCJnb29kc1wiKSB7XHJcbiAgICAgICAgICAgICQoXCIjX2dvb2RzTGlzdFRhYlwiKS5hZGRDbGFzcyhcIl9hY3RpdmVUYWJcIik7XHJcbiAgICAgICAgICAgICQoXCIjX3JlY29yZExpc3RUYWJcIikucmVtb3ZlQ2xhc3MoXCJfYWN0aXZlVGFiXCIpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodGFyZ2V0U3RhdGUgPT0gXCJyZWNvcmRcIikge1xyXG4gICAgICAgICAgICAkKFwiI19yZWNvcmRMaXN0VGFiXCIpLmFkZENsYXNzKFwiX2FjdGl2ZVRhYlwiKTtcclxuICAgICAgICAgICAgJChcIiNfZ29vZHNMaXN0VGFiXCIpLnJlbW92ZUNsYXNzKFwiX2FjdGl2ZVRhYlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgfSxcclxuICAgIC8qKlxyXG4gICAgICog5YiH5o2i5oyJ6ZKu55qE54q25oCBXHJcbiAgICAgKi9cclxuICAgIGNoYW5nZVN3aXRjaFN0YXRlOiBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciAkdGFyZ2V0ID0gJChcIi5fc3dpdGNoT3BlcmF0ZUFyZWEgLl9mdW5jdGlvblN3aXRjaFwiKSxcclxuICAgICAgICAgICAgc3RhdGUgPSAhJChcIi5fc3dpdGNoT3BlcmF0ZUFyZWFcIikuZGF0YShcInN3aXRjaF9zdGF0ZVwiKTtcclxuICAgICAgICBpZiAoc3RhdGUpIHtcclxuICAgICAgICAgICAgJHRhcmdldC5jc3Moe1wiYmFja2dyb3VuZC1jb2xvclwiOiBcIiMyRkNFNkZcIn0pO1xyXG4gICAgICAgICAgICAkdGFyZ2V0LmNoaWxkcmVuKFwiLl9zd2l0Y2hEZXNjVGV4dFwiKS5jc3Moe1wibGVmdFwiOiBcIjlweFwifSk7XHJcbiAgICAgICAgICAgICR0YXJnZXQuY2hpbGRyZW4oXCIuX3N3aXRjaERlc2NUZXh0XCIpLnRleHQoXCLlvIDlkK9cIik7XHJcbiAgICAgICAgICAgICR0YXJnZXQuY2hpbGRyZW4oXCIuX3N3aXRjaEJ1dHRvbkljb25cIikuY3NzKHtcImxlZnRcIjogXCI0MHB4XCJ9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkdGFyZ2V0LmNzcyh7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwiI2MyYzJjMlwifSk7XHJcbiAgICAgICAgICAgICR0YXJnZXQuY2hpbGRyZW4oXCIuX3N3aXRjaERlc2NUZXh0XCIpLmNzcyh7XCJsZWZ0XCI6IFwiNDRweFwifSk7XHJcbiAgICAgICAgICAgICR0YXJnZXQuY2hpbGRyZW4oXCIuX3N3aXRjaERlc2NUZXh0XCIpLnRleHQoXCLlhbPpl61cIik7XHJcbiAgICAgICAgICAgICR0YXJnZXQuY2hpbGRyZW4oXCIuX3N3aXRjaEJ1dHRvbkljb25cIikuY3NzKHtcImxlZnRcIjogXCIwcHhcIn0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKFwiLl9zd2l0Y2hPcGVyYXRlQXJlYVwiKS5kYXRhKFwic3dpdGNoX3N0YXRlXCIsIHN0YXRlKTtcclxuXHJcbiAgICB9LFxyXG5cclxufTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXX0=
