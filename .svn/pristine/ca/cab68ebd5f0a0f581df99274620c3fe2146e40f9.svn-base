$(function(){videoUpload.init();$(".videoUploadCancle").hide()});var is_edit=false;var fileId;var videoGsize;var transcodeNotifyUrl;var videoTypes=["WMV","WM","ASF","ASX","RM","RMVB","RA","RAM","MPG","MPEG","MPE","VOB","DAT","MOV","3GP","MP4","MP4V","M4V","MKV","AVI","FLV","F4V","wmv","wm","asf","asx","rm","rmvb","ra","ram","mpg","mpeg","mpe","vob","dat","mov","3gp","mp4","mp4v","m4v","mkv","avi","flv","f4v"];var videoUpload=function(){var e={};var o=function(e){$.ajax({url:"/getsigv4",data:JSON.stringify({Action:"GetVodSignatureV2"}),type:"POST",dataType:"json",success:function(o){console.log(o);if(o.result){console.log("成功");e(o.result)}else{console.log("获取签名失败");return"获取签名失败"}}})};e.init=function(){$("#video_file").click(function(){$("#uploadVideoNow-file").click()});function e(e,o){var i=e.length;while(i--){if(e[i]===o){return true}}console.log("找不到");return false}var i=function(e,o){var i={};return i.type=e.name.slice(e.name.match(/\.[^\.]+$/).index+1),i.name=o||e.name.slice(0,e.name.match(/\.[^\.]+$/).index),i.size=e.size,i.error="",(void 0==i.name||""==i.name||/[:*?,<>\'\"\\]/g.test(i.name))&&(i.error='文件名不得包含 / : * ? "  < > 等字符'),i};$("#uploadVideoNow-file").on("change",function(t){var a=this.files[0];var n=i(a,a.name);console.log(n);console.log(n.error);if(n.error!=""){baseUtils.show.redTip(n.error);$("#uploadVideoNow-file").val("");return false}if(!e(videoTypes,n.type)){baseUtils.show.redTip("上传的文件必须为视频文件哦~");$("#uploadVideoNow-file").val("");return false}var r=a.size;videoGsize=Number(r/(1024*1024)).toFixed(2);if(videoGsize>1e3){baseUtils.show.redTip("请将视频文件压缩到 1G 以内")}var s=qcVideo.ugcUploader.start({videoFile:a,getSignature:o,allowAudio:0,isTranscode:true,transcodeNotifyUrl:transcodeNotifyUrl,success:function(e){console.log("上传成功");console.log(e);is_edit=false;$(".videoUploadLineA").css("width","100%");$(".videoPercent").text("已完成");$(".uploadRatio span:nth-of-type(1)").text(videoGsize+"M");$(".uploadRatio span:nth-of-type(2)").text(videoGsize+"M")},error:function(e){console.log("上传失败");console.log(e)},progress:function(e){is_edit=true;$("#videoName").hide();$(".videoUploadBox").fadeIn(300);$(".videoBoxTitle").text(e.name);$(".videoSize").text(videoGsize+"M");if(e.shacurr<1){$(".videoPercent").text("视频正在解析中");$(".uploadRatio span").text("");$(".videoUploadLineA").css("width","0%")}else if(e.shacurr==1){var o=parseFloat(videoGsize)*parseFloat(e.curr);o=o.toFixed(2);var i=Number(e.curr*100).toFixed(2);$(".videoUploadLineA").css("width",i+"%");$(".videoPercent").text(i+"%");$(".uploadRatio span:nth-of-type(1)").text(o+"M");$(".uploadRatio span:nth-of-type(2)").text(videoGsize+"M")}if(e.type=="video"){console.log(e)}},finish:function(e){console.log("finish");console.log(e);fileId=e.fileId;VideoName=e.videoName}})})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZpZGVvVXBsb2FkVWdjLmpzIl0sIm5hbWVzIjpbIiQiLCJ2aWRlb1VwbG9hZCIsImluaXQiLCJoaWRlIiwiaXNfZWRpdCIsImZpbGVJZCIsInZpZGVvR3NpemUiLCJ0cmFuc2NvZGVOb3RpZnlVcmwiLCJ2aWRlb1R5cGVzIiwiZ2V0U2lnbmF0dXJlIiwiY2FsbGJhY2siLCJhamF4IiwidXJsIiwiZGF0YSIsIkpTT04iLCJzdHJpbmdpZnkiLCJBY3Rpb24iLCJ0eXBlIiwiZGF0YVR5cGUiLCJzdWNjZXNzIiwicmVzIiwiY29uc29sZSIsImxvZyIsInJlc3VsdCIsImNsaWNrIiwiY29udGFpbnMiLCJhcnIiLCJvYmoiLCJpIiwibGVuZ3RoIiwiZ2V0RmlsZU1lc3NhZ2UiLCJmaWxlIiwibmV3bmFtZSIsImZpbGVNc2ciLCJuYW1lIiwic2xpY2UiLCJtYXRjaCIsImluZGV4Iiwic2l6ZSIsImVycm9yIiwidGVzdCIsIm9uIiwiZSIsInZpZGVvRmlsZSIsInRoaXMiLCJmaWxlcyIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJ2YWwiLCJ2aWRlb1NpemUiLCJOdW1iZXIiLCJ0b0ZpeGVkIiwicmVzdWx0TXNnIiwicWNWaWRlbyIsInVnY1VwbG9hZGVyIiwic3RhcnQiLCJhbGxvd0F1ZGlvIiwiaXNUcmFuc2NvZGUiLCJjc3MiLCJ0ZXh0IiwicHJvZ3Jlc3MiLCJmYWRlSW4iLCJzaGFjdXJyIiwidXBsb2FkQ29tcGxldGVTaXplIiwicGFyc2VGbG9hdCIsImN1cnIiLCJjdXJyUGVyY2VudCIsImZpbmlzaCIsIlZpZGVvTmFtZSIsInZpZGVvTmFtZSJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUUsV0FDRUMsWUFBWUMsTUFFWkYsR0FBRSxzQkFBc0JHLFFBRzVCLElBQUlDLFNBQVUsS0FDZCxJQUFJQyxPQUNKLElBQUlDLFdBQ0osSUFBSUMsbUJBQ0osSUFBSUMsYUFBYyxNQUFPLEtBQU0sTUFBTyxNQUFPLEtBQU0sT0FBUSxLQUFNLE1BQU8sTUFBTyxPQUFR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QUUsa0JBQWtCNEQsS0FBS3JDLEVBQU9XLEtBQ2hDbEMsR0FBRSxjQUFjNEQsS0FBS3RELFdBQVcsSUFFaEMsSUFBR2lCLEVBQU93QyxRQUFRLEVBQUUsQ0FDaEIvRCxFQUFFLGlCQUFpQjRELEtBQUssVUFDeEI1RCxHQUFFLHFCQUFxQjRELEtBQUssR0FDNUI1RCxHQUFFLHFCQUFxQjJELElBQUksUUFBUSxVQUNqQyxJQUFHcEMsRUFBT3dDLFNBQVMsRUFBRyxDQUN4QixHQUFJQyxHQUFtQkMsV0FBVzNELFlBQVkyRCxXQUFXMUMsRUFBTzJDLEtBQ2hFRixHQUFtQkEsRUFBbUJaLFFBQVEsRUFFOUMsSUFBSWUsR0FBWWhCLE9BQU81QixFQUFPMkMsS0FBSyxLQUFLZCxRQUFRLEVBQ2hEcEQsR0FBRSxxQkFBcUIyRCxJQUFJLFFBQVFRLEVBQVksSUFDL0NuRSxHQUFFLGlCQUFpQjRELEtBQUtPLEVBQVksSUFDcENuRSxHQUFFLG9DQUFvQzRELEtBQUtJLEVBQW1CLElBQzlEaEUsR0FBRSxvQ0FBb0M0RCxLQUFLdEQsV0FBVyxLQUUxRCxHQUFHaUIsRUFBT04sTUFBUSxRQUFTLENBQ3ZCSSxRQUFRQyxJQUFJQyxLQUdwQjZDLE9BQVEsU0FBUzdDLEdBQ2JGLFFBQVFDLElBQUksU0FDWkQsU0FBUUMsSUFBSUMsRUFDWmxCLFFBQU9rQixFQUFPbEIsTUFDZGdFLFdBQVk5QyxFQUFPK0MsZUFNbkMsT0FBT3JFIiwiZmlsZSI6InZpZGVvVXBsb2FkVWdjLmpzIiwic291cmNlc0NvbnRlbnQiOlsiJChmdW5jdGlvbiAoKSB7XG4gICAgdmlkZW9VcGxvYWQuaW5pdCgpO1xuXG4gICAgJChcIi52aWRlb1VwbG9hZENhbmNsZVwiKS5oaWRlKCk7XG59KTtcblxudmFyIGlzX2VkaXQgPSBmYWxzZTtcbnZhciBmaWxlSWQ7XG52YXIgdmlkZW9Hc2l6ZTtcbnZhciB0cmFuc2NvZGVOb3RpZnlVcmw7IC8vIOi9rOeggeaIkOWKn+Wbnuiwg+WcsOWdgFxudmFyIHZpZGVvVHlwZXMgPSBbXCJXTVZcIiwgXCJXTVwiLCBcIkFTRlwiLCBcIkFTWFwiLCBcIlJNXCIsIFwiUk1WQlwiLCBcIlJBXCIsIFwiUkFNXCIsIFwiTVBHXCIsIFwiTVBFR1wiLCBcIk1QRVwiLCBcIlZPQlwiLCBcIkRBVFwiLCBcIk1PVlwiLCBcIjNHUFwiLCBcIk1QNFwiLCBcIk1QNFZcIiwgXCJNNFZcIiwgXCJNS1ZcIiwgXCJBVklcIiwgXCJGTFZcIiwgXCJGNFZcIixcIndtdlwiLCBcIndtXCIsIFwiYXNmXCIsIFwiYXN4XCIsIFwicm1cIiwgXCJybXZiXCIsIFwicmFcIiwgXCJyYW1cIiwgXCJtcGdcIiwgXCJtcGVnXCIsIFwibXBlXCIsIFwidm9iXCIsIFwiZGF0XCIsIFwibW92XCIsIFwiM2dwXCIsIFwibXA0XCIsIFwibXA0dlwiLCBcIm00dlwiLCBcIm1rdlwiLCBcImF2aVwiLCBcImZsdlwiLCBcImY0dlwiXVxudmFyIHZpZGVvVXBsb2FkPWZ1bmN0aW9uICgpIHtcbiAgICB2YXIgdmlkZW9VcGxvYWQ9e307XG5cbiAgICAvKipcbiAgICAgKiDorqHnrpfnrb7lkI1cbiAgICAgKiovXG4gICAgICAgIC8vIGh0dHA6Ly8xMjMuMjA2LjgzLjEyMDo4MC9pbnRlcmZhY2UucGhwXG4gICAgdmFyIGdldFNpZ25hdHVyZSA9IGZ1bmN0aW9uKGNhbGxiYWNrKXtcbiAgICAgICAgICAgICQuYWpheCh7XG4gICAgICAgICAgICAgICAgdXJsOiAnL2dldHNpZ3Y0JyxcbiAgICAgICAgICAgICAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgICAgICAgICAgICAgIFwiQWN0aW9uXCI6XCJHZXRWb2RTaWduYXR1cmVWMlwiXG4gICAgICAgICAgICAgICAgfSksXG4gICAgICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzKXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzKTtcbiAgICAgICAgICAgICAgICAgICAgaWYocmVzLnJlc3VsdCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhyZXMucmVzdWx0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi6I635Y+W562+5ZCN5aSx6LSlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuICfojrflj5bnrb7lkI3lpLHotKUnO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgIHZpZGVvVXBsb2FkLmluaXQ9ZnVuY3Rpb24gKCkge1xuICAgICAgICAkKFwiI3ZpZGVvX2ZpbGVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIiN1cGxvYWRWaWRlb05vdy1maWxlXCIpLmNsaWNrKCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGZ1bmN0aW9uIGNvbnRhaW5zKGFyciwgb2JqKSB7XG4gICAgICAgICAgICB2YXIgaSA9IGFyci5sZW5ndGg7XG4gICAgICAgICAgICB3aGlsZSAoaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKGFycltpXSA9PT0gb2JqKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfmib7kuI3liLAnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgZ2V0RmlsZU1lc3NhZ2UgPSBmdW5jdGlvbihmaWxlLCBuZXduYW1lKSB7XG4gICAgICAgICAgICB2YXIgZmlsZU1zZyA9IHt9O1xuICAgICAgICAgICAgcmV0dXJuIGZpbGVNc2cudHlwZSA9IGZpbGUubmFtZS5zbGljZShmaWxlLm5hbWUubWF0Y2goL1xcLlteXFwuXSskLykuaW5kZXggKyAxKSxcbiAgICAgICAgICAgICAgICBmaWxlTXNnLm5hbWUgPSBuZXduYW1lIHx8IGZpbGUubmFtZS5zbGljZSgwLCBmaWxlLm5hbWUubWF0Y2goL1xcLlteXFwuXSskLykuaW5kZXgpLFxuICAgICAgICAgICAgICAgIGZpbGVNc2cuc2l6ZSA9IGZpbGUuc2l6ZSxcbiAgICAgICAgICAgICAgICBmaWxlTXNnLmVycm9yID0gXCJcIixcbiAgICAgICAgICAgICh2b2lkIDAgPT0gZmlsZU1zZy5uYW1lIHx8IFwiXCIgPT0gZmlsZU1zZy5uYW1lIHx8IC9bOio/LDw+XFwnXFxcIlxcXFxdL2cudGVzdChmaWxlTXNnLm5hbWUpKSAmJiAoZmlsZU1zZy5lcnJvciA9ICfmlofku7blkI3kuI3lvpfljIXlkKsgLyA6ICogPyBcIiAgPCA+IOetieWtl+espicpLFxuICAgICAgICAgICAgICAgIGZpbGVNc2dcbiAgICAgICAgfVxuICAgICAgICAkKCcjdXBsb2FkVmlkZW9Ob3ctZmlsZScpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgdmFyIHZpZGVvRmlsZSA9IHRoaXMuZmlsZXNbMF07XG4gICAgICAgICAgICB2YXIgZmlsZU1zZyA9IGdldEZpbGVNZXNzYWdlKHZpZGVvRmlsZSx2aWRlb0ZpbGUubmFtZSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhmaWxlTXNnKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGZpbGVNc2cuZXJyb3IpO1xuICAgICAgICAgICAgLy/pmZDliLbop4bpopHmlofku7blkI3kuI3og73ljIXlkKvnibnmrornrKblj7dcbiAgICAgICAgICAgIGlmKGZpbGVNc2cuZXJyb3IhPScnKXtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZmlsZU1zZy5lcnJvcik7XG4gICAgICAgICAgICAgICAgJCgnI3VwbG9hZFZpZGVvTm93LWZpbGUnKS52YWwoJycpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v6ZmQ5Yi26KeG6aKR5paH5Lu257G75Z6L5Li6bXA05paH5Lu2XG4gICAgICAgICAgICBpZighY29udGFpbnModmlkZW9UeXBlcyxmaWxlTXNnLnR5cGUpKXtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+S4iuS8oOeahOaWh+S7tuW/hemhu+S4uuinhumikeaWh+S7tuWTpn4nKTtcbiAgICAgICAgICAgICAgICAkKCcjdXBsb2FkVmlkZW9Ob3ctZmlsZScpLnZhbCgnJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/ojrflj5bmlofku7blpKflsI9cbiAgICAgICAgICAgIHZhciB2aWRlb1NpemUgPSB2aWRlb0ZpbGUuc2l6ZTtcbiAgICAgICAgICAgIHZpZGVvR3NpemUgPSBOdW1iZXIodmlkZW9TaXplLygxMDI0KjEwMjQpKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgaWYodmlkZW9Hc2l6ZT4xMDAwKXtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7flsIbop4bpopHmlofku7bljovnvKnliLAgMUcg5Lul5YaFXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gdmlkZW9GaWxlLm5hbWVcbiAgICAgICAgICAgIHZhciByZXN1bHRNc2cgPSBxY1ZpZGVvLnVnY1VwbG9hZGVyLnN0YXJ0KHtcbiAgICAgICAgICAgICAgICB2aWRlb0ZpbGU6IHZpZGVvRmlsZSxcbiAgICAgICAgICAgICAgICBnZXRTaWduYXR1cmU6IGdldFNpZ25hdHVyZSxcbiAgICAgICAgICAgICAgICBhbGxvd0F1ZGlvOiAwLFxuICAgICAgICAgICAgICAgIGlzVHJhbnNjb2RlOiB0cnVlLC8v5piv5ZCm6L2s56CBXG4gICAgICAgICAgICAgICAgdHJhbnNjb2RlTm90aWZ5VXJsOiB0cmFuc2NvZGVOb3RpZnlVcmwsIC8vKOi9rOeggeaIkOWKn+WQjueahOWbnuiwg+WcsOWdgClpc1RyYW5zY29kZT09dHJ1ZSzml7blvIDlkK/vvJsg5Zue6LCDdXJs55qE6L+U5Zue5pWw5o2u5qC85byP5Y+C6ICDICBodHRwOi8vd3d3LnFjbG91ZC5jb20vd2lraS92Mi9NdWx0aXBhcnRVcGxvYWRWb2RGaWxlXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOaIkOWKnycpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBpc19lZGl0ID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW9VcGxvYWRMaW5lQVwiKS5jc3MoJ3dpZHRoJywgXCIxMDAlXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiLnZpZGVvUGVyY2VudFwiKS50ZXh0KFwi5bey5a6M5oiQXCIpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFJhdGlvIHNwYW46bnRoLW9mLXR5cGUoMSlcIikudGV4dCh2aWRlb0dzaXplK1wiTVwiKTtcbiAgICAgICAgICAgICAgICAgICAgJChcIi51cGxvYWRSYXRpbyBzcGFuOm50aC1vZi10eXBlKDIpXCIpLnRleHQodmlkZW9Hc2l6ZStcIk1cIik7XG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ+S4iuS8oOWksei0pScpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICAgICAgICAgIGlzX2VkaXQgPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICAkKCcjdmlkZW9OYW1lJykuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAkKFwiLnZpZGVvVXBsb2FkQm94XCIpLmZhZGVJbigzMDApO1xuICAgICAgICAgICAgICAgICAgICAkKFwiLnZpZGVvQm94VGl0bGVcIikudGV4dChyZXN1bHQubmFtZSk7XG4gICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW9TaXplXCIpLnRleHQodmlkZW9Hc2l6ZSsnTScpO1xuICAgICAgICAgICAgICAgICAgICAvL+inhumikeato+WcqOino+aekOS4rVxuICAgICAgICAgICAgICAgICAgICBpZihyZXN1bHQuc2hhY3VycjwxKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW9QZXJjZW50XCIpLnRleHQoXCLop4bpopHmraPlnKjop6PmnpDkuK1cIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLnVwbG9hZFJhdGlvIHNwYW5cIikudGV4dChcIlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW9VcGxvYWRMaW5lQVwiKS5jc3MoXCJ3aWR0aFwiLFwiMCVcIik7XG4gICAgICAgICAgICAgICAgICAgIH1lbHNlIGlmKHJlc3VsdC5zaGFjdXJyPT0xKSB7ICAgLy/op4bpopHop6PmnpDlrozmiJDvvIzlvIDlp4vkuIrkvKBcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB1cGxvYWRDb21wbGV0ZVNpemU9cGFyc2VGbG9hdCh2aWRlb0dzaXplKSpwYXJzZUZsb2F0KHJlc3VsdC5jdXJyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHVwbG9hZENvbXBsZXRlU2l6ZT11cGxvYWRDb21wbGV0ZVNpemUudG9GaXhlZCgyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5b2T5YmN55m+5YiG5q+UXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgY3VyclBlcmNlbnQ9TnVtYmVyKHJlc3VsdC5jdXJyKjEwMCkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW9VcGxvYWRMaW5lQVwiKS5jc3MoXCJ3aWR0aFwiLGN1cnJQZXJjZW50K1wiJVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudmlkZW9QZXJjZW50XCIpLnRleHQoY3VyclBlcmNlbnQrXCIlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi51cGxvYWRSYXRpbyBzcGFuOm50aC1vZi10eXBlKDEpXCIpLnRleHQodXBsb2FkQ29tcGxldGVTaXplK1wiTVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIudXBsb2FkUmF0aW8gc3BhbjpudGgtb2YtdHlwZSgyKVwiKS50ZXh0KHZpZGVvR3NpemUrXCJNXCIpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC50eXBlID09ICd2aWRlbycpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGZpbmlzaDogZnVuY3Rpb24ocmVzdWx0KXtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ2ZpbmlzaCcpO1xuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXN1bHQpO1xuICAgICAgICAgICAgICAgICAgICBmaWxlSWQ9cmVzdWx0LmZpbGVJZDtcbiAgICAgICAgICAgICAgICAgICAgVmlkZW9OYW1lID0gcmVzdWx0LnZpZGVvTmFtZTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB2aWRlb1VwbG9hZDtcbn0oKTtcblxuXG4iXX0=
