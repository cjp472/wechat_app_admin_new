(function(i,e,t,s){e(function(){new n});function n(i){this.options=i||{};this.app_id=e("#app_id").val();this.pay_verify=e("#pay_verify").val();this.is_update=e("#is_update").val();this.change=GetQueryString("change");this.init()}n.prototype={init:function(){var i=this;this.authHandle();if(this.pay_verify==0){if(this.is_update==0){e("#updateBindBtn").click(function(){e.get("/mini/updateBind",function(i){if(i.code==0){reloadPage()}else{console.error(i.msg);reloadPage()}},"json")})}else{e("#experUrlCode").attr("src",miniexperUrl+this.app_id);var t=new QRCode(document.getElementById("H5UrlCode"),{text:e("#H5Url").val(),width:135,height:135,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});e("#screenBtn").click(function(){e.post("/mini/userCheck",function(i){console.log(i);if(i.code==0){e.alert("用户验证成功，您的小程序即将提交微信审核，请耐心等待!","success",{title:"验证成功",btn:2,onOk:function(){window.location.reload()}})}else{console.error(i.msg);e.alert("用户验证失败，请确认您关联至开放平台的小程序和服务号与授权信息一致。或者请重新使用管理员微信扫描两个二维码。确认无误仍无法验证成功，请联系产品鹅微信：chanpine2","error",{title:"",btn:2})}},"json")})}}else{if(this.change==1){this.editInfo()}}e("#editImg").click(this.editInfo.bind(this));e("#saveMer").click(this.saveMer.bind(this));e(".reAudit").click(this.reSubmitAudit.bind(this))},authHandle:function(){var i=this.app_id;e("#reAuth").click(t);e("#bindSuccess").click(function(){window.location.reload()});e("#bindFail").click(t);function t(){var t=window.open("","_blank");e.post("/mini/authority ",{app_id:i,reAuth:1},function(s){if(s.code==0){t.location.href=miniauthUrl+i;e("#bindModal").modal("show")}else{baseUtils.show.redTip("系统繁忙")}},"json")}},editInfo:function(){e("#setMiniInfo input").prop("disabled",false).removeClass("disEdit");e("#saveMer").parent().removeClass("hide")},editsuccess:function(){e("#setMiniInfo input").prop("disabled",true).addClass("disEdit");e("#saveMer").parent().addClass("hide");if(e("#editImg").hasClass("hide")){e("#editImg").removeClass("hide")}if(!e("#pay_set_hint").hasClass("hide")){e("#pay_set_hint").addClass("hide")}e.alert("小程序正在开发中，等待提交审核，约1个工作日，请耐心等待","success",{title:"设置成功",btn:2})},saveMer:function(){var i=e.trim(e("#wx_mchid").val()),t=e.trim(e("#wx_mchkey").val()),s=this;if(i==""){baseUtils.show.redTip("商户号不能为空");return false}if(t==""){baseUtils.show.redTip("API密钥不能为空");return false}e.post("/mini/merchant",{wx_mchid:i,wx_mchkey:t},function(i){if(i.code==0){s.editsuccess()}else{baseUtils.show.redTip(i.msg)}},"json")},reSubmitAudit:function(){var i=e("#app_id").val();e.alert("请确认已按照审核失败原因进行修改并重新提交审核!","info",{title:"",btn:3,oktext:"提交审核",onOk:function(){e.post("/mini/resubmitAudit ",{app_id:i},function(i){if(i.code==0){baseUtils.show.blueTip("提交审核成功");window.location.reload()}else{baseUtils.show.redTip("提交审核失败")}},"json")}})}}})(window,window.$,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2FjY291bnRTZXR0aW5nL21pbmkvaW5mby5qcyJdLCJuYW1lcyI6WyJ3aW4iLCIkIiwiZG9jIiwidW5kZWZpbmVkIiwiUGVyc29uIiwib3B0aW9ucyIsInRoaXMiLCJhcHBfaWQiLCJ2YWwiLCJwYXlfdmVyaWZ5IiwiaXNfdXBkYXRlIiwiY2hhbmdlIiwiR2V0UXVlcnlTdHJpbmciLCJpbml0IiwicHJvdG90eXBlIiwic2VsZiIsImF1dGhIYW5kbGUiLCJjbGljayIsImdldCIsImpzb24iLCJjb2RlIiwicmVsb2FkUGFnZSIsImNvbnNvbGUiLCJlcnJvciIsIm1zZyIsImF0dHIiLCJtaW5pZXhwZXJVcmwiLCJxcmNvZGUiLCJRUkNvZGUiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwidGV4dCIsIndpZHRoIiwiaGVpZ2h0IiwiY29sb3JEYXJrIiwiY29sb3JMaWdodCIsImNvcnJlY3RMZXZlbCIsIkNvcnJlY3RMZXZlbCIsIkgiLCJwb3N0IiwibG9nIiwiYWxlcnQiLCJ0aXRsZSIsImJ0biIsIm9uT2siLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInJlbG9hZCIsImVkaXRJbmZvIiwiYmluZCIsInNhdmVNZXIiLCJyZVN1Ym1pdEF1ZGl0Iiwic2hvd05ld1dpbiIsIm5ld1dpbiIsIm9wZW4iLCJyZUF1dGgiLCJocmVmIiwibWluaWF1dGhVcmwiLCJtb2RhbCIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJwcm9wIiwicmVtb3ZlQ2xhc3MiLCJwYXJlbnQiLCJlZGl0c3VjY2VzcyIsImFkZENsYXNzIiwiaGFzQ2xhc3MiLCJ3eF9tY2hpZCIsInRyaW0iLCJ3eF9tY2hrZXkiLCJva3RleHQiLCJibHVlVGlwIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFXQSxFQUFLQyxFQUFHQyxFQUFLQyxHQUNwQkYsRUFBRSxXQUNFLEdBQUlHLElBSVIsU0FBU0EsR0FBT0MsR0FDWkMsS0FBS0QsUUFBVUEsS0FDZkMsTUFBS0MsT0FBU04sRUFBRSxXQUFXTyxLQUMzQkYsTUFBS0csV0FBYVIsRUFBRSxlQUFlTyxLQUNuQ0YsTUFBS0ksVUFBWVQsRUFBRSxjQUFjTyxLQUNqQ0YsTUFBS0ssT0FBU0MsZUFBZSxTQUM3Qk4sTUFBS08sT0FHVFQsRUFBT1UsV0FDSEQsS0FBTSxXQUNGLEdBQUlFLEdBQU9ULElBQ1hBLE1BQUtVLFlBRUwsSUFBSVYsS0FBS0csWUFBYyxFQUFHLENBQ3RCLEdBQUlILEtBQUtJLFdBQWEsRUFBRyxDQUNyQlQsRUFBRSxrQkFBa0JnQixNQUFNLFdBQ3RCaEIsRUFBRWlCLElBQUksbUJBQW9CLFNBQVVDLEdBRWhDLEdBQUlBLEVBQUtDLE1BQVEsRUFBRyxDQUNoQkMsaUJBQ0csQ0FDSEMsUUFBUUMsTUFBTUosRUFBS0ssSUFDbkJILGdCQUVMLGNBRUosQ0FDSHBCLEVBQUUsaUJBQWlCd0IsS0FBSyxNQUFPQyxhQUFlcEIsS0FBS0MsT0FDbkQsSUFBSW9CLEdBQVMsR0FBSUMsUUFBT0MsU0FBU0MsZUFBZSxjQUM1Q0MsS0FBTTlCLEVBQUUsVUFBVU8sTUFDbEJ3QixNQUFPLElBQ1BDLE9BQVEsSUFDUkMsVUFBVyxVQUNYQyxXQUFZLFVBQ1pDLGFBQWNSLE9BQU9TLGFBQWFDLEdBRXRDckMsR0FBRSxjQUFjZ0IsTUFBTSxXQUNsQmhCLEVBQUVzQyxLQUFLLGtCQUFtQixTQUFVcEIsR0FDaENHLFFBQVFrQixJQUFJckIsRUFDWixJQUFJQSxFQUFLQyxNQUFRLEVBQUcsQ0FNaEJuQixFQUFFd0MsTUFBTSw4QkFBK0IsV0FDbkNDLE1BQU8sT0FDUEMsSUFBSyxFQUNMQyxLQUFLLFdBQ0RDLE9BQU9DLFNBQVNDLGdCQUdyQixDQUVIekIsUUFBUUMsTUFBTUosRUFBS0ssSUFDbkJ2QixHQUFFd0MsTUFBTSx1RkFDSixTQUVJQyxNQUFPLEdBQ1BDLElBQUssTUFHbEIsZUFHUixDQUNILEdBQUlyQyxLQUFLSyxRQUFVLEVBQUcsQ0FDbEJMLEtBQUswQyxZQUliL0MsRUFBRSxZQUFZZ0IsTUFBTVgsS0FBSzBDLFNBQVNDLEtBQUszQyxNQUV2Q0wsR0FBRSxZQUFZZ0IsTUFBTVgsS0FBSzRDLFFBQVFELEtBQUszQyxNQUV0Q0wsR0FBRSxZQUFZZ0IsTUFBTVgsS0FBSzZDLGNBQWNGLEtBQUszQyxRQUdoRFUsV0FBWSxXQUNSLEdBQUlULEdBQVNELEtBQUtDLE1BRWxCTixHQUFFLFdBQVdnQixNQUFNbUMsRUFHbkJuRCxHQUFFLGdCQUFnQmdCLE1BQU0sV0FDcEI0QixPQUFPQyxTQUFTQyxVQUlwQjlDLEdBQUUsYUFBYWdCLE1BQU1tQyxFQUVyQixTQUFTQSxLQUNMLEdBQUlDLEdBQVNSLE9BQU9TLEtBQUssR0FBSSxTQUU3QnJELEdBQUVzQyxLQUFLLG9CQUFxQmhDLE9BQVVBLEVBQU9nRCxPQUFTLEdBQUksU0FBVXBDLEdBQ2hFLEdBQUlBLEVBQUtDLE1BQVEsRUFBRyxDQUNoQmlDLEVBQU9QLFNBQVNVLEtBQU9DLFlBQWNsRCxDQUNyQ04sR0FBRSxjQUFjeUQsTUFBTSxZQUNuQixDQUNIQyxVQUFVQyxLQUFLQyxPQUFPLFVBRTNCLFVBR1hiLFNBQVUsV0FDTi9DLEVBQUUsc0JBQXNCNkQsS0FBSyxXQUFZLE9BQU9DLFlBQVksVUFDNUQ5RCxHQUFFLFlBQVkrRCxTQUFTRCxZQUFZLFNBRXZDRSxZQUFhLFdBQ1RoRSxFQUFFLHNCQUFzQjZELEtBQUssV0FBWSxNQUFNSSxTQUFTLFVBQ3hEakUsR0FBRSxZQUFZK0QsU0FBU0UsU0FBUyxPQUNoQyxJQUFJakUsRUFBRSxZQUFZa0UsU0FBUyxRQUFTLENBQ2hDbEUsRUFBRSxZQUFZOEQsWUFBWSxRQUU5QixJQUFNOUQsRUFBRSxpQkFBaUJrRSxTQUFTLFFBQVUsQ0FDeENsRSxFQUFFLGlCQUFpQmlFLFNBQVMsUUFHaENqRSxFQUFFd0MsTUFBTSwrQkFDSixXQUVJQyxNQUFPLE9BQ1BDLElBQUssS0FHakJPLFFBQVMsV0FDTCxHQUFJa0IsR0FBV25FLEVBQUVvRSxLQUFLcEUsRUFBRSxhQUFhTyxPQUNqQzhELEVBQVlyRSxFQUFFb0UsS0FBS3BFLEVBQUUsY0FBY08sT0FDbkNPLEVBQU9ULElBQ1gsSUFBSThELEdBQVksR0FBSSxDQUNoQlQsVUFBVUMsS0FBS0MsT0FBTyxVQUN0QixPQUFPLE9BRVgsR0FBSVMsR0FBYSxHQUFJLENBQ2pCWCxVQUFVQyxLQUFLQyxPQUFPLFlBQ3RCLE9BQU8sT0FFWDVELEVBQUVzQyxLQUFLLGtCQUNINkIsU0FBVUEsRUFDVkUsVUFBV0EsR0FDWixTQUFVbkQsR0FDVCxHQUFJQSxFQUFLQyxNQUFRLEVBQUcsQ0FDaEJMLEVBQUtrRCxrQkFDRixDQUNITixVQUFVQyxLQUFLQyxPQUFPMUMsRUFBS0ssT0FFaEMsU0FFUDJCLGNBQWMsV0FDVixHQUFJNUMsR0FBU04sRUFBRSxXQUFXTyxLQUMxQlAsR0FBRXdDLE1BQU0sMkJBQTRCLFFBQ2hDQyxNQUFPLEdBQ1BDLElBQUssRUFDTDRCLE9BQU8sT0FDUDNCLEtBQUssV0FDRDNDLEVBQUVzQyxLQUFLLHdCQUF5QmhDLE9BQVVBLEdBQVMsU0FBVVksR0FDekQsR0FBSUEsRUFBS0MsTUFBUSxFQUFHLENBQ2hCdUMsVUFBVUMsS0FBS1ksUUFBUSxTQUN2QjNCLFFBQU9DLFNBQVNDLGFBQ2IsQ0FDSFksVUFBVUMsS0FBS0MsT0FBTyxZQUUzQixlQVFwQmhCLE9BQVFBLE9BQU81QyxFQUFHNEIiLCJmaWxlIjoiYWRtaW4vYWNjb3VudFNldHRpbmcvbWluaS9pbmZvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uICh3aW4sICQsIGRvYywgdW5kZWZpbmVkKSB7XHJcbiAgICAkKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBuZXcgUGVyc29uKCk7XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgZnVuY3Rpb24gUGVyc29uKG9wdGlvbnMpIHtcclxuICAgICAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xyXG4gICAgICAgIHRoaXMuYXBwX2lkID0gJCgnI2FwcF9pZCcpLnZhbCgpO1xyXG4gICAgICAgIHRoaXMucGF5X3ZlcmlmeSA9ICQoJyNwYXlfdmVyaWZ5JykudmFsKCk7XHJcbiAgICAgICAgdGhpcy5pc191cGRhdGUgPSAkKCcjaXNfdXBkYXRlJykudmFsKCk7XHJcbiAgICAgICAgdGhpcy5jaGFuZ2UgPSBHZXRRdWVyeVN0cmluZygnY2hhbmdlJyk7XHJcbiAgICAgICAgdGhpcy5pbml0KCk7XHJcbiAgICB9XHJcblxyXG4gICAgUGVyc29uLnByb3RvdHlwZSA9IHtcclxuICAgICAgICBpbml0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzZWxmID0gdGhpcztcclxuICAgICAgICAgICAgdGhpcy5hdXRoSGFuZGxlKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5wYXlfdmVyaWZ5ID09IDApIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmlzX3VwZGF0ZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3VwZGF0ZUJpbmRCdG4nKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQuZ2V0KCcvbWluaS91cGRhdGVCaW5kJywgZnVuY3Rpb24gKGpzb24pIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZWxvYWRQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoanNvbi5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbG9hZFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgJ2pzb24nKTtcclxuICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjZXhwZXJVcmxDb2RlJykuYXR0cignc3JjJywgbWluaWV4cGVyVXJsICsgdGhpcy5hcHBfaWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBxcmNvZGUgPSBuZXcgUVJDb2RlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiSDVVcmxDb2RlXCIpLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ6ICQoJyNINVVybCcpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMTM1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEzNSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JEYXJrOiBcIiMwMDAwMDBcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3JMaWdodDogXCIjZmZmZmZmXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvcnJlY3RMZXZlbDogUVJDb2RlLkNvcnJlY3RMZXZlbC5IXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnI3NjcmVlbkJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5wb3N0KCcvbWluaS91c2VyQ2hlY2snLCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coanNvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKCfpqozor4HmiJDlip8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcjbm90U2NyZWVuQ29kZScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJCgnI2hhc1NjcmVlbkNvZGUnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoJyNzZXRNaW5pSW5mbycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gc2VsZi5lZGl0SW5mbygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCLnlKjmiLfpqozor4HmiJDlip/vvIzmgqjnmoTlsI/nqIvluo/ljbPlsIbmj5DkuqTlvq7kv6HlrqHmoLjvvIzor7fogJDlv4PnrYnlvoUhXCIsICdzdWNjZXNzJywge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+mqjOivgeaIkOWKnycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PazpmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYmFzZVV0aWxzLnNob3cucmVkVGlwKGpzb24ubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGpzb24ubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmFsZXJ0KCfnlKjmiLfpqozor4HlpLHotKXvvIzor7fnoa7orqTmgqjlhbPogZToh7PlvIDmlL7lubPlj7DnmoTlsI/nqIvluo/lkozmnI3liqHlj7fkuI7mjojmnYPkv6Hmga/kuIDoh7TjgILmiJbogIXor7fph43mlrDkvb/nlKjnrqHnkIblkZjlvq7kv6Hmiavmj4/kuKTkuKrkuoznu7TnoIHjgILnoa7orqTml6Dor6/ku43ml6Dms5Xpqozor4HmiJDlip/vvIzor7fogZTns7vkuqflk4HpuYXlvq7kv6HvvJpjaGFucGluZTInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnZXJyb3InLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IDJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sICdqc29uJylcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmNoYW5nZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5lZGl0SW5mbygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkKCcjZWRpdEltZycpLmNsaWNrKHRoaXMuZWRpdEluZm8uYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgICAgICAkKCcjc2F2ZU1lcicpLmNsaWNrKHRoaXMuc2F2ZU1lci5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgICQoXCIucmVBdWRpdFwiKS5jbGljayh0aGlzLnJlU3VibWl0QXVkaXQuYmluZCh0aGlzKSk7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgYXV0aEhhbmRsZTogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXBwX2lkID0gdGhpcy5hcHBfaWQ7XHJcbiAgICAgICAgICAgIC8v6YeN5paw5o6I5p2D54K55Ye7XHJcbiAgICAgICAgICAgICQoXCIjcmVBdXRoXCIpLmNsaWNrKHNob3dOZXdXaW4pO1xyXG5cclxuICAgICAgICAgICAgLy/mjojmnYPmiJDlip/mjInpkq7ngrnlh7vliLfmlrBcclxuICAgICAgICAgICAgJChcIiNiaW5kU3VjY2Vzc1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy/mjojmnYPlpLHotKXvvIznu6fnu63lvLnlh7pcclxuICAgICAgICAgICAgJChcIiNiaW5kRmFpbFwiKS5jbGljayhzaG93TmV3V2luKTtcclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNob3dOZXdXaW4oKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV3V2luID0gd2luZG93Lm9wZW4oJycsICdfYmxhbmsnKTtcclxuXHJcbiAgICAgICAgICAgICAgICAkLnBvc3QoXCIvbWluaS9hdXRob3JpdHkgXCIsIHtcImFwcF9pZFwiOiBhcHBfaWQsXCJyZUF1dGhcIjoxfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoanNvbi5jb2RlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3V2luLmxvY2F0aW9uLmhyZWYgPSBtaW5pYXV0aFVybCArIGFwcF9pZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNiaW5kTW9kYWxcIikubW9kYWwoXCJzaG93XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuezu+e7n+e5geW/mVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LCAnanNvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlZGl0SW5mbzogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjc2V0TWluaUluZm8gaW5wdXQnKS5wcm9wKCdkaXNhYmxlZCcsIGZhbHNlKS5yZW1vdmVDbGFzcygnZGlzRWRpdCcpO1xyXG4gICAgICAgICAgICAkKCcjc2F2ZU1lcicpLnBhcmVudCgpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBlZGl0c3VjY2VzczogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKCcjc2V0TWluaUluZm8gaW5wdXQnKS5wcm9wKCdkaXNhYmxlZCcsIHRydWUpLmFkZENsYXNzKCdkaXNFZGl0Jyk7XHJcbiAgICAgICAgICAgICQoJyNzYXZlTWVyJykucGFyZW50KCkuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgaWYgKCQoXCIjZWRpdEltZ1wiKS5oYXNDbGFzcyhcImhpZGVcIikpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjZWRpdEltZ1wiKS5yZW1vdmVDbGFzcyhcImhpZGVcIik7IC8v5L+d5a2Y5pSv5LuY6YWN572u5oiQ5YqfLOaYvuekuue8lui+keaMiemSrlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICghKCQoXCIjcGF5X3NldF9oaW50XCIpLmhhc0NsYXNzKFwiaGlkZVwiKSkpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjcGF5X3NldF9oaW50XCIpLmFkZENsYXNzKFwiaGlkZVwiKTsgLy/pmpDol4/mlK/ku5jphY3nva7mj5DnpLpcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJC5hbGVydCgn5bCP56iL5bqP5q2j5Zyo5byA5Y+R5Lit77yM562J5b6F5o+Q5Lqk5a6h5qC477yM57qmMeS4quW3peS9nOaXpe+8jOivt+iAkOW/g+etieW+hScsXHJcbiAgICAgICAgICAgICAgICAnc3VjY2VzcycsXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6ICforr7nva7miJDlip8nLFxyXG4gICAgICAgICAgICAgICAgICAgIGJ0bjogMlxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBzYXZlTWVyOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB3eF9tY2hpZCA9ICQudHJpbSgkKCcjd3hfbWNoaWQnKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICB3eF9tY2hrZXkgPSAkLnRyaW0oJCgnI3d4X21jaGtleScpLnZhbCgpKSxcclxuICAgICAgICAgICAgICAgIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICBpZiAod3hfbWNoaWQgPT0gJycpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5ZWG5oi35Y+35LiN6IO95Li656m6Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHd4X21jaGtleSA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCdBUEnlr4bpkqXkuI3og73kuLrnqbonKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkLnBvc3QoJy9taW5pL21lcmNoYW50Jywge1xyXG4gICAgICAgICAgICAgICAgd3hfbWNoaWQ6IHd4X21jaGlkLFxyXG4gICAgICAgICAgICAgICAgd3hfbWNoa2V5OiB3eF9tY2hrZXlcclxuICAgICAgICAgICAgfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHNlbGYuZWRpdHN1Y2Nlc3MoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGpzb24ubXNnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSwgJ2pzb24nKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlU3VibWl0QXVkaXQ6ZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYXBwX2lkID0gJCgnI2FwcF9pZCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAkLmFsZXJ0KFwi6K+356Gu6K6k5bey5oyJ54Wn5a6h5qC45aSx6LSl5Y6f5Zug6L+b6KGM5L+u5pS55bm26YeN5paw5o+Q5Lqk5a6h5qC4IVwiLCAnaW5mbycsIHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgICAgIGJ0bjogMyxcclxuICAgICAgICAgICAgICAgIG9rdGV4dDpcIuaPkOS6pOWuoeaguFwiLFxyXG4gICAgICAgICAgICAgICAgb25PazpmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJC5wb3N0KFwiL21pbmkvcmVzdWJtaXRBdWRpdCBcIiwge1wiYXBwX2lkXCI6IGFwcF9pZH0sIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuaPkOS6pOWuoeaguOaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaPkOS6pOWuoeaguOWksei0pVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sICdqc29uJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxufSkod2luZG93LCB3aW5kb3cuJCwgZG9jdW1lbnQpOyJdfQ==
