$(document).ready(function(){$chosenShop.init()});$chosenShop={tabState:"goods",init:function(){$("._switchOperateArea").on("click","._functionSwitch",function(e){var t=$(e.delegateTarget).data("switch_state");if(t){baseUtils.show.redTip("开关已开启，暂不支持关闭");return false}$chosenShop.showOpenChosenTip()});$("#_contentTabWrapper").on("click","li",function(){var e=$(this).val();if(e==1){history.replaceState(null,"","/chosen/homepage?page_type=goods");$chosenShop.getNewPage("goods");$chosenShop.tabState="goods"}else{history.replaceState(null,"","/chosen/homepage?page_type=record");$chosenShop.getNewPage("record");$chosenShop.tabState="record";$recordList.search=""}});$("#_mainContentPart").on("click"," .pagination li a",function(e){var t=$(e.target),o=t.data("url");$chosenShop.getNewPage($chosenShop.tabState,{},o)})},upDatePaging:function(e){var e=e||".list-page";$(e+" .pagination li a").each(function(){var e=$(this);e.attr("data-url",e.attr("href"));e.removeAttr("href")})},getNewPage:function(e,t,o){var t=t||{};var o=o||"";if(!o){if(e=="goods"){o="/chosen/get_goods_list"}else if(e=="record"){o="/chosen/get_record_list"}else{console.log("参数错误.");return false}}else{var a=o,s=/(\/chosen\/.*)\?/,n=/(\?|&)(.+?)=/g,c=/=([^&]*)(&|$)/g;o=a.match(s)[1];var i=a.match(n),r=a.match(c);var h=i.length;for(var l=0;l<h;l++){var d=i[l];var g=r[l];g=decodeURI(g.slice(1,g.length));if(g[g.length-1]==="&"){t[d.slice(1,d.length-1)]=g.slice(0,g.length-1)}else{t[d.slice(1,d.length-1)]=g}}}baseUtils.showLoading("mainContentLoading");$.ajax(o,{type:"POST",dataType:"html",data:t,success:function(t){baseUtils.hideLoading("mainContentLoading");if(t.length>0){$("#_mainContentPart").html(t);$chosenShop.switchContentTab(e);if(e!=="goods"){$chosenShop.upDatePaging()}else{$goodsList.goodsCount=$("#addDistributeGoods").data("count")}if(e==="record"){$("#search_content").val($recordList.search)}}else{baseUtils.show.redTip("没有数据，请稍后再试")}},error:function(e,t,o){baseUtils.hideLoading("mainContentLoading");console.log(o);alert("服务器出小差了，请稍后再试！")}})},showOpenChosenTip:function(){$.alert("您第一次使用小鹅通精选服务，是否打开推广开关，并开启小鹅通精选服务（开启后暂不支持关闭）","info",{oktext:"立即开启",onOk:function(){$.ajax("/chosen/chosen_enable",{type:"POST",dataType:"json",data:{is_enable_chosen:1},success:function(e){if(e.code==0){baseUtils.show.blueTip("开启成功");$chosenShop.changeSwitchState()}else{alert("服务器出小差了，请稍后再试！")}},error:function(e,t,o){console.log(o);alert("服务器出小差了，请稍后再试！")}})}})},switchContentTab:function(e){if(e=="goods"){$("#_goodsListTab").addClass("_activeTab");$("#_recordListTab").removeClass("_activeTab")}else if(e=="record"){$("#_recordListTab").addClass("_activeTab");$("#_goodsListTab").removeClass("_activeTab")}},changeSwitchState:function(){var e=$("._switchOperateArea ._functionSwitch"),t=!$("._switchOperateArea").data("switch_state");if(t){e.css({"background-color":"#2FCE6F"});e.children("._switchDescText").css({left:"9px"});e.children("._switchDescText").text("开启");e.children("._switchButtonIcon").css({left:"40px"})}else{e.css({"background-color":"#c2c2c2"});e.children("._switchDescText").css({left:"44px"});e.children("._switchDescText").text("关闭");e.children("._switchButtonIcon").css({left:"0px"})}$("._switchOperateArea").data("switch_state",t)}};
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImhvbWVwYWdlLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwiJGNob3NlblNob3AiLCJpbml0IiwidGFiU3RhdGUiLCJvbiIsImUiLCJzd2l0Y2hTdGF0ZSIsImRlbGVnYXRlVGFyZ2V0IiwiZGF0YSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJzaG93T3BlbkNob3NlblRpcCIsInN0YXRlIiwidGhpcyIsInZhbCIsImhpc3RvcnkiLCJyZXBsYWNlU3RhdGUiLCJnZXROZXdQYWdlIiwiJHJlY29yZExpc3QiLCJzZWFyY2giLCJlbCIsInRhcmdldCIsInVybCIsInVwRGF0ZVBhZ2luZyIsInBhZ2luZ0NsYXNzIiwiZWFjaCIsImF0dHIiLCJyZW1vdmVBdHRyIiwidGFyZ2V0VGFiIiwicGFyYW1zIiwicG9zdFVybCIsImNvbnNvbGUiLCJsb2ciLCJwb3J0dXJsX3BhdHRlcm4iLCJwYXJhbV9wYXR0ZXJuIiwicGFyYW1fdmFsdWVfcGF0dGVybiIsIm1hdGNoIiwicGFyYW1fYXJyIiwicGFyYW1fdmFsdWVfYXJyIiwibGVuIiwibGVuZ3RoIiwiaSIsInBhcmFtIiwicGFyYW1fdmFsdWUiLCJkZWNvZGVVUkkiLCJzbGljZSIsInNob3dMb2FkaW5nIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJoaWRlTG9hZGluZyIsImh0bWwiLCJzd2l0Y2hDb250ZW50VGFiIiwiJGdvb2RzTGlzdCIsImdvb2RzQ291bnQiLCJlcnJvciIsInhociIsInN0YXR1cyIsImVyciIsImFsZXJ0Iiwib2t0ZXh0Iiwib25PayIsImlzX2VuYWJsZV9jaG9zZW4iLCJjb2RlIiwiYmx1ZVRpcCIsImNoYW5nZVN3aXRjaFN0YXRlIiwidGFyZ2V0U3RhdGUiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiJHRhcmdldCIsImNzcyIsImJhY2tncm91bmQtY29sb3IiLCJjaGlsZHJlbiIsImxlZnQiLCJ0ZXh0Il0sIm1hcHBpbmdz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QlUsS0FBSyxlQUFnQksiLCJmaWxlIjoiaG9tZXBhZ2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICRjaG9zZW5TaG9wLmluaXQoKTtcclxufSk7XHJcblxyXG4kY2hvc2VuU2hvcCA9IHtcclxuXHJcbiAgICB0YWJTdGF0ZTogXCJnb29kc1wiLCAgIC8vXCJnb29kc1wiLCBcInJlY29yZFwiXHJcblxyXG4gICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8vIOW8gOWFs1xyXG4gICAgICAgICQoXCIuX3N3aXRjaE9wZXJhdGVBcmVhXCIpLm9uKFwiY2xpY2tcIiwgXCIuX2Z1bmN0aW9uU3dpdGNoXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIHZhciBzd2l0Y2hTdGF0ZSA9ICQoZS5kZWxlZ2F0ZVRhcmdldCkuZGF0YShcInN3aXRjaF9zdGF0ZVwiKTsvL+W9k+WJjeeKtuaAgVxyXG5cclxuICAgICAgICAgICAgaWYgKHN3aXRjaFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLlvIDlhbPlt7LlvIDlkK/vvIzmmoLkuI3mlK/mjIHlhbPpl61cIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJGNob3NlblNob3Auc2hvd09wZW5DaG9zZW5UaXAoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL3RhYuWIh+aNolxyXG4gICAgICAgICQoXCIjX2NvbnRlbnRUYWJXcmFwcGVyXCIpLm9uKFwiY2xpY2tcIiwgXCJsaVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICBoaXN0b3J5LnJlcGxhY2VTdGF0ZShudWxsLCBcIlwiLCBcIi9jaG9zZW4vaG9tZXBhZ2U/cGFnZV90eXBlPWdvb2RzXCIpO1xyXG4gICAgICAgICAgICAgICAgJGNob3NlblNob3AuZ2V0TmV3UGFnZShcImdvb2RzXCIpO1xyXG4gICAgICAgICAgICAgICAgJGNob3NlblNob3AudGFiU3RhdGUgPSAnZ29vZHMnO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaGlzdG9yeS5yZXBsYWNlU3RhdGUobnVsbCwgXCJcIiwgXCIvY2hvc2VuL2hvbWVwYWdlP3BhZ2VfdHlwZT1yZWNvcmRcIik7XHJcbiAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC5nZXROZXdQYWdlKFwicmVjb3JkXCIpO1xyXG4gICAgICAgICAgICAgICAgJGNob3NlblNob3AudGFiU3RhdGUgPSAncmVjb3JkJztcclxuICAgICAgICAgICAgICAgICRyZWNvcmRMaXN0LnNlYXJjaCA9ICcnOyAvLyDmuIXnqbrmkJzntKLlm57loavmlbDlgLxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyDliIbpobXor7fmsYJcclxuICAgICAgICAkKFwiI19tYWluQ29udGVudFBhcnRcIikub24oXCJjbGlja1wiLFwiIC5wYWdpbmF0aW9uIGxpIGFcIiwgZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgIHZhciBlbCA9ICQoZS50YXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgdXJsID0gZWwuZGF0YSgndXJsJyk7XHJcbiAgICAgICAgICAgICRjaG9zZW5TaG9wLmdldE5ld1BhZ2UoJGNob3NlblNob3AudGFiU3RhdGUsIHt9LCB1cmwpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH0sXHJcbiAgICAvKiDmm7TmlrDliIbpobXnmoTliJ3lp4vnirbmgIFcclxuICAgICAqIOWPguaVsOivtOaYju+8mlxyXG4gICAgICogIHBhZ2luZ0NsYXNzIOWIhumhteWkluWxgueahGRpdlxyXG4gICAgICovXHJcbiAgICB1cERhdGVQYWdpbmc6IGZ1bmN0aW9uKHBhZ2luZ0NsYXNzKXtcclxuICAgICAgICB2YXIgcGFnaW5nQ2xhc3MgPSBwYWdpbmdDbGFzcyB8fCAnLmxpc3QtcGFnZSc7XHJcbiAgICAgICAgJChwYWdpbmdDbGFzcyArICcgLnBhZ2luYXRpb24gbGkgYScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICB2YXIgZWwgPSAkKHRoaXMpO1xyXG4gICAgICAgICAgIGVsLmF0dHIoJ2RhdGEtdXJsJywgZWwuYXR0cignaHJlZicpKTtcclxuICAgICAgICAgICBlbC5yZW1vdmVBdHRyKCdocmVmJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG5cclxuICAgIC8qIOabtOaWsOmhtemdouaVsOaNrlxyXG4gICAgICog5Y+C5pWw6K+05piO77yaXHJcbiAgICAgKiAgdGFyZ2V0VGFiIDog6KaB5Yqg6L2955qE55uu5qCH6aG1XHJcbiAgICAgKiAgcGFyYW1zIDog5Y+C5pWw5a+56LGhXHJcbiAgICAgKiAgcG9zdFVybCA6IOmAmui/h2HmoIfnrb7ojrflvpfnmoTpk77mjqXvvJrlpoLvvJpodHRwOi8vbG9jYWxob3N0L2Nob3Nlbi9nZXRfcmVjb3JkX2xpc3Q/c2VhcmNoPSZwYWdlPTNcclxuICAgICAqICDms6jmhI/vvJpwYXJhbXMg5ZKMIHBvc3RVcmwg5LqM6YCJ5LiA77yM6LCD55So5pa55byP5YiG5Yir5aaC5LiL77yaXHJcbiAgICAgKiAgICAgICRjaG9zZW5TaG9wLmdldE5ld1BhZ2UodGFyZ2V0VGFiLHt9LHVybCk7IC8vIOWPquS8oOmAknRhcmdldFRhYuWSjHVybO+8jOeUqOS6juWIhumhtVxyXG4gICAgICogICAgICAkY2hvc2VuU2hvcC5nZXROZXdQYWdlKHRhcmdldFRhYixwYXJhbXMpOyAvLyDlj6rkvKDpgJJ0YXJnZXRUYWLlkoxwYXJhbe+8jOeUqOS6juaQnOe0olxyXG4gICAgICovXHJcbiAgICBnZXROZXdQYWdlOiBmdW5jdGlvbiAodGFyZ2V0VGFiLCBwYXJhbXMsIHBvc3RVcmwpIHsgIC8vXCJnb29kc1wiLCBcInJlY29yZFwiXHJcbiAgICAgICAgdmFyIHBhcmFtcyA9IHBhcmFtcyB8fCB7fTtcclxuICAgICAgICB2YXIgcG9zdFVybCA9IHBvc3RVcmwgfHwgXCJcIjtcclxuXHJcbiAgICAgICAgLy8g5Yid5aeL5YyW54q25oCBXHJcbiAgICAgICAgaWYoIXBvc3RVcmwpe1xyXG4gICAgICAgICAgICBpZiAodGFyZ2V0VGFiID09IFwiZ29vZHNcIikge1xyXG4gICAgICAgICAgICAgICAgcG9zdFVybCA9IFwiL2Nob3Nlbi9nZXRfZ29vZHNfbGlzdFwiO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldFRhYiA9PSBcInJlY29yZFwiKSB7XHJcbiAgICAgICAgICAgICAgICBwb3N0VXJsID0gXCIvY2hvc2VuL2dldF9yZWNvcmRfbGlzdFwiO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlj4LmlbDplJnor68uXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8vIOino+aekHVybFxyXG4gICAgICAgICAgICB2YXIgdXJsID0gcG9zdFVybCxcclxuICAgICAgICAgICAgICAgIHBvcnR1cmxfcGF0dGVybiA9IC8oXFwvY2hvc2VuXFwvLiopXFw/LywgLy8g5Yy56YWN6Lev55SxXHJcbiAgICAgICAgICAgICAgICBwYXJhbV9wYXR0ZXJuID0gLyhcXD98JikoLis/KT0vZywgLy8g5Yy56YWN5Y+C5pWwXHJcbiAgICAgICAgICAgICAgICBwYXJhbV92YWx1ZV9wYXR0ZXJuID0gLz0oW14mXSopKCZ8JCkvZzsgLy8g5Yy56YWN5Y+C5pWw5YC8XHJcbiAgICAgICAgICAgIHBvc3RVcmwgPSB1cmwubWF0Y2gocG9ydHVybF9wYXR0ZXJuKVsxXTtcclxuICAgICAgICAgICAgdmFyIHBhcmFtX2FyciA9IHVybC5tYXRjaChwYXJhbV9wYXR0ZXJuKSxcclxuICAgICAgICAgICAgICAgIHBhcmFtX3ZhbHVlX2FyciA9IHVybC5tYXRjaChwYXJhbV92YWx1ZV9wYXR0ZXJuKTtcclxuICAgICAgICAgICAgdmFyIGxlbiA9IHBhcmFtX2Fyci5sZW5ndGg7XHJcbiAgICAgICAgICAgIC8vIOe7hOWQiHBhcmFtc+WvueixoVxyXG4gICAgICAgICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspe1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtID0gcGFyYW1fYXJyW2ldO1xyXG4gICAgICAgICAgICAgICAgdmFyIHBhcmFtX3ZhbHVlID0gcGFyYW1fdmFsdWVfYXJyW2ldO1xyXG4gICAgICAgICAgICAgICAgcGFyYW1fdmFsdWUgPSBkZWNvZGVVUkkocGFyYW1fdmFsdWUuc2xpY2UoMSxwYXJhbV92YWx1ZS5sZW5ndGgpKTtcclxuICAgICAgICAgICAgICAgIGlmKHBhcmFtX3ZhbHVlW3BhcmFtX3ZhbHVlLmxlbmd0aCAtIDFdID09PSAnJicpe1xyXG4gICAgICAgICAgICAgICAgICAgIHBhcmFtc1twYXJhbS5zbGljZSgxLHBhcmFtLmxlbmd0aCAtIDEpXSA9IHBhcmFtX3ZhbHVlLnNsaWNlKDAscGFyYW1fdmFsdWUubGVuZ3RoLTEpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zW3BhcmFtLnNsaWNlKDEscGFyYW0ubGVuZ3RoIC0gMSldID0gcGFyYW1fdmFsdWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJhc2VVdGlscy5zaG93TG9hZGluZyhcIm1haW5Db250ZW50TG9hZGluZ1wiKTtcclxuICAgICAgICAkLmFqYXgocG9zdFVybCwge1xyXG4gICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG4gICAgICAgICAgICBkYXRhOiBwYXJhbXMsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcIm1haW5Db250ZW50TG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjX21haW5Db250ZW50UGFydFwiKS5odG1sKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJGNob3NlblNob3Auc3dpdGNoQ29udGVudFRhYih0YXJnZXRUYWIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldFRhYiAhPT0gJ2dvb2RzJyl7IC8vIOmZpOS6huaOqOW5v+WVhuWTge+8jOWFtuS7lueahOmDveWIhumhtVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC51cERhdGVQYWdpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkZ29vZHNMaXN0Lmdvb2RzQ291bnQgPSAkKFwiI2FkZERpc3RyaWJ1dGVHb29kc1wiKS5kYXRhKFwiY291bnRcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKHRhcmdldFRhYiA9PT0gJ3JlY29yZCcpeyAvLyDmjqjlub/orqLljZXlm57loatcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlYXJjaF9jb250ZW50JykudmFsKCRyZWNvcmRMaXN0LnNlYXJjaCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+ayoeacieaVsOaNru+8jOivt+eojeWQjuWGjeivlScpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcIm1haW5Db250ZW50TG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICB9KTtcclxuXHJcbiAgICB9LFxyXG4gICAgLy/lvLnnqpfmj5DphpLmmK/lkKbmiZPlvIDnsr7pgInvvIxcclxuICAgIHNob3dPcGVuQ2hvc2VuVGlwOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJC5hbGVydChcIuaCqOesrOS4gOasoeS9v+eUqOWwj+m5hemAmueyvumAieacjeWKoe+8jOaYr+WQpuaJk+W8gOaOqOW5v+W8gOWFs++8jOW5tuW8gOWQr+Wwj+m5hemAmueyvumAieacjeWKoe+8iOW8gOWQr+WQjuaaguS4jeaUr+aMgeWFs+mXre+8iVwiLCBcImluZm9cIiwge1xyXG4gICAgICAgICAgICBva3RleHQ6IFwi56uL5Y2z5byA5ZCvXCIsXHJcbiAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQuYWpheChcIi9jaG9zZW4vY2hvc2VuX2VuYWJsZVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNfZW5hYmxlX2Nob3NlbjogMSwvLzAt5YWz6Zet77yMIDEt5byA5ZCvXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5byA5ZCv5oiQ5YqfXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNob3NlblNob3AuY2hhbmdlU3dpdGNoU3RhdGUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi5pyN5Yqh5Zmo5Ye65bCP5beu5LqG77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9LFxyXG4gICAgc3dpdGNoQ29udGVudFRhYjogZnVuY3Rpb24gKHRhcmdldFN0YXRlKSB7ICAvL1wiZ29vZHNcIiwgXCJyZWNvcmRcIlxyXG4gICAgICAgIGlmICh0YXJnZXRTdGF0ZSA9PSBcImdvb2RzXCIpIHtcclxuICAgICAgICAgICAgJChcIiNfZ29vZHNMaXN0VGFiXCIpLmFkZENsYXNzKFwiX2FjdGl2ZVRhYlwiKTtcclxuICAgICAgICAgICAgJChcIiNfcmVjb3JkTGlzdFRhYlwiKS5yZW1vdmVDbGFzcyhcIl9hY3RpdmVUYWJcIik7XHJcbiAgICAgICAgfSBlbHNlIGlmICh0YXJnZXRTdGF0ZSA9PSBcInJlY29yZFwiKSB7XHJcbiAgICAgICAgICAgICQoXCIjX3JlY29yZExpc3RUYWJcIikuYWRkQ2xhc3MoXCJfYWN0aXZlVGFiXCIpO1xyXG4gICAgICAgICAgICAkKFwiI19nb29kc0xpc3RUYWJcIikucmVtb3ZlQ2xhc3MoXCJfYWN0aXZlVGFiXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICB9LFxyXG4gICAgLyoqXHJcbiAgICAgKiDliIfmjaLmjInpkq7nmoTnirbmgIFcclxuICAgICAqL1xyXG4gICAgY2hhbmdlU3dpdGNoU3RhdGU6IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgdmFyICR0YXJnZXQgPSAkKFwiLl9zd2l0Y2hPcGVyYXRlQXJlYSAuX2Z1bmN0aW9uU3dpdGNoXCIpLFxyXG4gICAgICAgICAgICBzdGF0ZSA9ICEkKFwiLl9zd2l0Y2hPcGVyYXRlQXJlYVwiKS5kYXRhKFwic3dpdGNoX3N0YXRlXCIpO1xyXG4gICAgICAgIGlmIChzdGF0ZSkge1xyXG4gICAgICAgICAgICAkdGFyZ2V0LmNzcyh7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwiIzJGQ0U2RlwifSk7XHJcbiAgICAgICAgICAgICR0YXJnZXQuY2hpbGRyZW4oXCIuX3N3aXRjaERlc2NUZXh0XCIpLmNzcyh7XCJsZWZ0XCI6IFwiOXB4XCJ9KTtcclxuICAgICAgICAgICAgJHRhcmdldC5jaGlsZHJlbihcIi5fc3dpdGNoRGVzY1RleHRcIikudGV4dChcIuW8gOWQr1wiKTtcclxuICAgICAgICAgICAgJHRhcmdldC5jaGlsZHJlbihcIi5fc3dpdGNoQnV0dG9uSWNvblwiKS5jc3Moe1wibGVmdFwiOiBcIjQwcHhcIn0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICR0YXJnZXQuY3NzKHtcImJhY2tncm91bmQtY29sb3JcIjogXCIjYzJjMmMyXCJ9KTtcclxuICAgICAgICAgICAgJHRhcmdldC5jaGlsZHJlbihcIi5fc3dpdGNoRGVzY1RleHRcIikuY3NzKHtcImxlZnRcIjogXCI0NHB4XCJ9KTtcclxuICAgICAgICAgICAgJHRhcmdldC5jaGlsZHJlbihcIi5fc3dpdGNoRGVzY1RleHRcIikudGV4dChcIuWFs+mXrVwiKTtcclxuICAgICAgICAgICAgJHRhcmdldC5jaGlsZHJlbihcIi5fc3dpdGNoQnV0dG9uSWNvblwiKS5jc3Moe1wibGVmdFwiOiBcIjBweFwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoXCIuX3N3aXRjaE9wZXJhdGVBcmVhXCIpLmRhdGEoXCJzd2l0Y2hfc3RhdGVcIiwgc3RhdGUpO1xyXG5cclxuICAgIH0sXHJcblxyXG59O1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
