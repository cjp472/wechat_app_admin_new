$(document).ready(function(){$manageExercise.init()});$manageExercise=function(){var e={};var i=false;e.init=function(){changeSaveFlag(true);$("#exerciseBookName").on("keyup",function(){var e=$(this),i=$.trim(e.val());if(i.length>=14){i=i.substr(0,14);e.val(i);$(".characterNumLimit").css({color:"red"});setTimeout(function(){$(".characterNumLimit").css({color:"#888888"})},3e3)}$(".characterNumLimit>span").text(i.length)});$("#resTypeSelector").on("change",function(){var e=$(this).val();if(e==-1){$("#resItemSelector").html(' <option value="-1">请选择具体课程</option>')}else{$.ajax("/exercise/get_resource_list",{type:"POST",dataType:"json",data:{resource_type:e},success:function(i){if(i.code==0){var t=i.data.resource_list,r="";$.each(t,function(i,t){var o=e==5?t.name:t.title;r+='<option value="'+t.id+'">'+o+"</option>"});if(r.length==0){r=' <option value="-1">暂无数据</option>'}$("#resItemSelector").html(r)}else{baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,i,t){console.log(t);alert("服务器出小差了，请稍后再试！")}})}});$(".remindRadio").on("click",function(){$(".remindRadio").children(".circleRadio").removeClass("radioActive");$(this).children(".circleRadio").addClass("radioActive")});$("#cancelSaveExercise").click(function(){window.history.back()});$("#confirmSaveExercise").click(function(){var e=$.trim($("#exerciseBookName").val()),t=$("#resItemSelector").val(),r=$("#resTypeSelector").val(),o=$("#resItemSelector > option:selected").text(),a=$("#communitySelector").val(),c=$(".circleRadio.radioActive").data("is_remind"),s=$("#admin_data").val(),n="";c=0;if(e.length==0){baseUtils.show.redTip("还没有输入作业本名称");return false}if(e.length>14){baseUtils.show.redTip("作业本名称长度不能超过14字");return false}if(t==-1){baseUtils.show.redTip("还没有选择具体课程");return false}var l={title:e,resource_id:t,resource_type:r,resource_name:o,is_enable_notify:c};if(a!=-1&&a!=undefined){l.community_id=a}if(s==0){n="/exercise/upload_exercise_book"}else{n="/exercise/update_exercise_book";l.exercise_book_id=GetQueryString("exercise_book_id")}if(i){baseUtils.show.redTip("正在提交中，请稍后再试");return false}i=true;$.ajax(n,{type:"POST",dataType:"json",data:{params:l},success:function(e){i=false;if(e.code==0){baseUtils.show.blueTip("创建作业本成功");setTimeout(function(){window.location.href="/exercise/exercise_book_list"},1e3)}else{alert("网络问题，请稍后再试")}},error:function(e,t,r){i=false;console.log(r);alert("服务器出小差了，请稍后再试！")}})})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZUV4ZXJjaXNlQm9vay5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIiRtYW5hZ2VFeGVyY2lzZSIsImluaXQiLCJzdWJtaXRMaW1pdCIsImNoYW5nZVNhdmVGbGFnIiwib24iLCIkc2VsZiIsInRoaXMiLCJleGVyY2lzZU5hbWUiLCJ0cmltIiwidmFsIiwibGVuZ3RoIiwic3Vic3RyIiwiY3NzIiwiY29sb3IiLCJzZXRUaW1lb3V0IiwidGV4dCIsInJlc1R5cGUiLCJodG1sIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImRhdGEiLCJyZXNvdXJjZV90eXBlIiwic3VjY2VzcyIsInJlc3VsdCIsImNvZGUiLCJyZXNvdXJjZUxpc3QiLCJyZXNvdXJjZV9saXN0IiwiaHRtbFN0ciIsImVhY2giLCJrIiwidiIsInJlc05hbWUiLCJuYW1lIiwidGl0bGUiLCJpZCIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJlcnJvciIsInhociIsInN0YXR1cyIsImVyciIsImNvbnNvbGUiLCJsb2ciLCJhbGVydCIsImNoaWxkcmVuIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNsaWNrIiwid2luZG93IiwiaGlzdG9yeSIsImJhY2siLCJleGVyY2lzZUJvb2tOYW1lIiwicmVzSWQiLCJjb21tdW5pdHlJZCIsImlzUmVtaW5kIiwicGFnZVR5cGUiLCJwb3N0VXJsIiwicGFyYW1zIiwicmVzb3VyY2VfaWQiLCJyZXNvdXJjZV9uYW1lIiwiaXNfZW5hYmxlX25vdGlmeSIsInVuZGVmaW5lZCIsImNvbW11bml0eV9pZCIsImV4ZXJjaXNlX2Jvb2tfaWQiLCJHZXRRdWVyeVN0cmluZyIsImJsdWVUaXAiLCJsb2NhdGlvbiIsImhyZWYiXSwibWFwcGluZ3MiOiJBQUlBQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2RDLGdCQUFnQkMsUUFHcEJELGlCQUFrQixXQUNkLEdBQUlBLEtBSUosSUFBSUUsR0FBYyxLQUVsQkYsR0FBZ0JDLEtBQU8sV0FH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QUNmdEIsRUFBYyxLQUNkLElBQUlzQixFQUFPQyxNQUFRLEVBQUcsQ0FDbEJXLFVBQVVDLEtBQUs4QixRQUFRLFVBQ3ZCckQsWUFBVyxXQUNQb0MsT0FBT2tCLFNBQVNDLEtBQU8sZ0NBQ3hCLFNBQ0EsQ0FDSHhCLE1BQU0sZ0JBR2ROLE1BQU8sU0FBVUMsRUFBS0MsRUFBUUMsR0FDMUJ4QyxFQUFjLEtBQ2R5QyxTQUFRQyxJQUFJRixFQUNaRyxPQUFNLHVCQVF0QixPQUFPN0MiLCJmaWxlIjoibWFuYWdlRXhlcmNpc2VCb29rLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgQWRtaW5pc3RyYXRvciBvbiAyMDE3LzcvMzEuXHJcbiAqL1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xyXG4gICAgJG1hbmFnZUV4ZXJjaXNlLmluaXQoKTtcclxufSk7XHJcblxyXG4kbWFuYWdlRXhlcmNpc2UgPSAoZnVuY3Rpb24gKCkge1xyXG4gICAgdmFyICRtYW5hZ2VFeGVyY2lzZSA9IHtcclxuXHJcblxyXG4gICAgfTtcclxuICAgIHZhciBzdWJtaXRMaW1pdCA9IGZhbHNlO1xyXG5cclxuICAgICRtYW5hZ2VFeGVyY2lzZS5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAvL+eCueWHu+S+p+i+ueagj+emu+W8gOaXtueahOW8ueahhlxyXG4gICAgICAgIGNoYW5nZVNhdmVGbGFnKHRydWUpO1xyXG5cclxuICAgICAgICAkKFwiI2V4ZXJjaXNlQm9va05hbWVcIikub24oXCJrZXl1cFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkc2VsZiA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBleGVyY2lzZU5hbWUgPSAkLnRyaW0oJHNlbGYudmFsKCkpO1xyXG5cclxuICAgICAgICAgICAgaWYgKGV4ZXJjaXNlTmFtZS5sZW5ndGggPj0gMTQpIHtcclxuICAgICAgICAgICAgICAgIGV4ZXJjaXNlTmFtZSA9IGV4ZXJjaXNlTmFtZS5zdWJzdHIoMCwgMTQpO1xyXG4gICAgICAgICAgICAgICAgJHNlbGYudmFsKGV4ZXJjaXNlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAkKFwiLmNoYXJhY3Rlck51bUxpbWl0XCIpLmNzcyh7XCJjb2xvclwiOiBcInJlZFwifSk7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiLmNoYXJhY3Rlck51bUxpbWl0XCIpLmNzcyh7XCJjb2xvclwiOiBcIiM4ODg4ODhcIn0pO1xyXG4gICAgICAgICAgICAgICAgfSwgMzAwMCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJChcIi5jaGFyYWN0ZXJOdW1MaW1pdD5zcGFuXCIpLnRleHQoZXhlcmNpc2VOYW1lLmxlbmd0aCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8v5YWz6IGU6K++56iLXHJcbiAgICAgICAgJChcIiNyZXNUeXBlU2VsZWN0b3JcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgcmVzVHlwZSA9ICQodGhpcykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmIChyZXNUeXBlID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3Jlc0l0ZW1TZWxlY3RvclwiKS5odG1sKFxyXG4gICAgICAgICAgICAgICAgICAgICcgPG9wdGlvbiB2YWx1ZT1cIi0xXCI+6K+36YCJ5oup5YW35L2T6K++56iLPC9vcHRpb24+J1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQuYWpheChcIi9leGVyY2lzZS9nZXRfcmVzb3VyY2VfbGlzdFwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfdHlwZTogcmVzVHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHJlc291cmNlTGlzdCA9IHJlc3VsdC5kYXRhLnJlc291cmNlX2xpc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciA9IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkLmVhY2gocmVzb3VyY2VMaXN0LCBmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXNOYW1lID0gKHJlc1R5cGU9PTU/di5uYW1lOnYudGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgKz1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxvcHRpb24gdmFsdWU9XCInK3YuaWQrJ1wiPicrcmVzTmFtZSsnPC9vcHRpb24+JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGh0bWxTdHIubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBodG1sU3RyID1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJyA8b3B0aW9uIHZhbHVlPVwiLTFcIj7mmoLml6DmlbDmja48L29wdGlvbj4nO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNyZXNJdGVtU2VsZWN0b3JcIikuaHRtbChodG1sU3RyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zpl67popjvvIzor7fnqI3lkI7lho3or5VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gcmFkaW8g5oyJ6ZKu54K55Ye75YiH5o2i5pWI5p6cXHJcbiAgICAgICAgJCgnLnJlbWluZFJhZGlvJykub24oJ2NsaWNrJywgZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICQoJy5yZW1pbmRSYWRpbycpLmNoaWxkcmVuKCcuY2lyY2xlUmFkaW8nKS5yZW1vdmVDbGFzcygncmFkaW9BY3RpdmUnKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5jaGlsZHJlbignLmNpcmNsZVJhZGlvJykuYWRkQ2xhc3MoJ3JhZGlvQWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCIjY2FuY2VsU2F2ZUV4ZXJjaXNlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgd2luZG93Lmhpc3RvcnkuYmFjaygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAkKFwiI2NvbmZpcm1TYXZlRXhlcmNpc2VcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgZXhlcmNpc2VCb29rTmFtZSA9ICQudHJpbSgkKFwiI2V4ZXJjaXNlQm9va05hbWVcIikudmFsKCkpLFxyXG4gICAgICAgICAgICAgICAgcmVzSWQgPSAkKFwiI3Jlc0l0ZW1TZWxlY3RvclwiKS52YWwoKSxcclxuICAgICAgICAgICAgICAgIHJlc1R5cGUgPSAkKFwiI3Jlc1R5cGVTZWxlY3RvclwiKS52YWwoKSxcclxuICAgICAgICAgICAgICAgIHJlc05hbWUgPSAkKFwiI3Jlc0l0ZW1TZWxlY3RvciA+IG9wdGlvbjpzZWxlY3RlZFwiKS50ZXh0KCksXHJcbiAgICAgICAgICAgICAgICBjb21tdW5pdHlJZCA9ICQoXCIjY29tbXVuaXR5U2VsZWN0b3JcIikudmFsKCksXHJcbiAgICAgICAgICAgICAgICBpc1JlbWluZCA9ICQoXCIuY2lyY2xlUmFkaW8ucmFkaW9BY3RpdmVcIikuZGF0YShcImlzX3JlbWluZFwiKSwgLy8gMSAtIOaPkOmGku+8jCAwIC0g5LiN5o+Q6YaSPOm7mOiupOS4jeaPkOmGkj5cclxuICAgICAgICAgICAgICAgIHBhZ2VUeXBlID0gJChcIiNhZG1pbl9kYXRhXCIpLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgcG9zdFVybCA9IFwiXCI7XHJcblxyXG4gICAgICAgICAgICBpc1JlbWluZCA9IDA7ICAgLy8gIFRPRE8g5pqC5pe25YWI6K6+572u5Li65LiN5o+Q6YaSXHJcblxyXG4gICAgICAgICAgICBpZiAoZXhlcmNpc2VCb29rTmFtZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6L+Y5rKh5pyJ6L6T5YWl5L2c5Lia5pys5ZCN56ewXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChleGVyY2lzZUJvb2tOYW1lLmxlbmd0aCA+IDE0KSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkvZzkuJrmnKzlkI3np7Dplb/luqbkuI3og73otoXov4cxNOWtl1wiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocmVzSWQgPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIui/mOayoeaciemAieaLqeWFt+S9k+ivvueoi1wiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHtcclxuICAgICAgICAgICAgICAgIHRpdGxlOiBleGVyY2lzZUJvb2tOYW1lLFxyXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VfaWQ6IHJlc0lkLFxyXG4gICAgICAgICAgICAgICAgcmVzb3VyY2VfdHlwZTogcmVzVHlwZSxcclxuICAgICAgICAgICAgICAgIHJlc291cmNlX25hbWU6IHJlc05hbWUsXHJcbiAgICAgICAgICAgICAgICBpc19lbmFibGVfbm90aWZ5OiBpc1JlbWluZFxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChjb21tdW5pdHlJZCAhPSAtMSAmJiBjb21tdW5pdHlJZCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIHBhcmFtcy5jb21tdW5pdHlfaWQgPSBjb21tdW5pdHlJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAocGFnZVR5cGUgPT0gMCkgey8v5Yib5bu6XHJcbiAgICAgICAgICAgICAgICBwb3N0VXJsID0gXCIvZXhlcmNpc2UvdXBsb2FkX2V4ZXJjaXNlX2Jvb2tcIjtcclxuICAgICAgICAgICAgfSBlbHNlIHsvL+e8lui+kVxyXG4gICAgICAgICAgICAgICAgcG9zdFVybCA9IFwiL2V4ZXJjaXNlL3VwZGF0ZV9leGVyY2lzZV9ib29rXCI7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXMuZXhlcmNpc2VfYm9va19pZCA9IEdldFF1ZXJ5U3RyaW5nKFwiZXhlcmNpc2VfYm9va19pZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoc3VibWl0TGltaXQpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuato+WcqOaPkOS6pOS4re+8jOivt+eojeWQjuWGjeivlVwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBzdWJtaXRMaW1pdCA9IHRydWU7XHJcbiAgICAgICAgICAgICQuYWpheChwb3N0VXJsLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtc1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWJtaXRMaW1pdCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLliJvlu7rkvZzkuJrmnKzmiJDlip9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBcIi9leGVyY2lzZS9leGVyY2lzZV9ib29rX2xpc3RcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLnvZHnu5zpl67popjvvIzor7fnqI3lkI7lho3or5VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdExpbWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuICRtYW5hZ2VFeGVyY2lzZTtcclxufSkoKTtcclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXX0=
