$(function(){manageAlive.init()});var manageAlive=function(){var e={};var a;function r(e){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("直播名称不能为空！");return false}if($formCheck.emptyString(e.summary)){baseUtils.show.redTip("直播简介不能为空！");return false}if(e.alive_type==1&&fileId==null){baseUtils.show.redTip("请上传直播资源！");return false}if(is_edit){baseUtils.show.redTip("直播资源上传中！");return false}if($formCheck.emptyString(e.img_url)){baseUtils.show.redTip("请上传您的直播封面！");return false}if($formCheck.emptyString(e.start_at)){baseUtils.show.redTip("请填入您的直播上架时间！");return false}if($formCheck.emptyString(e.zb_start_at)){baseUtils.show.redTip("请填入您的直播开始时间！");return false}if($formCheck.emptyString(e.zb_stop_at)){baseUtils.show.redTip("请填入您的直播结束时间！");return false}if(!$formCheck.checkTime(e.start_at)){baseUtils.show.redTip("直播上架时间错误");return false}if(!$formCheck.checkTime(e.zb_start_at)){baseUtils.show.redTip("直播开始时间错误");return false}if(!$formCheck.checkTime(e.zb_stop_at)){baseUtils.show.redTip("直播结束时间错误");return false}if(uploadChannelType==1&&e.payment_type==2&&$formCheck.emptyString(e.piece_price)){baseUtils.show.redTip("您选择的付费形式为付费，请输入价格！");return false}if(uploadChannelType==1&&e.payment_type==2&&!$formCheck.checkNum(e.piece_price)){baseUtils.show.redTip("您的价格输入格式有误，请重新输入！");return false}if(uploadChannelType==1&&e.payment_type==2&&e.piece_price>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}if(!$formCheck.checkTimeOrder(e.zb_start_at,e.zb_stop_at)){baseUtils.show.redTip("直播结束时间必须大于直播开始时间！");return false}return true}function t(e,a){showLoading();$.ajax(e,{type:"POST",dataType:"json",data:a,success:function(e){if(parseInt(e.code)===0){baseUtils.show.blueTip("保存成功");window.location.href=backURL}else{hideLoading();baseUtils.show.redTip(e.msg);submitLimt=false}},error:function(e,a,r){hideLoading();console.error(r);baseUtils.show.redTip("网络错误，请稍后再试！");submitLimt=false}})}var i="";var s;var l;var n;classArray=[];var o;var c;var m;var p;function d(){$("#searchInput").val("");$(".memberPart").remove();$(".darkScreen").fadeOut(300)}e.init=function(){aliveTimeConfig("#zb_start_at");aliveTimeConfig("#zb_stop_at");$(".memberClassAdd").click(function(){i="";$(".eachLineContent").append("<div class='eachLine'>"+"<div class='memberName'>点击添加</div>"+"<input type='text' class='inputDefault memberCall' value='讲师'>"+"<div class='memberClear'>清空</div>"+"<input type='hidden' class='userId' />"+"<div class='btnLine'></div>"+"<div class='memberClassDelete'>删除</div>"+"</div>")});$(".eachLineContent").on("click",".memberClassDelete",function(){$(this).prev().prev().click();$(this).parent().remove()});$(".eachLineContent").on("click",".memberName",function(){l=$(".memberName").index($(this));console.log($(".memberName").eq(l).text());if($(".memberName").eq(l).text()=="点击添加"){console.log(l);$(".darkScreen").show()}});$(".eachLineContent").on("click",".memberClear",function(){var e=$(".memberClear").index($(this));$(".memberName").eq(e).text("点击添加");$(".memberCall").eq(e).val("讲师");$(".userId").eq(e).val("")});$(".boxCancel,.userSelectBoxClose").click(function(){d()});$(".memberList").on("click",".memberPart",function(){$(this).find("input").prop("checked",true);i=$(this).attr("id");console.log(i);s=$(this).find(".memberNickName").text()});$(".boxConfirm").click(function(){console.log(i);if(i==""){baseUtils.show.redTip("亲,请选择人哦~");return false}else{$(".userId").each(function(e){if($(this).val()==i){n=true}})}if(n){baseUtils.show.redTip("亲，请勿重复选择人员哦~");n=false;return false}if(i==""){baseUtils.show.redTip("亲，请选择人员哦~")}else{n=false;$(".memberName").eq(l).html(s);$(".userId").eq(l).val(i);i="";d()}});$("#searchInput").on("keypress",function(e){if(e.keyCode==13){$(".memberSearchBtn").click()}});$(".memberSearchBtn").click(function(){isDown=false;c="";c=$("#searchInput").val();o=1;if(c.length==0){baseUtils.show.redTip("请输入搜索内容！");return false}e()});function e(){p=true;$.get("/zbsearch",{search:c,page:o},function(e){console.log(e);var a="",r=$(".memberList");if(e.data.length==0){a+='<div class="contentNoneTip">暂无数据</div>';r.html(a)}else{for(var t=0;t<e.data.length;t++){a+="<div class='memberPart' id='"+e.data[t].user_id+"'> "+"<div class='memberCheck'> <input class='with-gap' name='group10' type='radio' id='test"+t+"'/> "+"<label for='test"+t+"'></label> </div> "+"<div class='memberlogo'> <div class='memberImage'><img src="+e.data[t].wx_avatar+" alt=''>"+"</div> <div class='memberNickName'>"+e.data[t].wx_nickname+"</div> </div>"+"<div class='memberSex'>"+e.data[t].wx_gender+"</div>"+"<div class='memberPhone'>"+e.data[t].phone+"</div>"+" </div>"}if(o==1){r.html(a);r.append('<div class="hasDown">资源加载中...</div>')}else{r.find(".hasDown").before(a)}if(e.page_offset.current_page>=e.page_offset.total_pages){r.find(".hasDown").html("数据加载完毕。");isDown=true}p=false;o++}})}$(".darkScreen .memberListWrapper").scroll(function(a){var r=$(".memberList").height(),t=$(this).height(),i=$(this).scrollTop();if(i+t>=r-5&&!isDown&&!p){e()}});$(".completeBtn").click(function(){var e=$.trim($(".resName").val());var a=$.trim($("#aliveAbstract").val());var i=aliveT;var s=fileId;var l=$.trim($("#zb_start_at").val());var n=$.trim($("#zb_stop_at").val());var o=videoGsize;var c=$.trim($("#Image1Url").val());var m=$.trim($("#Image3Url").val());var p=UE.getEditor("resource_desc");var d=p.getContent();var f=p.getPlainTxt();if(f.length==0){baseUtils.show.redTip("描述不能为空!");return false}var h=$.trim($(".resPrize").val())*100;$('input[name="aliveClass"]:checked').each(function(){classArray.push($(this).attr("id"))});console.log(classArray);var u=aliveState;var v=$.trim($("#dateInput").val());for(var b=0,_=0;b<$(".eachLine").length;b++){var g={};g["role_name"]=$(".memberCall").eq(b).val().trim();g["user_name"]=$(".memberName").eq(b).html().trim();g["user_id"]=$(".userId").eq(b).val().trim();if(g["user_id"].length!=0){roleParams[_]=g;_++}}var k={title:e,summary:a,alive_type:i,img_url:c,alive_img_url:m,file_name:VideoName,zb_start_at:l,zb_stop_at:n,descrb:f,org_content:d,piece_price:h,state:u,start_at:v,id:GetQueryString("id")||null};var y={public_video:s,public_size_text:o};if(resourceFree){k.payment_type=resourceFree}k.if_push=if_push;if(if_push==0||if_push==1){k.push_ahead=push_ahead}if(r(k)){var T={params:k,resource_type:resourceType,upload_channel_type:uploadChannelType,package_id:packageId,resource_params:y,package_name:packageName,roleParams:roleParams,category_type:classArray};t(golbalUrl,T);console.log(T)}else{return false}})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZUFsaXZlLmpzIl0sIm5hbWVzIjpbIiQiLCJtYW5hZ2VBbGl2ZSIsImluaXQiLCJyZXNVcmwiLCJjaGVja0FsaXZlRm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJ0aXRsZSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJzdW1tYXJ5IiwiYWxpdmVfdHlwZSIsImZpbGVJZCIsImlzX2VkaXQiLCJpbWdfdXJsIiwic3RhcnRfYXQiLCJ6Yl9zdGFydF9hdCIsInpiX3N0b3BfYXQiLCJjaGVja1RpbWUiLCJ1cGxvYWRDaGFubmVsVHlwZSIsInBheW1lbnRfdHlwZSIsInBpZWNlX3ByaWNlIiwiY2hlY2tOdW0iLCJtYXhJbnB1dFByaWNlIiwiY2hlY2tUaW1lT3JkZXIiLCJzdWJtaXRGb3JtIiwidXJsIiwiYWxsUGFyYW1zIiwic2hvd0xvYWRpbmciLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwiZGF0YSIsInN1Y2Nlc3MiLCJwYXJzZUludCIsImNvZGUiLCJibHVlVGlwIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiYmFja1VSTCIsImhpZGVMb2FkaW5nIiwibXNnIiwic3VibWl0TGltdCIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiY29uc29sZSIsIm5vd1VzZXJpZCIsIm5vd1VzZXJOYW1lIiwiYWRkSW5kZXgiLCJzYW1lSWQiLCJjbGFzc0FycmF5IiwicGFnZSIsInNlYWNoZXIiLCJoYXNEb3duIiwiaXNMb2FkaW5nIiwiYm94Q29udGVudFJlc2V0IiwidmFsIiwicmVtb3ZlIiwiZmFkZU91dCIsImFsaXZlVGltZUNvbmZpZyIsImNsaWNrIiwiYXBwZW5kIiwib24iLCJ0aGlzIiwicHJldiIsInBhcmVudCIsImluZGV4IiwibG9nIiwiZXEiLCJ0ZXh0IiwidGVtcEluZGV4IiwiZmluZCIsInByb3AiLCJhdHRyIiwiZWFjaCIsImkiLCJodG1sIiwiZSIsImtleUNvZGUiLCJpc0Rvd24iLCJsZW5ndGgiLCJnZXRVc2VyTGlzdCIsImdldCIsInNlYXJjaCIsInN0ciIsIiRhcmVhIiwidXNlcl9pZCIsInd4X2F2YXRhciIsInd4X25pY2tuYW1lIiwid3hfZ2VuZGVyIiwicGhvbmUiLCJiZWZvcmUiLCJwYWdlX29mZnNldCIsImN1cnJlbnRfcGFnZSIsInRvdGFsX3BhZ2VzIiwic2Nyb2xsIiwiRGl2SGVpZ2h0IiwiaGVpZ2h0IiwiU2Nyb2xsSGVpZ2h0IiwiU2Nyb2xsVG9wIiwic2Nyb2xsVG9wIiwidHJpbSIsImFsaXZlVHlwZSIsImFsaXZlVCIsIkFsaXZlRmlsZUlkIiwiemJTdGFydEF0IiwiemJFbmRBdCIsIkFsaXZlU2l6ZSIsInZpZGVvR3NpemUiLCJpbWFnZTFVcmwiLCJpbWFnZTNVcmwiLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwib3JnQ29udGVudCIsImdldENvbnRlbnQiLCJkZXNjcmliIiwiZ2V0UGxhaW5UeHQiLCJyZXNQcml6ZSIsInB1c2giLCJzdGF0ZSIsImFsaXZlU3RhdGUiLCJzdGFydEF0IiwiaiIsInRtcCIsInJvbGVQYXJhbXMiLCJyZXNJbmZvIiwiYWxpdmVfaW1nX3VybCIsImZpbGVfbmFtZSIsIlZpZGVvTmFtZSIsImRlc2NyYiIsIm9yZ19jb250ZW50IiwiaWQiLCJHZXRRdWVyeVN0cmluZyIsInJlc291cmNlUGFyYW1zIiwicHVibGljX3ZpZGVvIiwicHVibGljX3NpemVfdGV4dCIsInJlc291cmNlRnJlZSIsImlmX3B1c2giLCJwdXNoX2FoZWFkIiwicGFyYW1zIiwicmVzb3VyY2VfdHlwZSIsInJlc291cmNlVHlwZSIsInVwbG9hZF9jaGFubmVsX3R5cGUiLCJwYWNrYWdlX2lkIiwicGFja2FnZUlkIiwicmVzb3VyY2VfcGFyYW1zIiwicGFja2FnZV9uYW1lIiwicGFja2FnZU5hbWUiLCJjYXRlZ29yeV90eXBlIiwiZ29sYmFsVXJsIl0sIm1hcHBpbmdzIjoiQUFJQUEsRUFBRSxXQUNFQyxZQUFZQyxRQUVoQixJQUFJRCxhQUFjLFdBQ2QsR0FBSUEsS0FFSixJQUFJ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QUFHOEIsYUFBYyxDQUNiWCxFQUFRN0csYUFBZXdILGFBSTNCWCxFQUFRWSxRQUFVQSxPQUNsQixJQUFHQSxTQUFTLEdBQUtBLFNBQVMsRUFBRSxDQUN4QlosRUFBUWEsV0FBYUEsV0FJekIsR0FBSTVJLEVBQWUrSCxHQUFVLENBQ3pCLEdBQUl0RyxJQUNBb0gsT0FBUWQsRUFDUmUsY0FBZUMsYUFDZkMsb0JBQXFCL0gsa0JBQ3JCZ0ksV0FBWUMsVUFDWkMsZ0JBQWlCWixFQUNqQmEsYUFBY0MsWUFDZHZCLFdBQVlBLFdBQ1p3QixjQUFjbkcsV0FFbEI1QixHQUFXZ0ksVUFBVzlILEVBQ3RCcUIsU0FBUXNCLElBQUkzQyxPQUNULENBQ0gsTUFBTyxVQUtuQixPQUFPNUIiLCJmaWxlIjoibWFuYWdlQWxpdmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkganNlcmsgb24gMjAxNy8zLzIzLlxuICovXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIG1hbmFnZUFsaXZlLmluaXQoKTtcbn0pO1xudmFyIG1hbmFnZUFsaXZlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtYW5hZ2VBbGl2ZSA9IHt9O1xuXG4gICAgdmFyIHJlc1VybDtcblxuICAgIC8v5qOA5p+l55u05pKt5o+Q5Lqk6KGo5Y2VXG4gICAgZnVuY3Rpb24gY2hlY2tBbGl2ZUZvcm0oaW5mbykge1xuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnRpdGxlKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt5ZCN56ew5LiN6IO95Li656m677yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uc3VtbWFyeSkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSreeugOS7i+S4jeiDveS4uuepuu+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5mby5hbGl2ZV90eXBlPT0xJiYoZmlsZUlkID09IG51bGwpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fkuIrkvKDnm7Tmkq3otYTmupDvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzX2VkaXQpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSrei1hOa6kOS4iuS8oOS4re+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLmltZ191cmwpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fkuIrkvKDmgqjnmoTnm7Tmkq3lsIHpnaLvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5zdGFydF9hdCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+Whq+WFpeaCqOeahOebtOaSreS4iuaetuaXtumXtO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnpiX3N0YXJ0X2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35aGr5YWl5oKo55qE55u05pKt5byA5aeL5pe26Ze077yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uemJfc3RvcF9hdCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+Whq+WFpeaCqOeahOebtOaSree7k+adn+aXtumXtO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8uc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3kuIrmnrbml7bpl7TplJnor69cIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLnpiX3N0YXJ0X2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt5byA5aeL5pe26Ze06ZSZ6K+vXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja1RpbWUoaW5mby56Yl9zdG9wX2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt57uT5p2f5pe26Ze06ZSZ6K+vXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRDaGFubmVsVHlwZT09MSAmJiBpbmZvLnBheW1lbnRfdHlwZSA9PSAyICYmICRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5waWVjZV9wcmljZSkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaCqOmAieaLqeeahOS7mOi0ueW9ouW8j+S4uuS7mOi0ue+8jOivt+i+k+WFpeS7t+agvO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBsb2FkQ2hhbm5lbFR5cGU9PTEgJiYgaW5mby5wYXltZW50X3R5cGUgPT0gMiAmJiAhJGZvcm1DaGVjay5jaGVja051bShpbmZvLnBpZWNlX3ByaWNlKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oKo55qE5Lu35qC86L6T5YWl5qC85byP5pyJ6K+v77yM6K+36YeN5paw6L6T5YWl77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHVwbG9hZENoYW5uZWxUeXBlPT0gMSAmJiBpbmZvLnBheW1lbnRfdHlwZT09IDIgJiYgaW5mby5waWVjZV9wcmljZSA+IGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICogMTAwKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS7t+agvOS4jeiDveWkp+S6jiBcIiArIGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICsgXCIg5YWDXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmKCEkZm9ybUNoZWNrLmNoZWNrVGltZU9yZGVyKGluZm8uemJfc3RhcnRfYXQsaW5mby56Yl9zdG9wX2F0KSl7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3nu5PmnZ/ml7bpl7Tlv4XpobvlpKfkuo7nm7Tmkq3lvIDlp4vml7bpl7TvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIC8v5o+Q5Lqk5L+h5oGvXG4gICAgZnVuY3Rpb24gc3VibWl0Rm9ybSh1cmwsIGFsbFBhcmFtcykge1xuICAgICAgICBzaG93TG9hZGluZygpO1xuICAgICAgICAkLmFqYXgodXJsLCB7XG4gICAgICAgICAgICB0eXBlOiAnUE9TVCcsXG4gICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgZGF0YTphbGxQYXJhbXMsXG4gICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGRhdGEuY29kZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuS/neWtmOaIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBiYWNrVVJMO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0TGltdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLHN0YXR1cyxlcnIpIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xuICAgICAgICAgICAgICAgIHN1Ym1pdExpbXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgLy/lvZPliY3mt7vliqDnmoTnlKjmiLdcbiAgICB2YXIgbm93VXNlcmlkID0gJyc7XG5cbiAgICAvL+mAieS4reeUqOaIt+eahOeUqOaIt+WQjVxuICAgIHZhciBub3dVc2VyTmFtZTtcblxuICAgIC8v5b2T5YmN6YCJ5Lit55qE5qyh5bqPXG4gICAgdmFyIGFkZEluZGV4O1xuXG4gICAgLy/nm7jlkIzlr7zluIjliKTlrpppZFxuICAgIHZhciAgc2FtZUlkO1xuXG4gICAgLy/nva7nqbrliIbnsbvmlbDnu4RcbiAgICBjbGFzc0FycmF5PVtdO1xuICAgIHZhciBwYWdlO1xuICAgIHZhciBzZWFjaGVyIDtcbiAgICB2YXIgaGFzRG93biA7XG4gICAgdmFyIGlzTG9hZGluZztcbiAgICAvL+mHjee9ruW8ueWHuuahhuWGheWuueW5tuWFs+mXreW8ueWHuuahhlxuICAgIGZ1bmN0aW9uIGJveENvbnRlbnRSZXNldCgpe1xuICAgICAgICAkKFwiI3NlYXJjaElucHV0XCIpLnZhbChcIlwiKTtcbiAgICAgICAgJChcIi5tZW1iZXJQYXJ0XCIpLnJlbW92ZSgpO1xuICAgICAgICAkKFwiLmRhcmtTY3JlZW5cIikuZmFkZU91dCgzMDApO1xuICAgIH1cblxuICAgIG1hbmFnZUFsaXZlLmluaXQgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgYWxpdmVUaW1lQ29uZmlnKFwiI3piX3N0YXJ0X2F0XCIpO1xuICAgICAgICBhbGl2ZVRpbWVDb25maWcoXCIjemJfc3RvcF9hdFwiKTtcbiAgICAgICAgLy8g5re75Yqg6K6y5biI57G7XG4gICAgICAgICQoXCIubWVtYmVyQ2xhc3NBZGRcIikuY2xpY2soZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIG5vd1VzZXJpZD0nJztcbiAgICAgICAgICAgICQoXCIuZWFjaExpbmVDb250ZW50XCIpLmFwcGVuZChcIjxkaXYgY2xhc3M9J2VhY2hMaW5lJz5cIitcbiAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlck5hbWUnPueCueWHu+a3u+WKoDwvZGl2PlwiK1xuICAgICAgICAgICAgICAgIFwiPGlucHV0IHR5cGU9J3RleHQnIGNsYXNzPSdpbnB1dERlZmF1bHQgbWVtYmVyQ2FsbCcgdmFsdWU9J+iusuW4iCc+XCIrXG4gICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdtZW1iZXJDbGVhcic+5riF56m6PC9kaXY+XCIrXG4gICAgICAgICAgICAgICAgXCI8aW5wdXQgdHlwZT0naGlkZGVuJyBjbGFzcz0ndXNlcklkJyAvPlwiK1xuICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nYnRuTGluZSc+PC9kaXY+XCIrXG4gICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdtZW1iZXJDbGFzc0RlbGV0ZSc+5Yig6ZmkPC9kaXY+XCIrXG4gICAgICAgICAgICAgICAgXCI8L2Rpdj5cIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v5Yig6Zmk5a+85biI57G7XG4gICAgICAgICQoXCIuZWFjaExpbmVDb250ZW50XCIpLm9uKFwiY2xpY2tcIixcIi5tZW1iZXJDbGFzc0RlbGV0ZVwiLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQodGhpcykucHJldigpLnByZXYoKS5jbGljaygpO1xuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy/ngrnlh7vmt7vliqBcbiAgICAgICAgJChcIi5lYWNoTGluZUNvbnRlbnRcIikub24oXCJjbGlja1wiLFwiLm1lbWJlck5hbWVcIixmdW5jdGlvbigpe1xuICAgICAgICAgICAgYWRkSW5kZXggPSAoJChcIi5tZW1iZXJOYW1lXCIpLmluZGV4KCQodGhpcykpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCQoXCIubWVtYmVyTmFtZVwiKS5lcShhZGRJbmRleCkudGV4dCgpKTtcbiAgICAgICAgICAgIGlmKCQoXCIubWVtYmVyTmFtZVwiKS5lcShhZGRJbmRleCkudGV4dCgpPT1cIueCueWHu+a3u+WKoFwiKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWRkSW5kZXgpO1xuICAgICAgICAgICAgICAgLy8gcGFnZT0xO1xuICAgICAgICAgICAgICAgLy8gc2VhY2hlcj1cIlwiIDtcbiAgICAgICAgICAgICAgIC8vIGhhc0Rvd24gPWZhbHNlO1xuICAgICAgICAgICAgICAgIC8vaXNMb2FkaW5nPWZhbHNlO1xuICAgICAgICAgICAgICAgICQoXCIuZGFya1NjcmVlblwiKS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v5riF56m6XG4gICAgICAgICQoXCIuZWFjaExpbmVDb250ZW50XCIpLm9uKFwiY2xpY2tcIixcIi5tZW1iZXJDbGVhclwiLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciB0ZW1wSW5kZXggPSAkKFwiLm1lbWJlckNsZWFyXCIpLmluZGV4KCQodGhpcykpO1xuICAgICAgICAgICAgJChcIi5tZW1iZXJOYW1lXCIpLmVxKHRlbXBJbmRleCkudGV4dChcIueCueWHu+a3u+WKoFwiKTtcbiAgICAgICAgICAgICQoXCIubWVtYmVyQ2FsbFwiKS5lcSh0ZW1wSW5kZXgpLnZhbChcIuiusuW4iFwiKTtcbiAgICAgICAgICAgICQoXCIudXNlcklkXCIpLmVxKHRlbXBJbmRleCkudmFsKFwiXCIpO1xuICAgICAgICB9KVxuXG4gICAgICAgIC8v5YWz6Zet5by55Ye65qGGXG4gICAgICAgICQoXCIuYm94Q2FuY2VsLC51c2VyU2VsZWN0Qm94Q2xvc2VcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgYm94Q29udGVudFJlc2V0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v57uZ5by55Ye65qGG55So5oi35YiX6KGo5a2Q5Y2V5YWD57uR5a6aY2xpY2vkuovku7ZcbiAgICAgICAgJChcIi5tZW1iZXJMaXN0XCIpLm9uKFwiY2xpY2tcIiwgXCIubWVtYmVyUGFydFwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmZpbmQoXCJpbnB1dFwiKS5wcm9wKFwiY2hlY2tlZFwiLCB0cnVlKTtcbiAgICAgICAgICAgIC8vICAgIOiOt+WPlumAieS4reeUqOaIt+eahGlk5ZCNXG4gICAgICAgICAgICBub3dVc2VyaWQgPSAkKHRoaXMpLmF0dHIoJ2lkJyk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhub3dVc2VyaWQpO1xuICAgICAgICAgICAgLy8gICAg6I635Y+W6YCJ5Lit55So5oi355qE5pi156ewXG4gICAgICAgICAgICBub3dVc2VyTmFtZSA9ICQodGhpcykuZmluZChcIi5tZW1iZXJOaWNrTmFtZVwiKS50ZXh0KCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v56Gu6K6k5re75Yqg6K6y6L+wXG4gICAgICAgICQoXCIuYm94Q29uZmlybVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhub3dVc2VyaWQpO1xuICAgICAgICAgICAgaWYobm93VXNlcmlkPT0nJykge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS6sizor7fpgInmi6nkurrlk6Z+XCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1lbHNlIHtcbiAgICAgICAgICAgICAgICAkKFwiLnVzZXJJZFwiKS5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICgkKHRoaXMpLnZhbCgpID09IG5vd1VzZXJpZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2FtZUlkID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoc2FtZUlkKXtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkurLvvIzor7fli7/ph43lpI3pgInmi6nkurrlkZjlk6Z+XCIpO1xuICAgICAgICAgICAgICAgIHNhbWVJZD1mYWxzZTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG5vd1VzZXJpZCA9PSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS6su+8jOivt+mAieaLqeS6uuWRmOWTpn5cIik7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2FtZUlkPWZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAvLyAgICDpnaLmnb/otYvlgLxcbiAgICAgICAgICAgICAgICAgICAgJChcIi5tZW1iZXJOYW1lXCIpLmVxKGFkZEluZGV4KS5odG1sKG5vd1VzZXJOYW1lKTtcbiAgICAgICAgICAgICAgICAgICAgLy/luKblhaV1c2VyaWRcbiAgICAgICAgICAgICAgICAgICAgJChcIi51c2VySWRcIikuZXEoYWRkSW5kZXgpLnZhbChub3dVc2VyaWQpO1xuICAgICAgICAgICAgICAgICAgICBub3dVc2VyaWQgPSBcIlwiO1xuICAgICAgICAgICAgICAgICAgICBib3hDb250ZW50UmVzZXQoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy/ngrnlh7vmkJzntKLmjInpkq7mkJzntKLorrLluIhcbiAgICAgICAgLyokKFwiLm1lbWJlclNlYXJjaEJ0blwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKCcuc2VhcmNoX25vbmUnKS5oaWRlKCk7XG4gICAgICAgICAgICAvL+WIpOepulxuICAgICAgICAgICAgdmFyIHNlYXJjaCA9ICQoXCIjc2VhcmNoSW5wdXRcIikudmFsKCk7XG4gICAgICAgICAgICBpZiAoc2VhcmNoLmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+36L6T5YWl5pCc57Si5YaF5a6577yBXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQuZ2V0KFwiL3pic2VhcmNoXCIsIHtcInNlYXJjaFwiOiBzZWFyY2h9LCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICQoXCIubWVtYmVyUGFydFwiKS5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBkYXRhLmRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIubWVtYmVyTGlzdFwiKS5hcHBlbmQoXCI8ZGl2IGNsYXNzPSdtZW1iZXJQYXJ0JyBpZD0nXCIgKyBkYXRhLmRhdGFbaV0udXNlcl9pZCArIFwiJz4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nbWVtYmVyQ2hlY2snPiA8aW5wdXQgY2xhc3M9J3dpdGgtZ2FwJyBuYW1lPSdncm91cDEwJyB0eXBlPSdyYWRpbycgaWQ9J3Rlc3RcIiArIGkgKyBcIicvPiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8bGFiZWwgZm9yPSd0ZXN0XCIgKyBpICsgXCInPjwvbGFiZWw+IDwvZGl2PiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8ZGl2IGNsYXNzPSdtZW1iZXJsb2dvJz4gPGRpdiBjbGFzcz0nbWVtYmVySW1hZ2UnPjxpbWcgc3JjPVwiICsgZGF0YS5kYXRhW2ldLnd4X2F2YXRhciArIFwiIGFsdD0nJz5cIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj4gPGRpdiBjbGFzcz0nbWVtYmVyTmlja05hbWUnPlwiICsgZGF0YS5kYXRhW2ldLnd4X25pY2tuYW1lICsgXCI8L2Rpdj4gPC9kaXY+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nbWVtYmVyU2V4Jz5cIiArIGRhdGEuZGF0YVtpXS53eF9nZW5kZXIgKyBcIjwvZGl2PlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlclBob25lJz5cIiArIGRhdGEuZGF0YVtpXS5waG9uZSArIFwiPC9kaXY+IDwvZGl2PlwiKVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICQoJy5zZWFyY2hfbm9uZScpLnNob3coKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICB9KTsqL1xuXG4gICAgICAgICQoXCIjc2VhcmNoSW5wdXRcIikub24oXCJrZXlwcmVzc1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgJChcIi5tZW1iZXJTZWFyY2hCdG5cIikuY2xpY2soKTtcbiAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgJChcIi5tZW1iZXJTZWFyY2hCdG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaXNEb3duID0gZmFsc2U7XG4gICAgICAgICAgICBzZWFjaGVyID0gXCJcIjtcbiAgICAgICAgICAgIHNlYWNoZXIgPSAkKFwiI3NlYXJjaElucHV0XCIpLnZhbCgpO1xuICAgICAgICAgICAgcGFnZT0xO1xuXG4gICAgICAgICAgICBpZiAoc2VhY2hlci5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+i+k+WFpeaQnOe0ouWGheWuue+8gVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBnZXRVc2VyTGlzdCgpO1xuICAgICAgICAgICAvLyAkKFwiI2xvYWRpbmdSZWZ1bmRcIikuc2hvdygpO1xuICAgICAgICAgICAvKiBnZXRVc2VyTGlzdChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgJChcIiNsb2FkaW5nUmVmdW5kXCIpLmZhZGVPdXQoMTAwKTtcbiAgICAgICAgICAgICAgICAgICAgICAgfSk7Ki9cbiAgICAgICAgfSk7XG4gICAgICAgIGZ1bmN0aW9uIGdldFVzZXJMaXN0KCl7XG4gICAgICAgICAgICBpc0xvYWRpbmcgPXRydWU7XG4gICAgICAgICAgICAkLmdldChcIi96YnNlYXJjaFwiLCB7XCJzZWFyY2hcIjogc2VhY2hlcixcInBhZ2VcIjpwYWdlfSwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICB2YXIgc3RyPVwiXCIsXG4gICAgICAgICAgICAgICAgICAgICRhcmVhID0gICQoXCIubWVtYmVyTGlzdFwiKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5kYXRhLmxlbmd0aCA9PSAwKXtcbiAgICAgICAgICAgICAgICAgICAgc3RyICs9ICc8ZGl2IGNsYXNzPVwiY29udGVudE5vbmVUaXBcIj7mmoLml6DmlbDmja48L2Rpdj4nO1xuICAgICAgICAgICAgICAgICAgICAkYXJlYS5odG1sKHN0cik7XG4gICAgICAgICAgICAgICAgfWVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEuZGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RyKz1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlclBhcnQnIGlkPSdcIiArIGRhdGEuZGF0YVtpXS51c2VyX2lkICsgXCInPiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGRpdiBjbGFzcz0nbWVtYmVyQ2hlY2snPiA8aW5wdXQgY2xhc3M9J3dpdGgtZ2FwJyBuYW1lPSdncm91cDEwJyB0eXBlPSdyYWRpbycgaWQ9J3Rlc3RcIiArIGkgKyBcIicvPiBcIiArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiPGxhYmVsIGZvcj0ndGVzdFwiICsgaSArIFwiJz48L2xhYmVsPiA8L2Rpdj4gXCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlcmxvZ28nPiA8ZGl2IGNsYXNzPSdtZW1iZXJJbWFnZSc+PGltZyBzcmM9XCIgKyBkYXRhLmRhdGFbaV0ud3hfYXZhdGFyICsgXCIgYWx0PScnPlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXCI8L2Rpdj4gPGRpdiBjbGFzcz0nbWVtYmVyTmlja05hbWUnPlwiICsgZGF0YS5kYXRhW2ldLnd4X25pY2tuYW1lICsgXCI8L2Rpdj4gPC9kaXY+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlclNleCc+XCIgK2RhdGEuZGF0YVtpXS53eF9nZW5kZXIgKyBcIjwvZGl2PlwiICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjxkaXYgY2xhc3M9J21lbWJlclBob25lJz5cIiArIGRhdGEuZGF0YVtpXS5waG9uZSArIFwiPC9kaXY+XCIgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiIDwvZGl2PlwiO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlmKCBwYWdlID09MSApe1xuICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuaHRtbChzdHIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuYXBwZW5kKCc8ZGl2IGNsYXNzPVwiaGFzRG93blwiPui1hOa6kOWKoOi9veS4rS4uLjwvZGl2PicpO1xuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgICAgICRhcmVhLmZpbmQoJy5oYXNEb3duJykuYmVmb3JlKHN0cik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEucGFnZV9vZmZzZXQuY3VycmVudF9wYWdlID49IGRhdGEucGFnZV9vZmZzZXQudG90YWxfcGFnZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuZmluZCgnLmhhc0Rvd24nKS5odG1sKFwi5pWw5o2u5Yqg6L295a6M5q+V44CCXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICBpc0Rvd24gPSB0cnVlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGlzTG9hZGluZyA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICBwYWdlKys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfTtcblxuXG4gICAgICAgICQoJy5kYXJrU2NyZWVuIC5tZW1iZXJMaXN0V3JhcHBlcicpLnNjcm9sbChmdW5jdGlvbihlKXtcbiAgICAgICAgICAgIHZhciBEaXZIZWlnaHQgPSAkKCcubWVtYmVyTGlzdCcpLmhlaWdodCgpLFxuICAgICAgICAgICAgICAgIFNjcm9sbEhlaWdodCA9ICQodGhpcykuaGVpZ2h0KCksXG4gICAgICAgICAgICAgICAgU2Nyb2xsVG9wID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcbiAgICAgICAgICAgIGlmICgoU2Nyb2xsVG9wICsgU2Nyb2xsSGVpZ2h0ID49IERpdkhlaWdodCAtIDUpICYmXG4gICAgICAgICAgICAgICAgIWlzRG93biAmJiAhaXNMb2FkaW5nICkge1xuICAgICAgICAgICAgICAgIGdldFVzZXJMaXN0KCk7XG4gICAgICAgICAgICAgICAvKiAkKFwiI2xvYWRpbmdSZWZ1bmRcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgIGdldFVzZXJMaXN0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJChcIiNsb2FkaW5nUmVmdW5kXCIpLmZhZGVPdXQoMTAwKTtcbiAgICAgICAgICAgICAgICB9KTsqL1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyAg5by556qX5o+Q56S66YKA6K+36K6y5biI6aKE6KeI5Zu+XG4gICAgICAgIC8vICQoXCIuaW52aXRlX3RlYWNoZXJfdGlwIHNwYW5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAvL1xuICAgICAgICAvL1xuICAgICAgICAvL1xuICAgICAgICAvLyB9KTtcblxuXG5cbiAgICAgICAgLy8g5o+Q5Lqk55u05pKt6KGo5Y2VXG4gICAgICAgICQoXCIuY29tcGxldGVCdG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAvL+iOt+WPluebtOaSreihqOWNleaVsOaNrlxuICAgICAgICAgICAgLy/nm7Tmkq3lkI3np7BcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICQudHJpbSgkKFwiLnJlc05hbWVcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreeugOS7i1xuICAgICAgICAgICAgdmFyIHN1bW1hcnk9JC50cmltKCQoXCIjYWxpdmVBYnN0cmFjdFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt57G75Z6LXG4gICAgICAgICAgICB2YXIgYWxpdmVUeXBlPWFsaXZlVDtcblxuICAgICAgICAgICAgLy/nm7Tmkq3ngrnmkq1pZFxuICAgICAgICAgICAgdmFyIEFsaXZlRmlsZUlkID0gZmlsZUlkO1xuXG4gICAgICAgICAgICAvL+ebtOaSreW8gOWni+aXtumXtFxuICAgICAgICAgICAgdmFyIHpiU3RhcnRBdCA9ICQudHJpbSgkKFwiI3piX3N0YXJ0X2F0XCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3nu5PmnZ/ml7bpl7RcbiAgICAgICAgICAgIHZhciB6YkVuZEF0ID0gJC50cmltKCQoXCIjemJfc3RvcF9hdFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt5aSn5bCPXG4gICAgICAgICAgICB2YXIgQWxpdmVTaXplID0gdmlkZW9Hc2l6ZTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3lsIHpnaLlnLDlnYBcbiAgICAgICAgICAgIHZhciBpbWFnZTFVcmwgPSAkLnRyaW0oJChcIiNJbWFnZTFVcmxcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSrei0tOeJh+WcsOWdgFxuICAgICAgICAgICAgdmFyIGltYWdlM1VybCA9ICQudHJpbSgkKFwiI0ltYWdlM1VybFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt5Y6f5aeL5YaF5a656K+m5oOFXG4gICAgICAgICAgICB2YXIgdWUgPSBVRS5nZXRFZGl0b3IoJ3Jlc291cmNlX2Rlc2MnKTtcbiAgICAgICAgICAgIHZhciBvcmdDb250ZW50ID0gdWUuZ2V0Q29udGVudCgpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreWGheWuueaPj+i/sFxuICAgICAgICAgICAgdmFyIGRlc2NyaWIgPSB1ZS5nZXRQbGFpblR4dCgpO1xuICAgICAgICAgICAgaWYgKGRlc2NyaWIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+aPj+i/sOS4jeiDveS4uuepuiEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cblxuICAgICAgICAgICAgLy/ku5jotLnku7fmoLxcbiAgICAgICAgICAgIHZhciByZXNQcml6ZSA9ICQudHJpbSgkKFwiLnJlc1ByaXplXCIpLnZhbCgpKSAqIDEwMDtcblxuICAgICAgICAgICAgLy/nm7Tmkq3pgInmi6nliIbnsbtcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJhbGl2ZUNsYXNzXCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgY2xhc3NBcnJheS5wdXNoKCQodGhpcykuYXR0cignaWQnKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNsYXNzQXJyYXkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreeKtuaAgVxuICAgICAgICAgICAgdmFyIHN0YXRlPWFsaXZlU3RhdGU7XG4gICAgICAgICAgICAvL+S4iuaetuaXtumXtFxuICAgICAgICAgICAgdmFyIHN0YXJ0QXQgPSAkLnRyaW0oJChcIiNkYXRlSW5wdXRcIikudmFsKCkpO1xuXG4gICAgICAgICAgICBmb3IodmFyIGk9MCxqPTA7aTwkKFwiLmVhY2hMaW5lXCIpLmxlbmd0aDtpKyspIHtcbiAgICAgICAgICAgICAgICAvL+ebtOaSreinkuiJsueahOWAvFxuICAgICAgICAgICAgICAgIHZhciB0bXAgPSB7fTtcbiAgICAgICAgICAgICAgICB0bXBbXCJyb2xlX25hbWVcIl0gPSAkKFwiLm1lbWJlckNhbGxcIikuZXEoaSkudmFsKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIHRtcFtcInVzZXJfbmFtZVwiXSA9ICQoXCIubWVtYmVyTmFtZVwiKS5lcShpKS5odG1sKCkudHJpbSgpO1xuICAgICAgICAgICAgICAgIHRtcFtcInVzZXJfaWRcIl0gPSAkKFwiLnVzZXJJZFwiKS5lcShpKS52YWwoKS50cmltKCk7XG4gICAgICAgICAgICAgICAgaWYgKHRtcFtcInVzZXJfaWRcIl0ubGVuZ3RoICE9IDApIHtcbiAgICAgICAgICAgICAgICAgICAgLy/orrLluIjliJfooahcbiAgICAgICAgICAgICAgICAgICAgcm9sZVBhcmFtc1tqXSA9IHRtcDtcbiAgICAgICAgICAgICAgICAgICAgaisrO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v55u05pKt5Y2V5ZOB5LiK5Lyg5L+h5oGvXG4gICAgICAgICAgICB2YXIgcmVzSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAvLyDnm7Tmkq3lkI3np7BcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nroDku4tcbiAgICAgICAgICAgICAgICBzdW1tYXJ5OnN1bW1hcnksXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nsbvlnotcbiAgICAgICAgICAgICAgICBhbGl2ZV90eXBlOmFsaXZlVHlwZSxcbiAgICAgICAgICAgICAgICAvLyAgIOebtOaSreWwgemdouWcsOWdgFxuICAgICAgICAgICAgICAgIGltZ191cmw6IGltYWdlMVVybCxcbiAgICAgICAgICAgICAgICAvL+ebtOaSreWuo+S8oOWwgemdouWcsOWdgFxuICAgICAgICAgICAgICAgIGFsaXZlX2ltZ191cmw6IGltYWdlM1VybCxcbiAgICAgICAgICAgICAgICAvL+inhumikeWQjeensFxuICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogVmlkZW9OYW1lLFxuICAgICAgICAgICAgICAgIC8v55u05pKt5byA5aeL5pe26Ze0XG4gICAgICAgICAgICAgICAgemJfc3RhcnRfYXQ6emJTdGFydEF0LFxuICAgICAgICAgICAgICAgIC8v55u05pKt57uT5p2f5pe26Ze0XG4gICAgICAgICAgICAgICAgemJfc3RvcF9hdDp6YkVuZEF0LFxuICAgICAgICAgICAgICAgIC8v5LqR54K55pKt5paH5Lu2aWRcbiAgICAgICAgICAgICAgICAvL2ZpbGVfaWQ6IEFsaXZlRmlsZUlkLFxuICAgICAgICAgICAgICAgIC8vLy8g55u05pKt5aSn5bCPXG4gICAgICAgICAgICAgICAgLy92aWRlb19zaXplOiBBbGl2ZVNpemUsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3or6bmg4VcbiAgICAgICAgICAgICAgICBkZXNjcmI6IGRlc2NyaWIsXG4gICAgICAgICAgICAgICAgLy/ljp/lp4vmlofmnKxcbiAgICAgICAgICAgICAgICBvcmdfY29udGVudDogb3JnQ29udGVudCxcbiAgICAgICAgICAgICAgICAvL+S7mOi0ueS7t+agvFxuICAgICAgICAgICAgICAgIHBpZWNlX3ByaWNlOiByZXNQcml6ZSxcbiAgICAgICAgICAgICAgICAvL+ebtOaSreeKtuaAgVxuICAgICAgICAgICAgICAgIHN0YXRlOnN0YXRlLFxuICAgICAgICAgICAgICAgIC8v5LiK5p625pe26Ze0XG4gICAgICAgICAgICAgICAgc3RhcnRfYXQ6IHN0YXJ0QXQsXG4gICAgICAgICAgICAgICAgLy9pZFxuICAgICAgICAgICAgICAgIGlkOiBHZXRRdWVyeVN0cmluZygnaWQnKSB8fCBudWxsXG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy/nm7Tmkq3pop3lpJbkv6Hmga9cbiAgICAgICAgICAgIHZhciByZXNvdXJjZVBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAvL+S6keeCueaSreebtOaSrWlkXG4gICAgICAgICAgICAgICAgcHVibGljX3ZpZGVvOiBBbGl2ZUZpbGVJZCxcbiAgICAgICAgICAgICAgICAvL+ebtOaSreWkp+Wwj1xuICAgICAgICAgICAgICAgIHB1YmxpY19zaXplX3RleHQ6IEFsaXZlU2l6ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/mmK/lkKbku5jotLnvvIgx6KGo56S65YWN6LS577yMMuihqOekuuWNleeslO+8iVxuICAgICAgICAgICAgaWYocmVzb3VyY2VGcmVlKSB7XG4gICAgICAgICAgICAgICAgcmVzSW5mby5wYXltZW50X3R5cGUgPSByZXNvdXJjZUZyZWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8v55u05pKt5o+Q6YaSXG4gICAgICAgICAgICByZXNJbmZvLmlmX3B1c2ggPSBpZl9wdXNoO1xuICAgICAgICAgICAgaWYoaWZfcHVzaD09MCB8fCBpZl9wdXNoPT0xKXtcbiAgICAgICAgICAgICAgICByZXNJbmZvLnB1c2hfYWhlYWQgPSBwdXNoX2FoZWFkO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+iOt+WPluihqOWNleS4reeahOaVsOaNrlxuICAgICAgICAgICAgaWYgKGNoZWNrQWxpdmVGb3JtKHJlc0luZm8pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsbFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiByZXNJbmZvLFxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiByZXNvdXJjZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZF9jaGFubmVsX3R5cGU6IHVwbG9hZENoYW5uZWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX2lkOiBwYWNrYWdlSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3BhcmFtczogcmVzb3VyY2VQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHBhY2thZ2VfbmFtZTogcGFja2FnZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGVQYXJhbXM6IHJvbGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5X3R5cGU6Y2xhc3NBcnJheVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgc3VibWl0Rm9ybShnb2xiYWxVcmwsIGFsbFBhcmFtcyk7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coYWxsUGFyYW1zKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHJldHVybiBtYW5hZ2VBbGl2ZTtcbn0oKTtcbiJdfQ==
