$(function(){invitation.init()});var invitation=function(){var e={};var i,t,a,o,n,l,d;function s(e){var i=null;if(window.createObjectURL!=undefined){i=window.createObjectURL(e)}else if(window.URL!=undefined){i=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){i=window.webkitURL.createObjectURL(e)}return i}function r(e){if(window.revokeObjectURL!=undefined){window.revokeObjectURL(e)}else if(window.URL!=undefined){window.URL.revokeObjectURL(e)}else if(window.webkitURL!=undefined){window.webkitURL.revokeObjectURL(e)}}function c(e,i,t,a){$(".loadingPartial").show();console.log(e);if(e&&e.length>0){var o=e[0];var n=s(o);fileSize=(o.size/(1024*1024)).toFixed(2);resAudio1Lengh=o.duration;if($uploadFile.checkFileSize(o,a)){$uploadFile.uploadRes(o,i,function(e){},function(e){$(".loadingPartial").hide();console.log(e);baseUtils.show.blueTip("上传成功！");$(".deleteImg").show();resUrl=e.data.access_url;console.log(resUrl);$("#imgUrl").val(resUrl);if(i=="image"){$("#reBackImg").load(function(){r(n)}).attr("src",n)}},function(e){$(".loadingPartial").hide();console.error("上传失败!!!");console.log(e);baseUtils.show.redTip("上传失败！")})}else{baseUtils.show.redTip("上传资源限制在"+a+"MB内！");$(".upLoad"+t).val("")}}else{baseUtils.show.redTip("网络错误，请稍后再试！")}}e.init=function(){$("#uploadImage").on("change",function(){c(this.files,"image","reBackImg",5)});$(".deleteImg1").click(function(){$("#reBackImg").attr("src","");$("#imgUrl").val("");$("#uploadImage").val("")});document.onkeydown=e;function e(e){if(e.keyCode==13){$(".goodsSearchBtn").click()}}$(".salerContent").on("click",".inviteOperate",function(){i=$(this).data("id");t=$(this).data("name");a=$(this).data("price");o=$(this).data("is_invite");n=$(this).data("good_type");l=$(this).data("inviteposter");d=$(this).data("distribute_percent");$(".saleGoodsName").text(t);$("#reBackImg").attr("src",l);$("#imgUrl").val(l);if(l!=""){$(".deleteImg").show();$(".deleteImg1").show()}else{$(".deleteImg").hide();$(".deleteImg1").hide()}$(".inputRadioValue").val(d);if(a<=1){$(".inputRadioValue").attr("readonly","readonly");$(".inputRadioValue").attr("disabled","disabled");$(".inputRadioValue").addClass("inputDisabled")}else{$(".inputRadioValue").removeClass("inputDisabled");$(".inputRadioValue").removeAttr("readonly");$(".inputRadioValue").removeAttr("disabled")}$(".setSaleRatioWindow").fadeIn(200)});$(".setSaleRatioWindow").on("click",".label1",function(){$(".setPercent").slideDown(300);$(".inputRadioValue").removeAttr("readonly");$(".inputRadioValue").removeAttr("disabled");$(".inputRadioValue").css("color","#243042");o=1});$(".setSaleRatioWindow").on("click",".label2",function(){$(".setPercent").slideUp(300);$(".inputRadioValue").attr("readonly","readonly");$(".inputRadioValue").attr("disabled","disabled");$(".inputRadioValue").css("color","#b2b2b2");$(".inputRadioValue").val("");o=0});$(".setSaleRatioWindow").on("click",".closeIcon,.cancelSaleBtn",function(){$(".setSaleRatioWindow").fadeOut(200)});$(".salerContent").on("click",".goodsSearchBtn",function(){var e=$(".goodsSearchInput").val();window.location="/invite/index?name="+e});$(".setSaleRatioWindow").on("click",".confirmSaleBtn",function(){d=$(".inputRadioValue").val();l=$("#imgUrl").val();var e={id:i,goods_type:n,distribute_percent:d,invite_poster:l};if(o&&$formCheck.emptyString(e.distribute_percent)){baseUtils.show.blueTip("请输入要设置的比例！");return false}$.post("set",e,function(e){if(e.code===0){baseUtils.show.blueTip("保存成功");location.reload()}else{baseUtils.show.redTip(e.msg)}})})};return e}();function rateCheckNum1(e,i){e=e.replace(/[^\d]/g,"");e=e.replace(/^[5][1-9]$|^[6-9]\d$|^[1-9][0-9]\d{1,}$|^0\d{1,}$/,"");$(i).val(e)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludml0YXRpb24uanMiXSwibmFtZXMiOlsiJCIsImludml0YXRpb24iLCJpbml0IiwiaWQiLCJuYW1lIiwicHJpY2UiLCJpc0ludml0ZSIsImdvb2RUeXBlIiwiaW52aXRlUG9zdGVyIiwiZGlzdHJpYnV0ZVBlcmNlbnQiLCJnZXRPYmplY3RVUkwiLCJmaWxlIiwidXJsIiwid2luZG93IiwiY3JlYXRlT2JqZWN0VVJMIiwidW5kZWZpbmVkIiwiVVJMIiwid2Via2l0VVJMIiwicmVtb3ZlT2JqZWN0VVJMIiwicmV2b2tlT2JqZWN0VVJMIiwicmVzVXBsb2FkIiwiZmlsZXMiLCJyZXNUeXBlIiwicmVzVHlwZUNsYXNzIiwicmVzTGltaXRTaXplIiwic2hvdyIsImNvbnNvbGUiLCJsb2ciLCJsZW5ndGgiLCJyZXNvdXJjZUxvY2FsVXJsIiwiZmlsZVNpemUiLCJzaXplIiwidG9GaXhlZCIsInJlc0F1ZGlvMUxlbmdoIiwiZHVyYXRpb24iLCIkdXBsb2FkRmlsZSIsImNoZWNrRmlsZVNpemUiLCJ1cGxvYWRSZXMiLCJkYXRhIiwiaGlkZSIsImJhc2VVdGlscyIsImJsdWVUaXAiLCJyZXNVcmwiLCJhY2Nlc3NfdXJsIiwidmFsIiwibG9hZCIsImF0dHIiLCJlcnJvciIsInJlZFRpcCIsIm9uIiwidGhpcyIsImNsaWNrIiwiZG9jdW1lbnQiLCJvbmtleWRvd24iLCJrZXlMaXN0ZW5lciIsImUiLCJrZXlDb2RlIiwidGV4dCIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCJyZW1vdmVBdHRyIiwiZmFkZUluIiwic2xpZGVEb3duIiwiY3NzIiwic2xpZGVVcCIsImZhZGVPdXQiLCJnb29kU2VhcmNoQ29udGVudCIsImxvY2F0aW9uIiwiaW52aXRlSW5mbyIsImdvb2RzX3R5cGUiLCJkaXN0cmlidXRlX3BlcmNlbnQiLCJpbnZpdGVfcG9zdGVyIiwiJGZvcm1DaGVjayIsImVtcHR5U3RyaW5nIiwicG9zdCIsImNvZGUiLCJyZWxvYWQiLCJtc2ciLCJyYXRlQ2hlY2tO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dUJpRSxRQUFRLE1BSXJDakUsR0FBRSxpQkFBaUJpRCxHQUFHLFFBQVMsa0JBQW1CLFdBQzlDLEdBQUlpQixHQUFvQmxFLEVBQUUscUJBQXFCNEMsS0FDL0MvQixRQUFPc0QsU0FBVyxzQkFBd0JELEdBRzlDbEUsR0FBRSx1QkFBdUJpRCxHQUFHLFFBQVMsa0JBQW1CLFdBQ3BEeEMsRUFBb0JULEVBQUUsb0JBQW9CNEMsS0FDMUNwQyxHQUFlUixFQUFFLFdBQVc0QyxLQUM1QixJQUFJd0IsSUFDQWpFLEdBQUlBLEVBQ0prRSxXQUFZOUQsRUFDWitELG1CQUFvQjdELEVBQ3BCOEQsY0FBZS9ELEVBRW5CLElBQUlGLEdBQVlrRSxXQUFXQyxZQUFZTCxFQUFXRSxvQkFBcUIsQ0FDbkU5QixVQUFVZixLQUFLZ0IsUUFBUSxhQUN2QixPQUFPLE9BT1h6QyxFQUFFMEUsS0FBSyxNQUFPTixFQUFZLFNBQVU5QixHQUNoQyxHQUFJQSxFQUFLcUMsT0FBUyxFQUFHLENBQ2pCbkMsVUFBVWYsS0FBS2dCLFFBQVEsT0FDdkIwQixVQUFTUyxhQUNOLENBQ0hwQyxVQUFVZixLQUFLdUIsT0FBT1YsRUFBS3VDLFVBUTNDLE9BQU81RSxLQUdYLFNBQVM2RSxlQUFjQyxFQUFPQyxHQUUxQkQsRUFBUUEsRUFBTUUsUUFBUSxTQUFVLEdBRWhDRixHQUFRQSxFQUFNRSxRQUFRLG9EQUFxRCxHQUUzRWpGLEdBQUVnRixHQUFLcEMsSUFBSW1DIiwiZmlsZSI6Imludml0YXRpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uICgpIHtcblxuICAgIGludml0YXRpb24uaW5pdCgpO1xuXG59KTtcblxudmFyIGludml0YXRpb24gPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGludml0YXRpb24gPSB7fTtcblxuICAgIHZhciBpZCwgLy/llYblk4FpZFxuICAgICAgICBuYW1lLCAvL+WVhuWTgeWQjeensFxuICAgICAgICBwcmljZSwgLy/llYblk4Hku7fmoLxcbiAgICAgICAgaXNJbnZpdGUsIC8v5piv5ZCm5ZCv55So6YKA6K+35Y2hXG4gICAgICAgIGdvb2RUeXBlLCAvL+WVhuWTgeexu+Wei1xuICAgICAgICBpbnZpdGVQb3N0ZXIsIC8v6YKA6K+35Y2h5bCB6Z2i5Zyw5Z2AXG4gICAgICAgIGRpc3RyaWJ1dGVQZXJjZW50OyAvL+WlluWKseavlOS+i1xuXG4gICAgZnVuY3Rpb24gZ2V0T2JqZWN0VVJMKGZpbGUpIHtcbiAgICAgICAgdmFyIHVybCA9IG51bGw7XG4gICAgICAgIGlmICh3aW5kb3cuY3JlYXRlT2JqZWN0VVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXJsID0gd2luZG93LmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuVVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LndlYmtpdFVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy53ZWJraXRVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB1cmw7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVtb3ZlT2JqZWN0VVJMKHVybCkgeyAvL+mHiuaUvui1hOa6kFVSTFxuICAgICAgICBpZiAod2luZG93LnJldm9rZU9iamVjdFVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuVVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cud2Via2l0VVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgd2luZG93LndlYmtpdFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8v6LWE5rqQ5LiK5Lyg5Ye95pWwKOWPguaVsO+8mnJlc1R5cGU66LWE5rqQ57G75Z6LLHJlc1R5cGVDbGFzczrotYTmupDnsbvlnovkuK3nu4bliIbnmoTnp43nsbsscmVzTGltaXRTaXplOui1hOa6kOmZkOWItuWkp+WwjylcbiAgICBmdW5jdGlvbiByZXNVcGxvYWQoZmlsZXMsIHJlc1R5cGUsIHJlc1R5cGVDbGFzcywgcmVzTGltaXRTaXplKSB7XG4gICAgICAgICQoXCIubG9hZGluZ1BhcnRpYWxcIikuc2hvdygpO1xuICAgICAgICBjb25zb2xlLmxvZyhmaWxlcyk7XG4gICAgICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICB2YXIgZmlsZSA9IGZpbGVzWzBdO1xuICAgICAgICAgICAgdmFyIHJlc291cmNlTG9jYWxVcmwgPSBnZXRPYmplY3RVUkwoZmlsZSk7XG4gICAgICAgICAgICBmaWxlU2l6ZSA9IChmaWxlLnNpemUgLyAoMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpO1xuICAgICAgICAgICAgcmVzQXVkaW8xTGVuZ2ggPSBmaWxlLmR1cmF0aW9uO1xuICAgICAgICAgICAgLy8g6ZmQ5Yi26LWE5rqQ5ZyoKk1C5YaFXG4gICAgICAgICAgICBpZiAoJHVwbG9hZEZpbGUuY2hlY2tGaWxlU2l6ZShmaWxlLCByZXNMaW1pdFNpemUpKSB7XG4gICAgICAgICAgICAgICAgJHVwbG9hZEZpbGUudXBsb2FkUmVzKGZpbGUsIHJlc1R5cGUsIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpZiAocmVzVHlwZSA9PSAnYXVkaW8nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgdmFyIHByb2dyZXNzID0gcGFyc2VJbnQoZGF0YSAqIDEwMCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyAgICAgY29uc29sZS5sb2cocHJvZ3Jlc3MpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICQoXCIudXBsb2FkUExpbmVBY3RpdmVcIiArIHJlc1R5cGVDbGFzcykuY3NzKFwid2lkdGhcIiwgcHJvZ3Jlc3MgKyAnJScpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgICQoXCIudXBsb2FkUGVyc2VudFwiICsgcmVzVHlwZUNsYXNzKS50ZXh0KHByb2dyZXNzICsgXCIlXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAvLyDkuIrkvKDmiJDlip/lm57osINcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIubG9hZGluZ1BhcnRpYWxcIikuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5LiK5Lyg5oiQ5Yqf77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5kZWxldGVJbWdcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzVXJsID0gZGF0YS5kYXRhLmFjY2Vzc191cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhyZXNVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNpbWdVcmxcIikudmFsKHJlc1VybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyDlpoLmnpzmmK/lm77niYfotYTmupDvvIzliJnlsZXnpLrlm77niYfpooTop4hcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXNUeXBlID09ICdpbWFnZScpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ebtOaOpeWKoOi9veacrOWcsOWbvueJh+i/m+ihjOmihOiniFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjcmVCYWNrSW1nXCIpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5sb2FkKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU9iamVjdFVSTChyZXNvdXJjZUxvY2FsVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmF0dHIoXCJzcmNcIiwgcmVzb3VyY2VMb2NhbFVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5aSx6LSl5Zue6LCDXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdQYXJ0aWFsXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLkuIrkvKDlpLHotKUhISFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOWksei0pe+8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOi1hOa6kOmZkOWItuWcqFwiICsgcmVzTGltaXRTaXplICsgXCJNQuWGhe+8gVwiKTtcbiAgICAgICAgICAgICAgICAkKFwiLnVwTG9hZFwiICsgcmVzVHlwZUNsYXNzKS52YWwoXCJcIik7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gVwiKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZpbGVzKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgaW52aXRhdGlvbi5pbml0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAvLyDngrnlh7vmjInpkq7kuIrkvKDlm77niYdcbiAgICAgICAgJChcIiN1cGxvYWRJbWFnZVwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXNVcGxvYWQodGhpcy5maWxlcywgXCJpbWFnZVwiLCBcInJlQmFja0ltZ1wiLCA1KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5Yig6Zmk5LiK5Lyg5Zu+54mHXG4gICAgICAgICQoXCIuZGVsZXRlSW1nMVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiI3JlQmFja0ltZ1wiKS5hdHRyKFwic3JjXCIsIFwiXCIpO1xuICAgICAgICAgICAgJChcIiNpbWdVcmxcIikudmFsKFwiXCIpO1xuICAgICAgICAgICAgJChcIiN1cGxvYWRJbWFnZVwiKS52YWwoXCJcIik7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v5Li6a2V5TGlzdGVuZXLmlrnms5Xms6jlhozmjInplK7kuovku7ZcbiAgICAgICAgZG9jdW1lbnQub25rZXlkb3duID0ga2V5TGlzdGVuZXI7XG5cbiAgICAgICAgZnVuY3Rpb24ga2V5TGlzdGVuZXIoZSkge1xuICAgICAgICAgICAgLy8g5b2T5oyJ5LiL5Zue6L2m6ZSu77yM5omn6KGM5oiR5Lus55qE5Luj56CBXG4gICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XG4gICAgICAgICAgICAgICAgJChcIi5nb29kc1NlYXJjaEJ0blwiKS5jbGljaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy/pgoDor7fljaHorr7nva5cbiAgICAgICAgJChcIi5zYWxlckNvbnRlbnRcIikub24oXCJjbGlja1wiLCBcIi5pbnZpdGVPcGVyYXRlXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlkID0gJCh0aGlzKS5kYXRhKFwiaWRcIik7XG4gICAgICAgICAgICBuYW1lID0gJCh0aGlzKS5kYXRhKFwibmFtZVwiKTtcbiAgICAgICAgICAgIHByaWNlID0gJCh0aGlzKS5kYXRhKFwicHJpY2VcIik7XG4gICAgICAgICAgICBpc0ludml0ZSA9ICQodGhpcykuZGF0YShcImlzX2ludml0ZVwiKTtcbiAgICAgICAgICAgIGdvb2RUeXBlID0gJCh0aGlzKS5kYXRhKFwiZ29vZF90eXBlXCIpO1xuICAgICAgICAgICAgaW52aXRlUG9zdGVyID0gJCh0aGlzKS5kYXRhKFwiaW52aXRlcG9zdGVyXCIpO1xuICAgICAgICAgICAgZGlzdHJpYnV0ZVBlcmNlbnQgPSAkKHRoaXMpLmRhdGEoXCJkaXN0cmlidXRlX3BlcmNlbnRcIik7XG4gICAgICAgICAgICAkKFwiLnNhbGVHb29kc05hbWVcIikudGV4dChuYW1lKTtcbiAgICAgICAgICAgICQoXCIjcmVCYWNrSW1nXCIpLmF0dHIoXCJzcmNcIiwgaW52aXRlUG9zdGVyKTtcbiAgICAgICAgICAgICQoXCIjaW1nVXJsXCIpLnZhbChpbnZpdGVQb3N0ZXIpO1xuICAgICAgICAgICAgaWYgKGludml0ZVBvc3RlciAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgJChcIi5kZWxldGVJbWdcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoXCIuZGVsZXRlSW1nMVwiKS5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCIuZGVsZXRlSW1nXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKFwiLmRlbGV0ZUltZzFcIikuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gaWYoaXNJbnZpdGUpe1xuICAgICAgICAgICAgLy8gICAgICQoXCIubGFiZWwxXCIpLmNsaWNrKCk7XG4gICAgICAgICAgICAvLyAgICAgJChcIi5zZXRQZXJjZW50XCIpLnNob3coKTtcbiAgICAgICAgICAgIC8vIH1lbHNlIHtcbiAgICAgICAgICAgIC8vICAgICAkKFwiLmxhYmVsMlwiKS5jbGljaygpO1xuICAgICAgICAgICAgLy8gICAgICQoXCIuc2V0UGVyY2VudFwiKS5oaWRlKCk7XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgICAgICAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS52YWwoZGlzdHJpYnV0ZVBlcmNlbnQpO1xuICAgICAgICAgICAgaWYgKHByaWNlIDw9IDEpIHtcbiAgICAgICAgICAgICAgICAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS5hdHRyKFwicmVhZG9ubHlcIiwgXCJyZWFkb25seVwiKTtcbiAgICAgICAgICAgICAgICAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS5hZGRDbGFzcyhcImlucHV0RGlzYWJsZWRcIik7XG5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikucmVtb3ZlQ2xhc3MoXCJpbnB1dERpc2FibGVkXCIpO1xuICAgICAgICAgICAgICAgICQoXCIuaW5wdXRSYWRpb1ZhbHVlXCIpLnJlbW92ZUF0dHIoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICAgICAgICAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkKFwiLnNldFNhbGVSYXRpb1dpbmRvd1wiKS5mYWRlSW4oMjAwKTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIi5zZXRTYWxlUmF0aW9XaW5kb3dcIikub24oXCJjbGlja1wiLCBcIi5sYWJlbDFcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIi5zZXRQZXJjZW50XCIpLnNsaWRlRG93bigzMDApO1xuICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikucmVtb3ZlQXR0cihcInJlYWRvbmx5XCIpO1xuICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikuY3NzKFwiY29sb3JcIiwgXCIjMjQzMDQyXCIpO1xuICAgICAgICAgICAgaXNJbnZpdGUgPSAxO1xuICAgICAgICB9KTtcblxuICAgICAgICAkKFwiLnNldFNhbGVSYXRpb1dpbmRvd1wiKS5vbihcImNsaWNrXCIsIFwiLmxhYmVsMlwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLnNldFBlcmNlbnRcIikuc2xpZGVVcCgzMDApO1xuICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikuYXR0cihcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgICAgICAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS5hdHRyKFwiZGlzYWJsZWRcIiwgXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICQoXCIuaW5wdXRSYWRpb1ZhbHVlXCIpLmNzcyhcImNvbG9yXCIsIFwiI2IyYjJiMlwiKTtcbiAgICAgICAgICAgICQoXCIuaW5wdXRSYWRpb1ZhbHVlXCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgIGlzSW52aXRlID0gMDtcbiAgICAgICAgfSk7XG5cblxuICAgICAgICAkKFwiLnNldFNhbGVSYXRpb1dpbmRvd1wiKS5vbihcImNsaWNrXCIsIFwiLmNsb3NlSWNvbiwuY2FuY2VsU2FsZUJ0blwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiLnNldFNhbGVSYXRpb1dpbmRvd1wiKS5mYWRlT3V0KDIwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v5ZWG5ZOB5pCc57SiXG4gICAgICAgICQoXCIuc2FsZXJDb250ZW50XCIpLm9uKCdjbGljaycsICcuZ29vZHNTZWFyY2hCdG4nLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZ29vZFNlYXJjaENvbnRlbnQgPSAkKFwiLmdvb2RzU2VhcmNoSW5wdXRcIikudmFsKCk7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24gPSAnL2ludml0ZS9pbmRleD9uYW1lPScgKyBnb29kU2VhcmNoQ29udGVudDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIi5zZXRTYWxlUmF0aW9XaW5kb3dcIikub24oXCJjbGlja1wiLCBcIi5jb25maXJtU2FsZUJ0blwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBkaXN0cmlidXRlUGVyY2VudCA9ICQoXCIuaW5wdXRSYWRpb1ZhbHVlXCIpLnZhbCgpO1xuICAgICAgICAgICAgaW52aXRlUG9zdGVyID0gJChcIiNpbWdVcmxcIikudmFsKCk7XG4gICAgICAgICAgICB2YXIgaW52aXRlSW5mbyA9IHtcbiAgICAgICAgICAgICAgICBpZDogaWQsXG4gICAgICAgICAgICAgICAgZ29vZHNfdHlwZTogZ29vZFR5cGUsXG4gICAgICAgICAgICAgICAgZGlzdHJpYnV0ZV9wZXJjZW50OiBkaXN0cmlidXRlUGVyY2VudCxcbiAgICAgICAgICAgICAgICBpbnZpdGVfcG9zdGVyOiBpbnZpdGVQb3N0ZXJcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBpZiAoaXNJbnZpdGUgJiYgJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbnZpdGVJbmZvLmRpc3RyaWJ1dGVfcGVyY2VudCkpIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi6K+36L6T5YWl6KaB6K6+572u55qE5q+U5L6L77yBXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8qY29uc29sZS5sb2cocHJpY2UgKiAoZGlzdHJpYnV0ZVBlcmNlbnQvMTAwKSlcbiAgICAgICAgICAgIGlmKHByaWNlICogKGRpc3RyaWJ1dGVQZXJjZW50LzEwMCkgPCAwLjAxKSB7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6aKE6K6h6YKA6K+35aWW5Yqx5bCP5LqOMC4wMeWFg++8jOivt+mHjeaWsOiuvue9ru+8gVwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9Ki9cbiAgICAgICAgICAgICQucG9zdCgnc2V0JywgaW52aXRlSW5mbywgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5jb2RlID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLkv53lrZjmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG5cbiAgICB9O1xuXG4gICAgcmV0dXJuIGludml0YXRpb247XG59KCk7XG5cbmZ1bmN0aW9uIHJhdGVDaGVja051bTEodmFsdWUsIGRvbSkge1xuICAgIC8v5riF6ZmkXCLmlbDlrZdcIuS7peWklueahOWtl+esplxuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvW15cXGRdL2csIFwiXCIpO1xuXG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eWzVdWzEtOV0kfF5bNi05XVxcZCR8XlsxLTldWzAtOV1cXGR7MSx9JHxeMFxcZHsxLH0kLywgXCJcIik7XG5cbiAgICAkKGRvbSkudmFsKHZhbHVlKTtcbn1cbiJdfQ==
