$(document).ready(function(){$("input[name='search']").val(getUrlParam("search"));$("select[name='ruler']").val(getUrlParam("ruler")==null||getUrlParam("ruler")==""?0:getUrlParam("ruler"));if(microfunc==1){$("select[name='apptype']").val(getUrlParam("apptype")==null||getUrlParam("apptype")==""?0:getUrlParam("apptype"))}$("#searchButton").click(function(){showLoading();var e=$("select[name='ruler']").val();var o="";if(microfunc==1){var o=$("select[name='apptype']").val()}var a=$("input[name='search']").val();var t=getUrlParam("forbid");t=t?"&forbid=1":"";if(microfunc==1){var o=$("select[name='apptype']").val();window.location.href="/feedback?ruler="+e+"&search="+a+"&apptype="+o+t}else{window.location.href="/feedback?ruler="+e+"&search="+a+t}hideLoading()});$(document).keypress(function(e){if(e.which==13){$("#searchButton").trigger("click")}});initMsgModel();$(".msg_glyphicon").on("mouseover",function(){$(this).find(".msg_showbox").show()}).on("mouseleave",function(){$(this).find(".msg_showbox").hide()});$("#msg_glyphicon").on("mouseover",function(){$(".msg_showbox").show()}).on("mouseleave",function(){$(".msg_showbox").hide()}).on("click",function(){$(".msg_showbox").toggle()})});function jumpDetail(e){var e=e;var o=e.split("|")[0];var a=e.split("|")[1];resetUrl("/customerdetail?appId="+o+"&userId="+a)}function forbid(e){var e=e;var o=e.split("|")[0];var a=e.split("|")[1];showLoading();$.post("/forbid",{userId:o,stat:a},function(e){hideLoading();if(e.code==0){baseUtils.show.blueTip("操作成功!",function(){window.location.reload()})}else{window.wxc.xcConfirm("系统繁忙，请稍后再试!","error")}})}function jumpMsg(e){var e=e;var o=e.split("|")[0];var a=e.split("|")[1];var t=e.split("|")[2];$("#SmsModal").modal("show");$(".modal-footer").children("button").eq(0).unbind("click").bind("click",function(){var e=$("#sms_nickname").val();var n=$("#sms_content").val();if(e.length==0){window.wxc.xcConfirm("亲，还未输入发送人昵称哦~","error");return false}if(n.length==0){window.wxc.xcConfirm("亲，还未输入消息内容哦~","error");return false}$("#SmsModal").modal("hide");showLoading();$.post("/customermsg",{appId:o,userId:a,feedbackId:t,nickname:e,content:n},function(e){hideLoading();if(e.ret==0){baseUtils.show.blueTip("发送成功!",function(){window.location.reload()})}else{window.wxc.xcConfirm("系统繁忙，请稍后再试!","error")}})})}function initMsgModel(){$(".model_type").on("click",function(){$(".model_type").removeClass("border_blue");$(this).addClass("border_blue");$("#sms_nickname").val($(this).attr("data-name"));$("#sms_content").val($(this).attr("data-content"));if($("#cancel_model").hasClass("border_blue")){$(".edit_model").addClass("hide");$(".model_type").removeClass("border_blue")}model_id=$(this).attr("data-id");sms_name=$(this).attr("data-name");sms_content=$(this).attr("data-content")});$("#sms_content").keyup(function(){if($(".border_blue").length>0){$(".edit_model").removeClass("hide")}});$("#sms_nickname").keyup(function(){if($(".border_blue").length>0){$(".edit_model").removeClass("hide")}});$(".edit_model").on("click",function(){model_id=$(".border_blue").attr("data-id");var e=$("#sms_nickname").val();var o=$("#sms_content").val();if(model_id==""){model_id=0;if(e!=""&&o!=""){console.log("新增模板："+model_id+">>"+e+">>"+o)}else{baseUtils.show.redTip("您的发送人昵称/内容为空");return}}else{if(e!=""&&o!=""){console.log("更新模板："+model_id+">>"+e+">>"+o)}else{baseUtils.show.redTip("您的发送人昵称/内容为空");return}}if(e==sms_name&&o==sms_content){baseUtils.show.redTip("您没有做任何模板修改")}else{showLoading();var a="/modelchange";$.post(a,{model_id:model_id,send_nick_name:e,content:o},function(a){hideLoading();console.log(a);var t=a.code;var n=a.msg;baseUtils.show.blueTip(n);if(t==0){$(".border_blue").attr("data-id",a.id);$(".border_blue").attr("data-name",e);$(".border_blue").attr("data-content",o);needRefresh=true}else if(t==1){console.log(a.errorMsg)}else if(t==2){$(".border_blue").attr("data-name",e);$(".border_blue").attr("data-content",o);needRefresh=true}})}})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2ZlZWRiYWNrLmpzIl0sIm5hbWVzIjpbIiQiLCJkb2N1bWVudCIsInJlYWR5IiwidmFsIiwiZ2V0VXJsUGFyYW0iLCJtaWNyb2Z1bmMiLCJjbGljayIsInNob3dMb2FkaW5nIiwicnVsZXIiLCJhcHB0eXBlIiwic2VhcmNoIiwiZm9yYmlkIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiaGlkZUxvYWRpbmciLCJrZXlwcmVzcyIsImUiLCJ3aGljaCIsInRyaWdnZXIiLCJpbml0TXNnTW9kZWwiLCJvbiIsInRoaXMiLCJmaW5kIiwic2hvdyIsImhpZGUiLCJ0b2dnbGUiLCJqdW1wRGV0YWlsIiwiaW5mbyIsImFwcElkIiwic3BsaXQiLCJ1c2VySWQiLCJyZXNldFVybCIsInN0YXQiLCJwb3N0IiwiZGF0YSIsImNvZGUiLCJiYXNlVXRpbHMiLCJibHVlVGlwIiwicmVsb2FkIiwid3hjIiwieGNDb25maXJtIiwianVtcE1zZyIsImZkSWQiLCJtb2RhbCIsImNoaWxkcmVuIiwiZXEiLCJ1bmJpbmQiLCJiaW5kIiwibmlja25hbWUiLCJjb250ZW50IiwibGVuZ3RoIiwiZmVlZGJhY2tJZCIsInJldCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJhdHRyIiwiaGFzQ2xhc3MiLCJtb2RlbF9pZCIsInNtc19uYW1lIiwic21zX2NvbnRlbnQiLCJrZXl1cCIsIm5hbWUiLCJjb25zb2xlIiwibG9nIiwicmVkVGlwIiwidXJsIiwic2VuZF9uaWNrX25hbWUiLCJyZXN1bHQiLCJSZUNvZGUiLCJtc2ciLCJpZCIsIm5lZWRSZWZyZXNoIiwiZXJyb3JNc2ciXSwibWFwcGluZ3MiOiJBQUdBQSxFQUFFQyxVQUFVQyxNQUFNLFdBSWRGLEVBQUUsd0JBQXdCRyxJQUFJQyxZQUFZLFVBQzFDSixHQUFFLHdCQUF3QkcsSUFBS0MsWUFBWSxVQUFVLE1BQVNBLFlBQVksVUFBVSxHQUFNLEVBQUdBLFlBQVksU0FDekcsSUFBR0MsV0FBVyxFQUFFLENBQ1pMLEVBQUUs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dEIsYUFFSCxDQUVELEdBQUdILEdBQU0sSUFBTVosR0FBUyxHQUFHLENBQ3ZCYSxRQUFRQyxJQUFJLFFBQVFOLFNBQVMsS0FBS0ksRUFBSyxLQUFLWixPQUMzQyxDQUNEYixVQUFVYixLQUFLeUMsT0FBTyxlQUN0QixTQUdSLEdBQUdILEdBQVFILFVBQVlULEdBQVdVLFlBQVksQ0FDMUN2QixVQUFVYixLQUFLeUMsT0FBTyxrQkFDckIsQ0FDRDFELGFBQ0EsSUFBSTJELEdBQU0sY0FDVmxFLEdBQUVrQyxLQUFLZ0MsR0FBTVIsU0FBWUEsU0FBU1MsZUFBaUJMLEVBQUtaLFFBQVVBLEdBQVMsU0FBVWtCLEdBQ2pGckQsYUFDQWdELFNBQVFDLElBQUlJLEVBQ1osSUFBSUMsR0FBU0QsRUFBT2hDLElBQ3BCLElBQUlSLEdBQU93QyxFQUFPRSxHQUNsQmpDLFdBQVViLEtBQUtjLFFBQVFWLEVBQ3ZCLElBQUd5QyxHQUFRLEVBQUUsQ0FDVHJFLEVBQUUsZ0JBQWdCd0QsS0FBSyxVQUFVWSxFQUFPRyxHQUN4Q3ZFLEdBQUUsZ0JBQWdCd0QsS0FBSyxZQUFZTSxFQUNuQzlELEdBQUUsZ0JBQWdCd0QsS0FBSyxlQUFlTixFQUN0Q3NCLGFBQWMsU0FDWixJQUFHSCxHQUFRLEVBQUUsQ0FDZk4sUUFBUUMsSUFBSUksRUFBT0ssY0FDakIsSUFBR0osR0FBUSxFQUFFLENBQ2ZyRSxFQUFFLGdCQUFnQndELEtBQUssWUFBWU0sRUFDbkM5RCxHQUFFLGdCQUFnQndELEtBQUssZUFBZU4sRUFDdENzQixhQUFjIiwiZmlsZSI6ImFkbWluL2ZlZWRiYWNrLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgU3R1cGhpbiBvbiAyMDE2LzkvMjguXHJcbiAqL1xyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpXHJcbntcclxuXHJcbiAgICAvL+Whq+WFpeaQnOe0ouWAvFxyXG4gICAgJChcImlucHV0W25hbWU9J3NlYXJjaCddXCIpLnZhbChnZXRVcmxQYXJhbShcInNlYXJjaFwiKSk7XHJcbiAgICAkKFwic2VsZWN0W25hbWU9J3J1bGVyJ11cIikudmFsKChnZXRVcmxQYXJhbShcInJ1bGVyXCIpPT1udWxsICB8fCBnZXRVcmxQYXJhbShcInJ1bGVyXCIpPT0nJykgPyAwIDpnZXRVcmxQYXJhbShcInJ1bGVyXCIpKTtcclxuICAgIGlmKG1pY3JvZnVuYz09MSl7XHJcbiAgICAgICAgJChcInNlbGVjdFtuYW1lPSdhcHB0eXBlJ11cIikudmFsKChnZXRVcmxQYXJhbShcImFwcHR5cGVcIik9PW51bGwgIHx8IGdldFVybFBhcmFtKFwiYXBwdHlwZVwiKT09JycpID8gMCA6Z2V0VXJsUGFyYW0oXCJhcHB0eXBlXCIpKTtcclxuICAgIH1cclxuICAgIC8v5pCc57SiXHJcbiAgICAkKFwiI3NlYXJjaEJ1dHRvblwiKS5jbGljayhmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcclxuICAgICAgICB2YXIgcnVsZXI9JChcInNlbGVjdFtuYW1lPSdydWxlciddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBhcHB0eXBlID0gJyc7XHJcbiAgICAgICAgaWYobWljcm9mdW5jPT0xKXtcclxuICAgICAgICAgICAgdmFyIGFwcHR5cGU9JChcInNlbGVjdFtuYW1lPSdhcHB0eXBlJ11cIikudmFsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBzZWFyY2g9JChcImlucHV0W25hbWU9J3NlYXJjaCddXCIpLnZhbCgpO1xyXG4gICAgICAgIHZhciBmb3JiaWQgPSBnZXRVcmxQYXJhbSgnZm9yYmlkJyk7XHJcbiAgICAgICAgZm9yYmlkID0gZm9yYmlkPyAnJmZvcmJpZD0xJyA6ICcnO1xyXG4gICAgICAgIGlmKG1pY3JvZnVuYz09MSl7XHJcbiAgICAgICAgICAgIHZhciBhcHB0eXBlPSQoXCJzZWxlY3RbbmFtZT0nYXBwdHlwZSddXCIpLnZhbCgpO1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj1cIi9mZWVkYmFjaz9ydWxlcj1cIitydWxlcitcIiZzZWFyY2g9XCIrc2VhcmNoKycmYXBwdHlwZT0nK2FwcHR5cGUrZm9yYmlkO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj1cIi9mZWVkYmFjaz9ydWxlcj1cIitydWxlcitcIiZzZWFyY2g9XCIrc2VhcmNoK2ZvcmJpZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8v5Zue6L2m5pCc57SiXHJcbiAgICAkKGRvY3VtZW50KS5rZXlwcmVzcyhmdW5jdGlvbihlKVxyXG4gICAge1xyXG4gICAgICAgIGlmKGUud2hpY2ggPT0gMTMpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICAkKCcjc2VhcmNoQnV0dG9uJykudHJpZ2dlcihcImNsaWNrXCIpOy8v5qih5ouf54K55Ye7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgaW5pdE1zZ01vZGVsKCk7XHJcbiAgICAkKCcubXNnX2dseXBoaWNvbicpLm9uKCdtb3VzZW92ZXInLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcubXNnX3Nob3dib3gnKS5zaG93KCk7XHJcbiAgICB9KS5vbignbW91c2VsZWF2ZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy5tc2dfc2hvd2JveCcpLmhpZGUoKTtcclxuICAgIH0pO1xyXG4gICAgJCgnI21zZ19nbHlwaGljb24nKS5vbignbW91c2VvdmVyJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5tc2dfc2hvd2JveCcpLnNob3coKTtcclxuICAgIH0pLm9uKCdtb3VzZWxlYXZlJywgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICQoJy5tc2dfc2hvd2JveCcpLmhpZGUoKTtcclxuICAgIH0pLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcubXNnX3Nob3dib3gnKS50b2dnbGUoKTtcclxuICAgIH0pO1xyXG5cclxufSk7XHJcbi8v6LCD5Yiw6K+m5oOF6aG1XHJcbmZ1bmN0aW9uIGp1bXBEZXRhaWwoaW5mbylcclxue1xyXG4gICAgdmFyIGluZm89aW5mbztcclxuICAgIHZhciBhcHBJZD1pbmZvLnNwbGl0KFwifFwiKVswXTtcclxuICAgIHZhciB1c2VySWQ9aW5mby5zcGxpdChcInxcIilbMV07XHJcbiAgICByZXNldFVybCgnL2N1c3RvbWVyZGV0YWlsP2FwcElkPScrYXBwSWQrJyZ1c2VySWQ9Jyt1c2VySWQpO1xyXG59XHJcblxyXG4vL3VzZXIrZm9yYmlkXHJcbmZ1bmN0aW9uIGZvcmJpZChpbmZvKVxyXG57XHJcbiAgICB2YXIgaW5mbz1pbmZvO1xyXG4gICAgdmFyIHVzZXJJZD1pbmZvLnNwbGl0KFwifFwiKVswXTtcclxuICAgIHZhciBzdGF0PWluZm8uc3BsaXQoXCJ8XCIpWzFdO1xyXG5cclxuICAgIHNob3dMb2FkaW5nKCk7XHJcbiAgICAkLnBvc3QoXCIvZm9yYmlkXCIse1widXNlcklkXCI6dXNlcklkLFwic3RhdFwiOnN0YXR9LGZ1bmN0aW9uKGRhdGEpXHJcbiAgICB7XHJcbiAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICBpZihkYXRhLmNvZGU9PTApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5pON5L2c5oiQ5YqfIVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB3aW5kb3cud3hjLnhjQ29uZmlybShcIuezu+e7n+e5geW/me+8jOivt+eojeWQjuWGjeivlSFcIixcImVycm9yXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxufVxyXG5cclxuLy/lj5Hmtojmga8s5YWI6LWw6L+Z5LiqanPlho3otbDlvLnmoYZcclxuZnVuY3Rpb24ganVtcE1zZyhpbmZvKVxyXG57XHJcbiAgICB2YXIgaW5mbz1pbmZvO1xyXG4gICAgdmFyIGFwcElkPWluZm8uc3BsaXQoXCJ8XCIpWzBdO1xyXG4gICAgdmFyIHVzZXJJZD1pbmZvLnNwbGl0KFwifFwiKVsxXTtcclxuICAgIHZhciBmZElkPWluZm8uc3BsaXQoXCJ8XCIpWzJdO1xyXG4gICAgJChcIiNTbXNNb2RhbFwiKS5tb2RhbCgnc2hvdycpO1xyXG4gICAgLy/noa7orqTmjInpkq7ngrnlh7tcclxuICAgICQoXCIubW9kYWwtZm9vdGVyXCIpLmNoaWxkcmVuKFwiYnV0dG9uXCIpLmVxKDApLnVuYmluZChcImNsaWNrXCIpLmJpbmQoXCJjbGlja1wiICwgZnVuY3Rpb24gKClcclxuICAgIHtcclxuICAgICAgICB2YXIgbmlja25hbWU9JChcIiNzbXNfbmlja25hbWVcIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQ9JChcIiNzbXNfY29udGVudFwiKS52YWwoKTtcclxuICAgICAgICBpZihuaWNrbmFtZS5sZW5ndGggPT0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdpbmRvdy53eGMueGNDb25maXJtKCfkurLvvIzov5jmnKrovpPlhaXlj5HpgIHkurrmmLXnp7Dlk6Z+JywnZXJyb3InKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb250ZW50Lmxlbmd0aCA9PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2luZG93Lnd4Yy54Y0NvbmZpcm0oJ+S6su+8jOi/mOacqui+k+WFpea2iOaBr+WGheWuueWTpn4nLCdlcnJvcicpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgICQoXCIjU21zTW9kYWxcIikubW9kYWwoJ2hpZGUnKTtcclxuICAgICAgICBzaG93TG9hZGluZygpO1xyXG4gICAgICAgICQucG9zdChcIi9jdXN0b21lcm1zZ1wiLHtcImFwcElkXCI6YXBwSWQsXCJ1c2VySWRcIjp1c2VySWQsXCJmZWVkYmFja0lkXCI6ZmRJZCxcIm5pY2tuYW1lXCI6bmlja25hbWUsXCJjb250ZW50XCI6Y29udGVudH0sZnVuY3Rpb24oZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIGlmKGRhdGEucmV0PT0wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL3dpbmRvdy53eGMueGNDb25maXJtKFwi5Y+R6YCB5oiQ5YqfXCIsXCJzdWNjZXNzXCIse29uT2s6ZnVuY3Rpb24gKClcclxuICAgICAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAgICAgLy8gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgLy99fSk7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5Y+R6YCB5oiQ5YqfIVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cud3hjLnhjQ29uZmlybShcIuezu+e7n+e5geW/me+8jOivt+eojeWQjuWGjeivlSFcIixcImVycm9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdE1zZ01vZGVsKCkge1xyXG5cclxuICAgICQoJy5tb2RlbF90eXBlJykub24oXCJjbGlja1wiLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcubW9kZWxfdHlwZScpLnJlbW92ZUNsYXNzKCdib3JkZXJfYmx1ZScpO1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2JvcmRlcl9ibHVlJyk7XHJcbiAgICAgICAgJCgnI3Ntc19uaWNrbmFtZScpLnZhbCgkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKTtcclxuICAgICAgICAkKCcjc21zX2NvbnRlbnQnKS52YWwoJCh0aGlzKS5hdHRyKCdkYXRhLWNvbnRlbnQnKSk7XHJcbiAgICAgICAgaWYoJCgnI2NhbmNlbF9tb2RlbCcpLmhhc0NsYXNzKCdib3JkZXJfYmx1ZScpKXtcclxuICAgICAgICAgICAgJCgnLmVkaXRfbW9kZWwnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCcubW9kZWxfdHlwZScpLnJlbW92ZUNsYXNzKCdib3JkZXJfYmx1ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtb2RlbF9pZCA9ICQodGhpcykuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHNtc19uYW1lID0gJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKTtcclxuICAgICAgICBzbXNfY29udGVudCA9ICQodGhpcykuYXR0cignZGF0YS1jb250ZW50Jyk7XHJcbiAgICB9KVxyXG5cclxuICAgICQoJyNzbXNfY29udGVudCcpLmtleXVwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZigkKCcuYm9yZGVyX2JsdWUnKS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAkKCcuZWRpdF9tb2RlbCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI3Ntc19uaWNrbmFtZScpLmtleXVwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZigkKCcuYm9yZGVyX2JsdWUnKS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAkKCcuZWRpdF9tb2RlbCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmVkaXRfbW9kZWwnKS5vbihcImNsaWNrXCIsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5pWw5o2u5bqT5LiN5a2Y5Zyo55u45YWz5qih5p2/XHJcbiAgICAgICAgbW9kZWxfaWQgPSAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgdmFyIG5hbWUgPSAkKCcjc21zX25pY2tuYW1lJykudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQ9ICQoJyNzbXNfY29udGVudCcpLnZhbCgpO1xyXG4gICAgICAgIGlmKG1vZGVsX2lkPT1cIlwiKXtcclxuICAgICAgICAgICAgLy/lkJHlkI7lj7Dmj5LlhaXmqKHmnb9cclxuICAgICAgICAgICAgbW9kZWxfaWQgPSAwO1xyXG4gICAgICAgICAgICBpZihuYW1lIT1cIlwiICYmIGNvbnRlbnQhPVwiXCIpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmlrDlop7mqKHmnb/vvJpcIittb2RlbF9pZCtcIj4+XCIrbmFtZStcIj4+XCIrY29udGVudCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmgqjnmoTlj5HpgIHkurrmmLXnp7Av5YaF5a655Li656m6Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy/mm7TmlrDljp/mnInmqKHmnb9cclxuICAgICAgICAgICAgaWYobmFtZSE9XCJcIiAmJiBjb250ZW50IT1cIlwiKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pu05paw5qih5p2/77yaXCIrbW9kZWxfaWQrXCI+PlwiK25hbWUrXCI+PlwiK2NvbnRlbnQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5oKo55qE5Y+R6YCB5Lq65pi156ewL+WGheWuueS4uuepuicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG5hbWUgPT0gc21zX25hbWUgJiYgY29udGVudCA9PSBzbXNfY29udGVudCl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5oKo5rKh5pyJ5YGa5Lu75L2V5qih5p2/5L+u5pS5Jyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBcIi9tb2RlbGNoYW5nZVwiO1xyXG4gICAgICAgICAgICAkLnBvc3QodXJsLCB7J21vZGVsX2lkJzogbW9kZWxfaWQsJ3NlbmRfbmlja19uYW1lJzpuYW1lLCdjb250ZW50Jzpjb250ZW50fSxmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHZhciBSZUNvZGUgPSByZXN1bHQuY29kZTtcclxuICAgICAgICAgICAgICAgIHZhciBpbmZvID0gcmVzdWx0Lm1zZztcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoaW5mbyk7XHJcbiAgICAgICAgICAgICAgICBpZihSZUNvZGU9PTApeyAvL+aWsOW7uuaooeadv+aIkOWKnyDlubborr7nva7lvZPliY3mnIDmlrDmj5LlhaXnmoTmuKDpgZNpZFxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5ib3JkZXJfYmx1ZScpLmF0dHIoJ2RhdGEtaWQnLHJlc3VsdC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJvcmRlcl9ibHVlJykuYXR0cignZGF0YS1uYW1lJyxuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLWNvbnRlbnQnLGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKFJlQ29kZT09MSl7IC8v6ZSZ6K+vXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmVycm9yTXNnKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKFJlQ29kZT09Mil7IC8v5pu05paw5qih5p2/5oiQ5YqfXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJvcmRlcl9ibHVlJykuYXR0cignZGF0YS1uYW1lJyxuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLWNvbnRlbnQnLGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbiJdfQ==
