$(document).ready(function(){$currentObj.init()});$currentObj=function(){var e={monitorAudioObj:-1};var t={};e.init=function(){$(".operateList > li.operate").click(function(){var e=$(this),i=e.parents(".exerciseOperateArea"),n=e.data("type"),a=i.data("resource_id"),s=i.data("resource_type"),d=i.data("exercise_id"),c=i.data("text_content"),l=i.data("img_urls"),u=i.data("audio_urls"),f=i.data("exercise_title");t={textContent:c,imgUrlsArr:l,audioUrlsArr:u,exerciseTitle:f};switch(n){case"look_exercise_content":o();break;case"delete_exercise":r(d);break;default:console.log("参数错误");break}});$("#closeExeDetailWindow").click(function(){baseUtils.hideWindow("lookExerciseDetailWindow")});$("#audioContentArea").on("click",".audioPlayStateIcon",function(){var e=$(this),t=e.parents(".audioController").siblings(".audioDom")[0],i=e.hasClass("playing");if(i){t.pause()}else{t.play()}});$("#closeExeDetailWindow").click(function(){$("#audioContentArea").html("")})};function i(t,i){clearInterval(e.monitorAudioObj);e.monitorAudioObj=setInterval(a,500,t,i);$("#audioContentArea").find(".audioPlayStateIcon").eq(t).removeClass("paused").addClass("playing")}function n(t,i,n){if(n){i.currentTime=0;$("#audioContentArea").find(".finishedProgress").eq(t).css({width:"0%"})}clearInterval(e.monitorAudioObj);$("#audioContentArea").find(".audioPlayStateIcon").eq(t).removeClass("playing").addClass("paused")}function a(e,t){var i=t.currentTime,n=t.duration,a=100*(i/n);$("#audioContentArea").find(".finishedProgress").eq(e).css({width:a+"%"})}function o(){$("#windowHeader").text(t.exerciseTitle);$("#textContentArea").text(t.textContent);if(t.imgUrlsArr.length>0){var e="";$.each(t.imgUrlsArr,function(t,i){e+='<div class="singleExeImg">'+'<img src="'+i+'">'+"</div>"});$("#imgContentArea").html(e)}else{$("#imgContentArea").html("")}if(t.audioUrlsArr.length>0){var a="";$.each(t.audioUrlsArr,function(e,t){a+='<div class="singleExeAudio">'+'<audio class="audioDom" src="'+t+'"></audio>'+'<div class="audioController">'+'<div class="audioPlayStateIcon paused"></div>'+'<div class="progressBar">'+'<span class="finishedProgress"></span>'+"</div>"+'<div class="audioLengthSecond"><span></span>"</div>'+"</div>"+"</div>"});$("#audioContentArea").html(a)}else{$("#audioContentArea").html("")}baseUtils.showWindow("lookExerciseDetailWindow");$.each(document.getElementsByTagName("audio"),function(e,t){t.addEventListener("playing",function(){i(e,t)});t.addEventListener("play",function(){i(e,t)});t.addEventListener("pause",function(){n(e,t)});t.addEventListener("ended",function(){n(e,t,true)});t.addEventListener("canplay",function(){$("#audioContentArea").find(".audioLengthSecond>span").eq(e).text(parseInt(t.duration))})})}function r(e){$.alert("是否确认删除",{btn:3,onOk:function(){s(e)}})}function s(e){$.ajax("/exercise/change_exercise_state",{type:"POST",dataType:"json",data:{state:2,exercise_id:e,exercise_book_id:GetQueryString("exercise_book_id")},success:function(e){if(e.code==0){baseUtils.show.blueTip("删除成功");window.location.reload()}else{alert("网络问题，请稍后再试")}},error:function(e,t,i){console.log(i);alert("服务器出小差了，请稍后再试！")}})}return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4ZXJjaXNlTGlzdC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIiRjdXJyZW50T2JqIiwiaW5pdCIsIm1vbml0b3JBdWRpb09iaiIsIiRwcml2YXRlIiwiY2xpY2siLCIkc2VsZiIsInRoaXMiLCIkcGFyZW50IiwicGFyZW50cyIsInR5cGUiLCJkYXRhIiwicmVzSWQiLCJyZXNUeXBlIiwiZXhlcmNpc2VJZCIsInRleHRDb250ZW50IiwiaW1nVXJsc0FyciIsImF1ZGlvVXJsc0FyciIsImV4ZXJjaXNlVGl0bGUiLCJsb29rRXhlcmNpc2VDb250ZW50Iiwic2hvd0NvbmZpcm1XaW5kb3ciLCJjb25zb2xlIiwibG9nIiwiYmFzZVV0aWxzIiwiaGlkZVdpbmRvdyIsIm9uIiwiJHRhcmdldCIsInNpYmxpbmdzIiwiaXNBdWRpb1BsYXlpbmciLCJoYXNDbGFzcyIsInBhdXNlIiwicGxheSIsImh0bWwiLCJwbGF5QXVkaW9FdmVudCIsImsiLCJ2IiwiY2xlYXJJbnRlcnZhbCIsInNldEludGVydmFsIiwibW9uaXRvckF1ZGlvIiwiZmluZCIsImVxIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsInBhdXNlQXVkaW9FdmVudCIsImlzRW5kZWQiLCJjdXJyZW50VGltZSIsImNzcyIsIndpZHRoIiwiY3VycmVudCIsImR1cmF0aW9uIiwicHJvZ3Jlc3NXaWR0aCIsInRleHQiLCJsZW5ndGgiLCJpbWdDb250ZW50SHRtbCIsImVhY2giLCJhdWRpb0NvbnRlbnRIdG1sIiwic2hvd1dpbmRvdyIsImdldEVsZW1lbnRzQnlUYWdOYW1lIiwiYWRkRXZlbnRMaXN0ZW5lciIsInBhcnNlSW50IiwiYWxlcnQiLCJidG4iLCJvbk9rIiwiZGVsZXRlRXhlcmNpc2UiLCJhamF4IiwiZGF0YVR5cGUiLCJzdGF0ZSIsImV4ZXJjaXNlX2lkIiwiZXhlcmNpc2VfYm9va19pZCIsIkdldFF1ZXJ5U3RyaW5nIiwic3VjY2VzcyIsInJlc3VsdCIsImNvZGUiLCJzaG93IiwiYmx1ZVRpcCIsIndpbmRvdyIsImxvY2F0aW9uIiwicmVsb2FkIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiXSwibWFwcGluZ3MiOiJBQUtBQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2RDLFlBQVlDLFFBR2hCRCxhQUFjLFdBQ1YsR0FBSUEsSUFDQUUsaUJBQWtCLEVBRXRCLElBQUlDLEtBR0pILEdBQVlDLEtBQU8sV0FHZkosRUFBRSw2QkFBNkJPLE1BQU0sV0FDakMsR0FBSUMsR0FBUVIsRUFBRVMsTUFDVkMsRUFBVUYsRUFBTUcsUUFBUSx3QkFDeEJDLEVBQU9KLEVBQU1LLEtBQUssUUFDbEJDLEVBQVFKLEVBQVFHLEtBQUssZUFDckJFLEVBQVVMLEVBQVFHLEtBQUssaUJBQ3ZCRyxFQUFhTixFQUFRRyxLQUFLLGVBQzFCSSxFQUFjUCxFQUFRRyxLQUFLLGdCQUMzQkssRUFBYVIsRUFBUUcsS0FBSyxZQUMxQk0sRUFBZVQsRUFBUUcsS0FBSyxjQUM1Qk8sRUFBZ0JWLEVBQVFHLEtBQUssaUJBRWpDUCxJQUNJVyxZQUFhQSxFQUNiQyxXQUFZQSxFQUNaQyxhQUFjQSxFQUNkQyxjQUFlQSxFQUduQixRQUFRUixHQUNKLElBQUssd0JBQ0RTLEdBQ0EsTUFDSixLQUFLLGtCQUNEQyxFQUFrQk4sRUFDbEIsTUFDSixTQUNJTyxRQUFRQyxJQUFJLE9BQ1osU0FLWnhCLEdBQUUseUJBQXlCTyxNQUFNLFdBQzdCa0IsVUFBVUMsV0FBVyw2QkFJekIxQixHQUFFLHFCQUFxQjJCLEdBQUcsUUFBUyxzQkFBdUIsV0FDdEQsR0FBSW5CLEdBQVFSLEVBQUVTLE1BQ1ZtQixFQUFVcEIsRUFBTUcsUUFBUSxvQkFBb0JrQixTQUFTLGFBQWEsR0FDbEVDLEVBQWlCdEIsRUFBTXVCLFNBQVMsVUFFcEMsSUFBSUQsRUFBZ0IsQ0FDaEJGLEVBQVFJLFlBQ0wsQ0FDSEosRUFBUUssU0FJaEJqQyxHQUFFLHlCQUF5Qk8sTUFBTSxXQUM3QlAsRUFBRSxxQkFBcUJrQyxLQUFLLE1BSXBDLFNBQVNDLEdBQWVDLEVBQUdD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dGVkIGJ5IEFkbWluaXN0cmF0b3Igb24gMjAxNy84LzIuXHJcbiAqL1xyXG5cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICRjdXJyZW50T2JqLmluaXQoKTtcclxufSk7XHJcblxyXG4kY3VycmVudE9iaiA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJGN1cnJlbnRPYmogPSB7XHJcbiAgICAgICAgbW9uaXRvckF1ZGlvT2JqOiAtMSxcclxuICAgIH07XHJcbiAgICB2YXIgJHByaXZhdGUgPSB7XHJcblxyXG4gICAgfTtcclxuICAgICRjdXJyZW50T2JqLmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIC8v5L2c5Lia55qE5pON5L2cXHJcbiAgICAgICAgJChcIi5vcGVyYXRlTGlzdCA+IGxpLm9wZXJhdGVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHNlbGYgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgJHBhcmVudCA9ICRzZWxmLnBhcmVudHMoXCIuZXhlcmNpc2VPcGVyYXRlQXJlYVwiKSxcclxuICAgICAgICAgICAgICAgIHR5cGUgPSAkc2VsZi5kYXRhKFwidHlwZVwiKSxcclxuICAgICAgICAgICAgICAgIHJlc0lkID0gJHBhcmVudC5kYXRhKFwicmVzb3VyY2VfaWRcIiksXHJcbiAgICAgICAgICAgICAgICByZXNUeXBlID0gJHBhcmVudC5kYXRhKFwicmVzb3VyY2VfdHlwZVwiKSxcclxuICAgICAgICAgICAgICAgIGV4ZXJjaXNlSWQgPSAkcGFyZW50LmRhdGEoXCJleGVyY2lzZV9pZFwiKSxcclxuICAgICAgICAgICAgICAgIHRleHRDb250ZW50ID0gJHBhcmVudC5kYXRhKFwidGV4dF9jb250ZW50XCIpLFxyXG4gICAgICAgICAgICAgICAgaW1nVXJsc0FyciA9ICRwYXJlbnQuZGF0YShcImltZ191cmxzXCIpLFxyXG4gICAgICAgICAgICAgICAgYXVkaW9VcmxzQXJyID0gJHBhcmVudC5kYXRhKFwiYXVkaW9fdXJsc1wiKSxcclxuICAgICAgICAgICAgICAgIGV4ZXJjaXNlVGl0bGUgPSAkcGFyZW50LmRhdGEoXCJleGVyY2lzZV90aXRsZVwiKTtcclxuXHJcbiAgICAgICAgICAgICRwcml2YXRlID0ge1xyXG4gICAgICAgICAgICAgICAgdGV4dENvbnRlbnQ6IHRleHRDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgaW1nVXJsc0FycjogaW1nVXJsc0FycixcclxuICAgICAgICAgICAgICAgIGF1ZGlvVXJsc0FycjogYXVkaW9VcmxzQXJyLFxyXG4gICAgICAgICAgICAgICAgZXhlcmNpc2VUaXRsZTogZXhlcmNpc2VUaXRsZVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoICh0eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwibG9va19leGVyY2lzZV9jb250ZW50XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgbG9va0V4ZXJjaXNlQ29udGVudCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImRlbGV0ZV9leGVyY2lzZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIHNob3dDb25maXJtV2luZG93KGV4ZXJjaXNlSWQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWPguaVsOmUmeivr1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKiog5aSE55CG6K+m5oOF56qX5Y+jICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICAgICAgJChcIiNjbG9zZUV4ZURldGFpbFdpbmRvd1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwibG9va0V4ZXJjaXNlRGV0YWlsV2luZG93XCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyAg5pKt5pS+L+aaguWBnCDpn7PpopFcclxuICAgICAgICAkKFwiI2F1ZGlvQ29udGVudEFyZWFcIikub24oXCJjbGlja1wiLCBcIi5hdWRpb1BsYXlTdGF0ZUljb25cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHNlbGYgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgJHRhcmdldCA9ICRzZWxmLnBhcmVudHMoXCIuYXVkaW9Db250cm9sbGVyXCIpLnNpYmxpbmdzKFwiLmF1ZGlvRG9tXCIpWzBdLFxyXG4gICAgICAgICAgICAgICAgaXNBdWRpb1BsYXlpbmcgPSAkc2VsZi5oYXNDbGFzcyhcInBsYXlpbmdcIik7XHJcblxyXG4gICAgICAgICAgICBpZiAoaXNBdWRpb1BsYXlpbmcpIHtcclxuICAgICAgICAgICAgICAgICR0YXJnZXQucGF1c2UoKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICR0YXJnZXQucGxheSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoXCIjY2xvc2VFeGVEZXRhaWxXaW5kb3dcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKFwiI2F1ZGlvQ29udGVudEFyZWFcIikuaHRtbChcIlwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gcGxheUF1ZGlvRXZlbnQoaywgdikge1xyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoJGN1cnJlbnRPYmoubW9uaXRvckF1ZGlvT2JqKTtcclxuICAgICAgICAkY3VycmVudE9iai5tb25pdG9yQXVkaW9PYmogPSBzZXRJbnRlcnZhbChtb25pdG9yQXVkaW8sIDUwMCwgaywgdik7XHJcbiAgICAgICAgJChcIiNhdWRpb0NvbnRlbnRBcmVhXCIpLmZpbmQoXCIuYXVkaW9QbGF5U3RhdGVJY29uXCIpXHJcbiAgICAgICAgICAgIC5lcShrKS5yZW1vdmVDbGFzcyhcInBhdXNlZFwiKS5hZGRDbGFzcyhcInBsYXlpbmdcIik7XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gcGF1c2VBdWRpb0V2ZW50KGssIHYsIGlzRW5kZWQpIHtcclxuICAgICAgICBpZiAoaXNFbmRlZCkge1xyXG4gICAgICAgICAgICB2LmN1cnJlbnRUaW1lID0gMDtcclxuICAgICAgICAgICAgJChcIiNhdWRpb0NvbnRlbnRBcmVhXCIpLmZpbmQoXCIuZmluaXNoZWRQcm9ncmVzc1wiKS5lcShrKS5jc3Moe1wid2lkdGhcIjogXCIwJVwifSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNsZWFySW50ZXJ2YWwoJGN1cnJlbnRPYmoubW9uaXRvckF1ZGlvT2JqKTtcclxuICAgICAgICAkKFwiI2F1ZGlvQ29udGVudEFyZWFcIikuZmluZChcIi5hdWRpb1BsYXlTdGF0ZUljb25cIilcclxuICAgICAgICAgICAgLmVxKGspLnJlbW92ZUNsYXNzKFwicGxheWluZ1wiKS5hZGRDbGFzcyhcInBhdXNlZFwiKTtcclxuICAgIH07XHJcbiAgICBmdW5jdGlvbiBtb25pdG9yQXVkaW8oaywgdikge1xyXG4gICAgICAgIHZhciBjdXJyZW50ID0gdi5jdXJyZW50VGltZSxcclxuICAgICAgICAgICAgZHVyYXRpb24gPSB2LmR1cmF0aW9uLFxyXG4gICAgICAgICAgICBwcm9ncmVzc1dpZHRoID0gMTAwICogKGN1cnJlbnQgLyBkdXJhdGlvbik7XHJcblxyXG4gICAgICAgICQoXCIjYXVkaW9Db250ZW50QXJlYVwiKS5maW5kKFwiLmZpbmlzaGVkUHJvZ3Jlc3NcIikuZXEoaykuY3NzKHtcIndpZHRoXCI6IHByb2dyZXNzV2lkdGgrXCIlXCJ9KTtcclxuICAgICAgICAvLyAkKFwiI2F1ZGlvQ29udGVudEFyZWFcIikuZmluZChcIi5wcm9ncmVzc0JhckRvdFwiKS5lcShrKS5jc3Moe1wibGVmdFwiOiBwcm9ncmVzc1dpZHRoK1wiJVwifSk7XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gbG9va0V4ZXJjaXNlQ29udGVudCgpIHtcclxuXHJcbiAgICAgICAgLy/loavlhYXmlbDmja5cclxuICAgICAgICAkKFwiI3dpbmRvd0hlYWRlclwiKS50ZXh0KCRwcml2YXRlLmV4ZXJjaXNlVGl0bGUpO1xyXG5cclxuICAgICAgICAkKFwiI3RleHRDb250ZW50QXJlYVwiKS50ZXh0KCRwcml2YXRlLnRleHRDb250ZW50KTtcclxuXHJcbiAgICAgICAgaWYgKCRwcml2YXRlLmltZ1VybHNBcnIubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB2YXIgaW1nQ29udGVudEh0bWwgPSBcIlwiO1xyXG4gICAgICAgICAgICAkLmVhY2goJHByaXZhdGUuaW1nVXJsc0FyciwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgICAgIGltZ0NvbnRlbnRIdG1sICs9XHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzaW5nbGVFeGVJbWdcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGltZyBzcmM9XCInK3YrJ1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKFwiI2ltZ0NvbnRlbnRBcmVhXCIpLmh0bWwoaW1nQ29udGVudEh0bWwpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoXCIjaW1nQ29udGVudEFyZWFcIikuaHRtbChcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRwcml2YXRlLmF1ZGlvVXJsc0Fyci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBhdWRpb0NvbnRlbnRIdG1sID0gXCJcIjtcclxuICAgICAgICAgICAgJC5lYWNoKCRwcml2YXRlLmF1ZGlvVXJsc0FyciwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgICAgIGF1ZGlvQ29udGVudEh0bWwgKz1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzaW5nbGVFeGVBdWRpb1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGF1ZGlvIGNsYXNzPVwiYXVkaW9Eb21cIiBzcmM9XCInK3YrJ1wiPjwvYXVkaW8+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiYXVkaW9Db250cm9sbGVyXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cImF1ZGlvUGxheVN0YXRlSWNvbiBwYXVzZWRcIj48L2Rpdj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicHJvZ3Jlc3NCYXJcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJmaW5pc2hlZFByb2dyZXNzXCI+PC9zcGFuPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJhdWRpb0xlbmd0aFNlY29uZFwiPjxzcGFuPjwvc3Bhbj5cIjwvZGl2PicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKFwiI2F1ZGlvQ29udGVudEFyZWFcIikuaHRtbChhdWRpb0NvbnRlbnRIdG1sKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKFwiI2F1ZGlvQ29udGVudEFyZWFcIikuaHRtbChcIlwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJhc2VVdGlscy5zaG93V2luZG93KFwibG9va0V4ZXJjaXNlRGV0YWlsV2luZG93XCIpO1xyXG5cclxuICAgICAgICAkLmVhY2goZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoXCJhdWRpb1wiKSwgZnVuY3Rpb24gKGssIHYpIHtcclxuICAgICAgICAgICAgLy/lvIDlp4vmkq3mlL5cclxuICAgICAgICAgICAgdi5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwbGF5QXVkaW9FdmVudChrLCB2KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHYuYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgcGxheUF1ZGlvRXZlbnQoaywgdik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2LmFkZEV2ZW50TGlzdGVuZXIoXCJwYXVzZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwYXVzZUF1ZGlvRXZlbnQoaywgdik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2LmFkZEV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBwYXVzZUF1ZGlvRXZlbnQoaywgdiwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvL+WIneWni+WMlmF1ZGlv5pe26ZW/XHJcbiAgICAgICAgICAgIHYuYWRkRXZlbnRMaXN0ZW5lcihcImNhbnBsYXlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJChcIiNhdWRpb0NvbnRlbnRBcmVhXCIpLmZpbmQoXCIuYXVkaW9MZW5ndGhTZWNvbmQ+c3BhblwiKVxyXG4gICAgICAgICAgICAgICAgICAgIC5lcShrKS50ZXh0KHBhcnNlSW50KHYuZHVyYXRpb24pKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBmdW5jdGlvbiBzaG93Q29uZmlybVdpbmRvdyhleGVyY2lzZUlkKSB7XHJcbiAgICAgICAgJC5hbGVydChcIuaYr+WQpuehruiupOWIoOmZpFwiLCB7XHJcbiAgICAgICAgICAgIGJ0bjogMyxcclxuICAgICAgICAgICAgb25PazogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlRXhlcmNpc2UoZXhlcmNpc2VJZCk7XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBkZWxldGVFeGVyY2lzZShleGVyY2lzZUlkKSB7XHJcbiAgICAgICAgJC5hamF4KFwiL2V4ZXJjaXNlL2NoYW5nZV9leGVyY2lzZV9zdGF0ZVwiLCB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHN0YXRlOiAyLFxyXG4gICAgICAgICAgICAgICAgZXhlcmNpc2VfaWQ6IGV4ZXJjaXNlSWQsXHJcbiAgICAgICAgICAgICAgICBleGVyY2lzZV9ib29rX2lkOiBHZXRRdWVyeVN0cmluZyhcImV4ZXJjaXNlX2Jvb2tfaWRcIiksXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuWIoOmZpOaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGFsZXJ0KFwi572R57uc6Zeu6aKY77yM6K+356iN5ZCO5YaN6K+VXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gJGN1cnJlbnRPYmo7XHJcbn0pKCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
