$(function(){createActivity.init()});var createActivity=function(){var e={};var t=false;var i="";e.type=parseInt($("#type").val());e.isSelectPackage=false;e.init=function(){aliveTimeConfig(".activityDate");$("input[name='chooseActivityTime']").change(function(){if(parseInt($(this).val())){$(".enrollDate").show()}else{$(".enrollDate").hide()}});$(".addTableArea").click(function(){var e=$(".addTableArea").index($(this));$("#otherTableWrapper").append($(".activityTableCopy").eq(e).html());if($("#otherTableWrapper").children().length){$(".otherInfoTips").hide()}else{$(".otherInfoTips").show()}});$("#otherTableWrapper").on("click",".deleteTable",function(){var e=$("#otherTableWrapper .deleteTable");if(e.length>0){var t=e.index($(this));$("#otherTableWrapper .baseInfoWrapper").eq(t).remove()}if($("#otherTableWrapper").children().length){$(".otherInfoTips").hide()}else{$(".otherInfoTips").show()}});$(".uploadActivityPic").on("change",function(e){console.log("change");if(this.files&&this.files.length>0){var t=this.files[0];var a=2;if($uploadFile.checkFileSize(t,a)){$uploadFile.uploadPic(t,function(e){baseUtils.show.blueTip("上传成功！");i=e.data.access_url;if(i){s(i)}},function(e){console.log(e);baseUtils.show.redTip("上传失败！")})}else{baseUtils.show.redTip("上传图片限制在"+a+"MB内！")}}else{console.log(this.files)}});$("#package_list").on("change",function(){if($(this).children(":selected").val()){$(".activityStartTime").show();$("#start_at").val("");e.isSelectPackage=true;$("#payTicketTableWrapper").addClass("hide");$("#payTicketTip").removeClass("hide")}else{$(".activityStartTime").hide();$("#start_at").val("");e.isSelectPackage=false;$("#payTicketTip").addClass("hide");$("#payTicketTableWrapper").removeClass("hide")}});$("#deletePic").on("click",function(){c();$(".uploadActivityPic").each(function(){$(this).val("")})});modal.initTicketInfo();$("#saveActivity").on("click",function(){if(t){baseUtils.show.redTip("不能重复提交")}else{var s=$.trim($("#title").val()),c=$.trim($("#place").val()),l=$.trim($("#activity_start_at").val()),n=$.trim($("#activity_end_at").val()),o=parseInt($("input[name='chooseActivityTime']:checked").val()),d,p;if(o){d=$.trim($("#enroll_start_at").val());p=$.trim($("#enroll_end_at").val())}else{d="";p=""}var f=$("#img_url").attr("src")||i,T=parseInt($("#actor_num").val())||0,k=UE.getEditor("activityDesc"),h=k.getContent(),y=[{field_name:"姓名",type:2,required:1,placeholder:""},{field_name:"手机号码",type:1,required:1,placeholder:"",need_confirm:0}];$("#otherTableWrapper .baseInfoWrapper").each(function(){var e={},t=$(this).find(".infoTableRequied:checked"),i=$(this).find(".infoTableTitle").eq(0),a=$(this).find(".infoTablePlaceholder").eq(0);e.field_name=i.val();e.type=parseInt(i.data("type"));e.required=t.length>0?1:0;e.placeholder=a.val();if($.trim(e.field_name)){y.push(e)}});var u=$.trim($("#start_at").val()),m=$("#is_confirm:checked").length>0?1:0,v=$("#package_list option:selected"),_=v.val(),b=_?v.html():"";var g={title:s,place:c,activity_start_at:l,activity_end_at:n,is_default_enroll_time:o,enroll_start_at:d,enroll_end_at:p,img_url:f,actor_num:T,descrb:h,form_field:JSON.stringify(y),start_at:u,is_confirm:m};if(r(g)){if(_){if($formCheck.emptyString(g.start_at)){baseUtils.show.redTip("上架时间不能为空！");return false}if(!$formCheck.checkTime(g.start_at)){baseUtils.show.redTip("上架时间格式错误！");return false}if(!$formCheck.checkTimeOrder(g.start_at,g.activity_end_at)){baseUtils.show.redTip("上架时间要小于活动结束时间！");return false}}var w=$(".payTicketTableBody").length;if(!$("#freeTicketTableBody").hasClass("hide")){w++}if(w==0){baseUtils.show.redTip("票种不能为空，请添加票种");return false}if(modal.freeTicketEditState){baseUtils.show.redTip("免费票处于编辑状态");return false}var C=new Array;if(!$("#freeTicketTableBody").hasClass("hide")){var U=$("#freeTicketTableBody").data("ticket_id"),P=$("#freeTicketName").val(),I=$("#freeTicketCount").val(),S=$("#ticketExplanationArea").val(),A=$("#isFreeTicketCheck").data("check_state");var x={id:U,ticket_name:P,ticket_price:0,ticket_count:I,extra:S,is_need_check:A};C[0]=x}if(!e.isSelectPackage){if(modal.payTicketEditState){baseUtils.show.redTip("收费票处于编辑状态");return false}var E=$(".payTicketTableBody").length;if(E>0){$(".payTicketTableBody").each(function(){var e=$(this).attr("id"),t=$(this).find(".payTicketName").val(),i=$(this).find(".payTicketCount").val(),a=$(this).find(".payTicketPrice").val()*100,r=$(this).find(".payTicketExplanationArea").val();var s={id:e,ticket_name:t,ticket_price:a,ticket_count:i,extra:r};C[C.length]=s})}}var B={params:g,package_id:_,package_name:b,ticketParams:C};t=true;if(e.type===0){a("/uploadActivity",B)}else if(e.type==1){B.params.id=$("#activityId").val();a("/saveActivity",B)}}else{return false}}});$(document).ajaxError(function(e,i,a){console.info(i.status,i.statusText);console.error(a);baseUtils.show.redTip("网络错误，操作失败!");t=false})};function a(e,i){console.log(i);showLoading();$.post(e,i,function(e){if(parseInt(e.code)===0){hideLoading();baseUtils.show.blueTip("保存成功");setTimeout(function(){window.location.href="/activityManage"},700)}else{hideLoading();baseUtils.show.redTip(e.msg);t=false}})}function r(e){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("活动名称不能为空！");return false}if($formCheck.emptyString(e.place)){baseUtils.show.redTip("活动地点不能为空！");return false}if($formCheck.emptyString(e.activity_start_at)){baseUtils.show.redTip("活动开始时间不能为空！");return false}if(!$formCheck.checkTime(e.activity_start_at)){baseUtils.show.redTip("活动开始时间格式错误！");return false}if($formCheck.emptyString(e.activity_end_at)){baseUtils.show.redTip("活动结束时间不能为空！");return false}if(!$formCheck.checkTime(e.activity_end_at)){baseUtils.show.redTip("活动结束时间格式错误！");return false}if(!$formCheck.checkTimeOrder(e.activity_start_at,e.activity_end_at)){baseUtils.show.redTip("活动结束时间要大于活动开始时间！");return false}console.log(e.is_default_enroll_time);if(e.is_default_enroll_time===1){if($formCheck.emptyString(e.enroll_start_at)){baseUtils.show.redTip("报名开始时间不能为空！");return false}if(!$formCheck.checkTime(e.enroll_start_at)){baseUtils.show.redTip("报名开始时间格式错误！");return false}if($formCheck.emptyString(e.enroll_end_at)){baseUtils.show.redTip("报名结束时间不能为空！");return false}if(!$formCheck.checkTime(e.enroll_end_at)){baseUtils.show.redTip("报名结束格式错误！");return false}if(!$formCheck.checkTimeOrder(e.enroll_start_at,e.enroll_end_at)){baseUtils.show.redTip("报名结束时间要大于报名开始时间！");return false}}if(isNaN(e.actor_num)||e.actor_num<0){baseUtils.show.redTip("请填写正确的活动人数！");return false}return true}function s(e){if(e){$("#img_url").attr("src",e).show();$(".noPicPreview").hide()}}function c(){$("#img_url").attr("src","").hide();$(".noPicPreview").show();i=""}return e}();var modal=function(){var e={};e.freeTicketEditState=false;e.payTicketEditState=false;e.editedPayTicketName="";e.editPayTicketDom="";e.initTicketInfo=function(){$("#newFree").click(function(){$("#freeTicketTableBody").removeClass("hide");$("#freeTicketDesc").removeClass("hide");$("#newFree").addClass("hide");t(0)});$("#deleteFreeTicket").click(function(){$("#newFree").removeClass("hide");$("#freeTicketTableBody").addClass("hide");$("#freeTicketTableBody").data("ticket_id","");$("input.freeTicketItem").val("");$("#ticketExplanationArea").val("");$("input#isFreeTicketCheck").removeAttr("checked");e.freeTicketEditState=false});$("#editFreeTicket").click(function(){if(e.freeTicketEditState){var i=$("#freeTicketName").val();if($formCheck.emptyString(i)){baseUtils.show.redTip("票种名称不能为空，请重新输入");return false}var a=$("#freeTicketCount").val();if($formCheck.emptyString(a)){baseUtils.show.redTip("请输入正确的免费票数量");return false}if(!$formCheck.isNumPositiveAndInteger(a)){baseUtils.show.redTip("请输入正确的免费票数量");return false}var r=$("#ticketExplanationArea").val();if(r.length>198){baseUtils.show.redTip("票种说明字数不能超过198个字符");return false}t(1)}else{if(e.payTicketEditState){baseUtils.show.redTip("收费票处于编辑状态，请先保存收费票");return false}t(0)}});$("input#isFreeTicketCheck").click(function(){var e=$("input#isFreeTicketCheck").data("check_state");if(e=="1"){$("input#isFreeTicketCheck").data("check_state","0");return}else{$("input#isFreeTicketCheck").data("check_state","1");return}});$("#newPayTicket").click(function(){if(e.payTicketEditState){baseUtils.show.redTip("["+e.editedPayTicketName+"]处于编辑状态，请先保存");return false}e.payTicketEditState=true;e.editedPayTicketName="新建收费票";var t=$("#payTicketBodyWrapper").children(".payTicketTableBody");$("#payTicketBodyWrapper").append(a(t.length));e.editPayTicketDom=t.eq(t.length).find(".editPayTicket")});$("#payTicketBodyWrapper").on("click",".editPayTicket",function(t){var a=$(t.target),r=a.attr("id");if(a.attr("edit_state")==1){if(e.freeTicketEditState){baseUtils.show.redTip("免费票处于编辑状态，请先保存免费票");return false}if(e.payTicketEditState){$.alert("["+e.editedPayTicketName+"]处于编辑状态,是否进行保存?","info",{btn:3,onOk:function(){e.editPayTicketDom.click()}});return false}e.payTicketEditState=true;var s=a.parents("#payTicketOperate").prevAll(".payTicketName").val();e.editedPayTicketName=s;e.editPayTicketDom=a;i(a,0)}else{var s=$.trim(a.parents("#payTicketOperate").prevAll(".payTicketName").val());if($formCheck.emptyString(s)){baseUtils.show.redTip("票种名称不能为空，请重新输入");return false}var c=$.trim(a.parents("#payTicketOperate").prevAll(".payTicketCount").val());if(!$formCheck.isNumPositiveAndInteger(c)){baseUtils.show.redTip("票数应大于0，且不能为空，请重新输入");return false}var l=$.trim(a.parents("#payTicketOperate").prevAll(".payTicketPrice").val())*100;if($formCheck.emptyString(l)||l<=0){baseUtils.show.redTip("票价不可为空且必须大于0，请重新输入");return false}if(l>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}var n=a.parents(".payTicketTableBody").find(".payTicketExplanationArea").val();if(n.length>198){baseUtils.show.redTip("票种说明字数不能超过198个字符");return false}var o=false;$("input.payTicketName").each(function(){if(r!=$(this).data("index")&&s==$.trim($(this).val())){o=true;return false}});if(o){baseUtils.show.redTip("票种名称已存在，请重新输入");return false}e.payTicketEditState=false;e.editedPayTicketName="新建收费票";i(a,1)}});$("#payTicketBodyWrapper").on("click",".deletePayTicket",function(t){var i=$(t.target);var a=i.prev(".editPayTicket").attr("edit_state");if(a==0){e.payTicketEditState=false;e.editedPayTicketName="新建收费票"}i.parents(".payTicketTableBody").remove()})};function t(t){if(t==0){e.freeTicketEditState=true;$("#editFreeTicket").attr("edit_state",0);$("#editFreeTicket").html("保存此票");$(".freeTicketItem").removeAttr("readOnly");$(".freeTicketItem").css("border","1px solid #dcdcdc");$(".freeTicketDesc").removeClass("hide")}else{e.freeTicketEditState=false;$("#editFreeTicket").attr("edit_state",1);$("#editFreeTicket").html("编辑此票");$(".freeTicketItem").attr("readOnly","true");$(".freeTicketItem").css("border","none");$(".freeTicketDesc").addClass("hide")}}function i(e,t){if(t==0){e.attr("edit_state",0);e.html("保存此票");e.parents("#payTicketOperate").prevAll(".payTicketItem").removeAttr("readOnly");e.parents("#payTicketOperate").prevAll(".payTicketItem").css("border","1px solid #dcdcdc");e.parents(".payTicketInfo").next(".payTicketDesc").removeClass("hide")}else{e.attr("edit_state",1);e.html("编辑此票");e.parents("#payTicketOperate").prevAll(".payTicketItem").attr("readOnly","true");e.parents("#payTicketOperate").prevAll(".payTicketItem").css("border","none");e.parents(".payTicketInfo").next(".payTicketDesc").addClass("hide")}}function a(e){var t='<li class="payTicketTableBody" id="">'+'<div class="payTicketInfo">'+'<input class="payTicketItem inputDefault payTicketName" data-index="'+e+'" placeholder="vip票" />'+'<input class="payTicketItem inputDefault payTicketCount" type="text" placeholder="0(不限)" />'+'<input class="payTicketItem inputDefault payTicketPrice" type="number" placeholder="请输入价格" />'+'<div class="ticketItem" id="payTicketOperate">'+'<div class="toolBox">'+"<ul>"+'<li class="editPayTicket" edit_state="0" id="'+e+'" >保存此票</li>'+'<li class="deletePayTicket">删除此票</li>'+"</ul>"+"</div>"+"</div>"+"</div>"+'<div class="payTicketDesc">'+'<div class="ticketExplanationWrapper">'+'<span class="ticketExplanation">票种说明(选填)</span>'+'<textarea class="payTicketExplanationArea ticketTextArea" placeholder="您可以在这里说明此票的特点"></textarea>'+"</div>"+"</div>"+"</li>";return t}return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2FjaXR2aXR5L2NyZWF0ZUFjdGl2aXR5LmpzIl0sIm5hbWVzIjpbIiQiLCJjcmVhdGVBY3Rpdml0eSIsImluaXQiLCJzdWJtaXRMaW1pdCIsImFjdGl2aXR5UGljVXJsIiwidHlwZSIsInBhcnNlSW50IiwidmFsIiwiaXNTZWxlY3RQYWNrYWdlIiwiYWxpdmVUaW1lQ29uZmlnIiwiY2hhbmdlIiwidGhpcyIsInNob3ciLCJoaWRlIiwiY2xpY2siLCJpbmRleCIsImFwcGVuZCIsImVxIiwiaHRtbCIsImNoaWxkcmVuIiwibGVuZ3RoIiwib24iLCJkZWxldGVUYWJsZSIsInJlbW92ZSIsImUiLCJjb25zb2xlIiwibG9nIiwiZmlsZXMiLCJmaWxlIiwibGltaXRTaXplIiwiJHVwbG9hZEZpbGUiLCJjaGVja0ZpbGVTaXplIiwidXBsb2FkUGljIiwiZGF0YSIsImJhc2VVdGlscyIsImJsdWVUaXAiLCJhY2Nlc3NfdXJsIiwic2hvd0FjdGl2aXR5UGljIiwicmVkVGlwIiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImhpZGVBY3Rpdml0eVBpYyIsImVhY2giLCJtb2RhbCIsImluaXRUaWNrZXRJbmZvIiwidGl0bGUiLCJ0cmltIiwicGxhY2UiLCJhY3Rpdml0eV9zdGFydF9hdCIsImFjdGl2aXR5X2VuZF9hdCIsImlzX2RlZmF1bHRfZW5yb2xsX3RpbWUiLCJlbnJvbGxfc3RhcnRfYXQiLCJlbnJvbGxfZW5kX2F0IiwiaW1nX3VybCIsImF0dHIiLCJhY3Rvcl9udW0iLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiZGVzY3JiIiwiZ2V0Q29udGVudCIsImZvcm1fZmllbGQiLCJmaWVsZF9uYW1lIiwicmVxdWlyZWQiLCJwbGFjZWhvbGRlciIsIm5lZWRfY29uZmlybSIsImZvcm1PYmoiLCJpbmZvVGFibGVSZXF1aWVkIiwiZmluZCIsImluZm9UYWJsZVRpdGxlIiwiaW5mb1RhYmxlUGxhY2Vob2xkZXIiLCJwdXNoIiwic3RhcnRfYXQiLCJpc19jb25maXJtIiwicGFja2FnZSIsInBhY2thZ2VfaWQiLCJwYWNrYWdlX25hbWUiLCJhY3Rpdml0eUluZm8iLCJKU09OIiwic3RyaW5naWZ5IiwiY2hlY2tBY3Rpdml0eUZvcm0iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJjaGVja1RpbWUiLCJjaGVja1RpbWVPcmRlciIsInRpY2tldENvdW50IiwiaGFzQ2xhc3MiLCJmcmVlVGlja2V0RWRpdFN0YXRlIiwidGlja2V0UGFyYW1zIiwiQXJyYXkiLCJmcmVlVGlja2V0SWQiLCJmcmVlVGlja2V0TmFtZSIsImZyZWVUaWNrZXRDb3VudCIsInRpY2tldEV4cGxhbmF0aW9uIiwiaXNOZWVkQ2hlY2siLCJmcmVlVGlja2V0SXRlbSIsImlkIiwidGlja2V0X25hbWUiLCJ0aWNrZXRfcHJpY2UiLCJ0aWNrZXRfY291bnQiLCJleHRyYSIsImlzX25lZWRfY2hlY2siLCJwYXlUaWNrZXRFZGl0U3RhdGUiLCJjb3VudCIsInBheVRpY2tldElkIiwicGF5VGlja2V0TmFtZSIsInBheVRpY2tldENvdW50IiwicGF5VGlja2V0UHJpY2UiLCJwYXlUaWNrZXRFeHRyYSIsInBheVRpY2tldEl0ZW0iLCJhbGxQYXJhbXMiLCJwYXJhbXMiLCJzYXZlQWN0aXZpdHlJbmZvIiwiZG9jdW1lbnQiLCJhamF4RXJyb3IiLCJldmVudCIsInhociIsIm9wdCIsImluZm8iLCJzdGF0dXMiLCJzdGF0dXNUZXh0IiwiZXJyb3IiLCJ1cmwiLCJzaG93TG9hZGluZyIsInBvc3QiLCJjb2RlIiwiaGlkZUxvYWRpbmciLCJzZXRUaW1lb3V0Iiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwibXNnIiwiaXNOYU4iLCJlZGl0ZWRQYXlUaWNrZXROYW1lIiwiZWRpdFBheVRpY2tldERvbSIsImNoYW5nZUZyZWVUaWNrZXRTdGF0ZSIsInJlbW92ZUF0dHIiLCJpc051bVBvc2l0aXZlQW5kSW50ZWdlciIsImZyZWVUaWNrZXRFeHRyYSIsInN0YXRlIiwiJHBheVRpY2tldExpc3QiLCJnZXRQYXlUaWNrZXRCb2R5IiwiJHRoaXMiLCJ0YXJnZXQiLCJhbGVydCIsImJ0biIsIm9uT2siLCJwYXJlbnRzIiwicHJldkFsbCIsImNoYW5nZVBheVRpY2tldFN0YXRlIiwibWF4SW5wdXRQcmljZSIsImlzTmFtZUV4aXN0IiwiZWRpdF9zdGF0ZSIsInByZXYiLCJjc3MiLCJjdXJyZW50RG9tIiwibmV4dCIsInBheVRpY2tldEJvZHkiXSwibWFwcGluZ3MiOiJBQUlBQSxFQUFFLFdBRUVDLGVBQWVDLFFBTW5CLElBQUlELGdCQUFpQixXQUNqQixHQUFJQSxLQUVKLElBQUlFLEdBQWMsS0FFbEIsSUFBSUMsR0FBaUIsRUFFckJILEdBQWVJLEtBQVFDLFNBQVNOLEVBQUUsU0FBU08sTUFFM0NOLEdBQWVPLGdCQUFrQixLQUVqQ1AsR0FBZUMsS0FBTyxXQVNsQk8sZ0JBQWdCLGdCQUVoQlQsR0FBRSxvQ0FBb0NVLE9BQU8sV0FDekMsR0FBR0osU0FBU04sRUFBRVcsTUFBTUosT0FBTyxDQUN2QlAsRUFBRSxlQUFlWSxXQUVqQixDQUNBWixFQUFFLGVBQWVhLFNBS3pCYixHQUFFLGlCQUFpQmMsTUFBTSxXQUNyQixHQUFJQyxHQUFRZixFQUFFLGlCQUFpQmUsTUFBTWYsRUFBRVcsTUFDdkNYLEdBQUUsc0JBQXNCZ0IsT0FBT2hCLEVBQUUsc0JBQXNCaUIsR0FBR0YsR0FBT0csT0FFakUsSUFBR2xCLEVBQUUsc0JBQXNCbUIsV0FBV0MsT0FBTyxDQUN6Q3BCLEVBQUUsa0JBQWtCYSxXQUVwQixDQUNBYixFQUFFLGtCQUFrQlksU0FNNUJaLEdBQUUsc0JBQXNCcUIsR0FBRyxRQUFRLGVBQWUsV0FDOUMsR0FBSUMsR0FBY3RCLEVBQUUsa0NBQ3BCLElBQUdzQixFQUFZRixPQUFPLEVBQUUsQ0FDcEIsR0FBSUwsR0FBUU8sRUFBWVAsTUFBTWYsRUFBRVcsTUFDaENYLEdBQUUsdUNBQXVDaUIsR0FBR0YsR0FBT1EsU0FHdkQsR0FBR3ZCLEVBQUUsc0JBQXNCbUIsV0FBV0MsT0FBTyxDQUN6Q3BCLEVBQUUsa0JBQWtCYSxXQUVwQixDQUNBYixFQUFFLGtCQUFrQlksU0FNNUJaLEdBQUUsc0JBQXNCcUIsR0FBRyxTQUFTLFNBQVVHLEdBQzFDQyxRQUFRQyxJQUFJLFNBQ1osSUFBR2YsS0FBS2dCLE9BQVNoQixLQUFLZ0IsTUFBTVAsT0FBTyxFQUFFLENBQ2pDLEdBQUlRLEdBQU9qQixLQUFLZ0IsTUFBTSxFQUV0QixJQUFJRSxHQUFZLENBR2hCLElBQUdDLFlBQVlDLGNBQWNILEVBQUtDLEdBQVcsQ0FDekNDLFlBQVlFLFVBQVVKLEVBRWxCLFNBQVVLLEdBQ05DLFVBQVV0QixLQUFLdUIsUUFBUSxRQUV2Qi9CLEdBQWlCNkIsRUFBS0EsS0FBS0csVUFDM0IsSUFBR2hDLEVBQWUsQ0FDZGlDLEVBQWdCakMsS0FJeEIsU0FBVTZCLEdBQ05SLFFBQVFDLElBQUlPLEVBQ1pDLFdBQVV0QixLQUFLMEIsT0FBTyxlQUk5QixDQUNBSixVQUFVdEIsS0FBSzBCLE9BQU8sVUFBVVQsRUFBVSxhQUc5QyxDQUNBSixRQUFRQyxJQUFJZixLQUFLZ0IsU0FNekIzQixHQUFFLGlCQUFpQnFCLEdBQUcsU0FBUyxXQUMzQixHQUFHckIsRUFBRVcsTUFBTVEsU0FBUyxhQUFhWixNQUFNLENBQ25DUCxFQUFFLHNCQUFzQlksTUFDeEJaLEdBQUUsYUFBYU8sSUFBSSxHQUVuQk4sR0FBZU8sZ0JBQWtCLElBQ2pDUixHQUFFLDBCQUEwQnVDLFNBQVMsT0FDckN2QyxHQUFFLGlCQUFpQndDLFlBQVksWUFHL0IsQ0FDQXhDLEVBQUUsc0JBQXNCYSxNQUN4QmIsR0FBRSxhQUFhTyxJQUFJLEdBRW5CTixHQUFlTyxnQkFBa0IsS0FDakNSLEdBQUUsaUJBQWlCdUMsU0FBUyxPQUM1QnZDLEdBQUUsMEJBQTBCd0MsWUFBWSxVQUtoRHhDLEdBQUUsY0FBY3FCLEdBQUcsUUFBUSxXQUN2Qm9CLEdBRUF6QyxHQUFFLHNCQUFzQjBDLEtBQUssV0FDekIxQyxFQUFFVyxNQUFNSixJQUFJLE9BS3BCb0MsT0FBTUMsZ0JBSU41QyxHQUFFLGlCQUFpQnFCLEdBQUcsUUFBUSxXQUUxQixHQUFHbEIsRUFBWSxDQUNYK0IsVUFBVXRCLEtBQUswQixPQUFPLGNBRW5CLENBRUgsR0FBSU8sR0FBUTdDLEVBQUU4QyxLQUFLOUMsRUFBRSxVQUFVTyxPQUMzQndDLEVBQVEvQyxFQUFFOEMsS0FBSzlDLEVBQUUsVUFBVU8sT0FDM0J5QyxFQUFvQmhELEVBQUU4QyxLQUFLOUMsRUFBRSxzQkFBc0JPLE9BQ25EMEMsRUFBa0JqRCxFQUFFOEMsS0FBSzlDLEVBQUUsb0JBQW9CTyxPQUMvQzJDLEVBQXlCNUMsU0FBU04sRUFBRSw0Q0FBNENPLE9BQ2hGNEMsRUFDQUMsQ0FFSixJQUFHRixFQUF3QixDQUN2QkMsRUFBa0JuRCxFQUFFOEMsS0FBSzlDLEVBQUUsb0JBQW9CTyxNQUMvQzZDLEdBQWdCcEQsRUFBRThDLEtBQUs5QyxFQUFFLGtCQUFrQk8sV0FDeEMsQ0FDSDRDLEVBQWtCLEVBQ2xCQyxHQUFnQixHQUdwQixHQUFJQyxHQUFVckQsRUFBRSxZQUFZc0QsS0FBSyxRQUFVbEQsRUFDdkNtRCxFQUFZakQsU0FBU04sRUFBRSxjQUFjTyxRQUFVLEVBRS9DaUQsRUFBS0MsR0FBR0MsVUFBVSxnQkFDbEJDLEVBQVNILEVBQUdJLGFBRVpDLElBRVFDLFdBQWEsS0FDYnpELEtBQU8sRUFDUDBELFNBQVcsRUFDWEMsWUFBYyxLQUdkRixXQUFhLE9BQ2J6RCxLQUFPLEVBQ1AwRCxTQUFXLEVBQ1hDLFlBQWMsR0FDZEMsYUFBZSxHQUkzQmpFLEdBQUUsdUNBQXVDMEMsS0FBSyxXQUMxQyxHQUFJd0IsTUFDQUMsRUFBbUJuRSxFQUFFVyxNQUFNeUQsS0FBSyw2QkFDaENDLEVBQWlCckUsRUFBRVcsTUFBTXlELEtBQUssbUJBQW1CbkQsR0FBRyxHQUNwRHFELEVBQXVCdEUsRUFBRVcsTUFBTXlELEtBQUsseUJBQXlCbkQsR0FBRyxFQUVwRWlELEdBQVFKLFdBQWFPLEVBQWU5RCxLQUNwQzJELEdBQVE3RCxLQUFPQyxTQUFTK0QsRUFBZXBDLEtBQUssUUFDNUNpQyxHQUFRSCxTQUFXSSxFQUFpQi9DLE9BQU8sRUFBSSxFQUFHLENBQ2xEOEMsR0FBUUYsWUFBY00sRUFBcUIvRCxLQUUzQyxJQUFHUCxFQUFFOEMsS0FBS29CLEVBQVFKLFlBQVksQ0FDMUJELEVBQVdVLEtBQUtMLEtBSXhCLElBQUlNLEdBQVd4RSxFQUFFOEMsS0FBSzlDLEVBQUUsYUFBYU8sT0FDakNrRSxFQUFhekUsRUFBRSx1QkFBdUJvQixPQUFPLEVBQUksRUFBSSxFQUNyRHNELEVBQVUxRSxFQUFFLGlDQUNaMkUsRUFBY0QsRUFBUW5FLE1BQ3RCcUUsRUFBZUQsRUFBYUQsRUFBUXhELE9BQVMsRUFFakQsSUFBSTJELElBRUFoQyxNQUFRQSxFQUNSRSxNQUFRQSxFQUNSQyxrQkFBb0JBLEVBQ3BCQyxnQkFBa0JBLEVBQ2xCQyx1QkFBeUJBLEVBQ3pCQyxnQkFBa0JBLEVBQ2xCQyxjQUFnQkEsRUFDaEJDLFFBQVVBLEVBQ1ZFLFVBQVlBLEVBQ1pJLE9BQVNBLEVBQ1RFLFdBQWFpQixLQUFLQyxVQUFVbEIsR0FDNUJXLFNBQVdBLEVBQ1hDLFdBQWFBLEVBR2pCLElBQUdPLEVBQWtCSCxHQUFjLENBRy9CLEdBQUdGLEVBQVcsQ0FDVixHQUFHTSxXQUFXQyxZQUFZTCxFQUFhTCxVQUFVLENBQzdDdEMsVUFBVXRCLEtBQUswQixPQUFPLFlBQ3RCLE9BQU8sT0FFWCxJQUFJMkMsV0FBV0UsVUFBVU4sRUFBYUwsVUFBVSxDQUM1Q3RDLFVBQVV0QixLQUFLMEIsT0FBTyxZQUN0QixPQUFPLE9BRVgsSUFBSTJDLFdBQVdHLGVBQWVQLEVBQWFMLFNBQVNLLEVBQWE1QixpQkFBaUIsQ0FDOUVmLFVBQVV0QixLQUFLMEIsT0FBTyxpQkFDdEIsT0FBTyxRQUtmLEdBQUkrQyxHQUFjckYsRUFBRSx1QkFBdUJvQixNQUMzQyxLQUFLcEIsRUFBRSx3QkFBd0JzRixTQUFTLFFBQVMsQ0FDN0NELElBRUosR0FBSUEsR0FBZSxFQUFHLENBQ2xCbkQsVUFBVXRCLEtBQUswQixPQUFPLGVBQ3RCLE9BQU8sT0FJWCxHQUFJSyxNQUFNNEMsb0JBQXFCLENBQzNCckQsVUFBVXRCLEtBQUswQixPQUFPLFlBQ3RCLE9BQU8sT0FHWCxHQUFJa0QsR0FBZSxHQUFJQyxNQUV2QixLQUFNekYsRUFBRSx3QkFBd0JzRixTQUFTLFFBQVMsQ0FFOUMsR0FBSUksR0FBZTFGLEVBQUUsd0JBQXdCaUMsS0FBSyxhQUM5QzBELEVBQWlCM0YsRUFBRSxtQkFBbUJPLE1BQ3RDcUYsRUFBa0I1RixFQUFFLG9CQUFvQk8sTUFDeENzRixFQUFvQjdGLEVBQUUsMEJBQTBCTyxNQUNoRHVGLEVBQWM5RixFQUFFLHNCQUFzQmlDLEtBQUssY0FFL0MsSUFBSThELElBQ0FDLEdBQUtOLEVBQ0xPLFlBQWNOLEVBQ2RPLGFBQWUsRUFDZkMsYUFBZVAsRUFDZlEsTUFBUVAsRUFDUlEsY0FBZ0JQLEVBR3BCTixHQUFhLEdBQUtPLEVBR3RCLElBQUs5RixFQUFlTyxnQkFBaUIsQ0FFakMsR0FBSW1DLE1BQU0yRCxtQkFBb0IsQ0FDMUJwRSxVQUFVdEIsS0FBSzBCLE9BQU8sWUFDdEIsT0FBTyxPQUdYLEdBQUlpRSxHQUFRdkcsRUFBRSx1QkFBdUJvQixNQUNyQyxJQUFJbUYsRUFBUSxFQUFHLENBRVh2RyxFQUFFLHVCQUF1QjBDLEtBQUssV0FFMUIsR0FBSThELEdBQWN4RyxFQUFFVyxNQUFNMkMsS0FBSyxNQUMzQm1ELEVBQWdCekcsRUFBRVcsTUFBTXlELEtBQUssa0JBQWtCN0QsTUFDL0NtRyxFQUFpQjFHLEVBQUVXLE1BQU15RCxLQUFLLG1CQUFtQjdELE1BQ2pEb0csRUFBaUIzRyxFQUFFVyxNQUFNeUQsS0FBSyxtQkFBbUI3RCxNQUFRLElBQ3pEcUcsRUFBaUI1RyxFQUFFVyxNQUFNeUQsS0FBSyw2QkFBNkI3RCxLQUUvRCxJQUFJc0csSUFDQWIsR0FBS1EsRUFDTFAsWUFBY1EsRUFDZFAsYUFBZVMsRUFDZlIsYUFBZU8sRUFDZk4sTUFBUVEsRUFHWnBCLEdBQWFBLEVBQWFwRSxRQUFVeUYsS0FNaEQsR0FBSUMsSUFDQUMsT0FBU2xDLEVBQ1RGLFdBQWFBLEVBQ2JDLGFBQWVBLEVBQ2ZZLGFBQWVBLEVBR25CckYsR0FBYyxJQUVkLElBQUdGLEVBQWVJLE9BQVMsRUFBRSxDQUN6QjJHLEVBQWlCLGtCQUFtQkYsT0FFakMsSUFBRzdHLEVBQWVJLE1BQVEsRUFBRSxDQUMvQnlHLEVBQVVDLE9BQU9mLEdBQUtoRyxFQUFFLGVBQWVPLEtBQ3ZDeUcsR0FBaUIsZ0JBQWlCRixRQUduQyxDQUNILE1BQU8sVUFRbkI5RyxHQUFFaUgsVUFBVUMsVUFBVSxTQUFTQyxFQUFPQyxFQUFLQyxHQUN2QzVGLFFBQVE2RixLQUFLRixFQUFJRyxPQUFRSCxFQUFJSSxXQUM3Qi9GLFNBQVFnRyxNQUFNSixFQUNkbkYsV0FBVXRCLEtBQUswQixPQUFPLGFBQ3RCbkMsR0FBYyxRQUt0QixTQUFTNkcsR0FBaUJVLEVBQUtaLEdBQzNCckYsUUFBUUMsSUFBSW9GLEVBQ1phLGNBQ0EzSCxHQUFFNEgsS0FBS0YsRUFBS1osRUFBVyxTQUFVN0UsR0FDN0IsR0FBRzNCLFNBQVMyQixFQUFLNEYsUUFBVSxFQUFFLENBQ3pCQyxhQUNBNUYsV0FBVXRCLEtBQUt1QixRQUFRLE9BQ3ZCNEYsWUFBVyxXQUNQQyxPQUFPQyxTQUFTQyxLQUFPLG1CQUN6QixTQUNDLENBQ0hKLGFBQ0E1RixXQUFVdEIsS0FBSzBCLE9BQU9MLEVBQUtrRyxJQUMzQmhJLEdBQWMsU0FNMUIsUUFBUzZFLEdBQWtCc0MsR0FDdkIsR0FBR3JDLFdBQVdDLFlBQVlvQyxFQUFLekUsT0FBTyxDQUNsQ1gsVUFBVXRCLEtBQUswQixPQUFPLFlBQ3RCLE9BQU8sT0FHWCxHQUFHMkMsV0FBV0MsWUFBWW9DLEVBQUt2RSxPQUFPLENBQ2xDYixVQUFVdEIsS0FBSzBCLE9BQU8sWUFDdEIsT0FBTyxPQUdYLEdBQUcyQyxXQUFXQyxZQUFZb0MsRUFBS3RFLG1CQUFtQixDQUM5Q2QsVUFBVXRCLEtBQUswQixPQUFPLGNBQ3RCLE9BQU8sT0FHWCxJQUFJMkMsV0FBV0UsVUFBVW1DLEVBQUt0RSxtQkFBbUIsQ0FDN0NkLFVBQVV0QixLQUFLMEIsT0FBTyxjQUN0QixPQUFPLE9BR1gsR0FBRzJDLFdBQVdDLFlBQVlvQyxFQUFLckUsaUJBQWlCLENBQzVDZixVQUFVdEIsS0FBSzBCLE9BQU8sY0FDdEIsT0FBTyxPQUdYLElBQUkyQyxXQUFXRSxVQUFVbUMsRUFBS3JFLGlCQUFpQixDQUMzQ2YsVUFBVXRCLEtBQUswQixPQUFPLGNBQ3RCLE9BQU8sT0FHWCxJQUFJMkMsV0FBV0csZUFBZWtDLEVBQUt0RSxrQkFBa0JzRSxFQUFLckUsaUJBQWlCLENBQ3ZFZixVQUFVdEIsS0FBSzBCLE9BQU8sbUJBQ3RCLE9BQU8sT0FJWGIsUUFBUUMsSUFBSTRGLEVBQUtwRSx1QkFDakIsSUFBR29FLEVBQUtwRSx5QkFBMkIsRUFBRyxDQUNsQyxHQUFHK0IsV0FBV0MsWUFBWW9DLEVBQUtuRSxpQkFBaUIsQ0FDNUNqQixVQUFVdEIsS0FBSzBCLE9BQU8sY0FDdEIsT0FBTyxPQUVYLElBQUkyQyxXQUFXRSxVQUFVbUMsRUFBS25FLGlCQUFpQixDQUMzQ2pCLFVBQVV0QixLQUFLMEIsT0FBTyxjQUN0QixPQUFPLE9BRVgsR0FBRzJDLFdBQVdDLFlBQVlvQyxFQUFLbEUsZUFBZSxDQUMxQ2xCLFVBQVV0QixLQUFLMEIsT0FBTyxjQUN0QixPQUFPLE9BRVgsSUFBSTJDLFdBQVdFLFVBQVVtQyxFQUFLbEUsZUFBZSxDQUN6Q2xCLFVBQVV0QixLQUFLMEIsT0FBTyxZQUN0QixPQUFPLE9BRVgsSUFBSTJDLFdBQVdHLGVBQWVrQyxFQUFLbkUsZ0JBQWdCbUUsRUFBS2xFLGVBQWUsQ0FDbkVsQixVQUFVdEIsS0FBSzBCLE9BQU8sbUJBQ3RCLE9BQU8sUUFHZixHQUFHOEYsTUFBTWQsRUFBSy9ELFlBQVkrRCxFQUFLL0QsVUFBVSxFQUFFLENBQ3ZDckIsVUFBVXRCLEtBQUswQixPQUFPLGNBQ3RCLE9BQU8sT0FFWCxNQUFPLE1BSVgsUUFBU0QsR0FBZ0JxRixHQUNyQixHQUFHQSxFQUFJLENBQ0gxSCxFQUFFLFlBQVlzRCxLQUFLLE1BQU1vRSxHQUFLOUcsTUFDOUJaLEdBQUUsaUJBQWlCYSxRQUszQixRQUFTNEIsS0FDTHpDLEVBQUUsWUFBWXNELEtBQUssTUFBTSxJQUFJekMsTUFDN0JiLEdBQUUsaUJBQWlCWSxNQUNuQlIsR0FBaUIsR0FHckIsTUFBT0gsS0FJWCxJQUFJMEMsT0FBUSxXQUVSLEdBQUlBLEtBRUpBLEdBQU00QyxvQkFBc0IsS0FFNUI1QyxHQUFNMkQsbUJBQXFCLEtBQzNCM0QsR0FBTTBGLG9CQUFzQixFQUM1QjFGLEdBQU0yRixpQkFBbUIsRUFFekIzRixHQUFNQyxlQUFpQixXQUtuQjVDLEVBQUUsWUFBWWMsTUFBTSxXQUNoQmQsRUFBRSx3QkFBd0J3QyxZQUFZLE9BQ3RDeEMsR0FBRSxtQkFBbUJ3QyxZQUFZLE9BQ2pDeEMsR0FBRSxZQUFZdUMsU0FBUyxPQUV2QmdHLEdBQXNCLElBRzFCdkksR0FBRSxxQkFBcUJjLE1BQU0sV0FDekJkLEVBQUUsWUFBWXdDLFlBQVksT0FDMUJ4QyxHQUFFLHdCQUF3QnVDLFNBQVMsT0FDbkN2QyxHQUFFLHdCQUF3QmlDLEtBQUssWUFBYSxHQUM1Q2pDLEdBQUUsd0JBQXdCTyxJQUFJLEdBQzlCUCxHQUFFLDBCQUEwQk8sSUFBSSxHQUNoQ1AsR0FBRSwyQkFBMkJ3SSxXQUFXLFVBQ3hDN0YsR0FBTTRDLG9CQUFzQixPQUloQ3ZGLEdBQUUsbUJBQW1CYyxNQUFNLFdBQ3ZCLEdBQUk2QixFQUFNNEMsb0JBQXFCLENBQzNCLEdBQUlJLEdBQWtCM0YsRUFBRSxtQkFBbUJPLEtBQzNDLElBQUkwRSxXQUFXQyxZQUFZUyxHQUFpQixDQUN4Q3pELFVBQVV0QixLQUFLMEIsT0FBTyxpQkFDdEIsT0FBTyxPQUVYLEdBQUlzRCxHQUFtQjVGLEVBQUUsb0JBQW9CTyxLQUM3QyxJQUFJMEUsV0FBV0MsWUFBWVUsR0FBa0IsQ0FDekMxRCxVQUFVdEIsS0FBSzBCLE9BQU8sY0FDdEIsT0FBTyxPQUVYLElBQUsyQyxXQUFXd0Qsd0JBQXdCN0MsR0FBa0IsQ0FDdEQxRCxVQUFVdEIsS0FBSzBCLE9BQU8sY0FDdEIsT0FBTyxPQUVYLEdBQUlvRyxHQUFrQjFJLEVBQUUsMEJBQTBCTyxLQUNsRCxJQUFJbUksRUFBZ0J0SCxPQUFTLElBQUssQ0FDOUJjLFVBQVV0QixLQUFLMEIsT0FBTyxtQkFDdEIsT0FBTyxPQUVYaUcsRUFBc0IsT0FFbkIsQ0FDSCxHQUFJNUYsRUFBTTJELG1CQUFvQixDQUMxQnBFLFVBQVV0QixLQUFLMEIsT0FBTyxvQkFDdEIsT0FBTyxPQUVYaUcsRUFBc0IsS0FNOUJ2SSxHQUFFLDJCQUEyQmMsTUFBTSxXQUMvQixHQUFJNkgsR0FBUTNJLEVBQUUsMkJBQTJCaUMsS0FBSyxjQUM5QyxJQUFJMEcsR0FBUyxJQUFLLENBQ2QzSSxFQUFFLDJCQUEyQmlDLEtBQUssY0FBZSxJQUNqRCxZQUNHLENBQ0hqQyxFQUFFLDJCQUEyQmlDLEtBQUssY0FBZSxJQUNqRCxVQVNSakMsR0FBRSxpQkFBaUJjLE1BQU0sV0FDckIsR0FBSTZCLEVBQU0yRCxtQkFBb0IsQ0FDMUJwRSxVQUFVdEIsS0FBSzBCLE9BQU8sSUFBTUssRUFBTTBGLG9CQUFzQixlQUN4RCxPQUFPLE9BRVgxRixFQUFNMkQsbUJBQXFCLElBQzNCM0QsR0FBTTBGLG9CQUFzQixPQUU1QixJQUFJTyxHQUFpQjVJLEVBQUUseUJBQXlCbUIsU0FBUyxzQkFDekRuQixHQUFFLHlCQUF5QmdCLE9BQU82SCxFQUFpQkQsRUFBZXhILFFBRWxFdUIsR0FBTTJGLGlCQUFtQk0sRUFBZTNILEdBQUcySCxFQUFleEgsUUFBUWdELEtBQUssbUJBSzNFcEUsR0FBRSx5QkFBeUJxQixHQUFHLFFBQVMsaUJBQWtCLFNBQVVHLEdBRS9ELEdBQUlzSCxHQUFROUksRUFBRXdCLEVBQUV1SCxRQUNaL0MsRUFBSzhDLEVBQU14RixLQUFLLEtBRXBCLElBQUl3RixFQUFNeEYsS0FBSyxlQUFpQixFQUFHLENBRS9CLEdBQUlYLEVBQU00QyxvQkFBcUIsQ0FDM0JyRCxVQUFVdEIsS0FBSzBCLE9BQU8sb0JBQ3RCLE9BQU8sT0FFWCxHQUFJSyxFQUFNMkQsbUJBQW9CLENBQzFCdEcsRUFBRWdKLE1BQU0sSUFBTXJHLEVBQU0wRixvQkFBc0Isa0JBQW1CLFFBQ3pEWSxJQUFLLEVBQ0xDLEtBQU0sV0FDRnZHLEVBQU0yRixpQkFBaUJ4SCxVQUcvQixPQUFPLE9BRVg2QixFQUFNMkQsbUJBQXFCLElBQzNCLElBQUlHLEdBQWdCcUMsRUFBTUssUUFBUSxxQkFBcUJDLFFBQVEsa0JBQWtCN0ksS0FDakZvQyxHQUFNMEYsb0JBQXNCNUIsQ0FDNUI5RCxHQUFNMkYsaUJBQW1CUSxDQUV6Qk8sR0FBcUJQLEVBQU8sT0FFekIsQ0FFSCxHQUFJckMsR0FBaUJ6RyxFQUFFOEMsS0FBS2dHLEVBQU1LLFFBQVEscUJBQXFCQyxRQUFRLGtCQUFrQjdJLE1BQ3pGLElBQUkwRSxXQUFXQyxZQUFZdUIsR0FBZ0IsQ0FDdkN2RSxVQUFVdEIsS0FBSzBCLE9BQU8saUJBQ3RCLE9BQU8sT0FHWCxHQUFJb0UsR0FBa0IxRyxFQUFFOEMsS0FBS2dHLEVBQU1LLFFBQVEscUJBQXFCQyxRQUFRLG1CQUFtQjdJLE1BQzNGLEtBQU0wRSxXQUFXd0Qsd0JBQXdCL0IsR0FBaUIsQ0FDdER4RSxVQUFVdEIsS0FBSzBCLE9BQU8scUJBQ3RCLE9BQU8sT0FHWCxHQUFJcUUsR0FBa0IzRyxFQUFFOEMsS0FBS2dHLEVBQU1LLFFBQVEscUJBQXFCQyxRQUFRLG1CQUFtQjdJLE9BQVMsR0FDcEcsSUFBSTBFLFdBQVdDLFlBQVl5QixJQUFtQkEsR0FBa0IsRUFBRyxDQUMvRHpFLFVBQVV0QixLQUFLMEIsT0FBTyxxQkFDdEIsT0FBTyxPQUVYLEdBQUlxRSxFQUFpQnpFLFVBQVVvSCxjQUFnQixJQUFLLENBQ2hEcEgsVUFBVXRCLEtBQUswQixPQUFPLFVBQVlKLFVBQVVvSCxjQUFnQixLQUM1RCxPQUFPLE9BR1gsR0FBSTFDLEdBQWlCa0MsRUFBTUssUUFBUSx1QkFBdUIvRSxLQUFLLDZCQUE2QjdELEtBQzVGLElBQUlxRyxFQUFleEYsT0FBUyxJQUFLLENBQzdCYyxVQUFVdEIsS0FBSzBCLE9BQU8sbUJBQ3RCLE9BQU8sT0FHWCxHQUFJaUgsR0FBYyxLQUNsQnZKLEdBQUUsdUJBQXVCMEMsS0FBSyxXQUMxQixHQUFJc0QsR0FBTWhHLEVBQUVXLE1BQU1zQixLQUFLLFVBQVl3RSxHQUFpQnpHLEVBQUU4QyxLQUFLOUMsRUFBRVcsTUFBTUosT0FBUSxDQUN2RWdKLEVBQWMsSUFDZCxPQUFPLFNBSWYsSUFBSUEsRUFBYSxDQUNickgsVUFBVXRCLEtBQUswQixPQUFPLGdCQUN0QixPQUFPLE9BR1hLLEVBQU0yRCxtQkFBcUIsS0FDM0IzRCxHQUFNMEYsb0JBQXNCLE9BRTVCZ0IsR0FBcUJQLEVBQU8sS0FNcEM5SSxHQUFFLHlCQUF5QnFCLEdBQUcsUUFBUyxtQkFBb0IsU0FBVUcsR0FDakUsR0FBSXNILEdBQVE5SSxFQUFFd0IsRUFBRXVILE9BQ2hCLElBQUlTLEdBQWFWLEVBQU1XLEtBQUssa0JBQWtCbkcsS0FBSyxhQUNuRCxJQUFJa0csR0FBYyxFQUFHLENBQ2pCN0csRUFBTTJELG1CQUFxQixLQUMzQjNELEdBQU0wRixvQkFBc0IsUUFFaENTLEVBQU1LLFFBQVEsdUJBQXVCNUgsV0FXN0MsU0FBU2dILEdBQXNCSSxHQUMzQixHQUFJQSxHQUFTLEVBQUcsQ0FDWmhHLEVBQU00QyxvQkFBc0IsSUFDNUJ2RixHQUFFLG1CQUFtQnNELEtBQUssYUFBYyxFQUN4Q3RELEdBQUUsbUJBQW1Ca0IsS0FBSyxPQUMxQmxCLEdBQUUsbUJBQW1Cd0ksV0FBVyxXQUNoQ3hJLEdBQUUsbUJBQW1CMEosSUFBSSxTQUFVLG9CQUNuQzFKLEdBQUUsbUJBQW1Cd0MsWUFBWSxZQUU3QixDQUNKRyxFQUFNNEMsb0JBQXNCLEtBQzVCdkYsR0FBRSxtQkFBbUJzRCxLQUFLLGFBQWMsRUFDeEN0RCxHQUFFLG1CQUFtQmtCLEtBQUssT0FDMUJsQixHQUFFLG1CQUFtQnNELEtBQUssV0FBWSxPQUN0Q3RELEdBQUUsbUJBQW1CMEosSUFBSSxTQUFVLE9BQ25DMUosR0FBRSxtQkFBbUJ1QyxTQUFTLFNBS3RDLFFBQVM4RyxHQUFxQk0sRUFBWWhCLEdBRXRDLEdBQUlBLEdBQVMsRUFBRyxDQUNaZ0IsRUFBV3JHLEtBQUssYUFBYyxFQUM5QnFHLEdBQVd6SSxLQUFLLE9BQ2hCeUksR0FBV1IsUUFBUSxxQkFBcUJDLFFBQVEsa0JBQWtCWixXQUFXLFdBQzdFbUIsR0FBV1IsUUFBUSxxQkFBcUJDLFFBQVEsa0JBQWtCTSxJQUFJLFNBQVUsb0JBQ2hGQyxHQUFXUixRQUFRLGtCQUFrQlMsS0FBSyxrQkFBa0JwSCxZQUFZLFlBRXBFLENBQ0ptSCxFQUFXckcsS0FBSyxhQUFjLEVBQzlCcUcsR0FBV3pJLEtBQUssT0FDaEJ5SSxHQUFXUixRQUFRLHFCQUFxQkMsUUFBUSxrQkFBa0I5RixLQUFLLFdBQVksT0FDbkZxRyxHQUFXUixRQUFRLHFCQUFxQkMsUUFBUSxrQkFBa0JNLElBQUksU0FBVSxPQUNoRkMsR0FBV1IsUUFBUSxrQkFBa0JTLEtBQUssa0JBQWtCckgsU0FBUyxTQUs3RSxRQUFTc0csR0FBaUI5SCxHQUN0QixHQUFJOEksR0FDQSx3Q0FDSSw4QkFDSSx1RUFBeUU5SSxFQUFRLDBCQUNqRiw4RkFDQSxnR0FDQSxpREFDSSx3QkFDSSxPQUNJLGdEQUFrREEsRUFBUSxlQUMxRCx3Q0FDSixRQUNKLFNBQ0osU0FDSixTQUNBLDhCQUNJLHlDQUNJLGtEQUNBLG9HQUNKLFNBQ0osU0FDSixPQUVKLE9BQU84SSxHQUlYLE1BQU9sSCIsImZpbGUiOiJhZG1pbi9hY2l0dml0eS9jcmVhdGVBY3Rpdml0eS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBOZW8gb24gMjAxNy8zLzguXG4gKi9cblxuJChmdW5jdGlvbiAoKSB7XG5cbiAgICBjcmVhdGVBY3Rpdml0eS5pbml0KCk7XG59KTtcblxuXG5cbi8vIOS4muWKoeWHveaVsFxudmFyIGNyZWF0ZUFjdGl2aXR5ID0gKGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY3JlYXRlQWN0aXZpdHkgPSB7fTtcblxuICAgIHZhciBzdWJtaXRMaW1pdCA9IGZhbHNlOyAgICAgLy8g6KGo5Y2V5o+Q5Lqk6ZmQ5Yi25qCH6K6wXG5cbiAgICB2YXIgYWN0aXZpdHlQaWNVcmwgPSBcIlwiOyAgICAvLyDmtLvliqjlm77niYfnmoTot6/lvoRcblxuICAgIGNyZWF0ZUFjdGl2aXR5LnR5cGUgPSAgcGFyc2VJbnQoJChcIiN0eXBlXCIpLnZhbCgpKTtcblxuICAgIGNyZWF0ZUFjdGl2aXR5LmlzU2VsZWN0UGFja2FnZSA9IGZhbHNlOyAgICAgLy8gIOaYr+WQpumAieS6huS4k+agj1xuXG4gICAgY3JlYXRlQWN0aXZpdHkuaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvLyDml7bpl7TpgInmi6nlmajliJ3lp4vljJZcbiAgICAgICAgLy8gJChcIi5hY3Rpdml0eURhdGVcIikuZGF0ZXRpbWVwaWNrZXIoe1xuICAgICAgICAvLyAgICAgd2Vla1N0YXJ0IDogMSxcbiAgICAgICAgLy8gICAgIG1pblZpZXcgOiBcImRheVwiLFxuICAgICAgICAvLyAgICAgZm9ybWF0IDogJ3l5eXktbW0tZGQgaGg6MDA6MDAnLFxuICAgICAgICAvLyAgICAgYXV0b2Nsb3NlIDogdHJ1ZSAgICAvL+mAieaLqeaXpeacn+WQjuiHquWKqOWFs+mXrVxuICAgICAgICAvLyB9KTtcbiAgICAgICAgYWxpdmVUaW1lQ29uZmlnKFwiLmFjdGl2aXR5RGF0ZVwiKTtcbiAgICAgICAgLy8g5oql5ZCN5pe26Ze06YCJ6aG55YiH5o2iXG4gICAgICAgICQoXCJpbnB1dFtuYW1lPSdjaG9vc2VBY3Rpdml0eVRpbWUnXVwiKS5jaGFuZ2UoZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIGlmKHBhcnNlSW50KCQodGhpcykudmFsKCkpKXtcbiAgICAgICAgICAgICAgICAkKFwiLmVucm9sbERhdGVcIikuc2hvdygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAkKFwiLmVucm9sbERhdGVcIikuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyDmt7vliqDlhbbku5bkv6Hmga/nmoTmjqfku7ZcbiAgICAgICAgJChcIi5hZGRUYWJsZUFyZWFcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gJChcIi5hZGRUYWJsZUFyZWFcIikuaW5kZXgoJCh0aGlzKSk7XG4gICAgICAgICAgICAkKFwiI290aGVyVGFibGVXcmFwcGVyXCIpLmFwcGVuZCgkKFwiLmFjdGl2aXR5VGFibGVDb3B5XCIpLmVxKGluZGV4KS5odG1sKCkpO1xuXG4gICAgICAgICAgICBpZigkKFwiI290aGVyVGFibGVXcmFwcGVyXCIpLmNoaWxkcmVuKCkubGVuZ3RoKXtcbiAgICAgICAgICAgICAgICAkKFwiLm90aGVySW5mb1RpcHNcIikuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAkKFwiLm90aGVySW5mb1RpcHNcIikuc2hvdygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWIoOmZpOWFtuS7luS/oeaBr+eahOaOp+S7tlxuICAgICAgICAkKFwiI290aGVyVGFibGVXcmFwcGVyXCIpLm9uKFwiY2xpY2tcIixcIi5kZWxldGVUYWJsZVwiLGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkZWxldGVUYWJsZSA9ICQoXCIjb3RoZXJUYWJsZVdyYXBwZXIgLmRlbGV0ZVRhYmxlXCIpO1xuICAgICAgICAgICAgaWYoZGVsZXRlVGFibGUubGVuZ3RoPjApe1xuICAgICAgICAgICAgICAgIHZhciBpbmRleCA9IGRlbGV0ZVRhYmxlLmluZGV4KCQodGhpcykpO1xuICAgICAgICAgICAgICAgICQoXCIjb3RoZXJUYWJsZVdyYXBwZXIgLmJhc2VJbmZvV3JhcHBlclwiKS5lcShpbmRleCkucmVtb3ZlKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKCQoXCIjb3RoZXJUYWJsZVdyYXBwZXJcIikuY2hpbGRyZW4oKS5sZW5ndGgpe1xuICAgICAgICAgICAgICAgICQoXCIub3RoZXJJbmZvVGlwc1wiKS5oaWRlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICQoXCIub3RoZXJJbmZvVGlwc1wiKS5zaG93KCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgLy8g5LiK5Lyg5rS75Yqo5rW35oqlXG4gICAgICAgICQoXCIudXBsb2FkQWN0aXZpdHlQaWNcIikub24oXCJjaGFuZ2VcIixmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJjaGFuZ2VcIilcbiAgICAgICAgICAgIGlmKHRoaXMuZmlsZXMgJiYgdGhpcy5maWxlcy5sZW5ndGg+MCl7XG4gICAgICAgICAgICAgICAgdmFyIGZpbGUgPSB0aGlzLmZpbGVzWzBdO1xuICAgICAgICAgICAgICAgIC8vIOmZkOWItuS4iuS8oOWkp+Wwj1xuICAgICAgICAgICAgICAgIHZhciBsaW1pdFNpemUgPSAyO1xuXG4gICAgICAgICAgICAgICAgLy8g6ZmQ5Yi25Zu+54mH5ZyoMk1C5YaFXG4gICAgICAgICAgICAgICAgaWYoJHVwbG9hZEZpbGUuY2hlY2tGaWxlU2l6ZShmaWxlLGxpbWl0U2l6ZSkpe1xuICAgICAgICAgICAgICAgICAgICAkdXBsb2FkRmlsZS51cGxvYWRQaWMoZmlsZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaIkOWKn+Wbnuiwg1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5LiK5Lyg5oiQ5Yqf77yBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZGF0YSA9IEpTT04ucGFyc2UoZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlQaWNVcmwgPSBkYXRhLmRhdGEuYWNjZXNzX3VybDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZihhY3Rpdml0eVBpY1VybCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNob3dBY3Rpdml0eVBpYyhhY3Rpdml0eVBpY1VybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWksei0peWbnuiwg1xuICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOWksei0pe+8gVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOWbvueJh+mZkOWItuWcqFwiK2xpbWl0U2l6ZStcIk1C5YaF77yBXCIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2V7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5maWxlcylcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cblxuICAgICAgICAvLyDmoLnmja7mmK/lkKbpgInkuobkuJPmoI/liKTlrprmmK/lkKbopoHloavkuIrmnrbml7bpl7RcbiAgICAgICAgJChcIiNwYWNrYWdlX2xpc3RcIikub24oXCJjaGFuZ2VcIixmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZigkKHRoaXMpLmNoaWxkcmVuKFwiOnNlbGVjdGVkXCIpLnZhbCgpKXsgICAgLy8g6YCJ5a6a5LqG5LiT5qCPXG4gICAgICAgICAgICAgICAgJChcIi5hY3Rpdml0eVN0YXJ0VGltZVwiKS5zaG93KCk7XG4gICAgICAgICAgICAgICAgJChcIiNzdGFydF9hdFwiKS52YWwoXCJcIik7XG5cbiAgICAgICAgICAgICAgICBjcmVhdGVBY3Rpdml0eS5pc1NlbGVjdFBhY2thZ2UgPSB0cnVlO1xuICAgICAgICAgICAgICAgICQoXCIjcGF5VGlja2V0VGFibGVXcmFwcGVyXCIpLmFkZENsYXNzKFwiaGlkZVwiKTsgICAvL+WIoOmZpOaUtui0ueelqFxuICAgICAgICAgICAgICAgICQoXCIjcGF5VGlja2V0VGlwXCIpLnJlbW92ZUNsYXNzKFwiaGlkZVwiKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZXtcbiAgICAgICAgICAgICAgICAkKFwiLmFjdGl2aXR5U3RhcnRUaW1lXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKFwiI3N0YXJ0X2F0XCIpLnZhbChcIlwiKTtcblxuICAgICAgICAgICAgICAgIGNyZWF0ZUFjdGl2aXR5LmlzU2VsZWN0UGFja2FnZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICQoXCIjcGF5VGlja2V0VGlwXCIpLmFkZENsYXNzKFwiaGlkZVwiKTtcbiAgICAgICAgICAgICAgICAkKFwiI3BheVRpY2tldFRhYmxlV3JhcHBlclwiKS5yZW1vdmVDbGFzcyhcImhpZGVcIik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWIoOmZpOa0u+WKqOa1t+aKpVxuICAgICAgICAkKFwiI2RlbGV0ZVBpY1wiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaGlkZUFjdGl2aXR5UGljKCk7XG4gICAgICAgICAgICAvLyDmuIXnqbrpgInmi6nvvIzlkKbliJljaGFuZ2XmsqHms5Xnm5HlkKxcbiAgICAgICAgICAgICQoJy51cGxvYWRBY3Rpdml0eVBpYycpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQodGhpcykudmFsKFwiXCIpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgbW9kYWwuaW5pdFRpY2tldEluZm8oKTtcblxuXG4gICAgICAgIC8vIOS/neWtmOaPkOS6pFxuICAgICAgICAkKFwiI3NhdmVBY3Rpdml0eVwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICBpZihzdWJtaXRMaW1pdCl7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LiN6IO96YeN5aSN5o+Q5LqkXCIpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgdmFyIHRpdGxlID0gJC50cmltKCQoXCIjdGl0bGVcIikudmFsKCkpLC8vIOa0u+WKqOWQjeensFxuICAgICAgICAgICAgICAgICAgICBwbGFjZSA9ICQudHJpbSgkKFwiI3BsYWNlXCIpLnZhbCgpKSwvLyDmtLvliqjlnLDngrlcbiAgICAgICAgICAgICAgICAgICAgYWN0aXZpdHlfc3RhcnRfYXQgPSAkLnRyaW0oJChcIiNhY3Rpdml0eV9zdGFydF9hdFwiKS52YWwoKSksLy8g5rS75Yqo5byA5aeL5pe26Ze0XG4gICAgICAgICAgICAgICAgICAgIGFjdGl2aXR5X2VuZF9hdCA9ICQudHJpbSgkKFwiI2FjdGl2aXR5X2VuZF9hdFwiKS52YWwoKSksLy8g5rS75Yqo57uT5p2f5pe26Ze0XG4gICAgICAgICAgICAgICAgICAgIGlzX2RlZmF1bHRfZW5yb2xsX3RpbWUgPSBwYXJzZUludCgkKFwiaW5wdXRbbmFtZT0nY2hvb3NlQWN0aXZpdHlUaW1lJ106Y2hlY2tlZFwiKS52YWwoKSksLy8g5oql5ZCN5pe26Ze06YCJ6aG5XG4gICAgICAgICAgICAgICAgICAgIGVucm9sbF9zdGFydF9hdCwgICAgICAgIC8v5oql5ZCN5byA5aeL5pe26Ze0XG4gICAgICAgICAgICAgICAgICAgIGVucm9sbF9lbmRfYXQ7ICAgICAgICAgIC8vIOaKpeWQjee7k+adn+aXtumXtFxuXG4gICAgICAgICAgICAgICAgaWYoaXNfZGVmYXVsdF9lbnJvbGxfdGltZSkge1xuICAgICAgICAgICAgICAgICAgICBlbnJvbGxfc3RhcnRfYXQgPSAkLnRyaW0oJChcIiNlbnJvbGxfc3RhcnRfYXRcIikudmFsKCkpO1xuICAgICAgICAgICAgICAgICAgICBlbnJvbGxfZW5kX2F0ID0gJC50cmltKCQoXCIjZW5yb2xsX2VuZF9hdFwiKS52YWwoKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgZW5yb2xsX3N0YXJ0X2F0ID0gXCJcIjtcbiAgICAgICAgICAgICAgICAgICAgZW5yb2xsX2VuZF9hdCA9IFwiXCI7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgdmFyIGltZ191cmwgPSAkKFwiI2ltZ191cmxcIikuYXR0cihcInNyY1wiKSB8fCBhY3Rpdml0eVBpY1VybCwvLyDmtLvliqjmtbfmiqVcbiAgICAgICAgICAgICAgICAgICAgYWN0b3JfbnVtID0gcGFyc2VJbnQoJChcIiNhY3Rvcl9udW1cIikudmFsKCkpIHx8IDAsLy8g5rS75Yqo5Lq65pWwXG5cbiAgICAgICAgICAgICAgICAgICAgdWUgPSBVRS5nZXRFZGl0b3IoJ2FjdGl2aXR5RGVzYycpLCAvLyDmtLvliqjor6bmg4VcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JiID0gdWUuZ2V0Q29udGVudCgpLFxuXG4gICAgICAgICAgICAgICAgICAgIGZvcm1fZmllbGQgPSBbICAgICAgICAgICAgICAgICAgLy8g5oql5ZCN6KGo5Y2VXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA6ICflp5PlkI0nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiAyLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkIDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA6IFwiXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZmllbGRfbmFtZSA6ICfmiYvmnLrlj7fnoIEnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGUgOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVpcmVkIDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlciA6IFwiXCIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmVlZF9jb25maXJtIDogMFxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBdO1xuXG4gICAgICAgICAgICAgICAgJChcIiNvdGhlclRhYmxlV3JhcHBlciAuYmFzZUluZm9XcmFwcGVyXCIpLmVhY2goZnVuY3Rpb24gKCkgeyAgICAgLy8g5oql5ZCN6KGo5Y2V5YW25LuW5L+h5oGv55qE5YaF5a65XG4gICAgICAgICAgICAgICAgICAgIHZhciBmb3JtT2JqID0ge30sXG4gICAgICAgICAgICAgICAgICAgICAgICBpbmZvVGFibGVSZXF1aWVkID0gJCh0aGlzKS5maW5kKFwiLmluZm9UYWJsZVJlcXVpZWQ6Y2hlY2tlZFwiKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGluZm9UYWJsZVRpdGxlID0gJCh0aGlzKS5maW5kKFwiLmluZm9UYWJsZVRpdGxlXCIpLmVxKDApLFxuICAgICAgICAgICAgICAgICAgICAgICAgaW5mb1RhYmxlUGxhY2Vob2xkZXIgPSAkKHRoaXMpLmZpbmQoXCIuaW5mb1RhYmxlUGxhY2Vob2xkZXJcIikuZXEoMCk7XG5cbiAgICAgICAgICAgICAgICAgICAgZm9ybU9iai5maWVsZF9uYW1lID0gaW5mb1RhYmxlVGl0bGUudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGZvcm1PYmoudHlwZSA9IHBhcnNlSW50KGluZm9UYWJsZVRpdGxlLmRhdGEoXCJ0eXBlXCIpKTtcbiAgICAgICAgICAgICAgICAgICAgZm9ybU9iai5yZXF1aXJlZCA9IGluZm9UYWJsZVJlcXVpZWQubGVuZ3RoPjAgPyAxIDowO1xuICAgICAgICAgICAgICAgICAgICBmb3JtT2JqLnBsYWNlaG9sZGVyID0gaW5mb1RhYmxlUGxhY2Vob2xkZXIudmFsKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYoJC50cmltKGZvcm1PYmouZmllbGRfbmFtZSkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9ybV9maWVsZC5wdXNoKGZvcm1PYmopO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB2YXIgc3RhcnRfYXQgPSAkLnRyaW0oJChcIiNzdGFydF9hdFwiKS52YWwoKSksICAgICAgICAgICAgICAgIC8vIOS4iuaetuaXtumXtFxuICAgICAgICAgICAgICAgICAgICBpc19jb25maXJtID0gJChcIiNpc19jb25maXJtOmNoZWNrZWRcIikubGVuZ3RoPjAgPyAxIDogMCwgICAvLyDmmK/lkKbpnIDopoHlrqHmoLhcbiAgICAgICAgICAgICAgICAgICAgcGFja2FnZSA9ICQoXCIjcGFja2FnZV9saXN0IG9wdGlvbjpzZWxlY3RlZFwiKSwgICAgICAgICAgIC8vIOaJgOWxnuS4k+agj1xuICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX2lkID0gIHBhY2thZ2UudmFsKCksXG4gICAgICAgICAgICAgICAgICAgIHBhY2thZ2VfbmFtZSA9IHBhY2thZ2VfaWQgPyBwYWNrYWdlLmh0bWwoKSA6IFwiXCI7XG5cbiAgICAgICAgICAgICAgICB2YXIgYWN0aXZpdHlJbmZvID0geyAgICAvLyDmtLvliqjkv6Hmga9cblxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA6IHRpdGxlLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIOa0u+WKqOWQjeensFxuICAgICAgICAgICAgICAgICAgICBwbGFjZSA6IHBsYWNlLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIOa0u+WKqOWcsOeCuVxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eV9zdGFydF9hdCA6IGFjdGl2aXR5X3N0YXJ0X2F0LCAgLy8gICAgIOa0u+WKqOW8gOWni+aXtumXtFxuICAgICAgICAgICAgICAgICAgICBhY3Rpdml0eV9lbmRfYXQgOiBhY3Rpdml0eV9lbmRfYXQsICAgICAgLy8gICAgIOa0u+WKqOe7k+adn+aXtumXtFxuICAgICAgICAgICAgICAgICAgICBpc19kZWZhdWx0X2Vucm9sbF90aW1lIDogaXNfZGVmYXVsdF9lbnJvbGxfdGltZSwgICAgICAgIC8vIOm7mOiupOa0u+WKqOe7k+adn+WJjemDveWPr+S7peaKpeWQjVxuICAgICAgICAgICAgICAgICAgICBlbnJvbGxfc3RhcnRfYXQgOiBlbnJvbGxfc3RhcnRfYXQsICAgICAgICAgICAgICAgICAgICAgIC8vICAgICDmiqXlkI3lvIDlp4vml7bpl7RcbiAgICAgICAgICAgICAgICAgICAgZW5yb2xsX2VuZF9hdCA6IGVucm9sbF9lbmRfYXQsICAgICAgICAgIC8vICAgICDmiqXlkI3nu5PmnZ/ml7bpl7RcbiAgICAgICAgICAgICAgICAgICAgaW1nX3VybCA6IGltZ191cmwsICAgICAgICAgICAgICAgICAgICAgIC8vICAgICDmtLvliqjmtbfmiqVcbiAgICAgICAgICAgICAgICAgICAgYWN0b3JfbnVtIDogYWN0b3JfbnVtLCAgICAgICAgICAgICAgICAgIC8vICAgICDmtLvliqjkurrmlbBcbiAgICAgICAgICAgICAgICAgICAgZGVzY3JiIDogZGVzY3JiLCAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICDmtLvliqjor6bmg4VcbiAgICAgICAgICAgICAgICAgICAgZm9ybV9maWVsZCA6IEpTT04uc3RyaW5naWZ5KGZvcm1fZmllbGQpLC8vICAgICDmiqXlkI3ooajljZVcbiAgICAgICAgICAgICAgICAgICAgc3RhcnRfYXQgOiBzdGFydF9hdCwgICAgICAgICAgICAgICAgICAgIC8vICAgICAg5LiK5p625pe26Ze0XG4gICAgICAgICAgICAgICAgICAgIGlzX2NvbmZpcm0gOiBpc19jb25maXJtICAgICAgICAgICAgICAgICAvLyAgICAgIOaYr+WQpumcgOimgeWuoeaguFxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICBpZihjaGVja0FjdGl2aXR5Rm9ybShhY3Rpdml0eUluZm8pKXsgICAgLy8g5qOA5p+l6KGo5Y2VXG5cbiAgICAgICAgICAgICAgICAgICAgLy8g6YCJ5a6a5LiT5qCP5ZCO5omN6aqM6K+B5LiK5p625pe26Ze0XG4gICAgICAgICAgICAgICAgICAgIGlmKHBhY2thZ2VfaWQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhhY3Rpdml0eUluZm8uc3RhcnRfYXQpKXtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIrmnrbml7bpl7TkuI3og73kuLrnqbrvvIFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGFjdGl2aXR5SW5mby5zdGFydF9hdCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuaetuaXtumXtOagvOW8j+mUmeivr++8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBpZighJGZvcm1DaGVjay5jaGVja1RpbWVPcmRlcihhY3Rpdml0eUluZm8uc3RhcnRfYXQsYWN0aXZpdHlJbmZvLmFjdGl2aXR5X2VuZF9hdCkpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuaetuaXtumXtOimgeWwj+S6jua0u+WKqOe7k+adn+aXtumXtO+8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICAvLyAg5qOA5p+l5piv5ZCm5pyJ5re75Yqg56Wo5YqhXG4gICAgICAgICAgICAgICAgICAgIHZhciB0aWNrZXRDb3VudCA9ICQoXCIucGF5VGlja2V0VGFibGVCb2R5XCIpLmxlbmd0aDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKCEkKFwiI2ZyZWVUaWNrZXRUYWJsZUJvZHlcIikuaGFzQ2xhc3MoXCJoaWRlXCIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRDb3VudCArKztcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBpZiAodGlja2V0Q291bnQgPT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi56Wo56eN5LiN6IO95Li656m677yM6K+35re75Yqg56Wo56eNXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gIOajgOafpeWFjei0ueelqOWKoeeKtuaAgVxuICAgICAgICAgICAgICAgICAgICBpZiAobW9kYWwuZnJlZVRpY2tldEVkaXRTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5YWN6LS556Wo5aSE5LqO57yW6L6R54q25oCBXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIC8vICDkv53lrZjlhY3otLnnpajliqHkv6Hmga9cbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpY2tldFBhcmFtcyA9IG5ldyBBcnJheSgpOyAgICAgICAvL1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghICQoXCIjZnJlZVRpY2tldFRhYmxlQm9keVwiKS5oYXNDbGFzcyhcImhpZGVcIikpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGZyZWVUaWNrZXRJZCA9ICQoXCIjZnJlZVRpY2tldFRhYmxlQm9keVwiKS5kYXRhKFwidGlja2V0X2lkXCIpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZyZWVUaWNrZXROYW1lID0gJChcIiNmcmVlVGlja2V0TmFtZVwiKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcmVlVGlja2V0Q291bnQgPSAkKFwiI2ZyZWVUaWNrZXRDb3VudFwiKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRFeHBsYW5hdGlvbiA9ICQoXCIjdGlja2V0RXhwbGFuYXRpb25BcmVhXCIpLnZhbCgpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzTmVlZENoZWNrID0gJChcIiNpc0ZyZWVUaWNrZXRDaGVja1wiKS5kYXRhKFwiY2hlY2tfc3RhdGVcIik7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBmcmVlVGlja2V0SXRlbSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZCA6IGZyZWVUaWNrZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRfbmFtZSA6IGZyZWVUaWNrZXROYW1lLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tldF9wcmljZSA6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0X2NvdW50IDogZnJlZVRpY2tldENvdW50LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhIDogdGlja2V0RXhwbGFuYXRpb24sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNfbmVlZF9jaGVjayA6IGlzTmVlZENoZWNrLFxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0UGFyYW1zWzBdID0gZnJlZVRpY2tldEl0ZW07XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAoIWNyZWF0ZUFjdGl2aXR5LmlzU2VsZWN0UGFja2FnZSkgeyAgICAgICAgICAgICAgLy/msqHmnInpgInkuK3kuJPmoI8g5oiWIOS8muWRmCDvvIjpopHpgZPvvIlcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICDmo4Dmn6XmlLbotLnnpajliqHkv6Hmga9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtb2RhbC5wYXlUaWNrZXRFZGl0U3RhdGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmlLbotLnnpajlpITkuo7nvJbovpHnirbmgIFcIik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gIOS/neWtmOaUtui0ueelqOWKoeS/oeaBr1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gJChcIi5wYXlUaWNrZXRUYWJsZUJvZHlcIikubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvdW50ID4gMCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5wYXlUaWNrZXRUYWJsZUJvZHlcIikuZWFjaChmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHBheVRpY2tldElkID0gJCh0aGlzKS5hdHRyKFwiaWRcIiksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlUaWNrZXROYW1lID0gJCh0aGlzKS5maW5kKFwiLnBheVRpY2tldE5hbWVcIikudmFsKCksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXlUaWNrZXRDb3VudCA9ICQodGhpcykuZmluZChcIi5wYXlUaWNrZXRDb3VudFwiKS52YWwoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBheVRpY2tldFByaWNlID0gJCh0aGlzKS5maW5kKFwiLnBheVRpY2tldFByaWNlXCIpLnZhbCgpICogMTAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGF5VGlja2V0RXh0cmEgPSAkKHRoaXMpLmZpbmQoXCIucGF5VGlja2V0RXhwbGFuYXRpb25BcmVhXCIpLnZhbCgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwYXlUaWNrZXRJdGVtID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQgOiBwYXlUaWNrZXRJZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tldF9uYW1lIDogcGF5VGlja2V0TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tldF9wcmljZSA6IHBheVRpY2tldFByaWNlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0X2NvdW50IDogcGF5VGlja2V0Q291bnQsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYSA6IHBheVRpY2tldEV4dHJhLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja2V0UGFyYW1zW3RpY2tldFBhcmFtcy5sZW5ndGhdID0gcGF5VGlja2V0SXRlbTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGFsbFBhcmFtcyA9IHsgICAgICAgICAgICAgICAvL+ivt+axguaPkOS6pOWPguaVsFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1zIDogYWN0aXZpdHlJbmZvLFxuICAgICAgICAgICAgICAgICAgICAgICAgcGFja2FnZV9pZCA6IHBhY2thZ2VfaWQsXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX25hbWUgOiBwYWNrYWdlX25hbWUsXG4gICAgICAgICAgICAgICAgICAgICAgICB0aWNrZXRQYXJhbXMgOiB0aWNrZXRQYXJhbXNcbiAgICAgICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgICAgICBzdWJtaXRMaW1pdCA9IHRydWU7ICAgICAvLyDooajljZXmj5DkuqTpmZDliLbmoIforrBcblxuICAgICAgICAgICAgICAgICAgICBpZihjcmVhdGVBY3Rpdml0eS50eXBlID09PSAwKXsgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIOaWsOWinua0u+WKqFxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUFjdGl2aXR5SW5mbyhcIi91cGxvYWRBY3Rpdml0eVwiLCBhbGxQYXJhbXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihjcmVhdGVBY3Rpdml0eS50eXBlID09IDEpeyAgICAgICAgICAgICAgICAgICAgICAgLy8g57yW6L6R5rS75YqoXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGxQYXJhbXMucGFyYW1zLmlkID0gJChcIiNhY3Rpdml0eUlkXCIpLnZhbCgpOyAgICAgICAvLyDnvJbovpHmtLvliqjopoHluKZpZFxuICAgICAgICAgICAgICAgICAgICAgICAgc2F2ZUFjdGl2aXR5SW5mbyhcIi9zYXZlQWN0aXZpdHlcIiwgYWxsUGFyYW1zKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgJChkb2N1bWVudCkuYWpheEVycm9yKGZ1bmN0aW9uKGV2ZW50LCB4aHIsIG9wdCkgeyAgICAgICAgICAgLy8g5o+Q5Lqk6ZSZ6K+v5aSE55CGXG4gICAgICAgICAgICBjb25zb2xlLmluZm8oeGhyLnN0YXR1cywgeGhyLnN0YXR1c1RleHQpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihvcHQpO1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi572R57uc6ZSZ6K+v77yM5pON5L2c5aSx6LSlIVwiKTtcbiAgICAgICAgICAgIHN1Ym1pdExpbWl0ID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHNhdmVBY3Rpdml0eUluZm8odXJsLCBhbGxQYXJhbXMpIHtcbiAgICAgICAgY29uc29sZS5sb2coYWxsUGFyYW1zKTtcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgJC5wb3N0KHVybCwgYWxsUGFyYW1zLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYocGFyc2VJbnQoZGF0YS5jb2RlKSA9PT0gMCl7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5L+d5a2Y5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYWN0aXZpdHlNYW5hZ2UnXG4gICAgICAgICAgICAgICAgfSw3MDApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XG4gICAgICAgICAgICAgICAgc3VibWl0TGltaXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICAvLyDmo4Dmn6Xmj5DkuqTooajljZVcbiAgICBmdW5jdGlvbiBjaGVja0FjdGl2aXR5Rm9ybShpbmZvKSB7XG4gICAgICAgIGlmKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby50aXRsZSkpe1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5rS75Yqo5ZCN56ew5LiN6IO95Li656m677yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnBsYWNlKSl7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmtLvliqjlnLDngrnkuI3og73kuLrnqbrvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZigkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uYWN0aXZpdHlfc3RhcnRfYXQpKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIua0u+WKqOW8gOWni+aXtumXtOS4jeiDveS4uuepuu+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLmFjdGl2aXR5X3N0YXJ0X2F0KSl7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmtLvliqjlvIDlp4vml7bpl7TmoLzlvI/plJnor6/vvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZigkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uYWN0aXZpdHlfZW5kX2F0KSl7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmtLvliqjnu5PmnZ/ml7bpl7TkuI3og73kuLrnqbrvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZighJGZvcm1DaGVjay5jaGVja1RpbWUoaW5mby5hY3Rpdml0eV9lbmRfYXQpKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIua0u+WKqOe7k+adn+aXtumXtOagvOW8j+mUmeivr++8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCEkZm9ybUNoZWNrLmNoZWNrVGltZU9yZGVyKGluZm8uYWN0aXZpdHlfc3RhcnRfYXQsaW5mby5hY3Rpdml0eV9lbmRfYXQpKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIua0u+WKqOe7k+adn+aXtumXtOimgeWkp+S6jua0u+WKqOW8gOWni+aXtumXtO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWmguaenOaYr+iHquWumuS5ieaXtumXtFxuICAgICAgICBjb25zb2xlLmxvZyhpbmZvLmlzX2RlZmF1bHRfZW5yb2xsX3RpbWUpO1xuICAgICAgICBpZihpbmZvLmlzX2RlZmF1bHRfZW5yb2xsX3RpbWUgPT09IDEgKXtcbiAgICAgICAgICAgIGlmKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5lbnJvbGxfc3RhcnRfYXQpKXtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmiqXlkI3lvIDlp4vml7bpl7TkuI3og73kuLrnqbrvvIFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8uZW5yb2xsX3N0YXJ0X2F0KSl7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oql5ZCN5byA5aeL5pe26Ze05qC85byP6ZSZ6K+v77yBXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5lbnJvbGxfZW5kX2F0KSl7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oql5ZCN57uT5p2f5pe26Ze05LiN6IO95Li656m677yBXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLmVucm9sbF9lbmRfYXQpKXtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmiqXlkI3nu5PmnZ/moLzlvI/plJnor6/vvIFcIik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoISRmb3JtQ2hlY2suY2hlY2tUaW1lT3JkZXIoaW5mby5lbnJvbGxfc3RhcnRfYXQsaW5mby5lbnJvbGxfZW5kX2F0KSl7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oql5ZCN57uT5p2f5pe26Ze06KaB5aSn5LqO5oql5ZCN5byA5aeL5pe26Ze077yBXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZihpc05hTihpbmZvLmFjdG9yX251bSl8fGluZm8uYWN0b3JfbnVtPDApe1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35aGr5YaZ5q2j56Gu55qE5rS75Yqo5Lq65pWw77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIC8vIOaYvuekuua0u+WKqOWbvueJh1xuICAgIGZ1bmN0aW9uIHNob3dBY3Rpdml0eVBpYyh1cmwpIHtcbiAgICAgICAgaWYodXJsKXtcbiAgICAgICAgICAgICQoXCIjaW1nX3VybFwiKS5hdHRyKFwic3JjXCIsdXJsKS5zaG93KCk7XG4gICAgICAgICAgICAkKFwiLm5vUGljUHJldmlld1wiKS5oaWRlKCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyDpmpDol4/lubbliKDpmaTmtLvliqjlm77niYdcbiAgICBmdW5jdGlvbiBoaWRlQWN0aXZpdHlQaWMoKSB7XG4gICAgICAgICQoXCIjaW1nX3VybFwiKS5hdHRyKFwic3JjXCIsXCJcIikuaGlkZSgpO1xuICAgICAgICAkKFwiLm5vUGljUHJldmlld1wiKS5zaG93KCk7XG4gICAgICAgIGFjdGl2aXR5UGljVXJsID0gXCJcIjtcbiAgICB9XG5cbiAgICByZXR1cm4gY3JlYXRlQWN0aXZpdHk7XG5cbn0pKCk7XG5cbnZhciBtb2RhbCA9IChmdW5jdGlvbiAoKSB7XG5cbiAgICB2YXIgbW9kYWwgPSB7fTtcblxuICAgIG1vZGFsLmZyZWVUaWNrZXRFZGl0U3RhdGUgPSBmYWxzZTsgICAgICAvL+WFjei0ueelqOe8lui+keeKtuaAgVxuXG4gICAgbW9kYWwucGF5VGlja2V0RWRpdFN0YXRlID0gZmFsc2U7ICAgLy/ku5jotLnnpajliJfooajnvJbovpHnirbmgIHvvIwgdHJ1ZSAtIOacieelqOWkhOS6jue8lui+keeKtuaAge+8jGZhbHNlIC0g5rKh5pyJ56Wo5aSE5LqO57yW6L6R54q25oCBXG4gICAgbW9kYWwuZWRpdGVkUGF5VGlja2V0TmFtZSA9IFwiXCI7ICAgLy/nvJbovpHnirbmgIHku5jotLnnpajlkI3np7DvvIxcbiAgICBtb2RhbC5lZGl0UGF5VGlja2V0RG9tID0gJycgICAgICAgICAvL++8jOe8lui+keeKtuaAgeeahOiKgueCuSA8Y2xhc3M9J2VkaXRQYXlUaWNrZXQnPlxuXG4gICAgbW9kYWwuaW5pdFRpY2tldEluZm8gPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqIOWkhOeQhuWFjei0ueelqCAtIHN0YXJ0ICoqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAgICAgLy8g5re75Yqg5YWN6LS556Wo56eNXG4gICAgICAgICQoXCIjbmV3RnJlZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKFwiI2ZyZWVUaWNrZXRUYWJsZUJvZHlcIikucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgICAgICAgJChcIiNmcmVlVGlja2V0RGVzY1wiKS5yZW1vdmVDbGFzcyhcImhpZGVcIik7XG4gICAgICAgICAgICAkKFwiI25ld0ZyZWVcIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xuXG4gICAgICAgICAgICBjaGFuZ2VGcmVlVGlja2V0U3RhdGUoMCk7XG4gICAgICAgIH0pO1xuICAgICAgICAvLyDliKDpmaTlhY3otLnnpajnp41cbiAgICAgICAgJChcIiNkZWxldGVGcmVlVGlja2V0XCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIjbmV3RnJlZVwiKS5yZW1vdmVDbGFzcyhcImhpZGVcIik7XG4gICAgICAgICAgICAkKFwiI2ZyZWVUaWNrZXRUYWJsZUJvZHlcIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgICAgICAgJChcIiNmcmVlVGlja2V0VGFibGVCb2R5XCIpLmRhdGEoXCJ0aWNrZXRfaWRcIiAsXCJcIik7XG4gICAgICAgICAgICAkKFwiaW5wdXQuZnJlZVRpY2tldEl0ZW1cIikudmFsKFwiXCIpO1xuICAgICAgICAgICAgJChcIiN0aWNrZXRFeHBsYW5hdGlvbkFyZWFcIikudmFsKFwiXCIpO1xuICAgICAgICAgICAgJChcImlucHV0I2lzRnJlZVRpY2tldENoZWNrXCIpLnJlbW92ZUF0dHIoXCJjaGVja2VkXCIpO1xuICAgICAgICAgICAgbW9kYWwuZnJlZVRpY2tldEVkaXRTdGF0ZSA9IGZhbHNlO1xuXG4gICAgICAgIH0pO1xuICAgICAgICAvLyDnvJbovpEv5L+d5a2Y5YWN6LS556Wo56eNXG4gICAgICAgICQoXCIjZWRpdEZyZWVUaWNrZXRcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKG1vZGFsLmZyZWVUaWNrZXRFZGl0U3RhdGUpIHsgICAgIC8vICDnva7kuLrkv53lrZjnirbmgIFcbiAgICAgICAgICAgICAgICB2YXIgZnJlZVRpY2tldE5hbWUgPSAgJChcIiNmcmVlVGlja2V0TmFtZVwiKS52YWwoKTtcbiAgICAgICAgICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhmcmVlVGlja2V0TmFtZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi56Wo56eN5ZCN56ew5LiN6IO95Li656m677yM6K+36YeN5paw6L6T5YWlXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBmcmVlVGlja2V0Q291bnQgPSAgJChcIiNmcmVlVGlja2V0Q291bnRcIikudmFsKCk7XG4gICAgICAgICAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoZnJlZVRpY2tldENvdW50KSkge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fovpPlhaXmraPnoa7nmoTlhY3otLnnpajmlbDph49cIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmlzTnVtUG9zaXRpdmVBbmRJbnRlZ2VyKGZyZWVUaWNrZXRDb3VudCkpIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+36L6T5YWl5q2j56Gu55qE5YWN6LS556Wo5pWw6YePXCIpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBmcmVlVGlja2V0RXh0cmEgPSAkKFwiI3RpY2tldEV4cGxhbmF0aW9uQXJlYVwiKS52YWwoKTtcbiAgICAgICAgICAgICAgICBpZiAoZnJlZVRpY2tldEV4dHJhLmxlbmd0aCA+IDE5OCkge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnpajnp43or7TmmI7lrZfmlbDkuI3og73otoXov4cxOTjkuKrlrZfnrKZcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hhbmdlRnJlZVRpY2tldFN0YXRlKDEpO1xuXG4gICAgICAgICAgICB9IGVsc2UgeyAgICAvLyAg572u5Li657yW6L6R54q25oCBXG4gICAgICAgICAgICAgICAgaWYgKG1vZGFsLnBheVRpY2tldEVkaXRTdGF0ZSkge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmlLbotLnnpajlpITkuo7nvJbovpHnirbmgIHvvIzor7flhYjkv53lrZjmlLbotLnnpahcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY2hhbmdlRnJlZVRpY2tldFN0YXRlKDApO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vICDmmK/lkKblrqHmoLjlhY3otLnnpahcbiAgICAgICAgJChcImlucHV0I2lzRnJlZVRpY2tldENoZWNrXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBzdGF0ZSA9ICQoXCJpbnB1dCNpc0ZyZWVUaWNrZXRDaGVja1wiKS5kYXRhKFwiY2hlY2tfc3RhdGVcIik7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT0gXCIxXCIpIHtcbiAgICAgICAgICAgICAgICAkKFwiaW5wdXQjaXNGcmVlVGlja2V0Q2hlY2tcIikuZGF0YShcImNoZWNrX3N0YXRlXCIsIFwiMFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCJpbnB1dCNpc0ZyZWVUaWNrZXRDaGVja1wiKS5kYXRhKFwiY2hlY2tfc3RhdGVcIiwgXCIxXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9KTtcblxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKiog5aSE55CG5YWN6LS556WoIC0gZW5kICoqKioqKioqKioqKioqKioqKioqKioqKiovXG5cbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqIOWkhOeQhuaUtui0ueelqCAtIHN0YXJ0ICoqKioqKioqKioqKioqKioqKioqKioqKiovXG4gICAgICAgIC8vIOa3u+WKoOaUtui0ueelqOenjVxuICAgICAgICAkKFwiI25ld1BheVRpY2tldFwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAobW9kYWwucGF5VGlja2V0RWRpdFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwiW1wiICsgbW9kYWwuZWRpdGVkUGF5VGlja2V0TmFtZSArIFwiXeWkhOS6jue8lui+keeKtuaAge+8jOivt+WFiOS/neWtmFwiKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBtb2RhbC5wYXlUaWNrZXRFZGl0U3RhdGUgPSB0cnVlO1xuICAgICAgICAgICAgbW9kYWwuZWRpdGVkUGF5VGlja2V0TmFtZSA9IFwi5paw5bu65pS26LS556WoXCI7XG5cbiAgICAgICAgICAgIHZhciAkcGF5VGlja2V0TGlzdCA9ICQoXCIjcGF5VGlja2V0Qm9keVdyYXBwZXJcIikuY2hpbGRyZW4oXCIucGF5VGlja2V0VGFibGVCb2R5XCIpO1xuICAgICAgICAgICAgJChcIiNwYXlUaWNrZXRCb2R5V3JhcHBlclwiKS5hcHBlbmQoZ2V0UGF5VGlja2V0Qm9keSgkcGF5VGlja2V0TGlzdC5sZW5ndGgpKTtcblxuICAgICAgICAgICAgbW9kYWwuZWRpdFBheVRpY2tldERvbSA9ICRwYXlUaWNrZXRMaXN0LmVxKCRwYXlUaWNrZXRMaXN0Lmxlbmd0aCkuZmluZChcIi5lZGl0UGF5VGlja2V0XCIpO1xuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOe8lui+kS/kv53lrZjmlLbotLnnpajnp41cbiAgICAgICAgJChcIiNwYXlUaWNrZXRCb2R5V3JhcHBlclwiKS5vbihcImNsaWNrXCIsIFwiLmVkaXRQYXlUaWNrZXRcIiwgZnVuY3Rpb24gKGUpIHtcblxuICAgICAgICAgICAgdmFyICR0aGlzID0gJChlLnRhcmdldCksXG4gICAgICAgICAgICAgICAgaWQgPSAkdGhpcy5hdHRyKFwiaWRcIik7XG5cbiAgICAgICAgICAgIGlmICgkdGhpcy5hdHRyKFwiZWRpdF9zdGF0ZVwiKSA9PSAxKSB7Ly/nva7kuLrnvJbovpHnirbmgIFcblxuICAgICAgICAgICAgICAgIGlmIChtb2RhbC5mcmVlVGlja2V0RWRpdFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuWFjei0ueelqOWkhOS6jue8lui+keeKtuaAge+8jOivt+WFiOS/neWtmOWFjei0ueelqFwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpZiAobW9kYWwucGF5VGlja2V0RWRpdFN0YXRlKSB7XG4gICAgICAgICAgICAgICAgICAgICQuYWxlcnQoXCJbXCIgKyBtb2RhbC5lZGl0ZWRQYXlUaWNrZXROYW1lICsgXCJd5aSE5LqO57yW6L6R54q25oCBLOaYr+WQpui/m+ihjOS/neWtmD9cIiwgXCJpbmZvXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMyxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtb2RhbC5lZGl0UGF5VGlja2V0RG9tLmNsaWNrKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIG1vZGFsLnBheVRpY2tldEVkaXRTdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAgICAgdmFyIHBheVRpY2tldE5hbWUgPSAkdGhpcy5wYXJlbnRzKFwiI3BheVRpY2tldE9wZXJhdGVcIikucHJldkFsbChcIi5wYXlUaWNrZXROYW1lXCIpLnZhbCgpO1xuICAgICAgICAgICAgICAgIG1vZGFsLmVkaXRlZFBheVRpY2tldE5hbWUgPSBwYXlUaWNrZXROYW1lO1xuICAgICAgICAgICAgICAgIG1vZGFsLmVkaXRQYXlUaWNrZXREb20gPSAkdGhpcztcblxuICAgICAgICAgICAgICAgIGNoYW5nZVBheVRpY2tldFN0YXRlKCR0aGlzLCAwKTtcblxuICAgICAgICAgICAgfSBlbHNlIHsvL+e9ruS4uuS/neWtmOeKtuaAgVxuXG4gICAgICAgICAgICAgICAgdmFyIHBheVRpY2tldE5hbWUgPSAgJC50cmltKCR0aGlzLnBhcmVudHMoXCIjcGF5VGlja2V0T3BlcmF0ZVwiKS5wcmV2QWxsKFwiLnBheVRpY2tldE5hbWVcIikudmFsKCkpO1xuICAgICAgICAgICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKHBheVRpY2tldE5hbWUpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuelqOenjeWQjeensOS4jeiDveS4uuepuu+8jOivt+mHjeaWsOi+k+WFpVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBwYXlUaWNrZXRDb3VudCA9ICAkLnRyaW0oJHRoaXMucGFyZW50cyhcIiNwYXlUaWNrZXRPcGVyYXRlXCIpLnByZXZBbGwoXCIucGF5VGlja2V0Q291bnRcIikudmFsKCkpO1xuICAgICAgICAgICAgICAgIGlmICghICRmb3JtQ2hlY2suaXNOdW1Qb3NpdGl2ZUFuZEludGVnZXIocGF5VGlja2V0Q291bnQpKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuelqOaVsOW6lOWkp+S6jjDvvIzkuJTkuI3og73kuLrnqbrvvIzor7fph43mlrDovpPlhaVcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcGF5VGlja2V0UHJpY2UgPSAgJC50cmltKCR0aGlzLnBhcmVudHMoXCIjcGF5VGlja2V0T3BlcmF0ZVwiKS5wcmV2QWxsKFwiLnBheVRpY2tldFByaWNlXCIpLnZhbCgpKSAqIDEwMDsgICAgLy8gIOWNleS9je+8muWIhlxuICAgICAgICAgICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKHBheVRpY2tldFByaWNlKSB8fCBwYXlUaWNrZXRQcmljZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuelqOS7t+S4jeWPr+S4uuepuuS4lOW/hemhu+Wkp+S6jjDvvIzor7fph43mlrDovpPlhaVcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHBheVRpY2tldFByaWNlID4gYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKiAxMDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Lu35qC85LiN6IO95aSn5LqOIFwiICsgYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKyBcIiDlhYNcIik7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB2YXIgcGF5VGlja2V0RXh0cmEgPSAkdGhpcy5wYXJlbnRzKFwiLnBheVRpY2tldFRhYmxlQm9keVwiKS5maW5kKFwiLnBheVRpY2tldEV4cGxhbmF0aW9uQXJlYVwiKS52YWwoKTtcbiAgICAgICAgICAgICAgICBpZiAocGF5VGlja2V0RXh0cmEubGVuZ3RoID4gMTk4KSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuelqOenjeivtOaYjuWtl+aVsOS4jeiDvei2hei/hzE5OOS4quWtl+esplwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZhciBpc05hbWVFeGlzdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgICQoXCJpbnB1dC5wYXlUaWNrZXROYW1lXCIpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaWQgIT0gJCh0aGlzKS5kYXRhKFwiaW5kZXhcIikgJiYgcGF5VGlja2V0TmFtZSA9PSAkLnRyaW0oJCh0aGlzKS52YWwoKSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlzTmFtZUV4aXN0ID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaWYgKGlzTmFtZUV4aXN0KSB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuelqOenjeWQjeensOW3suWtmOWcqO+8jOivt+mHjeaWsOi+k+WFpVwiKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIG1vZGFsLnBheVRpY2tldEVkaXRTdGF0ZSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIG1vZGFsLmVkaXRlZFBheVRpY2tldE5hbWUgPSBcIuaWsOW7uuaUtui0ueelqFwiO1xuXG4gICAgICAgICAgICAgICAgY2hhbmdlUGF5VGlja2V0U3RhdGUoJHRoaXMsIDEpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8v5Yig6Zmk5pS26LS556WoXG4gICAgICAgICQoXCIjcGF5VGlja2V0Qm9keVdyYXBwZXJcIikub24oXCJjbGlja1wiLCBcIi5kZWxldGVQYXlUaWNrZXRcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQoZS50YXJnZXQpO1xuICAgICAgICAgICAgdmFyIGVkaXRfc3RhdGUgPSAkdGhpcy5wcmV2KFwiLmVkaXRQYXlUaWNrZXRcIikuYXR0cihcImVkaXRfc3RhdGVcIik7XG4gICAgICAgICAgICBpZiAoZWRpdF9zdGF0ZSA9PSAwKSB7XG4gICAgICAgICAgICAgICAgbW9kYWwucGF5VGlja2V0RWRpdFN0YXRlID0gZmFsc2U7XG4gICAgICAgICAgICAgICAgbW9kYWwuZWRpdGVkUGF5VGlja2V0TmFtZSA9IFwi5paw5bu65pS26LS556WoXCI7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAkdGhpcy5wYXJlbnRzKFwiLnBheVRpY2tldFRhYmxlQm9keVwiKS5yZW1vdmUoKTtcblxuICAgICAgICB9KTtcblxuXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKiDlpITnkIbmlLbotLnnpaggLSBlbmQgKioqKioqKioqKioqKioqKioqKioqKioqKi9cbiAgICB9O1xuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIHN0YXRlIDAt572u5Li657yW6L6R54q25oCBLCAxLee9ruS4uuS/neWtmOeKtuaAgVxuICAgICAqL1xuICAgIGZ1bmN0aW9uIGNoYW5nZUZyZWVUaWNrZXRTdGF0ZShzdGF0ZSkge1xuICAgICAgICBpZiAoc3RhdGUgPT0gMCkge1xuICAgICAgICAgICAgbW9kYWwuZnJlZVRpY2tldEVkaXRTdGF0ZSA9IHRydWU7XG4gICAgICAgICAgICAkKFwiI2VkaXRGcmVlVGlja2V0XCIpLmF0dHIoXCJlZGl0X3N0YXRlXCIsIDApO1xuICAgICAgICAgICAgJChcIiNlZGl0RnJlZVRpY2tldFwiKS5odG1sKFwi5L+d5a2Y5q2k56WoXCIpO1xuICAgICAgICAgICAgJChcIi5mcmVlVGlja2V0SXRlbVwiKS5yZW1vdmVBdHRyKFwicmVhZE9ubHlcIik7XG4gICAgICAgICAgICAkKFwiLmZyZWVUaWNrZXRJdGVtXCIpLmNzcyhcImJvcmRlclwiLCBcIjFweCBzb2xpZCAjZGNkY2RjXCIpO1xuICAgICAgICAgICAgJChcIi5mcmVlVGlja2V0RGVzY1wiKS5yZW1vdmVDbGFzcyhcImhpZGVcIik7XG5cbiAgICAgICAgfSBlbHNlICB7XG4gICAgICAgICAgICBtb2RhbC5mcmVlVGlja2V0RWRpdFN0YXRlID0gZmFsc2U7XG4gICAgICAgICAgICAkKFwiI2VkaXRGcmVlVGlja2V0XCIpLmF0dHIoXCJlZGl0X3N0YXRlXCIsIDEpO1xuICAgICAgICAgICAgJChcIiNlZGl0RnJlZVRpY2tldFwiKS5odG1sKFwi57yW6L6R5q2k56WoXCIpO1xuICAgICAgICAgICAgJChcIi5mcmVlVGlja2V0SXRlbVwiKS5hdHRyKFwicmVhZE9ubHlcIiwgXCJ0cnVlXCIpO1xuICAgICAgICAgICAgJChcIi5mcmVlVGlja2V0SXRlbVwiKS5jc3MoXCJib3JkZXJcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgJChcIi5mcmVlVGlja2V0RGVzY1wiKS5hZGRDbGFzcyhcImhpZGVcIik7XG5cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNoYW5nZVBheVRpY2tldFN0YXRlKGN1cnJlbnREb20sIHN0YXRlKSB7XG5cbiAgICAgICAgaWYgKHN0YXRlID09IDApIHsgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+e9ruS4uue8lui+keeKtuaAgVxuICAgICAgICAgICAgY3VycmVudERvbS5hdHRyKFwiZWRpdF9zdGF0ZVwiLCAwKTtcbiAgICAgICAgICAgIGN1cnJlbnREb20uaHRtbChcIuS/neWtmOatpOelqFwiKTtcbiAgICAgICAgICAgIGN1cnJlbnREb20ucGFyZW50cyhcIiNwYXlUaWNrZXRPcGVyYXRlXCIpLnByZXZBbGwoXCIucGF5VGlja2V0SXRlbVwiKS5yZW1vdmVBdHRyKFwicmVhZE9ubHlcIik7XG4gICAgICAgICAgICBjdXJyZW50RG9tLnBhcmVudHMoXCIjcGF5VGlja2V0T3BlcmF0ZVwiKS5wcmV2QWxsKFwiLnBheVRpY2tldEl0ZW1cIikuY3NzKFwiYm9yZGVyXCIsIFwiMXB4IHNvbGlkICNkY2RjZGNcIik7XG4gICAgICAgICAgICBjdXJyZW50RG9tLnBhcmVudHMoXCIucGF5VGlja2V0SW5mb1wiKS5uZXh0KFwiLnBheVRpY2tldERlc2NcIikucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpO1xuXG4gICAgICAgIH0gZWxzZSAgeyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nva7kuLrkv53lrZjnirbmgIFcbiAgICAgICAgICAgIGN1cnJlbnREb20uYXR0cihcImVkaXRfc3RhdGVcIiwgMSk7XG4gICAgICAgICAgICBjdXJyZW50RG9tLmh0bWwoXCLnvJbovpHmraTnpahcIik7XG4gICAgICAgICAgICBjdXJyZW50RG9tLnBhcmVudHMoXCIjcGF5VGlja2V0T3BlcmF0ZVwiKS5wcmV2QWxsKFwiLnBheVRpY2tldEl0ZW1cIikuYXR0cihcInJlYWRPbmx5XCIsIFwidHJ1ZVwiKTtcbiAgICAgICAgICAgIGN1cnJlbnREb20ucGFyZW50cyhcIiNwYXlUaWNrZXRPcGVyYXRlXCIpLnByZXZBbGwoXCIucGF5VGlja2V0SXRlbVwiKS5jc3MoXCJib3JkZXJcIiwgXCJub25lXCIpO1xuICAgICAgICAgICAgY3VycmVudERvbS5wYXJlbnRzKFwiLnBheVRpY2tldEluZm9cIikubmV4dChcIi5wYXlUaWNrZXREZXNjXCIpLmFkZENsYXNzKFwiaGlkZVwiKTtcblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZ2V0UGF5VGlja2V0Qm9keShpbmRleCkge1xuICAgICAgICB2YXIgcGF5VGlja2V0Qm9keSA9XG4gICAgICAgICAgICAnPGxpIGNsYXNzPVwicGF5VGlja2V0VGFibGVCb2R5XCIgaWQ9XCJcIj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInBheVRpY2tldEluZm9cIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCBjbGFzcz1cInBheVRpY2tldEl0ZW0gaW5wdXREZWZhdWx0IHBheVRpY2tldE5hbWVcIiBkYXRhLWluZGV4PVwiJyArIGluZGV4ICsgJ1wiIHBsYWNlaG9sZGVyPVwidmlw56WoXCIgLz4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCBjbGFzcz1cInBheVRpY2tldEl0ZW0gaW5wdXREZWZhdWx0IHBheVRpY2tldENvdW50XCIgdHlwZT1cInRleHRcIiBwbGFjZWhvbGRlcj1cIjAo5LiN6ZmQKVwiIC8+JyArXG4gICAgICAgICAgICAgICAgICAgICc8aW5wdXQgY2xhc3M9XCJwYXlUaWNrZXRJdGVtIGlucHV0RGVmYXVsdCBwYXlUaWNrZXRQcmljZVwiIHR5cGU9XCJudW1iZXJcIiBwbGFjZWhvbGRlcj1cIuivt+i+k+WFpeS7t+agvFwiIC8+JyArXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwidGlja2V0SXRlbVwiIGlkPVwicGF5VGlja2V0T3BlcmF0ZVwiPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0b29sQm94XCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzx1bD4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxsaSBjbGFzcz1cImVkaXRQYXlUaWNrZXRcIiBlZGl0X3N0YXRlPVwiMFwiIGlkPVwiJyArIGluZGV4ICsgJ1wiID7kv53lrZjmraTnpag8L2xpPicgK1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxpIGNsYXNzPVwiZGVsZXRlUGF5VGlja2V0XCI+5Yig6Zmk5q2k56WoPC9saT4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPC91bD4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInBheVRpY2tldERlc2NcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ0aWNrZXRFeHBsYW5hdGlvbldyYXBwZXJcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cInRpY2tldEV4cGxhbmF0aW9uXCI+56Wo56eN6K+05piOKOmAieWhqyk8L3NwYW4+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHRleHRhcmVhIGNsYXNzPVwicGF5VGlja2V0RXhwbGFuYXRpb25BcmVhIHRpY2tldFRleHRBcmVhXCIgcGxhY2Vob2xkZXI9XCLmgqjlj6/ku6XlnKjov5nph4zor7TmmI7mraTnpajnmoTnibnngrlcIj48L3RleHRhcmVhPicgK1xuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JyArXG4gICAgICAgICAgICAgICAgJzwvZGl2PicgK1xuICAgICAgICAgICAgJzwvbGk+JztcblxuICAgICAgICByZXR1cm4gcGF5VGlja2V0Qm9keTtcblxuICAgIH1cblxuICAgIHJldHVybiBtb2RhbDtcblxufSkoKTtcbiJdfQ==
