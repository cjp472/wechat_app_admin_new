(function(i,e,t,s){e(function(){new n});function n(i){this.options=i||{};this.app_id=e("#app_id").val();this.pay_verify=e("#pay_verify").val();this.is_update=e("#is_update").val();this.change=GetQueryString("change");this.init()}n.prototype={init:function(){var i=this;this.authHandle();if(this.pay_verify==0){if(this.is_update==0){e("#updateBindBtn").click(function(){e.get("/mini/updateBind",function(i){if(i.code==0){reloadPage()}else{console.error(i.msg);reloadPage()}},"json")})}else{e("#experUrlCode").attr("src",miniexperUrl+this.app_id);var t=new QRCode(document.getElementById("H5UrlCode"),{text:e("#H5Url").val(),width:135,height:135,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H});e("#screenBtn").click(function(){e.post("/mini/userCheck",function(i){console.log(i);if(i.code==0){e.alert("用户验证成功，您的小程序即将提交微信审核，请耐心等待!","success",{title:"验证成功",btn:2,onOk:function(){window.location.reload()}})}else{console.error(i.msg);e.alert("用户验证失败，请确认您关联至开放平台的小程序和服务号与授权信息一致。或者请重新使用管理员微信扫描两个二维码。确认无误仍无法验证成功，请联系产品鹅微信：chanpine2","error",{title:"",btn:2})}},"json")})}}else{if(this.change==1){this.editInfo()}}e("#editImg").click(this.editInfo.bind(this));e("#saveMer").click(this.saveMer.bind(this));e(".reAudit").click(this.reSubmitAudit.bind(this))},authHandle:function(){var i=this.app_id;e("#reAuth").click(t);e("#bindSuccess").click(function(){window.location.reload()});e("#bindFail").click(t);function t(){var t=window.open("","_blank");e.post("/mini/authority ",{app_id:i,reAuth:1},function(s){if(s.code==0){t.location.href=miniauthUrl+i;e("#bindModal").modal("show")}else{baseUtils.show.redTip("系统繁忙")}},"json")}},editInfo:function(){e("#setMiniInfo input").prop("disabled",false).removeClass("disEdit");e("#saveMer").parent().removeClass("hide")},editsuccess:function(){e("#setMiniInfo input").prop("disabled",true).addClass("disEdit");e("#saveMer").parent().addClass("hide");if(e("#editImg").hasClass("hide")){e("#editImg").removeClass("hide")}if(!e("#pay_set_hint").hasClass("hide")){e("#pay_set_hint").addClass("hide")}e.alert("小程序正在开发中，等待提交审核，约1个工作日，请耐心等待","success",{title:"设置成功",btn:2})},saveMer:function(){var i=e.trim(e("#wx_mchid").val()),t=e.trim(e("#wx_mchkey").val()),s=this;if(i==""){baseUtils.show.redTip("商户号不能为空");return false}if(t==""){baseUtils.show.redTip("API密钥不能为空");return false}e.post("/mini/merchant",{wx_mchid:i,wx_mchkey:t},function(i){if(i.code==0){s.editsuccess()}else{baseUtils.show.redTip(i.msg)}},"json")},reSubmitAudit:function(){var i=e("#app_id").val();e.alert("请确认已按照审核失败原因进行修改并重新提交审核!","info",{title:"",btn:3,oktext:"提交审核",onOk:function(){e.post("/mini/resubmitAudit ",{app_id:i},function(i){if(i.code==0){baseUtils.show.blueTip("提交审核成功");window.location.reload()}else{baseUtils.show.redTip("提交审核失败")}},"json")}})}}})(window,window.$,document);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImluZm8uanMiXSwibmFtZXMiOlsid2luIiwiJCIsImRvYyIsInVuZGVmaW5lZCIsIlBlcnNvbiIsIm9wdGlvbnMiLCJ0aGlzIiwiYXBwX2lkIiwidmFsIiwicGF5X3ZlcmlmeSIsImlzX3VwZGF0ZSIsImNoYW5nZSIsIkdldFF1ZXJ5U3RyaW5nIiwiaW5pdCIsInByb3RvdHlwZSIsInNlbGYiLCJhdXRoSGFuZGxlIiwiY2xpY2siLCJnZXQiLCJqc29uIiwiY29kZSIsInJlbG9hZFBhZ2UiLCJjb25zb2xlIiwiZXJyb3IiLCJtc2ciLCJhdHRyIiwibWluaWV4cGVyVXJsIiwicXJjb2RlIiwiUVJDb2RlIiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsInRleHQiLCJ3aWR0aCIsImhlaWdodCIsImNvbG9yRGFyayIsImNvbG9yTGlnaHQiLCJjb3JyZWN0TGV2ZWwiLCJDb3JyZWN0TGV2ZWwiLCJIIiwicG9zdCIsImxvZyIsImFsZXJ0IiwidGl0bGUiLCJidG4iLCJvbk9rIiwid2luZG93IiwibG9jYXRpb24iLCJyZWxvYWQiLCJlZGl0SW5mbyIsImJpbmQiLCJzYXZlTWVyIiwicmVTdWJtaXRBdWRpdCIsInNob3dOZXdXaW4iLCJuZXdXaW4iLCJvcGVuIiwicmVBdXRoIiwiaHJlZiIsIm1pbmlhdXRoVXJsIiwibW9kYWwiLCJiYXNlVXRpbHMiLCJzaG93IiwicmVkVGlwIiwicHJvcCIsInJlbW92ZUNsYXNzIiwicGFyZW50IiwiZWRpdHN1Y2Nlc3MiLCJhZGRDbGFzcyIsImhhc0NsYXNzIiwid3hfbWNoaWQiLCJ0cmltIiwid3hfbWNoa2V5Iiwib2t0ZXh0IiwiYmx1ZVRpcCJdLCJtYXBwaW5ncyI6IkNBQUEsU0FBV0EsRUFBS0MsRUFBR0MsRUFBS0MsR0FDcEJGLEVBQUUsV0FDRSxHQUFJRyxJQUlSLFNBQVNBLEdBQU9DLEdBQ1pDLEtBQUtELFFBQVVBLEtBQ2ZDLE1BQUtDLE9BQVNOLEVBQUUsV0FBV08sS0FDM0JGLE1BQUtHLFdBQWFSLEVBQUUsZUFB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QUtDLE9BQU8sVUFDdEIsT0FBTyxPQUVYLEdBQUlTLEdBQWEsR0FBSSxDQUNqQlgsVUFBVUMsS0FBS0MsT0FBTyxZQUN0QixPQUFPLE9BRVg1RCxFQUFFc0MsS0FBSyxrQkFDSDZCLFNBQVVBLEVBQ1ZFLFVBQVdBLEdBQ1osU0FBVW5ELEdBQ1QsR0FBSUEsRUFBS0MsTUFBUSxFQUFHLENBQ2hCTCxFQUFLa0Qsa0JBQ0YsQ0FDSE4sVUFBVUMsS0FBS0MsT0FBTzFDLEVBQUtLLE9BRWhDLFNBRVAyQixjQUFjLFdBQ1YsR0FBSTVDLEdBQVNOLEVBQUUsV0FBV08sS0FDMUJQLEdBQUV3QyxNQUFNLDJCQUE0QixRQUNoQ0MsTUFBTyxHQUNQQyxJQUFLLEVBQ0w0QixPQUFPLE9BQ1AzQixLQUFLLFdBQ0QzQyxFQUFFc0MsS0FBSyx3QkFBeUJoQyxPQUFVQSxHQUFTLFNBQVVZLEdBQ3pELEdBQUlBLEVBQUtDLE1BQVEsRUFBRyxDQUNoQnVDLFVBQVVDLEtBQUtZLFFBQVEsU0FDdkIzQixRQUFPQyxTQUFTQyxhQUNiLENBQ0hZLFVBQVVDLEtBQUtDLE9BQU8sWUFFM0IsZUFRcEJoQixPQUFRQSxPQUFPNUMsRUFBRzRCIiwiZmlsZSI6ImluZm8uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKHdpbiwgJCwgZG9jLCB1bmRlZmluZWQpIHtcclxuICAgICQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIG5ldyBQZXJzb24oKTtcclxuICAgIH0pO1xyXG5cclxuXHJcbiAgICBmdW5jdGlvbiBQZXJzb24ob3B0aW9ucykge1xyXG4gICAgICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnMgfHwge307XHJcbiAgICAgICAgdGhpcy5hcHBfaWQgPSAkKCcjYXBwX2lkJykudmFsKCk7XHJcbiAgICAgICAgdGhpcy5wYXlfdmVyaWZ5ID0gJCgnI3BheV92ZXJpZnknKS52YWwoKTtcclxuICAgICAgICB0aGlzLmlzX3VwZGF0ZSA9ICQoJyNpc191cGRhdGUnKS52YWwoKTtcclxuICAgICAgICB0aGlzLmNoYW5nZSA9IEdldFF1ZXJ5U3RyaW5nKCdjaGFuZ2UnKTtcclxuICAgICAgICB0aGlzLmluaXQoKTtcclxuICAgIH1cclxuXHJcbiAgICBQZXJzb24ucHJvdG90eXBlID0ge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgICAgICB0aGlzLmF1dGhIYW5kbGUoKTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnBheV92ZXJpZnkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNfdXBkYXRlID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjdXBkYXRlQmluZEJ0bicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJC5nZXQoJy9taW5pL3VwZGF0ZUJpbmQnLCBmdW5jdGlvbiAoanNvbikge1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbG9hZFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihqc29uLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVsb2FkUGFnZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAnanNvbicpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNleHBlclVybENvZGUnKS5hdHRyKCdzcmMnLCBtaW5pZXhwZXJVcmwgKyB0aGlzLmFwcF9pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHFyY29kZSA9IG5ldyBRUkNvZGUoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJINVVybENvZGVcIiksIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dDogJCgnI0g1VXJsJykudmFsKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxMzUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTM1LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvckRhcms6IFwiIzAwMDAwMFwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvckxpZ2h0OiBcIiNmZmZmZmZcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29ycmVjdExldmVsOiBRUkNvZGUuQ29ycmVjdExldmVsLkhcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcjc2NyZWVuQnRuJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLnBvc3QoJy9taW5pL3VzZXJDaGVjaycsIGZ1bmN0aW9uIChqc29uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhqc29uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoJ+mqjOivgeaIkOWKnycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vICQoJyNub3RTY3JlZW5Db2RlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAkKCcjaGFzU2NyZWVuQ29kZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gJCgnI3NldE1pbmlJbmZvJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZWxmLmVkaXRJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIueUqOaIt+mqjOivgeaIkOWKn++8jOaCqOeahOWwj+eoi+W6j+WNs+WwhuaPkOS6pOW+ruS/oeWuoeaguO+8jOivt+iAkOW/g+etieW+hSFcIiwgJ3N1Y2Nlc3MnLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAn6aqM6K+B5oiQ5YqfJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbk9rOmZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoanNvbi5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoanNvbi5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQuYWxlcnQoJ+eUqOaIt+mqjOivgeWksei0pe+8jOivt+ehruiupOaCqOWFs+iBlOiHs+W8gOaUvuW5s+WPsOeahOWwj+eoi+W6j+WSjOacjeWKoeWPt+S4juaOiOadg+S/oeaBr+S4gOiHtOOAguaIluiAheivt+mHjeaWsOS9v+eUqOeuoeeQhuWRmOW+ruS/oeaJq+aPj+S4pOS4quS6jOe7tOeggeOAguehruiupOaXoOivr+S7jeaXoOazlemqjOivgeaIkOWKn++8jOivt+iBlOezu+S6p+WTgem5heW+ruS/oe+8mmNoYW5waW5lMicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdlcnJvcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgJ2pzb24nKVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuY2hhbmdlID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmVkaXRJbmZvKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQoJyNlZGl0SW1nJykuY2xpY2sodGhpcy5lZGl0SW5mby5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgICAgICQoJyNzYXZlTWVyJykuY2xpY2sodGhpcy5zYXZlTWVyLmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICAgICAgJChcIi5yZUF1ZGl0XCIpLmNsaWNrKHRoaXMucmVTdWJtaXRBdWRpdC5iaW5kKHRoaXMpKTtcclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBhdXRoSGFuZGxlOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcHBfaWQgPSB0aGlzLmFwcF9pZDtcclxuICAgICAgICAgICAgLy/ph43mlrDmjojmnYPngrnlh7tcclxuICAgICAgICAgICAgJChcIiNyZUF1dGhcIikuY2xpY2soc2hvd05ld1dpbik7XHJcblxyXG4gICAgICAgICAgICAvL+aOiOadg+aIkOWKn+aMiemSrueCueWHu+WIt+aWsFxyXG4gICAgICAgICAgICAkKFwiI2JpbmRTdWNjZXNzXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvL+aOiOadg+Wksei0pe+8jOe7p+e7reW8ueWHulxyXG4gICAgICAgICAgICAkKFwiI2JpbmRGYWlsXCIpLmNsaWNrKHNob3dOZXdXaW4pO1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gc2hvd05ld1dpbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBuZXdXaW4gPSB3aW5kb3cub3BlbignJywgJ19ibGFuaycpO1xyXG5cclxuICAgICAgICAgICAgICAgICQucG9zdChcIi9taW5pL2F1dGhvcml0eSBcIiwge1wiYXBwX2lkXCI6IGFwcF9pZCxcInJlQXV0aFwiOjF9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChqc29uLmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdXaW4ubG9jYXRpb24uaHJlZiA9IG1pbmlhdXRoVXJsICsgYXBwX2lkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2JpbmRNb2RhbFwiKS5tb2RhbChcInNob3dcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi57O757uf57mB5b+ZXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sICdqc29uJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIGVkaXRJbmZvOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNzZXRNaW5pSW5mbyBpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgZmFsc2UpLnJlbW92ZUNsYXNzKCdkaXNFZGl0Jyk7XHJcbiAgICAgICAgICAgICQoJyNzYXZlTWVyJykucGFyZW50KCkucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVkaXRzdWNjZXNzOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoJyNzZXRNaW5pSW5mbyBpbnB1dCcpLnByb3AoJ2Rpc2FibGVkJywgdHJ1ZSkuYWRkQ2xhc3MoJ2Rpc0VkaXQnKTtcclxuICAgICAgICAgICAgJCgnI3NhdmVNZXInKS5wYXJlbnQoKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICBpZiAoJChcIiNlZGl0SW1nXCIpLmhhc0NsYXNzKFwiaGlkZVwiKSkge1xyXG4gICAgICAgICAgICAgICAgJChcIiNlZGl0SW1nXCIpLnJlbW92ZUNsYXNzKFwiaGlkZVwiKTsgLy/kv53lrZjmlK/ku5jphY3nva7miJDlip8s5pi+56S657yW6L6R5oyJ6ZKuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCEoJChcIiNwYXlfc2V0X2hpbnRcIikuaGFzQ2xhc3MoXCJoaWRlXCIpKSkge1xyXG4gICAgICAgICAgICAgICAgJChcIiNwYXlfc2V0X2hpbnRcIikuYWRkQ2xhc3MoXCJoaWRlXCIpOyAvL+makOiXj+aUr+S7mOmFjee9ruaPkOekulxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkLmFsZXJ0KCflsI/nqIvluo/mraPlnKjlvIDlj5HkuK3vvIznrYnlvoXmj5DkuqTlrqHmoLjvvIznuqYx5Liq5bel5L2c5pel77yM6K+36ICQ5b+D562J5b6FJyxcclxuICAgICAgICAgICAgICAgICdzdWNjZXNzJyxcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ+iuvue9ruaIkOWKnycsXHJcbiAgICAgICAgICAgICAgICAgICAgYnRuOiAyXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNhdmVNZXI6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHd4X21jaGlkID0gJC50cmltKCQoJyN3eF9tY2hpZCcpLnZhbCgpKSxcclxuICAgICAgICAgICAgICAgIHd4X21jaGtleSA9ICQudHJpbSgkKCcjd3hfbWNoa2V5JykudmFsKCkpLFxyXG4gICAgICAgICAgICAgICAgc2VsZiA9IHRoaXM7XHJcbiAgICAgICAgICAgIGlmICh3eF9tY2hpZCA9PSAnJykge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfllYbmiLflj7fkuI3og73kuLrnqbonKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAod3hfbWNoa2V5ID09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ0FQSeWvhumSpeS4jeiDveS4uuepuicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQucG9zdCgnL21pbmkvbWVyY2hhbnQnLCB7XHJcbiAgICAgICAgICAgICAgICB3eF9tY2hpZDogd3hfbWNoaWQsXHJcbiAgICAgICAgICAgICAgICB3eF9tY2hrZXk6IHd4X21jaGtleVxyXG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoanNvbikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGpzb24uY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2VsZi5lZGl0c3VjY2VzcygpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoanNvbi5tc2cpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAnanNvbicpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgcmVTdWJtaXRBdWRpdDpmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhcHBfaWQgPSAkKCcjYXBwX2lkJykudmFsKCk7XHJcbiAgICAgICAgICAgICQuYWxlcnQoXCLor7fnoa7orqTlt7LmjInnhaflrqHmoLjlpLHotKXljp/lm6Dov5vooYzkv67mlLnlubbph43mlrDmj5DkuqTlrqHmoLghXCIsICdpbmZvJywge1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6ICcnLFxyXG4gICAgICAgICAgICAgICAgYnRuOiAzLFxyXG4gICAgICAgICAgICAgICAgb2t0ZXh0Olwi5o+Q5Lqk5a6h5qC4XCIsXHJcbiAgICAgICAgICAgICAgICBvbk9rOmZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAkLnBvc3QoXCIvbWluaS9yZXN1Ym1pdEF1ZGl0IFwiLCB7XCJhcHBfaWRcIjogYXBwX2lkfSwgZnVuY3Rpb24gKGpzb24pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGpzb24uY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5o+Q5Lqk5a6h5qC45oiQ5YqfXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5o+Q5Lqk5a6h5qC45aSx6LSlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSwgJ2pzb24nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcblxyXG59KSh3aW5kb3csIHdpbmRvdy4kLCBkb2N1bWVudCk7Il19
