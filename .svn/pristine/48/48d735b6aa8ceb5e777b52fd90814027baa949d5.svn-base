var newFormFlag=false;$(function(){init();newCoupon()});function newCoupon(){var e=0;var t=0;var a=[];var s;var o;var r;var n;var l=[];var c=0;var d;var u;var p;var h;var f;var v;var m;var b=$.trim($('[name="count"]').val());n="0";m=$(".formContent").data("page_type");var g=GetQueryString("id");console.log(g);if(GetQueryString("type")==0||GetQueryString("type")==1){v=GetQueryString("type");console.log("shang")}else{v=$(".plusArea").attr("data-plus-type");console.log("xia")}$(".addedList .addedItem").each(function(){a.push($(this).data("id"))});console.log(v);aliveTimeConfig(".dateSetInput");+function(){if(v==0){$(".isGoods").attr("style","")}else{$(".isGoods").attr("style","display:none")}$(".remindTop a").on("click",function(){var e="/coupon/close/"+$(this).siblings("span").attr("data-place");$(".remindTop").remove();$.ajax({type:"GET",url:e,data:{},success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg)}else{baseUtils.show.blueTip(e.msg)}},error:function(e,t,a){console.log(e);console.error(a);console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$('[for="useCdn_1"]').on("click",function(){$('[name="re_price"]').removeAttr("disabled").removeAttr("readonly")});$('[for="useCdn_2"]').on("click",function(){$('[name="re_price"]').attr("disabled",true).attr("readonly",true).val("");setCondition()});$(".plusArea").on("click",function(){console.log("plusArea test");$(".initList").html();$('.addBox [type="checkBox"]').removeAttr("checked");$("#addModal").fadeIn(200)});$(".closePop").on("click",function(){$("#addModal").fadeOut(200)});$("div.tab a").on("click",function(){$(this).addClass("clicked").siblings().removeClass("clicked");e=$(this).attr("data-type");console.log(e);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}});$("#forTab").on("click",function(){var t=$("#kwContent").val();$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",data:{state:e,kw:t},success:function(t){$(".initList").html(t);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}},error:function(e,t,a){console.log(e);console.error(a);console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$("input.func").on("click",function(){console.log("teste");$(this).addClass("funcClick").siblings().removeClass("funcClick");console.log($(this).val());if($(this).val()=="用户领取"){$(".aboutGet").show();n="0"}else{$(".aboutGet").hide();$(".aboutGet #putOn").removeAttr("checked");n="1"}});$("#add").on("click",function(){var e=[];var t=[];var s=[];var o=[];$('#tab_0 input[type="checkbox"]:checked').each(function(){e.push($(this).val());var t=[];t.push($(this).attr("data-name"));t.push($(this).attr("data-img"));t.push("单品");t.push($(this).val());t.push($(this).attr("data-style"));o.push(t)});$('#tab_1 input[type="checkbox"]:checked').each(function(){t.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("专栏");e.push($(this).val());e.push($(this).attr("data-style"));o.push(e)});$('#tab_2 input[type="checkbox"]:checked').each(function(){s.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("会员");e.push($(this).val());e.push($(this).attr("data-style"));o.push(e)});console.log(e);var r=e.concat(s,t);console.log(a);if(r==""){baseUtils.show.redTip("请选择要添加的商品。");return false}if(w(a,r)==1){baseUtils.show.redTip("请勿重复选择添加的商品。");return false}else{for(i=0;i<o.length;i++){$(".addedList").append("<div data-tab="+o[i][4]+' class="addedItem" data-id="'+o[i][3]+'"><span>'+o[i][2]+'</span><img src="'+o[i][1]+'" alt="'+o[i][0]+'"><span class="spanCon">'+o[i][0]+'</span><button type="button" class="close closeItem">×</button></div>')}a=a.concat(r);$("#addModal").fadeOut(200)}});$(".addedList").on("click",".closeItem",function(){$(this).prev().prev().click();$(this).parent().remove();var e=$(this).parent().attr("data-id");console.log(e);a.remove(e);console.log(a)});$("#submitList").on("click",function(){if(newFormFlag){return false}newFormFlag=true;l=[];$(".addedItem").each(function(){l.push($(this).attr("data-id")+"--"+$(this).attr("data-tab"))});console.log(l);o=$.trim($('[name="title"]').val());r=Math.round($.trim($('[name="price"]').val())*100);if($("#useCdn_1").prop("checked")){t=1;c=Math.round(parseFloat($('[name="re_price"]').val())*100)||"empty";console.log("使用条件"+c)}else if($("#useCdn_2").prop("checked")){t=0;c=0}console.log("isTen",c);d=$.trim($('[name="valid_at"]').val());u=$.trim($('[name="invalid_at"]').val());p=$.trim($('[name="count"]').val());h=$('[name="receive_rule"]').val();if($('[name="extension"]').prop("checked")){f=1}else{f=0}s={title:o,price:r,receive_rule:h,valid_at:d,invalid_at:u,require_price:c,count:p,spread_type:n,is_show:f,resource:l,type:v};if(g){s.id=g}console.log(s.price);console.log(s.require_price);if(m==0&&k(s,b,t)){_("/coupon/add",s)}else if(m==1&&k(s,b)){console.log("check is ture");_("/coupon/editCoupon",s)}})}();function k(e,t,a){newFormFlag=false;if($formCheck.emptyString(e.title)){baseUtils.show.redTip("优惠券名称不能为空！");console.log(newFormFlag);return false}if($formCheck.emptyString(e.price)){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(parseFloat(e.count)<parseFloat(t)){baseUtils.show.redTip("修改发行量只能增不能减！");return false}if($formCheck.emptyString(e.valid_at)&&$formCheck.emptyString(e.invalid_at)){baseUtils.show.redTip("有效期起止时间不能为空！");return false}if($formCheck.emptyString(e.count)){baseUtils.show.redTip("发行数量不能为空！");return false}if(!$formCheck.checkTime(e.valid_at)){baseUtils.show.redTip("有效期开始时间格式错误");return false}if(!$formCheck.checkTime(e.invalid_at)){baseUtils.show.redTip("有效期结束时间格式错误");return false}if(e.require_price==="empty"){baseUtils.show.redTip("使用条件不能为空！");return false}if(!$formCheck.checkTimeOrder(e.valid_at,e.invalid_at)){baseUtils.show.redTip("有效期结束时间必须大于开始时间！");return false}if(!$formCheck.checkNum(e.price)){baseUtils.show.redTip("您的面额输入格式有误，请重新输入！");return false}if(!$formCheck.checkNum(e.count)){baseUtils.show.redTip("您的发行量输入格式有误，请重新输入！");return false}if(e.require_price==NaN||e.require_price==null){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(e.price>=e.require_price&&a==1){baseUtils.show.redTip("优惠券面额要小于使用条件！");return false}newFormFlag=true;return true}function _(e,t){$.ajax(e,{type:"POST",dataType:"JSON",data:t,success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg);window.location.href="/coupon/index"}else if(e.code==-1){baseUtils.show.redTip(e.msg);newFormFlag=false}},error:function(e,t,a){newFormFlag=false;hideLoading();console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function w(e,t){var a=0;for(var i=0;i<e.length;i++){if(t.indexOf(e[i])!=-1){a=1}}return a}Array.prototype.remove=function(e){var t=this.indexOf(e);if(t>-1){this.splice(t,1)}}}function init(){$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",success:function(e){$(".initList").html(e)},error:function(e,t,a){console.log(e);console.error(a);console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function clearNoNum(e){e.value=e.value.replace(/[^\d.]/g,"");e.value=e.value.replace(/\.{2,}/g,".");e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");if(e.value.indexOf(".")<0&&e.value!=""){e.value=parseFloat(e.value)}}function setCondition(){$(".theTen").html(parseFloat($('[name="price"]').val())+.1)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld0Zvcm0uanMiXSwibmFtZXMiOlsibmV3Rm9ybUZsYWciLCIkIiwiaW5pdCIsIm5ld0NvdXBvbiIsInRhYlN0YXR1cyIsImxpbWl0U3RhdHVzIiwiaGFzQ2hvaWNlIiwiYWxsRm9ybU1zZyIsImNvdXBvbk5hbWUiLCJjb3Vwb25QcmljZSIsInBvcFdheSIsImdvb2RzUmFuZ2UiLCJpc1RlbiIsInRpbWVTdGFydCIsInRpbWVFbmQiLCJwb3BOdW0iLCJwZW9wbGVMaW0iLCJpc1RvRGV0YWlsIiwidHlwZSIsInBhZ2VfdHlwZSIsImNtcCIsInRyaW0iLCJ2YWwiLCJkYXRhIiwiZWRpdElkIiwiR2V0UXVlcnlTdHJpbmciLCJjb25zb2xlIiwibG9nIiwiYXR0ciIsImVhY2giLCJwdXNoIiwidGhpcyIsImFsaXZlVGltZUNvbmZpZyIsIm9uIiwidXJsIiwic2libGluZ3MiLCJyZW1vdmUiLCJhamF4Iiwic3VjY2VzcyIsImNvZGUiLCJiYXNlVXRpbHMiLCJzaG93IiwiYmx1ZVRpcCIsIm1zZyIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwicmVkVGlwIiwicmVtb3ZlQXR0ciIsInNldENvbmRpdGlvbiIsImh0bWwiLCJmYWRlSW4iLCJmYWRlT3V0IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImhpZGUiLCJrdyIsImRhdGFUeXBlIiwic3RhdGUiLCJhcnJTaW5nbGUiLCJhcnJQcm8iLCJhcnJOdW0iLCJzdGF0ZUFsbCIsIm5ld0FyciIsImNvbmNhdCIsInVuaXF1ZSIsImkiLCJsZW5ndGgiLCJhcHBlbmQiLCJwcmV2IiwiY2xpY2siLCJwYXJlbnQiLCJkZWxldGVJdGVtIiwiTWF0aCIsInJvdW5kIiwicHJvcCIsInBhcnNlRmxvYXQiLCJ0aXRsZSIsInByaWNlIiwicmVjZWl2ZV9ydWxlIiwidmFsaWRfYXQiLCJpbnZhbGlkX2F0IiwicmVxdWlyZV9wcmljZSIsImNvdW50Iiwic3ByZWFkX3R5cGUiLCJpc19zaG93IiwicmVzb3VyY2UiLCJpZCIsImNoZWNrRm9ybSIsInN1Ym1pdEZvcm0iLCJpbmZvIiwibGltaXQiLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJjaGVja1RpbWUiLCJjaGVja1RpbWVPcmRlciIsImNoZWNrTnVtIiwiTmFOIiwiYWxsbWFnIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiaGlkZUxvYWRpbmciLCJhcnIxIiwiYXJyMiIsIml0ZW0iLCJpbmRleE9mIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJpbmRleCIsInNwbGljZSIsImNsZWFyTm9OdW0iLCJvYmoiLCJ2YWx1ZSIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQUNBLEdBQUlBLGFBQVksS0FDaEJDLEdBQUUsV0FDRUMsTUFDQUMsY0FHSixTQUFTQSxhQUNMLEdBQUlDLEdBQVksQ0FDaEIsSUFBSUMsR0FBYSxDQUNqQixJQUFJQyxLQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsS0FDSixJQUFJQyxHQUFNLENBQ1YsSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxHQUFJbkIsRUFBRW9CLEtBQUtwQixFQUFFLGtCQUFrQnFCLE1BQ25DWixHQUFPLEdBQ1BTLEdBQVVsQixFQUFFLGdCQUFnQnNCLEtBQUssWUFFakMsSUFBSUMsR0FBT0MsZUFBZSxLQUMxQkMsU0FBUUMsSUFBSUgsRUFDWixJQUFHQyxlQUFlLFNBQVMsR0FBS0EsZUFBZSxTQUFTLEVBQUcsQ0FDdkRQLEVBQUtPLGVBQWUsT0FDcEJDLFNBQVFDLElBQUksYUFDWCxDQUNEVCxFQUFLakIsRUFBRSxhQUFhMkIsS0FBSyxpQkFDekJGLFNBQVFDLElBQUksT0FHaEIxQixFQUFFLHlCQUF5QjRCLEtBQUssV0FDNUJ2QixFQUFVd0IsS0FBSzdCLEVBQUU4QixNQUFNUixLQUFLLFFBRWhDRyxTQUFRQyxJQUFJVCxFQUVaYyxpQkFBZ0Isa0JBQ2YsV0FFRyxHQUFHZCxHQUFNLEVBQUUsQ0FDUGpCLEVBQUUsWUFBWTJCLEtBQUssUUFBUSxRQUMxQixDQUNEM0IsRUFBRSxZQUFZMkIsS0FBSyxRQUFRLGdCQUcvQjNCLEVBQUUsZ0JBQWdCZ0MsR0FBRyxRQUFRLFdBQ3pCLEdBQUlDLEdBQUksaUJBQW1CakMsRUFBRThCLE1BQU1JLFNBQVMsUUFBUVAsS0FBSyxhQUN6RDNCLEdBQUUsY0FBY21DLFFBRWhCbkMsR0FBRW9DLE1BQ0VuQixLQUFNLE1BQ05nQixJQUFLQSxFQUNMWCxRQUVBZSxRQUFTLFNBQVNmLEdBQ2QsR0FBR0EsRUFBS2dCLE1BQU0sRUFBRSxDQUVaQyxVQUFVQyxLQUFLQyxRQUFRbkIsRUFBS29CLFNBQzNCLENBRURILFVBQVVDLEtBQUtDLFFBQVFuQixFQUFLb0IsT0FHcENDLE1BQU8sU0FBU0MsRUFBS0MsRUFBUUMsR0FDekJyQixRQUFRQyxJQUFJa0IsRUFDWm5CLFNBQVFrQixNQUFNRyxFQUNkckIsU0FBUWtCLE1BQU1FLEVBQ2ROLFdBQVVDLEtBQUtPLE9BQU8sbUJBU2xDL0MsR0FBRSxvQkFBb0JnQyxHQUFHLFFBQVEsV0FDN0JoQyxFQUFFLHFCQUFxQmdELFdBQVcsWUFBWUEsV0FBVyxhQUU3RGhELEdBQUUsb0JBQW9CZ0MsR0FBRyxRQUFRLFdBQzdCaEMsRUFBRSxxQkFBcUIyQixLQUFLLFdBQVcsTUFBTUEsS0FBSyxXQUFXLE1BQU1OLElBQUksR0FDdkU0QixpQkFHSmpELEdBQUUsYUFBYWdDLEdBQUcsUUFBUSxXQUV0QlAsUUFBUUMsSUFBSSxnQkFDWjFCLEdBQUUsYUFBYWtELE1BQ2ZsRCxHQUFFLDZCQUE2QmdELFdBQVcsVUFDMUNoRCxHQUFFLGFBQWFtRCxPQUFPLE1BSzFCbkQsR0FBRSxhQUFhZ0MsR0FBRyxRQUFRLFdBQ3RCaEMsRUFBRSxhQUFhb0QsUUFBUSxNQUczQnBELEdBQUUsYUFBYWdDLEdBQUcsUUFBUSxXQUN0QmhDLEVBQUU4QixNQUFNdUIsU0FBUyxXQUFXbkIsV0FBV29CLFlBQVksVUFFbkRuRCxHQUFVSCxFQUFFOEIsTUFBTUgsS0FBSyxZQUN2QkYsU0FBUUMsSUFBSXZCLEVBRVosUUFBT0EsR0FDSCxJQUFLLElBQUlILEVBQUUsVUFBVXdDLE9BQU9OLFNBQVMsaUJBQWlCcUIsTUFDdEQsTUFDQSxLQUFLLElBQUl2RCxFQUFFLFVBQVV3QyxPQUFPTixTQUFTLGlCQUFpQnFCLE1BQ3RELE1BQ0EsS0FBSyxJQUFJdkQsRUFBRSxVQUFVd0MsT0FBT04sU0FBUyxpQkFBaUJxQixNQUN0RCxTQU1SdkQsR0FBRSxXQUFXZ0MsR0FBRyxRQUFRLFdBQ3BCLEdBQUl3QixHQUFLeEQsRUFBRSxjQUFjcUIsS0FPekJyQixHQUFFb0MsTUFDRW5CLEtBQU0sTUFDTmdCLElBQUssdUJBQ0x3QixTQUFVLE9BQ1ZuQyxNQUNJb0MsTUFBTXZELEVBQ05xRCxHQUFHQSxHQUVQbkIsUUFBUyxTQUFTZixHQUNkdEIsRUFBRSxhQUFha0QsS0FBSzVCLEVBQ3BCLFFBQU9uQixHQUNILElBQUssSUFBSUgsRUFBRSxVQUFVd0MsT0FBT04sU0FBUyxpQkFBaUJxQixNQUN0RCxNQUNBLEtBQUssSUFBSXZELEVBQUUsVUFBVXdDLE9BQU9OLFNBQVMsaUJBQWlCcUIsTUFDdEQsTUFDQSxLQUFLLElBQUl2RCxFQUFFLFVBQVV3QyxPQUFPTixTQUFTLGlCQUFpQnFCLE1BQ3RELFNBR1JaLE1BQU8sU0FBU0MsRUFBS0MsRUFBUUMsR0FDekJyQixRQUFRQyxJQUFJa0IsRUFDWm5CLFNBQVFrQixNQUFNRyxFQUNkckIsU0FBUWtCLE1BQU1FLEVBQ2ROLFdBQVVDLEtBQUtPLE9BQU8sbUJBT2xDL0MsR0FBRSxjQUFjZ0MsR0FBRyxRQUFRLFdBQ3ZCUCxRQUFRQyxJQUFJLFFBQ1oxQixHQUFFOEIsTUFBTXVCLFNBQVMsYUFBYW5CLFdBQVdvQixZQUFZLFlBQ3JEN0IsU0FBUUMsSUFBSTFCLEVBQUU4QixNQUFNVCxNQUNwQixJQUFHckIsRUFBRThCLE1BQU1ULE9BQU8sT0FBTyxDQUNyQnJCLEVBQUUsYUFBYXdDLE1BQ2YvQixHQUFPLFFBQ04sQ0FDRFQsRUFBRSxhQUFhdUQsTUFDZnZELEdBQUUsb0JBQW9CZ0QsV0FBVyxVQUNqQ3ZDLEdBQU8sTUFLZlQsR0FBRSxRQUFRZ0MsR0FBRyxRQUFRLFdBQ2pCLEdBQUkyQixLQUNKLElBQUlDLEtBQ0osSUFBSUMsS0FDSixJQUFJQyxLQUVKOUQsR0FBRSx5Q0FBeUM0QixLQUFLLFdBQzVDK0IsRUFBVTlCLEtBQUs3QixFQUFFOEIsTUFBTVQsTUFDdkIsSUFBSXFDLEtBQ0pBLEdBQU03QixLQUFLN0IsRUFBRThCLE1BQU1ILEtBQUssYUFDeEIrQixHQUFNN0IsS0FBSzdCLEVBQUU4QixNQUFNSCxLQUFLLFlBQ3hCK0IsR0FBTTdCLEtBQUssS0FDWDZCLEdBQU03QixLQUFLN0IsRUFBRThCLE1BQU1ULE1BQ25CcUMsR0FBTTdCLEtBQUs3QixFQUFFOEIsTUFBTUgsS0FBSyxjQUN4Qm1DLEdBQVNqQyxLQUFLNkIsSUFFbEIxRCxHQUFFLHlDQUF5QzRCLEtBQUssV0FDNUNnQyxFQUFPL0IsS0FBSzdCLEVBQUU4QixNQUFNVCxNQUNwQixJQUFJcUMsS0FDSkEsR0FBTTdCLEtBQUs3QixFQUFFOEIsTUFBTUgsS0FBSyxhQUN4QitCLEdBQU03QixLQUFLN0IsRUFBRThCLE1BQU1ILEtBQUssWUFDeEIrQixHQUFNN0IsS0FBSyxLQUNYNkIsR0FBTTdCLEtBQUs3QixFQUFFOEIsTUFBTVQsTUFDbkJxQyxHQUFNN0IsS0FBSzdCLEVBQUU4QixNQUFNSCxLQUFLLGNBQ3hCbUMsR0FBU2pDLEtBQUs2QixJQUVsQjFELEdBQUUseUNBQXlDNEIsS0FBSyxXQUM1Q2lDLEVBQU9oQyxLQUFLN0IsRUFBRThCLE1BQU1ULE1BQ3BCLElBQUlxQyxLQUNKQSxHQUFNN0IsS0FBSzdCLEVBQUU4QixNQUFNSCxLQUFLLGFBQ3hCK0IsR0FBTTdCLEtBQUs3QixFQUFFOEIsTUFBTUgsS0FBSyxZQUN4QitCLEdBQU03QixLQUFLLEtBQ1g2QixHQUFNN0IsS0FBSzdCLEVBQUU4QixNQUFNVCxNQUNuQnFDLEdBQU03QixLQUFLN0IsRUFBRThCLE1BQU1ILEtBQUssY0FDeEJtQyxHQUFTakMsS0FBSzZCLElBS2xCakMsU0FBUUMsSUFBSWlDLEVBQ1osSUFBSUksR0FBUUosRUFBVUssT0FBT0gsRUFBT0QsRUFFcENuQyxTQUFRQyxJQUFJckIsRUFDWixJQUFHMEQsR0FBUSxHQUFHLENBQ1Z4QixVQUFVQyxLQUFLTyxPQUFPLGFBQ3RCLE9BQU8sT0FFWCxHQUFHa0IsRUFBTzVELEVBQVUwRCxJQUFTLEVBQUUsQ0FDM0J4QixVQUFVQyxLQUFLTyxPQUFPLGVBQ3RCLE9BQU8sV0FDTixDQUNELElBQUltQixFQUFFLEVBQUVBLEVBQUVKLEVBQVNLLE9BQU9ELElBQUksQ0FDMUJsRSxFQUFFLGNBQWNvRSxPQUNaLGlCQUFrQk4sRUFBU0ksR0FBRyxHQUFJLCtCQUFpQ0osRUFBU0ksR0FBRyxHQUM3RSxXQUFXSixFQUFTSSxHQUFHLEdBQUssb0JBQXNCSixFQUFTSSxHQUFHLEdBQzlELFVBQVVKLEVBQVNJLEdBQUcsR0FBSywyQkFBNkJKLEVBQVNJLEdBQUcsR0FDcEUseUVBR1Y3RCxFQUFVQSxFQUFVMkQsT0FBT0QsRUFDM0IvRCxHQUFFLGFBQWFvRCxRQUFRLE9BSy9CcEQsR0FBRSxjQUFjZ0MsR0FBRyxRQUFRLGFBQWEsV0FDcENoQyxFQUFFOEIsTUFBTXVDLE9BQU9BLE9BQU9DLE9BQ3RCdEUsR0FBRThCLE1BQU15QyxTQUFTcEMsUUFDakIsSUFBSXFDLEdBQVd4RSxFQUFFOEIsTUFBTXlDLFNBQVM1QyxLQUFLLFVBQ3JDRixTQUFRQyxJQUFJOEMsRUFDWm5FLEdBQVU4QixPQUFPcUMsRUFDakIvQyxTQUFRQyxJQUFJckIsSUFLaEJMLEdBQUUsZUFBZWdDLEdBQUcsUUFBUSxXQUV4QixHQUFHakMsWUFBWSxDQUNYLE1BQU8sT0FFWEEsWUFBWSxJQUNaVyxLQUNBVixHQUFFLGNBQWM0QixLQUFLLFdBQ2pCbEIsRUFBV21CLEtBQUs3QixFQUFFOEIsTUFBTUgsS0FBSyxXQUFXLEtBQUszQixFQUFFOEIsTUFBTUgsS0FBSyxjQUc5REYsU0FBUUMsSUFBSWhCLEVBR1pILEdBQVdQLEVBQUVvQixLQUFLcEIsRUFBRSxrQkFBa0JxQixNQUN0Q2IsR0FBWWlFLEtBQUtDLE1BQU8xRSxFQUFFb0IsS0FBS3BCLEVBQUUsa0JBQWtCcUIsT0FBUSxJQUUzRCxJQUFHckIsRUFBRSxhQUFhMkUsS0FBSyxXQUFXLENBRTlCdkUsRUFBYyxDQUNkTyxHQUFNOEQsS0FBS0MsTUFBTUUsV0FBVzVFLEVBQUUscUJBQXFCcUIsT0FBTyxNQUFRLE9BQ2xFSSxTQUFRQyxJQUFJLE9BQU9mLE9BQ2pCLElBQUdYLEVBQUUsYUFBYTJFLEtBQUssV0FBVyxDQUNwQ3ZFLEVBQWMsQ0FDZE8sR0FBTyxFQUdYYyxRQUFRQyxJQUFJLFFBQVFmLEVBQ3BCQyxHQUFVWixFQUFFb0IsS0FBS3BCLEVBQUUscUJBQXFCcUIsTUFDeENSLEdBQVFiLEVBQUVvQixLQUFLcEIsRUFBRSx1QkFBdUJxQixNQUN4Q1AsR0FBT2QsRUFBRW9CLEtBQUtwQixFQUFFLGtCQUFrQnFCLE1BQ2xDTixHQUFVZixFQUFFLHlCQUF5QnFCLEtBQ3JDLElBQUdyQixFQUFFLHNCQUFzQjJFLEtBQUssV0FBVyxDQUN2QzNELEVBQVcsTUFDVixDQUNEQSxFQUFXLEVBSWZWLEdBQ0l1RSxNQUFNdEUsRUFDTnVFLE1BQU10RSxFQUNOdUUsYUFBYWhFLEVBQ2JpRSxTQUFTcEUsRUFDVHFFLFdBQVdwRSxFQUNYcUUsY0FBY3ZFLEVBQ2R3RSxNQUFNckUsRUFDTnNFLFlBQVkzRSxFQUNaNEUsUUFBUXJFLEVBQ1JzRSxTQUFTNUUsRUFDVE8sS0FBS0EsRUFFVCxJQUFHTSxFQUFPLENBQ05qQixFQUFXaUYsR0FBR2hFLEVBSWxCRSxRQUFRQyxJQUFJcEIsRUFBV3dFLE1BQ3ZCckQsU0FBUUMsSUFBSXBCLEVBQVc0RSxjQUN2QixJQUFHaEUsR0FBVyxHQUFLc0UsRUFBVWxGLEVBQVdhLEVBQUlmLEdBQWEsQ0FDckRxRixFQUFXLGNBQWNuRixPQUN2QixJQUFHWSxHQUFXLEdBQUtzRSxFQUFVbEYsRUFBV2EsR0FBSyxDQUMvQ00sUUFBUUMsSUFBSSxnQkFDWitELEdBQVcscUJBQXFCbkYsUUFPNUMsU0FBU2tGLEdBQVVFLEVBQUt2RSxFQUFJd0UsR0FDeEI1RixZQUFZLEtBQ1osSUFBSTZGLFdBQVdDLFlBQVlILEVBQUtiLE9BQVEsQ0FDcEN0QyxVQUFVQyxLQUFLTyxPQUFPLGFBQ3RCdEIsU0FBUUMsSUFBSTNCLFlBQ1osT0FBTyxPQUVYLEdBQUk2RixXQUFXQyxZQUFZSCxFQUFLWixPQUFRLENBQ3BDdkMsVUFBVUMsS0FBS08sT0FBTyxhQUN0QixPQUFPLE9BRVgsR0FBRzZCLFdBQVdjLEVBQUtQLE9BQU9QLFdBQVd6RCxHQUFLLENBQ3RDb0IsVUFBVUMsS0FBS08sT0FBTyxlQUN0QixPQUFPLE9BRVgsR0FBSTZDLFdBQVdDLFlBQVlILEVBQUtWLFdBQVdZLFdBQVdDLFlBQVlILEVBQUtULFlBQWEsQ0FDaEYxQyxVQUFVQyxLQUFLTyxPQUFPLGVBQ3RCLE9BQU8sT0FFWCxHQUFJNkMsV0FBV0MsWUFBWUgsRUFBS1AsT0FBUSxDQUNwQzVDLFVBQVVDLEtBQUtPLE9BQU8sWUFDdEIsT0FBTyxPQVFYLElBQUs2QyxXQUFXRSxVQUFVSixFQUFLVixVQUFXLENBQ3RDekMsVUFBVUMsS0FBS08sT0FBTyxjQUN0QixPQUFPLE9BR1gsSUFBSzZDLFdBQVdFLFVBQVVKLEVBQUtULFlBQWEsQ0FDeEMxQyxVQUFVQyxLQUFLTyxPQUFPLGNBQ3RCLE9BQU8sT0FFWCxHQUFHMkMsRUFBS1IsZ0JBQWtCLFFBQVEsQ0FDOUIzQyxVQUFVQyxLQUFLTyxPQUFPLFlBQ3RCLE9BQU8sT0FFWCxJQUFJNkMsV0FBV0csZUFBZUwsRUFBS1YsU0FBU1UsRUFBS1QsWUFBWSxDQUN6RDFDLFVBQVVDLEtBQUtPLE9BQU8sbUJBQ3RCLE9BQU8sT0FFWCxJQUFLNkMsV0FBV0ksU0FBU04sRUFBS1osT0FBUSxDQUNsQ3ZDLFVBQVVDLEtBQUtPLE9BQU8sb0JBQ3RCLE9BQU8sT0FFWCxJQUFLNkMsV0FBV0ksU0FBU04sRUFBS1AsT0FBUSxDQUNsQzVDLFVBQVVDLEtBQUtPLE9BQU8scUJBQ3RCLE9BQU8sT0FFWCxHQUFHMkMsRUFBS1IsZUFBZWUsS0FBT1AsRUFBS1IsZUFBZSxLQUFLLENBQ25EM0MsVUFBVUMsS0FBS08sT0FBTyxhQUN0QixPQUFPLE9BRVgsR0FBRzJDLEVBQUtaLE9BQU9ZLEVBQUtSLGVBQWlCUyxHQUFTLEVBQUUsQ0FDNUNwRCxVQUFVQyxLQUFLTyxPQUFPLGdCQUN0QixPQUFPLE9BRVhoRCxZQUFZLElBT1osT0FBTyxNQUdYLFFBQVMwRixHQUFXeEQsRUFBSWlFLEdBQ3BCbEcsRUFBRW9DLEtBQUtILEdBQ0hoQixLQUFLLE9BQ0x3QyxTQUFTLE9BQ1RuQyxLQUFLNEUsRUFDTDdELFFBQVEsU0FBU2YsR0FDYixHQUFHQSxFQUFLZ0IsTUFBTSxFQUFFLENBQ1pDLFVBQVVDLEtBQUtDLFFBQVFuQixFQUFLb0IsSUFDNUJ5RCxRQUFPQyxTQUFTQyxLQUFLLG9CQUNuQixJQUFHL0UsRUFBS2dCLE9BQU8sRUFBRSxDQUNuQkMsVUFBVUMsS0FBS08sT0FBT3pCLEVBQUtvQixJQUMzQjNDLGFBQVksUUFJcEI0QyxNQUFPLFNBQVNDLEVBQUlDLEVBQU9DLEdBQ3ZCL0MsWUFBWSxLQUNadUcsY0FDQTdFLFNBQVFrQixNQUFNRyxFQUNkUCxXQUFVQyxLQUFLTyxPQUFPLGtCQUtsQyxRQUFTa0IsR0FBT3NDLEVBQUtDLEdBQ2pCLEdBQUlDLEdBQUssQ0FDVCxLQUFJLEdBQUl2QyxHQUFFLEVBQUVBLEVBQUVxQyxFQUFLcEMsT0FBT0QsSUFBSSxDQUMxQixHQUFHc0MsRUFBS0UsUUFBUUgsRUFBS3JDLE1BQU0sRUFBRSxDQUN6QnVDLEVBQUssR0FHYixNQUFPQSxHQUdYRSxNQUFNQyxVQUFVekUsT0FBUyxTQUFTZCxHQUM5QixHQUFJd0YsR0FBUS9FLEtBQUs0RSxRQUFRckYsRUFDekIsSUFBSXdGLEdBQVMsRUFBRyxDQUNaL0UsS0FBS2dGLE9BQU9ELEVBQU8sS0FlL0IsUUFBUzVHLFFBQ0xELEVBQUVvQyxNQUNFbkIsS0FBTSxNQUNOZ0IsSUFBSyx1QkFDTHdCLFNBQVUsT0FDVnBCLFFBQVMsU0FBU2YsR0FFZHRCLEVBQUUsYUFBYWtELEtBQUs1QixJQUV4QnFCLE1BQU8sU0FBU0MsRUFBS0MsRUFBUUMsR0FDekJyQixRQUFRQyxJQUFJa0IsRUFDWm5CLFNBQVFrQixNQUFNRyxFQUNkckIsU0FBUWtCLE1BQU1FLEVBQ2ROLFdBQVVDLEtBQUtPLE9BQU8sa0JBTWxDLFFBQVNnRSxZQUFXQyxHQUNqQkEsRUFBSUMsTUFBUUQsRUFBSUMsTUFBTUMsUUFBUSxVQUFVLEdBQ3hDRixHQUFJQyxNQUFRRCxFQUFJQyxNQUFNQyxRQUFRLFVBQVUsSUFDeENGLEdBQUlDLE1BQVFELEVBQUlDLE1BQU1DLFFBQVEsSUFBSSxPQUFPQSxRQUFRLE1BQU0sSUFBSUEsUUFBUSxNQUFNLElBQ3pFRixHQUFJQyxNQUFRRCxFQUFJQyxNQUFNQyxRQUFRLHlCQUF5QixVQUN2RCxJQUFHRixFQUFJQyxNQUFNUCxRQUFRLEtBQU0sR0FBS00sRUFBSUMsT0FBUSxHQUFHLENBQzNDRCxFQUFJQyxNQUFPckMsV0FBV29DLEVBQUlDLFFBR2pDLFFBQVNoRSxnQkFDTGpELEVBQUUsV0FBV2tELEtBQUswQixXQUFXNUUsRUFBRSxrQkFBa0JxQixPQUFPIiwiZmlsZSI6Im5ld0Zvcm0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjcmVhdCBieSBKZXJ2aXNcclxudmFyIG5ld0Zvcm1GbGFnPWZhbHNlOy8v5pa55rOV6ZSB5Y+Y6YePXHJcbiQoZnVuY3Rpb24oKXtcclxuICAgIGluaXQoKTtcclxuICAgIG5ld0NvdXBvbigpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIG5ld0NvdXBvbigpe1xyXG4gICAgdmFyIHRhYlN0YXR1cyA9IDA7Ly90YWLpgInpobnljaHnirbmgIHliJ3lp4vnirbmgIEwXHJcbiAgICB2YXIgbGltaXRTdGF0dXM9IDA7Ly/kvb/nlKjmnaHku7bpmZDliLYgMC3ml6DmnaHku7bkvb/nlKggMS3kvb/nlKjpmZDliLbmnaHku7ZcclxuICAgIHZhciBoYXNDaG9pY2U9W107Ly9UT0RPOuiAg+iZkeWIsOWQjuWPsOS8oOWAvO+8jOmcgOimgeabtOWKoOWujOWWhOWKn+iDvVxyXG4gICAgdmFyIGFsbEZvcm1Nc2c7Ly/ooajljZXkv6Hmga/lr7nosaFcclxuICAgIHZhciBjb3Vwb25OYW1lOy8v5LyY5oOg5Yi45ZCN56ewXHJcbiAgICB2YXIgY291cG9uUHJpY2U7Ly/kvJjmg6DliLjpnaLpop1cclxuICAgIHZhciBwb3BXYXk7Ly/lj5HooYzmlrnlvI9cclxuICAgIHZhciBnb29kc1JhbmdlPVtdOy8v5ZWG5ZOB6IyD5Zu05pWw57uEaWQtLXRhYlxyXG4gICAgdmFyIGlzVGVuPTA7Ly/kvb/nlKjmnaHku7ZcclxuICAgIHZhciB0aW1lU3RhcnQ7Ly/lvIDlp4vml7bpl7RcclxuICAgIHZhciB0aW1lRW5kOy8v57uT5p2f5pe26Ze0XHJcbiAgICB2YXIgcG9wTnVtOy8v5Y+R6KGM6YePXHJcbiAgICB2YXIgcGVvcGxlTGltOy8v5q+P5Lq66ZmQ6aKGXHJcbiAgICB2YXIgaXNUb0RldGFpbDsvL+aYr+WQpuaKleaUvuiHs+WVhuWTgeivpuaDhemhtVxyXG4gICAgdmFyIHR5cGU7Ly/pobXpnaLlm57kvKDmlbAgMC3llYblk4EgMS3lupfpk7pcclxuICAgIHZhciBwYWdlX3R5cGU7Ly/lvZPliY3pobXpnaLmmK/nvJbovpHpobXov5jmmK/liJvlu7rpobUgIC0w5Yib5bu6ICAx57yW6L6RXHJcbiAgICB2YXIgY21wPSQudHJpbSgkKCdbbmFtZT1cImNvdW50XCJdJykudmFsKCkpOy8v5Y+Y6YeP5Li657yW6L6R6aG15Y+R6KGM6YeP5pen5YC8XHJcbiAgICBwb3BXYXk9XCIwXCI7XHJcbiAgICBwYWdlX3R5cGU9JCgnLmZvcm1Db250ZW50JykuZGF0YShcInBhZ2VfdHlwZVwiKTtcclxuICAgIC8v5Yid5aeL5YyW5bey5pyJ5pWw57uE5a+56LGhXHJcbiAgICB2YXIgZWRpdElkPUdldFF1ZXJ5U3RyaW5nKFwiaWRcIik7XHJcbiAgICBjb25zb2xlLmxvZyhlZGl0SWQpO1xyXG4gICAgaWYoR2V0UXVlcnlTdHJpbmcoXCJ0eXBlXCIpPT0wIHx8IEdldFF1ZXJ5U3RyaW5nKFwidHlwZVwiKT09MSApey8v6I635Y+WdHlwZeWAvO+8jOe8lui+kemhteS4juWIm+W7uumhtVxyXG4gICAgICAgIHR5cGU9R2V0UXVlcnlTdHJpbmcoXCJ0eXBlXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzaGFuZycpXHJcbiAgICB9ZWxzZXtcclxuICAgICAgICB0eXBlPSQoJy5wbHVzQXJlYScpLmF0dHIoJ2RhdGEtcGx1cy10eXBlJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3hpYScpXHJcbiAgICB9XHJcbiAgICAvL+e8lui+kemhteWIneWni+WMlmhhc0Nob2ljZeWAvCBcclxuICAgICQoJy5hZGRlZExpc3QgLmFkZGVkSXRlbScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICBoYXNDaG9pY2UucHVzaCgkKHRoaXMpLmRhdGEoJ2lkJykpO1xyXG4gICAgfSlcclxuICAgIGNvbnNvbGUubG9nKHR5cGUpO1xyXG4gICAgLy/ml6XmnJ/pgInmi6nlmajliJ3lp4vljJYgICAgXHJcbiAgICBhbGl2ZVRpbWVDb25maWcoXCIuZGF0ZVNldElucHV0XCIpO1xyXG4gICAgK2Z1bmN0aW9uKCl7XHJcbiAgICAgICAgLy/lvZPliY3liJvlu7rnmoTkvJjmg6DliLjmmK/vvJogMC3llYblk4EgMS3lupfpk7pcclxuICAgICAgICBpZih0eXBlPT0wKXtcclxuICAgICAgICAgICAgJCgnLmlzR29vZHMnKS5hdHRyKCdzdHlsZScsJycpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkKCcuaXNHb29kcycpLmF0dHIoJ3N0eWxlJywnZGlzcGxheTpub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6KGo5qC85aS06YOo5o+Q56S6LS3kuI3lho3mj5DnpLpcclxuICAgICAgICAkKCcucmVtaW5kVG9wIGEnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciB1cmw9Jy9jb3Vwb24vY2xvc2UvJyArICQodGhpcykuc2libGluZ3MoJ3NwYW4nKS5hdHRyKCdkYXRhLXBsYWNlJyk7XHJcbiAgICAgICAgICAgICQoJy5yZW1pbmRUb3AnKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBkYXRhOntcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5jb2RlPT0wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoZGF0YS5tc2cpXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKGRhdGEubXNnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Ioc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8g5LyY5oOg5Yi45L2/55So6IyD5Zu06ZmQ5a6aXHJcbiAgICAgICAgJCgnW2Zvcj1cInVzZUNkbl8xXCJdJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAkKCdbbmFtZT1cInJlX3ByaWNlXCJdJykucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpLnJlbW92ZUF0dHIoXCJyZWFkb25seVwiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKCdbZm9yPVwidXNlQ2RuXzJcIl0nKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoJ1tuYW1lPVwicmVfcHJpY2VcIl0nKS5hdHRyKFwiZGlzYWJsZWRcIix0cnVlKS5hdHRyKFwicmVhZG9ubHlcIix0cnVlKS52YWwoJycpO1xyXG4gICAgICAgICAgICBzZXRDb25kaXRpb24oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyDmt7vliqDllYblk4HojIPlm7RcclxuICAgICAgICAkKFwiLnBsdXNBcmVhXCIpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgLy8gJCh0aGlzKS51bmJpbmQoXCJjbGlja1wiKTsgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbHVzQXJlYSB0ZXN0JylcclxuICAgICAgICAgICAgJCgnLmluaXRMaXN0JykuaHRtbCgpO1xyXG4gICAgICAgICAgICAkKCcuYWRkQm94IFt0eXBlPVwiY2hlY2tCb3hcIl0nKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICQoJyNhZGRNb2RhbCcpLmZhZGVJbigyMDApO1xyXG5cclxuICAgICAgICAgICAgLy8gJCh0aGlzKS5iaW5kKFwiY2xpY2tcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/lhbPpl63lvLnnqpdcclxuICAgICAgICAkKCcuY2xvc2VQb3AnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoJyNhZGRNb2RhbCcpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyB0YWLliIfmjaJcclxuICAgICAgICAkKCdkaXYudGFiIGEnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJjbGlja2VkXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJjbGlja2VkXCIpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgdGFiU3RhdHVzPSQodGhpcykuYXR0cihcImRhdGEtdHlwZVwiKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyh0YWJTdGF0dXMpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoKHRhYlN0YXR1cyl7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiMFwiOiQoJyN0YWJfMCcpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMSwjdGFiXzJcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIxXCI6JCgnI3RhYl8xJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8wLCN0YWJfMlwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjJcIjokKCcjdGFiXzInKS5zaG93KCkuc2libGluZ3MoXCIjdGFiXzEsI3RhYl8wXCIpLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy/llYblk4HojIPlm7TmkJzntKLmjInplK7pg6jliIZcclxuICAgICAgICAkKCcjZm9yVGFiJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIga3cgPSAkKCcja3dDb250ZW50JykudmFsKCk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGt3KTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2codGFiU3RhdHVzKVxyXG4gICAgICAgICAgICAvLyBpZihrdy5sZW5ndGg9PTApe1xyXG4gICAgICAgICAgICAvLyAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+36L6T5YWl5pCc57Si5YaF5a6577yBXCIpO1xyXG4gICAgICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiAnL2NvdXBvbi9hZGRfcHJvZHVjdHMnLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwiaHRtbFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YTp7XHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdGU6dGFiU3RhdHVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGt3Omt3XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5pbml0TGlzdCcpLmh0bWwoZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoKHRhYlN0YXR1cyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIwXCI6JCgnI3RhYl8wJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8xLCN0YWJfMlwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIxXCI6JCgnI3RhYl8xJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8wLCN0YWJfMlwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgXCIyXCI6JCgnI3RhYl8yJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8xLCN0YWJfMFwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeGhyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihzdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICQoXCIubG9hZGluZ1NcIikuZmFkZU91dCgzMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOmDqOWIhuS6i+S7tu+8iOS9v+eUqOadoeS7tuS4juWVhuWutuWPkeaUvu+8iVxyXG4gICAgICAgICQoJ2lucHV0LmZ1bmMnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiZnVuY0NsaWNrXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJmdW5jQ2xpY2tcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICBpZigkKHRoaXMpLnZhbCgpPT1cIueUqOaIt+mihuWPllwiKXtcclxuICAgICAgICAgICAgICAgICQoJy5hYm91dEdldCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHBvcFdheT1cIjBcIjsvL+eUqOaIt+mihuWPllxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICQoJy5hYm91dEdldCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5hYm91dEdldCAjcHV0T24nKS5yZW1vdmVBdHRyKCdjaGVja2VkJylcclxuICAgICAgICAgICAgICAgIHBvcFdheT1cIjFcIjsvL+WVhuWutuWPkeaUvlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5re75Yqg5oyJ6ZKu6YOo5YiGXHJcbiAgICAgICAgJCgnI2FkZCcpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGFyclNpbmdsZT1bXTtcclxuICAgICAgICAgICAgdmFyIGFyclBybz1bXTtcclxuICAgICAgICAgICAgdmFyIGFyck51bT1bXTtcclxuICAgICAgICAgICAgdmFyIHN0YXRlQWxsPVtdO1xyXG4gICAgICAgICAgICAvL+iOt+WPluW8ueeql+WIl+ihqOS4reavj+S4qumAiemhueeahOeJueauiuWAvFxyXG4gICAgICAgICAgICAkKCcjdGFiXzAgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBhcnJTaW5nbGUucHVzaCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdGF0ZT1bXTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1pbWcnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCfljZXlk4EnKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1zdHlsZScpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlQWxsLnB1c2goc3RhdGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnI3RhYl8xIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgYXJyUHJvLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGU9W107XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1uYW1lJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtaW1nJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgn5LiT5qCPJyk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtc3R5bGUnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZUFsbC5wdXNoKHN0YXRlKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnI3RhYl8yIGlucHV0W3R5cGU9XCJjaGVja2JveFwiXTpjaGVja2VkJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgYXJyTnVtLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICB2YXIgc3RhdGU9W107XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1uYW1lJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtaW1nJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgn5Lya5ZGYJyk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtc3R5bGUnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZUFsbC5wdXNoKHN0YXRlKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXRlQWxsKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXJyTnVtKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXJyUHJvKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYXJyU2luZ2xlKTtcclxuICAgICAgICAgICAgdmFyIG5ld0Fycj0gYXJyU2luZ2xlLmNvbmNhdChhcnJOdW0sYXJyUHJvKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGhhc0Nob2ljZSk7XHJcbiAgICAgICAgICAgIGlmKG5ld0Fycj09XCJcIil7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fpgInmi6nopoHmt7vliqDnmoTllYblk4HjgIJcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodW5pcXVlKGhhc0Nob2ljZSxuZXdBcnIpPT0xKXtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+WLv+mHjeWkjemAieaLqea3u+WKoOeahOWVhuWTgeOAglwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBmb3IoaT0wO2k8c3RhdGVBbGwubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZGVkTGlzdCcpLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgZGF0YS10YWI9JyArc3RhdGVBbGxbaV1bNF0rICcgY2xhc3M9XCJhZGRlZEl0ZW1cIiBkYXRhLWlkPVwiJyArIHN0YXRlQWxsW2ldWzNdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJ1wiPjxzcGFuPicrc3RhdGVBbGxbaV1bMl0gKyAnPC9zcGFuPjxpbWcgc3JjPVwiJyArIHN0YXRlQWxsW2ldWzFdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJ1wiIGFsdD1cIicrc3RhdGVBbGxbaV1bMF0gKyAnXCI+PHNwYW4gY2xhc3M9XCJzcGFuQ29uXCI+JyArIHN0YXRlQWxsW2ldWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJzwvc3Bhbj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlIGNsb3NlSXRlbVwiPsOXPC9idXR0b24+PC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGhhc0Nob2ljZT1oYXNDaG9pY2UuY29uY2F0KG5ld0Fycik7XHJcbiAgICAgICAgICAgICAgICAkKCcjYWRkTW9kYWwnKS5mYWRlT3V0KDIwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/liKDpmaTlt7LpgInllYblk4FcclxuICAgICAgICAkKFwiLmFkZGVkTGlzdFwiKS5vbihcImNsaWNrXCIsXCIuY2xvc2VJdGVtXCIsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnByZXYoKS5wcmV2KCkuY2xpY2soKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdmFyIGRlbGV0ZUl0ZW09JCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRlbGV0ZUl0ZW0pO1xyXG4gICAgICAgICAgICBoYXNDaG9pY2UucmVtb3ZlKGRlbGV0ZUl0ZW0pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhoYXNDaG9pY2UpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/kv53lrZjmj5DkuqTpg6jliIYoc3VibWl0KVxyXG4gICAgICAgICQoJyNzdWJtaXRMaXN0Jykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhcImNlc2hpXCIrbmV3Rm9ybUZsYWcpO1xyXG4gICAgICAgICAgICBpZihuZXdGb3JtRmxhZyl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmV3Rm9ybUZsYWc9dHJ1ZTtcclxuICAgICAgICAgICAgZ29vZHNSYW5nZT1bXTsvL+e9ruepuuaVsOe7hO+8jOmYsuatouaPkOS6pOWksei0peaXtueUn+aIkOmHjeWkjWlkXHJcbiAgICAgICAgICAgICQoJy5hZGRlZEl0ZW0nKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBnb29kc1JhbmdlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLWlkJykrJy0tJyskKHRoaXMpLmF0dHIoJ2RhdGEtdGFiJykpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3RhdGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZ29vZHNSYW5nZSk7ICBcclxuXHJcbiAgICAgICAgICAgIC8v6I635Y+W5YC8XHJcbiAgICAgICAgICAgIGNvdXBvbk5hbWU9JC50cmltKCQoJ1tuYW1lPVwidGl0bGVcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGNvdXBvblByaWNlPU1hdGgucm91bmQoKCQudHJpbSgkKCdbbmFtZT1cInByaWNlXCJdJykudmFsKCkpKSoxMDApO1xyXG4gICAgICAgICAgICAvL+iOt+WPluS9v+eUqOadoeS7tlxyXG4gICAgICAgICAgICBpZigkKCcjdXNlQ2RuXzEnKS5wcm9wKCdjaGVja2VkJykpe1xyXG4gICAgICAgICAgICAgICAgLy8gaXNUZW49cGFyc2VGbG9hdCgkKCdbbmFtZT1cInJlX3ByaWNlXCJdJykudmFsKCkpKjEwMDtcclxuICAgICAgICAgICAgICAgIGxpbWl0U3RhdHVzID0gMTtcclxuICAgICAgICAgICAgICAgIGlzVGVuPU1hdGgucm91bmQocGFyc2VGbG9hdCgkKCdbbmFtZT1cInJlX3ByaWNlXCJdJykudmFsKCkpKjEwMCkgfHwgXCJlbXB0eVwiO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLkvb/nlKjmnaHku7ZcIitpc1Rlbik7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKCQoJyN1c2VDZG5fMicpLnByb3AoJ2NoZWNrZWQnKSl7XHJcbiAgICAgICAgICAgICAgICBsaW1pdFN0YXR1cyA9IDA7XHJcbiAgICAgICAgICAgICAgICBpc1Rlbj0gMCA7XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIC8vIGlzVGVuPU1hdGgucm91bmQocGFyc2VGbG9hdCgkKCdbbmFtZT1cInJlX3ByaWNlXCJdJykudmFsKCkpKjEwMCkgfHwgMDtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpc1RlblwiLGlzVGVuKVxyXG4gICAgICAgICAgICB0aW1lU3RhcnQ9JC50cmltKCQoJ1tuYW1lPVwidmFsaWRfYXRcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIHRpbWVFbmQ9JC50cmltKCQoJ1tuYW1lPVwiaW52YWxpZF9hdFwiXScpLnZhbCgpKTtcclxuICAgICAgICAgICAgcG9wTnVtPSQudHJpbSgkKCdbbmFtZT1cImNvdW50XCJdJykudmFsKCkpO1xyXG4gICAgICAgICAgICBwZW9wbGVMaW09JCgnW25hbWU9XCJyZWNlaXZlX3J1bGVcIl0nKS52YWwoKTtcclxuICAgICAgICAgICAgaWYoJCgnW25hbWU9XCJleHRlbnNpb25cIl0nKS5wcm9wKCdjaGVja2VkJykpe1xyXG4gICAgICAgICAgICAgICAgaXNUb0RldGFpbD0xO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlzVG9EZXRhaWw9MDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/kvKDlh7rmlbDmja7lr7nosaFcclxuICAgICAgICAgICAgYWxsRm9ybU1zZz17XHJcbiAgICAgICAgICAgICAgICB0aXRsZTpjb3Vwb25OYW1lLFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6Y291cG9uUHJpY2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlX3J1bGU6cGVvcGxlTGltLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRfYXQ6dGltZVN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgaW52YWxpZF9hdDp0aW1lRW5kLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9wcmljZTppc1RlbixcclxuICAgICAgICAgICAgICAgIGNvdW50OnBvcE51bSxcclxuICAgICAgICAgICAgICAgIHNwcmVhZF90eXBlOnBvcFdheSxcclxuICAgICAgICAgICAgICAgIGlzX3Nob3c6aXNUb0RldGFpbCxcclxuICAgICAgICAgICAgICAgIHJlc291cmNlOmdvb2RzUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICB0eXBlOnR5cGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihlZGl0SWQpe1xyXG4gICAgICAgICAgICAgICAgYWxsRm9ybU1zZy5pZD1lZGl0SWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYWxsRm9ybU1zZyk7XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhbGxGb3JtTXNnLnByaWNlKVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhbGxGb3JtTXNnLnJlcXVpcmVfcHJpY2UpXHJcbiAgICAgICAgICAgIGlmKHBhZ2VfdHlwZT09MCAmJiBjaGVja0Zvcm0oYWxsRm9ybU1zZyxjbXAsbGltaXRTdGF0dXMpKXtcclxuICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oXCIvY291cG9uL2FkZFwiLGFsbEZvcm1Nc2cpO1xyXG4gICAgICAgICAgICB9ZWxzZSBpZihwYWdlX3R5cGU9PTEgJiYgY2hlY2tGb3JtKGFsbEZvcm1Nc2csY21wKSl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnY2hlY2sgaXMgdHVyZScpXHJcbiAgICAgICAgICAgICAgICBzdWJtaXRGb3JtKFwiL2NvdXBvbi9lZGl0Q291cG9uXCIsYWxsRm9ybU1zZyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgfSgpXHJcbiAgICAvL+aPkOS6pOaXtumqjOivgeihqOWNlVxyXG4gICAgZnVuY3Rpb24gY2hlY2tGb3JtKGluZm8sY21wLGxpbWl0KSB7XHJcbiAgICAgICAgbmV3Rm9ybUZsYWc9ZmFsc2U7XHJcbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby50aXRsZSkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LyY5oOg5Yi45ZCN56ew5LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdGb3JtRmxhZyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5wcmljZSkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LyY5oOg5Yi46Z2i6aKd5LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHBhcnNlRmxvYXQoaW5mby5jb3VudCk8cGFyc2VGbG9hdChjbXApKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5L+u5pS55Y+R6KGM6YeP5Y+q6IO95aKe5LiN6IO95YeP77yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8udmFsaWRfYXQpJiYkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uaW52YWxpZF9hdCkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pyJ5pWI5pyf6LW35q2i5pe26Ze05LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uY291bnQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuWPkeihjOaVsOmHj+S4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBpZihpbmZvLnR5cGU9PTApe1xyXG4gICAgICAgIC8vICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnJlc291cmNlKSkge1xyXG4gICAgICAgIC8vICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5ZWG5ZOB6IyD5Zu05LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgIC8vICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja1RpbWUoaW5mby52YWxpZF9hdCkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pyJ5pWI5pyf5byA5aeL5pe26Ze05qC85byP6ZSZ6K+vXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja1RpbWUoaW5mby5pbnZhbGlkX2F0KSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnInmlYjmnJ/nu5PmnZ/ml7bpl7TmoLzlvI/plJnor69cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaW5mby5yZXF1aXJlX3ByaWNlID09PSBcImVtcHR5XCIpe1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkvb/nlKjmnaHku7bkuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoISRmb3JtQ2hlY2suY2hlY2tUaW1lT3JkZXIoaW5mby52YWxpZF9hdCxpbmZvLmludmFsaWRfYXQpKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pyJ5pWI5pyf57uT5p2f5pe26Ze05b+F6aG75aSn5LqO5byA5aeL5pe26Ze077yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja051bShpbmZvLnByaWNlKSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmgqjnmoTpnaLpop3ovpPlhaXmoLzlvI/mnInor6/vvIzor7fph43mlrDovpPlhaXvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrTnVtKGluZm8uY291bnQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaCqOeahOWPkeihjOmHj+i+k+WFpeagvOW8j+acieivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihpbmZvLnJlcXVpcmVfcHJpY2U9PU5hTiB8fCBpbmZvLnJlcXVpcmVfcHJpY2U9PW51bGwpe1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkvJjmg6DliLjpnaLpop3kuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaW5mby5wcmljZT49aW5mby5yZXF1aXJlX3ByaWNlICYmIGxpbWl0ID09IDEpe1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkvJjmg6DliLjpnaLpop3opoHlsI/kuo7kvb/nlKjmnaHku7bvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbmV3Rm9ybUZsYWc9dHJ1ZTtcclxuICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAvLyBpZih1cGxvYWRDaGFubmVsVHlwZT09IDEgJiYgaW5mby5wYXltZW50X3R5cGU9PSAyICYmIGluZm8ucGllY2VfcHJpY2UgPiBiYXNlVXRpbHMubWF4SW5wdXRQcmljZSAqIDEwMCl7XHJcbiAgICAgICAgLy8gICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS7t+agvOS4jeiDveWkp+S6jiBcIiArIGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICsgXCIg5bygXCIpO1xyXG4gICAgICAgIC8vICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG4gICAgLy/ooajljZXmj5DkuqTmlrnms5VcclxuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0odXJsLGFsbG1hZyl7XHJcbiAgICAgICAgJC5hamF4KHVybCx7XHJcbiAgICAgICAgICAgIHR5cGU6J1BPU1QnLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTonSlNPTicsXHJcbiAgICAgICAgICAgIGRhdGE6YWxsbWFnLFxyXG4gICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgaWYoZGF0YS5jb2RlPT0wKXtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKGRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj1cIi9jb3Vwb24vaW5kZXhcIlxyXG4gICAgICAgICAgICAgICAgfWVsc2UgaWYoZGF0YS5jb2RlPT0tMSl7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXdGb3JtRmxhZz1mYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyByZWxvYWRQYWdlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsc3RhdHVzLGVycil7XHJcbiAgICAgICAgICAgICAgICBuZXdGb3JtRmxhZz1mYWxzZTtcclxuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSlcclxuICAgIH1cclxuICAgIC8v5p+l6YeN5pa55rOVXHJcbiAgICBmdW5jdGlvbiB1bmlxdWUoYXJyMSxhcnIyKXtcclxuICAgICAgICB2YXIgaXRlbT0wO1xyXG4gICAgICAgIGZvcih2YXIgaT0wO2k8YXJyMS5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgaWYoYXJyMi5pbmRleE9mKGFycjFbaV0pIT0tMSl7XHJcbiAgICAgICAgICAgICAgICBpdGVtPTE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGl0ZW07XHJcbiAgICB9XHJcbiAgICAvL+WIoOmZpOaVsOe7hOWFg+e0oOaWueazlVxyXG4gICAgQXJyYXkucHJvdG90eXBlLnJlbW92ZSA9IGZ1bmN0aW9uKHZhbCkge1xyXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuaW5kZXhPZih2YWwpO1xyXG4gICAgICAgIGlmIChpbmRleCA+IC0xKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgLy8gaW5pdCgpXHJcbiAgICAvLyBmdW5jdGlvbiBpbml0KCl7XHJcbiAgICAvLyAgICAgc3dpdGNoKHRhYlN0YXR1cyl7XHJcbiAgICAvLyAgICAgICAgIGNhc2UgXCIwXCI6JCgnI3RhYl8wJykuc2hvdygpLiQoXCIjdGFiXzEsI3RhYl8yXCIpLmhpZGRlbigpXHJcbiAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICBjYXNlIFwiMVwiOiQoJyN0YWJfMScpLnNob3coKS4kKFwiI3RhYl8wLCN0YWJfMlwiKS5oaWRkZW4oKVxyXG4gICAgLy8gICAgICAgICBicmVhaztcclxuICAgIC8vICAgICAgICAgY2FzZSBcIjJcIjokKCcjdGFiXzInKS5zaG93KCkuJChcIiN0YWJfMSwjdGFiXzBcIikuaGlkZGVuKClcclxuICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAvLyAgICAgfVxyXG4gICAgLy8gfVxyXG59XHJcbmZ1bmN0aW9uIGluaXQoKXsvL+WIneWni+WMluS8mOaDoOWIuOWVhuWTgeW8ueeql+WGheWuuVxyXG4gICAgJC5hamF4KHtcclxuICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgIHVybDogJy9jb3Vwb24vYWRkX3Byb2R1Y3RzJyxcclxuICAgICAgICBkYXRhVHlwZTogXCJodG1sXCIsXHJcbiAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgJCgnLmluaXRMaXN0JykuaHRtbChkYXRhKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihzdGF0dXMpO1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xyXG4gICAgICAgICAgICAvL2hpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIC8vICQoXCIubG9hZGluZ1NcIikuZmFkZU91dCgzMDApO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn1cclxuZnVuY3Rpb24gY2xlYXJOb051bShvYmopeyBcclxuICAgb2JqLnZhbHVlID0gb2JqLnZhbHVlLnJlcGxhY2UoL1teXFxkLl0vZyxcIlwiKTsgIC8v5riF6Zmk4oCc5pWw5a2X4oCd5ZKM4oCcLuKAneS7peWklueahOWtl+espiAgXHJcbiAgIG9iai52YWx1ZSA9IG9iai52YWx1ZS5yZXBsYWNlKC9cXC57Mix9L2csXCIuXCIpOyAvL+WPquS/neeVmeesrOS4gOS4qi4g5riF6Zmk5aSa5L2Z55qEICBcclxuICAgb2JqLnZhbHVlID0gb2JqLnZhbHVlLnJlcGxhY2UoXCIuXCIsXCIkIyRcIikucmVwbGFjZSgvXFwuL2csXCJcIikucmVwbGFjZShcIiQjJFwiLFwiLlwiKTsgXHJcbiAgIG9iai52YWx1ZSA9IG9iai52YWx1ZS5yZXBsYWNlKC9eKFxcLSkqKFxcZCspXFwuKFxcZFxcZCkuKiQvLCckMSQyLiQzJyk7Ly/lj6rog73ovpPlhaXkuKTkuKrlsI/mlbAgIFxyXG4gICBpZihvYmoudmFsdWUuaW5kZXhPZihcIi5cIik8IDAgJiYgb2JqLnZhbHVlICE9XCJcIil7Ly/ku6XkuIrlt7Lnu4/ov4fmu6TvvIzmraTlpITmjqfliLbnmoTmmK/lpoLmnpzmsqHmnInlsI/mlbDngrnvvIzpppbkvY3kuI3og73kuLrnsbvkvLzkuo4gMDHjgIEwMueahOmHkeminSBcclxuICAgICAgIG9iai52YWx1ZT0gcGFyc2VGbG9hdChvYmoudmFsdWUpOyBcclxuICAgfSBcclxufSBcclxuZnVuY3Rpb24gc2V0Q29uZGl0aW9uKCl7XHJcbiAgICAkKCcudGhlVGVuJykuaHRtbChwYXJzZUZsb2F0KCQoJ1tuYW1lPVwicHJpY2VcIl0nKS52YWwoKSkrMC4xKTtcclxufSJdfQ==
