var newFormFlag=false;$(function(){init();newCoupon()});function newCoupon(){var e=0;var a=[];var t=[];var s;var o;var r;var n;var l=[];var c=0;var u;var d;var p;var h;var f;var v;var m;var b=$.trim($('[name="count"]').val());n="0";m=$(".formContent").data("page_type");var g=GetQueryString("id");console.log(g);if(GetQueryString("type")==0||GetQueryString("type")==1){v=GetQueryString("type");console.log("shang")}else{v=$(".plusArea").attr("data-plus-type");console.log("xia")}$(".addedList .addedItem").each(function(){t.push($(this).data("id"))});console.log(v);aliveTimeConfig(".dateSetInput");+function(){if(v==0){$(".isGoods").attr("style","")}else{$(".isGoods").attr("style","display:none")}$(".remindTop a").on("click",function(){var e="/coupon/close/"+$(this).siblings("span").attr("data-place");$(".remindTop").remove();$.ajax({type:"GET",url:e,data:{},success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg)}else{baseUtils.show.blueTip(e.msg)}},error:function(e,a,t){console.log(e);console.error(t);console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$(".plusArea").on("click",function(){console.log("plusArea test");$(".initList").html();$('.addBox [type="checkBox"]').removeAttr("checked");$("#addModal").fadeIn(200)});$(".closePop").on("click",function(){$("#addModal").fadeOut(200)});$("div.tab a").on("click",function(){$(this).addClass("clicked").siblings().removeClass("clicked");e=$(this).attr("data-type");console.log(e);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}});$("#forTab").on("click",function(){var a=$("#kwContent").val();$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",data:{state:e,kw:a},success:function(a){$(".initList").html(a);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}},error:function(e,a,t){console.log(e);console.error(t);console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$("input.func").on("click",function(){console.log("teste");$(this).addClass("funcClick").siblings().removeClass("funcClick");console.log($(this).val());if($(this).val()=="用户领取"){$(".aboutGet").show();n="0"}else{$(".aboutGet").hide();$(".aboutGet #putOn").removeAttr("checked");n="1"}});$("#add").on("click",function(){var e=[];var a=[];var s=[];var o=[];$('#tab_0 input[type="checkbox"]:checked').each(function(){e.push($(this).val());var a=[];a.push($(this).attr("data-name"));a.push($(this).attr("data-img"));a.push("单品");a.push($(this).val());a.push($(this).attr("data-style"));o.push(a)});$('#tab_1 input[type="checkbox"]:checked').each(function(){a.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("专栏");e.push($(this).val());e.push($(this).attr("data-style"));o.push(e)});$('#tab_2 input[type="checkbox"]:checked').each(function(){s.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("会员");e.push($(this).val());e.push($(this).attr("data-style"));o.push(e)});console.log(e);var r=e.concat(s,a);console.log(t);if(r==""){baseUtils.show.redTip("请选择要添加的商品。");return false}if(_(t,r)==1){baseUtils.show.redTip("请勿重复选择添加的商品。");return false}else{for(i=0;i<o.length;i++){$(".addedList").append("<div data-tab="+o[i][4]+' class="addedItem" data-id="'+o[i][3]+'"><span>'+o[i][2]+'</span><img src="'+o[i][1]+'" alt="'+o[i][0]+'"><span class="spanCon">'+o[i][0]+'</span><button type="button" class="close closeItem">×</button></div>')}t=t.concat(r);$("#addModal").fadeOut(200)}});$(".addedList").on("click",".closeItem",function(){$(this).prev().prev().click();$(this).parent().remove();var e=$(this).parent().attr("data-id");console.log(e);t.remove(e);console.log(t)});$("#submitList").on("click",function(){console.log("ceshi"+newFormFlag);if(newFormFlag){return false}newFormFlag=true;l=[];$(".addedItem").each(function(){l.push($(this).attr("data-id")+"--"+$(this).attr("data-tab"))});console.log(l);o=$.trim($('[name="title"]').val());r=parseFloat($.trim($('[name="price"]').val()))*100;c=parseFloat($('[name="re_price"]').val())*100;console.log("isTen",c);u=$.trim($('[name="valid_at"]').val());d=$.trim($('[name="invalid_at"]').val());p=$.trim($('[name="count"]').val());h=$('[name="receive_rule"]').val();if($('[name="extension"]').prop("checked")){f=1}else{f=0}s={title:o,price:r,receive_rule:h,valid_at:u,invalid_at:d,require_price:c,count:p,spread_type:n,is_show:f,resource:l,type:v};if(g){s.id=g}if(m==0&&k(s,b)){w("/coupon/add",s)}else if(m==1&&k(s,b)){console.log("check is ture");w("/coupon/editCoupon",s)}})}();function k(e,a){newFormFlag=false;if($formCheck.emptyString(e.title)){baseUtils.show.redTip("优惠券名称不能为空！");console.log(newFormFlag);return false}if($formCheck.emptyString(e.price)){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(parseFloat(e.count)<parseFloat(a)){baseUtils.show.redTip("修改发行量只能增不能减！");return false}if($formCheck.emptyString(e.valid_at)&&$formCheck.emptyString(e.invalid_at)){baseUtils.show.redTip("有效期起止时间不能为空！");return false}if($formCheck.emptyString(e.count)){baseUtils.show.redTip("发行数量不能为空！");return false}if(!$formCheck.checkTime(e.valid_at)){baseUtils.show.redTip("有效期开始时间格式错误");return false}if(!$formCheck.checkTime(e.invalid_at)){baseUtils.show.redTip("有效期结束时间格式错误");return false}if(!e.require_price){baseUtils.show.redTip("使用条件不能为空！");return false}if(!$formCheck.checkTimeOrder(e.valid_at,e.invalid_at)){baseUtils.show.redTip("有效期结束时间必须大于开始时间！");return false}if(!$formCheck.checkNum(e.price)){baseUtils.show.redTip("您的面额输入格式有误，请重新输入！");return false}if(!$formCheck.checkNum(e.count)){baseUtils.show.redTip("您的发行量输入格式有误，请重新输入！");return false}if(e.require_price==NaN||e.require_price==null){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(e.price>=e.require_price){baseUtils.show.redTip("优惠券面额要小于使用条件！");return false}newFormFlag=true;return true}function w(e,a){$.ajax(e,{type:"POST",dataType:"JSON",data:a,success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg);window.location.href="/coupon/index"}else if(e.code==-1){baseUtils.show.redTip(e.msg);newFormFlag=false}},error:function(e,a,t){newFormFlag=false;hideLoading();console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function _(e,a){var t=0;for(var i=0;i<e.length;i++){if(a.indexOf(e[i])!=-1){t=1}}return t}Array.prototype.remove=function(e){var a=this.indexOf(e);if(a>-1){this.splice(a,1)}}}function init(){$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",success:function(e){$(".initList").html(e)},error:function(e,a,t){console.log(e);console.error(t);console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function clearNoNum(e){e.value=e.value.replace(/[^\d.]/g,"");e.value=e.value.replace(/\.{2,}/g,".");e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");if(e.value.indexOf(".")<0&&e.value!=""){e.value=parseFloat(e.value)}}function setCondition(){$(".theTen").html(parseFloat($('[name="price"]').val())+.1)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld0Zvcm0uanMiXSwibmFtZXMiOlsibmV3Rm9ybUZsYWciLCIkIiwiaW5pdCIsIm5ld0NvdXBvbiIsInRhYlN0YXR1cyIsImZvcm1TdGF0dXMiLCJoYXNDaG9pY2UiLCJhbGxGb3JtTXNnIiwiY291cG9uTmFtZSIsImNvdXBvblByaWNlIiwicG9wV2F5IiwiZ29vZHNSYW5nZSIsImlzVGVuIiwidGltZVN0YXJ0IiwidGltZUVuZCIsInBvcE51bSIsInBlb3BsZUxpbSIsImlzVG9EZXRhaWwiLCJ0eXBlIiwicGFnZV90eXBlIiwiY21wIiwidHJpbSIsInZhbCIsImRhdGEiLCJlZGl0SWQiLCJHZXRRdWVyeVN0cmluZyIsImNvbnNvbGUiLCJsb2ciLCJhdHRyIiwiZWFjaCIsInB1c2giLCJ0aGlzIiwiYWxpdmVUaW1lQ29uZmlnIiwib24iLCJ1cmwiLCJzaWJsaW5ncyIsInJlbW92ZSIsImFqYXgiLCJzdWNjZXNzIiwiY29kZSIsImJhc2VVdGlscyIsInNob3ciLCJibHVlVGlwIiwibXNnIiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJyZWRUaXAiLCJodG1sIiwicmVtb3ZlQXR0ciIsImZhZGVJbiIsImZhZGVPdXQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiaGlkZSIsImt3IiwiZGF0YVR5cGUiLCJzdGF0ZSIsImFyclNpbmdsZSIsImFyclBybyIsImFyck51bSIsInN0YXRlQWxsIiwibmV3QXJyIiwiY29uY2F0IiwidW5pcXVlIiwiaSIsImxlbmd0aCIsImFwcGVuZCIsInByZXYiLCJjbGljayIsInBhcmVudCIsImRlbGV0ZUl0ZW0iLCJwYXJzZUZsb2F0IiwicHJvcCIsInRpdGxlIiwicHJpY2UiLCJyZWNlaXZlX3J1bGUiLCJ2YWxpZF9hdCIsImludmFsaWRfYXQiLCJyZXF1aXJlX3ByaWNlIiwiY291bnQiLCJzcHJlYWRfdHlwZSIsImlzX3Nob3ciLCJyZXNvdXJjZSIsImlkIiwiY2hlY2tGb3JtIiwic3VibWl0Rm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJjaGVja1RpbWUiLCJjaGVja1RpbWVPcmRlciIsImNoZWNrTnVtIiwiTmFOIiwiYWxsbWFnIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiaGlkZUxvYWRpbmciLCJhcnIxIiwiYXJyMiIsIml0ZW0iLCJpbmRleE9mIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJpbmRleCIsInNwbGljZSIsImNsZWFyTm9OdW0iLCJvYmoiLCJ2YWx1ZSIsInJlcGxhY2UiLCJzZXRDb25kaXRpb24iXSwibWFwcGluZ3MiOiJBQUNBLEdBQUlBLGFBQVksS0FDaEJDLEdBQUUsV0FDRUMsTUFDQUMsY0FHSixTQUFTQSxhQUNMLEdBQUlDLEdBQVksQ0FDaEIsSUFBSUMsS0FDSixJQUFJQyxLQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsS0FDSixJQUFJQyxHQUFNLENBQ1YsSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxHQUFJbkIsRUFBRW9CLEtBQUtwQixFQUFFLGtCQUFrQnFCLE1BQ25DWixHQUFPLEdBQ1BTLEdBQVVsQixFQUFFLGdCQUFnQnNCLEtBQUssWUFFakMsSUFBSUMsR0FBT0MsZUFBZSxLQUMxQkMsU0FBUUMsSUFBSUgsRUFDWixJQUFHQyxlQUFlLFNBQVMsR0FBS0EsZUFBZSxTQUFTLEVBQUcsQ0FDdkRQLEVBQUtPLGVBQWUsT0FDcEJDLFNBQVFDLElBQUksYUFDWCxDQUNEVCxFQUFLakIsRUFBRSxhQUFhMkIsS0FBSyxpQkFDekJGLFNBQVFDLElBQUksT0FHaEIxQixFQUFFLHlCQUF5QjRCLEtBQUssV0FDNUJ2QixFQUFVd0IsS0FBSzdCLEVBQUU4QixNQUFNUixLQUFLLFFBRWhDRyxTQUFRQyxJQUFJVCxFQUVaYyxpQkFBZ0Isa0JBQ2YsV0FFRyxHQUFHZCxHQUFNLEVBQUUsQ0FDUGpCLEVBQUUsWUFB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LEVBQUlDLE9BQVEsR0FBRyxDQUMzQ0QsRUFBSUMsTUFBT3JDLFdBQVdvQyxFQUFJQyxRQUdqQyxRQUFTRSxnQkFDTC9HLEVBQUUsV0FBV2dELEtBQUt3QixXQUFXeEUsRUFBRSxrQkFBa0JxQixPQUFPIiwiZmlsZSI6Im5ld0Zvcm0uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBjcmVhdCBieSBKZXJ2aXNcclxudmFyIG5ld0Zvcm1GbGFnPWZhbHNlOy8v5pa55rOV6ZSB5Y+Y6YePXHJcbiQoZnVuY3Rpb24oKXtcclxuICAgIGluaXQoKTtcclxuICAgIG5ld0NvdXBvbigpO1xyXG59KTtcclxuXHJcbmZ1bmN0aW9uIG5ld0NvdXBvbigpe1xyXG4gICAgdmFyIHRhYlN0YXR1cyA9IDA7Ly90YWLpgInpobnljaHnirbmgIHliJ3lp4vnirbmgIEwXHJcbiAgICB2YXIgZm9ybVN0YXR1cz1bXTtcclxuICAgIHZhciBoYXNDaG9pY2U9W107Ly9UT0RPOuiAg+iZkeWIsOWQjuWPsOS8oOWAvO+8jOmcgOimgeabtOWKoOWujOWWhOWKn+iDvVxyXG4gICAgdmFyIGFsbEZvcm1Nc2c7Ly/ooajljZXkv6Hmga/lr7nosaFcclxuICAgIHZhciBjb3Vwb25OYW1lOy8v5LyY5oOg5Yi45ZCN56ewXHJcbiAgICB2YXIgY291cG9uUHJpY2U7Ly/kvJjmg6DliLjpnaLpop1cclxuICAgIHZhciBwb3BXYXk7Ly/lj5HooYzmlrnlvI9cclxuICAgIHZhciBnb29kc1JhbmdlPVtdOy8v5ZWG5ZOB6IyD5Zu05pWw57uEaWQtLXRhYlxyXG4gICAgdmFyIGlzVGVuPTA7Ly/kvb/nlKjmnaHku7ZcclxuICAgIHZhciB0aW1lU3RhcnQ7Ly/lvIDlp4vml7bpl7RcclxuICAgIHZhciB0aW1lRW5kOy8v57uT5p2f5pe26Ze0XHJcbiAgICB2YXIgcG9wTnVtOy8v5Y+R6KGM6YePXHJcbiAgICB2YXIgcGVvcGxlTGltOy8v5q+P5Lq66ZmQ6aKGXHJcbiAgICB2YXIgaXNUb0RldGFpbDsvL+aYr+WQpuaKleaUvuiHs+WVhuWTgeivpuaDhemhtVxyXG4gICAgdmFyIHR5cGU7Ly/pobXpnaLlm57kvKDmlbAgMC3llYblk4EgMS3lupfpk7pcclxuICAgIHZhciBwYWdlX3R5cGU7Ly/lvZPliY3pobXpnaLmmK/nvJbovpHpobXov5jmmK/liJvlu7rpobUgIC0w5Yib5bu6ICAx57yW6L6RXHJcbiAgICB2YXIgY21wPSQudHJpbSgkKCdbbmFtZT1cImNvdW50XCJdJykudmFsKCkpOy8v5Y+Y6YeP5Li657yW6L6R6aG15Y+R6KGM6YeP5pen5YC8XHJcbiAgICBwb3BXYXk9XCIwXCI7XHJcbiAgICBwYWdlX3R5cGU9JCgnLmZvcm1Db250ZW50JykuZGF0YShcInBhZ2VfdHlwZVwiKTtcclxuICAgIC8v5Yid5aeL5YyW5bey5pyJ5pWw57uE5a+56LGhXHJcbiAgICB2YXIgZWRpdElkPUdldFF1ZXJ5U3RyaW5nKFwiaWRcIik7XHJcbiAgICBjb25zb2xlLmxvZyhlZGl0SWQpO1xyXG4gICAgaWYoR2V0UXVlcnlTdHJpbmcoXCJ0eXBlXCIpPT0wIHx8IEdldFF1ZXJ5U3RyaW5nKFwidHlwZVwiKT09MSApey8v6I635Y+WdHlwZeWAvO+8jOe8lui+kemhteS4juWIm+W7uumhtVxyXG4gICAgICAgIHR5cGU9R2V0UXVlcnlTdHJpbmcoXCJ0eXBlXCIpO1xyXG4gICAgICAgIGNvbnNvbGUubG9nKCdzaGFuZycpXHJcbiAgICB9ZWxzZXtcclxuICAgICAgICB0eXBlPSQoJy5wbHVzQXJlYScpLmF0dHIoJ2RhdGEtcGx1cy10eXBlJyk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3hpYScpXHJcbiAgICB9XHJcbiAgICAvL+e8lui+kemhteWIneWni+WMlmhhc0Nob2ljZeWAvCBcclxuICAgICQoJy5hZGRlZExpc3QgLmFkZGVkSXRlbScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICBoYXNDaG9pY2UucHVzaCgkKHRoaXMpLmRhdGEoJ2lkJykpO1xyXG4gICAgfSlcclxuICAgIGNvbnNvbGUubG9nKHR5cGUpO1xyXG4gICAgLy/ml6XmnJ/pgInmi6nlmajliJ3lp4vljJYgICAgXHJcbiAgICBhbGl2ZVRpbWVDb25maWcoXCIuZGF0ZVNldElucHV0XCIpO1xyXG4gICAgK2Z1bmN0aW9uKCl7XHJcbiAgICAgICAgLy/lvZPliY3liJvlu7rnmoTkvJjmg6DliLjmmK/vvJogMC3llYblk4EgMS3lupfpk7pcclxuICAgICAgICBpZih0eXBlPT0wKXtcclxuICAgICAgICAgICAgJCgnLmlzR29vZHMnKS5hdHRyKCdzdHlsZScsJycpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAkKCcuaXNHb29kcycpLmF0dHIoJ3N0eWxlJywnZGlzcGxheTpub25lJyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8v6KGo5qC85aS06YOo5o+Q56S6LS3kuI3lho3mj5DnpLpcclxuICAgICAgICAkKCcucmVtaW5kVG9wIGEnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciB1cmw9Jy9jb3Vwb24vY2xvc2UvJyArICQodGhpcykuc2libGluZ3MoJ3NwYW4nKS5hdHRyKCdkYXRhLXBsYWNlJyk7XHJcbiAgICAgICAgICAgICQoJy5yZW1pbmRUb3AnKS5yZW1vdmUoKTtcclxuXHJcbiAgICAgICAgICAgICQuYWpheCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgdXJsOiB1cmwsXHJcbiAgICAgICAgICAgICAgICBkYXRhOntcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5jb2RlPT0wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoZGF0YS5tc2cpXHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKGRhdGEubXNnKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Ioc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgfSlcclxuICAgICAgICBcclxuICAgICAgICAvLyDkvJjmg6DliLjkvb/nlKjojIPlm7TpmZDlrppcclxuICAgICAgICAvLyAkKCdbZm9yPVwidXNlQ2RuXzFcIl0nKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy8gICAgICQoJ1tuYW1lPVwicmVfcHJpY2VcIl0nKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikucmVtb3ZlQXR0cihcInJlYWRvbmx5XCIpO1xyXG4gICAgICAgIC8vIH0pXHJcbiAgICAgICAgLy8gJCgnW2Zvcj1cInVzZUNkbl8yXCJdJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIC8vICAgICAkKCdbbmFtZT1cInJlX3ByaWNlXCJdJykuYXR0cihcImRpc2FibGVkXCIsdHJ1ZSkuYXR0cihcInJlYWRvbmx5XCIsdHJ1ZSkudmFsKCcnKTtcclxuICAgICAgICAvLyAgICAgc2V0Q29uZGl0aW9uKCk7XHJcbiAgICAgICAgLy8gfSlcclxuICAgICAgICAvLyDmt7vliqDllYblk4HojIPlm7RcclxuICAgICAgICAkKFwiLnBsdXNBcmVhXCIpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgLy8gJCh0aGlzKS51bmJpbmQoXCJjbGlja1wiKTsgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwbHVzQXJlYSB0ZXN0JylcclxuICAgICAgICAgICAgJCgnLmluaXRMaXN0JykuaHRtbCgpO1xyXG4gICAgICAgICAgICAkKCcuYWRkQm94IFt0eXBlPVwiY2hlY2tCb3hcIl0nKS5yZW1vdmVBdHRyKCdjaGVja2VkJyk7XHJcbiAgICAgICAgICAgICQoJyNhZGRNb2RhbCcpLmZhZGVJbigyMDApO1xyXG5cclxuICAgICAgICAgICAgLy8gJCh0aGlzKS5iaW5kKFwiY2xpY2tcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/lhbPpl63lvLnnqpdcclxuICAgICAgICAkKCcuY2xvc2VQb3AnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoJyNhZGRNb2RhbCcpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIHRhYuWIh+aNolxyXG4gICAgICAgICQoJ2Rpdi50YWIgYScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImNsaWNrZWRcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImNsaWNrZWRcIik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0YWJTdGF0dXM9JCh0aGlzKS5hdHRyKFwiZGF0YS10eXBlXCIpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhYlN0YXR1cyk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2godGFiU3RhdHVzKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIwXCI6JCgnI3RhYl8wJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8xLCN0YWJfMlwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjFcIjokKCcjdGFiXzEnKS5zaG93KCkuc2libGluZ3MoXCIjdGFiXzAsI3RhYl8yXCIpLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiMlwiOiQoJyN0YWJfMicpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMSwjdGFiXzBcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8v5ZWG5ZOB6IyD5Zu05pCc57Si5oyJ6ZSu6YOo5YiGXHJcbiAgICAgICAgJCgnI2ZvclRhYicpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGt3ID0gJCgnI2t3Q29udGVudCcpLnZhbCgpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhrdyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRhYlN0YXR1cylcclxuICAgICAgICAgICAgLy8gaWYoa3cubGVuZ3RoPT0wKXtcclxuICAgICAgICAgICAgLy8gICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+i+k+WFpeaQnOe0ouWGheWuue+8gVwiKTtcclxuICAgICAgICAgICAgLy8gICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgLy8gfVxyXG4gICAgICAgICAgICAkLmFqYXgoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgICAgIHVybDogJy9jb3Vwb24vYWRkX3Byb2R1Y3RzJyxcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcclxuICAgICAgICAgICAgICAgIGRhdGE6e1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXRlOnRhYlN0YXR1cyxcclxuICAgICAgICAgICAgICAgICAgICBrdzprd1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuaW5pdExpc3QnKS5odG1sKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCh0YWJTdGF0dXMpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiMFwiOiQoJyN0YWJfMCcpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMSwjdGFiXzJcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiMVwiOiQoJyN0YWJfMScpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMCwjdGFiXzJcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlIFwiMlwiOiQoJyN0YWJfMicpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMSwjdGFiXzBcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHhocik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3Ioc3RhdHVzKTtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyAkKFwiLmxvYWRpbmdTXCIpLmZhZGVPdXQoMzAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9KVxyXG4gICAgICAgIC8vIOmDqOWIhuS6i+S7tu+8iOS9v+eUqOadoeS7tuS4juWVhuWutuWPkeaUvu+8iVxyXG4gICAgICAgICQoJ2lucHV0LmZ1bmMnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCd0ZXN0ZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKFwiZnVuY0NsaWNrXCIpLnNpYmxpbmdzKCkucmVtb3ZlQ2xhc3MoXCJmdW5jQ2xpY2tcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICBpZigkKHRoaXMpLnZhbCgpPT1cIueUqOaIt+mihuWPllwiKXtcclxuICAgICAgICAgICAgICAgICQoJy5hYm91dEdldCcpLnNob3coKTtcclxuICAgICAgICAgICAgICAgIHBvcFdheT1cIjBcIjsvL+eUqOaIt+mihuWPllxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICQoJy5hYm91dEdldCcpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQoJy5hYm91dEdldCAjcHV0T24nKS5yZW1vdmVBdHRyKCdjaGVja2VkJylcclxuICAgICAgICAgICAgICAgIHBvcFdheT1cIjFcIjsvL+WVhuWutuWPkeaUvlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLy/mt7vliqDmjInpkq7pg6jliIZcclxuICAgICAgICAkKCcjYWRkJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgYXJyU2luZ2xlPVtdO1xyXG4gICAgICAgICAgICB2YXIgYXJyUHJvPVtdO1xyXG4gICAgICAgICAgICB2YXIgYXJyTnVtPVtdO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGVBbGw9W107XHJcbiAgICAgICAgICAgIC8v6I635Y+W5by556qX5YiX6KGo5Lit5q+P5Liq6YCJ6aG555qE54m55q6K5YC8XHJcbiAgICAgICAgICAgICQoJyN0YWJfMCBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGFyclNpbmdsZS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlPVtdO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLWltZycpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJ+WNleWTgScpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLXN0eWxlJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGVBbGwucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICQoJyN0YWJfMSBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGFyclByby5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlPVtdO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLWltZycpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJ+S4k+agjycpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLXN0eWxlJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGVBbGwucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICQoJyN0YWJfMiBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGFyck51bS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlPVtdO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLWltZycpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJ+S8muWRmCcpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLXN0eWxlJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGVBbGwucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHN0YXRlQWxsKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXJyTnVtKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYXJyUHJvKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coYXJyU2luZ2xlKTtcclxuICAgICAgICAgICAgdmFyIG5ld0Fycj0gYXJyU2luZ2xlLmNvbmNhdChhcnJOdW0sYXJyUHJvKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGhhc0Nob2ljZSk7XHJcbiAgICAgICAgICAgIGlmKG5ld0Fycj09XCJcIil7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fpgInmi6nopoHmt7vliqDnmoTllYblk4HjgIJcIik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYodW5pcXVlKGhhc0Nob2ljZSxuZXdBcnIpPT0xKXtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+WLv+mHjeWkjemAieaLqea3u+WKoOeahOWVhuWTgeOAglwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBmb3IoaT0wO2k8c3RhdGVBbGwubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmFkZGVkTGlzdCcpLmFwcGVuZChcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgZGF0YS10YWI9JyArc3RhdGVBbGxbaV1bNF0rICcgY2xhc3M9XCJhZGRlZEl0ZW1cIiBkYXRhLWlkPVwiJyArIHN0YXRlQWxsW2ldWzNdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJ1wiPjxzcGFuPicrc3RhdGVBbGxbaV1bMl0gKyAnPC9zcGFuPjxpbWcgc3JjPVwiJyArIHN0YXRlQWxsW2ldWzFdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJ1wiIGFsdD1cIicrc3RhdGVBbGxbaV1bMF0gKyAnXCI+PHNwYW4gY2xhc3M9XCJzcGFuQ29uXCI+JyArIHN0YXRlQWxsW2ldWzBdXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICsgJzwvc3Bhbj48YnV0dG9uIHR5cGU9XCJidXR0b25cIiBjbGFzcz1cImNsb3NlIGNsb3NlSXRlbVwiPsOXPC9idXR0b24+PC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGhhc0Nob2ljZT1oYXNDaG9pY2UuY29uY2F0KG5ld0Fycik7XHJcbiAgICAgICAgICAgICAgICAkKCcjYWRkTW9kYWwnKS5mYWRlT3V0KDIwMCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/liKDpmaTlt7LpgInllYblk4FcclxuICAgICAgICAkKFwiLmFkZGVkTGlzdFwiKS5vbihcImNsaWNrXCIsXCIuY2xvc2VJdGVtXCIsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkKHRoaXMpLnByZXYoKS5wcmV2KCkuY2xpY2soKTtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgdmFyIGRlbGV0ZUl0ZW09JCh0aGlzKS5wYXJlbnQoKS5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGRlbGV0ZUl0ZW0pO1xyXG4gICAgICAgICAgICBoYXNDaG9pY2UucmVtb3ZlKGRlbGV0ZUl0ZW0pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhoYXNDaG9pY2UpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/kv53lrZjmj5DkuqTpg6jliIYoc3VibWl0KVxyXG4gICAgICAgICQoJyNzdWJtaXRMaXN0Jykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImNlc2hpXCIrbmV3Rm9ybUZsYWcpO1xyXG4gICAgICAgICAgICBpZihuZXdGb3JtRmxhZyl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7ICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbmV3Rm9ybUZsYWc9dHJ1ZTtcclxuICAgICAgICAgICAgZ29vZHNSYW5nZT1bXTsvL+e9ruepuuaVsOe7hO+8jOmYsuatouaPkOS6pOWksei0peaXtueUn+aIkOmHjeWkjWlkXHJcbiAgICAgICAgICAgICQoJy5hZGRlZEl0ZW0nKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBnb29kc1JhbmdlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLWlkJykrJy0tJyskKHRoaXMpLmF0dHIoJ2RhdGEtdGFiJykpO1xyXG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3RhdGUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhnb29kc1JhbmdlKTsgIFxyXG5cclxuICAgICAgICAgICAgLy/ojrflj5blgLxcclxuICAgICAgICAgICAgY291cG9uTmFtZT0kLnRyaW0oJCgnW25hbWU9XCJ0aXRsZVwiXScpLnZhbCgpKTtcclxuICAgICAgICAgICAgY291cG9uUHJpY2U9cGFyc2VGbG9hdCgkLnRyaW0oJCgnW25hbWU9XCJwcmljZVwiXScpLnZhbCgpKSkqMTAwO1xyXG4gICAgICAgICAgICAvLyBpZigkKCcjdXNlQ2RuXzEnKS5wcm9wKCdjaGVja2VkJykpe1xyXG4gICAgICAgICAgICAvLyAgICAgaXNUZW49cGFyc2VGbG9hdCgkKCdbbmFtZT1cInJlX3ByaWNlXCJdJykudmFsKCkpKjEwMDtcclxuICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKFwidGVzdFwiK2lzVGVuKTtcclxuICAgICAgICAgICAgLy8gfWVsc2UgaWYoJCgnI3VzZUNkbl8yJykucHJvcCgnY2hlY2tlZCcpKXtcclxuICAgICAgICAgICAgLy8gICAgIGlzVGVuPXBhcnNlRmxvYXQoJCgnW25hbWU9XCJwcmljZVwiXScpLnZhbCgpKSswLjE7XHJcbiAgICAgICAgICAgIC8vIH07XHJcbiAgICAgICAgICAgIGlzVGVuPXBhcnNlRmxvYXQoJCgnW25hbWU9XCJyZV9wcmljZVwiXScpLnZhbCgpKSoxMDA7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaXNUZW5cIixpc1RlbilcclxuICAgICAgICAgICAgdGltZVN0YXJ0PSQudHJpbSgkKCdbbmFtZT1cInZhbGlkX2F0XCJdJykudmFsKCkpO1xyXG4gICAgICAgICAgICB0aW1lRW5kPSQudHJpbSgkKCdbbmFtZT1cImludmFsaWRfYXRcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIHBvcE51bT0kLnRyaW0oJCgnW25hbWU9XCJjb3VudFwiXScpLnZhbCgpKTtcclxuICAgICAgICAgICAgcGVvcGxlTGltPSQoJ1tuYW1lPVwicmVjZWl2ZV9ydWxlXCJdJykudmFsKCk7XHJcbiAgICAgICAgICAgIGlmKCQoJ1tuYW1lPVwiZXh0ZW5zaW9uXCJdJykucHJvcCgnY2hlY2tlZCcpKXtcclxuICAgICAgICAgICAgICAgIGlzVG9EZXRhaWw9MTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBpc1RvRGV0YWlsPTA7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v5Lyg5Ye65pWw5o2u5a+56LGhXHJcbiAgICAgICAgICAgIGFsbEZvcm1Nc2c9e1xyXG4gICAgICAgICAgICAgICAgdGl0bGU6Y291cG9uTmFtZSxcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgcHJpY2U6Y291cG9uUHJpY2UsXHJcbiAgICAgICAgICAgICAgICByZWNlaXZlX3J1bGU6cGVvcGxlTGltLFxyXG4gICAgICAgICAgICAgICAgdmFsaWRfYXQ6dGltZVN0YXJ0LFxyXG4gICAgICAgICAgICAgICAgaW52YWxpZF9hdDp0aW1lRW5kLFxyXG4gICAgICAgICAgICAgICAgcmVxdWlyZV9wcmljZTppc1RlbixcclxuICAgICAgICAgICAgICAgIGNvdW50OnBvcE51bSxcclxuICAgICAgICAgICAgICAgIHNwcmVhZF90eXBlOnBvcFdheSxcclxuICAgICAgICAgICAgICAgIGlzX3Nob3c6aXNUb0RldGFpbCxcclxuICAgICAgICAgICAgICAgIHJlc291cmNlOmdvb2RzUmFuZ2UsXHJcbiAgICAgICAgICAgICAgICB0eXBlOnR5cGVcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihlZGl0SWQpe1xyXG4gICAgICAgICAgICAgICAgYWxsRm9ybU1zZy5pZD1lZGl0SWQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coYWxsRm9ybU1zZyk7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFsbEZvcm1Nc2cucHJpY2UpXHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGFsbEZvcm1Nc2cucmVxdWlyZV9wcmljZSlcclxuICAgICAgICAgICAgaWYocGFnZV90eXBlPT0wICYmIGNoZWNrRm9ybShhbGxGb3JtTXNnLGNtcCkpe1xyXG4gICAgICAgICAgICAgICAgc3VibWl0Rm9ybShcIi9jb3Vwb24vYWRkXCIsYWxsRm9ybU1zZyk7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKHBhZ2VfdHlwZT09MSAmJiBjaGVja0Zvcm0oYWxsRm9ybU1zZyxjbXApKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGVjayBpcyB0dXJlJylcclxuICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oXCIvY291cG9uL2VkaXRDb3Vwb25cIixhbGxGb3JtTXNnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgICAgXHJcbiAgICAgICAgXHJcbiAgICB9KClcclxuICAgIC8v5o+Q5Lqk5pe26aqM6K+B6KGo5Y2VXHJcbiAgICBmdW5jdGlvbiBjaGVja0Zvcm0oaW5mbyxjbXApIHtcclxuICAgICAgICBuZXdGb3JtRmxhZz1mYWxzZTtcclxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnRpdGxlKSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkvJjmg6DliLjlkI3np7DkuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKG5ld0Zvcm1GbGFnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnByaWNlKSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkvJjmg6DliLjpnaLpop3kuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYocGFyc2VGbG9hdChpbmZvLmNvdW50KTxwYXJzZUZsb2F0KGNtcCkpe1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkv67mlLnlj5HooYzph4/lj6rog73lop7kuI3og73lh4/vvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby52YWxpZF9hdCkmJiRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5pbnZhbGlkX2F0KSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnInmlYjmnJ/otbfmraLml7bpl7TkuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5jb3VudCkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Y+R6KGM5pWw6YeP5LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmKGluZm8udHlwZT09MCl7XHJcbiAgICAgICAgLy8gICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8ucmVzb3VyY2UpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLllYblk4HojIPlm7TkuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLnZhbGlkX2F0KSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnInmlYjmnJ/lvIDlp4vml7bpl7TmoLzlvI/plJnor69cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLmludmFsaWRfYXQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacieaViOacn+e7k+adn+aXtumXtOagvOW8j+mUmeivr1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighaW5mby5yZXF1aXJlX3ByaWNlKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5L2/55So5p2h5Lu25LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCEkZm9ybUNoZWNrLmNoZWNrVGltZU9yZGVyKGluZm8udmFsaWRfYXQsaW5mby5pbnZhbGlkX2F0KSl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacieaViOacn+e7k+adn+aXtumXtOW/hemhu+Wkp+S6juW8gOWni+aXtumXtO+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tOdW0oaW5mby5wcmljZSkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oKo55qE6Z2i6aKd6L6T5YWl5qC85byP5pyJ6K+v77yM6K+36YeN5paw6L6T5YWl77yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghJGZvcm1DaGVjay5jaGVja051bShpbmZvLmNvdW50KSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmgqjnmoTlj5HooYzph4/ovpPlhaXmoLzlvI/mnInor6/vvIzor7fph43mlrDovpPlhaXvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoaW5mby5yZXF1aXJlX3ByaWNlPT1OYU4gfHwgaW5mby5yZXF1aXJlX3ByaWNlPT1udWxsKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LyY5oOg5Yi46Z2i6aKd5LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGluZm8ucHJpY2U+PWluZm8ucmVxdWlyZV9wcmljZSl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS8mOaDoOWIuOmdoumineimgeWwj+S6juS9v+eUqOadoeS7tu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuZXdGb3JtRmxhZz10cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGlmKHVwbG9hZENoYW5uZWxUeXBlPT0gMSAmJiBpbmZvLnBheW1lbnRfdHlwZT09IDIgJiYgaW5mby5waWVjZV9wcmljZSA+IGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICogMTAwKXtcclxuICAgICAgICAvLyAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Lu35qC85LiN6IO95aSn5LqOIFwiICsgYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKyBcIiDlvKBcIik7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICAvL+ihqOWNleaPkOS6pOaWueazlVxyXG4gICAgZnVuY3Rpb24gc3VibWl0Rm9ybSh1cmwsYWxsbWFnKXtcclxuICAgICAgICAkLmFqYXgodXJsLHtcclxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOidKU09OJyxcclxuICAgICAgICAgICAgZGF0YTphbGxtYWcsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGU9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPVwiL2NvdXBvbi9pbmRleFwiXHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihkYXRhLmNvZGU9PS0xKXtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0Zvcm1GbGFnPWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbG9hZFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhocixzdGF0dXMsZXJyKXtcclxuICAgICAgICAgICAgICAgIG5ld0Zvcm1GbGFnPWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgLy/mn6Xph43mlrnms5VcclxuICAgIGZ1bmN0aW9uIHVuaXF1ZShhcnIxLGFycjIpe1xyXG4gICAgICAgIHZhciBpdGVtPTA7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7aTxhcnIxLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBpZihhcnIyLmluZGV4T2YoYXJyMVtpXSkhPS0xKXtcclxuICAgICAgICAgICAgICAgIGl0ZW09MTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgIH1cclxuICAgIC8v5Yig6Zmk5pWw57uE5YWD57Sg5pa55rOVXHJcbiAgICBBcnJheS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKHZhbCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBpbml0KClcclxuICAgIC8vIGZ1bmN0aW9uIGluaXQoKXtcclxuICAgIC8vICAgICBzd2l0Y2godGFiU3RhdHVzKXtcclxuICAgIC8vICAgICAgICAgY2FzZSBcIjBcIjokKCcjdGFiXzAnKS5zaG93KCkuJChcIiN0YWJfMSwjdGFiXzJcIikuaGlkZGVuKClcclxuICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAvLyAgICAgICAgIGNhc2UgXCIxXCI6JCgnI3RhYl8xJykuc2hvdygpLiQoXCIjdGFiXzAsI3RhYl8yXCIpLmhpZGRlbigpXHJcbiAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICBjYXNlIFwiMlwiOiQoJyN0YWJfMicpLnNob3coKS4kKFwiI3RhYl8xLCN0YWJfMFwiKS5oaWRkZW4oKVxyXG4gICAgLy8gICAgICAgICBicmVhaztcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9XHJcbn1cclxuZnVuY3Rpb24gaW5pdCgpey8v5Yid5aeL5YyW5LyY5oOg5Yi45ZWG5ZOB5by556qX5YaF5a65XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgdXJsOiAnL2NvdXBvbi9hZGRfcHJvZHVjdHMnLFxyXG4gICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAkKCcuaW5pdExpc3QnKS5odG1sKGRhdGEpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coeGhyKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHN0YXR1cyk7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgIC8vaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgLy8gJChcIi5sb2FkaW5nU1wiKS5mYWRlT3V0KDMwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5mdW5jdGlvbiBjbGVhck5vTnVtKG9iail7IFxyXG4gICBvYmoudmFsdWUgPSBvYmoudmFsdWUucmVwbGFjZSgvW15cXGQuXS9nLFwiXCIpOyAgLy/muIXpmaTigJzmlbDlrZfigJ3lkozigJwu4oCd5Lul5aSW55qE5a2X56ymICBcclxuICAgb2JqLnZhbHVlID0gb2JqLnZhbHVlLnJlcGxhY2UoL1xcLnsyLH0vZyxcIi5cIik7IC8v5Y+q5L+d55WZ56ys5LiA5LiqLiDmuIXpmaTlpJrkvZnnmoQgIFxyXG4gICBvYmoudmFsdWUgPSBvYmoudmFsdWUucmVwbGFjZShcIi5cIixcIiQjJFwiKS5yZXBsYWNlKC9cXC4vZyxcIlwiKS5yZXBsYWNlKFwiJCMkXCIsXCIuXCIpOyBcclxuICAgb2JqLnZhbHVlID0gb2JqLnZhbHVlLnJlcGxhY2UoL14oXFwtKSooXFxkKylcXC4oXFxkXFxkKS4qJC8sJyQxJDIuJDMnKTsvL+WPquiDvei+k+WFpeS4pOS4quWwj+aVsCAgXHJcbiAgIGlmKG9iai52YWx1ZS5pbmRleE9mKFwiLlwiKTwgMCAmJiBvYmoudmFsdWUgIT1cIlwiKXsvL+S7peS4iuW3sue7j+i/h+a7pO+8jOatpOWkhOaOp+WItueahOaYr+WmguaenOayoeacieWwj+aVsOeCue+8jOmmluS9jeS4jeiDveS4uuexu+S8vOS6jiAwMeOAgTAy55qE6YeR6aKdIFxyXG4gICAgICAgb2JqLnZhbHVlPSBwYXJzZUZsb2F0KG9iai52YWx1ZSk7IFxyXG4gICB9IFxyXG59IFxyXG5mdW5jdGlvbiBzZXRDb25kaXRpb24oKXtcclxuICAgICQoJy50aGVUZW4nKS5odG1sKHBhcnNlRmxvYXQoJCgnW25hbWU9XCJwcmljZVwiXScpLnZhbCgpKSswLjEpO1xyXG59Il19
