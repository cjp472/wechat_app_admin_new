$(function(){manageArticle.init()});var manageArticle=function(){var e={};var t;function a(e){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("图文名称不能为空！");return false}if($formCheck.emptyString(e.img_url)){baseUtils.show.redTip("请上传您的图文封面！");return false}if($formCheck.emptyString(e.start_at)){baseUtils.show.redTip("请填入您的图文上架时间！");return false}if(!$formCheck.checkTime(e.start_at)){baseUtils.show.redTip("图文上架时间错误");return false}if(uploadChannelType==1&&e.payment_type==2&&$formCheck.emptyString(e.piece_price)){baseUtils.show.redTip("您选择的付费形式为付费，请输入价格！");return false}if(uploadChannelType==1&&e.payment_type==2&&!$formCheck.checkNum(e.piece_price)){baseUtils.show.redTip("您的价格输入格式有误，请重新输入！");return false}if(uploadChannelType==1&&e.payment_type==2&&e.piece_price>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}return true}function r(e,t){showLoading();$.ajax(e,{type:"POST",dataType:"json",data:t,success:function(e){if(parseInt(e.code)===0){baseUtils.show.blueTip("保存成功");setTimeout(function(){window.location.href=backURL},700)}else{hideLoading();baseUtils.show.redTip(e.msg);submitLimt=false}},error:function(e,t,a){hideLoading();console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！");submitLimt=false}})}e.init=function(){var e=GetQueryString("package_id");var t=$("#dateInput").val();$("#dateInput").on("change",function(e){t=$(this).val();console.log(currentDate);if(t>currentDate){$("#nextDay").html("上架当日")}else{$("#nextDay").html("今日")}i();console.log(t)});i();function i(){$.get("/check_goods_message_push/"+e+"/"+t,function(e){$("#valid_push").html(e.data.valid_push);if(e.data.has_push>=3){$("#fBtn1").attr("disabled",true);$("#has_push").html(3)}else{$("#has_push").html(e.data.has_push);$("#fBtn1").attr("disabled",false)}if(e.code==-1){$("#subMsg").css("display","none")}})}$("#preview_try").on("click",function(){var e=ue1.getContent();document.getElementById("preview_content").innerHTML=e;$(".preview_con").addClass("active");$(".preview_box").addClass("active");document.documentElement.style.overflow="hidden"});$(".completeBtn").click(function(){var e=$.trim($(".resName").val());var t=$.trim($("#Image1Url").val());var i=UE.getEditor("resource_desc");var n=i.getContent();n=n.replace(/&quot;/gi,"'");var s=UE.getEditor("contentTry");var l=ue1.getContent();var o=i.getPlainTxt();if(o.length==0){baseUtils.show.redTip("描述不能为空!");return false}var c=s.getPlainTxt();if(c.length==0){baseUtils.show.redTip("描述不能为空!");return false}var p=$.trim($(".resPrize").val())*100;$('input[name="aliveClass"]:checked').each(function(){classArray.push($(this).attr("id"))});var u=$.trim($("#dateInput").val());var d={title:e,img_url:t,org_content:n,try_content:c,try_org_content:l,content:o,piece_price:p,start_at:u,id:GetQueryString("id")||null};var h=$("#serviceToggle :radio:checked").val();if(h){d.push_state=h}if(resourceFree){d.payment_type=resourceFree}if(a(d)){var m={params:d,resource_type:resourceType,upload_channel_type:uploadChannelType,package_id:packageId,resource_params:resourceParams,package_name:packageName,roleParams:roleParams,category_type:classArray};r(golbalUrl,m)}else{return false}})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZUFydGljbGUuanMiXSwibmFtZXMiOlsiJCIsIm1hbmFnZUFydGljbGUiLCJpbml0IiwicmVzVXJsIiwiY2hlY2tBcnRpY2xlRm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJ0aXRsZSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJpbWdfdXJsIiwic3RhcnRfYXQiLCJjaGVja1RpbWUiLCJ1cGxvYWRDaGFubmVsVHlwZSIsInBheW1lbnRfdHlwZSIsInBpZWNlX3ByaWNlIiwiY2hlY2tOdW0iLCJtYXhJbnB1dFByaWNlIiwic3VibWl0Rm9ybSIsInVybCIsImFsbFBhcmFtcyIsInNob3dMb2FkaW5nIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImRhdGEiLCJzdWNjZXNzIiwicGFyc2VJbnQiLCJjb2RlIiwiYmx1ZVRpcCIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJiYWNrVVJMIiwiaGlkZUxvYWRpbmciLCJtc2ciLCJzdWJtaXRMaW10IiwiZXJyb3IiLCJ4aHIiLCJzdGF0dXMiLCJlcnIiLCJjb25zb2xlIiwicF9pZCIsIkdldFF1ZXJ5U3RyaW5nIiwic2VsZWN0VGltZSIsInZhbCIsIm9uIiwiZSIsInRoaXMiLCJsb2ciLCJjdXJyZW50RGF0ZSIsImh0bWwiLCJwdXNoRnVuY3Rpb24iLCJnZXQiLCJ2YWxpZF9wdXNoIiwiaGFzX3B1c2giLCJhdHRyIiwiY3NzIiwidWUxIiwiZ2V0Q29udGVudCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJpbm5lckhUTUwiLCJhZGRDbGFzcyIsImRvY3VtZW50RWxlbWVudCIsInN0eWxlIiwib3ZlcmZsb3ciLCJjbGljayIsInRyaW0iLCJpbWFnZTFVcmwiLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwib3JnQ29udGVudCIsInJlcGxhY2UiLCJ1ZVRyeSIsIm9yZ0NvbnRlbnRUcnkiLCJkZXNjcmliIiwiZ2V0UGxhaW5UeHQiLCJsZW5ndGgiLCJkZXNjcmliVHJ5IiwicmVzUHJpemUiLCJlYWNoIiwiY2xhc3NBcnJheSIsInB1c2giLCJzdGFydEF0IiwicmVzSW5mbyIsIm9yZ19jb250ZW50IiwidHJ5X2NvbnRlbnQiLCJ0cnlfb3JnX2NvbnRlbnQiLCJjb250ZW50IiwiaWQiLCJwdXNoU3RhdGUiLCJwdXNoX3N0YXRlIiwicmVzb3VyY2VGcmVlIiwicGFyYW1zIiwicmVzb3VyY2VfdHlwZSIsInJlc291cmNlVHlwZSIsInVwbG9hZF9jaGFubmVsX3R5cGUiLCJwYWNrYWdlX2lkIiwicGFja2FnZUlkIiwicmVzb3VyY2VfcGFyYW1zIiwicmVzb3VyY2VQYXJhbXMiLCJwYWNrYWdlX25hbWUiLCJwYWNrYWdlTmFtZSIsInJvbGVQYXJhbXMiLCJjYXRlZ29yeV90eXBlIiwiZ29sYmFsVXJsIl0sIm1hcHBpbmdzIjoiQUFNQUEsRUFBRSxXQUVFQyxjQUFjQyxRQUdsQixJQUFJRCxlQUFnQixXQUNoQixHQUFJQSxLQUVKLElBQUlFLEVBR0osU0FBU0MsR0FBaUJDLEdBQ3RCLEdBQUlDLFdBQVdDLFlBQVlGLEVBQUtHLE9BQVEsQ0FDcENDLFVBQVVDLEtBQUtDLE9BQU8sWUFDdEIsT0FBTyxPQUVYLEdBQUlMLFdBQVdDLFlBQVlGLEVBQUtPLFNBQVUsQ0FDdENILFVBQVVDLEtBQUtDLE9BQU8sYUFDdEIsT0FBTyxPQUVYLEdBQUlMLFdBQVdDLFlBQVlGLEVBQUtRLFVBQVcsQ0FDdkNKLFVBQVVDLEtBQUtDLE9BQU8sZUFDdEIsT0FBTyxPQUVYLElBQUtMLFdBQVdRLFVBQVVULEVBQUtRLFVBQVcsQ0FDdENKLFVBQVVDLEtBQUtDLE9BQU8sV0FDdEIsT0FBTyxPQUVYLEdBQUdJLG1CQUFtQixHQUFHVixFQUFLVyxjQUFjLEdBQUtWLFdBQVdDLFlBQVlGLEVBQUtZLGFBQWEsQ0FDdEZSLFVBQVVDLEtBQUtDLE9BQU8scUJBQ3RCLE9BQU8sT0FFWCxHQUFHSSxtQkFBbUIsR0FBR1YsRUFBS1csY0FBYyxJQUFNVixXQUFXWSxTQUFTYixFQUFLWSxh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dkNDLFdBQVdDLEtBQUt2RixFQUFFbUQsTUFBTVEsS0FBSyxRQUtqQyxJQUFJNkIsR0FBVXhGLEVBQUV1RSxLQUFLdkUsRUFBRSxjQUFjZ0QsTUFHckMsSUFBSXlDLElBRUFqRixNQUFPQSxFQUVQSSxRQUFTNEQsRUFFVGtCLFlBQVlkLEVBRVplLFlBQVlSLEVBRVpTLGdCQUFnQmIsRUFFaEJjLFFBQVFiLEVBR1IvRCxZQUFhbUUsRUFFYnZFLFNBQVUyRSxFQUVWTSxHQUFJaEQsZUFBZSxPQUFTLEtBSWhDLElBQUlpRCxHQUFZL0YsRUFBRSxpQ0FBaUNnRCxLQUNuRCxJQUFHK0MsRUFBVSxDQUNUTixFQUFRTyxXQUFhRCxFQUd6QixHQUFHRSxhQUFjLENBQ2JSLEVBQVF6RSxhQUFlaUYsYUFLM0IsR0FBSTdGLEVBQWlCcUYsR0FBVSxDQUMzQixHQUFJbkUsSUFDQTRFLE9BQVFULEVBQ1JVLGNBQWVDLGFBQ2ZDLG9CQUFxQnRGLGtCQUNyQnVGLFdBQVlDLFVBQ1pDLGdCQUFpQkMsZUFDakJDLGFBQWNDLFlBQ2RDLFdBQVlBLFdBQ1pDLGNBQWN2QixXQUVsQmxFLEdBQVcwRixVQUFVeEYsT0FHbEIsQ0FDSCxNQUFPLFVBS25CLE9BQU9yQiIsImZpbGUiOiJtYW5hZ2VBcnRpY2xlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGpzZXJrIG9uIDIwMTcvMy8yMy5cbiAqL1xuLyoqXG4gKiBDcmVhdGVkIGJ5IGpzZXJrIG9uIDIwMTcvMy8yMy5cbiAqL1xuJChmdW5jdGlvbiAoKSB7XG5cbiAgICBtYW5hZ2VBcnRpY2xlLmluaXQoKTtcblxufSk7XG52YXIgbWFuYWdlQXJ0aWNsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWFuYWdlQXJ0aWNsZSA9IHt9O1xuXG4gICAgdmFyIHJlc1VybDtcblxuICAgIC8v5qOA5p+l5Zu+5paH5o+Q5Lqk6KGo5Y2VXG4gICAgZnVuY3Rpb24gY2hlY2tBcnRpY2xlRm9ybShpbmZvKSB7XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8udGl0bGUpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLlm77mloflkI3np7DkuI3og73kuLrnqbrvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5pbWdfdXJsKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35LiK5Lyg5oKo55qE5Zu+5paH5bCB6Z2i77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7floavlhaXmgqjnmoTlm77mlofkuIrmnrbml7bpl7TvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLnN0YXJ0X2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Zu+5paH5LiK5p625pe26Ze06ZSZ6K+vXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHVwbG9hZENoYW5uZWxUeXBlPT0xJiZpbmZvLnBheW1lbnRfdHlwZT09MiAmJiAkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8ucGllY2VfcHJpY2UpKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaCqOmAieaLqeeahOS7mOi0ueW9ouW8j+S4uuS7mOi0ue+8jOivt+i+k+WFpeS7t+agvO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZih1cGxvYWRDaGFubmVsVHlwZT09MSYmaW5mby5wYXltZW50X3R5cGU9PTIgJiYgISRmb3JtQ2hlY2suY2hlY2tOdW0oaW5mby5waWVjZV9wcmljZSkpe1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oKo55qE5Lu35qC86L6T5YWl5qC85byP5pyJ6K+v77yM6K+36YeN5paw6L6T5YWl77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHVwbG9hZENoYW5uZWxUeXBlPT0xJiZpbmZvLnBheW1lbnRfdHlwZT09MiAmJiBpbmZvLnBpZWNlX3ByaWNlID4gYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKiAxMDApe1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Lu35qC85LiN6IO95aSn5LqOIFwiICsgYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKyBcIiDlhYNcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy/mj5DkuqTkv6Hmga9cbiAgICBmdW5jdGlvbiBzdWJtaXRGb3JtKHVybCwgYWxsUGFyYW1zKSB7XG4gICAgICAgIHNob3dMb2FkaW5nKCk7XG4gICAgICAgICQuYWpheCh1cmwsIHtcbiAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcbiAgICAgICAgICAgIGRhdGFUeXBlOiAnanNvbicsXG4gICAgICAgICAgICBkYXRhOmFsbFBhcmFtcyxcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBpZiAocGFyc2VJbnQoZGF0YS5jb2RlKSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5L+d5a2Y5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYmFja1VSTDtcbiAgICAgICAgICAgICAgICAgICAgfSw3MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0TGltdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLHN0YXR1cyxlcnIpIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xuICAgICAgICAgICAgICAgIHN1Ym1pdExpbXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICB9XG5cblxuICAgIG1hbmFnZUFydGljbGUuaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvL+aWsOeJiOa2iOaBr+aOqOmAgeaLieWPluaVsOaNrlxuICAgICAgICB2YXIgcF9pZCA9R2V0UXVlcnlTdHJpbmcoJ3BhY2thZ2VfaWQnKTtcbiAgICAgICAgdmFyIHNlbGVjdFRpbWUgPSAkKCcjZGF0ZUlucHV0JykudmFsKCk7XG4gICAgICAgIC8v55uR5o6n5pe26Ze05by556qX57uE5Lu2XG4gICAgICAgICQoJyNkYXRlSW5wdXQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2VsZWN0VGltZSA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50RGF0ZSk7XG4gICAgICAgICAgICBpZihzZWxlY3RUaW1lPmN1cnJlbnREYXRlKXtcbiAgICAgICAgICAgICAgICAkKCcjbmV4dERheScpLmh0bWwoJ+S4iuaetuW9k+aXpScpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgJCgnI25leHREYXknKS5odG1sKCfku4rml6UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHB1c2hGdW5jdGlvbigpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZWN0VGltZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBwdXNoRnVuY3Rpb24oKTtcbiAgICAgICAgZnVuY3Rpb24gcHVzaEZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJC5nZXQoJy9jaGVja19nb29kc19tZXNzYWdlX3B1c2gvJyArIHBfaWQgKyAnLycgKyBzZWxlY3RUaW1lLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICQoJyN2YWxpZF9wdXNoJykuaHRtbChkYXRhLmRhdGEudmFsaWRfcHVzaCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5oYXNfcHVzaCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNmQnRuMScpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNoYXNfcHVzaCcpLmh0bWwoMyk7Ly/lhpnmrbvlt7Llj5Ez5p2hXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICQoJyNoYXNfcHVzaCcpLmh0bWwoZGF0YS5kYXRhLmhhc19wdXNoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2ZCdG4xJykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT0gLTEpIHtcbiAgICAgICAgICAgICAgICAgICAgJCgnI3N1Yk1zZycpLmNzcygnZGlzcGxheScsICdub25lJylcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgICQoJyNwcmV2aWV3X3RyeScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcbiAgICAgICAgICAgIHZhciBodG1sID0gdWUxLmdldENvbnRlbnQoKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3X2NvbnRlbnQnKS5pbm5lckhUTUwgPSBodG1sO1xuICAgICAgICAgICAgJCgnLnByZXZpZXdfY29uJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgJCgnLnByZXZpZXdfYm94JykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8g5o+Q5Lqk5Zu+5paH6KGo5Y2VXG4gICAgICAgICQoXCIuY29tcGxldGVCdG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAvL+iOt+WPluWbvuaWh+ihqOWNleaVsOaNrlxuICAgICAgICAgICAgLy/lm77mloflkI3np7BcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICQudHJpbSgkKFwiLnJlc05hbWVcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+WbvuaWh+WwgemdouWcsOWdgFxuICAgICAgICAgICAgdmFyIGltYWdlMVVybCA9ICQudHJpbSgkKFwiI0ltYWdlMVVybFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v5Zu+5paH5Y6f5aeL5YaF5a656K+m5oOFXG4gICAgICAgICAgICB2YXIgdWUgPSBVRS5nZXRFZGl0b3IoJ3Jlc291cmNlX2Rlc2MnKTtcbiAgICAgICAgICAgIHZhciBvcmdDb250ZW50ID0gdWUuZ2V0Q29udGVudCgpO1xuICAgICAgICAgICAgb3JnQ29udGVudCA9IG9yZ0NvbnRlbnQucmVwbGFjZSggLyZxdW90Oy9naSwgXCInXCIgKTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2cob3JnQ29udGVudCk7XG4gICAgICAgICAgICAvL+WbvuaWh+ivleeci+ivpuaDhVxuICAgICAgICAgICAgdmFyIHVlVHJ5ID0gVUUuZ2V0RWRpdG9yKCdjb250ZW50VHJ5Jyk7XG4gICAgICAgICAgICB2YXIgb3JnQ29udGVudFRyeSA9IHVlMS5nZXRDb250ZW50KCk7XG5cbiAgICAgICAgICAgIC8v6LWE5rqQ5YaF5a655o+P6L+wXG4gICAgICAgICAgICB2YXIgZGVzY3JpYiA9IHVlLmdldFBsYWluVHh0KCk7XG4gICAgICAgICAgICBpZiAoZGVzY3JpYi5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5o+P6L+w5LiN6IO95Li656m6IScpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy/lm77mlofor5XnnIvmj4/ov7BcbiAgICAgICAgICAgIHZhciBkZXNjcmliVHJ5ID0gdWVUcnkuZ2V0UGxhaW5UeHQoKTtcbiAgICAgICAgICAgIGlmIChkZXNjcmliVHJ5Lmxlbmd0aCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmj4/ov7DkuI3og73kuLrnqbohJyk7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+S7mOi0ueS7t+agvFxuICAgICAgICAgICAgdmFyIHJlc1ByaXplID0gJC50cmltKCQoXCIucmVzUHJpemVcIikudmFsKCkpKjEwMDtcblxuICAgICAgICAgICAgLy/nm7Tmkq3pgInmi6nliIbnsbtcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJhbGl2ZUNsYXNzXCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgY2xhc3NBcnJheS5wdXNoKCQodGhpcykuYXR0cignaWQnKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vY29uc29sZS5sb2coY2xhc3NBcnJheSk7XG5cbiAgICAgICAgICAgIC8v5LiK5p625pe26Ze0XG4gICAgICAgICAgICB2YXIgc3RhcnRBdCA9ICQudHJpbSgkKFwiI2RhdGVJbnB1dFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v5Zu+5paH5Y2V5ZOB5LiK5Lyg5L+h5oGvXG4gICAgICAgICAgICB2YXIgcmVzSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAvLyDlm77mloflkI3np7BcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgLy8g5Zu+5paH5bCB6Z2i5Zyw5Z2AXG4gICAgICAgICAgICAgICAgaW1nX3VybDogaW1hZ2UxVXJsLFxuICAgICAgICAgICAgICAgIC8v5Y6f5aeL5paH5pysXG4gICAgICAgICAgICAgICAgb3JnX2NvbnRlbnQ6b3JnQ29udGVudCxcbiAgICAgICAgICAgICAgICAvL+WbvuaWh+ivpuaDhVxuICAgICAgICAgICAgICAgIHRyeV9jb250ZW50OmRlc2NyaWJUcnksXG4gICAgICAgICAgICAgICAgLy/or5XnnIvljp/lp4vmlofmnKxcbiAgICAgICAgICAgICAgICB0cnlfb3JnX2NvbnRlbnQ6b3JnQ29udGVudFRyeSxcbiAgICAgICAgICAgICAgICAvL+ivleeci+WbvuaWh+ivpuaDhVxuICAgICAgICAgICAgICAgIGNvbnRlbnQ6ZGVzY3JpYixcbiAgICAgICAgICAgICAgICAvL+S7mOi0ueW9ouW8j1xuICAgICAgICAgICAgICAgIC8v5LuY6LS55Lu35qC8XG4gICAgICAgICAgICAgICAgcGllY2VfcHJpY2U6IHJlc1ByaXplLFxuICAgICAgICAgICAgICAgIC8v5LiK5p625pe26Ze0XG4gICAgICAgICAgICAgICAgc3RhcnRfYXQ6IHN0YXJ0QXQsXG4gICAgICAgICAgICAgICAgLy9pZFxuICAgICAgICAgICAgICAgIGlkOiBHZXRRdWVyeVN0cmluZygnaWQnKSB8fCBudWxsXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAvL+a2iOaBr+aOqOmAgVxuICAgICAgICAgICAgdmFyIHB1c2hTdGF0ZSA9ICQoJyNzZXJ2aWNlVG9nZ2xlIDpyYWRpbzpjaGVja2VkJykudmFsKCk7XG4gICAgICAgICAgICBpZihwdXNoU3RhdGUpey8v5aaC5p6c5pyJ5raI5oGv5o6o6YCB5p2D6ZmQXG4gICAgICAgICAgICAgICAgcmVzSW5mby5wdXNoX3N0YXRlID0gcHVzaFN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/mmK/lkKbku5jotLnvvIgx6KGo56S65YWN6LS577yMMuihqOekuuWNleeslO+8iVxuICAgICAgICAgICAgaWYocmVzb3VyY2VGcmVlKSB7XG4gICAgICAgICAgICAgICAgcmVzSW5mby5wYXltZW50X3R5cGUgPSByZXNvdXJjZUZyZWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhyZXNJbmZvKTtcbiAgICAgICAgICAgIC8v6I635Y+W6KGo5Y2V5Lit55qE5pWw5o2uXG5cbiAgICAgICAgICAgIGlmIChjaGVja0FydGljbGVGb3JtKHJlc0luZm8pKSB7XG4gICAgICAgICAgICAgICAgdmFyIGFsbFBhcmFtcyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1zOiByZXNJbmZvLFxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiByZXNvdXJjZVR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZF9jaGFubmVsX3R5cGU6IHVwbG9hZENoYW5uZWxUeXBlLFxuICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX2lkOiBwYWNrYWdlSWQsXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3BhcmFtczogcmVzb3VyY2VQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIHBhY2thZ2VfbmFtZTogcGFja2FnZU5hbWUsXG4gICAgICAgICAgICAgICAgICAgIHJvbGVQYXJhbXM6IHJvbGVQYXJhbXMsXG4gICAgICAgICAgICAgICAgICAgIGNhdGVnb3J5X3R5cGU6Y2xhc3NBcnJheVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgc3VibWl0Rm9ybShnb2xiYWxVcmwsYWxsUGFyYW1zKTtcblxuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gbWFuYWdlQXJ0aWNsZTtcbn0oKTsiXX0=
