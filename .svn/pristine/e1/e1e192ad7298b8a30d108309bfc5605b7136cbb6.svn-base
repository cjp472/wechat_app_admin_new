$(function(){invitation.init()});var invitation=function(){var e={};var i,t,o,a,n,l,d,s;function r(e){var i=null;if(window.createObjectURL!=undefined){i=window.createObjectURL(e)}else if(window.URL!=undefined){i=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){i=window.webkitURL.createObjectURL(e)}return i}function c(e){if(window.revokeObjectURL!=undefined){window.revokeObjectURL(e)}else if(window.URL!=undefined){window.URL.revokeObjectURL(e)}else if(window.webkitURL!=undefined){window.webkitURL.revokeObjectURL(e)}}function u(e,i,t,o){$(".loadingPartial").show();console.log(e);if(e&&e.length>0){var a=e[0];var n=r(a);fileSize=(a.size/(1024*1024)).toFixed(2);resAudio1Lengh=a.duration;if($uploadFile.checkFileSize(a,o)){$uploadFile.uploadRes(a,i,function(e){},function(e){$(".loadingPartial").hide();console.log(e);baseUtils.show.blueTip("上传成功！");$(".deleteImg").show();resUrl=e.data.access_url;console.log(resUrl);$("#imgUrl").val(resUrl);if(i=="image"){$("#reBackImg").load(function(){c(n)}).attr("src",n)}},function(e){$(".loadingPartial").hide();console.error("上传失败!!!");console.log(e);baseUtils.show.redTip("上传失败！")})}else{baseUtils.show.redTip("上传资源限制在"+o+"MB内！");$(".upLoad"+t).val("")}}else{baseUtils.show.redTip("网络错误，请稍后再试！")}}e.init=function(){$("#uploadImage").on("change",function(){u(this.files,"image","reBackImg",5)});$(".deleteImg1").click(function(){$("#reBackImg").attr("src","");$("#imgUrl").val("");$("#uploadImage").val("")});document.onkeydown=e;function e(e){if(e.keyCode==13){$(".goodsSearchBtn").click()}}$(".salerContent").on("click",".inviteOperate",function(){i=$(this).data("id");t=$(this).data("name");o=$(this).data("price");a=$(this).data("is_invite");n=$(this).data("good_type");d=$(this).data("inviteposter");l=$(this).data("isshowinfo");s=$(this).data("distribute_percent");$(".saleGoodsName").text(t);$("#reBackImg").attr("src",d);$("#imgUrl").val(d);if(d!=""){$(".deleteImg").show();$(".deleteImg1").show()}else{$(".deleteImg").hide();$(".deleteImg1").hide()}if(l==1){$(".showInfo").click()}else{$(".hideInfo").click()}$(".inputRadioValue").val(s);if(o<=1){$(".inputRadioValue").attr("readonly","readonly");$(".inputRadioValue").attr("disabled","disabled");$(".inputRadioValue").addClass("inputDisabled")}else{$(".inputRadioValue").removeClass("inputDisabled");$(".inputRadioValue").removeAttr("readonly");$(".inputRadioValue").removeAttr("disabled")}$(".setSaleRatioWindow").fadeIn(200)});$(".setSaleRatioWindow").on("click",".label1",function(){$(".setPercent").slideDown(300);$(".inputRadioValue").removeAttr("readonly");$(".inputRadioValue").removeAttr("disabled");$(".inputRadioValue").css("color","#243042");a=1});$(".setSaleRatioWindow").on("click",".label2",function(){$(".setPercent").slideUp(300);$(".inputRadioValue").attr("readonly","readonly");$(".inputRadioValue").attr("disabled","disabled");$(".inputRadioValue").css("color","#b2b2b2");$(".inputRadioValue").val("");a=0});$(".setSaleRatioWindow").on("click",".closeIcon,.cancelSaleBtn",function(){$(".setSaleRatioWindow").fadeOut(200)});$(".salerContent").on("click",".goodsSearchBtn",function(){var e=$(".goodsSearchInput").val();window.location="/invite/index?name="+e});$(".setSaleRatioWindow").on("click",".confirmSaleBtn",function(){s=$(".inputRadioValue").val();d=$("#imgUrl").val();if($("#showInfo").is(":checked")){l=1}else{l=0}var e={id:i,goods_type:n,distribute_percent:s,invite_poster:d,is_show_userinfo:l};if(a&&$formCheck.emptyString(e.distribute_percent)){baseUtils.show.blueTip("请输入要设置的比例！");return false}$.post("set",e,function(e){if(e.code===0){baseUtils.show.blueTip("保存成功");location.reload()}else{baseUtils.show.redTip(e.msg)}})})};return e}();function rateCheckNum1(e,i){e=e.replace(/[^\d]/g,"");e=e.replace(/^[5][1-9]$|^[6-9]\d$|^[1-9][0-9]\d{1,}$|^0\d{1,}$/,"");$(i).val(e)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImludml0YXRpb24uanMiXSwibmFtZXMiOlsiJCIsImludml0YXRpb24iLCJpbml0IiwiaWQiLCJuYW1lIiwicHJpY2UiLCJpc0ludml0ZSIsImdvb2RUeXBlIiwiaXNTaG93SW5mbyIsImludml0ZVBvc3RlciIsImRpc3RyaWJ1dGVQZXJjZW50IiwiZ2V0T2JqZWN0VVJMIiwiZmlsZSIsInVybCIsIndpbmRvdyIsImNyZWF0ZU9iamVjdFVSTCIsInVuZGVmaW5lZCIsIlVSTCIsIndlYmtpdFVSTCIsInJlbW92ZU9iamVjdFVSTCIsInJldm9rZU9iamVjdFVSTCIsInJlc1VwbG9hZCIsImZpbGVzIiwicmVzVHlwZSIsInJlc1R5cGVDbGFzcyIsInJlc0xpbWl0U2l6ZSIsInNob3ciLCJjb25zb2xlIiwibG9nIiwibGVuZ3RoIiwicmVzb3VyY2VMb2NhbFVybCIsImZpbGVTaXplIiwic2l6ZSIsInRvRml4ZWQiLCJyZXNBdWRpbzFMZW5naCIsImR1cmF0aW9uIiwiJHVwbG9hZEZpbGUiLCJjaGVja0ZpbGVTaXplIiwidXBsb2FkUmVzIiwiZGF0YSIsImhpZGUiLCJiYXNlVXRpbHMiLCJibHVlVGlwIiwicmVzVXJsIiwiYWNjZXNzX3VybCIsInZhbCIsImxvYWQiLCJhdHRyIiwiZXJyb3IiLCJyZWRUaXAiLCJvbiIsInRoaXMiLCJjbGljayIsImRvY3VtZW50Iiwib25rZXlkb3duIiwia2V5TGlzdGVuZXIiLCJlIiwia2V5Q29kZSIsInRleHQiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwicmVtb3ZlQXR0ciIsImZhZGVJbiIsInNsaWRlRG93biIsImNzcyIsInNsaWRlVXAiLCJmYWRlT3V0IiwiZ29vZFNlYXJjaENvbnRlbnQiLCJsb2NhdGlvbiIsImlzIiwiaW52aXRlSW5mbyIsImdvb2RzX3R5cGUiLCJkaXN0cmlidXRlX3BlcmNlbnQiLCJpbnZpdGVfcG9zdGVyIiwiaXNfc2hvd191c2VyaW5mbyIsIiRmb3JtQ2hlY2siLCJlbXB0eVN0cmluZyIsInBvc3QiLCJjb2RlIiwicmVsb2FkIiwibXNnIiwicmF0ZUNoZWNrTnVtMSIsInZhbHVlIiwiZG9tIiwicmVwbGFjZSJdLCJtYXBwaW5ncyI6IkFBQUFBLEVBQUUsV0FFRUMsV0FBV0MsUUFJZixJQUFJRCxZQUFhLFdBQ2IsR0FBSUEsS0FFSixJQUFJRSxHQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxFQUNBQyxDQUVKLFNBQVNDLEdBQWFDLEdBQ2xCLEdBQUlDLEdBQU0sSUFDVixJQUFJQyxPQUFPQyxpQkFBbUJDLFVBQVcsQ0FDckNILEVBQU1DLE9BQU9DLGdCQUFnQkgsT0FDMUIsSUFBSUUsT0FBT0csS0FBT0QsVUFBVyxDQUNoQ0gsRUFBTUMsT0FBT0csSUFBSUYsZ0JBQWdCSCxPQUM5QixJQUFJRSxPQUFPSSxXQUFhRixVQUFXLENBQ3RDSCxFQUFNQyxPQUFPSSxVQUFVSCxnQkFBZ0JILEdBRTNDLE1BQU9DLEdBR1gsUUFBU00sR0FBZ0JOLEdBQ3JCLEdBQUlDLE9BQU9NLGlCQUFtQkosVUFBVyxDQUNyQ0YsT0FBT00sZ0JBQWdCUCxPQUNwQixJQUFJQyxPQUFPRyxLQUFPRCxVQUFXLENBQ2hDRixPQUFPRyxJQUFJRyxnQkFBZ0JQLE9BQ3hCLElBQUlDLE9BQU9JLFdBQWFGLFVBQVcsQ0FDdENGLE9BQU9JLFVBQVVFLGdCQUFnQlAsSUFLekMsUUFBU1EsR0FBVUMsRUFBT0MsRUFBU0MsRUFBY0MsR0FDN0N6QixFQUFFLG1CQUFtQjBCLE1BQ3JCQyxTQUFRQyxJQUFJTixFQUNaLElBQUlBLEdBQVNBLEVBQU1PLE9BQVMsRUFBRyxDQUMzQixHQUFJakIsR0FBT1UsRUFBTSxFQUNqQixJQUFJUSxHQUFtQm5CLEVBQWFDLEVBQ3BDbUIsV0FBWW5CLEVBQUtvQixNQUFRLEtBQU8sT0FBT0MsUUFBUSxFQUMvQ0MsZ0JBQWlCdEIsRUFBS3VCLFFBRXRCLElBQUlDLFlBQVlDLGNBQWN6QixFQUFNYSxHQUFlLENBQy9DVyxZQUFZRSxVQUFVMUIsRUFBTVcsRUFBUyxTQUFVZ0IsS0FTM0MsU0FB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biAoKSB7XG5cbiAgICBpbnZpdGF0aW9uLmluaXQoKTtcblxufSk7XG5cbnZhciBpbnZpdGF0aW9uID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBpbnZpdGF0aW9uID0ge307XG5cbiAgICB2YXIgaWQsIC8v5ZWG5ZOBaWRcbiAgICAgICAgbmFtZSwgLy/llYblk4HlkI3np7BcbiAgICAgICAgcHJpY2UsIC8v5ZWG5ZOB5Lu35qC8XG4gICAgICAgIGlzSW52aXRlLCAvL+aYr+WQpuWQr+eUqOmCgOivt+WNoVxuICAgICAgICBnb29kVHlwZSwgLy/llYblk4HnsbvlnotcbiAgICAgICAgaXNTaG93SW5mbywgLy/oh6rlrprkuYnpgoDor7fljaHmtbfmiqXmmK/lkKbmmL7npLrnlKjmiLflpLTlg4/lkozmmLXnp7BcbiAgICAgICAgaW52aXRlUG9zdGVyLCAvL+mCgOivt+WNoeWwgemdouWcsOWdgFxuICAgICAgICBkaXN0cmlidXRlUGVyY2VudDsgLy/lpZblirHmr5TkvotcblxuICAgIGZ1bmN0aW9uIGdldE9iamVjdFVSTChmaWxlKSB7XG4gICAgICAgIHZhciB1cmwgPSBudWxsO1xuICAgICAgICBpZiAod2luZG93LmNyZWF0ZU9iamVjdFVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LlVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy53ZWJraXRVUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB1cmwgPSB3aW5kb3cud2Via2l0VVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdXJsO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZU9iamVjdFVSTCh1cmwpIHsgLy/ph4rmlL7otYTmupBVUkxcbiAgICAgICAgaWYgKHdpbmRvdy5yZXZva2VPYmplY3RVUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB3aW5kb3cucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LlVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LndlYmtpdFVSTCAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHdpbmRvdy53ZWJraXRVUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvL+i1hOa6kOS4iuS8oOWHveaVsCjlj4LmlbDvvJpyZXNUeXBlOui1hOa6kOexu+WeiyxyZXNUeXBlQ2xhc3M66LWE5rqQ57G75Z6L5Lit57uG5YiG55qE56eN57G7LHJlc0xpbWl0U2l6ZTrotYTmupDpmZDliLblpKflsI8pXG4gICAgZnVuY3Rpb24gcmVzVXBsb2FkKGZpbGVzLCByZXNUeXBlLCByZXNUeXBlQ2xhc3MsIHJlc0xpbWl0U2l6ZSkge1xuICAgICAgICAkKFwiLmxvYWRpbmdQYXJ0aWFsXCIpLnNob3coKTtcbiAgICAgICAgY29uc29sZS5sb2coZmlsZXMpO1xuICAgICAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgdmFyIGZpbGUgPSBmaWxlc1swXTtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZUxvY2FsVXJsID0gZ2V0T2JqZWN0VVJMKGZpbGUpO1xuICAgICAgICAgICAgZmlsZVNpemUgPSAoZmlsZS5zaXplIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgyKTtcbiAgICAgICAgICAgIHJlc0F1ZGlvMUxlbmdoID0gZmlsZS5kdXJhdGlvbjtcbiAgICAgICAgICAgIC8vIOmZkOWItui1hOa6kOWcqCpNQuWGhVxuICAgICAgICAgICAgaWYgKCR1cGxvYWRGaWxlLmNoZWNrRmlsZVNpemUoZmlsZSwgcmVzTGltaXRTaXplKSkge1xuICAgICAgICAgICAgICAgICR1cGxvYWRGaWxlLnVwbG9hZFJlcyhmaWxlLCByZXNUeXBlLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHJlc1R5cGUgPT0gJ2F1ZGlvJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIHZhciBwcm9ncmVzcyA9IHBhcnNlSW50KGRhdGEgKiAxMDApO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKHByb2dyZXNzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAkKFwiLnVwbG9hZFBMaW5lQWN0aXZlXCIgKyByZXNUeXBlQ2xhc3MpLmNzcyhcIndpZHRoXCIsIHByb2dyZXNzICsgJyUnKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vICAgICAkKFwiLnVwbG9hZFBlcnNlbnRcIiArIHJlc1R5cGVDbGFzcykudGV4dChwcm9ncmVzcyArIFwiJVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIH1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5oiQ5Yqf5Zue6LCDXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAkKFwiLmxvYWRpbmdQYXJ0aWFsXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuS4iuS8oOaIkOWKn++8gVwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIuZGVsZXRlSW1nXCIpLnNob3coKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc1VybCA9IGRhdGEuZGF0YS5hY2Nlc3NfdXJsO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjaW1nVXJsXCIpLnZhbChyZXNVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgLy8g5aaC5p6c5piv5Zu+54mH6LWE5rqQ77yM5YiZ5bGV56S65Zu+54mH6aKE6KeIXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzVHlwZSA9PSAnaW1hZ2UnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy/nm7TmjqXliqDovb3mnKzlnLDlm77niYfov5vooYzpooTop4hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3JlQmFja0ltZ1wiKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9hZChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZW1vdmVPYmplY3RVUkwocmVzb3VyY2VMb2NhbFVybCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3JjXCIsIHJlc291cmNlTG9jYWxVcmwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOWksei0peWbnuiwg1xuICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgJChcIi5sb2FkaW5nUGFydGlhbFwiKS5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwi5LiK5Lyg5aSx6LSlISEhXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIrkvKDlpLHotKXvvIFcIik7XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIrkvKDotYTmupDpmZDliLblnKhcIiArIHJlc0xpbWl0U2l6ZSArIFwiTULlhoXvvIFcIik7XG4gICAgICAgICAgICAgICAgJChcIi51cExvYWRcIiArIHJlc1R5cGVDbGFzcykudmFsKFwiXCIpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIFcIik7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhmaWxlcylcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGludml0YXRpb24uaW5pdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgLy8g54K55Ye75oyJ6ZKu5LiK5Lyg5Zu+54mHXG4gICAgICAgICQoXCIjdXBsb2FkSW1hZ2VcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmVzVXBsb2FkKHRoaXMuZmlsZXMsIFwiaW1hZ2VcIiwgXCJyZUJhY2tJbWdcIiwgNSk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIOWIoOmZpOS4iuS8oOWbvueJh1xuICAgICAgICAkKFwiLmRlbGV0ZUltZzFcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIiNyZUJhY2tJbWdcIikuYXR0cihcInNyY1wiLCBcIlwiKTtcbiAgICAgICAgICAgICQoXCIjaW1nVXJsXCIpLnZhbChcIlwiKTtcbiAgICAgICAgICAgICQoXCIjdXBsb2FkSW1hZ2VcIikudmFsKFwiXCIpO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+S4umtleUxpc3RlbmVy5pa55rOV5rOo5YaM5oyJ6ZSu5LqL5Lu2XG4gICAgICAgIGRvY3VtZW50Lm9ua2V5ZG93biA9IGtleUxpc3RlbmVyO1xuXG4gICAgICAgIGZ1bmN0aW9uIGtleUxpc3RlbmVyKGUpIHtcbiAgICAgICAgICAgIC8vIOW9k+aMieS4i+Wbnui9pumUru+8jOaJp+ihjOaIkeS7rOeahOS7o+eggVxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xuICAgICAgICAgICAgICAgICQoXCIuZ29vZHNTZWFyY2hCdG5cIikuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8v6YKA6K+35Y2h6K6+572uXG4gICAgICAgICQoXCIuc2FsZXJDb250ZW50XCIpLm9uKFwiY2xpY2tcIiwgXCIuaW52aXRlT3BlcmF0ZVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZCA9ICQodGhpcykuZGF0YShcImlkXCIpO1xuICAgICAgICAgICAgbmFtZSA9ICQodGhpcykuZGF0YShcIm5hbWVcIik7XG4gICAgICAgICAgICBwcmljZSA9ICQodGhpcykuZGF0YShcInByaWNlXCIpO1xuICAgICAgICAgICAgaXNJbnZpdGUgPSAkKHRoaXMpLmRhdGEoXCJpc19pbnZpdGVcIik7XG4gICAgICAgICAgICBnb29kVHlwZSA9ICQodGhpcykuZGF0YShcImdvb2RfdHlwZVwiKTtcbiAgICAgICAgICAgIGludml0ZVBvc3RlciA9ICQodGhpcykuZGF0YShcImludml0ZXBvc3RlclwiKTtcbiAgICAgICAgICAgIGlzU2hvd0luZm8gPSAkKHRoaXMpLmRhdGEoXCJpc3Nob3dpbmZvXCIpO1xuICAgICAgICAgICAgZGlzdHJpYnV0ZVBlcmNlbnQgPSAkKHRoaXMpLmRhdGEoXCJkaXN0cmlidXRlX3BlcmNlbnRcIik7XG4gICAgICAgICAgICAkKFwiLnNhbGVHb29kc05hbWVcIikudGV4dChuYW1lKTtcbiAgICAgICAgICAgICQoXCIjcmVCYWNrSW1nXCIpLmF0dHIoXCJzcmNcIiwgaW52aXRlUG9zdGVyKTtcbiAgICAgICAgICAgICQoXCIjaW1nVXJsXCIpLnZhbChpbnZpdGVQb3N0ZXIpO1xuICAgICAgICAgICAgaWYgKGludml0ZVBvc3RlciAhPSBcIlwiKSB7XG4gICAgICAgICAgICAgICAgJChcIi5kZWxldGVJbWdcIikuc2hvdygpO1xuICAgICAgICAgICAgICAgICQoXCIuZGVsZXRlSW1nMVwiKS5zaG93KCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCIuZGVsZXRlSW1nXCIpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAkKFwiLmRlbGV0ZUltZzFcIikuaGlkZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYoaXNTaG93SW5mbz09MSl7XG4gICAgICAgICAgICAgICAgJCgnLnNob3dJbmZvJykuY2xpY2soKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJCgnLmhpZGVJbmZvJykuY2xpY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmKGlzSW52aXRlKXtcbiAgICAgICAgICAgIC8vICAgICAkKFwiLmxhYmVsMVwiKS5jbGljaygpO1xuICAgICAgICAgICAgLy8gICAgICQoXCIuc2V0UGVyY2VudFwiKS5zaG93KCk7XG4gICAgICAgICAgICAvLyB9ZWxzZSB7XG4gICAgICAgICAgICAvLyAgICAgJChcIi5sYWJlbDJcIikuY2xpY2soKTtcbiAgICAgICAgICAgIC8vICAgICAkKFwiLnNldFBlcmNlbnRcIikuaGlkZSgpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikudmFsKGRpc3RyaWJ1dGVQZXJjZW50KTtcbiAgICAgICAgICAgIGlmIChwcmljZSA8PSAxKSB7XG4gICAgICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikuYXR0cihcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XG4gICAgICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikuYWRkQ2xhc3MoXCJpbnB1dERpc2FibGVkXCIpO1xuXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICQoXCIuaW5wdXRSYWRpb1ZhbHVlXCIpLnJlbW92ZUNsYXNzKFwiaW5wdXREaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICAgICAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS5yZW1vdmVBdHRyKFwicmVhZG9ubHlcIik7XG4gICAgICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikucmVtb3ZlQXR0cihcImRpc2FibGVkXCIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJChcIi5zZXRTYWxlUmF0aW9XaW5kb3dcIikuZmFkZUluKDIwMCk7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoXCIuc2V0U2FsZVJhdGlvV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIubGFiZWwxXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoXCIuc2V0UGVyY2VudFwiKS5zbGlkZURvd24oMzAwKTtcbiAgICAgICAgICAgICQoXCIuaW5wdXRSYWRpb1ZhbHVlXCIpLnJlbW92ZUF0dHIoXCJyZWFkb25seVwiKTtcbiAgICAgICAgICAgICQoXCIuaW5wdXRSYWRpb1ZhbHVlXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcbiAgICAgICAgICAgICQoXCIuaW5wdXRSYWRpb1ZhbHVlXCIpLmNzcyhcImNvbG9yXCIsIFwiIzI0MzA0MlwiKTtcbiAgICAgICAgICAgIGlzSW52aXRlID0gMTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgJChcIi5zZXRTYWxlUmF0aW9XaW5kb3dcIikub24oXCJjbGlja1wiLCBcIi5sYWJlbDJcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIi5zZXRQZXJjZW50XCIpLnNsaWRlVXAoMzAwKTtcbiAgICAgICAgICAgICQoXCIuaW5wdXRSYWRpb1ZhbHVlXCIpLmF0dHIoXCJyZWFkb25seVwiLCBcInJlYWRvbmx5XCIpO1xuICAgICAgICAgICAgJChcIi5pbnB1dFJhZGlvVmFsdWVcIikuYXR0cihcImRpc2FibGVkXCIsIFwiZGlzYWJsZWRcIik7XG4gICAgICAgICAgICAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS5jc3MoXCJjb2xvclwiLCBcIiNiMmIyYjJcIik7XG4gICAgICAgICAgICAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS52YWwoXCJcIik7XG4gICAgICAgICAgICBpc0ludml0ZSA9IDA7XG4gICAgICAgIH0pO1xuXG5cbiAgICAgICAgJChcIi5zZXRTYWxlUmF0aW9XaW5kb3dcIikub24oXCJjbGlja1wiLCBcIi5jbG9zZUljb24sLmNhbmNlbFNhbGVCdG5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChcIi5zZXRTYWxlUmF0aW9XaW5kb3dcIikuZmFkZU91dCgyMDApO1xuICAgICAgICB9KTtcblxuICAgICAgICAvL+WVhuWTgeaQnOe0olxuICAgICAgICAkKFwiLnNhbGVyQ29udGVudFwiKS5vbignY2xpY2snLCAnLmdvb2RzU2VhcmNoQnRuJywgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGdvb2RTZWFyY2hDb250ZW50ID0gJChcIi5nb29kc1NlYXJjaElucHV0XCIpLnZhbCgpO1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJy9pbnZpdGUvaW5kZXg/bmFtZT0nICsgZ29vZFNlYXJjaENvbnRlbnQ7XG4gICAgICAgIH0pO1xuXG4gICAgICAgICQoXCIuc2V0U2FsZVJhdGlvV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIuY29uZmlybVNhbGVCdG5cIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgZGlzdHJpYnV0ZVBlcmNlbnQgPSAkKFwiLmlucHV0UmFkaW9WYWx1ZVwiKS52YWwoKTtcbiAgICAgICAgICAgIGludml0ZVBvc3RlciA9ICQoXCIjaW1nVXJsXCIpLnZhbCgpO1xuICAgICAgICAgICAgaWYgKCQoXCIjc2hvd0luZm9cIikuaXMoJzpjaGVja2VkJykpIHtcbiAgICAgICAgICAgICAgICBpc1Nob3dJbmZvID0gMTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaXNTaG93SW5mbyA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YXIgaW52aXRlSW5mbyA9IHtcbiAgICAgICAgICAgICAgICBpZDogaWQsICAgLy/llYblk4FpZFxuICAgICAgICAgICAgICAgIGdvb2RzX3R5cGU6IGdvb2RUeXBlLCAgIC8v5ZWG5ZOB57G75Z6LXG4gICAgICAgICAgICAgICAgZGlzdHJpYnV0ZV9wZXJjZW50OiBkaXN0cmlidXRlUGVyY2VudCwgICAgLy/pgoDor7fmr5TkvotcbiAgICAgICAgICAgICAgICBpbnZpdGVfcG9zdGVyOiBpbnZpdGVQb3N0ZXIsICAgIC8v6YKA6K+35rW35oql5Zu+54mH5Zyw5Z2AXG4gICAgICAgICAgICAgICAgaXNfc2hvd191c2VyaW5mbzogaXNTaG93SW5mbywgICAgIC8v5rW35oql5piv5ZCm5pi+56S655So5oi35L+h5oGvXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBpZiAoaXNJbnZpdGUgJiYgJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbnZpdGVJbmZvLmRpc3RyaWJ1dGVfcGVyY2VudCkpIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi6K+36L6T5YWl6KaB6K6+572u55qE5q+U5L6L77yBXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLypjb25zb2xlLmxvZyhwcmljZSAqIChkaXN0cmlidXRlUGVyY2VudC8xMDApKVxuICAgICAgICAgICAgaWYocHJpY2UgKiAoZGlzdHJpYnV0ZVBlcmNlbnQvMTAwKSA8IDAuMDEpIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLpooTorqHpgoDor7flpZblirHlsI/kuo4wLjAx5YWD77yM6K+36YeN5paw6K6+572u77yBXCIpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0qL1xuICAgICAgICAgICAgJC5wb3N0KCdzZXQnLCBpbnZpdGVJbmZvLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuS/neWtmOaIkOWKn1wiKTtcbiAgICAgICAgICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG5cblxuICAgIH07XG5cbiAgICByZXR1cm4gaW52aXRhdGlvbjtcbn0oKTtcblxuZnVuY3Rpb24gcmF0ZUNoZWNrTnVtMSh2YWx1ZSwgZG9tKSB7XG4gICAgLy/muIXpmaRcIuaVsOWtl1wi5Lul5aSW55qE5a2X56ymXG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9bXlxcZF0vZywgXCJcIik7XG5cbiAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL15bNV1bMS05XSR8Xls2LTldXFxkJHxeWzEtOV1bMC05XVxcZHsxLH0kfF4wXFxkezEsfSQvLCBcIlwiKTtcblxuICAgICQoZG9tKS52YWwodmFsdWUpO1xufVxuIl19
