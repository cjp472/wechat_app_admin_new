var sms_name;var sms_content;var model_id;var needRefresh=false;var $is_address_right=true;$(document).ready(function(){refresh();initMsgModel();bindElement();$("input[name='search']").val(getUrlParam("search"));$("select[name='ruler']").val(getUrlParam("ruler")==null||getUrlParam("ruler")==""?0:getUrlParam("ruler"));$("select[name='is_pay']").val(getUrlParam("is_pay")==null||getUrlParam("is_pay")==""?0:getUrlParam("is_pay"));$("tbody tr").mouseover(function(){$(this).css({"background-color":"#f5f5f5"})}).mouseout(function(){$(this).css({"background-color":"#fff"})});$("#searchButton").click(function(){showLoading();var e=$("select[name='ruler']").val();var t=$("input[name='search']").val();var s=$("select[name='is_pay']").val();window.location.href="/customer?is_pay="+s+"&ruler="+e+"&search="+t;hideLoading()});$(document).keypress(function(e){if(e.which==13){$("#searchButton").trigger("click")}});checkUrl()});function jumpDetail(e){var e=e;var t=e.split("|")[0];var s=e.split("|")[1];window.location.href="/customerdetail?appId="+t+"&userId="+s}function jumpMsg(e){var e=e;var t=e.split("|")[0];var s=e.split("|")[1];$("#SmsModal").modal("show");document.getElementById("link_type_selector")[0].selected=true;$("#skip_target_selector").empty();$("#skip_target_selector").addClass("hide");$("#skip_target_input").removeClass("hide");$(".modal-footer").children("button").eq(0).unbind("click").bind("click",function(){var e=$("#sms_nickname").val();var r=$("#sms_content").val();if(e.length==0){window.wxc.xcConfirm("亲，还未输入发送人昵称哦~","error");return false}if(r.length==0){window.wxc.xcConfirm("亲，还未输入消息内容哦~","error");return false}if(!$is_address_right){window.wxc.xcConfirm("亲，外部链接输入有问题哦~","error");return false}$("#SmsModal").modal("hide");showLoading();var i={};var a=$("#link_type_selector").find("option:selected").val();if(a=="audio"){a=2}else if(a=="video"){a=3}else if(a=="image_text"){a=1}else if(a=="alive"){a=7}else if(a=="package"){a=6}else if(a=="h5"){a=5}else{a=0}i["skip_type"]=a;if(a==5){i["skip_target"]=$("#skip_target_input").val().trim()}else if(a==0){i["skip_target"]=""}else{i["skip_target"]=$("#skip_target_selector").find("option:selected").val()}if(a==2||a==3||a==1||a==6){if(i["skip_target"]==""){baseUtils.show.blueTip("请选择跳转资源链接!");return false}}if(a!=0){i["skip_title"]=$("#link_name").val()}else{i["skip_title"]=""}$.post("/customermsg",{appId:t,userId:s,nickname:e,content:r,params:i},function(e){hideLoading();if(e.ret==0){baseUtils.show.blueTip("发送成功!",function(){window.location.reload()})}else{window.wxc.xcConfirm("系统繁忙，请稍后再试!","error")}})})}function initMsgModel(){$(".model_type").on("click",function(){$(".model_type").removeClass("border_blue");$(this).addClass("border_blue");$("#sms_nickname").val($(this).attr("data-name"));$("#sms_content").val($(this).attr("data-content"));if($("#cancel_model").hasClass("border_blue")){$(".edit_model").addClass("hide");$(".model_type").removeClass("border_blue")}model_id=$(this).attr("data-id");sms_name=$(this).attr("data-name");sms_content=$(this).attr("data-content")});$("#sms_content").keyup(function(){if($(".border_blue").length>0){$(".edit_model").removeClass("hide")}});$("#sms_nickname").keyup(function(){if($(".border_blue").length>0){$(".edit_model").removeClass("hide")}});$(".edit_model").on("click",function(){model_id=$(".border_blue").attr("data-id");var e=$("#sms_nickname").val();var t=$("#sms_content").val();if(model_id==""){model_id=0;if(e!=""&&t!=""){console.log("新增模板："+model_id+">>"+e+">>"+t)}else{baseUtils.show.redTip("您的发送人昵称/内容为空");return}}else{if(e!=""&&t!=""){console.log("更新模板："+model_id+">>"+e+">>"+t)}else{baseUtils.show.redTip("您的发送人昵称/内容为空");return}}if(e==sms_name&&t==sms_content){baseUtils.show.redTip("您没有做任何模板修改")}else{showLoading();var s="/modelchange";$.post(s,{model_id:model_id,send_nick_name:e,content:t},function(s){hideLoading();console.log(s);var r=s.code;var i=s.msg;baseUtils.show.blueTip(i);if(r==0){$(".border_blue").attr("data-id",s.id);$(".border_blue").attr("data-name",e);$(".border_blue").attr("data-content",t);needRefresh=true}else if(r==1){console.log(s.errorMsg)}else if(r==2){$(".border_blue").attr("data-name",e);$(".border_blue").attr("data-content",t);needRefresh=true}})}})}function refresh(){$("#SmsModal").on("hide.bs.modal",function(){if(needRefresh){location.reload()}})}function bindElement(){$("#link_type_selector").on("change",function(){var e=$(this).find("option:selected").val();if(e=="h5"){$("#skip_target_selector").empty();$("#skip_target_selector").addClass("hide");$("#skip_target_input").removeClass("hide");return}else if(e=="no_jump"){$("#skip_target_selector").empty();$("#skip_target_selector").removeClass("hide");$("#skip_target_input").addClass("hide");return}else{$("#skip_target_selector").empty();$("#skip_target_selector").removeClass("hide");$("#skip_target_input").addClass("hide")}$.get("/banner/getResourceList?type="+e,function(e){$("#skip_target_selector").empty();e=JSON.parse(e);var t=e.length;var s="";for(var r=0;r<t;r++){s+="<option value='"+e[r].id+"'>"+e[r].title+"</option>"}$("#skip_target_selector").append(s)})})}function checkUrl(){$("#skip_target_input.form-control").bind("input propertychange",function(){var e=document.getElementById("skip_target_input").value;if(e==""||!e.indexOf("http://")||!e.indexOf("https://")){$(".http_error_tip").addClass("hide");$(".modal-footer").css({margin:"45px 15px 0"}).css({padding:"30px 0px"});$is_address_right=true}else{$(".http_error_tip").removeClass("hide");$(".modal-footer").css({margin:"0 15px 0"}).css({padding:"15px 0 0 30px"});$is_address_right=false}});$("#link_type_selector").change(function(){var e=$(this).children(":selected").val();if(e!=="h5"){$(".http_error_tip").addClass("hide");$(".modal-footer").css({margin:"45px 15px 0"}).css({padding:"30px 0px"});$is_address_right=true}else{$("#skip_target_input").val("")}})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2N1c3RvbWVyLmpzIl0sIm5hbWVzIjpbInNtc19uYW1lIiwic21zX2NvbnRlbnQiLCJtb2RlbF9pZCIsIm5lZWRSZWZyZXNoIiwiJGlzX2FkZHJlc3NfcmlnaHQiLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsInJlZnJlc2giLCJpbml0TXNnTW9kZWwiLCJiaW5kRWxlbWVudCIsInZhbCIsImdldFVybFBhcmFtIiwibW91c2VvdmVyIiwidGhpcyIsImNzcyIsImJhY2tncm91bmQtY29sb3IiLCJtb3VzZW91dCIsImNsaWNrIiwic2hvd0xvYWRpbmciLCJydWxlciIsInNlYXJjaCIsImlzX3BheSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImhpZGVMb2FkaW5nIiwia2V5cHJlc3MiLCJlIiwid2hpY2giLCJ0cmlnZ2VyIiwiY2hlY2tVcmwiLCJqdW1wRGV0YWlsIiwiaW5mbyIsImFwcElkIiwic3BsaXQiLCJ1c2VySWQiLCJqdW1wTXNnIiwibW9kYWwiLCJnZXRFbGVtZW50QnlJZCIsInNlbGVjdGVkIiwiZW1wdHkiLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiY2hpbGRyZW4iLCJlcSIsInVuYmluZCIsImJpbmQiLCJuaWNrbmFtZSIsImNvbnRlbnQiLCJsZW5ndGgiLCJ3eGMiLCJ4Y0NvbmZpcm0iLCJwYXJhbXMiLCJza2lwX3R5cGUiLCJmaW5kIiwidHJpbSIsImJhc2VVdGlscyIsInNob3ciLCJibHVlVGlwIiwicG9zdCIsImRhdGEiLCJyZXQiLCJyZWxvYWQiLCJvbiIsImF0dHIiLCJoYXNDbGFzcyIsImtleXVwIiwibmFtZSIsImNvbnNvbGUiLCJsb2ciLCJyZWRUaXAiLCJ1cmwiLCJzZW5kX25pY2tfbmFtZSIsInJlc3VsdCIsIlJlQ29kZSIsImNvZGUiLCJtc2ciLCJpZCIsImVycm9yTXNnIiwidHlwZSIsImdldCIsIkpTT04iLCJwYXJzZSIsImNvdW50IiwiaHRtbFN0ciIsImkiLCJ0aXRsZSIsImFwcGVuZCIsImlucHV0X2Fk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QUFLSixFQUFPWSxHQUFHQyxNQUFNLFlBRWpFbEYsRUFBRSx5QkFBeUJtRixPQUFPSCxPQUs5QyxRQUFTdEQsWUFFTDFCLEVBQUUsbUNBQW1DMEMsS0FBSyx1QkFBd0IsV0FDOUQsR0FBSTBDLEdBQWdCbkYsU0FBU2lDLGVBQWUscUJBQXFCbUQsS0FDakUsSUFBSUQsR0FBaUIsS0FBT0EsRUFBY0UsUUFBUSxhQUFlRixFQUFjRSxRQUFRLFlBQWEsQ0FFaEd0RixFQUFFLG1CQUFtQnFDLFNBQVMsT0FDOUJyQyxHQUFFLGlCQUFpQlUsS0FBSzZFLE9BQVUsZ0JBQWdCN0UsS0FBSzhFLFFBQVcsWUFDbEV6RixtQkFBb0IsU0FDakIsQ0FFSEMsRUFBRSxtQkFBbUJzQyxZQUFZLE9BQ2pDdEMsR0FBRSxpQkFBaUJVLEtBQUs2RSxPQUFVLGFBQWE3RSxLQUFLOEUsUUFBVyxpQkFDL0R6RixtQkFBb0IsUUFHNUJDLEdBQUUsdUJBQXVCeUYsT0FBTyxXQUM1QixHQUFJeEMsR0FBWWpELEVBQUVTLE1BQU04QixTQUFTLGFBQWFqQyxLQUM5QyxJQUFJMkMsSUFBYyxLQUFNLENBRXBCakQsRUFBRSxtQkFBbUJxQyxTQUFTLE9BQzlCckMsR0FBRSxpQkFBaUJVLEtBQUs2RSxPQUFVLGdCQUFnQjdFLEtBQUs4RSxRQUFXLFlBQ2xFekYsbUJBQW9CLFNBQ2pCLENBQ0hDLEVBQUUsc0JBQXNCTSxJQUFJIiwiZmlsZSI6ImFkbWluL2N1c3RvbWVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgU3R1cGhpbiBvbiAyMDE2LzkvMjguXHJcbiAqL1xyXG5cclxudmFyIHNtc19uYW1lO1xyXG52YXIgc21zX2NvbnRlbnQ7XHJcbnZhciBtb2RlbF9pZDtcclxudmFyIG5lZWRSZWZyZXNoID0gZmFsc2U7XHJcbi8vIOi+k+WFpee9keWdgOaYr+WQpuato+ehrlxyXG52YXIgJGlzX2FkZHJlc3NfcmlnaHQgPSB0cnVlO1xyXG5cclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKVxyXG57XHJcblxyXG4gICAgcmVmcmVzaCgpO1xyXG5cclxuICAgIGluaXRNc2dNb2RlbCgpO1xyXG5cclxuICAgIGJpbmRFbGVtZW50KCk7XHJcblxyXG4gICAgLy/loavlhaXmkJzntKLlgLxcclxuICAgICQoXCJpbnB1dFtuYW1lPSdzZWFyY2gnXVwiKS52YWwoZ2V0VXJsUGFyYW0oXCJzZWFyY2hcIikpO1xyXG4gICAgJChcInNlbGVjdFtuYW1lPSdydWxlciddXCIpLnZhbCgoZ2V0VXJsUGFyYW0oXCJydWxlclwiKT09bnVsbCAgfHwgZ2V0VXJsUGFyYW0oXCJydWxlclwiKT09JycpID8gMCA6Z2V0VXJsUGFyYW0oXCJydWxlclwiKSk7XHJcbiAgICAkKFwic2VsZWN0W25hbWU9J2lzX3BheSddXCIpLnZhbCgoZ2V0VXJsUGFyYW0oXCJpc19wYXlcIik9PW51bGwgIHx8IGdldFVybFBhcmFtKFwiaXNfcGF5XCIpPT0nJykgPyAwIDpnZXRVcmxQYXJhbShcImlzX3BheVwiKSk7XHJcblxyXG4gICAgLy90YWJsZSBob3Zlcuagt+W8j1xyXG4gICAgJChcInRib2R5IHRyXCIpLm1vdXNlb3ZlcihmdW5jdGlvbigpXHJcbiAgICB7XHJcbiAgICAgICAgJCh0aGlzKS5jc3MoeydiYWNrZ3JvdW5kLWNvbG9yJzonI2Y1ZjVmNSd9KTtcclxuICAgIH0pLm1vdXNlb3V0KGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICAkKHRoaXMpLmNzcyh7J2JhY2tncm91bmQtY29sb3InOicjZmZmJ30pO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/mkJzntKJcclxuICAgICQoXCIjc2VhcmNoQnV0dG9uXCIpLmNsaWNrKGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICBzaG93TG9hZGluZygpO1xyXG4gICAgICAgIHZhciBydWxlcj0kKFwic2VsZWN0W25hbWU9J3J1bGVyJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIHNlYXJjaD0kKFwiaW5wdXRbbmFtZT0nc2VhcmNoJ11cIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGlzX3BheT0kKFwic2VsZWN0W25hbWU9J2lzX3BheSddXCIpLnZhbCgpO1xyXG4gICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPVwiL2N1c3RvbWVyP2lzX3BheT1cIitpc19wYXkrXCImcnVsZXI9XCIrcnVsZXIrXCImc2VhcmNoPVwiK3NlYXJjaDtcclxuICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy/lm57ovabmkJzntKJcclxuICAgICQoZG9jdW1lbnQpLmtleXByZXNzKGZ1bmN0aW9uKGUpXHJcbiAgICB7XHJcbiAgICAgICAgaWYoZS53aGljaCA9PSAxMylcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgICQoJyNzZWFyY2hCdXR0b24nKS50cmlnZ2VyKFwiY2xpY2tcIik7Ly/mqKHmi5/ngrnlh7tcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyAg5qOA5rWL5aSW6ZO+XHJcbiAgICBjaGVja1VybCgpO1xyXG5cclxufSk7XHJcbi8v6LCD5Yiw6K+m5oOF6aG1XHJcbmZ1bmN0aW9uIGp1bXBEZXRhaWwoaW5mbylcclxue1xyXG4gICAgdmFyIGluZm89aW5mbztcclxuICAgIHZhciBhcHBJZD1pbmZvLnNwbGl0KFwifFwiKVswXTtcclxuICAgIHZhciB1c2VySWQ9aW5mby5zcGxpdChcInxcIilbMV07XHJcbiAgICB3aW5kb3cubG9jYXRpb24uaHJlZj0nL2N1c3RvbWVyZGV0YWlsP2FwcElkPScrYXBwSWQrJyZ1c2VySWQ9Jyt1c2VySWQ7XHJcbn1cclxuXHJcbi8v5Y+R5raI5oGvLOWFiOi1sOi/meS4qmpz5YaN6LWw5by55qGGXHJcbmZ1bmN0aW9uIGp1bXBNc2coaW5mbylcclxue1xyXG4gICAgdmFyIGluZm89aW5mbztcclxuICAgIHZhciBhcHBJZD1pbmZvLnNwbGl0KFwifFwiKVswXTtcclxuICAgIHZhciB1c2VySWQ9aW5mby5zcGxpdChcInxcIilbMV07XHJcbiAgICAkKFwiI1Ntc01vZGFsXCIpLm1vZGFsKCdzaG93Jyk7XHJcblxyXG4gICAgLy8gIOWwhumTvuaOpeexu+Wei+iuvue9ruS4uiDlpJbpg6jpk77mjqVcclxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibGlua190eXBlX3NlbGVjdG9yXCIpWzBdLnNlbGVjdGVkPXRydWU7XHJcbiAgICAvLyAg5bCG5Y+z5L6n6K6+572u5Li66L6T5YWl5qGGXHJcbiAgICAkKCcjc2tpcF90YXJnZXRfc2VsZWN0b3InKS5lbXB0eSgpO1xyXG4gICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICQoJyNza2lwX3RhcmdldF9pbnB1dCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcblxyXG4gICAgLy/noa7orqTmjInpkq7ngrnlh7tcclxuICAgICQoXCIubW9kYWwtZm9vdGVyXCIpLmNoaWxkcmVuKFwiYnV0dG9uXCIpLmVxKDApLnVuYmluZChcImNsaWNrXCIpLmJpbmQoXCJjbGlja1wiICwgZnVuY3Rpb24gKClcclxuICAgIHtcclxuICAgICAgICB2YXIgbmlja25hbWU9JChcIiNzbXNfbmlja25hbWVcIikudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQ9JChcIiNzbXNfY29udGVudFwiKS52YWwoKTtcclxuICAgICAgICBpZihuaWNrbmFtZS5sZW5ndGggPT0gMClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHdpbmRvdy53eGMueGNDb25maXJtKCfkurLvvIzov5jmnKrovpPlhaXlj5HpgIHkurrmmLXnp7Dlk6Z+JywnZXJyb3InKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihjb250ZW50Lmxlbmd0aCA9PSAwKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgd2luZG93Lnd4Yy54Y0NvbmZpcm0oJ+S6su+8jOi/mOacqui+k+WFpea2iOaBr+WGheWuueWTpn4nLCdlcnJvcicpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICghJGlzX2FkZHJlc3NfcmlnaHQpIHtcclxuICAgICAgICAgICAgd2luZG93Lnd4Yy54Y0NvbmZpcm0oJ+S6su+8jOWklumDqOmTvuaOpei+k+WFpeaciemXrumimOWTpn4nLCdlcnJvcicpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKFwiI1Ntc01vZGFsXCIpLm1vZGFsKCdoaWRlJyk7XHJcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcclxuXHJcbiAgICAgICAgLy8gIOiOt+WPlumTvuaOpeWQjeensCvpk77mjqXlnLDlnYAo5qC55o2u57G75Z6L56Gu5a6aKVxyXG4gICAgICAgIHZhciBwYXJhbXMgPSB7fTtcclxuICAgICAgICB2YXIgc2tpcF90eXBlID0gJCgnI2xpbmtfdHlwZV9zZWxlY3RvcicpLmZpbmQoJ29wdGlvbjpzZWxlY3RlZCcpLnZhbCgpO1xyXG5cclxuICAgICAgICBpZiAoc2tpcF90eXBlID09IFwiYXVkaW9cIikge1xyXG4gICAgICAgICAgICBza2lwX3R5cGUgPSAyO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpcF90eXBlID09IFwidmlkZW9cIikge1xyXG4gICAgICAgICAgICBza2lwX3R5cGUgPSAzO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpcF90eXBlID09IFwiaW1hZ2VfdGV4dFwiKSB7XHJcbiAgICAgICAgICAgIHNraXBfdHlwZSA9IDE7XHJcbiAgICAgICAgfSBlbHNlIGlmKHNraXBfdHlwZSA9PSBcImFsaXZlXCIpe1xyXG4gICAgICAgICAgICBza2lwX3R5cGUgPSA3O1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpcF90eXBlID09IFwicGFja2FnZVwiKSB7XHJcbiAgICAgICAgICAgIHNraXBfdHlwZSA9IDY7XHJcbiAgICAgICAgfWVsc2UgaWYgKHNraXBfdHlwZSA9PSBcImg1XCIpIHtcclxuICAgICAgICAgICAgc2tpcF90eXBlID0gNTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBza2lwX3R5cGUgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYXJhbXNbJ3NraXBfdHlwZSddID0gc2tpcF90eXBlO1xyXG5cclxuICAgICAgICBpZiAoc2tpcF90eXBlID09IDUpIHtcclxuICAgICAgICAgICAgcGFyYW1zWydza2lwX3RhcmdldCddID0gJCgnI3NraXBfdGFyZ2V0X2lucHV0JykudmFsKCkudHJpbSgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoc2tpcF90eXBlID09IDApIHtcclxuICAgICAgICAgICAgcGFyYW1zWydza2lwX3RhcmdldCddID0gJyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcGFyYW1zWydza2lwX3RhcmdldCddID0gJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoc2tpcF90eXBlID09IDIgfHwgc2tpcF90eXBlID09IDMgfHwgc2tpcF90eXBlID09IDEgfHwgc2tpcF90eXBlID09Nikge1xyXG4gICAgICAgICAgICBpZiAocGFyYW1zWydza2lwX3RhcmdldCddID09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLor7fpgInmi6not7PovazotYTmupDpk77mjqUhXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChza2lwX3R5cGUgIT0gMCkge1xyXG4gICAgICAgICAgICBwYXJhbXNbJ3NraXBfdGl0bGUnXSA9ICQoJyNsaW5rX25hbWUnKS52YWwoKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBwYXJhbXNbJ3NraXBfdGl0bGUnXSA9ICcnO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJC5wb3N0KFwiL2N1c3RvbWVybXNnXCIse1wiYXBwSWRcIjphcHBJZCxcInVzZXJJZFwiOnVzZXJJZCxcIm5pY2tuYW1lXCI6bmlja25hbWUsXCJjb250ZW50XCI6Y29udGVudCxcInBhcmFtc1wiOnBhcmFtc30sZnVuY3Rpb24oZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIGlmKGRhdGEucmV0PT0wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL3dpbmRvdy53eGMueGNDb25maXJtKFwi5Y+R6YCB5oiQ5YqfXCIsXCJzdWNjZXNzXCIse29uT2s6ZnVuY3Rpb24gKClcclxuICAgICAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAgICAgLy8gICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgLy99fSk7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5Y+R6YCB5oiQ5YqfIVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cud3hjLnhjQ29uZmlybShcIuezu+e7n+e5geW/me+8jOivt+eojeWQjuWGjeivlSFcIixcImVycm9yXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaW5pdE1zZ01vZGVsKCkge1xyXG5cclxuICAgICQoJy5tb2RlbF90eXBlJykub24oXCJjbGlja1wiLGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAkKCcubW9kZWxfdHlwZScpLnJlbW92ZUNsYXNzKCdib3JkZXJfYmx1ZScpO1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2JvcmRlcl9ibHVlJyk7XHJcbiAgICAgICAgJCgnI3Ntc19uaWNrbmFtZScpLnZhbCgkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKTtcclxuICAgICAgICAkKCcjc21zX2NvbnRlbnQnKS52YWwoJCh0aGlzKS5hdHRyKCdkYXRhLWNvbnRlbnQnKSk7XHJcbiAgICAgICAgaWYoJCgnI2NhbmNlbF9tb2RlbCcpLmhhc0NsYXNzKCdib3JkZXJfYmx1ZScpKXtcclxuICAgICAgICAgICAgJCgnLmVkaXRfbW9kZWwnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCcubW9kZWxfdHlwZScpLnJlbW92ZUNsYXNzKCdib3JkZXJfYmx1ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBtb2RlbF9pZCA9ICQodGhpcykuYXR0cignZGF0YS1pZCcpO1xyXG4gICAgICAgIHNtc19uYW1lID0gJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKTtcclxuICAgICAgICBzbXNfY29udGVudCA9ICQodGhpcykuYXR0cignZGF0YS1jb250ZW50Jyk7XHJcbiAgICB9KVxyXG5cclxuICAgICQoJyNzbXNfY29udGVudCcpLmtleXVwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZigkKCcuYm9yZGVyX2JsdWUnKS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAkKCcuZWRpdF9tb2RlbCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnI3Ntc19uaWNrbmFtZScpLmtleXVwKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBpZigkKCcuYm9yZGVyX2JsdWUnKS5sZW5ndGggPjApe1xyXG4gICAgICAgICAgICAkKCcuZWRpdF9tb2RlbCcpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgJCgnLmVkaXRfbW9kZWwnKS5vbihcImNsaWNrXCIsZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIC8v5pWw5o2u5bqT5LiN5a2Y5Zyo55u45YWz5qih5p2/XHJcbiAgICAgICAgbW9kZWxfaWQgPSAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLWlkJyk7XHJcbiAgICAgICAgdmFyIG5hbWUgPSAkKCcjc21zX25pY2tuYW1lJykudmFsKCk7XHJcbiAgICAgICAgdmFyIGNvbnRlbnQ9ICQoJyNzbXNfY29udGVudCcpLnZhbCgpO1xyXG4gICAgICAgIGlmKG1vZGVsX2lkPT1cIlwiKXtcclxuICAgICAgICAgICAgLy/lkJHlkI7lj7Dmj5LlhaXmqKHmnb9cclxuICAgICAgICAgICAgbW9kZWxfaWQgPSAwO1xyXG4gICAgICAgICAgICBpZihuYW1lIT1cIlwiICYmIGNvbnRlbnQhPVwiXCIpe1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLmlrDlop7mqKHmnb/vvJpcIittb2RlbF9pZCtcIj4+XCIrbmFtZStcIj4+XCIrY29udGVudCk7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfmgqjnmoTlj5HpgIHkurrmmLXnp7Av5YaF5a655Li656m6Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy/mm7TmlrDljp/mnInmqKHmnb9cclxuICAgICAgICAgICAgaWYobmFtZSE9XCJcIiAmJiBjb250ZW50IT1cIlwiKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5pu05paw5qih5p2/77yaXCIrbW9kZWxfaWQrXCI+PlwiK25hbWUrXCI+PlwiK2NvbnRlbnQpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5oKo55qE5Y+R6YCB5Lq65pi156ewL+WGheWuueS4uuepuicpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKG5hbWUgPT0gc21zX25hbWUgJiYgY29udGVudCA9PSBzbXNfY29udGVudCl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5oKo5rKh5pyJ5YGa5Lu75L2V5qih5p2/5L+u5pS5Jyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHNob3dMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgIHZhciB1cmwgPSBcIi9tb2RlbGNoYW5nZVwiO1xyXG4gICAgICAgICAgICAkLnBvc3QodXJsLCB7J21vZGVsX2lkJzogbW9kZWxfaWQsJ3NlbmRfbmlja19uYW1lJzpuYW1lLCdjb250ZW50Jzpjb250ZW50fSxmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIHZhciBSZUNvZGUgPSByZXN1bHQuY29kZTtcclxuICAgICAgICAgICAgICAgIHZhciBpbmZvID0gcmVzdWx0Lm1zZztcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoaW5mbyk7XHJcbiAgICAgICAgICAgICAgICBpZihSZUNvZGU9PTApeyAvL+aWsOW7uuaooeadv+aIkOWKnyDlubborr7nva7lvZPliY3mnIDmlrDmj5LlhaXnmoTmuKDpgZNpZFxyXG4gICAgICAgICAgICAgICAgICAgICQoJy5ib3JkZXJfYmx1ZScpLmF0dHIoJ2RhdGEtaWQnLHJlc3VsdC5pZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJvcmRlcl9ibHVlJykuYXR0cignZGF0YS1uYW1lJyxuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLWNvbnRlbnQnLGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKFJlQ29kZT09MSl7IC8v6ZSZ6K+vXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzdWx0LmVycm9yTXNnKTtcclxuICAgICAgICAgICAgICAgIH1lbHNlIGlmKFJlQ29kZT09Mil7IC8v5pu05paw5qih5p2/5oiQ5YqfXHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJvcmRlcl9ibHVlJykuYXR0cignZGF0YS1uYW1lJyxuYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYm9yZGVyX2JsdWUnKS5hdHRyKCdkYXRhLWNvbnRlbnQnLGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5lZWRSZWZyZXNoID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuLy/liKTmlq3mmK/lkKbpnIDopoHliLfmlrBcclxuZnVuY3Rpb24gcmVmcmVzaCgpIHtcclxuICAgICQoXCIjU21zTW9kYWxcIikub24oJ2hpZGUuYnMubW9kYWwnLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgLy/liKTmlq3mmK/lkKbpnIDopoHliLfmlrDnlYzpnaJcclxuICAgICAgICBpZiAobmVlZFJlZnJlc2gpIHtcclxuICAgICAgICAgICAgbG9jYXRpb24ucmVsb2FkKCk7IC8v6YeN5paw5Yqg6L296aG16Z2iXHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcbi8vICDlsIbpk77mjqXnsbvlnosg5ZKMIOi+k+WFpeahhuWFs+iBlFxyXG5mdW5jdGlvbiBiaW5kRWxlbWVudCgpIHtcclxuICAgICQoXCIjbGlua190eXBlX3NlbGVjdG9yXCIpLm9uKCdjaGFuZ2UnLCBmdW5jdGlvbigpIHtcclxuICAgICAgICB2YXIgdHlwZSA9ICQodGhpcykuZmluZCgnb3B0aW9uOnNlbGVjdGVkJykudmFsKCk7XHJcblxyXG4gICAgICAgIGlmICh0eXBlID09ICdoNScpIHtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykuZW1wdHkoKTtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X2lucHV0JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSAnbm9fanVtcCcpIHtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykuZW1wdHkoKTtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X2lucHV0JykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoJyNza2lwX3RhcmdldF9zZWxlY3RvcicpLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICQoJyNza2lwX3RhcmdldF9zZWxlY3RvcicpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICQoJyNza2lwX3RhcmdldF9pbnB1dCcpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkLmdldCgnL2Jhbm5lci9nZXRSZXNvdXJjZUxpc3Q/dHlwZT0nICsgdHlwZSAsIGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgJCgnI3NraXBfdGFyZ2V0X3NlbGVjdG9yJykuZW1wdHkoKTtcclxuICAgICAgICAgICAgcmVzdWx0ID0gSlNPTi5wYXJzZShyZXN1bHQpO1xyXG5cclxuICAgICAgICAgICAgdmFyIGNvdW50ID0gcmVzdWx0Lmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgIHZhciBodG1sU3RyID0gXCJcIjtcclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY291bnQ7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaHRtbFN0cis9XCI8b3B0aW9uIHZhbHVlPSdcIityZXN1bHRbaV0uaWQrXCInPlwiK3Jlc3VsdFtpXS50aXRsZStcIjwvb3B0aW9uPlwiO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICQoJyNza2lwX3RhcmdldF9zZWxlY3RvcicpLmFwcGVuZChodG1sU3RyKTtcclxuICAgICAgICB9KTtcclxuICAgIH0pO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja1VybCgpIHtcclxuICAgIC8q5qOA5rWL572R5Z2A55qE6L6T5YWl6ZSZ6K+v5pe277yM5re75Yqg5paH5a2X5o+Q6YaSKi9cclxuICAgICQoJyNza2lwX3RhcmdldF9pbnB1dC5mb3JtLWNvbnRyb2wnKS5iaW5kKCdpbnB1dCBwcm9wZXJ0eWNoYW5nZScsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICB2YXIgaW5wdXRfYWRkcmVzcyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwic2tpcF90YXJnZXRfaW5wdXRcIikudmFsdWU7XHJcbiAgICAgICAgaWYgKGlucHV0X2FkZHJlc3MgPT0gJycgfHwgIWlucHV0X2FkZHJlc3MuaW5kZXhPZihcImh0dHA6Ly9cIikgfHwgIWlucHV0X2FkZHJlc3MuaW5kZXhPZihcImh0dHBzOi8vXCIpKSB7XHJcbiAgICAgICAgICAgIC8vIOe9keWdgOato+ehrlxyXG4gICAgICAgICAgICAkKCcuaHR0cF9lcnJvcl90aXAnKS5hZGRDbGFzcyhcImhpZGVcIik7XHJcbiAgICAgICAgICAgICQoXCIubW9kYWwtZm9vdGVyXCIpLmNzcyh7XCJtYXJnaW5cIjogXCI0NXB4IDE1cHggMFwifSkuY3NzKHtcInBhZGRpbmdcIjogXCIzMHB4IDBweFwifSk7XHJcbiAgICAgICAgICAgICRpc19hZGRyZXNzX3JpZ2h0ID0gdHJ1ZTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyDnvZHlnYDplJnor69cclxuICAgICAgICAgICAgJCgnLmh0dHBfZXJyb3JfdGlwJykucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgICAkKFwiLm1vZGFsLWZvb3RlclwiKS5jc3Moe1wibWFyZ2luXCI6IFwiMCAxNXB4IDBcIn0pLmNzcyh7XCJwYWRkaW5nXCI6IFwiMTVweCAwIDAgMzBweFwifSk7XHJcbiAgICAgICAgICAgICRpc19hZGRyZXNzX3JpZ2h0ID0gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAkKFwiI2xpbmtfdHlwZV9zZWxlY3RvclwiKS5jaGFuZ2UoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHZhciBza2lwX3R5cGUgPSAkKHRoaXMpLmNoaWxkcmVuKFwiOnNlbGVjdGVkXCIpLnZhbCgpO1xyXG4gICAgICAgIGlmIChza2lwX3R5cGUgIT09ICdoNScpIHtcclxuICAgICAgICAgICAgLy8g572R5Z2A5q2j56GuXHJcbiAgICAgICAgICAgICQoJy5odHRwX2Vycm9yX3RpcCcpLmFkZENsYXNzKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgJChcIi5tb2RhbC1mb290ZXJcIikuY3NzKHtcIm1hcmdpblwiOiBcIjQ1cHggMTVweCAwXCJ9KS5jc3Moe1wicGFkZGluZ1wiOiBcIjMwcHggMHB4XCJ9KTtcclxuICAgICAgICAgICAgJGlzX2FkZHJlc3NfcmlnaHQgPSB0cnVlO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICQoXCIjc2tpcF90YXJnZXRfaW5wdXRcIikudmFsKFwiXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH0pXHJcbn0iXX0=
