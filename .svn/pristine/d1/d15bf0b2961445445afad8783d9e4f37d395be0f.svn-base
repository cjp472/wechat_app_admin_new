$(document).ready(function(){$exeBookList.init()});$exeBookList=function(){var e={addUserType:1};var i={userListPageIndex:1,userListSearchContent:"",isSearchUserWindowLoading:false,isSearchUserWindowToBottom:false};e.init=function(){$(".operateList > li.operate").click(function(){var e=$(this),i=e.parents(".exerciseBookOperateArea"),s=e.data("type"),a=i.data("resource_id"),o=i.data("exercise_book_id");switch(s){case"role_manage":baseUtils.showWindow("roleManageWindow");break;case"exercise_list":window.location.href="/exercise/exercise_list";break;case"edit_exercise_book":window.location.href="/exercise/edit_exercise_book?exercise_book_id="+o;break;default:console.log("参数错误");break}});$("#windowCloseIcon1").click(function(){baseUtils.hideWindow("roleManageWindow")});$("#windowHoverBox").on("click","li",function(){var i=$(this).data("type");if(i=="add_teacher"){e.addUserType=1}else if(i=="add_assistant"){e.addUserType=0}s()});$("#windowCloseIcon2").click(function(){baseUtils.hideWindow("searchUserWindow");baseUtils.showWindow("roleManageWindow")});$("#searchUserWindow").on("click","#windowSearchBtn",function(){i.userListPageIndex=1;i.userListSearchContent=$.trim($("#windowSearchInput").val());i.isSearchUserWindowToBottom=false;$("#searchUserWindow .windowContentWrapper2").scrollTop(0);a()});$("#windowSearchInput").on("keypress",function(e){if(e.keyCode==13){$("#windowSearchBtn").click()}});$("#searchUserWindow .windowContentWrapper2").scroll(function(e){var s=$("#windowContent2").height(),o=$(this).height(),n=$(this).scrollTop();if(n+o>=s-5&&!i.isSearchUserWindowLoading&&!i.isSearchUserWindowToBottom){a()}})};function s(){baseUtils.hideWindow("roleManageWindow");$("#searchUserWindow").find(".headerText1").text(e.addUserType==1?"添加老师":"添加助教");baseUtils.showWindow("searchUserWindow");i.isSearchUserWindowToBottom=false;i.userListPageIndex=1;i.userListSearchContent="";a()}function a(){baseUtils.showLoading("searchUserLoading");i.isSearchUserWindowLoading=true;$.ajax("/zbsearch",{type:"GET",dataType:"json",data:{page:i.userListPageIndex,search:i.userListSearchContent},success:function(e){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;var s=$("#windowContent2"),a="",o=e.page_offset;$.each(e.data,function(e,i){a+='<div class="singleGuestInfo2" data-user_id="'+i.user_id+'" data-wx_avatar="'+i.wx_avatar+'" data-wx_nickname="'+i.wx_nickname+'">'+'<input type="checkbox" '+(i.state==0?"checked disabled":"")+' class="selectSingleGuest '+(i.state==0?"disabled":"")+'" id="'+i.user_id+'">'+'<label for="'+i.user_id+'" class="singleGuestLabel">'+'<img src="'+i.wx_avatar+'" class="singleGuestAvatar2">'+'<div class="singleGuestName2" title="'+i.wx_nickname+'">'+i.wx_nickname+"</div>"+"</label>"+"</div>"});if(a.length==0){a='<div class="windowNoData" id="windowNoData">暂无数据</div>'}if(i.userListPageIndex==1){s.html(a);s.append('<div class="isDown">更多数据加载中</div>')}else{s.find(".isDown").before(a)}if(o.current_page>=o.total_pages){if(o.total_count>10){s.find(".isDown").text("数据已加载完毕")}else{s.find(".isDown").hide()}i.isSearchUserWindowToBottom=true}i.userListPageIndex++},error:function(e,s,a){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;console.log(a);alert("服务器出小差了，请稍后再试！")}})}return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4ZXJjaXNlQm9va0xpc3QuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCIkZXhlQm9va0xpc3QiLCJpbml0IiwiYWRkVXNlclR5cGUiLCIkcHJpdmF0ZSIsInVzZXJMaXN0UGFnZUluZGV4IiwidXNlckxpc3RTZWFyY2hDb250ZW50IiwiaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZyIsImlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tIiwiY2xpY2siLCIkc2VsZiIsInRoaXMiLCIkcGFyZW50IiwicGFyZW50cyIsInR5cGUiLCJkYXRhIiwicmVzSWQiLCJleGVyY2lzZUJvb2tJZCIsImJhc2VVdGlscyIsInNob3dXaW5kb3ciLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJjb25zb2xlIiwibG9nIiwiaGlkZVdpbmRvdyIsIm9uIiwib3BlblNlYXJjaFVzZXJXaW5kb3ciLCJ0cmltIiwidmFsIiwic2Nyb2xsVG9wIiwiZ2V0QWxsVXNlckxpc3QiLCJlIiwia2V5Q29kZSIsInNjcm9sbCIsIkRpdkhlaWdodCIsImhlaWdodCIsIlNjcm9sbEhlaWdodCIsIlNjcm9sbFRvcCIsImZpbmQiLCJ0ZXh0Iiwic2hvd0xvYWRpbmciLCJhamF4IiwiZGF0YVR5cGUiLCJwYWdlIiwic2VhcmNoIiwic3VjY2VzcyIsInJlc3VsdCIsImhpZGVMb2FkaW5nIiwiJGFyZWEiLCJodG1sU3RyIiwib2Zmc2V0IiwicGFnZV9vZmZzZXQiLCJlYWNoIiwiayIsInYiLCJ1c2VyX2lkIiwid3hfYXZhdGFyIiwid3hfbmlja25hbWUiLCJzdGF0ZSIsImxlbmd0aCIsImh0bWwiLCJhcHBlbmQiLCJiZWZvcmUiLCJjdXJyZW50X3BhZ2UiLCJ0b3RhbF9wYWdlcyIsInRvdGFsX2NvdW50IiwiaGlkZSIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiYWxlcnQiXSwibWFwcGluZ3MiOiJBQUlBQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2RDLGFBQWFDLFFBR2pC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QUFRLDhCQUNyQixhQUFhRCxFQUFFRSxVQUFVLGdDQUN6Qix3Q0FBd0NGLEVBQUVHLFlBQVksS0FBS0gsRUFBRUcsWUFBWSxTQUM3RSxXQUNKLFVBRVIsSUFBSVIsRUFBUVUsUUFBVSxFQUFHLENBQ3JCVixFQUNJLHlEQUVSLEdBQUk5QyxFQUFTQyxtQkFBcUIsRUFBRyxDQUNqQzRDLEVBQU1ZLEtBQUtYLEVBQ1hELEdBQU1hLE9BQU8seUNBQ1YsQ0FDSGIsRUFBTVYsS0FBSyxXQUFXd0IsT0FBT2IsR0FFakMsR0FBSUMsRUFBT2EsY0FBZ0JiLEVBQU9jLFlBQWEsQ0FDM0MsR0FBSWQsRUFBT2UsWUFBYyxHQUFJLENBQ3pCakIsRUFBTVYsS0FBSyxXQUFXQyxLQUFLLGVBQ3hCLENBQ0hTLEVBQU1WLEtBQUssV0FBVzRCLE9BRTFCL0QsRUFBU0ksMkJBQTZCLEtBRTFDSixFQUFTQyxxQkFHYitELE1BQU8sU0FBVUMsRUFBS0MsRUFBUUMsR0FDMUJyRCxVQUFVOEIsWUFBWSxvQkFDdEI1QyxHQUFTRywwQkFBNEIsS0FDckNnQixTQUFRQyxJQUFJK0MsRUFDWkMsT0FBTSxxQkFLbEIsTUFBT3ZFIiwiZmlsZSI6ImV4ZXJjaXNlQm9va0xpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTcvNy8zMS5cclxuICovXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAkZXhlQm9va0xpc3QuaW5pdCgpO1xyXG59KTtcclxuXHJcbiRleGVCb29rTGlzdCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJGV4ZUJvb2tMaXN0ID0ge1xyXG4gICAgICAgIGFkZFVzZXJUeXBlOiAxLCAvLzEt6ICB5biI77ybMC3liqnmlZlcclxuXHJcbiAgICB9O1xyXG4gICAgdmFyICRwcml2YXRlID0ge1xyXG4gICAgICAgIHVzZXJMaXN0UGFnZUluZGV4OiAxLFxyXG4gICAgICAgIHVzZXJMaXN0U2VhcmNoQ29udGVudDogXCJcIixcclxuICAgICAgICBpc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICBpc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbTogZmFsc2UsXHJcbiAgICB9O1xyXG5cclxuICAgICRleGVCb29rTGlzdC5pbml0ID0gZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAvL+S9nOS4muacrOeahOaTjeS9nFxyXG4gICAgICAgICQoXCIub3BlcmF0ZUxpc3QgPiBsaS5vcGVyYXRlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICRwYXJlbnQgPSAkc2VsZi5wYXJlbnRzKFwiLmV4ZXJjaXNlQm9va09wZXJhdGVBcmVhXCIpLFxyXG4gICAgICAgICAgICAgICAgdHlwZSA9ICRzZWxmLmRhdGEoXCJ0eXBlXCIpLFxyXG4gICAgICAgICAgICAgICAgcmVzSWQgPSAkcGFyZW50LmRhdGEoXCJyZXNvdXJjZV9pZFwiKSxcclxuICAgICAgICAgICAgICAgIGV4ZXJjaXNlQm9va0lkID0gJHBhcmVudC5kYXRhKFwiZXhlcmNpc2VfYm9va19pZFwiKTtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJvbGVfbWFuYWdlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImV4ZXJjaXNlX2xpc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL2V4ZXJjaXNlL2V4ZXJjaXNlX2xpc3RcIjtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJlZGl0X2V4ZXJjaXNlX2Jvb2tcIjpcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IFwiL2V4ZXJjaXNlL2VkaXRfZXhlcmNpc2VfYm9vaz9leGVyY2lzZV9ib29rX2lkPVwiK2V4ZXJjaXNlQm9va0lkO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuWPguaVsOmUmeivr1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqIOS6uuWRmOiuvue9rueql+WPoyAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgICQoXCIjd2luZG93Q2xvc2VJY29uMVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwicm9sZU1hbmFnZVdpbmRvd1wiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgJChcIiN3aW5kb3dIb3ZlckJveFwiKS5vbihcImNsaWNrXCIsIFwibGlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9ICQodGhpcykuZGF0YShcInR5cGVcIik7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IFwiYWRkX3RlYWNoZXJcIikge1xyXG4gICAgICAgICAgICAgICAgJGV4ZUJvb2tMaXN0LmFkZFVzZXJUeXBlID0gMTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlID09IFwiYWRkX2Fzc2lzdGFudFwiKSB7XHJcbiAgICAgICAgICAgICAgICAkZXhlQm9va0xpc3QuYWRkVXNlclR5cGUgPSAwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIG9wZW5TZWFyY2hVc2VyV2luZG93KCk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKiog5Lq65ZGY5pCc57Si56qX5Y+jICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICQoXCIjd2luZG93Q2xvc2VJY29uMlwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwic2VhcmNoVXNlcldpbmRvd1wiKTtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v54K55Ye75pCc57SiXHJcbiAgICAgICAgJChcIiNzZWFyY2hVc2VyV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIjd2luZG93U2VhcmNoQnRuXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggPSAxO1xyXG4gICAgICAgICAgICAkcHJpdmF0ZS51c2VyTGlzdFNlYXJjaENvbnRlbnQgPSAkLnRyaW0oJChcIiN3aW5kb3dTZWFyY2hJbnB1dFwiKS52YWwoKSk7XHJcbiAgICAgICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tID0gZmFsc2U7XHJcbiAgICAgICAgICAgICQoJyNzZWFyY2hVc2VyV2luZG93IC53aW5kb3dDb250ZW50V3JhcHBlcjInKS5zY3JvbGxUb3AoMCk7XHJcbiAgICAgICAgICAgIGdldEFsbFVzZXJMaXN0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChcIiN3aW5kb3dTZWFyY2hJbnB1dFwiKS5vbihcImtleXByZXNzXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjd2luZG93U2VhcmNoQnRuXCIpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+a7keWKqOWKoOi9veabtOWkmlxyXG4gICAgICAgICQoJyNzZWFyY2hVc2VyV2luZG93IC53aW5kb3dDb250ZW50V3JhcHBlcjInKS5zY3JvbGwoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgRGl2SGVpZ2h0ID0gJCgnI3dpbmRvd0NvbnRlbnQyJykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBTY3JvbGxIZWlnaHQgPSAkKHRoaXMpLmhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgU2Nyb2xsVG9wID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgaWYgKChTY3JvbGxUb3AgKyBTY3JvbGxIZWlnaHQgPj0gRGl2SGVpZ2h0IC0gNSkgJiYgISRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmdcclxuICAgICAgICAgICAgICAgICYmICEkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gb3BlblNlYXJjaFVzZXJXaW5kb3coKSB7XHJcbiAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQoXCIjc2VhcmNoVXNlcldpbmRvd1wiKS5maW5kKFwiLmhlYWRlclRleHQxXCIpLnRleHQoXHJcbiAgICAgICAgICAgICgkZXhlQm9va0xpc3QuYWRkVXNlclR5cGU9PTEpP1wi5re75Yqg6ICB5biIXCI6XCLmt7vliqDliqnmlZlcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJzZWFyY2hVc2VyV2luZG93XCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tID0gZmFsc2U7XHJcbiAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggPSAxO1xyXG4gICAgICAgICRwcml2YXRlLnVzZXJMaXN0U2VhcmNoQ29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldEFsbFVzZXJMaXN0KCkge1xyXG4gICAgICAgIGJhc2VVdGlscy5zaG93TG9hZGluZyhcInNlYXJjaFVzZXJMb2FkaW5nXCIpO1xyXG4gICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICQuYWpheChcIi96YnNlYXJjaFwiLCB7XHJcbiAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgcGFnZTogJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXgsXHJcbiAgICAgICAgICAgICAgICBzZWFyY2g6ICRwcml2YXRlLnVzZXJMaXN0U2VhcmNoQ29udGVudFxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuaGlkZUxvYWRpbmcoXCJzZWFyY2hVc2VyTG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgJGFyZWEgPSAkKFwiI3dpbmRvd0NvbnRlbnQyXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgPSBcIlwiLFxyXG4gICAgICAgICAgICAgICAgICAgIG9mZnNldCA9IHJlc3VsdC5wYWdlX29mZnNldDtcclxuXHJcbiAgICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0LmRhdGEsIGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciArPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNpbmdsZUd1ZXN0SW5mbzJcIiBkYXRhLXVzZXJfaWQ9XCInK3YudXNlcl9pZCtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnXCIgZGF0YS13eF9hdmF0YXI9XCInK3Yud3hfYXZhdGFyKydcIiBkYXRhLXd4X25pY2tuYW1lPVwiJyt2Lnd4X25pY2tuYW1lKydcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpbnB1dCB0eXBlPVwiY2hlY2tib3hcIiAnKyh2LnN0YXRlPT0wPydjaGVja2VkIGRpc2FibGVkJzonJykrJyBjbGFzcz1cInNlbGVjdFNpbmdsZUd1ZXN0ICcrKHYuc3RhdGU9PTA/J2Rpc2FibGVkJzonJykrJ1wiIGlkPVwiJyt2LnVzZXJfaWQrJ1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj1cIicrdi51c2VyX2lkKydcIiBjbGFzcz1cInNpbmdsZUd1ZXN0TGFiZWxcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW1nIHNyYz1cIicrdi53eF9hdmF0YXIrJ1wiIGNsYXNzPVwic2luZ2xlR3Vlc3RBdmF0YXIyXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNpbmdsZUd1ZXN0TmFtZTJcIiB0aXRsZT1cIicrdi53eF9uaWNrbmFtZSsnXCI+Jyt2Lnd4X25pY2tuYW1lKyc8L2Rpdj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvbGFiZWw+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChodG1sU3RyLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwid2luZG93Tm9EYXRhXCIgaWQ9XCJ3aW5kb3dOb0RhdGFcIj7mmoLml6DmlbDmja48L2Rpdj4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKCRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4ID09IDEpIHtcclxuICAgICAgICAgICAgICAgICAgICAkYXJlYS5odG1sKGh0bWxTdHIpO1xyXG4gICAgICAgICAgICAgICAgICAgICRhcmVhLmFwcGVuZCgnPGRpdiBjbGFzcz1cImlzRG93blwiPuabtOWkmuaVsOaNruWKoOi9veS4rTwvZGl2PicpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkYXJlYS5maW5kKCcuaXNEb3duJykuYmVmb3JlKGh0bWxTdHIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldC5jdXJyZW50X3BhZ2UgPj0gb2Zmc2V0LnRvdGFsX3BhZ2VzKSB7ICAgICAgLy/mlbDmja7liqDovb3lrozmr5XlkI7nmoTmk43kvZxcclxuICAgICAgICAgICAgICAgICAgICBpZiAob2Zmc2V0LnRvdGFsX2NvdW50ID4gMTApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuZmluZCgnLmlzRG93bicpLnRleHQoXCLmlbDmja7lt7LliqDovb3lrozmr5VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJGFyZWEuZmluZCgnLmlzRG93bicpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggKys7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcInNlYXJjaFVzZXJMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwi5pyN5Yqh5Zmo5Ye65bCP5beu5LqG77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiAkZXhlQm9va0xpc3Q7XHJcbn0pKCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
