$(document).ready(function(){$exeBookList.init()});$exeBookList=function(){var e={addUserType:0,exerciseBookId:-1};var i={userListPageIndex:1,userListSearchContent:"",isSearchUserWindowLoading:false,isSearchUserWindowToBottom:false};e.init=function(){$("._switchOperateArea").on("click","._functionSwitch",function(e){var i=$(e.delegateTarget),a=i.data("switch_state");if(a){}else{}baseUtils.show.redTip(""+a)});$(".operateList > li.operate").click(function(){var i=$(this),n=i.parents(".exerciseBookOperateArea"),s=i.data("type"),o=n.data("resource_id"),t=n.data("resource_type"),r=n.data("exercise_book_id"),d=n.data("role_list");e.exerciseBookId=r;switch(s){case"role_manage":a(t,d);break;case"exercise_list":window.location.href="/exercise/exercise_list?exercise_book_id="+r;break;case"edit_exercise_book":window.location.href="/exercise/edit_exercise_book?exercise_book_id="+r;break;default:console.log("参数错误");break}});$("#windowCloseIcon1").click(function(){baseUtils.hideWindow("roleManageWindow")});$("#windowHoverBox").on("click","li",function(){var i=$(this).data("type");if(i=="add_teacher"){if(o()){baseUtils.show.redTip("一个作业本仅能设置1位老师，请先将已设置的老师改为助教");return false}e.addUserType=0}else if(i=="add_assistant"){e.addUserType=1}n()});$("#windowContent1").on("click",".roleTypeRadio",function(e){var i=$(this),a=i.children(".circleRadio").data("role_type");if(i.children(".circleRadio").hasClass("radioActive")){return false}if(a==0&&o()){baseUtils.show.redTip("一个作业本仅能设置1位老师，请先将已设置的老师改为助教");return false}i.parents(".roleTypeRadioWrapper").find(".circleRadio").removeClass("radioActive");i.children(".circleRadio").addClass("radioActive")});$("#roleManageWindow").on("click",".deleteSingleUser",function(){var e=$(this).parents(".singleUserInfo1");e.css({height:"0",padding:"0"});setTimeout(function(){e.remove();var i=$("#windowContent1").find(".singleUserInfo1").length;if(i==0){$("#windowContent1").html('<div class="windowNoData" id="windowNoData1">暂无老师和助教，请点击下方按钮快速添加人员</div>')}},300)});$("#confirmSaveRole").click(function(){var i=$("#windowContent1").find(".singleUserInfo1"),a={};i.each(function(){var e=$(this).data("user_id"),i=$(this).find(".circleRadio.radioActive").data("role_type");if(a[e]==undefined){a[e]={user_id:e,role_type:i}}});baseUtils.showLoading("roleManageLoading");$.ajax("/exercise/set_exercise_book_role",{type:"POST",dataType:"json",data:{exercise_book_roles:a,exercise_book_id:e.exerciseBookId},success:function(e){baseUtils.hideLoading("roleManageLoading");if(e.code==0){baseUtils.hideWindow("roleManageWindow");baseUtils.show.blueTip("保存成功");setTimeout(function(){window.location.reload()},1e3)}else{baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,i,a){baseUtils.hideLoading("roleManageLoading");console.log(a);alert("服务器出小差了，请稍后再试！")}})});$("#windowCloseIcon2").click(function(){baseUtils.hideWindow("searchUserWindow");baseUtils.showWindow("roleManageWindow")});$("#searchUserWindow").on("click","#windowSearchBtn",function(){i.userListPageIndex=1;i.userListSearchContent=$.trim($("#windowSearchInput").val());i.isSearchUserWindowToBottom=false;$("#searchUserWindow .windowContentWrapper2").scrollTop(0);t()});$("#windowSearchInput").on("keypress",function(e){if(e.keyCode==13){$("#windowSearchBtn").click()}});$("#searchUserWindow .windowContentWrapper2").scroll(function(e){var a=$("#windowContent2").height(),n=$(this).height(),s=$(this).scrollTop();if(s+n>=a-5&&!i.isSearchUserWindowLoading&&!i.isSearchUserWindowToBottom){t()}});$("#windowContent2").on("change",".selectSingleGuest",function(i){var a=$(i.target),n=a.prop("checked");if(n&&e.addUserType==0){var s=$("#windowContent2").find(".selectSingleGuest:checked").length;if(s>1){baseUtils.show.redTip("一个作业本仅能设置1位老师");a.prop("checked",false)}}});$("#confirmSaveAddedUser").click(function(){var i=$(".selectSingleGuest:checked"),a={};i.each(function(){var i=$(this).parents(".singleGuestInfo2"),n=i.data("user_id"),s=i.data("wx_avatar"),o=i.data("wx_nickname"),t=e.addUserType;if(a[n]==undefined){a[n]={user_id:n,wx_avatar:s,wx_nickname:o,role_type:t}}});var n=$("#windowContent1").find(".singleUserInfo1"),o=[];n.each(function(){var e=$(this).data("user_id");o.push(e)});var t="";$.each(a,function(e,i){if(o.indexOf(e)==-1){t+=s(i)}});if(t.length>0){$("#windowNoData1").remove();$("#windowContent1").append(t)}baseUtils.hideWindow("searchUserWindow");baseUtils.showWindow("roleManageWindow")})};function a(e,i){if(e==4){baseUtils.show.redTip("直播类型不支持人员管理操作");return false}baseUtils.showWindow("roleManageWindow");var a="";$.each(i,function(e,i){a+=s(i)});if(a.length==0){a='<div class="windowNoData" id="windowNoData1">暂无老师和助教，请点击下方按钮快速添加人员</div>'}$("#windowContent1").html(a)}function n(){baseUtils.hideWindow("roleManageWindow");$("#searchUserWindow").find(".headerText1").text(e.addUserType==0?"添加老师":"添加助教");baseUtils.showWindow("searchUserWindow");i.isSearchUserWindowToBottom=false;i.userListPageIndex=1;i.userListSearchContent="";t()}function s(e){var i='<div class="singleUserInfo1" data-user_id="'+e.user_id+'">'+'<img class="singleGuestAvatar1" src="'+e.wx_avatar+'">'+'<div class="singleGuestName1" title="'+e.wx_nickname+'">'+e.wx_nickname+"</div>"+'<div class="roleTypeRadioWrapper">'+'<div class="roleTypeRadio">'+'<span class="circleRadio '+(e.role_type==0?"radioActive":"")+'" data-role_type="0"></span><span>老师</span>'+"</div>"+'<div class="roleTypeRadio">'+'<span class="circleRadio '+(e.role_type==1?"radioActive":"")+'" data-role_type="1"></span><span>助教</span>'+"</div>"+"</div>"+'<div class="deleteSingleUser">删除</div>'+"</div>";return i}function o(){var e=false,i=$("#windowContent1").find(".circleRadio.radioActive");i.each(function(){var i=$(this).data("role_type");if(i==0){e=true;return false}});return e}function t(){baseUtils.showLoading("searchUserLoading");i.isSearchUserWindowLoading=true;$.ajax("/zbsearch",{type:"GET",dataType:"json",data:{page:i.userListPageIndex,search:i.userListSearchContent},success:function(e){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;var a=$("#windowContent2"),n="",s=e.page_offset;$.each(e.data,function(e,i){n+='<div class="singleGuestInfo2" data-user_id="'+i.user_id+'" data-wx_avatar="'+i.wx_avatar+'" data-wx_nickname="'+i.wx_nickname+'">'+'<input type="checkbox" class="selectSingleGuest" id="'+i.user_id+'">'+'<label for="'+i.user_id+'" class="singleGuestLabel">'+'<img src="'+i.wx_avatar+'" class="singleGuestAvatar2">'+'<div class="singleGuestName2" title="'+i.wx_nickname+'">'+i.wx_nickname+"</div>"+"</label>"+"</div>"});if(n.length==0){n='<div class="windowNoData" id="windowNoData2">暂无数据</div>'}if(i.userListPageIndex==1){a.html(n);a.append('<div class="isDown">更多数据加载中</div>')}else{a.find(".isDown").before(n)}if(s.current_page>=s.total_pages){var o=0;if(s.total_count>10){a.find(".isDown").text("数据已加载完毕");o=3e3}else{o=0}setTimeout(function(){a.find(".isDown").hide()},o);i.isSearchUserWindowToBottom=true}i.userListPageIndex++},error:function(e,a,n){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;console.log(n);alert("服务器出小差了，请稍后再试！")}})}return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4ZXJjaXNlQm9va0xpc3QuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCIkZXhlQm9va0xpc3QiLCJpbml0IiwiYWRkVXNlclR5cGUiLCJleGVyY2lzZUJvb2tJZCIsIiRwcml2YXRlIiwidXNlckxpc3RQYWdlSW5kZXgiLCJ1c2VyTGlzdFNlYXJjaENvbnRlbnQiLCJpc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nIiwiaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20iLCJvbiIsImUiLCIkZGVsZWdhdGVEb20iLCJkZWxlZ2F0ZVRhcmdldCIsInN3aXRjaFN0YXRlIiwiZGF0YSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJjbGljayIsIiRzZWxmIiwidGhpcyIsIiRwYXJlbnQiLCJwYXJlbnRzIiwidHlwZSIsInJlc0lkIiwicmVzVHlwZSIsInJvbGVMaXN0QXJyIiwib3BlblJvbGVNYW5hZ2VXaW5kb3ciLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJjb25zb2xlIiwibG9nIiwiaGlkZVdpbmRvdyIsImhhc1NldFRlYWNoZXIiLCJvcGVuU2VhcmNoVXNlcldpbmRvdyIsImNsaWNrUm9sZVR5cGUiLCJjaGlsZHJlbiIsImhhc0NsYXNzIiwiZmluZCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJjc3MiLCJoZWlnaHQiLCJwYWRkaW5nIiwic2V0VGltZW91dCIsInJlbW92ZSIsImNvdW50IiwibGVuZ3RoIiwiaHRtbCIsImFkZGVkVXNlckxpc3QiLCJleGVyY2lzZUJvb2tSb2xlcyIsImVhY2giLCJ1c2VySWQiLCJyb2xlVHlwZSIsInVuZGVmaW5lZCIsInVzZXJfaWQiLCJyb2xlX3R5cGUiLCJzaG93TG9hZGluZyIsImFqYXgiLCJkYXRhVHlwZSIsImV4ZXJjaXNlX2Jvb2tfcm9sZXMiLCJleGVyY2lzZV9ib29rX2lkIiwic3VjY2VzcyIsInJlc3VsdCIsImhpZGVMb2FkaW5nIiwiY29kZSIsImJsdWVUaXAiLCJyZWxvYWQiLCJlcnJvciIsInhociIsInN0YXR1cyIsImVyciIsImFsZXJ0Iiwic2hvd1dpbmRvdyIsInRyaW0iLCJ2YWwiLCJzY3JvbGxUb3AiLCJnZXRBbGxVc2VyTGlzdCIsImtleUNvZGUiLCJzY3JvbGwiLCJEaXZIZWlnaHQiLCJTY3JvbGxIZWlnaHQiLCJTY3JvbGxUb3AiLCIkdGFyZ2V0IiwidGFyZ2V0IiwiaXNDaGVja2VkIiwicHJvcCIsImNoZWNrZWRVc2VyIiwidXNlckFyciIsInd4QXZhdGFyIiwid3hOaWNrbmFtZSIsInd4X2F2YXRhciIsInd4X25pY2tuYW1lIiwic3RvcmVkVXNlckFyciIsInN0b3JlZFVzZXJJZEFyciIsInB1c2giLCJodG1sU3RyIiwiayIsInYiLCJpbmRleE9mIiwiZ2V0VXNlckluZm9JdGVtIiwiYXBwZW5kIiwidGV4dCIsImFjdGl2ZVJhZGlvQXJyIiwicGFnZSIsInNlYXJjaCIsIiRhcmVhIiwib2Zmc2V0IiwicGFnZV9vZmZzZXQiLCJiZWZvcmUiLCJjdXJyZW50X3BhZ2UiLCJ0b3RhbF9wYWdlcyIsInRpbWVSYW5nZSIsInRvdGFsX2NvdW50IiwiaGlkZSJdLCJtYXBwaW5ncyI6IkFBSUFBLEVBQUVDLFVBQVVDLE1BQU0sV0FDZEMsYUFBYUMsUUFHakJELGNBQWUsV0FDWCxHQUFJQSxJQUNBRSxZQUFhLEVBQ2JDLGdCQUFpQixFQUVyQixJQUFJQyxJQUNBQyxrQkFBbUIsRUFDbkJDLHNCQUF1QixHQUN2QkMsMEJBQTJCLE1BQzNCQywyQkFBNEIsTUFHaENSLEdBQWFDLEtBQU8sV0FFaEJKLEVBQUUsdUJBQXVCWSxHQUFHLFFBQVMsbUJBQW9CLFNBQVVDLEdBRS9ELEdBQUlDLEdBQWVkLEVBQUVhLEVBQUVFLGdCQUNuQkMsRUFBY0YsRUFBYUcsS0FBSyxlQUVwQyxJQUFJRCxFQUFhLE1BRVYsRUFJUEUsVUFBVUMsS0FBS0MsT0FBTyxHQUFLSixJQUsvQmhCLEdBQUUsNkJBQTZCcUIsTUFBTSxXQUNqQyxHQUFJQyxHQUFRdEIsRUFBRXVCLE1BQ1ZDLEVBQVVGLEVB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QyxFQUFFM0MsUUFBUSw4QkFDckIsYUFBYTJDLEVBQUVQLFVBQVUsZ0NBQ3pCLHdDQUF3Q08sRUFBRU4sWUFBWSxLQUFLTSxFQUFFTixZQUFZLFNBQzdFLFdBQ0osVUFFUixJQUFJSSxFQUFRakQsUUFBVSxFQUFHLENBQ3JCaUQsRUFDSSwwREFFUixHQUFJN0YsRUFBU0MsbUJBQXFCLEVBQUcsQ0FDakNzRyxFQUFNMUQsS0FBS2dELEVBQ1hVLEdBQU1MLE9BQU8seUNBQ1YsQ0FDSEssRUFBTXBFLEtBQUssV0FBV3VFLE9BQU9iLEdBRWpDLEdBQUlXLEVBQU9HLGNBQWdCSCxFQUFPSSxZQUFhLENBQzNDLEdBQUlDLEdBQVksQ0FDaEIsSUFBSUwsRUFBT00sWUFBYyxHQUFJLENBQ3pCUCxFQUFNcEUsS0FBSyxXQUFXZ0UsS0FBSyxVQUMzQlUsR0FBWSxRQUNULENBQ0hBLEVBQVksRUFFaEJwRSxXQUFXLFdBQ1A4RCxFQUFNcEUsS0FBSyxXQUFXNEUsUUFDdkJGLEVBQ0g3RyxHQUFTSSwyQkFBNkIsS0FFMUNKLEVBQVNDLHFCQUdiZ0UsTUFBTyxTQUFVQyxFQUFLQyxFQUFRQyxHQUMxQnpELFVBQVVrRCxZQUFZLG9CQUN0QjdELEdBQVNHLDBCQUE0QixLQUNyQ3dCLFNBQVFDLElBQUl3QyxFQUNaQyxPQUFNLHFCQUtsQixNQUFPekUiLCJmaWxlIjoiZXhlcmNpc2VCb29rTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IEFkbWluaXN0cmF0b3Igb24gMjAxNy83LzMxLlxyXG4gKi9cclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcclxuICAgICRleGVCb29rTGlzdC5pbml0KCk7XHJcbn0pO1xyXG5cclxuJGV4ZUJvb2tMaXN0ID0gKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciAkZXhlQm9va0xpc3QgPSB7XHJcbiAgICAgICAgYWRkVXNlclR5cGU6IDAsIC8vMC3ogIHluIjvvJsxLeWKqeaVmVxyXG4gICAgICAgIGV4ZXJjaXNlQm9va0lkOiAtMSwgLy/ngrnlh7vnmoTkvZzkuJrmnKzmnaHnm67nmoRpZOWAvFxyXG4gICAgfTtcclxuICAgIHZhciAkcHJpdmF0ZSA9IHtcclxuICAgICAgICB1c2VyTGlzdFBhZ2VJbmRleDogMSxcclxuICAgICAgICB1c2VyTGlzdFNlYXJjaENvbnRlbnQ6IFwiXCIsXHJcbiAgICAgICAgaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZzogZmFsc2UsXHJcbiAgICAgICAgaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b206IGZhbHNlLFxyXG4gICAgfTtcclxuXHJcbiAgICAkZXhlQm9va0xpc3QuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgJChcIi5fc3dpdGNoT3BlcmF0ZUFyZWFcIikub24oXCJjbGlja1wiLCBcIi5fZnVuY3Rpb25Td2l0Y2hcIiwgZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkZGVsZWdhdGVEb20gPSAkKGUuZGVsZWdhdGVUYXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoU3RhdGUgPSAkZGVsZWdhdGVEb20uZGF0YShcInN3aXRjaF9zdGF0ZVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChzd2l0Y2hTdGF0ZSkge1xyXG5cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIlwiICsgc3dpdGNoU3RhdGUpO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/kvZzkuJrmnKznmoTmk43kvZxcclxuICAgICAgICAkKFwiLm9wZXJhdGVMaXN0ID4gbGkub3BlcmF0ZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkc2VsZiA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICAkcGFyZW50ID0gJHNlbGYucGFyZW50cyhcIi5leGVyY2lzZUJvb2tPcGVyYXRlQXJlYVwiKSxcclxuICAgICAgICAgICAgICAgIHR5cGUgPSAkc2VsZi5kYXRhKFwidHlwZVwiKSxcclxuICAgICAgICAgICAgICAgIHJlc0lkID0gJHBhcmVudC5kYXRhKFwicmVzb3VyY2VfaWRcIiksXHJcbiAgICAgICAgICAgICAgICByZXNUeXBlID0gJHBhcmVudC5kYXRhKFwicmVzb3VyY2VfdHlwZVwiKSxcclxuICAgICAgICAgICAgICAgIGV4ZXJjaXNlQm9va0lkID0gJHBhcmVudC5kYXRhKFwiZXhlcmNpc2VfYm9va19pZFwiKSxcclxuICAgICAgICAgICAgICAgIHJvbGVMaXN0QXJyID0gJHBhcmVudC5kYXRhKFwicm9sZV9saXN0XCIpO1xyXG5cclxuICAgICAgICAgICAgJGV4ZUJvb2tMaXN0LmV4ZXJjaXNlQm9va0lkID0gZXhlcmNpc2VCb29rSWQ7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJyb2xlX21hbmFnZVwiOlxyXG4gICAgICAgICAgICAgICAgICAgIG9wZW5Sb2xlTWFuYWdlV2luZG93KHJlc1R5cGUsIHJvbGVMaXN0QXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgXCJleGVyY2lzZV9saXN0XCI6XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIi9leGVyY2lzZS9leGVyY2lzZV9saXN0P2V4ZXJjaXNlX2Jvb2tfaWQ9XCIrZXhlcmNpc2VCb29rSWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWRpdF9leGVyY2lzZV9ib29rXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIi9leGVyY2lzZS9lZGl0X2V4ZXJjaXNlX2Jvb2s/ZXhlcmNpc2VfYm9va19pZD1cIitleGVyY2lzZUJvb2tJZDtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coXCLlj4LmlbDplJnor69cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8qKioqKioqKioqKioqKioqKioqKioqKiDkurrlkZjorr7nva7nqpflj6MgKioqKioqKioqKioqKioqKioqKioqKioqKi9cclxuICAgICAgICAkKFwiI3dpbmRvd0Nsb3NlSWNvbjFcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuaGlkZVdpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/mt7vliqDkurrlkZhcclxuICAgICAgICAkKFwiI3dpbmRvd0hvdmVyQm94XCIpLm9uKFwiY2xpY2tcIiwgXCJsaVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB0eXBlID0gJCh0aGlzKS5kYXRhKFwidHlwZVwiKTtcclxuICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJhZGRfdGVhY2hlclwiKSB7Ly/pnIDopoHliqDpmZDliLZcclxuICAgICAgICAgICAgICAgIGlmIChoYXNTZXRUZWFjaGVyKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIDkuKrkvZzkuJrmnKzku4Xog73orr7nva4x5L2N6ICB5biI77yM6K+35YWI5bCG5bey6K6+572u55qE6ICB5biI5pS55Li65Yqp5pWZXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICRleGVCb29rTGlzdC5hZGRVc2VyVHlwZSA9IDA7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImFkZF9hc3Npc3RhbnRcIikge1xyXG4gICAgICAgICAgICAgICAgJGV4ZUJvb2tMaXN0LmFkZFVzZXJUeXBlID0gMTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBvcGVuU2VhcmNoVXNlcldpbmRvdygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHJhZGlvIOaMiemSrueCueWHu+WIh+aNouaViOaenFxyXG4gICAgICAgICQoJyN3aW5kb3dDb250ZW50MScpLm9uKCdjbGljaycsICcucm9sZVR5cGVSYWRpbycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgIGNsaWNrUm9sZVR5cGUgPSAkc2VsZi5jaGlsZHJlbihcIi5jaXJjbGVSYWRpb1wiKS5kYXRhKFwicm9sZV90eXBlXCIpO1xyXG5cclxuICAgICAgICAgICAgaWYgKCRzZWxmLmNoaWxkcmVuKFwiLmNpcmNsZVJhZGlvXCIpLmhhc0NsYXNzKFwicmFkaW9BY3RpdmVcIikpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoY2xpY2tSb2xlVHlwZSA9PSAwICYmIGhhc1NldFRlYWNoZXIoKSkgeyAgIC8v6K6+572u5Li66ICB5biIXHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIDkuKrkvZzkuJrmnKzku4Xog73orr7nva4x5L2N6ICB5biI77yM6K+35YWI5bCG5bey6K6+572u55qE6ICB5biI5pS55Li65Yqp5pWZXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICRzZWxmLnBhcmVudHMoXCIucm9sZVR5cGVSYWRpb1dyYXBwZXJcIikuZmluZChcIi5jaXJjbGVSYWRpb1wiKS5yZW1vdmVDbGFzcygncmFkaW9BY3RpdmUnKTtcclxuICAgICAgICAgICAgJHNlbGYuY2hpbGRyZW4oJy5jaXJjbGVSYWRpbycpLmFkZENsYXNzKCdyYWRpb0FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v56e76Zmk55So5oi3XHJcbiAgICAgICAgJChcIiNyb2xlTWFuYWdlV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIuZGVsZXRlU2luZ2xlVXNlclwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciAkcGFyZW50ID0gJCh0aGlzKS5wYXJlbnRzKFwiLnNpbmdsZVVzZXJJbmZvMVwiKTtcclxuXHJcbiAgICAgICAgICAgICRwYXJlbnQuY3NzKHtcImhlaWdodFwiOiBcIjBcIiwgXCJwYWRkaW5nXCI6IFwiMFwifSk7XHJcbiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgJHBhcmVudC5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9ICQoXCIjd2luZG93Q29udGVudDFcIikuZmluZChcIi5zaW5nbGVVc2VySW5mbzFcIikubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI3dpbmRvd0NvbnRlbnQxXCIpLmh0bWwoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwid2luZG93Tm9EYXRhXCIgaWQ9XCJ3aW5kb3dOb0RhdGExXCI+5pqC5peg6ICB5biI5ZKM5Yqp5pWZ77yM6K+354K55Ye75LiL5pa55oyJ6ZKu5b+r6YCf5re75Yqg5Lq65ZGYPC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0sIDMwMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/kv53lrZjkurrlkZhcclxuICAgICAgICAkKFwiI2NvbmZpcm1TYXZlUm9sZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBhZGRlZFVzZXJMaXN0ID0gJChcIiN3aW5kb3dDb250ZW50MVwiKS5maW5kKFwiLnNpbmdsZVVzZXJJbmZvMVwiKSxcclxuICAgICAgICAgICAgICAgIGV4ZXJjaXNlQm9va1JvbGVzID0ge307XHJcblxyXG4gICAgICAgICAgICBhZGRlZFVzZXJMaXN0LmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHVzZXJJZCA9ICQodGhpcykuZGF0YShcInVzZXJfaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZVR5cGUgPSAkKHRoaXMpLmZpbmQoXCIuY2lyY2xlUmFkaW8ucmFkaW9BY3RpdmVcIikuZGF0YShcInJvbGVfdHlwZVwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChleGVyY2lzZUJvb2tSb2xlc1t1c2VySWRdID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4ZXJjaXNlQm9va1JvbGVzW3VzZXJJZF0gPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZV90eXBlOiByb2xlVHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvd0xvYWRpbmcoXCJyb2xlTWFuYWdlTG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgJC5hamF4KFwiL2V4ZXJjaXNlL3NldF9leGVyY2lzZV9ib29rX3JvbGVcIiwge1xyXG4gICAgICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZXhlcmNpc2VfYm9va19yb2xlczogZXhlcmNpc2VCb29rUm9sZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZXhlcmNpc2VfYm9va19pZDogJGV4ZUJvb2tMaXN0LmV4ZXJjaXNlQm9va0lkXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcInJvbGVNYW5hZ2VMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwicm9sZU1hbmFnZVdpbmRvd1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuS/neWtmOaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDEwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmXrumimO+8jOivt+eojeWQjuWGjeivlVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVMb2FkaW5nKFwicm9sZU1hbmFnZUxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKiog5Lq65ZGY5pCc57Si56qX5Y+jICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICAgICAgJChcIiN3aW5kb3dDbG9zZUljb24yXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJzZWFyY2hVc2VyV2luZG93XCIpO1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvd1dpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/ngrnlh7vmkJzntKJcclxuICAgICAgICAkKFwiI3NlYXJjaFVzZXJXaW5kb3dcIikub24oXCJjbGlja1wiLCBcIiN3aW5kb3dTZWFyY2hCdG5cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAkcHJpdmF0ZS51c2VyTGlzdFBhZ2VJbmRleCA9IDE7XHJcbiAgICAgICAgICAgICRwcml2YXRlLnVzZXJMaXN0U2VhcmNoQ29udGVudCA9ICQudHJpbSgkKFwiI3dpbmRvd1NlYXJjaElucHV0XCIpLnZhbCgpKTtcclxuICAgICAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20gPSBmYWxzZTtcclxuICAgICAgICAgICAgJCgnI3NlYXJjaFVzZXJXaW5kb3cgLndpbmRvd0NvbnRlbnRXcmFwcGVyMicpLnNjcm9sbFRvcCgwKTtcclxuICAgICAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAkKFwiI3dpbmRvd1NlYXJjaElucHV0XCIpLm9uKFwia2V5cHJlc3NcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgaWYgKGUua2V5Q29kZSA9PSAxMykge1xyXG4gICAgICAgICAgICAgICAgJChcIiN3aW5kb3dTZWFyY2hCdG5cIikuY2xpY2soKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5ruR5Yqo5Yqg6L295pu05aSaXHJcbiAgICAgICAgJCgnI3NlYXJjaFVzZXJXaW5kb3cgLndpbmRvd0NvbnRlbnRXcmFwcGVyMicpLnNjcm9sbChmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciBEaXZIZWlnaHQgPSAkKCcjd2luZG93Q29udGVudDInKS5oZWlnaHQoKSxcclxuICAgICAgICAgICAgICAgIFNjcm9sbEhlaWdodCA9ICQodGhpcykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBTY3JvbGxUb3AgPSAkKHRoaXMpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICBpZiAoKFNjcm9sbFRvcCArIFNjcm9sbEhlaWdodCA+PSBEaXZIZWlnaHQgLSA1KSAmJiAhJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZ1xyXG4gICAgICAgICAgICAgICAgICAgICYmICEkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbSkge1xyXG4gICAgICAgICAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5re75Yqg6ICB5biI5pe277yM5re75Yqg6ZmQ5Yi277yM5Y+q6IO96YCJ5Lit5LiA5LiqXHJcbiAgICAgICAgJChcIiN3aW5kb3dDb250ZW50MlwiKS5vbihcImNoYW5nZVwiLCBcIi5zZWxlY3RTaW5nbGVHdWVzdFwiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgaXNDaGVja2VkID0gJHRhcmdldC5wcm9wKFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgaWYgKGlzQ2hlY2tlZCAmJiAkZXhlQm9va0xpc3QuYWRkVXNlclR5cGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gJChcIiN3aW5kb3dDb250ZW50MlwiKS5maW5kKFwiLnNlbGVjdFNpbmdsZUd1ZXN0OmNoZWNrZWRcIikubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgaWYgKGNvdW50ID4gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4gOS4quS9nOS4muacrOS7heiDveiuvue9rjHkvY3ogIHluIhcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJHRhcmdldC5wcm9wKFwiY2hlY2tlZFwiLCBmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+a3u+WKoOS6uuWRmFxyXG4gICAgICAgICQoXCIjY29uZmlybVNhdmVBZGRlZFVzZXJcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgY2hlY2tlZFVzZXIgPSAkKFwiLnNlbGVjdFNpbmdsZUd1ZXN0OmNoZWNrZWRcIiksXHJcbiAgICAgICAgICAgICAgICB1c2VyQXJyID0ge307XHJcbiAgICAgICAgICAgIGNoZWNrZWRVc2VyLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyICRwYXJlbnQgPSAkKHRoaXMpLnBhcmVudHMoXCIuc2luZ2xlR3Vlc3RJbmZvMlwiKSxcclxuICAgICAgICAgICAgICAgICAgICB1c2VySWQgPSAkcGFyZW50LmRhdGEoXCJ1c2VyX2lkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHd4QXZhdGFyID0gJHBhcmVudC5kYXRhKFwid3hfYXZhdGFyXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHd4Tmlja25hbWUgPSAkcGFyZW50LmRhdGEoXCJ3eF9uaWNrbmFtZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICByb2xlVHlwZSA9ICRleGVCb29rTGlzdC5hZGRVc2VyVHlwZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAodXNlckFyclt1c2VySWRdID09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJBcnJbdXNlcklkXSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdXNlcl9pZDogdXNlcklkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3eF9hdmF0YXI6IHd4QXZhdGFyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB3eF9uaWNrbmFtZTogd3hOaWNrbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZV90eXBlOiByb2xlVHlwZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB2YXIgc3RvcmVkVXNlckFyciA9ICQoXCIjd2luZG93Q29udGVudDFcIikuZmluZChcIi5zaW5nbGVVc2VySW5mbzFcIiksXHJcbiAgICAgICAgICAgICAgICBzdG9yZWRVc2VySWRBcnIgPSBbXTtcclxuICAgICAgICAgICAgc3RvcmVkVXNlckFyci5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VySWQgPSAgJCh0aGlzKS5kYXRhKFwidXNlcl9pZFwiKTtcclxuICAgICAgICAgICAgICAgIHN0b3JlZFVzZXJJZEFyci5wdXNoKHVzZXJJZCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgdmFyIGh0bWxTdHIgPSBcIlwiO1xyXG4gICAgICAgICAgICAkLmVhY2godXNlckFyciwgZnVuY3Rpb24oaywgdikge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN0b3JlZFVzZXJJZEFyci5pbmRleE9mKGspID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciArPSBnZXRVc2VySW5mb0l0ZW0odik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAoaHRtbFN0ci5sZW5ndGg+MCkge1xyXG4gICAgICAgICAgICAgICAgJChcIiN3aW5kb3dOb0RhdGExXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgJChcIiN3aW5kb3dDb250ZW50MVwiKS5hcHBlbmQoaHRtbFN0cik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJzZWFyY2hVc2VyV2luZG93XCIpO1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvd1dpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcblxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxuICAgIGZ1bmN0aW9uIG9wZW5Sb2xlTWFuYWdlV2luZG93KHJlc1R5cGUsIHJvbGVMaXN0QXJyKSB7XHJcbiAgICAgICAgaWYgKHJlc1R5cGUgPT0gNCkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3nsbvlnovkuI3mlK/mjIHkurrlkZjnrqHnkIbmk43kvZxcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIHZhciBodG1sU3RyID0gXCJcIjtcclxuICAgICAgICAkLmVhY2gocm9sZUxpc3RBcnIsIGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICAgICAgICAgIGh0bWxTdHIgKz0gZ2V0VXNlckluZm9JdGVtKHYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChodG1sU3RyLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGh0bWxTdHIgPVxyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ3aW5kb3dOb0RhdGFcIiBpZD1cIndpbmRvd05vRGF0YTFcIj7mmoLml6DogIHluIjlkozliqnmlZnvvIzor7fngrnlh7vkuIvmlrnmjInpkq7lv6vpgJ/mt7vliqDkurrlkZg8L2Rpdj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKFwiI3dpbmRvd0NvbnRlbnQxXCIpLmh0bWwoaHRtbFN0cik7XHJcblxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb3BlblNlYXJjaFVzZXJXaW5kb3coKSB7XHJcbiAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQoXCIjc2VhcmNoVXNlcldpbmRvd1wiKS5maW5kKFwiLmhlYWRlclRleHQxXCIpLnRleHQoXHJcbiAgICAgICAgICAgICgkZXhlQm9va0xpc3QuYWRkVXNlclR5cGU9PTApP1wi5re75Yqg6ICB5biIXCI6XCLmt7vliqDliqnmlZlcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJzZWFyY2hVc2VyV2luZG93XCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tID0gZmFsc2U7XHJcbiAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggPSAxO1xyXG4gICAgICAgICRwcml2YXRlLnVzZXJMaXN0U2VhcmNoQ29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgZ2V0QWxsVXNlckxpc3QoKTtcclxuICAgIH1cclxuICAgIGZ1bmN0aW9uIGdldFVzZXJJbmZvSXRlbSh2KSB7XHJcbiAgICAgICAgdmFyIGh0bWxTdHIgPVxyXG4gICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNpbmdsZVVzZXJJbmZvMVwiIGRhdGEtdXNlcl9pZD1cIicrdi51c2VyX2lkKydcIj4nK1xyXG4gICAgICAgICAgICAgICAgJzxpbWcgY2xhc3M9XCJzaW5nbGVHdWVzdEF2YXRhcjFcIiBzcmM9XCInK3Yud3hfYXZhdGFyKydcIj4nK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzaW5nbGVHdWVzdE5hbWUxXCIgdGl0bGU9XCInK3Yud3hfbmlja25hbWUrJ1wiPicrdi53eF9uaWNrbmFtZSsnPC9kaXY+JytcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicm9sZVR5cGVSYWRpb1dyYXBwZXJcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicm9sZVR5cGVSYWRpb1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNpcmNsZVJhZGlvICcrKHYucm9sZV90eXBlPT0wPydyYWRpb0FjdGl2ZSc6JycpKydcIiBkYXRhLXJvbGVfdHlwZT1cIjBcIj48L3NwYW4+PHNwYW4+6ICB5biIPC9zcGFuPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrXHJcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJyb2xlVHlwZVJhZGlvXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiY2lyY2xlUmFkaW8gJysodi5yb2xlX3R5cGU9PTE/J3JhZGlvQWN0aXZlJzonJykrJ1wiIGRhdGEtcm9sZV90eXBlPVwiMVwiPjwvc3Bhbj48c3Bhbj7liqnmlZk8L3NwYW4+JytcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JytcclxuICAgICAgICAgICAgICAgICc8L2Rpdj4nK1xyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJkZWxldGVTaW5nbGVVc2VyXCI+5Yig6ZmkPC9kaXY+JytcclxuICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgcmV0dXJuIGh0bWxTdHI7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBoYXNTZXRUZWFjaGVyKCkge1xyXG4gICAgICAgIHZhciBoYXNTZXRUZWFjaGVyID0gZmFsc2UsXHJcbiAgICAgICAgICAgIGFjdGl2ZVJhZGlvQXJyID0gJChcIiN3aW5kb3dDb250ZW50MVwiKS5maW5kKFwiLmNpcmNsZVJhZGlvLnJhZGlvQWN0aXZlXCIpO1xyXG5cclxuICAgICAgICBhY3RpdmVSYWRpb0Fyci5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyIHJvbGVUeXBlID0gJCh0aGlzKS5kYXRhKFwicm9sZV90eXBlXCIpO1xyXG4gICAgICAgICAgICBpZiAocm9sZVR5cGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgaGFzU2V0VGVhY2hlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGhhc1NldFRlYWNoZXI7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRBbGxVc2VyTGlzdCgpIHtcclxuICAgICAgICBiYXNlVXRpbHMuc2hvd0xvYWRpbmcoXCJzZWFyY2hVc2VyTG9hZGluZ1wiKTtcclxuICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAkLmFqYXgoXCIvemJzZWFyY2hcIiwge1xyXG4gICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICBkYXRhVHlwZTogXCJqc29uXCIsXHJcbiAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgIHBhZ2U6ICRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4LFxyXG4gICAgICAgICAgICAgICAgc2VhcmNoOiAkcHJpdmF0ZS51c2VyTGlzdFNlYXJjaENvbnRlbnRcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVMb2FkaW5nKFwic2VhcmNoVXNlckxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyICRhcmVhID0gJChcIiN3aW5kb3dDb250ZW50MlwiKSxcclxuICAgICAgICAgICAgICAgICAgICBodG1sU3RyID0gXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSByZXN1bHQucGFnZV9vZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKHJlc3VsdC5kYXRhLCBmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgKz1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzaW5nbGVHdWVzdEluZm8yXCIgZGF0YS11c2VyX2lkPVwiJyt2LnVzZXJfaWQrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIGRhdGEtd3hfYXZhdGFyPVwiJyt2Lnd4X2F2YXRhcisnXCIgZGF0YS13eF9uaWNrbmFtZT1cIicrdi53eF9uaWNrbmFtZSsnXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJzZWxlY3RTaW5nbGVHdWVzdFwiIGlkPVwiJyt2LnVzZXJfaWQrJ1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj1cIicrdi51c2VyX2lkKydcIiBjbGFzcz1cInNpbmdsZUd1ZXN0TGFiZWxcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW1nIHNyYz1cIicrdi53eF9hdmF0YXIrJ1wiIGNsYXNzPVwic2luZ2xlR3Vlc3RBdmF0YXIyXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNpbmdsZUd1ZXN0TmFtZTJcIiB0aXRsZT1cIicrdi53eF9uaWNrbmFtZSsnXCI+Jyt2Lnd4X25pY2tuYW1lKyc8L2Rpdj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvbGFiZWw+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChodG1sU3RyLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwid2luZG93Tm9EYXRhXCIgaWQ9XCJ3aW5kb3dOb0RhdGEyXCI+5pqC5peg5pWw5o2uPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkcHJpdmF0ZS51c2VyTGlzdFBhZ2VJbmRleCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGFyZWEuaHRtbChodG1sU3RyKTtcclxuICAgICAgICAgICAgICAgICAgICAkYXJlYS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJpc0Rvd25cIj7mm7TlpJrmlbDmja7liqDovb3kuK08L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGFyZWEuZmluZCgnLmlzRG93bicpLmJlZm9yZShodG1sU3RyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvZmZzZXQuY3VycmVudF9wYWdlID49IG9mZnNldC50b3RhbF9wYWdlcykgeyAgICAgIC8v5pWw5o2u5Yqg6L295a6M5q+V5ZCO55qE5pON5L2cXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVSYW5nZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldC50b3RhbF9jb3VudCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRhcmVhLmZpbmQoJy5pc0Rvd24nKS50ZXh0KFwi5pWw5o2u5bey5Yqg6L295a6M5q+VXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lUmFuZ2UgPSAzMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVSYW5nZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYXJlYS5maW5kKCcuaXNEb3duJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRpbWVSYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggKys7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcInNlYXJjaFVzZXJMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwi5pyN5Yqh5Zmo5Ye65bCP5beu5LqG77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiAkZXhlQm9va0xpc3Q7XHJcbn0pKCk7XHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcbiJdfQ==
