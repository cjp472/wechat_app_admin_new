$(document).ready(function(){$exeBookList.init()});$exeBookList=function(){var e={addUserType:0,exerciseBookId:-1};var i={userListPageIndex:1,userListSearchContent:"",isSearchUserWindowLoading:false,isSearchUserWindowToBottom:false};e.init=function(){var c=$("#admin_data").val(),l=GetQueryString("page")||1;var w=sessionStorage.getItem("lastExerciseBookId"),f=sessionStorage.getItem("lastResourceType");if(w&&w!=""){sessionStorage.setItem("lastExerciseBookId","");sessionStorage.setItem("lastResourceType","");e.exerciseBookId=w;if(f==4){$.alert("直播作业请前往 [直播列表-嘉宾设置] 进行老师/助教设置。标签为讲师的嘉宾为老师，其余为助教",{title:"直播作业人员管理",btn:2})}else{baseUtils.showWindow("roleManageWindow");$("#windowContent1").html('<div class="windowNoData" id="windowNoData1">暂无老师和助教，请点击下方按钮快速添加人员</div>')}}$("._switchOperateArea").on("click","._functionSwitch",function(e){var i=$(e.delegateTarget),a=i.data("switch_state"),t=0;var s={$currentDom:$(this),$delegateDom:i,switchState:a,onText:i.data("on_text"),offText:i.data("off_text")};if(a){t=0}else{t=1}$.ajax("/exercise/set_exercise_book_system_state",{type:"POST",dataType:"json",data:{is_show_exercise_system:t},success:function(e){if(e.code==0){baseUtils.show.blueTip(t==1?"开启成功":"功能已关闭，所有作业内容将不继续在店铺内显示");d(s);if(t==0){if(c){$("#contentNoData").remove()}else{$("#tableContent").hide();$("#listPage").hide()}$("#tableHeader").after('<div class="contentNoData" id="functionHasClose">功能已关闭, 作业内容暂时不显示</div>')}else{$("#functionHasClose").remove();if(c){$("#tableHeader").after('<div class="contentNoData" id="contentNoData">暂无数据</div>')}else{$("#tableContent").show();$("#listPage").show()}}}else{baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,i,a){console.log(a);baseUtils.show.redTip("服务器出小差了，请稍后再试！")}})});$("#createExerciseBook").click(function(){window.location.href="/exercise/create_exercise_book?page_index="+l});$(".operateList > li.operate").click(function(){var i=$(this),t=i.parents(".exerciseBookOperateArea"),s=i.data("type"),o=t.data("resource_id"),n=t.data("resource_type"),r=t.data("exercise_book_id"),d=t.data("role_list");e.exerciseBookId=r;switch(s){case"role_manage":a(n,d);break;case"exercise_list":window.location.href="/exercise/exercise_list?exercise_book_id="+r+"&page_index="+l;break;case"edit_exercise_book":window.location.href="/exercise/edit_exercise_book?exercise_book_id="+r+"&page_index="+l;break;default:console.log("参数错误");break}});$("#windowCloseIcon1").click(function(){baseUtils.hideWindow("roleManageWindow")});$("#windowHoverBox").on("click","li",function(){var i=$(this).data("type");if(i=="add_teacher"){if(o()){baseUtils.show.redTip("一个作业本仅能设置1位老师，请先将已设置的老师改为助教");return false}e.addUserType=0}else if(i=="add_assistant"){e.addUserType=1}t()});$("#windowContent1").on("click",".roleTypeRadio",function(e){var i=$(this),a=i.children(".circleRadio").data("role_type");if(i.children(".circleRadio").hasClass("radioActive")){return false}if(a==0&&o()){baseUtils.show.redTip("一个作业本仅能设置1位老师，请先将已设置的老师改为助教");return false}i.parents(".roleTypeRadioWrapper").find(".circleRadio").removeClass("radioActive");i.children(".circleRadio").addClass("radioActive")});$("#roleManageWindow").on("click",".deleteSingleUser",function(){var e=$(this).parents(".singleUserInfo1");e.css({height:"0",padding:"0"});setTimeout(function(){e.remove();var i=$("#windowContent1").find(".singleUserInfo1").length;if(i==0){$("#windowContent1").html('<div class="windowNoData" id="windowNoData1">暂无老师和助教，请点击下方按钮快速添加人员</div>')}},300)});$("#confirmSaveRole").click(function(){var i=$("#windowContent1").find(".singleUserInfo1"),a={};i.each(function(){var e=$(this).data("user_id"),i=$(this).find(".circleRadio.radioActive").data("role_type");if(a[e]==undefined){a[e]={user_id:e,role_type:i}}});baseUtils.showLoading("roleManageLoading");$.ajax("/exercise/set_exercise_book_role",{type:"POST",dataType:"json",data:{exercise_book_roles:a,exercise_book_id:e.exerciseBookId},success:function(e){baseUtils.hideLoading("roleManageLoading");if(e.code==0){baseUtils.hideWindow("roleManageWindow");baseUtils.show.blueTip("保存成功");setTimeout(function(){window.location.reload()},1e3)}else{baseUtils.show.redTip("网络问题，请稍后再试")}},error:function(e,i,a){baseUtils.hideLoading("roleManageLoading");console.log(a);alert("服务器出小差了，请稍后再试！")}})});$("#windowCloseIcon2").click(function(){baseUtils.hideWindow("searchUserWindow");baseUtils.showWindow("roleManageWindow")});$("#searchUserWindow").on("click","#windowSearchBtn",function(){i.userListPageIndex=1;i.userListSearchContent=$.trim($("#windowSearchInput").val());i.isSearchUserWindowToBottom=false;$("#searchUserWindow .windowContentWrapper2").scrollTop(0);n()});$("#windowSearchInput").on("keypress",function(e){if(e.keyCode==13){$("#windowSearchBtn").click()}});$("#searchUserWindow .windowContentWrapper2").scroll(function(e){var a=$("#windowContent2").height(),t=$(this).height(),s=$(this).scrollTop();if(s+t>=a-5&&!i.isSearchUserWindowLoading&&!i.isSearchUserWindowToBottom){n()}});$("#windowContent2").on("change",".selectSingleGuest",function(i){var a=$(i.target),t=a.prop("checked");if(t&&e.addUserType==0){var s=$("#windowContent2").find(".selectSingleGuest:checked").not(".disabledInput").length;if(s>1){baseUtils.show.redTip("一个作业本仅能设置1位老师");a.prop("checked",false)}}});$("#confirmSaveAddedUser").click(function(){var i=$(".selectSingleGuest:checked"),a={};i.each(function(){var i=$(this).parents(".singleGuestInfo2"),t=i.data("user_id"),s=i.data("wx_avatar"),o=i.data("wx_nickname"),n=e.addUserType;if(a[t]==undefined){a[t]={user_id:t,wx_avatar:s,wx_nickname:o,role_type:n}}});var t=r();var o="";$.each(a,function(e,i){if(t.indexOf(e)==-1){o+=s(i)}});if(o.length>0){$("#windowNoData1").remove();$("#windowContent1").append(o)}baseUtils.hideWindow("searchUserWindow");baseUtils.showWindow("roleManageWindow")})};function a(e,i){if(e==4){$.alert("直播作业请前往 [直播列表-嘉宾设置] 进行老师/助教设置。标签为讲师的嘉宾为老师，其余为助教",{title:"直播作业人员管理",btn:2});return false}baseUtils.showWindow("roleManageWindow");var a="";$.each(i,function(e,i){a+=s(i)});if(a.length==0){a='<div class="windowNoData" id="windowNoData1">暂无老师和助教，请点击下方按钮快速添加人员</div>'}$("#windowContent1").html(a)}function t(){baseUtils.hideWindow("roleManageWindow");$("#searchUserWindow").find(".headerText1").text(e.addUserType==0?"添加老师":"添加助教");$("#windowContent2").html("");$("#windowSearchInput").val("");baseUtils.showWindow("searchUserWindow");i.isSearchUserWindowToBottom=false;i.userListPageIndex=1;i.userListSearchContent="";n()}function s(e){var i='<div class="singleUserInfo1" data-user_id="'+e.user_id+'">'+'<img class="singleGuestAvatar1" src="'+e.wx_avatar+'">'+'<div class="singleGuestName1" title="'+e.wx_nickname+'">'+e.wx_nickname+"</div>"+'<div class="roleTypeRadioWrapper">'+'<div class="roleTypeRadio">'+'<span class="circleRadio '+(e.role_type==0?"radioActive":"")+'" data-role_type="0"></span><span>老师</span>'+"</div>"+'<div class="roleTypeRadio">'+'<span class="circleRadio '+(e.role_type==1?"radioActive":"")+'" data-role_type="1"></span><span>助教</span>'+"</div>"+"</div>"+'<div class="deleteSingleUser">移除</div>'+"</div>";return i}function o(){var e=false,i=$("#windowContent1").find(".circleRadio.radioActive");i.each(function(){var i=$(this).data("role_type");if(i==0){e=true;return false}});return e}function n(){baseUtils.showLoading("searchUserLoading");i.isSearchUserWindowLoading=true;$.ajax("/zbsearch",{type:"GET",dataType:"json",data:{page:i.userListPageIndex,search:i.userListSearchContent},success:function(e){var a=r();baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;var t=$("#windowContent2"),s="",o=e.page_offset;$.each(e.data,function(e,i){var t=a.indexOf(i.user_id)!=-1;s+='<div class="singleGuestInfo2" data-user_id="'+i.user_id+'" data-wx_avatar="'+i.wx_avatar+'" data-wx_nickname="'+i.wx_nickname+'">'+'<input type="checkbox" '+(t?"checked disabled":"")+' class="selectSingleGuest '+(t?"disabledInput":"")+'" id="'+i.user_id+'">'+'<label for="'+i.user_id+'" class="singleGuestLabel">'+'<img src="'+i.wx_avatar+'" class="singleGuestAvatar2">'+'<div class="singleGuestName2" title="'+i.wx_nickname+'">'+i.wx_nickname+"</div>"+"</label>"+"</div>"});if(s.length==0){s='<div class="windowNoData" id="windowNoData2">暂无数据</div>'}if(i.userListPageIndex==1){t.html(s);t.append('<div class="isDown">更多数据加载中</div>')}else{t.find(".isDown").before(s)}if(o.current_page>=o.total_pages){var n=0;if(o.total_count>10){t.find(".isDown").text("数据已加载完毕");n=3e3}else{n=0}setTimeout(function(){t.find(".isDown").hide()},n);i.isSearchUserWindowToBottom=true}i.userListPageIndex++},error:function(e,a,t){baseUtils.hideLoading("searchUserLoading");i.isSearchUserWindowLoading=false;console.log(t);alert("服务器出小差了，请稍后再试！")}})}function r(){var e=$("#windowContent1").find(".singleUserInfo1"),i=[];e.each(function(){var e=$(this).data("user_id");i.push(e)});return i}function d(e){var i=!e.switchState;if(i){e.$currentDom.css({"background-color":"#2FCE6F"});e.$currentDom.children("._switchDescText").css({left:"9px"}).text(e.onText);e.$currentDom.children("._switchButtonIcon").css({left:"40px"})}else{e.$currentDom.css({"background-color":"#c2c2c2"});e.$currentDom.children("._switchDescText").css({left:"44px"}).text(e.offText);e.$currentDom.children("._switchButtonIcon").css({left:"0px"})}e.$delegateDom.data("switch_state",i)}return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImV4ZXJjaXNlQm9va0xpc3QuanMiXSwibmFtZXMiOlsiJCIsImRvY3VtZW50IiwicmVhZHkiLCIkZXhlQm9va0xpc3QiLCJpbml0IiwiYWRkVXNlclR5cGUiLCJleGVyY2lzZUJvb2tJZCIsIiRwcml2YXRlIiwidXNlckxpc3RQYWdlSW5kZXgiLCJ1c2VyTGlzdFNlYXJjaENvbnRlbnQiLCJpc1NlYXJjaFVzZXJXaW5kb3dMb2FkaW5nIiwiaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20iLCJjb250ZW50Tm9EYXRhIiwidmFsIiwiY3VycmVudFBhZ2VJbmRleCIsIkdldFF1ZXJ5U3RyaW5nIiwibGFzdEV4ZXJjaXNlQm9va0lkIiwic2Vzc2lvblN0b3JhZ2UiLCJnZXRJdGVtIiwibGFzdFJlc291cmNlVHlwZSIsInNldEl0ZW0iLCJhbGVydCIsInRpdGxlIiwiYnRuIiwiYmFzZVV0aWxzIiwic2hvd1dpbmRvdyIsImh0bWwiLCJvbiIsImUiLCIkZGVsZWdhdGVEb20iLCJkZWxlZ2F0ZVRhcmdldCIsInN3aXRjaFN0YXRlIiwiZGF0YSIsImlzX3Nob3dfZXhlcmNpc2Vfc3lzdGVtIiwiY3VycmVudEluZm8iLCIkY3VycmVudERvbSIsInRoaXMiLCJvblRleHQiLCJvZmZUZXh0IiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJjb2RlIiwic2hvdyIsImJsdWVUaXAiLCJjaGFuZ2VTd2l0Y2hCdG5TdGF0ZSIsInJlbW92ZSIsImhpZGUiLCJhZnRlciIsInJlZFRpcCIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImNsaWNrIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiJHNlbGYiLCIkcGFyZW50IiwicGFyZW50cyIsInJlc0lkIiwicmVzVHlwZSIsInJvbGVMaXN0QXJyIiwib3BlblJvbGVNYW5hZ2VXaW5kb3ciLCJoaWRlV2luZG93IiwiaGFzU2V0VGVhY2hlciIsIm9wZW5TZWFyY2hVc2VyV2luZG93IiwiY2xpY2tSb2xlVHlwZSIsImNoaWxkcmVuIiwiaGFzQ2xhc3MiLCJmaW5kIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImNzcyIsImhlaWdodCIsInBhZGRpbmciLCJzZXRUaW1lb3V0IiwiY291bnQiLCJsZW5ndGgiLCJhZGRlZFVzZXJMaXN0IiwiZXhlcmNpc2VCb29rUm9sZXMiLCJlYWNoIiwidXNlcklkIiwicm9sZVR5cGUiLCJ1bmRlZmluZWQiLCJ1c2VyX2lkIiwicm9sZV90eXBlIiwic2hvd0xvYWRpbmciLCJleGVyY2lzZV9ib29rX3JvbGVzIiwiZXhlcmNpc2VfYm9va19pZCIsImhpZGVMb2FkaW5nIiwicmVsb2FkIiwidHJpbSIsInNjcm9sbFRvcCIsImdldEFsbFVzZXJMaXN0Iiwia2V5Q29kZSIsInNjcm9sbCIsIkRpdkhlaWdodCIsIlNjcm9sbEhlaWdodCIsIlNjcm9sbFRvcCIsIiR0YXJnZXQiLCJ0YXJnZXQiLCJpc0NoZWNrZWQiLCJwcm9wIiwibm90IiwiY2hlY2tlZFVzZXIiLCJ1c2VyQXJyIiwid3hBdmF0YXIiLCJ3eE5pY2tuYW1lIiwid3hfYXZhdGFyIiwid3hfbmlja25hbWUiLCJzdG9yZWRVc2VySWRBcnIiLCJnZXRBZGRlZFVzZXJJZEFyciIsImh0bWxTdHIiLCJrIiwidiIsImluZGV4T2YiLCJnZXRVc2VySW5mb0l0ZW0iLCJhcHBlbmQiLCJ0ZXh0IiwiYWN0aXZlUmFkaW9BcnIiLCJwYWdlIiwic2VhcmNoIiwiYWRkZWRVc2VyQXJyIiwiJGFyZWEiLCJvZmZzZXQiLCJwYWdlX29mZnNldCIsImlzQWRkZWQiLCJiZWZvcmUiLCJjdXJyZW50X3BhZ2UiLCJ0b3RhbF9wYWdlcyIsInRpbWVSYW5nZSIsInRvdGFsX2NvdW50IiwicHVzaCIsInN0YXRlIiwiYmFja2dyb3VuZC1jb2xvciIsImxlZnQiXSwibWFwcGluZ3MiOiJBQUlBQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2RDLGFBQWFDLFFBR2pCRCxjQUFlLFdBQ1gsR0FBSUEsSUFDQUUsWUFB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ekJSLEVBQU10RCxLQUFLLFdBQVdpRCxLQUFLLFVBQzNCWSxHQUFZLFFBQ1QsQ0FDSEEsRUFBWSxFQUVoQnZELFdBQVcsV0FDUGdELEVBQU10RCxLQUFLLFdBQVcxQixRQUN2QnVGLEVBQ0hqSSxHQUFTSSwyQkFBNkIsS0FFMUNKLEVBQVNDLHFCQUdiNEMsTUFBTyxTQUFVQyxFQUFLQyxFQUFRQyxHQUMxQi9CLFVBQVV1RSxZQUFZLG9CQUN0QnhGLEdBQVNHLDBCQUE0QixLQUNyQzhDLFNBQVFDLElBQUlGLEVBQ1psQyxPQUFNLHFCQVFsQixRQUFTZ0csS0FDTCxHQUFJakMsR0FBZ0JwRixFQUFFLG1CQUFtQjJFLEtBQUssb0JBQzFDcUQsSUFFSjVDLEdBQWNFLEtBQUssV0FDZixHQUFJQyxHQUFTdkYsRUFBRW9DLE1BQU1KLEtBQUssVUFDMUJnRyxHQUFhVSxLQUFLbkQsSUFFdEIsT0FBT3lDLEdBRVgsUUFBU2pGLEdBQXFCYixHQUMxQixHQUFJeUcsSUFBU3pHLEVBQVlILFdBQ3pCLElBQUk0RyxFQUFPLENBQ1B6RyxFQUFZQyxZQUFZMkMsS0FBSzhELG1CQUFvQixXQUNqRDFHLEdBQVlDLFlBQVlzQyxTQUFTLG9CQUFvQkssS0FBSytELEtBQVEsUUFBUWpCLEtBQUsxRixFQUFZRyxPQUMzRkgsR0FBWUMsWUFBWXNDLFNBQVMsc0JBQXNCSyxLQUFLK0QsS0FBUSxhQUNqRSxDQUNIM0csRUFBWUMsWUFBWTJDLEtBQUs4RCxtQkFBb0IsV0FDakQxRyxHQUFZQyxZQUFZc0MsU0FBUyxvQkFBb0JLLEtBQUsrRCxLQUFRLFNBQVNqQixLQUFLMUYsRUFBWUksUUFDNUZKLEdBQVlDLFlBQVlzQyxTQUFTLHNCQUFzQkssS0FBSytELEtBQVEsUUFFeEUzRyxFQUFZTCxhQUFhRyxLQUFLLGVBQWdCMkcsR0FHbEQsTUFBT3hJIiwiZmlsZSI6ImV4ZXJjaXNlQm9va0xpc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBBZG1pbmlzdHJhdG9yIG9uIDIwMTcvNy8zMS5cclxuICovXHJcblxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAkZXhlQm9va0xpc3QuaW5pdCgpO1xyXG59KTtcclxuXHJcbiRleGVCb29rTGlzdCA9IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgJGV4ZUJvb2tMaXN0ID0ge1xyXG4gICAgICAgIGFkZFVzZXJUeXBlOiAwLCAvLzAt6ICB5biI77ybMS3liqnmlZlcclxuICAgICAgICBleGVyY2lzZUJvb2tJZDogLTEsIC8v54K55Ye755qE5L2c5Lia5pys5p2h55uu55qEaWTlgLxcclxuICAgIH07XHJcbiAgICB2YXIgJHByaXZhdGUgPSB7XHJcbiAgICAgICAgdXNlckxpc3RQYWdlSW5kZXg6IDEsXHJcbiAgICAgICAgdXNlckxpc3RTZWFyY2hDb250ZW50OiBcIlwiLFxyXG4gICAgICAgIGlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgIGlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tOiBmYWxzZSxcclxuICAgIH07XHJcblxyXG4gICAgJGV4ZUJvb2tMaXN0LmluaXQgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgIHZhciBjb250ZW50Tm9EYXRhID0gJChcIiNhZG1pbl9kYXRhXCIpLnZhbCgpLFxyXG4gICAgICAgICAgICBjdXJyZW50UGFnZUluZGV4ID0gR2V0UXVlcnlTdHJpbmcoXCJwYWdlXCIpIHx8IDE7XHJcblxyXG4gICAgICAgIHZhciBsYXN0RXhlcmNpc2VCb29rSWQgPSBzZXNzaW9uU3RvcmFnZS5nZXRJdGVtKFwibGFzdEV4ZXJjaXNlQm9va0lkXCIpLFxyXG4gICAgICAgICAgICBsYXN0UmVzb3VyY2VUeXBlID0gc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbShcImxhc3RSZXNvdXJjZVR5cGVcIik7XHJcblxyXG4gICAgICAgIC8v5qOA5p+l5piv5ZCm5Yia5Yia5Yib5bu65a6M5L2c5Lia5pysXHJcbiAgICAgICAgaWYgKGxhc3RFeGVyY2lzZUJvb2tJZCAmJiBsYXN0RXhlcmNpc2VCb29rSWQgIT0gXCJcIikge1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwibGFzdEV4ZXJjaXNlQm9va0lkXCIsIFwiXCIpO1xyXG4gICAgICAgICAgICBzZXNzaW9uU3RvcmFnZS5zZXRJdGVtKFwibGFzdFJlc291cmNlVHlwZVwiLCBcIlwiKTtcclxuICAgICAgICAgICAgJGV4ZUJvb2tMaXN0LmV4ZXJjaXNlQm9va0lkID0gbGFzdEV4ZXJjaXNlQm9va0lkO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxhc3RSZXNvdXJjZVR5cGUgPT0gNCkge1xyXG4gICAgICAgICAgICAgICAgJC5hbGVydChcIuebtOaSreS9nOS4muivt+WJjeW+gCBb55u05pKt5YiX6KGoLeWYieWuvuiuvue9rl0g6L+b6KGM6ICB5biIL+WKqeaVmeiuvue9ruOAguagh+etvuS4uuiusuW4iOeahOWYieWuvuS4uuiAgeW4iO+8jOWFtuS9meS4uuWKqeaVmVwiLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwi55u05pKt5L2c5Lia5Lq65ZGY566h55CGXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgYnRuOiAyLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvL+aJk+W8gOWIneWni+WMluS6uuWRmOeuoeeQhueql+WPo1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgICAgICAgICAgJChcIiN3aW5kb3dDb250ZW50MVwiKS5odG1sKFxyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwid2luZG93Tm9EYXRhXCIgaWQ9XCJ3aW5kb3dOb0RhdGExXCI+5pqC5peg6ICB5biI5ZKM5Yqp5pWZ77yM6K+354K55Ye75LiL5pa55oyJ6ZKu5b+r6YCf5re75Yqg5Lq65ZGYPC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgJChcIi5fc3dpdGNoT3BlcmF0ZUFyZWFcIikub24oXCJjbGlja1wiLCBcIi5fZnVuY3Rpb25Td2l0Y2hcIiwgZnVuY3Rpb24gKGUpIHtcclxuXHJcbiAgICAgICAgICAgIHZhciAkZGVsZWdhdGVEb20gPSAkKGUuZGVsZWdhdGVUYXJnZXQpLFxyXG4gICAgICAgICAgICAgICAgc3dpdGNoU3RhdGUgPSAkZGVsZWdhdGVEb20uZGF0YShcInN3aXRjaF9zdGF0ZVwiKSxcclxuICAgICAgICAgICAgICAgIGlzX3Nob3dfZXhlcmNpc2Vfc3lzdGVtID0gMDtcclxuXHJcbiAgICAgICAgICAgIHZhciBjdXJyZW50SW5mbyA9IHtcclxuICAgICAgICAgICAgICAgICRjdXJyZW50RG9tOiAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgJGRlbGVnYXRlRG9tOiAkZGVsZWdhdGVEb20sXHJcbiAgICAgICAgICAgICAgICBzd2l0Y2hTdGF0ZTogc3dpdGNoU3RhdGUsXHJcbiAgICAgICAgICAgICAgICBvblRleHQ6ICRkZWxlZ2F0ZURvbS5kYXRhKFwib25fdGV4dFwiKSxcclxuICAgICAgICAgICAgICAgIG9mZlRleHQ6ICRkZWxlZ2F0ZURvbS5kYXRhKFwib2ZmX3RleHRcIilcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHN3aXRjaFN0YXRlKSB7Ly/lvZPliY3kuLrmiZPlvIDnirbmgIFcclxuICAgICAgICAgICAgICAgIGlzX3Nob3dfZXhlcmNpc2Vfc3lzdGVtID0gMDtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGlzX3Nob3dfZXhlcmNpc2Vfc3lzdGVtID0gMTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJC5hamF4KFwiL2V4ZXJjaXNlL3NldF9leGVyY2lzZV9ib29rX3N5c3RlbV9zdGF0ZVwiLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBpc19zaG93X2V4ZXJjaXNlX3N5c3RlbTogaXNfc2hvd19leGVyY2lzZV9zeXN0ZW0sLy8oMC3kuI3lvIDlkK87MS3lvIDlkK8pXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoaXNfc2hvd19leGVyY2lzZV9zeXN0ZW0gPT0gMSA/ICBcIuW8gOWQr+aIkOWKn1wiIDogXCLlip/og73lt7LlhbPpl63vvIzmiYDmnInkvZzkuJrlhoXlrrnlsIbkuI3nu6fnu63lnKjlupfpk7rlhoXmmL7npLpcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoYW5nZVN3aXRjaEJ0blN0YXRlKGN1cnJlbnRJbmZvKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlzX3Nob3dfZXhlcmNpc2Vfc3lzdGVtID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50Tm9EYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNjb250ZW50Tm9EYXRhXCIpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3RhYmxlQ29udGVudFwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNsaXN0UGFnZVwiKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI3RhYmxlSGVhZGVyXCIpLmFmdGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiY29udGVudE5vRGF0YVwiIGlkPVwiZnVuY3Rpb25IYXNDbG9zZVwiPuWKn+iDveW3suWFs+mXrSwg5L2c5Lia5YaF5a655pqC5pe25LiN5pi+56S6PC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjZnVuY3Rpb25IYXNDbG9zZVwiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50Tm9EYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiN0YWJsZUhlYWRlclwiKS5hZnRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJjb250ZW50Tm9EYXRhXCIgaWQ9XCJjb250ZW50Tm9EYXRhXCI+5pqC5peg5pWw5o2uPC9kaXY+J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICQoXCIjdGFibGVDb250ZW50XCIpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkKFwiI2xpc3RQYWdlXCIpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIue9kee7nOmXrumimO+8jOivt+eojeWQjuWGjeivlVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/mlrDlu7rkvZzkuJrmnKxcclxuICAgICAgICAkKFwiI2NyZWF0ZUV4ZXJjaXNlQm9va1wiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gXCIvZXhlcmNpc2UvY3JlYXRlX2V4ZXJjaXNlX2Jvb2s/cGFnZV9pbmRleD1cIitjdXJyZW50UGFnZUluZGV4O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+S9nOS4muacrOeahOaTjeS9nFxyXG4gICAgICAgICQoXCIub3BlcmF0ZUxpc3QgPiBsaS5vcGVyYXRlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgdmFyICRzZWxmID0gJCh0aGlzKSxcclxuICAgICAgICAgICAgICAgICRwYXJlbnQgPSAkc2VsZi5wYXJlbnRzKFwiLmV4ZXJjaXNlQm9va09wZXJhdGVBcmVhXCIpLFxyXG4gICAgICAgICAgICAgICAgdHlwZSA9ICRzZWxmLmRhdGEoXCJ0eXBlXCIpLFxyXG4gICAgICAgICAgICAgICAgcmVzSWQgPSAkcGFyZW50LmRhdGEoXCJyZXNvdXJjZV9pZFwiKSxcclxuICAgICAgICAgICAgICAgIHJlc1R5cGUgPSAkcGFyZW50LmRhdGEoXCJyZXNvdXJjZV90eXBlXCIpLFxyXG4gICAgICAgICAgICAgICAgZXhlcmNpc2VCb29rSWQgPSAkcGFyZW50LmRhdGEoXCJleGVyY2lzZV9ib29rX2lkXCIpLFxyXG4gICAgICAgICAgICAgICAgcm9sZUxpc3RBcnIgPSAkcGFyZW50LmRhdGEoXCJyb2xlX2xpc3RcIik7XHJcblxyXG4gICAgICAgICAgICAkZXhlQm9va0xpc3QuZXhlcmNpc2VCb29rSWQgPSBleGVyY2lzZUJvb2tJZDtcclxuXHJcbiAgICAgICAgICAgIHN3aXRjaCAodHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcInJvbGVfbWFuYWdlXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgb3BlblJvbGVNYW5hZ2VXaW5kb3cocmVzVHlwZSwgcm9sZUxpc3RBcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcImV4ZXJjaXNlX2xpc3RcIjpcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFwiL2V4ZXJjaXNlL2V4ZXJjaXNlX2xpc3Q/ZXhlcmNpc2VfYm9va19pZD1cIitleGVyY2lzZUJvb2tJZCtcIiZwYWdlX2luZGV4PVwiK2N1cnJlbnRQYWdlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiZWRpdF9leGVyY2lzZV9ib29rXCI6XHJcbiAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcIi9leGVyY2lzZS9lZGl0X2V4ZXJjaXNlX2Jvb2s/ZXhlcmNpc2VfYm9va19pZD1cIitleGVyY2lzZUJvb2tJZCtcIiZwYWdlX2luZGV4PVwiK2N1cnJlbnRQYWdlSW5kZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwi5Y+C5pWw6ZSZ6K+vXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKiog5Lq65ZGY6K6+572u56qX5Y+jICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcbiAgICAgICAgJChcIiN3aW5kb3dDbG9zZUljb24xXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5re75Yqg5Lq65ZGYXHJcbiAgICAgICAgJChcIiN3aW5kb3dIb3ZlckJveFwiKS5vbihcImNsaWNrXCIsIFwibGlcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdHlwZSA9ICQodGhpcykuZGF0YShcInR5cGVcIik7XHJcbiAgICAgICAgICAgIGlmICh0eXBlID09IFwiYWRkX3RlYWNoZXJcIikgey8v6ZyA6KaB5Yqg6ZmQ5Yi2XHJcbiAgICAgICAgICAgICAgICBpZiAoaGFzU2V0VGVhY2hlcigpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LiA5Liq5L2c5Lia5pys5LuF6IO96K6+572uMeS9jeiAgeW4iO+8jOivt+WFiOWwhuW3suiuvue9rueahOiAgeW4iOaUueS4uuWKqeaVmVwiKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkZXhlQm9va0xpc3QuYWRkVXNlclR5cGUgPSAwO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGUgPT0gXCJhZGRfYXNzaXN0YW50XCIpIHtcclxuICAgICAgICAgICAgICAgICRleGVCb29rTGlzdC5hZGRVc2VyVHlwZSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgb3BlblNlYXJjaFVzZXJXaW5kb3coKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyByYWRpbyDmjInpkq7ngrnlh7vliIfmjaLmlYjmnpxcclxuICAgICAgICAkKCcjd2luZG93Q29udGVudDEnKS5vbignY2xpY2snLCAnLnJvbGVUeXBlUmFkaW8nLCBmdW5jdGlvbihlKSB7XHJcbiAgICAgICAgICAgIHZhciAkc2VsZiA9ICQodGhpcyksXHJcbiAgICAgICAgICAgICAgICBjbGlja1JvbGVUeXBlID0gJHNlbGYuY2hpbGRyZW4oXCIuY2lyY2xlUmFkaW9cIikuZGF0YShcInJvbGVfdHlwZVwiKTtcclxuXHJcbiAgICAgICAgICAgIGlmICgkc2VsZi5jaGlsZHJlbihcIi5jaXJjbGVSYWRpb1wiKS5oYXNDbGFzcyhcInJhZGlvQWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNsaWNrUm9sZVR5cGUgPT0gMCAmJiBoYXNTZXRUZWFjaGVyKCkpIHsgICAvL+iuvue9ruS4uuiAgeW4iFxyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LiA5Liq5L2c5Lia5pys5LuF6IO96K6+572uMeS9jeiAgeW4iO+8jOivt+WFiOWwhuW3suiuvue9rueahOiAgeW4iOaUueS4uuWKqeaVmVwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkc2VsZi5wYXJlbnRzKFwiLnJvbGVUeXBlUmFkaW9XcmFwcGVyXCIpLmZpbmQoXCIuY2lyY2xlUmFkaW9cIikucmVtb3ZlQ2xhc3MoJ3JhZGlvQWN0aXZlJyk7XHJcbiAgICAgICAgICAgICRzZWxmLmNoaWxkcmVuKCcuY2lyY2xlUmFkaW8nKS5hZGRDbGFzcygncmFkaW9BY3RpdmUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+enu+mZpOeUqOaIt1xyXG4gICAgICAgICQoXCIjcm9sZU1hbmFnZVdpbmRvd1wiKS5vbihcImNsaWNrXCIsIFwiLmRlbGV0ZVNpbmdsZVVzZXJcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgJHBhcmVudCA9ICQodGhpcykucGFyZW50cyhcIi5zaW5nbGVVc2VySW5mbzFcIik7XHJcblxyXG4gICAgICAgICAgICAkcGFyZW50LmNzcyh7XCJoZWlnaHRcIjogXCIwXCIsIFwicGFkZGluZ1wiOiBcIjBcIn0pO1xyXG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICRwYXJlbnQucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgY291bnQgPSAkKFwiI3dpbmRvd0NvbnRlbnQxXCIpLmZpbmQoXCIuc2luZ2xlVXNlckluZm8xXCIpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgIGlmIChjb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiN3aW5kb3dDb250ZW50MVwiKS5odG1sKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIndpbmRvd05vRGF0YVwiIGlkPVwid2luZG93Tm9EYXRhMVwiPuaaguaXoOiAgeW4iOWSjOWKqeaVme+8jOivt+eCueWHu+S4i+aWueaMiemSruW/q+mAn+a3u+WKoOS6uuWRmDwvZGl2PidcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAzMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5L+d5a2Y5Lq65ZGYXHJcbiAgICAgICAgJChcIiNjb25maXJtU2F2ZVJvbGVcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgYWRkZWRVc2VyTGlzdCA9ICQoXCIjd2luZG93Q29udGVudDFcIikuZmluZChcIi5zaW5nbGVVc2VySW5mbzFcIiksXHJcbiAgICAgICAgICAgICAgICBleGVyY2lzZUJvb2tSb2xlcyA9IHt9O1xyXG5cclxuICAgICAgICAgICAgYWRkZWRVc2VyTGlzdC5lYWNoKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciB1c2VySWQgPSAkKHRoaXMpLmRhdGEoXCJ1c2VyX2lkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvbGVUeXBlID0gJCh0aGlzKS5maW5kKFwiLmNpcmNsZVJhZGlvLnJhZGlvQWN0aXZlXCIpLmRhdGEoXCJyb2xlX3R5cGVcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXhlcmNpc2VCb29rUm9sZXNbdXNlcklkXSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICBleGVyY2lzZUJvb2tSb2xlc1t1c2VySWRdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGVfdHlwZTogcm9sZVR5cGVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3dMb2FkaW5nKFwicm9sZU1hbmFnZUxvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICQuYWpheChcIi9leGVyY2lzZS9zZXRfZXhlcmNpc2VfYm9va19yb2xlXCIsIHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIGV4ZXJjaXNlX2Jvb2tfcm9sZXM6IGV4ZXJjaXNlQm9va1JvbGVzLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4ZXJjaXNlX2Jvb2tfaWQ6ICRleGVCb29rTGlzdC5leGVyY2lzZUJvb2tJZFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuaGlkZUxvYWRpbmcoXCJyb2xlTWFuYWdlTG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuaGlkZVdpbmRvdyhcInJvbGVNYW5hZ2VXaW5kb3dcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLkv53lrZjmiJDlip9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zpl67popjvvIzor7fnqI3lkI7lho3or5VcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcInJvbGVNYW5hZ2VMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqIOS6uuWRmOaQnOe0oueql+WPoyAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG4gICAgICAgICQoXCIjd2luZG93Q2xvc2VJY29uMlwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwic2VhcmNoVXNlcldpbmRvd1wiKTtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v54K55Ye75pCc57SiXHJcbiAgICAgICAgJChcIiNzZWFyY2hVc2VyV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIjd2luZG93U2VhcmNoQnRuXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggPSAxO1xyXG4gICAgICAgICAgICAkcHJpdmF0ZS51c2VyTGlzdFNlYXJjaENvbnRlbnQgPSAkLnRyaW0oJChcIiN3aW5kb3dTZWFyY2hJbnB1dFwiKS52YWwoKSk7XHJcbiAgICAgICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd1RvQm90dG9tID0gZmFsc2U7XHJcbiAgICAgICAgICAgICQoJyNzZWFyY2hVc2VyV2luZG93IC53aW5kb3dDb250ZW50V3JhcHBlcjInKS5zY3JvbGxUb3AoMCk7XHJcbiAgICAgICAgICAgIGdldEFsbFVzZXJMaXN0KCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgJChcIiN3aW5kb3dTZWFyY2hJbnB1dFwiKS5vbihcImtleXByZXNzXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleUNvZGUgPT0gMTMpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjd2luZG93U2VhcmNoQnRuXCIpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+a7keWKqOWKoOi9veabtOWkmlxyXG4gICAgICAgICQoJyNzZWFyY2hVc2VyV2luZG93IC53aW5kb3dDb250ZW50V3JhcHBlcjInKS5zY3JvbGwoZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgRGl2SGVpZ2h0ID0gJCgnI3dpbmRvd0NvbnRlbnQyJykuaGVpZ2h0KCksXHJcbiAgICAgICAgICAgICAgICBTY3JvbGxIZWlnaHQgPSAkKHRoaXMpLmhlaWdodCgpLFxyXG4gICAgICAgICAgICAgICAgU2Nyb2xsVG9wID0gJCh0aGlzKS5zY3JvbGxUb3AoKTtcclxuICAgICAgICAgICAgaWYgKChTY3JvbGxUb3AgKyBTY3JvbGxIZWlnaHQgPj0gRGl2SGVpZ2h0IC0gNSkgJiYgISRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmdcclxuICAgICAgICAgICAgICAgICAgICAmJiAhJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20pIHtcclxuICAgICAgICAgICAgICAgIGdldEFsbFVzZXJMaXN0KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+a3u+WKoOiAgeW4iOaXtu+8jOa3u+WKoOmZkOWItu+8jOWPquiDvemAieS4reS4gOS4qlxyXG4gICAgICAgICQoXCIjd2luZG93Q29udGVudDJcIikub24oXCJjaGFuZ2VcIiwgXCIuc2VsZWN0U2luZ2xlR3Vlc3RcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAgICAgdmFyICR0YXJnZXQgPSAkKGUudGFyZ2V0KSxcclxuICAgICAgICAgICAgICAgIGlzQ2hlY2tlZCA9ICR0YXJnZXQucHJvcChcImNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgIGlmIChpc0NoZWNrZWQgJiYgJGV4ZUJvb2tMaXN0LmFkZFVzZXJUeXBlID09IDApIHtcclxuICAgICAgICAgICAgICAgIHZhciBjb3VudCA9ICQoXCIjd2luZG93Q29udGVudDJcIilcclxuICAgICAgICAgICAgICAgICAgICAuZmluZChcIi5zZWxlY3RTaW5nbGVHdWVzdDpjaGVja2VkXCIpLm5vdCgnLmRpc2FibGVkSW5wdXQnKS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZiAoY291bnQgPiAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LiA5Liq5L2c5Lia5pys5LuF6IO96K6+572uMeS9jeiAgeW4iFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkdGFyZ2V0LnByb3AoXCJjaGVja2VkXCIsIGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8v5re75Yqg5Lq65ZGYXHJcbiAgICAgICAgJChcIiNjb25maXJtU2F2ZUFkZGVkVXNlclwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGVja2VkVXNlciA9ICQoXCIuc2VsZWN0U2luZ2xlR3Vlc3Q6Y2hlY2tlZFwiKSxcclxuICAgICAgICAgICAgICAgIHVzZXJBcnIgPSB7fTtcclxuICAgICAgICAgICAgY2hlY2tlZFVzZXIuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgJHBhcmVudCA9ICQodGhpcykucGFyZW50cyhcIi5zaW5nbGVHdWVzdEluZm8yXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHVzZXJJZCA9ICRwYXJlbnQuZGF0YShcInVzZXJfaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgd3hBdmF0YXIgPSAkcGFyZW50LmRhdGEoXCJ3eF9hdmF0YXJcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgd3hOaWNrbmFtZSA9ICRwYXJlbnQuZGF0YShcInd4X25pY2tuYW1lXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJvbGVUeXBlID0gJGV4ZUJvb2tMaXN0LmFkZFVzZXJUeXBlO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmICh1c2VyQXJyW3VzZXJJZF0gPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXNlckFyclt1c2VySWRdID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB1c2VyX2lkOiB1c2VySWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHd4X2F2YXRhcjogd3hBdmF0YXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHd4X25pY2tuYW1lOiB3eE5pY2tuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByb2xlX3R5cGU6IHJvbGVUeXBlXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB2YXIgc3RvcmVkVXNlcklkQXJyID0gZ2V0QWRkZWRVc2VySWRBcnIoKTtcclxuXHJcbiAgICAgICAgICAgIHZhciBodG1sU3RyID0gXCJcIjtcclxuICAgICAgICAgICAgJC5lYWNoKHVzZXJBcnIsIGZ1bmN0aW9uKGssIHYpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdG9yZWRVc2VySWRBcnIuaW5kZXhPZihrKSA9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgKz0gZ2V0VXNlckluZm9JdGVtKHYpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKGh0bWxTdHIubGVuZ3RoPjApIHtcclxuICAgICAgICAgICAgICAgICQoXCIjd2luZG93Tm9EYXRhMVwiKS5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgICQoXCIjd2luZG93Q29udGVudDFcIikuYXBwZW5kKGh0bWxTdHIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwic2VhcmNoVXNlcldpbmRvd1wiKTtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBmdW5jdGlvbiBvcGVuUm9sZU1hbmFnZVdpbmRvdyhyZXNUeXBlLCByb2xlTGlzdEFycikge1xyXG4gICAgICAgIGlmIChyZXNUeXBlID09IDQpIHtcclxuICAgICAgICAgICAgJC5hbGVydChcIuebtOaSreS9nOS4muivt+WJjeW+gCBb55u05pKt5YiX6KGoLeWYieWuvuiuvue9rl0g6L+b6KGM6ICB5biIL+WKqeaVmeiuvue9ruOAguagh+etvuS4uuiusuW4iOeahOWYieWuvuS4uuiAgeW4iO+8jOWFtuS9meS4uuWKqeaVmVwiLCB7XHJcbiAgICAgICAgICAgICAgICB0aXRsZTogXCLnm7Tmkq3kvZzkuJrkurrlkZjnrqHnkIZcIixcclxuICAgICAgICAgICAgICAgIGJ0bjogMixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIHZhciBodG1sU3RyID0gXCJcIjtcclxuICAgICAgICAkLmVhY2gocm9sZUxpc3RBcnIsIGZ1bmN0aW9uIChrLCB2KSB7XHJcbiAgICAgICAgICAgIGh0bWxTdHIgKz0gZ2V0VXNlckluZm9JdGVtKHYpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmIChodG1sU3RyLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgIGh0bWxTdHIgPVxyXG4gICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJ3aW5kb3dOb0RhdGFcIiBpZD1cIndpbmRvd05vRGF0YTFcIj7mmoLml6DogIHluIjlkozliqnmlZnvvIzor7fngrnlh7vkuIvmlrnmjInpkq7lv6vpgJ/mt7vliqDkurrlkZg8L2Rpdj4nO1xyXG4gICAgICAgIH1cclxuICAgICAgICAkKFwiI3dpbmRvd0NvbnRlbnQxXCIpLmh0bWwoaHRtbFN0cik7XHJcblxyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gb3BlblNlYXJjaFVzZXJXaW5kb3coKSB7XHJcbiAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJyb2xlTWFuYWdlV2luZG93XCIpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICQoXCIjc2VhcmNoVXNlcldpbmRvd1wiKS5maW5kKFwiLmhlYWRlclRleHQxXCIpLnRleHQoXHJcbiAgICAgICAgICAgICgkZXhlQm9va0xpc3QuYWRkVXNlclR5cGU9PTApP1wi5re75Yqg6ICB5biIXCI6XCLmt7vliqDliqnmlZlcIlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgJChcIiN3aW5kb3dDb250ZW50MlwiKS5odG1sKFwiXCIpO1xyXG4gICAgICAgICQoXCIjd2luZG93U2VhcmNoSW5wdXRcIikudmFsKFwiXCIpO1xyXG4gICAgICAgIGJhc2VVdGlscy5zaG93V2luZG93KFwic2VhcmNoVXNlcldpbmRvd1wiKTtcclxuICAgICAgICBcclxuICAgICAgICAkcHJpdmF0ZS5pc1NlYXJjaFVzZXJXaW5kb3dUb0JvdHRvbSA9IGZhbHNlO1xyXG4gICAgICAgICRwcml2YXRlLnVzZXJMaXN0UGFnZUluZGV4ID0gMTtcclxuICAgICAgICAkcHJpdmF0ZS51c2VyTGlzdFNlYXJjaENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgIGdldEFsbFVzZXJMaXN0KCk7XHJcbiAgICB9XHJcbiAgICBmdW5jdGlvbiBnZXRVc2VySW5mb0l0ZW0odikge1xyXG4gICAgICAgIHZhciBodG1sU3RyID1cclxuICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzaW5nbGVVc2VySW5mbzFcIiBkYXRhLXVzZXJfaWQ9XCInK3YudXNlcl9pZCsnXCI+JytcclxuICAgICAgICAgICAgICAgICc8aW1nIGNsYXNzPVwic2luZ2xlR3Vlc3RBdmF0YXIxXCIgc3JjPVwiJyt2Lnd4X2F2YXRhcisnXCI+JytcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwic2luZ2xlR3Vlc3ROYW1lMVwiIHRpdGxlPVwiJyt2Lnd4X25pY2tuYW1lKydcIj4nK3Yud3hfbmlja25hbWUrJzwvZGl2PicrXHJcbiAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJvbGVUeXBlUmFkaW9XcmFwcGVyXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInJvbGVUeXBlUmFkaW9cIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPHNwYW4gY2xhc3M9XCJjaXJjbGVSYWRpbyAnKyh2LnJvbGVfdHlwZT09MD8ncmFkaW9BY3RpdmUnOicnKSsnXCIgZGF0YS1yb2xlX3R5cGU9XCIwXCI+PC9zcGFuPjxzcGFuPuiAgeW4iDwvc3Bhbj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicm9sZVR5cGVSYWRpb1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8c3BhbiBjbGFzcz1cImNpcmNsZVJhZGlvICcrKHYucm9sZV90eXBlPT0xPydyYWRpb0FjdGl2ZSc6JycpKydcIiBkYXRhLXJvbGVfdHlwZT1cIjFcIj48L3NwYW4+PHNwYW4+5Yqp5pWZPC9zcGFuPicrXHJcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PicrXHJcbiAgICAgICAgICAgICAgICAnPC9kaXY+JytcclxuICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwiZGVsZXRlU2luZ2xlVXNlclwiPuenu+mZpDwvZGl2PicrXHJcbiAgICAgICAgICAgICc8L2Rpdj4nO1xyXG4gICAgICAgIHJldHVybiBodG1sU3RyO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gaGFzU2V0VGVhY2hlcigpIHtcclxuICAgICAgICB2YXIgaGFzU2V0VGVhY2hlciA9IGZhbHNlLFxyXG4gICAgICAgICAgICBhY3RpdmVSYWRpb0FyciA9ICQoXCIjd2luZG93Q29udGVudDFcIikuZmluZChcIi5jaXJjbGVSYWRpby5yYWRpb0FjdGl2ZVwiKTtcclxuXHJcbiAgICAgICAgYWN0aXZlUmFkaW9BcnIuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciByb2xlVHlwZSA9ICQodGhpcykuZGF0YShcInJvbGVfdHlwZVwiKTtcclxuICAgICAgICAgICAgaWYgKHJvbGVUeXBlID09IDApIHtcclxuICAgICAgICAgICAgICAgIGhhc1NldFRlYWNoZXIgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBoYXNTZXRUZWFjaGVyO1xyXG4gICAgfVxyXG4gICAgZnVuY3Rpb24gZ2V0QWxsVXNlckxpc3QoKSB7XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3dMb2FkaW5nKFwic2VhcmNoVXNlckxvYWRpbmdcIik7XHJcbiAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZyA9IHRydWU7XHJcbiAgICAgICAgJC5hamF4KFwiL3pic2VhcmNoXCIsIHtcclxuICAgICAgICAgICAgdHlwZTogXCJHRVRcIixcclxuICAgICAgICAgICAgZGF0YVR5cGU6IFwianNvblwiLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBwYWdlOiAkcHJpdmF0ZS51c2VyTGlzdFBhZ2VJbmRleCxcclxuICAgICAgICAgICAgICAgIHNlYXJjaDogJHByaXZhdGUudXNlckxpc3RTZWFyY2hDb250ZW50XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uIChyZXN1bHQpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgYWRkZWRVc2VyQXJyID0gZ2V0QWRkZWRVc2VySWRBcnIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuaGlkZUxvYWRpbmcoXCJzZWFyY2hVc2VyTG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICRwcml2YXRlLmlzU2VhcmNoVXNlcldpbmRvd0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvL+Whq+WFheaVsOaNrlxyXG4gICAgICAgICAgICAgICAgdmFyICRhcmVhID0gJChcIiN3aW5kb3dDb250ZW50MlwiKSxcclxuICAgICAgICAgICAgICAgICAgICBodG1sU3RyID0gXCJcIixcclxuICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSByZXN1bHQucGFnZV9vZmZzZXQ7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5lYWNoKHJlc3VsdC5kYXRhLCBmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBpc0FkZGVkID0gKGFkZGVkVXNlckFyci5pbmRleE9mKHYudXNlcl9pZCkgIT0gLTEpO1xyXG4gICAgICAgICAgICAgICAgICAgIGh0bWxTdHIgKz1cclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJzaW5nbGVHdWVzdEluZm8yXCIgZGF0YS11c2VyX2lkPVwiJyt2LnVzZXJfaWQrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIGRhdGEtd3hfYXZhdGFyPVwiJyt2Lnd4X2F2YXRhcisnXCIgZGF0YS13eF9uaWNrbmFtZT1cIicrdi53eF9uaWNrbmFtZSsnXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgJysoaXNBZGRlZD8nY2hlY2tlZCBkaXNhYmxlZCc6JycpKycgY2xhc3M9XCJzZWxlY3RTaW5nbGVHdWVzdCAnKyhpc0FkZGVkPydkaXNhYmxlZElucHV0JzonJykrJ1wiIGlkPVwiJyt2LnVzZXJfaWQrJ1wiPicrXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGxhYmVsIGZvcj1cIicrdi51c2VyX2lkKydcIiBjbGFzcz1cInNpbmdsZUd1ZXN0TGFiZWxcIj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW1nIHNyYz1cIicrdi53eF9hdmF0YXIrJ1wiIGNsYXNzPVwic2luZ2xlR3Vlc3RBdmF0YXIyXCI+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cInNpbmdsZUd1ZXN0TmFtZTJcIiB0aXRsZT1cIicrdi53eF9uaWNrbmFtZSsnXCI+Jyt2Lnd4X25pY2tuYW1lKyc8L2Rpdj4nK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvbGFiZWw+JytcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmIChodG1sU3RyLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciA9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwid2luZG93Tm9EYXRhXCIgaWQ9XCJ3aW5kb3dOb0RhdGEyXCI+5pqC5peg5pWw5o2uPC9kaXY+JztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICgkcHJpdmF0ZS51c2VyTGlzdFBhZ2VJbmRleCA9PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGFyZWEuaHRtbChodG1sU3RyKTtcclxuICAgICAgICAgICAgICAgICAgICAkYXJlYS5hcHBlbmQoJzxkaXYgY2xhc3M9XCJpc0Rvd25cIj7mm7TlpJrmlbDmja7liqDovb3kuK08L2Rpdj4nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGFyZWEuZmluZCgnLmlzRG93bicpLmJlZm9yZShodG1sU3RyKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChvZmZzZXQuY3VycmVudF9wYWdlID49IG9mZnNldC50b3RhbF9wYWdlcykgeyAgICAgIC8v5pWw5o2u5Yqg6L295a6M5q+V5ZCO55qE5pON5L2cXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHRpbWVSYW5nZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9mZnNldC50b3RhbF9jb3VudCA+IDEwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRhcmVhLmZpbmQoJy5pc0Rvd24nKS50ZXh0KFwi5pWw5o2u5bey5Yqg6L295a6M5q+VXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lUmFuZ2UgPSAzMDAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVSYW5nZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkYXJlYS5maW5kKCcuaXNEb3duJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIHRpbWVSYW5nZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93VG9Cb3R0b20gPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJHByaXZhdGUudXNlckxpc3RQYWdlSW5kZXggKys7XHJcblxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcInNlYXJjaFVzZXJMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAgICAgJHByaXZhdGUuaXNTZWFyY2hVc2VyV2luZG93TG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgIGFsZXJ0KFwi5pyN5Yqh5Zmo5Ye65bCP5beu5LqG77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5bnqpflj6PkuIA8cm9sZU1hbmFnZVdpbmRvdz7nmoTnlKjmiLcgaWQg5pWw57uEXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAgICAgKi9cclxuICAgIGZ1bmN0aW9uIGdldEFkZGVkVXNlcklkQXJyKCkge1xyXG4gICAgICAgIHZhciBhZGRlZFVzZXJMaXN0ID0gJChcIiN3aW5kb3dDb250ZW50MVwiKS5maW5kKFwiLnNpbmdsZVVzZXJJbmZvMVwiKSxcclxuICAgICAgICAgICAgYWRkZWRVc2VyQXJyID0gW107XHJcblxyXG4gICAgICAgIGFkZGVkVXNlckxpc3QuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciB1c2VySWQgPSAkKHRoaXMpLmRhdGEoXCJ1c2VyX2lkXCIpO1xyXG4gICAgICAgICAgICBhZGRlZFVzZXJBcnIucHVzaCh1c2VySWQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBhZGRlZFVzZXJBcnI7XHJcbiAgICB9O1xyXG4gICAgZnVuY3Rpb24gY2hhbmdlU3dpdGNoQnRuU3RhdGUoY3VycmVudEluZm8pIHtcclxuICAgICAgICB2YXIgc3RhdGUgPSAhY3VycmVudEluZm8uc3dpdGNoU3RhdGU7ICAgIC8v6KaB6L2s5Y+Y5Yiw55qE54q25oCBXHJcbiAgICAgICAgaWYgKHN0YXRlKSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNzcyh7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwiIzJGQ0U2RlwifSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNoaWxkcmVuKFwiLl9zd2l0Y2hEZXNjVGV4dFwiKS5jc3Moe1wibGVmdFwiOiBcIjlweFwifSkudGV4dChjdXJyZW50SW5mby5vblRleHQpO1xyXG4gICAgICAgICAgICBjdXJyZW50SW5mby4kY3VycmVudERvbS5jaGlsZHJlbihcIi5fc3dpdGNoQnV0dG9uSWNvblwiKS5jc3Moe1wibGVmdFwiOiBcIjQwcHhcIn0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNzcyh7XCJiYWNrZ3JvdW5kLWNvbG9yXCI6IFwiI2MyYzJjMlwifSk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNoaWxkcmVuKFwiLl9zd2l0Y2hEZXNjVGV4dFwiKS5jc3Moe1wibGVmdFwiOiBcIjQ0cHhcIn0pLnRleHQoY3VycmVudEluZm8ub2ZmVGV4dCk7XHJcbiAgICAgICAgICAgIGN1cnJlbnRJbmZvLiRjdXJyZW50RG9tLmNoaWxkcmVuKFwiLl9zd2l0Y2hCdXR0b25JY29uXCIpLmNzcyh7XCJsZWZ0XCI6IFwiMHB4XCJ9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgY3VycmVudEluZm8uJGRlbGVnYXRlRG9tLmRhdGEoXCJzd2l0Y2hfc3RhdGVcIiwgc3RhdGUpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXR1cm4gJGV4ZUJvb2tMaXN0O1xyXG59KSgpO1xyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXX0=
