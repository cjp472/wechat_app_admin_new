$(function(){manageCommunity.init()});var manageCommunity=function(){var e={};var i=false;e.isCommunityShow=false;var t,n;function a(e){var i=new RegExp("(^|&)"+e+"=([^&]*)(&|$)");var t=window.location.search.substr(1).match(i);if(t!=null)return unescape(t[2]);return null}function l(e){var i=null;if(window.createObjectURL!=undefined){i=window.createObjectURL(e)}else if(window.URL!=undefined){i=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){i=window.webkitURL.createObjectURL(e)}return i}function s(e){if(window.revokeObjectURL!=undefined){window.revokeObjectURL(e)}else if(window.URL!=undefined){window.URL.revokeObjectURL(e)}else if(window.webkitURL!=undefined){window.webkitURL.revokeObjectURL(e)}}function o(e,i,t,n){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("社群名称不能为空");return false}if(e.title.length>15){baseUtils.show.redTip("社群名称不能超过15个字符");return false}if($formCheck.emptyString(e.describe)){baseUtils.show.redTip("社群简介不能为空！");return false}if(e.describe.length>40){baseUtils.show.redTip("社群简介不能超过40个字符");return false}if($formCheck.emptyString(e.img_url)){baseUtils.show.redTip("请上传社群封面！");return false}if(!i&&!t){baseUtils.show.redTip("请选择至少一种加入形式");return false}if(i&&$formCheck.emptyString(e.piece_price)){baseUtils.show.redTip("请填入单卖价格！");return false}if(i&&e.piece_price>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}if(t&&n.length==0){baseUtils.show.redTip("请选择您要关联的专栏或会员！");return false}return true}function r(e,i,a,o){console.log(e);if(e&&e.length>0){var r=e[0];var c=l(r);t=(r.size/(1024*1024)).toFixed(2);n=r.duration;if($uploadFile.checkFileSize(r,o)){$uploadFile.uploadRes(r,i,function(e){},function(e){console.log(e);baseUtils.show.blueTip("上传成功！");resUrl=e.data.access_url;console.log(resUrl);$("#imgUrl").val(resUrl);if(i=="image"){var t=r.name;var n,a;a=t.lastIndexOf(".");if(a!=-1){n=t.substr(a+1).toUpperCase();n=n.toLowerCase();if(n!="jpg"&&n!="png"&&n!="jpeg"&&n!="gif"){baseUtils.show.blueTip("请上传图片类型的文件哦~");return}}else{document.all.submit_upload.disabled=true;baseUtils.show.blueTip("请上传图片类型的文件哦~");return}$("#reBackImg").load(function(){s(c)}).attr("src",c)}},function(e){console.error("上传失败!!!");console.log(e);baseUtils.show.redTip("上传失败！")})}else{baseUtils.show.redTip("上传资源限制在"+o+"MB内！");$(".upLoad"+a).val("")}}else{baseUtils.show.redTip("网络错误，请稍后再试！")}}e.init=function(){$("#uploadImage").on("change",function(){r(this.files,"image","reBackImg",5)});$(".resAddSectionC").on("click",".setFee",function(){if($("#setFee").is(":checked")){$("#setPrice").attr("readonly","readonly");$("#setPrice").attr("disabled","disabled")}else{$("#setPrice").removeAttr("readonly");$("#setPrice").removeAttr("disabled")}});$(".resAddSectionC").on("click",".setRelevance",function(){if($("#setRelevance").is(":checked")){$("#relevanceContent").fadeOut(200)}else{$("#relevanceContent").fadeIn(200)}});$("#packageType").on("change",function(){if($("#package").is(":selected")){$("#memberSel").val("none");$(this).next().show();$(this).next().next().hide()}else{$("#packageSel").val("none");$(this).next().hide();$(this).next().next().show()}});$("#newRelevance").click(function(){$("#newRelevance").hide();$(".selectRelevance").show()});$("#removeRelevance").click(function(){$("#newRelevance").show();$(".selectRelevance").hide();$("#packageType").val("package");$("#packageSel").val("none");$("#memberSel").val("none");$("#memberSel").hide();$("#packageSel").show()});$("#addRelevance").click(function(){var e=$(".packageSelect:visible option:selected").data("product_id");for(var i=0;i<$(".oneRelevance").length;i++){var t=$(".oneRelevance").eq(i).data("product_id");if(e==t){baseUtils.show.redTip("请勿重复选择");return false}}if($(".packageSelect:visible").val()=="none"){baseUtils.show.redTip("请选择您当前要关联的会员或专栏")}else{var n=$("#packageType option:selected").text(),a=$(".packageSelect:visible option:selected").text(),l='<div class="oneRelevance clearfix" data-product_id="'+e+'">'+'<div class="packageClass">'+n+"</div>"+'<div class="packageName" title="'+a+'">'+a+"</div>"+'<button type="cancel" class="xeBtnDefault btnMid cancelRelevance">取消关联</button>'+"</div>";$("#relevanceContent").append(l);$("#removeRelevance").click()}});$(".secondCheckbox").on("click",".cancelRelevance",function(){$(this).parent().remove()});$(".base_mainContent").on("click","#saveBtn",function(){if(i){baseUtils.show.redTip("不能重复提交")}else{var e=$.trim($("#pageType").val()),t=$.trim($("#title").val()),n=$.trim($("#intro").val()),l=$.trim($("#imgUrl").val()),s=$("#setFee").is(":checked"),r=$.trim($("#setPrice").val())*100;if(!s){r=null}var c=$("#setRelevance").is(":checked");var d=[];if(c){for(var u=0,f=0;u<$(".oneRelevance").length;u++){var p={};p[u]=$(".oneRelevance").eq(u).data("product_id");if(p[u]){d[f]=p;f++}}}else{d=null}var m=$("input[name='isCommunityShow']:checked").val();if(e==0){var v={title:t,describe:n,img_url:l,piece_price:r,product_id:JSON.stringify(d),community_state:m}}else{var w=a("id");var v={id:w,title:t,describe:n,img_url:l,piece_price:r,product_id:JSON.stringify(d),community_state:m}}if(o(v,s,c,d)){i=true;if(e==0){var h="uploadCommunity"}else{var h="updateCommunity"}console.log(h);$.ajax(h,{type:"POST",dataType:"json",data:v,success:function(t){if(parseInt(t.code)==0){if(e==1){if(t.free==1){var n="将免费社群修改为付费社群，已加入的用户需要重新付费进入，或您可以生成邀请码邀请用户进入。";$.alert(n,"info",{oktext:"我知道了",btn:2,onOk:function(){window.location.href="/smallCommunity/communityList"},onClose:function(){window.location.href="/smallCommunity/communityList"}});return false}else{baseUtils.show.blueTip("保存成功")}}else{baseUtils.show.blueTip("创建成功")}if(t.is_new==1){window.location.href="/smallCommunity/communityList?is_new="+1}else{window.location.href="/smallCommunity/communityList"}}else{i=false;baseUtils.show.redTip(t.msg)}},error:function(e,t,n){i=false;console.error(n);baseUtils.show.redTip("网络错误，请稍后再试！")}})}}})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZUNvbW11bml0eS5qcyJdLCJuYW1lcyI6WyIkIiwibWFuYWdlQ29tbXVuaXR5IiwiaW5pdCIsInN1Ym1pdExpbWl0IiwiaXNDb21tdW5pdHlTaG93IiwiZmlsZVNpemUiLCJyZXNBdWRpbzFMZW5naCIsIkdldFF1ZXJ5U3RyaW5nIiwibmFtZSIsInJlZyIsIlJlZ0V4cCIsInIiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsInNlYXJjaCIsInN1YnN0ciIsIm1hdGNoIiwidW5lc2NhcGUiLCJnZXRPYmplY3RVUkwiLCJmaWxlIiwidXJsIiwiY3JlYXRlT2JqZWN0VVJMIiwidW5kZWZpbmVkIiwiVVJMIiwid2Via2l0VVJMIiwicmVtb3ZlT2JqZWN0VVJMIiwicmV2b2tlT2JqZWN0VVJMIiwiY2hlY2tDb21tdW5pdHlGb3JtIiwiaW5mbyIsInNpbmdsZVNhbGUiLCJyZWxldmFuY2UiLCJwcm9kdWN0X2lkIiwiJGZvcm1DaGVjayIsImVtcHR5U3RyaW5nIiwidGl0bGUiLCJiYXNlVXRpbHMiLCJzaG93IiwicmVkVGlwIiwibGVuZ3RoIiwiZGVzY3JpYmUiLCJpbWdfdXJsIiwicGllY2VfcHJpY2UiLCJtYXhJbnB1dFByaWNlIiwicmVzVXBsb2FkIiwiZmlsZXMiLCJyZXNUeXBlIiwicmVzVHlwZUNsYXNzIiwicmVzTGltaXRTaXplIiwiY29uc29sZSIsImxvZyIsInJlc291cmNlTG9jYWxVcmwiLCJzaXplIiwidG9GaXhlZCIsImR1cmF0aW9uIiwiJHVwbG9hZEZpbGUiLCJjaGVja0ZpbGVTaXplIiwidXBsb2FkUmVzIiwiZGF0YSIsImJsdWVUaXAiLCJyZXNVcmwiLCJhY2Nlc3NfdXJsIiwidmFsIiwiaW1nTmFtZSIsImV4dCIsImlkeCIsImxhc3RJbmRleE9mIiwidG9VcHBlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsImRvY3VtZW50IiwiYWxsIiwic3VibWl0X3VwbG9hZCIsImRpc2FibGVkIiwibG9hZCIsImF0dHIiLCJlcnJvciIsIm9uIiwidGhpcyIsImlzIiwicmVtb3ZlQXR0ciIsImZhZGVPdXQiLCJmYWRlSW4iLCJuZXh0IiwiaGlkZSIsImNsaWNrIiwicHJvZHVjdElkIiwiaSIsImN1cnJlbnRJZCIsImVxIiwiRmlyc3RTZWxlY3RlZCIsInRleHQiLCJTZWNvbmREZXRhaWwiLCJodG1sU3RyaW5nIiwiYXBwZW5kIiwicGFyZW50IiwicmVtb3ZlIiwicGFnZVR5cGUiLCJ0cmltIiwiaiIsImlkQXJyYXkiLCJwYXJhbXMiLCJKU09OIiwic3RyaW5naWZ5IiwiY29tbXVuaXR5X3N0YXRlIiwiaWQiLCJhamF4VXJsIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsInN1Y2Nlc3MiLCJwYXJzZUludCIsImNvZGUiLCJmcmVlIiwiYWxlcnQiLCJva3RleHQiLCJidG4iLCJvbk9rIiwiaHJlZiIsIm9uQ2xvc2UiLCJpc19uZXciLCJtc2ciLCJ4aHIiLCJzdGF0dXMiLCJlcnIiXSwibWFwcGluZ3MiOiJBQUFBQSxFQUFFLFdBQ0VDLGdCQUFnQkMsUUFJcEIsSUFBSUQsaUJBQWtCLFdBRWxCLEdBQUlBLEtBRUosSUFBSUUsR0FBYyxLQUVsQkYsR0FBZ0JHLGdCQUFrQixLQUVsQyxJQUFJQyxHQUNBQyxDQUdKLFNBQVNDLEdBQWVDLEdBQ3BCLEdBQUlDLEdBQU0sR0FBSUMsUUFBTyxRQUFVRixFQUFPLGdCQUN0QyxJQUFJRyxHQUFJQyxPQUFPQyxTQUFTQyxPQUFPQyxPQUFPLEdBQUdDLE1BQU1QLEVBQy9DLElBQUlFLEdBQUssS0FBTSxNQUFPTSxVQUFTTixFQUFFLEdBQ2pDLE9BQU8sTUFHWCxRQUFTTyxHQUFhQyxHQUNsQixHQUFJQyxHQUFNLElBQ1YsSUFBSVIsT0FBT1MsaUJBQW1CQyxVQUFXLENBQ3JDRixFQUFNUixPQUFPUyxnQkFBZ0JGLE9BQzFCLElBQUlQLE9BQU9XLEtBQU9ELFVBQVcsQ0FDaENGLEVBQU1SLE9BQU9XLElBQUlGLGdCQUFnQkYsT0FDOUIsSUFBSVAsT0FBT1ksV0FBYUYsVUFBVyxDQUN0Q0YsRUFBTVIsT0FBT1ksVUFBVUgsZ0JBQWdC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cUQsT0FBUyxFQUFHLENBQ3RCLEdBQUlmLEdBQVksRUFBRyxDQUNmLEdBQUd0QyxFQUFLc0QsTUFBUSxFQUFFLENBRWQsR0FBSXRCLEdBQU8sOENBQ1h6RixHQUFFZ0gsTUFBTXZCLEVBQUssUUFDVHdCLE9BQVEsT0FDUkMsSUFBSyxFQUNMQyxLQUFNLFdBQ0Z2RyxPQUFPQyxTQUFTdUcsS0FBSyxpQ0FFekJDLFFBQVEsV0FFSnpHLE9BQU9DLFNBQVN1RyxLQUFLLGtDQUc3QixPQUFPLFdBRUosQ0FDSGpGLFVBQVVDLEtBQUtzQixRQUFRLGFBRXhCLENBQ0h2QixVQUFVQyxLQUFLc0IsUUFBUSxRQUcvQixHQUFJRCxFQUFLNkQsUUFBVSxFQUFHLENBQ2xCMUcsT0FBT0MsU0FBU3VHLEtBQU8sd0NBQTBDLE1BQzlELENBQ0h4RyxPQUFPQyxTQUFTdUcsS0FBTyxxQ0FFeEIsQ0FDSGpILEVBQWMsS0FDZGdDLFdBQVVDLEtBQUtDLE9BQU9vQixFQUFLOEQsT0FHbkM3QyxNQUFPLFNBQVU4QyxFQUFLQyxFQUFRQyxHQUMxQnZILEVBQWMsS0FDZDZDLFNBQVEwQixNQUFNZ0QsRUFDZHZGLFdBQVVDLEtBQUtDLE9BQU8sc0JBUzlDLE9BQU9wQyIsImZpbGUiOiJtYW5hZ2VDb21tdW5pdHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyIkKGZ1bmN0aW9uICgpIHtcclxuICAgIG1hbmFnZUNvbW11bml0eS5pbml0KCk7XHJcbn0pO1xyXG5cclxuXHJcbnZhciBtYW5hZ2VDb21tdW5pdHkgPSBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyIG1hbmFnZUNvbW11bml0eSA9IHt9O1xyXG5cclxuICAgIHZhciBzdWJtaXRMaW1pdCA9IGZhbHNlOyAgICAgLy8g6KGo5Y2V5o+Q5Lqk6ZmQ5Yi25qCH6K6wXHJcblxyXG4gICAgbWFuYWdlQ29tbXVuaXR5LmlzQ29tbXVuaXR5U2hvdyA9IGZhbHNlOyAgICAvLyAg56S+576k5piv5ZCm5LiK5LiL5p62XHJcblxyXG4gICAgdmFyIGZpbGVTaXplLFxyXG4gICAgICAgIHJlc0F1ZGlvMUxlbmdoO1xyXG5cclxuICAgIC8v6I635Y+W5Zyw5Z2A5qCP5Y+C5pWwXHJcbiAgICBmdW5jdGlvbiBHZXRRdWVyeVN0cmluZyhuYW1lKSB7XHJcbiAgICAgICAgdmFyIHJlZyA9IG5ldyBSZWdFeHAoXCIoXnwmKVwiICsgbmFtZSArIFwiPShbXiZdKikoJnwkKVwiKTtcclxuICAgICAgICB2YXIgciA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2guc3Vic3RyKDEpLm1hdGNoKHJlZyk7XHJcbiAgICAgICAgaWYgKHIgIT0gbnVsbCkgcmV0dXJuIHVuZXNjYXBlKHJbMl0pO1xyXG4gICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIGdldE9iamVjdFVSTChmaWxlKSB7XHJcbiAgICAgICAgdmFyIHVybCA9IG51bGw7XHJcbiAgICAgICAgaWYgKHdpbmRvdy5jcmVhdGVPYmplY3RVUkwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB1cmwgPSB3aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdy53ZWJraXRVUkwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIHVybCA9IHdpbmRvdy53ZWJraXRVUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gdXJsO1xyXG4gICAgfVxyXG5cclxuICAgIGZ1bmN0aW9uIHJlbW92ZU9iamVjdFVSTCh1cmwpIHsvL+mHiuaUvui1hOa6kFVSTFxyXG4gICAgICAgIGlmICh3aW5kb3cucmV2b2tlT2JqZWN0VVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB3aW5kb3cucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICh3aW5kb3cuVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICB3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93LndlYmtpdFVSTCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgd2luZG93LndlYmtpdFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8v5qOA5p+l56S+576k5o+Q5Lqk6KGo5Y2VXHJcbiAgICBmdW5jdGlvbiBjaGVja0NvbW11bml0eUZvcm0oaW5mbywgc2luZ2xlU2FsZSwgcmVsZXZhbmNlLHByb2R1Y3RfaWQpIHtcclxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnRpdGxlKSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnpL7nvqTlkI3np7DkuI3og73kuLrnqbpcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluZm8udGl0bGUubGVuZ3RoID4gMTUpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi56S+576k5ZCN56ew5LiN6IO96LaF6L+HMTXkuKrlrZfnrKZcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uZGVzY3JpYmUpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuekvue+pOeugOS7i+S4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5mby5kZXNjcmliZS5sZW5ndGggPiA0MCkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnpL7nvqTnroDku4vkuI3og73otoXov4c0MOS4quWtl+esplwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5pbWdfdXJsKSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fkuIrkvKDnpL7nvqTlsIHpnaLvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghc2luZ2xlU2FsZSAmJiAhcmVsZXZhbmNlKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+mAieaLqeiHs+WwkeS4gOenjeWKoOWFpeW9ouW8j1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNpbmdsZVNhbGUgJiYgJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnBpZWNlX3ByaWNlKSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7floavlhaXljZXljZbku7fmoLzvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHNpbmdsZVNhbGUgJiYgaW5mby5waWVjZV9wcmljZSA+IGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICogMTAwKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS7t+agvOS4jeiDveWkp+S6jiBcIiArIGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICsgXCIg5YWDXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocmVsZXZhbmNlICYmIHByb2R1Y3RfaWQubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+36YCJ5oup5oKo6KaB5YWz6IGU55qE5LiT5qCP5oiW5Lya5ZGY77yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvL+i1hOa6kOS4iuS8oOWHveaVsCjlj4LmlbDvvJpyZXNUeXBlOui1hOa6kOexu+WeiyxyZXNUeXBlQ2xhc3M66LWE5rqQ57G75Z6L5Lit57uG5YiG55qE56eN57G7LHJlc0xpbWl0U2l6ZTrotYTmupDpmZDliLblpKflsI8pXHJcbiAgICBmdW5jdGlvbiByZXNVcGxvYWQoZmlsZXMsIHJlc1R5cGUsIHJlc1R5cGVDbGFzcywgcmVzTGltaXRTaXplKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coZmlsZXMpO1xyXG4gICAgICAgIGlmIChmaWxlcyAmJiBmaWxlcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHZhciBmaWxlID0gZmlsZXNbMF07XHJcbiAgICAgICAgICAgIHZhciByZXNvdXJjZUxvY2FsVXJsID0gZ2V0T2JqZWN0VVJMKGZpbGUpO1xyXG4gICAgICAgICAgICBmaWxlU2l6ZSA9IChmaWxlLnNpemUgLyAoMTAyNCAqIDEwMjQpKS50b0ZpeGVkKDIpO1xyXG4gICAgICAgICAgICByZXNBdWRpbzFMZW5naCA9IGZpbGUuZHVyYXRpb247XHJcbiAgICAgICAgICAgIC8vIOmZkOWItui1hOa6kOWcqCpNQuWGhVxyXG4gICAgICAgICAgICBpZiAoJHVwbG9hZEZpbGUuY2hlY2tGaWxlU2l6ZShmaWxlLCByZXNMaW1pdFNpemUpKSB7XHJcbiAgICAgICAgICAgICAgICAkdXBsb2FkRmlsZS51cGxvYWRSZXMoZmlsZSwgcmVzVHlwZSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOS4iuS8oOaIkOWKn+Wbnuiwg1xyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5LiK5Lyg5oiQ5Yqf77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNVcmwgPSBkYXRhLmRhdGEuYWNjZXNzX3VybDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNpbWdVcmxcIikudmFsKHJlc1VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIOWmguaenOaYr+WbvueJh+i1hOa6kO+8jOWImeWxleekuuWbvueJh+mihOiniFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzVHlwZSA9PSAnaW1hZ2UnKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGltZ05hbWUgPSBmaWxlLm5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGltZ05hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGV4dCxpZHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZHggPSBpbWdOYW1lLmxhc3RJbmRleE9mKFwiLlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpZHggIT0gLTEpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dCA9IGltZ05hbWUuc3Vic3RyKGlkeCsxKS50b1VwcGVyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dCA9IGV4dC50b0xvd2VyQ2FzZSggKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCLlkI7nvIA9XCIrZXh0K1wi5L2N572uPVwiK2lkeCtcIui3r+W+hD1cIityZXNvdXJjZUxvY2FsVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXh0ICE9ICdqcGcnICYmIGV4dCAhPSAncG5nJyAmJiBleHQgIT0gJ2pwZWcnICYmIGV4dCAhPSAnZ2lmJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vZG9jdW1lbnQuYWxsLnN1Ym1pdF91cGxvYWQuZGlzYWJsZWQ9dHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuivt+S4iuS8oOWbvueJh+exu+Wei+eahOaWh+S7tuWTpn5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vYWxlcnQoXCIyLuWPquiDveS4iuS8oC5qcGcgIC5wbmcgIC5qcGVnICAuZ2lm57G75Z6L55qE5paH5Lu2IVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuYWxsLnN1Ym1pdF91cGxvYWQuZGlzYWJsZWQ9dHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi6K+35LiK5Lyg5Zu+54mH57G75Z6L55qE5paH5Lu25ZOmflwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL2FsZXJ0KFwi5Y+q6IO95LiK5LygLmpwZyAgLnBuZyAgLmpwZWcgIC5naWbnsbvlnovnmoTmlofku7YhXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvL+ebtOaOpeWKoOi9veacrOWcsOWbvueJh+i/m+ihjOmihOiniFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJChcIiNyZUJhY2tJbWdcIilcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAubG9hZChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbW92ZU9iamVjdFVSTChyZXNvdXJjZUxvY2FsVXJsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hdHRyKFwic3JjXCIsIHJlc291cmNlTG9jYWxVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g5LiK5Lyg5aSx6LSl5Zue6LCDXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIuS4iuS8oOWksei0pSEhIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOWksei0pe+8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOi1hOa6kOmZkOWItuWcqFwiICsgcmVzTGltaXRTaXplICsgXCJNQuWGhe+8gVwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIudXBMb2FkXCIgKyByZXNUeXBlQ2xhc3MpLnZhbChcIlwiKTtcclxuXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGZpbGVzKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBtYW5hZ2VDb21tdW5pdHkuaW5pdCA9IGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgLy8g54K55Ye75oyJ6ZKu5LiK5Lyg5Zu+54mHXHJcbiAgICAgICAgJChcIiN1cGxvYWRJbWFnZVwiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHJlc1VwbG9hZCh0aGlzLmZpbGVzLCBcImltYWdlXCIsIFwicmVCYWNrSW1nXCIsIDUpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+WNleWNluiuvue9rlxyXG4gICAgICAgICQoXCIucmVzQWRkU2VjdGlvbkNcIikub24oXCJjbGlja1wiLCBcIi5zZXRGZWVcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJChcIiNzZXRGZWVcIikuaXMoJzpjaGVja2VkJykpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjc2V0UHJpY2VcIikuYXR0cihcInJlYWRvbmx5XCIsIFwicmVhZG9ubHlcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3NldFByaWNlXCIpLmF0dHIoXCJkaXNhYmxlZFwiLCBcImRpc2FibGVkXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgJChcIiNzZXRQcmljZVwiKS5yZW1vdmVBdHRyKFwicmVhZG9ubHlcIik7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3NldFByaWNlXCIpLnJlbW92ZUF0dHIoXCJkaXNhYmxlZFwiKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyAg5YWz6IGU6YOo5YiG55qE5byA5ZCv5ZKM5YWz6ZetXHJcbiAgICAgICAgJChcIi5yZXNBZGRTZWN0aW9uQ1wiKS5vbihcImNsaWNrXCIsIFwiLnNldFJlbGV2YW5jZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGlmICgkKFwiI3NldFJlbGV2YW5jZVwiKS5pcygnOmNoZWNrZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJChcIiNyZWxldmFuY2VDb250ZW50XCIpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICQoXCIjcmVsZXZhbmNlQ29udGVudFwiKS5mYWRlSW4oMjAwKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+WFs+iBlOWGheWuueWIh+aNolxyXG4gICAgICAgICQoXCIjcGFja2FnZVR5cGVcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoJChcIiNwYWNrYWdlXCIpLmlzKCc6c2VsZWN0ZWQnKSkge1xyXG4gICAgICAgICAgICAgICAgJChcIiNtZW1iZXJTZWxcIikudmFsKFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgpLnNob3coKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgpLm5leHQoKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAkKFwiI3BhY2thZ2VTZWxcIikudmFsKFwibm9uZVwiKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgpLmhpZGUoKTtcclxuICAgICAgICAgICAgICAgICQodGhpcykubmV4dCgpLm5leHQoKS5zaG93KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/mt7vliqDlhbPogZRcclxuICAgICAgICAkKFwiI25ld1JlbGV2YW5jZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQoXCIjbmV3UmVsZXZhbmNlXCIpLmhpZGUoKTtcclxuICAgICAgICAgICAgJChcIi5zZWxlY3RSZWxldmFuY2VcIikuc2hvdygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+WPlua2iOmAieS4reeahOWFs+iBlFxyXG4gICAgICAgICQoXCIjcmVtb3ZlUmVsZXZhbmNlXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJChcIiNuZXdSZWxldmFuY2VcIikuc2hvdygpO1xyXG4gICAgICAgICAgICAkKFwiLnNlbGVjdFJlbGV2YW5jZVwiKS5oaWRlKCk7XHJcblxyXG4gICAgICAgICAgICAkKFwiI3BhY2thZ2VUeXBlXCIpLnZhbChcInBhY2thZ2VcIik7XHJcbiAgICAgICAgICAgICQoXCIjcGFja2FnZVNlbFwiKS52YWwoXCJub25lXCIpO1xyXG4gICAgICAgICAgICAkKFwiI21lbWJlclNlbFwiKS52YWwoXCJub25lXCIpO1xyXG4gICAgICAgICAgICAkKFwiI21lbWJlclNlbFwiKS5oaWRlKClcclxuICAgICAgICAgICAgJChcIiNwYWNrYWdlU2VsXCIpLnNob3coKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy/kv53lrZjpgInkuK3nmoTlhbPogZRcclxuICAgICAgICAkKFwiI2FkZFJlbGV2YW5jZVwiKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHZhciBwcm9kdWN0SWQgPSAkKFwiLnBhY2thZ2VTZWxlY3Q6dmlzaWJsZSBvcHRpb246c2VsZWN0ZWRcIikuZGF0YShcInByb2R1Y3RfaWRcIik7XHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8ICQoXCIub25lUmVsZXZhbmNlXCIpLmxlbmd0aDsgaSsrKSB7ICAgICAgIC8v5Yik5a6a5piv5ZCm6YeN5aSN5YWz6IGUXHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGN1cnJlbnRJZCA9ICQoXCIub25lUmVsZXZhbmNlXCIpLmVxKGkpLmRhdGEoJ3Byb2R1Y3RfaWQnKTtcclxuICAgICAgICAgICAgICAgIGlmIChwcm9kdWN0SWQgPT0gY3VycmVudElkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfor7fli7/ph43lpI3pgInmi6knKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCQoXCIucGFja2FnZVNlbGVjdDp2aXNpYmxlXCIpLnZhbCgpID09ICdub25lJykge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfor7fpgInmi6nmgqjlvZPliY3opoHlhbPogZTnmoTkvJrlkZjmiJbkuJPmoI8nKTtcclxuXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIEZpcnN0U2VsZWN0ZWQgPSAkKFwiI3BhY2thZ2VUeXBlIG9wdGlvbjpzZWxlY3RlZFwiKS50ZXh0KCksXHJcbiAgICAgICAgICAgICAgICAgICAgU2Vjb25kRGV0YWlsID0gJChcIi5wYWNrYWdlU2VsZWN0OnZpc2libGUgb3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKSxcclxuICAgICAgICAgICAgICAgICAgICBodG1sU3RyaW5nID1cclxuICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIm9uZVJlbGV2YW5jZSBjbGVhcmZpeFwiIGRhdGEtcHJvZHVjdF9pZD1cIicgKyBwcm9kdWN0SWQgKyAnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicGFja2FnZUNsYXNzXCI+JyArIEZpcnN0U2VsZWN0ZWQgKyAnPC9kaXY+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICc8ZGl2IGNsYXNzPVwicGFja2FnZU5hbWVcIiB0aXRsZT1cIicgKyBTZWNvbmREZXRhaWwgKyAnXCI+JyArIFNlY29uZERldGFpbCArICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJzxidXR0b24gdHlwZT1cImNhbmNlbFwiIGNsYXNzPVwieGVCdG5EZWZhdWx0IGJ0bk1pZCBjYW5jZWxSZWxldmFuY2VcIj7lj5bmtojlhbPogZQ8L2J1dHRvbj4nICtcclxuICAgICAgICAgICAgICAgICAgICAnPC9kaXY+JztcclxuXHJcbiAgICAgICAgICAgICAgICAkKFwiI3JlbGV2YW5jZUNvbnRlbnRcIikuYXBwZW5kKGh0bWxTdHJpbmcpO1xyXG5cclxuICAgICAgICAgICAgICAgICQoXCIjcmVtb3ZlUmVsZXZhbmNlXCIpLmNsaWNrKCk7XHJcblxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuXHJcbiAgICAgICAgLy/lj5bmtojlt7LlhbPogZTnmoTkuJPmoI/miJbkvJrlkZhcclxuICAgICAgICAkKFwiLnNlY29uZENoZWNrYm94XCIpLm9uKFwiY2xpY2tcIiwgXCIuY2FuY2VsUmVsZXZhbmNlXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgJCh0aGlzKS5wYXJlbnQoKS5yZW1vdmUoKTtcclxuICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgIC8v5o+Q5Lqk6KGo5Y2VXHJcbiAgICAgICAgJChcIi5iYXNlX21haW5Db250ZW50XCIpLm9uKFwiY2xpY2tcIiwgJyNzYXZlQnRuJywgZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgaWYgKHN1Ym1pdExpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuI3og73ph43lpI3mj5DkuqRcIik7XHJcblxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG5cclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgcGFnZVR5cGUgPSAkLnRyaW0oJChcIiNwYWdlVHlwZVwiKS52YWwoKSksICAgIC8vICDojrflj5bpobXpnaLnsbvlnotcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZSA9ICQudHJpbSgkKFwiI3RpdGxlXCIpLnZhbCgpKSwgICAgICAgICAgLy8gIOiOt+WPluihqOWNleaVsOaNri8vICDojrflj5bnpL7nvqTlkI3np7BcclxuICAgICAgICAgICAgICAgICAgICBkZXNjcmliZSA9ICQudHJpbSgkKFwiI2ludHJvXCIpLnZhbCgpKSwgICAgICAgLy8gIOiOt+WPluekvue+pOeugOS7i1xyXG4gICAgICAgICAgICAgICAgICAgIGltZ191cmwgPSAkLnRyaW0oJChcIiNpbWdVcmxcIikudmFsKCkpLCAgICAgICAvLyAg6I635Y+W5bCB6Z2i5Zu+54mHXHJcbiAgICAgICAgICAgICAgICAgICAgc2luZ2xlU2FsZSA9ICQoXCIjc2V0RmVlXCIpLmlzKCc6Y2hlY2tlZCcpLCAgIC8vICDojrflj5bljZXljZZjaGVja+eKtuaAgVxyXG4gICAgICAgICAgICAgICAgICAgIHBpZWNlX3ByaWNlID0gJC50cmltKCQoXCIjc2V0UHJpY2VcIikudmFsKCkpICogMTAwOyAgIC8vICDojrflj5bljZXljZbku7fmoLxcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXNpbmdsZVNhbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBwaWVjZV9wcmljZSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlbGV2YW5jZSA9ICQoXCIjc2V0UmVsZXZhbmNlXCIpLmlzKCc6Y2hlY2tlZCcpOyAgICAgIC8vICDojrflj5blhbPogZRjaGVja+eKtuaAgVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwcm9kdWN0X2lkID0gW107ICAgIC8vICDojrflj5blhbPogZRpZFxyXG4gICAgICAgICAgICAgICAgaWYgKHJlbGV2YW5jZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBqID0gMDsgaSA8ICQoXCIub25lUmVsZXZhbmNlXCIpLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8v5YWz6IGU5LiT5qCP5ZKM5Lya5ZGY55qEaWTlgLxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGlkQXJyYXkgPSB7fTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWRBcnJheVtpXSA9ICQoXCIub25lUmVsZXZhbmNlXCIpLmVxKGkpLmRhdGEoJ3Byb2R1Y3RfaWQnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGlkQXJyYXlbaV0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb2R1Y3RfaWRbal0gPSBpZEFycmF5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaisrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X2lkID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyAg6I635Y+W56S+576k5piv5ZCm5LiK5p62XHJcbiAgICAgICAgICAgICAgICB2YXIgaXNDb21tdW5pdHlTaG93ID0gJChcImlucHV0W25hbWU9J2lzQ29tbXVuaXR5U2hvdyddOmNoZWNrZWRcIikudmFsKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gIOekvue+pOS/oeaBr1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwYWdlVHlwZSA9PSAwKSB7ICAgIC8vICDmlrDlu7rnpL7nvqRcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRlc2NyaWJlOiBkZXNjcmliZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaW1nX3VybDogaW1nX3VybCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGllY2VfcHJpY2U6IHBpZWNlX3ByaWNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9kdWN0X2lkOiBKU09OLnN0cmluZ2lmeShwcm9kdWN0X2lkKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29tbXVuaXR5X3N0YXRlOiBpc0NvbW11bml0eVNob3cgICAgICAgIC8vMCAtIOS4iuaetiAgMS0g5LiL5p62XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaWQgPSBHZXRRdWVyeVN0cmluZyhcImlkXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkZXNjcmliZTogZGVzY3JpYmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGltZ191cmw6IGltZ191cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBpZWNlX3ByaWNlOiBwaWVjZV9wcmljZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZHVjdF9pZDogSlNPTi5zdHJpbmdpZnkocHJvZHVjdF9pZCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbW11bml0eV9zdGF0ZTogaXNDb21tdW5pdHlTaG93XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjaGVja0NvbW11bml0eUZvcm0ocGFyYW1zLCBzaW5nbGVTYWxlLCByZWxldmFuY2UsIHByb2R1Y3RfaWQpKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHN1Ym1pdExpbWl0ID0gdHJ1ZTsgICAgIC8vIOihqOWNleaPkOS6pOmZkOWItuagh+iusFxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAocGFnZVR5cGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgYWpheFVybCA9ICd1cGxvYWRDb21tdW5pdHknO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhamF4VXJsID0gJ3VwZGF0ZUNvbW11bml0eSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFqYXhVcmwpO1xyXG4gICAgICAgICAgICAgICAgICAgICQuYWpheChhamF4VXJsLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogcGFyYW1zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGRhdGEuY29kZSkgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocGFnZVR5cGUgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoZGF0YS5mcmVlID09IDEpe1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgdGV4dCA9IFwi5bCG5YWN6LS556S+576k5L+u5pS55Li65LuY6LS556S+576k77yM5bey5Yqg5YWl55qE55So5oi36ZyA6KaB6YeN5paw5LuY6LS56L+b5YWl77yM5oiW5oKo5Y+v5Lul55Sf5oiQ6YKA6K+356CB6YKA6K+355So5oi36L+b5YWl44CCXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydCh0ZXh0LCdpbmZvJyx7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9rdGV4dDogJ+aIkeefpemBk+S6hicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ0bjogMixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25PazogZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj0nL3NtYWxsQ29tbXVuaXR5L2NvbW11bml0eUxpc3QnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsb3NlOmZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj0nL3NtYWxsQ29tbXVuaXR5L2NvbW11bml0eUxpc3QnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5L+d5a2Y5oiQ5YqfXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuWIm+W7uuaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5pc19uZXcgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvc21hbGxDb21tdW5pdHkvY29tbXVuaXR5TGlzdD9pc19uZXc9JyArIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL3NtYWxsQ29tbXVuaXR5L2NvbW11bml0eUxpc3QnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VibWl0TGltaXQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Ym1pdExpbWl0ID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcblxyXG4gICAgcmV0dXJuIG1hbmFnZUNvbW11bml0eTtcclxufSgpOyJdfQ==
