$(document).ready(function(){$goodsList.init()});var $goodsList=function(){var e=$("#_mainContentPart"),o={},i="edit",t=new Array;var s={goodsCount:$("#addDistributeGoods").data("count"),init:function(){e.on("click","#addDistributeGoods",function(){var e=$("._switchOperateArea").data("switch_state");if(!e){$chosenShop.showOpenChosenTip();return false}if(s.goodsCount>=20){baseUtils.show.redTip("添加的推广商品数量已达到20个，不能再添加");return false}baseUtils.showWindow("_addDistributeGoodsWindow");s.getDistributeGoodsContent()});$("#_addDistributeGoodsWindow").on("click","._HeaderIcon, #_cancelAddDistributeGoods",function(){baseUtils.hideWindow("_addDistributeGoodsWindow")});$("#_addDistributeGoodsWindow").on("click","._addGoodsWindowTableItem",function(){var e=$(this).children("._selectSingleDistributeGoods"),o=e.prop("checked");if(!o){var i=s.goodsCount+$("#_addGoodsWindowTableBody").find("._selectSingleDistributeGoods:checked").length;if(i>=20){baseUtils.show.redTip("添加的推广商品数量已达到20个，不能再添加");return false}}e.prop("checked",!o)});$("#_addDistributeGoodsWindow").on("click","._selectSingleDistributeGoods",function(e){e.stopPropagation();var o=$(this).prop("checked");if(o){var i=s.goodsCount+$("#_addGoodsWindowTableBody").find("._selectSingleDistributeGoods:checked").length;if(i>20){baseUtils.show.redTip("添加的推广商品数量已达到20个，不能再添加");return false}}});$("#_addDistributeGoodsWindow").on("click","#_searchDistributeGoods",function(){var e=$.trim($("#_searchDistributeGoodsInput").val());s.getDistributeGoodsContent(e)});$("#_searchDistributeGoodsInput").on("keypress",function(e){if(e.keyCode==13){$("#_searchDistributeGoods").click()}});$("#_confirmAddDistributeGoods").click(function(){$("#_addGoodsWindowTableBody").find("._selectSingleDistributeGoods:checked").each(function(){var e={id:$(this).data("resource_id"),type:$(this).data("resource_type")};t.push(e)});if(s.goodsCount+t.length>20){baseUtils.show.redTip("添加的推广商品数量不能超过20个");return false}baseUtils.showLoading("addDistributeGoodsLoading");$.ajax("/chosen/add_resource_chosen",{type:"POST",dataType:"json",data:{params:t},success:function(e){baseUtils.hideLoading("addDistributeGoodsLoading");if(e.code==0){baseUtils.hideWindow("_addDistributeGoodsWindow");baseUtils.show.blueTip("保存成功");if(s.goodsCount==0){$.alert("您最多可添加20个商品，且商品添加后不支持删除，请谨慎选择。<br>您可以继续添加商品和设置商品相关属性","info",{btn:2,onOk:function(){$chosenShop.getNewPage("goods")}})}else{$chosenShop.getNewPage("goods")}}else{baseUtils.show.redTip("操作失败，请稍后再试")}},error:function(e,o,i){baseUtils.hideLoading("addDistributeGoodsLoading");console.log(i);alert("服务器出小差了，请稍后再试！")}})});e.on("click",".setGradient",function(){var e=$(this).parents(".tableBodyItem").data("resource_id"),t=$(this).parents(".tableBodyItem").data("resource_type"),s=$(this).data("type");o={resId:e,resType:t};if(s=="set"){$("#_setGoodsGradientWindow ._windowEditableValue").val("");i="set"}else if(s=="edit"){i="edit";var d=$(this).data("distribute_data");$("#_windowValue1").val(d.end1);$("#_windowValue2").val(d.start2);$("#_windowValue3").val(d.end2);$("#_windowValue4").val(d.start3);$("#_windowRatio1").val(d.percent1);$("#_windowRatio2").val(d.percent2);$("#_windowRatio3").val(d.percent3)}baseUtils.showWindow("_setGoodsGradientWindow")});$("#_setGoodsGradientWindow").on("click","._HeaderIcon, #_windowCancelBtn",function(){baseUtils.hideWindow("_setGoodsGradientWindow")});$("#_setGoodsGradientWindow").on("keyup","._windowEditableValue",function(){var e=$(this).attr("id");if(e=="_windowValue1"){$("#_windowValue2").val(+$.trim($("#_windowValue1").val())+1)}else if(e=="_windowValue3"){$("#_windowValue4").val(+$.trim($("#_windowValue3").val())+1)}});$("#_setGoodsGradientWindow").on("click","#_windowConfirmBtn",function(){var e=parseInt($("#_windowValue1").val()),t=parseInt($("#_windowValue2").val()),s=parseInt($("#_windowValue3").val()),d=parseInt($("#_windowValue4").val()),a=parseInt($("#_windowRatio1").val()),n=parseInt($("#_windowRatio2").val()),r=parseInt($("#_windowRatio3").val());var l,c;$.ajax("/chosen/get_resource_distribute_info/"+o.resType+"/"+o.resId,{type:"GET",dataType:"json",async:false,data:{},success:function(e){console.log(e);if(e.code==0){l=e.data.has_distribute;c=e.data.first_distribute_percent}else{console.error("获取推广员信息失败")}},error:function(e,o,i){console.log(i);baseUtils.show.redTip("服务器出小差了，请稍后再试！")}});if(l&&a<=c){baseUtils.show.redTip("第一区间分成比例要大于该商品的推广员分成比例噢");return false}if(!e||!t||!s||!d||!a||!n||!r){baseUtils.show.redTip("数据没有填写完整哦");return false}if(e+1!=t||s+1!=d||t>=s||e<=1){baseUtils.show.redTip("区间填写有误，请检查后重试");return false}if(a<=0||a>n||n>r){baseUtils.show.redTip("分成比例填写有误，请参考示例");return false}if(a>99||n>99||r>99){baseUtils.show.redTip("分成比例不能超过99%");return false}var u={data1:{end_order_num:e,distribute_percent:a},data2:{start_order_num:t,end_order_num:s,distribute_percent:n},data3:{start_order_num:d,distribute_percent:r},resource_id:o.resId,resource_type:o.resType,edit:i=="edit"?"edit":"set"};$.ajax("/chosen/set_xiaoe_distribute",{type:"POST",dataType:"json",data:u,success:function(e){if(e.code==0){baseUtils.show.blueTip("梯度设置成功");baseUtils.hideWindow("_setGoodsGradientWindow");$chosenShop.getNewPage("goods")}else if(e.code==4){baseUtils.show.blueTip("梯度设置失败，最低分成比例不能低于推广员的分销比例"+e.data.distribute_percent+"%")}else if(e.code==8){baseUtils.show.blueTip("梯度设置失败，请您刷新页面重试")}else{baseUtils.show.redTip("梯度设置失败，请稍后再试")}},error:function(e,o,i){console.log(i);baseUtils.show.redTip("服务器出小差了，请稍后再试！")}})});e.on("change",".selectChosenGoodsClass",function(){var e=$(this),o=e.children("option:selected"),i=o.val(),t=o.text();if(i==-1){console.log(i+" - "+t);return false}var s=e.parents(".tableBodyItem"),d=s.data("resource_id"),a=s.data("resource_type"),n=s.data("old_class_id")||-1;$.ajax("/chosen/set_classify",{type:"POST",dataType:"json",data:{class_id:i,resource_id:d,resource_type:a},success:function(o){if(o.code==0){baseUtils.show.blueTip("设置分类成功。")}else{baseUtils.show.redTip("设置分类失败。");e.val(n)}},error:function(e,o,i){console.log(i);alert("服务器出小差了，请稍后再试！")}})});e.find(".qrCodeImage").each(function(){var e=$(this).data("url"),o=$(this).attr("id");createQrCode(o,e,160,160)})},getDistributeGoodsContent:function(e){baseUtils.showLoading("addDistributeGoodsLoading");$.ajax("/chosen/search_resource",{type:"POST",dataType:"json",data:{search:e||""},success:function(e){var o="";$.each(e,function(e,i){o+='<div class="_addGoodsWindowTableItem clearfix">'+'<input type="checkbox" class="_selectSingleDistributeGoods" '+'data-resource_id="'+i.id+'" data-resource_type="'+i.type+'">'+'<div class="_singleDistributeGoodsCover">'+'<img src="'+i.img_url_compressed+'">'+"</div>"+'<div class="_singleDistributeGoodsTitle" title="'+i.name+'">'+i.name+"</div>"+'<div class="_singleDistributeGoodsTime">'+i.created_at+"</div>"+"</div>"});if(o.length==0){o="<div class='contentNoData'>暂无数据</div>"}$("#_addGoodsWindowTableBody").html(o);$("#_addGoodsWindowTableBody").scrollTop(0);baseUtils.hideLoading("addDistributeGoodsLoading")},error:function(e,o,i){console.log(i);alert("服务器出小差了，请稍后再试！")}})},checkInputValue:function(e){var o=$(e).val();o=o.replace(/[^\d]/g,"");o=o.replace(/^0[\d]+/g,"0");$(e).val(o)}};return s}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImdvb2RzTGlzdC5qcyJdLCJuYW1lcyI6WyIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsIiRnb29kc0xpc3QiLCJpbml0IiwiJGhvbWVQYWdlIiwic2V0R3JhZGllbnRJbmZvIiwic2V0R3JhZGllbnRXaW5kb3dTdGF0ZSIsImFkZFJlc291cmNlUGFyYW1zIiwiQXJyYXkiLCJnb29kc0NvdW50IiwiZGF0YSIsIm9uIiwic3dpdGNoU3RhdGUiLCIkY2hvc2VuU2hvcCIsInNob3dPcGVuQ2hvc2VuVGlwIiwiYmFzZVV0aWxzIiwic2hvdyIsInJlZFRpcCIsInNob3dXaW5kb3ciLCJnZXREaXN0cmlidXRlR29vZHNDb250ZW50IiwiaGlkZVdpbmRvdyIsIiR0YXJnZXQiLCJ0aGlzIiwiY2hpbGRyZW4iLCJjdXJyZW50U3RhdGUiLCJwcm9wIiwiYWxsQ291bnQiLCJmaW5kIiwibGVuZ3RoIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsInNlYXJjaENvbnRlbnQiLCJ0cmltIiwidmFsIiwia2V5Q29kZSIsImNsaWNrIiwiZWFjaCIsIm9iaiIsImlkIiwidHlwZSIsInB1c2giLCJzaG93TG9hZGluZyIsImFqYXgiLCJkYXRhVHlwZSIsInBhcmFtcyIsInN1Y2Nlc3MiLCJyZXN1bHQiLCJoaWRlTG9hZGluZyIsImNvZGUiLCJibHVlVGlwIiwiYWxlcnQiLCJidG4iLCJvbk9rIiwiZ2V0TmV3UGFnZSIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInJlc0lkIiwicGFyZW50cyIsInJlc1R5cGUiLCJkaXN0cmlidXRlRGF0YSIsImVuZDEiLCJzdGFydDIiLCJlbmQyIiwic3RhcnQzIiwicGVyY2VudDEiLCJwZXJjZW50MiIsInBlcmNlbnQzIiwiYXR0ciIsInZhbHVlMSIsInBhcnNlSW50IiwidmFsdWUyIiwidmFsdWUzIiwidmFsdWU0IiwicmF0aW8xIiwicmF0aW8yIiwicmF0aW8zIiwiaXNEaXN0cmlidXRlIiwiZGlzdHJpYnV0ZV9wZXJjZW50IiwiYXN5bmMiLCJoYXNfZGlzdHJpYnV0ZSIsImZpcnN0X2Rpc3RyaWJ1dGVfcGVyY2VudCIsImRhdGExIiwiZW5kX29yZGVyX251bSIsImRhdGEyIiwic3RhcnRfb3JkZXJfbnVtIiwiZGF0YTMiLCJyZXNvdXJjZV9pZCIsInJlc291cmNlX3R5cGUiLCJlZGl0IiwiJHNlbGVjdCIsIiRvcHRpb24iLCJjbGFzc0lkIiwiY2xhc3NOYW1lIiwidGV4dCIsIiRkZWxlZ2F0ZSIsIm9sZENsYXNzSWQiLCJjbGFzc19pZCIsInFyQ29kZVVybCIsImNyZWF0ZVFyQ29kZSIsInNlYXJjaCIsImh0bWxTdHIiLCJrIiwidiIsImltZ191cmxfY29tcHJlc3NlZCIsIm5hbWUiLCJjcmVhdGVkX2F0IiwiaHRtbCIsInNjcm9sbFRvcCIsImNoZWNrSW5wdXRWYWx1ZSIsImN1cnJlbnREb20iLCJ2YWx1ZSIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQUNBQSxFQUFFQyxVQUFVQyxNQUFNLFdBQ2RDLFdBQVdDLFFBR2YsSUFBSUQsWUFBYSxXQUViLEdBQUlFLEdBQVlMLEVBQUUscUJBQ2RNLEtBQ0FDLEVBQXlCLE9BQ3pCQyxFQUFvQixHQUFJQyxNQUU1QixJQUFJTixJQUVBTyxXQUFZVixFQUFFLHVCQUF1QlcsS0FBSyxTQUUxQ1AsS0FBTSxXQUtGQyxFQUFVTyxHQUFHLFFBQVMsc0JBQXVCLFdBRXpDLEdBQUlDLEdBQWNiLEVBQUUsdUJBQXVCVyxLQUFLLGVBQ2hELEtBQUtFLEVBQWEsQ0FDZEMsWUFBWUMsbUJBQ1osT0FBTyxPQUVYLEdBQUlaLEVBQVdPLFlBQWMsR0FBSSxDQUM3Qk0sVUFBVUMsS0FBS0MsT0FBTyx3QkFDdEIsT0FBTyxPQUVYRixVQUFVRyxXQUFXLDRCQUNyQmhCLEdBQVdpQiw2QkFHZnBCLEdBQUUsOEJBQThCWSxHQUFHLFFBQVMsMkNBQTRDLFdBQ3BGSSxVQUFVSyxXQUFXLDhCQUV6QnJCLEdBQUUsOEJBQThCWSxHQUFHLFFBQVMsNEJBQTZCLFdBQ3JFLEdBQUlVLEdBQVV0QixFQUFFdUIs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QUV1QixNQUFNWixLQUFLLE9BQ3pCNEIsRUFBS3ZDLEVBQUV1QixNQUFNaUQsS0FBSyxLQUV0QitCLGNBQWFoRSxFQUFJK0QsRUFBVyxJQUFLLFFBTXpDbEYsMEJBQTJCLFNBQVVZLEdBQ2pDaEIsVUFBVTBCLFlBQVksNEJBQ3RCMUMsR0FBRTJDLEtBQUssMkJBQ0hILEtBQU0sT0FDTkksU0FBVSxPQUNWakMsTUFDSTZGLE9BQVF4RSxHQUFpQixJQUU3QmMsUUFBUyxTQUFVQyxHQUVmLEdBQUkwRCxHQUFVLEVBQ2R6RyxHQUFFcUMsS0FBS1UsRUFBUSxTQUFVMkQsRUFBR0MsR0FDeEJGLEdBQ0ksa0RBQ0ksK0RBQ0kscUJBQXFCRSxFQUFFcEUsR0FBRyx5QkFBeUJvRSxFQUFFbkUsS0FBSyxLQUM5RCw0Q0FDSSxhQUFlbUUsRUFBRUMsbUJBQXFCLEtBQzFDLFNBQ0EsbURBQW1ERCxFQUFFRSxLQUFLLEtBQUtGLEVBQUVFLEtBQUssU0FDdEUsMkNBQTJDRixFQUFFRyxXQUFXLFNBQzVELFVBRVIsSUFBSUwsRUFBUTVFLFFBQVUsRUFBRyxDQUNyQjRFLEVBQVUsd0NBRWR6RyxFQUFFLDZCQUE2QitHLEtBQUtOLEVBQ3BDekcsR0FBRSw2QkFBNkJnSCxVQUFVLEVBQ3pDaEcsV0FBVWdDLFlBQVksOEJBRTFCTyxNQUFPLFNBQVVDLEVBQUtDLEVBQVFDLEdBQzFCQyxRQUFRQyxJQUFJRixFQUNaUCxPQUFNLHNCQUtsQjhELGdCQUFpQixTQUFVQyxHQUV2QixHQUFJQyxHQUFRbkgsRUFBRWtILEdBQVloRixLQUcxQmlGLEdBQVFBLEVBQU1DLFFBQVEsU0FBVSxHQUVoQ0QsR0FBUUEsRUFBTUMsUUFBUSxXQUFZLElBRWxDcEgsR0FBRWtILEdBQVloRixJQUFJaUYsSUFRMUIsT0FBT2hIIiwiZmlsZSI6Imdvb2RzTGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XHJcbiAgICAkZ29vZHNMaXN0LmluaXQoKTtcclxufSk7XHJcblxyXG52YXIgJGdvb2RzTGlzdCA9IChmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgdmFyICRob21lUGFnZSA9ICQoXCIjX21haW5Db250ZW50UGFydFwiKSxcclxuICAgICAgICBzZXRHcmFkaWVudEluZm8gPSB7fSxcclxuICAgICAgICBzZXRHcmFkaWVudFdpbmRvd1N0YXRlID0gXCJlZGl0XCIsICAgICAgICAgLy9cImVkaXRcIiwgXCJzZXRcIlxyXG4gICAgICAgIGFkZFJlc291cmNlUGFyYW1zID0gbmV3IEFycmF5OyAgICAgICAgIC8v5re75Yqg57K+6YCJ5ZWG5ZOB55qE5o6l5Y+j5Y+C5pWwXHJcblxyXG4gICAgdmFyICRnb29kc0xpc3QgPSB7XHJcblxyXG4gICAgICAgIGdvb2RzQ291bnQ6ICQoXCIjYWRkRGlzdHJpYnV0ZUdvb2RzXCIpLmRhdGEoXCJjb3VudFwiKSxcclxuXHJcbiAgICAgICAgaW5pdDogZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqIOa3u+WKoOaOqOW5v+WVhuWTgeeql+WPoyAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgLy/miZPlvIDmt7vliqDmjqjlub/llYblk4Hnqpflj6NcclxuICAgICAgICAgICAgJGhvbWVQYWdlLm9uKFwiY2xpY2tcIiwgXCIjYWRkRGlzdHJpYnV0ZUdvb2RzXCIsIGZ1bmN0aW9uICgpIHtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgc3dpdGNoU3RhdGUgPSAkKFwiLl9zd2l0Y2hPcGVyYXRlQXJlYVwiKS5kYXRhKFwic3dpdGNoX3N0YXRlXCIpOy8v5b2T5YmN54q25oCBXHJcbiAgICAgICAgICAgICAgICBpZiAoIXN3aXRjaFN0YXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJGNob3NlblNob3Auc2hvd09wZW5DaG9zZW5UaXAoKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoJGdvb2RzTGlzdC5nb29kc0NvdW50ID49IDIwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5re75Yqg55qE5o6o5bm/5ZWG5ZOB5pWw6YeP5bey6L6+5YiwMjDkuKrvvIzkuI3og73lho3mt7vliqBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3dXaW5kb3coXCJfYWRkRGlzdHJpYnV0ZUdvb2RzV2luZG93XCIpO1xyXG4gICAgICAgICAgICAgICAgJGdvb2RzTGlzdC5nZXREaXN0cmlidXRlR29vZHNDb250ZW50KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvL+WFs+mXrea3u+WKoOaOqOW5v+WVhuWTgeeql+WPo1xyXG4gICAgICAgICAgICAkKFwiI19hZGREaXN0cmlidXRlR29vZHNXaW5kb3dcIikub24oXCJjbGlja1wiLCBcIi5fSGVhZGVySWNvbiwgI19jYW5jZWxBZGREaXN0cmlidXRlR29vZHNcIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJfYWRkRGlzdHJpYnV0ZUdvb2RzV2luZG93XCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChcIiNfYWRkRGlzdHJpYnV0ZUdvb2RzV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIuX2FkZEdvb2RzV2luZG93VGFibGVJdGVtXCIsIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHZhciAkdGFyZ2V0ID0gJCh0aGlzKS5jaGlsZHJlbihcIi5fc2VsZWN0U2luZ2xlRGlzdHJpYnV0ZUdvb2RzXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSA9ICR0YXJnZXQucHJvcChcImNoZWNrZWRcIik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWN1cnJlbnRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGxDb3VudCA9ICRnb29kc0xpc3QuZ29vZHNDb3VudCArICQoXCIjX2FkZEdvb2RzV2luZG93VGFibGVCb2R5XCIpLmZpbmQoXCIuX3NlbGVjdFNpbmdsZURpc3RyaWJ1dGVHb29kczpjaGVja2VkXCIpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxsQ291bnQgPj0gMjApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5re75Yqg55qE5o6o5bm/5ZWG5ZOB5pWw6YeP5bey6L6+5YiwMjDkuKrvvIzkuI3og73lho3mt7vliqBcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAkdGFyZ2V0LnByb3AoXCJjaGVja2VkXCIsICFjdXJyZW50U3RhdGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChcIiNfYWRkRGlzdHJpYnV0ZUdvb2RzV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIuX3NlbGVjdFNpbmdsZURpc3RyaWJ1dGVHb29kc1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgIHZhciBjdXJyZW50U3RhdGUgPSAkKHRoaXMpLnByb3AoXCJjaGVja2VkXCIpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBhbGxDb3VudCA9ICRnb29kc0xpc3QuZ29vZHNDb3VudCArICQoXCIjX2FkZEdvb2RzV2luZG93VGFibGVCb2R5XCIpLmZpbmQoXCIuX3NlbGVjdFNpbmdsZURpc3RyaWJ1dGVHb29kczpjaGVja2VkXCIpLmxlbmd0aDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYWxsQ291bnQgPiAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmt7vliqDnmoTmjqjlub/llYblk4HmlbDph4/lt7Lovr7liLAyMOS4qu+8jOS4jeiDveWGjea3u+WKoFwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLy/mt7vliqDmjqjlub/llYblk4Hnqpflj6PmkJzntKLllYblk4FcclxuICAgICAgICAgICAgJChcIiNfYWRkRGlzdHJpYnV0ZUdvb2RzV2luZG93XCIpLm9uKFwiY2xpY2tcIiwgXCIjX3NlYXJjaERpc3RyaWJ1dGVHb29kc1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2VhcmNoQ29udGVudCA9ICQudHJpbSgkKFwiI19zZWFyY2hEaXN0cmlidXRlR29vZHNJbnB1dFwiKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICAkZ29vZHNMaXN0LmdldERpc3RyaWJ1dGVHb29kc0NvbnRlbnQoc2VhcmNoQ29udGVudCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKFwiI19zZWFyY2hEaXN0cmlidXRlR29vZHNJbnB1dFwiKS5vbihcImtleXByZXNzXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXlDb2RlID09IDEzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNfc2VhcmNoRGlzdHJpYnV0ZUdvb2RzXCIpLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAvL+S/neWtmOaOqOW5v+WVhuWTgeeql+WPo+WGheWuuVxyXG4gICAgICAgICAgICAkKFwiI19jb25maXJtQWRkRGlzdHJpYnV0ZUdvb2RzXCIpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICQoXCIjX2FkZEdvb2RzV2luZG93VGFibGVCb2R5XCIpLmZpbmQoXCIuX3NlbGVjdFNpbmdsZURpc3RyaWJ1dGVHb29kczpjaGVja2VkXCIpLmVhY2goZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBvYmogPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiAkKHRoaXMpLmRhdGEoXCJyZXNvdXJjZV9pZFwiKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJCh0aGlzKS5kYXRhKFwicmVzb3VyY2VfdHlwZVwiKVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBhZGRSZXNvdXJjZVBhcmFtcy5wdXNoKG9iaik7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmICgkZ29vZHNMaXN0Lmdvb2RzQ291bnQgKyBhZGRSZXNvdXJjZVBhcmFtcy5sZW5ndGggPiAyMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIua3u+WKoOeahOaOqOW5v+WVhuWTgeaVsOmHj+S4jeiDvei2hei/hzIw5LiqXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93TG9hZGluZyhcImFkZERpc3RyaWJ1dGVHb29kc0xvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAkLmFqYXgoXCIvY2hvc2VuL2FkZF9yZXNvdXJjZV9jaG9zZW5cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtczogYWRkUmVzb3VyY2VQYXJhbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcImFkZERpc3RyaWJ1dGVHb29kc0xvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuaGlkZVdpbmRvdyhcIl9hZGREaXN0cmlidXRlR29vZHNXaW5kb3dcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5L+d5a2Y5oiQ5YqfXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRnb29kc0xpc3QuZ29vZHNDb3VudCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJC5hbGVydChcIuaCqOacgOWkmuWPr+a3u+WKoDIw5Liq5ZWG5ZOB77yM5LiU5ZWG5ZOB5re75Yqg5ZCO5LiN5pSv5oyB5Yig6Zmk77yM6K+36LCo5oWO6YCJ5oup44CCPGJyPuaCqOWPr+S7pee7p+e7rea3u+WKoOWVhuWTgeWSjOiuvue9ruWVhuWTgeebuOWFs+WxnuaAp1wiLCBcImluZm9cIiwge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidG46IDIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uT2s6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICRjaG9zZW5TaG9wLmdldE5ld1BhZ2UoXCJnb29kc1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJGNob3NlblNob3AuZ2V0TmV3UGFnZShcImdvb2RzXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pON5L2c5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVMb2FkaW5nKFwiYWRkRGlzdHJpYnV0ZUdvb2RzTG9hZGluZ1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxlcnQoXCLmnI3liqHlmajlh7rlsI/lt67kuobvvIzor7fnqI3lkI7lho3or5XvvIFcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKiog6K6+572u5qKv5bqm56qX5Y+jICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAvL+aJk+W8gOiuvue9ruair+W6pueql+WPo1xyXG4gICAgICAgICAgICAkaG9tZVBhZ2Uub24oXCJjbGlja1wiLCBcIi5zZXRHcmFkaWVudFwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVzSWQgPSAkKHRoaXMpLnBhcmVudHMoXCIudGFibGVCb2R5SXRlbVwiKS5kYXRhKFwicmVzb3VyY2VfaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzVHlwZSA9ICQodGhpcykucGFyZW50cyhcIi50YWJsZUJvZHlJdGVtXCIpLmRhdGEoXCJyZXNvdXJjZV90eXBlXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5cGUgPSAkKHRoaXMpLmRhdGEoXCJ0eXBlXCIpO1xyXG4gICAgICAgICAgICAgICAgc2V0R3JhZGllbnRJbmZvID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc0lkIDogcmVzSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzVHlwZTogcmVzVHlwZVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGUgPT0gXCJzZXRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjX3NldEdvb2RzR3JhZGllbnRXaW5kb3cgLl93aW5kb3dFZGl0YWJsZVZhbHVlXCIpLnZhbChcIlwiKTtcclxuICAgICAgICAgICAgICAgICAgICBzZXRHcmFkaWVudFdpbmRvd1N0YXRlID0gXCJzZXRcIjtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodHlwZSA9PSBcImVkaXRcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldEdyYWRpZW50V2luZG93U3RhdGUgPSBcImVkaXRcIjtcclxuICAgICAgICAgICAgICAgICAgICAvL+WbnuaYvuWOn+adpeeahOaVsOaNrlxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaXN0cmlidXRlRGF0YSA9ICQodGhpcykuZGF0YShcImRpc3RyaWJ1dGVfZGF0YVwiKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI193aW5kb3dWYWx1ZTFcIikudmFsKGRpc3RyaWJ1dGVEYXRhLmVuZDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjX3dpbmRvd1ZhbHVlMlwiKS52YWwoZGlzdHJpYnV0ZURhdGEuc3RhcnQyKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI193aW5kb3dWYWx1ZTNcIikudmFsKGRpc3RyaWJ1dGVEYXRhLmVuZDIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjX3dpbmRvd1ZhbHVlNFwiKS52YWwoZGlzdHJpYnV0ZURhdGEuc3RhcnQzKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI193aW5kb3dSYXRpbzFcIikudmFsKGRpc3RyaWJ1dGVEYXRhLnBlcmNlbnQxKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI193aW5kb3dSYXRpbzJcIikudmFsKGRpc3RyaWJ1dGVEYXRhLnBlcmNlbnQyKTtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiI193aW5kb3dSYXRpbzNcIikudmFsKGRpc3RyaWJ1dGVEYXRhLnBlcmNlbnQzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93V2luZG93KFwiX3NldEdvb2RzR3JhZGllbnRXaW5kb3dcIik7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8v5YWz6Zet6K6+572u5qKv5bqm56qX5Y+jXHJcbiAgICAgICAgICAgICQoXCIjX3NldEdvb2RzR3JhZGllbnRXaW5kb3dcIikub24oXCJjbGlja1wiLCBcIi5fSGVhZGVySWNvbiwgI193aW5kb3dDYW5jZWxCdG5cIiwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLmhpZGVXaW5kb3coXCJfc2V0R29vZHNHcmFkaWVudFdpbmRvd1wiKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvL+WFs+iBlOiuvue9ruair+W6pueql+WPo2lucHV05YC8XHJcbiAgICAgICAgICAgICQoXCIjX3NldEdvb2RzR3JhZGllbnRXaW5kb3dcIikub24oXCJrZXl1cFwiLCBcIi5fd2luZG93RWRpdGFibGVWYWx1ZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgaWQgPSAkKHRoaXMpLmF0dHIoXCJpZFwiKTtcclxuICAgICAgICAgICAgICAgIGlmIChpZCA9PSBcIl93aW5kb3dWYWx1ZTFcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjX3dpbmRvd1ZhbHVlMlwiKS52YWwoKyQudHJpbSgkKFwiI193aW5kb3dWYWx1ZTFcIikudmFsKCkpKzEpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpZCA9PSBcIl93aW5kb3dWYWx1ZTNcIikge1xyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjX3dpbmRvd1ZhbHVlNFwiKS52YWwoKyQudHJpbSgkKFwiI193aW5kb3dWYWx1ZTNcIikudmFsKCkpKzEpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIC8v5L+d5a2Y6K6+572u5qKv5bqmXHJcbiAgICAgICAgICAgICQoXCIjX3NldEdvb2RzR3JhZGllbnRXaW5kb3dcIikub24oXCJjbGlja1wiLCBcIiNfd2luZG93Q29uZmlybUJ0blwiLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHZhbHVlMSA9IHBhcnNlSW50KCQoXCIjX3dpbmRvd1ZhbHVlMVwiKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUyID0gcGFyc2VJbnQoJChcIiNfd2luZG93VmFsdWUyXCIpLnZhbCgpKSxcclxuICAgICAgICAgICAgICAgICAgICB2YWx1ZTMgPSBwYXJzZUludCgkKFwiI193aW5kb3dWYWx1ZTNcIikudmFsKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIHZhbHVlNCA9IHBhcnNlSW50KCQoXCIjX3dpbmRvd1ZhbHVlNFwiKS52YWwoKSksXHJcbiAgICAgICAgICAgICAgICAgICAgcmF0aW8xID0gcGFyc2VJbnQoJChcIiNfd2luZG93UmF0aW8xXCIpLnZhbCgpKSxcclxuICAgICAgICAgICAgICAgICAgICByYXRpbzIgPSBwYXJzZUludCgkKFwiI193aW5kb3dSYXRpbzJcIikudmFsKCkpLFxyXG4gICAgICAgICAgICAgICAgICAgIHJhdGlvMyA9IHBhcnNlSW50KCQoXCIjX3dpbmRvd1JhdGlvM1wiKS52YWwoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIGlzRGlzdHJpYnV0ZSxkaXN0cmlidXRlX3BlcmNlbnQ7XHJcbiAgICAgICAgICAgICAgICAvL+WIpOaWreair+W6puWIhuaIkOavlOS+i++8jOesrOS4gOair+W6puWIhuaIkOS4jeS9juS6juaOqOW5v+WRmFxyXG4gICAgICAgICAgICAgICAgJC5hamF4KFwiL2Nob3Nlbi9nZXRfcmVzb3VyY2VfZGlzdHJpYnV0ZV9pbmZvL1wiK3NldEdyYWRpZW50SW5mby5yZXNUeXBlKycvJytzZXRHcmFkaWVudEluZm8ucmVzSWQsIHtcclxuICAgICAgICAgICAgICAgICAgICB0eXBlOiBcIkdFVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgICAgICAgICBhc3luYzpmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7fSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHJlc3VsdC5jb2RlID09IDApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNEaXN0cmlidXRlID0gcmVzdWx0LmRhdGEuaGFzX2Rpc3RyaWJ1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXN0cmlidXRlX3BlcmNlbnQgPSByZXN1bHQuZGF0YS5maXJzdF9kaXN0cmlidXRlX3BlcmNlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcign6I635Y+W5o6o5bm/5ZGY5L+h5oGv5aSx6LSlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGlmKGlzRGlzdHJpYnV0ZSAmJiByYXRpbzEgPD0gZGlzdHJpYnV0ZV9wZXJjZW50ICl7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi56ys5LiA5Yy66Ze05YiG5oiQ5q+U5L6L6KaB5aSn5LqO6K+l5ZWG5ZOB55qE5o6o5bm/5ZGY5YiG5oiQ5q+U5L6L5ZmiXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmICghdmFsdWUxIHx8ICF2YWx1ZTIgfHwgIXZhbHVlMyB8fCAhdmFsdWU0IHx8ICFyYXRpbzEgfHwgIXJhdGlvMiB8fCAhcmF0aW8zKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pWw5o2u5rKh5pyJ5aGr5YaZ5a6M5pW05ZOmXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmKCgoIHZhbHVlMSArIDEpICE9IHZhbHVlMikgfHwgKCggdmFsdWUzICsgMSkgIT0gdmFsdWU0KSB8fCAodmFsdWUyID49IHZhbHVlMykgfHwgKHZhbHVlMSA8PSAxKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfljLrpl7TloavlhpnmnInor6/vvIzor7fmo4Dmn6XlkI7ph43or5UnKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZigocmF0aW8xIDw9IDApIHx8IChyYXRpbzEgPiByYXRpbzIpIHx8IChyYXRpbzIgPiByYXRpbzMpKXtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+WIhuaIkOavlOS+i+Whq+WGmeacieivr++8jOivt+WPguiAg+ekuuS+iycpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChyYXRpbzE+OTkgfHwgcmF0aW8yID4gOTkgfHwgcmF0aW8zID4gOTkpIHtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLliIbmiJDmr5TkvovkuI3og73otoXov4c5OSVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwYXJhbXMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kX29yZGVyX251bTogdmFsdWUxLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXN0cmlidXRlX3BlcmNlbnQ6IHJhdGlvMSxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEyOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0X29yZGVyX251bTogdmFsdWUyLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRfb3JkZXJfbnVtOiB2YWx1ZTMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RyaWJ1dGVfcGVyY2VudDogcmF0aW8yLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YTM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhcnRfb3JkZXJfbnVtOiB2YWx1ZTQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3RyaWJ1dGVfcGVyY2VudDogcmF0aW8zLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfaWQ6IHNldEdyYWRpZW50SW5mby5yZXNJZCxcclxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV90eXBlOiBzZXRHcmFkaWVudEluZm8ucmVzVHlwZSxcclxuICAgICAgICAgICAgICAgICAgICBlZGl0OiBzZXRHcmFkaWVudFdpbmRvd1N0YXRlID09IFwiZWRpdFwiID8gXCJlZGl0XCIgOiBcInNldFwiLFxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICQuYWpheChcIi9jaG9zZW4vc2V0X3hpYW9lX2Rpc3RyaWJ1dGVcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiBwYXJhbXMsXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LmNvZGUgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuair+W6puiuvue9ruaIkOWKn1wiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlV2luZG93KFwiX3NldEdvb2RzR3JhZGllbnRXaW5kb3dcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkY2hvc2VuU2hvcC5nZXROZXdQYWdlKFwiZ29vZHNcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZihyZXN1bHQuY29kZSA9PSA0KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLmoq/luqborr7nva7lpLHotKXvvIzmnIDkvY7liIbmiJDmr5TkvovkuI3og73kvY7kuo7mjqjlub/lkZjnmoTliIbplIDmr5TkvotcIityZXN1bHQuZGF0YS5kaXN0cmlidXRlX3BlcmNlbnQrXCIlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYocmVzdWx0LmNvZGUgPT0gOCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5qKv5bqm6K6+572u5aSx6LSl77yM6K+35oKo5Yi35paw6aG16Z2i6YeN6K+VXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5qKv5bqm6K6+572u5aSx6LSl77yM6K+356iN5ZCO5YaN6K+VXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24gKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pyN5Yqh5Zmo5Ye65bCP5beu5LqG77yM6K+356iN5ZCO5YaN6K+V77yBXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAvKioqKioqKioqKioqKioqKioqKioqKiog6K6+572u5YiG57G7ICoqKioqKioqKioqKioqKioqKioqKioqKiovXHJcblxyXG4gICAgICAgICAgICAkaG9tZVBhZ2Uub24oXCJjaGFuZ2VcIiwgXCIuc2VsZWN0Q2hvc2VuR29vZHNDbGFzc1wiLCBmdW5jdGlvbiAoKSB7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyICRzZWxlY3QgPSAkKHRoaXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICRvcHRpb24gPSAkc2VsZWN0LmNoaWxkcmVuKFwib3B0aW9uOnNlbGVjdGVkXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzSWQgPSAkb3B0aW9uLnZhbCgpLFxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZSA9ICRvcHRpb24udGV4dCgpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChjbGFzc0lkID09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coY2xhc3NJZCArIFwiIC0gXCIgKyBjbGFzc05hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHZhciAkZGVsZWdhdGUgPSAkc2VsZWN0LnBhcmVudHMoXCIudGFibGVCb2R5SXRlbVwiKSxcclxuICAgICAgICAgICAgICAgICAgICByZXNJZCA9ICRkZWxlZ2F0ZS5kYXRhKFwicmVzb3VyY2VfaWRcIiksXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzVHlwZSA9ICRkZWxlZ2F0ZS5kYXRhKFwicmVzb3VyY2VfdHlwZVwiKSxcclxuICAgICAgICAgICAgICAgICAgICBvbGRDbGFzc0lkID0gJGRlbGVnYXRlLmRhdGEoXCJvbGRfY2xhc3NfaWRcIikgfHwgLTE7XHJcblxyXG4gICAgICAgICAgICAgICAgJC5hamF4KFwiL2Nob3Nlbi9zZXRfY2xhc3NpZnlcIiwge1xyXG4gICAgICAgICAgICAgICAgICAgIHR5cGU6IFwiUE9TVFwiLFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzX2lkOiBjbGFzc0lkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV9pZDogcmVzSWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGU6IHJlc1R5cGUsXHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuY29kZSA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi6K6+572u5YiG57G75oiQ5Yqf44CCXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K6+572u5YiG57G75aSx6LSl44CCXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJHNlbGVjdC52YWwob2xkQ2xhc3NJZCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbiAoeGhyLCBzdGF0dXMsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKioqKioqKioqKioqIOeUn+aIkOmihOiniOS6jOe7tOeggSAqKioqKioqKioqKioqKioqKioqKioqKioqL1xyXG5cclxuICAgICAgICAgICAgJGhvbWVQYWdlLmZpbmQoXCIucXJDb2RlSW1hZ2VcIikuZWFjaChmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgcXJDb2RlVXJsID0gJCh0aGlzKS5kYXRhKFwidXJsXCIpLFxyXG4gICAgICAgICAgICAgICAgICAgIGlkID0gJCh0aGlzKS5hdHRyKFwiaWRcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgY3JlYXRlUXJDb2RlKGlkLCBxckNvZGVVcmwsIDE2MCwgMTYwKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG5cclxuXHJcbiAgICAgICAgfSxcclxuICAgICAgICBnZXREaXN0cmlidXRlR29vZHNDb250ZW50OiBmdW5jdGlvbiAoc2VhcmNoQ29udGVudCkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvd0xvYWRpbmcoXCJhZGREaXN0cmlidXRlR29vZHNMb2FkaW5nXCIpO1xyXG4gICAgICAgICAgICAkLmFqYXgoXCIvY2hvc2VuL3NlYXJjaF9yZXNvdXJjZVwiLCB7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiBcIlBPU1RcIixcclxuICAgICAgICAgICAgICAgIGRhdGFUeXBlOiBcImpzb25cIixcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBzZWFyY2g6IHNlYXJjaENvbnRlbnQgfHwgXCJcIixcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbiAocmVzdWx0KSB7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBodG1sU3RyID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAkLmVhY2gocmVzdWx0LCBmdW5jdGlvbiAoaywgdikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBodG1sU3RyICs9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIl9hZGRHb29kc1dpbmRvd1RhYmxlSXRlbSBjbGVhcmZpeFwiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJfc2VsZWN0U2luZ2xlRGlzdHJpYnV0ZUdvb2RzXCIgJyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICdkYXRhLXJlc291cmNlX2lkPVwiJyt2LmlkKydcIiBkYXRhLXJlc291cmNlX3R5cGU9XCInK3YudHlwZSsnXCI+JyArXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxkaXYgY2xhc3M9XCJfc2luZ2xlRGlzdHJpYnV0ZUdvb2RzQ292ZXJcIj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJzxpbWcgc3JjPVwiJyArIHYuaW1nX3VybF9jb21wcmVzc2VkICsgJ1wiPicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIl9zaW5nbGVEaXN0cmlidXRlR29vZHNUaXRsZVwiIHRpdGxlPVwiJyt2Lm5hbWUrJ1wiPicrdi5uYW1lKyc8L2Rpdj4nICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBjbGFzcz1cIl9zaW5nbGVEaXN0cmlidXRlR29vZHNUaW1lXCI+Jyt2LmNyZWF0ZWRfYXQrJzwvZGl2PicgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJzwvZGl2Pic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGh0bWxTdHIubGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaHRtbFN0ciA9IFwiPGRpdiBjbGFzcz0nY29udGVudE5vRGF0YSc+5pqC5peg5pWw5o2uPC9kaXY+XCI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICQoXCIjX2FkZEdvb2RzV2luZG93VGFibGVCb2R5XCIpLmh0bWwoaHRtbFN0cik7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIiNfYWRkR29vZHNXaW5kb3dUYWJsZUJvZHlcIikuc2Nyb2xsVG9wKDApO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5oaWRlTG9hZGluZyhcImFkZERpc3RyaWJ1dGVHb29kc0xvYWRpbmdcIik7XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uICh4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBhbGVydChcIuacjeWKoeWZqOWHuuWwj+W3ruS6hu+8jOivt+eojeWQjuWGjeivle+8gVwiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2hlY2tJbnB1dFZhbHVlOiBmdW5jdGlvbiAoY3VycmVudERvbSkge1xyXG5cclxuICAgICAgICAgICAgdmFyIHZhbHVlID0gJChjdXJyZW50RG9tKS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgIC8v5riF6ZmkXCLmlbDlrZdcIuWSjFwiLlwi5Lul5aSW55qE5a2X56ymXHJcbiAgICAgICAgICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvW15cXGRdL2csIFwiXCIpO1xyXG4gICAgICAgICAgICAvL+a4hemZpDDlkI7pnaLnmoTmlbDlrZdcclxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9eMFtcXGRdKy9nLCBcIjBcIik7XHJcblxyXG4gICAgICAgICAgICAkKGN1cnJlbnREb20pLnZhbCh2YWx1ZSk7XHJcblxyXG4gICAgICAgIH0sXHJcblxyXG5cclxuXHJcbiAgICB9O1xyXG5cclxuICAgIHJldHVybiAkZ29vZHNMaXN0O1xyXG5cclxufSkoKTsiXX0=
