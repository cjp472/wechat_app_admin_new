var width;var height;var params={};var allParams={};var pay_type;var resource_type;var resource_url;var old_pic_url;var isEditPic=false;var cos=new InitCosCloud;var ready_pic=false;var audio_url="";var pic_url="";var sign_url="";var try_url="";var noEffect_url="";var try_length="";var audio_length="";var noEffect_length="";var noEffect_size="";var is_single_sale=0;var prevVal;$(document).ready(function(){prevVal=+$("#serviceContent :radio:checked").val()||null;params["push_state"]=prevVal;var e=$("#checkbox-img").attr("checked-state");if(e=="checked"){pay_type=3;$("#serviceContent").show()}if($("#package_select").hasClass("border_blue")){$("#serviceContent").show()}$("#checkbox-img").click(function(){var e=$("#checkbox-img").attr("checked-state");if(e=="unchecked"){$("#checkbox-img").attr("checked-state","checked");$("#checkbox-img").css("backgroundPosition","-104px 0");$("#single_price_div").removeClass("hide");pay_type=3}else if(e=="checked"){$("#checkbox-img").attr("checked-state","unchecked");$("#checkbox-img").css("backgroundPosition","-78px 0");$("#single_price_div").addClass("hide")}});getInternetExplorerVersion();changeSingleAndPackage();datetimepickerconfig("#start_time");monitorPriceChange();isShowService();openService();$("#resource_package").on("change",function(){isShowService()})});function isShowService(){if($("#package_select").hasClass("border_blue")){var e=$("#resource_package option:selected").attr("about");if(e>0){$("#serviceContent").show();params["push_state"]=prevVal}else{$("#serviceContent").hide();delete params["push_state"]}}else{$("#serviceContent").hide();delete params["push_state"]}}function openService(){if($("#serviceContent").data("setting")==1){$("#serviceContent").on("click",":radio",function(e){var i=$(this);var a=+i.val();if(a!==prevVal&&a==1){e.preventDefault();var s="您需要到微信公众号后台将您的服务号所在行业设置为“教育/培训”，设置完成后，开启服务号通知方可正常发送模板消息。"+"<br/><a target='_blank' href='/help/instructions#hp5_wx_service' style='margin-top:10px;'>什么是模板消息？</a>";var t={title:"提示",btn:3,oktext:"我已设置",canceltext:"关闭",icon:"blue",onOk:function(){$.ajax("/is_industry",{type:"GET",dataType:"json",data:{}}).done(function(e){var s=e.ret;if(s==0){i.prop("checked",true);prevVal=a;params["push_state"]=a;$("#serviceContent").data("state",a);baseUtils.show.blueTip("模板消息推送开启")}else{baseUtils.show.redTip("无法开启消息推送，请按照提示修改设置")}}).fail(function(e,i,a){console.error(a);baseUtils.show.redTip("服务器出差啦，请稍后重试")})}};$.alert(s,"custom",t);return false}else{prevVal=a;params["push_state"]=a;$("#serviceContent").data("state",a)}})}else{$("#serviceContent").on("click",":radio",function(e){var i=$(this);var a=i.val();if(a!==prevVal&&a==1){prevVal=a;params["push_state"]=a;$("#serviceContent").data("state",a);baseUtils.show.blueTip("模板消息推送开启")}else{prevVal=a;params["push_state"]=a;$("#serviceContent").data("state",a)}})}}function monitorPriceChange(){inputLimitPrice("#resource_price")}function changeSingleAndPackage(){$(".upload_type").on("click",function(){$(".upload_type").removeClass("border_blue");$("#resource_price").removeAttr("readonly");$("#resource_price").val("");$(this).addClass("border_blue");isShowService();if($("#single_select").hasClass("border_blue")){console.log(2);$("#price_div").removeClass("hide");$(".searchSelectArea").addClass("hide");$("#resource_package").addClass("hide");if(!$(".package_side_pay").hasClass("hide")){$(".package_side_pay").addClass("hide")}pay_type=2}else if($("#package_select").hasClass("border_blue")){console.log(3);$("#price_div").addClass("hide");$(".searchSelectArea").removeClass("hide");$("#resource_package").removeClass("hide");if($(".package_side_pay").hasClass("hide")){$(".package_side_pay").removeClass("hide")}pay_type=3}else{console.log(1);$("#price_div").addClass("hide");$(".searchSelectArea").addClass("hide");$("#resource_package").addClass("hide");if(!$(".package_side_pay").hasClass("hide")){$(".package_side_pay").addClass("hide")}$("#resource_price").attr("readonly","readonly");$("#resource_price").val("0.00");pay_type=1}})}$(function(){$("#resource_pic").on("change",function(){isEditPic=true;var e=getObjectURL(this.files[0]);var i=this.files[0].size;if($(this).attr("id")=="resource_pic"&&i>4*1e3*1e3){baseUtils.show.redTip("图片太大!请不要超过4M!");return}try{var a,s;if(a=this.files[0]){s=new Image;s.onload=function(){width=this.width;height=this.height};s.src=e}}catch(e){}$(this).nextAll(".pic_add").addClass("hide");$(this).nextAll(".pic_close").removeClass("hide");$(this).nextAll(".pic_show").removeClass("hide");$(this).nextAll(".pic_show").attr("src",e);$("#icon_uploadPic").removeClass("hide");$(".pic_close").on("click",function(){$(this).addClass("hide");$("#icon_uploadPic").addClass("hide");$("#icon_uploadPic_success").addClass("hide");$(this).nextAll(".pic_show").addClass("hide");$(this).nextAll(".pic_add").removeClass("hide");$(this).nextAll(".pic_add").attr("src",old_pic_url);$(this).prevAll("#resource_pic").val("");isEditPic=false});if(!checkPic()){return}else{sliceUpload("#resource_pic",get_cos_image_path(),ResourcePic_successCallBack,ResourcePic_errorCallBack,"picture")}})});function getObjectURL(e){var i=null;if(window.createObjectURL!=undefined){i=window.createObjectURL(e)}else if(window.URL!=undefined){i=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){i=window.webkitURL.createObjectURL(e)}return i}function checkPic(){var e=$("#resource_pic").val();if(e.length==0){baseUtils.show.redTip("封面不能为空!");return false}else{var i=$("#resource_pic").prop("files");var a=i[0].type;if(a.indexOf("image")<0){baseUtils.show.redTip("封面必须为图片文件!");return false}}return true}var ResourcePic_successCallBack=function(e){$("#icon_uploadPic").addClass("hide");$("#icon_uploadPic_success").removeClass("hide");var i=e.data.access_url;pic_url=i;ready_pic=true;console.log("封面音频上传成功的回调-》"+pic_url)};var ResourcePic_errorCallBack=function(e){baseUtils.show.redTip("封面图上传失败，请重新上传!")};function sliceUpload(e,i,a,s,t){var r=$(e).prop("files");if(r&&r.length==1){if(t=="noEffect"){var c=getObjectURL(r[0]);noEffect_size=(r[0]["size"]/(1024*1024)).toFixed(1);var l=document.getElementById("noEffect_time");l.src=c}browserMD5File(r[0],function(e,t){var c=r[0]["name"];var l=c.split(".");var o=l[l.length-1];i=i+t+"."+o;cos.uploadFileWithoutPro(a,s,i,r[0],0)})}else{baseUtils.show.redTip("请选择一个文件")}}function updateArticle(e){var e=e;var i=$("#resource_title").val().trim();if(i.length==0){baseUtils.show.redTip("名称不能为空!");return false}var a=$("#start_time").val().trim();if(a.length==0){baseUtils.show.redTip("上架时间不能为空!");return false}var s="";var t="";var r="";var c="";var l="";if(pay_type!=3){s=$("#resource_price").val().trim()*100;if(pay_type==2){if(s.length==0){baseUtils.show.redTip("价格不能为空!");return false}else if(s<=0){baseUtils.show.redTip("价格需高于0.00!");return false}}}else{t=$("#resource_package").find("option:selected").val();if(t==undefined||t.length==0){baseUtils.show.redTip("请选择产品包!");return false}r=$("#resource_package").find("option:selected").text().trim();c=$("#resource_package").find("option:selected").attr("about");l=$("#resource_package").find("option:selected").attr("state");var o=$("#checkbox-img").attr("checked-state");if(o=="unchecked"){is_single_sale=0}else if(o=="checked"){is_single_sale=1;var n=/^((0)|([1-9]{1}\d*))(\.\d{1,2})?$/;var d=$("#single_price").val().trim();if(d.length>0){if(n.test(d)){if(d==0||d==0||d==0){baseUtils.show.redTip("金额不能为0!");return false}s=d*100}else{baseUtils.show.redTip("请输入正确的金额！");return false}}else{baseUtils.show.redTip("请输入单价!");return false}}}var p=$("#resource_pic").val();if(p.length!=0){isEditPic=true}var h=UE.getEditor("container");var u=h.getContent();if(u.length==0){baseUtils.show.redTip("请输入图文内容!");return false}var _=h.getPlainTxt();showLoading();if(isEditPic==true){var v=$("#resource_pic").prop("files");browserMD5File(v[0],function(l,o){var n=v[0]["name"];var d=n.split(".");var p=d[d.length-1];var h=get_cos_image_path()+o+"."+p;cos.uploadFileWithoutPro(function(l){var o=l.data.access_url;var n=o;$.post("/updatearticle",{id:e,title:i,start_at:a,img_url:o,img_url_compressed:n,payment_type:pay_type,product_id:t,product_name:r,content:_,piece_price:s!=0?s:c,org_content:u,is_single_sale:is_single_sale,push_state:params["push_state"]||0},function(e){if(e.ret==0){baseUtils.show.blueTip("上传成功!",function(){window.location.href="/article_list"})}else{baseUtils.show.redTip("上传失败!")}})},function(e){baseUtils.show.redTip("上传失败!");uploadErrorShow(e.responseText)},h,v[0],0)})}else{$.post("/updatearticle",{id:e,title:i,start_at:a,payment_type:pay_type,product_id:t,product_name:r,product_state:l,content:_,piece_price:s!=0?s:c,org_content:u,is_single_sale:is_single_sale,push_state:params["push_state"]||0},function(e){hideLoading();if(e.ret==0){baseUtils.show.blueTip("保存成功!",function(){reListUrl("article_listop","/article_list");var e=$.cookie("article_listop");if(e){var i=e.split("|")[1];window.location.href=i}else{window.location.href="/article_list"}})}else{baseUtils.show.redTip("保存失败!")}})}}function toAddPackage(){$.alert.xcConfirm("您确定要去新增专栏页面吗?","confirm",{onOk:function(){window.location.href="/package_list"}})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2VkaXRBcnRpY2xlUmVzb3VyY2UuanMiXSwibmFtZXMiOlsid2lkdGgiLCJoZWlnaHQiLCJwYXJhbXMiLCJhbGxQYXJhbXMiLCJwYXlfdHlwZSIsInJlc291cmNlX3R5cGUiLCJyZXNvdXJjZV91cmwiLCJvbGRfcGljX3VybCIsImlzRWRpdFBpYyIsImNvcyIsIkluaXRDb3NDbG91ZCIsInJlYWR5X3BpYyIsImF1ZGlvX3VybCIsInBpY191cmwiLCJzaWduX3VybCIsInRyeV91cmwiLCJub0VmZmVjdF91cmwiLCJ0cnlfbGVuZ3RoIiwiYXVkaW9fbGVuZ3RoIiwibm9FZmZlY3RfbGVuZ3RoIiwibm9FZmZlY3Rfc2l6ZSIsImlzX3NpbmdsZV9zYWxlIiwicHJldlZhbCIsIiQiLCJkb2N1bWVudCIsInJlYWR5IiwidmFsIiwiY2hlY2tlZFN0YXRlIiwiYXR0ciIsInNob3ciLCJoYXNDbGFzcyIsImNsaWNrIiwiY3NzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uIiwiY2hhbmdlU2luZ2xlQW5kUGFja2FnZSIsImRhdGV0aW1lcGlja2VyY29uZmlnIiwibW9uaXRvclByaWNlQ2hhbmdlIiwiaXNTaG93U2VydmljZSIsIm9wZW5TZXJ2aWNlIiwib24iLCJwYWNrYWdlUHJpY2UiLCJoaWRlIiwiZGF0YSIsImUiLCJlbGUiLCJ0aGlzIiwiY3VyclZhbCIsInByZXZlbnREZWZhdWx0IiwidHh0Iiwib3B0aW9uIiwidGl0bGUiLCJidG4iLCJva3RleHQiLCJjYW5jZWx0ZXh0IiwiaWNvbiIsIm9uT2siLCJhamF4IiwidHlwZSIsImRhdGFUeXBlIiwiZG9uZSIsImNvZGUiLCJyZXQiLCJwcm9wIiwiYmFzZVV0aWxzIiwiYmx1ZVRpcCIsInJlZFRpcCIsImZhaWwiLCJ4aHIiLCJ0ZXh0IiwiZXJyIiwiY29uc29sZSIsImVycm9yIiwiYWxlcnQiLCJpbnB1dExpbWl0UHJpY2UiLCJyZW1vdmVBdHRyIiwibG9nIiwic3JjcyIsImdldE9iamVjdFVSTCIsImZpbGVzIiwiZmlsZVNpemUiLCJzaXplIiwiZmlsZSIsImltZyIsIkltYWdlIiwib25sb2FkIiwic3JjIiwibmV4dEFsbCIsInByZXZBbGwiLCJjaGVja1BpYyIsInNsaWNlVXBsb2FkIiwiZ2V0X2Nvc19pbWFnZV9wYXRoIiwiUmVzb3VyY2VQaWNfc3VjY2Vzc0NhbGxCYWNrIiwiUmVzb3VyY2VQaWNfZXJyb3JDYWxsQmFjayIsInVybCIsIndpbmRvdyIsImNyZWF0ZU9iamVjdFVSTCIsInVuZGVmaW5lZCIsIlVSTCIsIndlYmtpdFVSTCIsInBpY19pbnB1dCIsImxlbmd0aCIsInByb3BfcGljIiwicGljX3R5cGUiLCJpbmRleE9mIiwicmVzdWx0IiwiYWNjZXNzX3VybCIsImlkZW50aXR5IiwicmVtb3RlUGF0aCIsInN1Y2Nlc3NDYWxsQmFjayIsImVycm9yQ2FsbEJhY2siLCJmaWxlX3R5cGUiLCJyZXNvdXJjZV9sb2NhbF91cmwiLCJ0b0ZpeGVkIiwicmVzb3VyY2VfZWxlbWVudCIsImdldEVsZW1lbnRCeUlkIiwiYnJvd3Nlck1ENUZpbGUiLCJtZDUiLCJmaWxlX25hbWUiLCJuYW1lcyIsInNwbGl0Iiwic3VmZml4IiwidXBsb2FkRmlsZVdpdGhvdXRQcm8iLCJ1cGRhdGVBcnRpY2xlIiwiaWQiLCJyZXNvdXJjZV90aXRsZSIsInRyaW0iLCJzdGFydF90aW1lIiwicmVzb3VyY2VfcHJpY2UiLCJyZXNvdXJjZV9wYWNrYWdlIiwicGFja2FnZV9uYW1lIiwicGllY2VfcHJpY2UiLCJwcm9kdWN0X3N0YXRlIiwiZmluZCIsInJlZyIsInNpbmdsZV9wcmljZSIsInRlc3QiLCJ1ZSIsIlVFIiwiZ2V0RWRpdG9yIiwiaHRtbCIsImdldENvbnRlbnQiLCJjb250ZW50IiwiZ2V0UGxhaW5UeHQiLCJzaG93TG9hZGluZyIsImltZ191cmxfY29tcHJlc3NlZCIsInBvc3QiLCJzdGFydF9hdCIsImltZ191cmwiLCJwYXltZW50X3R5cGUiLCJwcm9kdWN0X2lkIiwicHJvZHVjdF9uYW1lIiwib3JnX2NvbnRlbnQiLCJwdXNoX3N0YXRlIiwibG9jYXRpb24iLCJocmVmIiwidXBsb2FkRXJyb3JTaG93IiwicmVzcG9uc2VUZXh0IiwiaGlkZUxvYWRpbmciLCJyZUxpc3RVcmwiLCJyZV91cmwiLCJjb29raWUiLCJyZXVybCIsInRvQWRkUGFja2FnZSIsInhjQ29uZmlybSJdLCJtYXBwaW5ncyI6IkFBQUEsR0FBSUEsTUFDSixJQUFJQyxPQUVKLElBQUlDLFVBQ0osSUFBSUMsYUFFSixJQUFJQyxTQUVKLElBQUlDLGNBR0osSUFBSUMsYUFDSixJQUFJQyxZQUdKLElBQUlDLFdBQVksS0FNaEIsSUFBSUMsS0FBTSxHQUFJQyxhQUdkLElBQUlDLFdBQVksS0FFaEIsSUFBSUMsV0FBWSxFQUNoQixJQUFJQyxTQUFVLEVBQ2QsSUFBSUMsVUFBVyxFQUNmLElBQUlDLFNBQVUsRUFDZCxJQUFJQyxjQUFlLEVBRW5CLElBQUlDLFlBQWEsRUFDakIsSUFBSUMsY0FBZSxFQUNuQixJQUFJQyxpQkFBa0IsRUFDdEIsSUFBSUMsZUFBZ0IsRUFHcEIsSUFBSUMsZ0JBQWlCLENBSXJCLElBQUlDLFFBRUpDLEdBQUVDLFVBQVVDLE1BQU0sV0FDZEgsU0FBV0MsRUFBRSxrQ0FBa0NHLE9BQVMsSUFDeER4QixRQUFPLGNBQWdCb0IsT0FFdkIsSUFBSUssR0FBZUosRUFBRSxpQkFBaUJLLEtBQUssZ0JBQzNDLElBQUlELEdBQWdCLFVBQVUsQ0FDMUJ2QixTQUFXLENBQ1htQixHQUFFLG1CQUFtQk0sT0FFekIsR0FBSU4sRUFBRSxtQkFBbUJPLFNBQVMsZUFBZ0IsQ0FDOUNQLEVBQUUsbUJBQW1CTSxPQUl6Qk4sRUFBRSxpQkFBaUJRLE1BQU0sV0FFckIsR0FBSUosR0FBZUosRUFBRSxpQkFBaUJLLEtBQUssZ0JBQzNDLElBQUlELEdBQWdCLFlBQWEsQ0FDN0JKLEVBQUUsaUJBQWlCSyxLQUFLLGdCQUFpQixVQUN6Q0wsR0FBRSxpQkFBaUJTLElBQUkscUJBQXNCLFdBQzdDVCxHQUFFLHFCQUFx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cEMsS0FBS3NDLE9BQU8sYUFTMUMsUUFBU2lHLGdCQUNMN0ksRUFBRW1ELE1BQU0yRixVQUFVLGdCQUFpQixXQUMvQjVHLEtBQU0sV0FDRnVDLE9BQU8yRCxTQUFTQyxLQUFPIiwiZmlsZSI6ImFkbWluL2VkaXRBcnRpY2xlUmVzb3VyY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgd2lkdGg7XG52YXIgaGVpZ2h0O1xuXG52YXIgcGFyYW1zID0ge307XG52YXIgYWxsUGFyYW1zID0ge307XG5cbnZhciBwYXlfdHlwZTsgLy/ku5jotLnnsbvlnossMeihqOekuuWFjei0ueOAgTLooajnpLrljZXkuKrku5jotLksM+ihqOekuuS4k+agj+OAglxuXG52YXIgcmVzb3VyY2VfdHlwZTsvL+WIm+W7uuexu+Wei1xuXG4vL+WOn+adpeeahOi1hOa6kFxudmFyIHJlc291cmNlX3VybDsgICAvL+i1hOa6kHVybFxudmFyIG9sZF9waWNfdXJsOyAgICAvL+WOn+WwgemdonVybFxuXG4vL+WIpOaWremFjeWbvuaYr+WQpuS/ruaUueS6hlxudmFyIGlzRWRpdFBpYyA9IGZhbHNlO1xuXG5cbi8v6IW+6K6v5LqR6LWE5rqQXG4vL3ZhciBidWNrZXROYW1lID0gd2luZG93LmNvc19idWNrZXRfbmFtZTtcbi8vdmFyIGNvcyA9IG5ldyBDb3NDbG91ZCh3aW5kb3cuY29zX2FwcF9pZCk7XG52YXIgY29zID0gbmV3IEluaXRDb3NDbG91ZCgpO1xuXG5cbnZhciByZWFkeV9waWMgPSBmYWxzZTtcblxudmFyIGF1ZGlvX3VybCA9ICcnO1xudmFyIHBpY191cmwgPSAnJztcbnZhciBzaWduX3VybCA9ICcnO1xudmFyIHRyeV91cmwgPSAnJztcbnZhciBub0VmZmVjdF91cmwgPSAnJztcblxudmFyIHRyeV9sZW5ndGggPSAnJztcbnZhciBhdWRpb19sZW5ndGggPSAnJztcbnZhciBub0VmZmVjdF9sZW5ndGggPSAnJztcbnZhciBub0VmZmVjdF9zaXplID0gJyc7XG5cbi8v5piv5ZCm5Y2V5Y2WXG52YXIgaXNfc2luZ2xlX3NhbGUgPSAwO1xuXG4vL1NldEludGVydmFs6L+U5ZueSURcblxudmFyIHByZXZWYWw7XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICBwcmV2VmFsID0gKyQoXCIjc2VydmljZUNvbnRlbnQgOnJhZGlvOmNoZWNrZWRcIikudmFsKCkgfHwgbnVsbDsgLy/lvZPliY3ljZXpgInmoYbnmoTlgLxcbiAgICBwYXJhbXNbJ3B1c2hfc3RhdGUnXSA9IHByZXZWYWw7XG5cbiAgICB2YXIgY2hlY2tlZFN0YXRlID0gJChcIiNjaGVja2JveC1pbWdcIikuYXR0cihcImNoZWNrZWQtc3RhdGVcIik7XG4gICAgaWYgKGNoZWNrZWRTdGF0ZSA9PSBcImNoZWNrZWRcIil7XG4gICAgICAgIHBheV90eXBlID0gMztcbiAgICAgICAgJCgnI3NlcnZpY2VDb250ZW50Jykuc2hvdygpO1xuICAgIH1cbiAgICBpZiggJCgnI3BhY2thZ2Vfc2VsZWN0JykuaGFzQ2xhc3MoJ2JvcmRlcl9ibHVlJykgKXtcbiAgICAgICAgJCgnI3NlcnZpY2VDb250ZW50Jykuc2hvdygpO1xuICAgIH1cblxuICAgIC8vY2hlY2tib3hcIuS4k+agj+WkluWNleWNllwiXG4gICAgJChcIiNjaGVja2JveC1pbWdcIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIHZhciBjaGVja2VkU3RhdGUgPSAkKFwiI2NoZWNrYm94LWltZ1wiKS5hdHRyKFwiY2hlY2tlZC1zdGF0ZVwiKTtcbiAgICAgICAgaWYgKGNoZWNrZWRTdGF0ZSA9PSBcInVuY2hlY2tlZFwiKSB7XG4gICAgICAgICAgICAkKFwiI2NoZWNrYm94LWltZ1wiKS5hdHRyKFwiY2hlY2tlZC1zdGF0ZVwiLCBcImNoZWNrZWRcIik7XG4gICAgICAgICAgICAkKFwiI2NoZWNrYm94LWltZ1wiKS5jc3MoXCJiYWNrZ3JvdW5kUG9zaXRpb25cIiwgXCItMTA0cHggMFwiKTtcbiAgICAgICAgICAgICQoXCIjc2luZ2xlX3ByaWNlX2RpdlwiKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgcGF5X3R5cGUgPSAzO1xuXG4gICAgICAgIH0gZWxzZSBpZiAoY2hlY2tlZFN0YXRlID09IFwiY2hlY2tlZFwiKSB7XG4gICAgICAgICAgICAkKFwiI2NoZWNrYm94LWltZ1wiKS5hdHRyKFwiY2hlY2tlZC1zdGF0ZVwiLCBcInVuY2hlY2tlZFwiKTtcbiAgICAgICAgICAgICQoXCIjY2hlY2tib3gtaW1nXCIpLmNzcyhcImJhY2tncm91bmRQb3NpdGlvblwiLCBcIi03OHB4IDBcIik7XG4gICAgICAgICAgICAkKFwiI3NpbmdsZV9wcmljZV9kaXZcIikuYWRkQ2xhc3MoJ2hpZGUnKTtcblxuICAgICAgICB9XG4gICAgfSk7XG5cbiAgICBnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbigpO1xuXG4gICAgY2hhbmdlU2luZ2xlQW5kUGFja2FnZSgpO1xuXG4gICAgZGF0ZXRpbWVwaWNrZXJjb25maWcoXCIjc3RhcnRfdGltZVwiKTtcblxuICAgIC8v55uR5ZCs6L6T5YWl5qGG5Lu35qC855qE5Y+Y5YyWXG4gICAgbW9uaXRvclByaWNlQ2hhbmdlKCk7XG5cbiAgICBpc1Nob3dTZXJ2aWNlKCk7XG4gICAgb3BlblNlcnZpY2UoKTtcbiAgICAkKFwiI3Jlc291cmNlX3BhY2thZ2VcIikub24oJ2NoYW5nZScsIGZ1bmN0aW9uKCkge1xuICAgICAgICBpc1Nob3dTZXJ2aWNlKCk7XG4gICAgfSk7XG5cbn0pO1xuXG5cbmZ1bmN0aW9uIGlzU2hvd1NlcnZpY2UoKSB7IC8v5Yik5pat6IO95ZCm5byA5ZCv5o6o6YCBXG4gICAgaWYoICQoJyNwYWNrYWdlX3NlbGVjdCcpLmhhc0NsYXNzKCdib3JkZXJfYmx1ZScpICl7IC8v5aaC5p6c5b2T5YmN6YCJ5Lit55qE5piv5LiT5qCPXG4gICAgICAgIHZhciBwYWNrYWdlUHJpY2UgPSAkKCcjcmVzb3VyY2VfcGFja2FnZSBvcHRpb246c2VsZWN0ZWQnKS5hdHRyKCdhYm91dCcpO1xuICAgICAgICBpZiggcGFja2FnZVByaWNlID4gMCApIHsgLy/lpoLmnpzkuJPmoI/ku7fmoLzlpKfkuo4wXG4gICAgICAgICAgICAkKCcjc2VydmljZUNvbnRlbnQnKS5zaG93KCk7XG4gICAgICAgICAgICBwYXJhbXNbJ3B1c2hfc3RhdGUnXSA9IHByZXZWYWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKCcjc2VydmljZUNvbnRlbnQnKS5oaWRlKCk7XG4gICAgICAgICAgICBkZWxldGUgcGFyYW1zWydwdXNoX3N0YXRlJ107XG4gICAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgICAkKCcjc2VydmljZUNvbnRlbnQnKS5oaWRlKCk7XG4gICAgICAgIGRlbGV0ZSBwYXJhbXNbJ3B1c2hfc3RhdGUnXTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIG9wZW5TZXJ2aWNlKCkge1xuICAgIGlmKCAkKCcjc2VydmljZUNvbnRlbnQnKS5kYXRhKCdzZXR0aW5nJykgPT0gMSl7XG4gICAgICAgICQoJyNzZXJ2aWNlQ29udGVudCcpLm9uKCdjbGljaycsICc6cmFkaW8nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgICB2YXIgZWxlID0gJCh0aGlzKTtcbiAgICAgICAgICAgIHZhciBjdXJyVmFsID0gK2VsZS52YWwoKTtcblxuICAgICAgICAgICAgaWYoIGN1cnJWYWwgIT09IHByZXZWYWwgJiYgY3VyclZhbCA9PSAxICkge1xuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICB2YXIgdHh0PSAgXCLmgqjpnIDopoHliLDlvq7kv6HlhazkvJflj7flkI7lj7DlsIbmgqjnmoTmnI3liqHlj7fmiYDlnKjooYzkuJrorr7nva7kuLrigJzmlZnogrIv5Z+56K6t4oCd77yM6K6+572u5a6M5oiQ5ZCO77yM5byA5ZCv5pyN5Yqh5Y+36YCa55+l5pa55Y+v5q2j5bi45Y+R6YCB5qih5p2/5raI5oGv44CCXCIrXG4gICAgICAgICAgICAgICAgXCI8YnIvPjxhIHRhcmdldD0nX2JsYW5rJyBocmVmPScvaGVscC9pbnN0cnVjdGlvbnMjaHA1X3d4X3NlcnZpY2UnIHN0eWxlPSdtYXJnaW4tdG9wOjEwcHg7Jz7ku4DkuYjmmK/mqKHmnb/mtojmga/vvJ88L2E+XCI7XG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHtcbiAgICAgICAgICAgICAgICAgICAgdGl0bGU6IFwi5o+Q56S6XCIsIC8v5by55Ye65qGG5qCH6aKYXG4gICAgICAgICAgICAgICAgICAgIGJ0bjogMywgLy/noa7lrpomJuWPlua2iFxuICAgICAgICAgICAgICAgICAgICBva3RleHQ6ICfmiJHlt7Lorr7nva4nLFxuICAgICAgICAgICAgICAgICAgICBjYW5jZWx0ZXh0OiAn5YWz6ZetJyxcbiAgICAgICAgICAgICAgICAgICAgaWNvbjogJ2JsdWUnLFxuICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbigpe1xuICAgICAgICAgICAgICAgICAgICAgICAgJC5hamF4KCcvaXNfaW5kdXN0cnknLHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0eXBlOiAnR0VUJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IHt9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5kb25lKGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGRhdGEucmV0O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmKGNvZGUgPT0gMCl7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZS5wcm9wKCdjaGVja2VkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZWYWwgPSBjdXJyVmFsO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvKua2iOaBr+aOqOmAgeW8gOWQryovXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtc1sncHVzaF9zdGF0ZSddID0gY3VyclZhbDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlcnZpY2VDb250ZW50JykuZGF0YSgnc3RhdGUnLGN1cnJWYWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5qih5p2/5raI5oGv5o6o6YCB5byA5ZCvXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaXoOazleW8gOWQr+a2iOaBr+aOqOmAge+8jOivt+aMieeFp+aPkOekuuS/ruaUueiuvue9rlwiKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9KS5mYWlsKGZ1bmN0aW9uKHhociwgdGV4dCwgZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacjeWKoeWZqOWHuuW3ruWVpu+8jOivt+eojeWQjumHjeivlVwiKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgJC5hbGVydCh0eHQsIFwiY3VzdG9tXCIsIG9wdGlvbik7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAvKuWFs+mXrea2iOaBr+aOqOmAgSovXG4gICAgICAgICAgICAgICAgcHJldlZhbCA9IGN1cnJWYWw7XG4gICAgICAgICAgICAgICAgcGFyYW1zWydwdXNoX3N0YXRlJ10gPSBjdXJyVmFsO1xuICAgICAgICAgICAgICAgICQoJyNzZXJ2aWNlQ29udGVudCcpLmRhdGEoJ3N0YXRlJyxjdXJyVmFsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgJCgnI3NlcnZpY2VDb250ZW50Jykub24oJ2NsaWNrJywgJzpyYWRpbycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHZhciBlbGUgPSAkKHRoaXMpO1xuICAgICAgICAgICAgdmFyIGN1cnJWYWwgPSBlbGUudmFsKCk7XG5cbiAgICAgICAgICAgIGlmKCBjdXJyVmFsICE9PSBwcmV2VmFsICYmIGN1cnJWYWwgPT0gMSApIHtcbiAgICAgICAgICAgICAgICBwcmV2VmFsID0gY3VyclZhbDtcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ3B1c2hfc3RhdGUnXSA9IGN1cnJWYWw7XG4gICAgICAgICAgICAgICAgJCgnI3NlcnZpY2VDb250ZW50JykuZGF0YSgnc3RhdGUnLGN1cnJWYWwpO1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLmqKHmnb/mtojmga/mjqjpgIHlvIDlkK9cIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHByZXZWYWwgPSBjdXJyVmFsO1xuICAgICAgICAgICAgICAgIHBhcmFtc1sncHVzaF9zdGF0ZSddID0gY3VyclZhbDtcbiAgICAgICAgICAgICAgICAkKCcjc2VydmljZUNvbnRlbnQnKS5kYXRhKCdzdGF0ZScsY3VyclZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbn1cblxuXG4vL+ebkeWQrOS7t+agvOWPmOWMlizpmLLmraLlh7rnjrDotJ/mlbBcbmZ1bmN0aW9uIG1vbml0b3JQcmljZUNoYW5nZSgpIHtcbiAgICBpbnB1dExpbWl0UHJpY2UoXCIjcmVzb3VyY2VfcHJpY2VcIik7XG59XG5cbi8v5YiH5o2i5Y2V5Liq5ZKM5Lqn5ZOB5YyF6YCJ5oupXG5mdW5jdGlvbiBjaGFuZ2VTaW5nbGVBbmRQYWNrYWdlKCkge1xuICAgICQoJy51cGxvYWRfdHlwZScpLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgJCgnLnVwbG9hZF90eXBlJykucmVtb3ZlQ2xhc3MoJ2JvcmRlcl9ibHVlJyk7XG4gICAgICAgICQoXCIjcmVzb3VyY2VfcHJpY2VcIikucmVtb3ZlQXR0cigncmVhZG9ubHknKTtcbiAgICAgICAgJChcIiNyZXNvdXJjZV9wcmljZVwiKS52YWwoJycpO1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdib3JkZXJfYmx1ZScpO1xuICAgICAgICBpc1Nob3dTZXJ2aWNlKCk7XG4gICAgICAgIGlmICgkKCcjc2luZ2xlX3NlbGVjdCcpLmhhc0NsYXNzKCdib3JkZXJfYmx1ZScpKSB7IC8v5Y2V5LiqXG4gICAgICAgICAgICBjb25zb2xlLmxvZygyKTtcbiAgICAgICAgICAgICQoJyNwcmljZV9kaXYnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgJCgnLnNlYXJjaFNlbGVjdEFyZWEnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgJCgnI3Jlc291cmNlX3BhY2thZ2UnKS5hZGRDbGFzcygnaGlkZScpO1xuXG4gICAgICAgICAgICBpZighKCQoJy5wYWNrYWdlX3NpZGVfcGF5JykuaGFzQ2xhc3MoJ2hpZGUnKSkpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgJCgnLnBhY2thZ2Vfc2lkZV9wYXknKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBwYXlfdHlwZSA9IDI7XG4gICAgICAgIH0gZWxzZSBpZiAoJCgnI3BhY2thZ2Vfc2VsZWN0JykuaGFzQ2xhc3MoJ2JvcmRlcl9ibHVlJykpIHsgLy/kuqflk4HljIVcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKDMpO1xuICAgICAgICAgICAgJCgnI3ByaWNlX2RpdicpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkKCcuc2VhcmNoU2VsZWN0QXJlYScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkKCcjcmVzb3VyY2VfcGFja2FnZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG5cbiAgICAgICAgICAgIGlmKCgkKCcucGFja2FnZV9zaWRlX3BheScpLmhhc0NsYXNzKCdoaWRlJykpKVxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgICQoJy5wYWNrYWdlX3NpZGVfcGF5JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcGF5X3R5cGUgPSAzO1xuICAgICAgICB9IGVsc2UgeyAvL+WFjei0uVxuICAgICAgICAgICAgY29uc29sZS5sb2coMSk7XG4gICAgICAgICAgICAkKCcjcHJpY2VfZGl2JykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICQoJy5zZWFyY2hTZWxlY3RBcmVhJykuYWRkQ2xhc3MoJ2hpZGUnKTtcbiAgICAgICAgICAgICQoJyNyZXNvdXJjZV9wYWNrYWdlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcblxuICAgICAgICAgICAgaWYoISgkKCcucGFja2FnZV9zaWRlX3BheScpLmhhc0NsYXNzKCdoaWRlJykpKVxuICAgICAgICAgICAge1xuXG4gICAgICAgICAgICAgICAgJCgnLnBhY2thZ2Vfc2lkZV9wYXknKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+iuvue9rlxuICAgICAgICAgICAgJChcIiNyZXNvdXJjZV9wcmljZVwiKS5hdHRyKCdyZWFkb25seScsICdyZWFkb25seScpO1xuICAgICAgICAgICAgJChcIiNyZXNvdXJjZV9wcmljZVwiKS52YWwoJzAuMDAnKTtcbiAgICAgICAgICAgIHBheV90eXBlID0gMTtcbiAgICAgICAgfVxuXG4gICAgfSk7XG59XG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIC8v6LWE5rqQ5bCB6Z2i5LiK5LygXG4gICAgJChcIiNyZXNvdXJjZV9waWNcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICBpc0VkaXRQaWMgPSB0cnVlO1xuICAgICAgICB2YXIgc3JjcyA9IGdldE9iamVjdFVSTCh0aGlzLmZpbGVzWzBdKTsgICAvL+iOt+WPlui3r+W+hFxuICAgICAgICB2YXIgZmlsZVNpemUgPSB0aGlzLmZpbGVzWzBdLnNpemU7XG4gICAgICAgIGlmICgkKHRoaXMpLmF0dHIoXCJpZFwiKSA9PSAncmVzb3VyY2VfcGljJyAmJiBmaWxlU2l6ZSA+IDQgKiAxMDAwICogMTAwMCkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCflm77niYflpKrlpKch6K+35LiN6KaB6LaF6L+HNE0hJyk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy/ojrflj5blm77niYfnmoTlrr3pq5hcbiAgICAgICAgICAgIHZhciBmaWxlLCBpbWc7XG4gICAgICAgICAgICBpZiAoKGZpbGUgPSB0aGlzLmZpbGVzWzBdKSkge1xuICAgICAgICAgICAgICAgIGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy53aWR0aDtcbiAgICAgICAgICAgICAgICAgICAgaGVpZ2h0ID0gdGhpcy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gc3JjcztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBjYXRjaCAoZSkge1xuXG4gICAgICAgIH1cblxuICAgICAgICAkKHRoaXMpLm5leHRBbGwoXCIucGljX2FkZFwiKS5hZGRDbGFzcygnaGlkZScpOyAgIC8vdGhpc+aMh+eahOaYr2lucHV0XG4gICAgICAgICQodGhpcykubmV4dEFsbCgnLnBpY19jbG9zZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7ICAgLy90aGlz5oyH55qE5pivaW5wdXRcbiAgICAgICAgJCh0aGlzKS5uZXh0QWxsKFwiLnBpY19zaG93XCIpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XG4gICAgICAgICQodGhpcykubmV4dEFsbChcIi5waWNfc2hvd1wiKS5hdHRyKFwic3JjXCIsIHNyY3MpOyAgICAvL3RoaXPmjIfnmoTmmK9pbnB1dFxuICAgICAgICAkKCcjaWNvbl91cGxvYWRQaWMnKS5yZW1vdmVDbGFzcygnaGlkZScpOyAgIC8v5LiK5Lyg5bCB6Z2i55qE5qCH5b+XXG4gICAgICAgICQoXCIucGljX2Nsb3NlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygnaGlkZScpOyAgICAgLy90aGlz5oyH55qE5pivc3BhblxuICAgICAgICAgICAgJCgnI2ljb25fdXBsb2FkUGljJykuYWRkQ2xhc3MoJ2hpZGUnKTsgICAvL+S4iuS8oOWwgemdoueahOagh+W/l1xuICAgICAgICAgICAgJCgnI2ljb25fdXBsb2FkUGljX3N1Y2Nlc3MnKS5hZGRDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5uZXh0QWxsKFwiLnBpY19zaG93XCIpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgICAgICAgICAkKHRoaXMpLm5leHRBbGwoXCIucGljX2FkZFwiKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgICAgICAgICAgJCh0aGlzKS5uZXh0QWxsKFwiLnBpY19hZGRcIikuYXR0cihcInNyY1wiLCBvbGRfcGljX3VybCk7XG4gICAgICAgICAgICAkKHRoaXMpLnByZXZBbGwoJyNyZXNvdXJjZV9waWMnKS52YWwoJycpO1xuICAgICAgICAgICAgaXNFZGl0UGljID0gZmFsc2U7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmKCFjaGVja1BpYygpKXtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAvL+S4iuS8oOWwgemdolxuICAgICAgICAgICAgc2xpY2VVcGxvYWQoJyNyZXNvdXJjZV9waWMnLCBnZXRfY29zX2ltYWdlX3BhdGgoKSwgUmVzb3VyY2VQaWNfc3VjY2Vzc0NhbGxCYWNrLCBSZXNvdXJjZVBpY19lcnJvckNhbGxCYWNrLCAncGljdHVyZScpO1xuICAgICAgICB9XG4gICAgfSk7XG5cbn0pXG5cbmZ1bmN0aW9uIGdldE9iamVjdFVSTChmaWxlKSB7XG4gICAgdmFyIHVybCA9IG51bGw7XG4gICAgaWYgKHdpbmRvdy5jcmVhdGVPYmplY3RVUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHVybCA9IHdpbmRvdy5jcmVhdGVPYmplY3RVUkwoZmlsZSlcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5VUkwgIT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpXG4gICAgfSBlbHNlIGlmICh3aW5kb3cud2Via2l0VVJMICE9IHVuZGVmaW5lZCkge1xuICAgICAgICB1cmwgPSB3aW5kb3cud2Via2l0VVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKVxuICAgIH1cbiAgICByZXR1cm4gdXJsXG59XG5cbi8v5qC45a+55bCB6Z2i5Zu+XG5mdW5jdGlvbiBjaGVja1BpYygpIHtcbiAgICAvL+i1hOa6kOWwgemdolxuICAgIHZhciBwaWNfaW5wdXQgPSAkKCcjcmVzb3VyY2VfcGljJykudmFsKCk7XG4gICAgaWYgKHBpY19pbnB1dC5sZW5ndGggPT0gMCkge1xuICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+WwgemdouS4jeiDveS4uuepuiEnKTtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciBwcm9wX3BpYyA9ICQoJyNyZXNvdXJjZV9waWMnKS5wcm9wKCdmaWxlcycpO1xuICAgICAgICB2YXIgcGljX3R5cGUgPSBwcm9wX3BpY1swXS50eXBlO1xuICAgICAgICBpZiAocGljX3R5cGUuaW5kZXhPZignaW1hZ2UnKSA8IDApIHsgLy8gJ2ltYWdlL2pwZWcnXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+WwgemdouW/hemhu+S4uuWbvueJh+aWh+S7tiEnKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gdHJ1ZTtcbn1cbi8v5bCB6Z2i5Zu+5LiK5Lyg5oiQ5Yqf55qE5Zue6LCDXG52YXIgUmVzb3VyY2VQaWNfc3VjY2Vzc0NhbGxCYWNrID0gZnVuY3Rpb24gKHJlc3VsdCkge1xuICAgICQoJyNpY29uX3VwbG9hZFBpYycpLmFkZENsYXNzKCdoaWRlJyk7XG4gICAgJCgnI2ljb25fdXBsb2FkUGljX3N1Y2Nlc3MnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xuICAgIC8vdmFyIGpzb25SZXN1bHQgPSAkLnBhcnNlSlNPTihyZXN1bHQpO1xuICAgIC8v6I635Y+W5Yiw6LWE5rqQY2Ru6K6/6Zeu6L+e5o6lXG4gICAgdmFyIHVybCA9IHJlc3VsdC5kYXRhLmFjY2Vzc191cmw7XG4gICAgLy/noa7orqTlsIHpnaLkuIrkvKDmiJDlip9cbiAgICBwaWNfdXJsID0gdXJsO1xuICAgIHJlYWR5X3BpYyA9IHRydWU7XG4gICAgIGNvbnNvbGUubG9nKCflsIHpnaLpn7PpopHkuIrkvKDmiJDlip/nmoTlm57osIMt44CLJytwaWNfdXJsKTtcbn1cbi8v5bCB6Z2i5Zu+5LiK5Lyg5aSx6LSl55qE5Zue6LCDXG52YXIgUmVzb3VyY2VQaWNfZXJyb3JDYWxsQmFjayA9IGZ1bmN0aW9uIChyZXN1bHQpIHtcbiAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+WwgemdouWbvuS4iuS8oOWksei0pe+8jOivt+mHjeaWsOS4iuS8oCEnKTtcbn1cblxuXG5mdW5jdGlvbiBzbGljZVVwbG9hZChpZGVudGl0eSwgcmVtb3RlUGF0aCwgc3VjY2Vzc0NhbGxCYWNrLCBlcnJvckNhbGxCYWNrLCBmaWxlX3R5cGUpIHtcblxuICAgIC8v5LiK5LygKOebtOaOpemAmui/h2pz5LiK5LygY2RuKVxuICAgIHZhciBmaWxlcyA9ICQoaWRlbnRpdHkpLnByb3AoJ2ZpbGVzJyk7XG4gICAgaWYgKGZpbGVzICYmIGZpbGVzLmxlbmd0aCA9PSAxKSB7XG5cbiAgICAgICAgLy9pZiAoISQoJyNxcycpLmxlbmd0aCkge1xuICAgICAgICAvLyAgICAkKCdib2R5JykuYXBwZW5kKCc8b2JqZWN0IGlkPVwicXNcIiB3aWR0aD1cIjBcIiBoZWlnaHQ9XCIwXCIgdHlwZT1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIgZGF0YT1cInNkay9Tb21ldGhpbmd0ZXN0LnN3ZlwiIHN0eWxlPVwidmlzaWJpbGl0eTogdmlzaWJsZTtcIj48L29iamVjdD4nKTtcbiAgICAgICAgLy99XG5cbiAgICAgICAgLy/lj5blpKflsI9cbiAgICAgICAgaWYgKGZpbGVfdHlwZSA9PSAnbm9FZmZlY3QnKXtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZV9sb2NhbF91cmwgPSBnZXRPYmplY3RVUkwoZmlsZXNbMF0pO1xuICAgICAgICAgICAgbm9FZmZlY3Rfc2l6ZSA9IChmaWxlc1swXVsnc2l6ZSddIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgxKTtcbiAgICAgICAgICAgIHZhciByZXNvdXJjZV9lbGVtZW50ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJub0VmZmVjdF90aW1lXCIpO1xuICAgICAgICAgICAgcmVzb3VyY2VfZWxlbWVudC5zcmMgPSByZXNvdXJjZV9sb2NhbF91cmw7XG4gICAgICAgIH1cblxuICAgICAgICAvL+iOt+WPluaWh+S7tueahE1ENeWAvFxuICAgICAgICBicm93c2VyTUQ1RmlsZShmaWxlc1swXSwgZnVuY3Rpb24gKGVyciwgbWQ1KSB7XG4gICAgICAgICAgICAvL+iOt+WPluaWh+S7tuWGheWuueeahE1ENVxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ01ENTonICsgbWQ1KTtcbiAgICAgICAgICAgIC8v5Y+W5paH5Lu25ZCN5ZCO57yAXG4gICAgICAgICAgICB2YXIgZmlsZV9uYW1lID0gZmlsZXNbMF1bJ25hbWUnXTtcbiAgICAgICAgICAgIHZhciBuYW1lcyA9IGZpbGVfbmFtZS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgdmFyIHN1ZmZpeCA9IG5hbWVzW25hbWVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3N1ZmZpeDonICsgc3VmZml4KTtcbiAgICAgICAgICAgIHJlbW90ZVBhdGggPSByZW1vdGVQYXRoICsgbWQ1ICsgXCIuXCIgKyBzdWZmaXg7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmVtb3RlUGF0aDonICsgcmVtb3RlUGF0aCk7XG5cbiAgICAgICAgICAgIGNvcy51cGxvYWRGaWxlV2l0aG91dFBybyhzdWNjZXNzQ2FsbEJhY2ssIGVycm9yQ2FsbEJhY2ssIHJlbW90ZVBhdGgsIGZpbGVzWzBdLCAwKTtcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fpgInmi6nkuIDkuKrmlofku7ZcIik7XG4gICAgfVxufVxuXG5cbi8v5pu05paw5Zu+5paHXG5mdW5jdGlvbiB1cGRhdGVBcnRpY2xlKGlkKSB7XG4gICAgdmFyIGlkID0gaWQ7XG4gICAgLy/otYTmupDlkI3np7BcbiAgICB2YXIgcmVzb3VyY2VfdGl0bGUgPSAkKFwiI3Jlc291cmNlX3RpdGxlXCIpLnZhbCgpLnRyaW0oKTtcbiAgICBpZiAocmVzb3VyY2VfdGl0bGUubGVuZ3RoID09IDApIHtcbiAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCflkI3np7DkuI3og73kuLrnqbohJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvL+S4iuaetuaXtumXtFxuICAgIHZhciBzdGFydF90aW1lID0gJCgnI3N0YXJ0X3RpbWUnKS52YWwoKS50cmltKCk7XG4gICAgaWYgKHN0YXJ0X3RpbWUubGVuZ3RoID09IDApIHtcbiAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfkuIrmnrbml7bpl7TkuI3og73kuLrnqbohJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICAvL+exu+Wei+mHkemSsVxuICAgIHZhciByZXNvdXJjZV9wcmljZSA9ICcnO1xuICAgIHZhciByZXNvdXJjZV9wYWNrYWdlID0gJyc7XG4gICAgdmFyIHBhY2thZ2VfbmFtZSA9ICcnO1xuICAgIHZhciBwaWVjZV9wcmljZSA9ICcnO1xuICAgIHZhciBwcm9kdWN0X3N0YXRlID0nJyA7XG4gICAgaWYgKHBheV90eXBlICE9IDMpIHtcbiAgICAgICAgcmVzb3VyY2VfcHJpY2UgPSAkKCcjcmVzb3VyY2VfcHJpY2UnKS52YWwoKS50cmltKCkgKiAxMDA7XG4gICAgICAgIGlmIChwYXlfdHlwZSA9PSAyKSB7XG4gICAgICAgICAgICBpZiAocmVzb3VyY2VfcHJpY2UubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+S7t+agvOS4jeiDveS4uuepuiEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIGlmIChyZXNvdXJjZV9wcmljZSA8PSAwKSB7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfku7fmoLzpnIDpq5jkuo4wLjAwIScpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgcmVzb3VyY2VfcGFja2FnZSA9ICQoJyNyZXNvdXJjZV9wYWNrYWdlJykuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS52YWwoKTtcbiAgICAgICAgaWYgKHJlc291cmNlX3BhY2thZ2UgPT0gdW5kZWZpbmVkIHx8IHJlc291cmNlX3BhY2thZ2UubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn6K+36YCJ5oup5Lqn5ZOB5YyFIScpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHBhY2thZ2VfbmFtZSA9ICQoXCIjcmVzb3VyY2VfcGFja2FnZVwiKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLnRleHQoKS50cmltKCk7XG4gICAgICAgIHBpZWNlX3ByaWNlID0gJChcIiNyZXNvdXJjZV9wYWNrYWdlXCIpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikuYXR0cihcImFib3V0XCIpO1xuICAgICAgICBwcm9kdWN0X3N0YXRlID0gJChcIiNyZXNvdXJjZV9wYWNrYWdlXCIpLmZpbmQoXCJvcHRpb246c2VsZWN0ZWRcIikuYXR0cihcInN0YXRlXCIpO1xuXG5cbiAgICAgICAgLy9UT0RPOuaYr+WQpuWNleWNllxuICAgICAgICB2YXIgY2hlY2tlZFN0YXRlID0gJChcIiNjaGVja2JveC1pbWdcIikuYXR0cihcImNoZWNrZWQtc3RhdGVcIik7XG4gICAgICAgIGlmIChjaGVja2VkU3RhdGUgPT0gXCJ1bmNoZWNrZWRcIikge1xuICAgICAgICAgICAgaXNfc2luZ2xlX3NhbGUgPSAwOy8v5LiN5Y2V5Y2WXG5cbiAgICAgICAgfSBlbHNlIGlmIChjaGVja2VkU3RhdGUgPT0gXCJjaGVja2VkXCIpIHtcbiAgICAgICAgICAgIGlzX3NpbmdsZV9zYWxlID0gMTsvL+WNleWNllxuICAgICAgICAgICAgdmFyIHJlZyA9IC9eKCgwKXwoWzEtOV17MX1cXGQqKSkoXFwuXFxkezEsMn0pPyQvO1xuXG4gICAgICAgICAgICB2YXIgc2luZ2xlX3ByaWNlID0gJChcIiNzaW5nbGVfcHJpY2VcIikudmFsKCkudHJpbSgpO1xuXG4gICAgICAgICAgICBpZihzaW5nbGVfcHJpY2UubGVuZ3RoPjApXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWYocmVnLnRlc3Qoc2luZ2xlX3ByaWNlKSlcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChzaW5nbGVfcHJpY2UgPT0gMCB8fCBzaW5nbGVfcHJpY2UgPT0gMC4wIHx8IHNpbmdsZV9wcmljZSA9PSAwLjAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1dGlsLnNob3dFcnJvcignI3dpdGhkcmF3X2Ftb3VudC1lcnInLCAn5o+Q546w6YeR6aKd5LiN6IO95Li6MO+8gScsICcjd2l0aGRyYXdfYW1vdW50JywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+mHkemineS4jeiDveS4ujAhJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfcHJpY2UgPSBzaW5nbGVfcHJpY2UqMTAwO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoICfor7fovpPlhaXmraPnoa7nmoTph5Hpop3vvIEnKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn6K+36L6T5YWl5Y2V5Lu3IScpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy/otYTmupDlsIHpnaJcbiAgICB2YXIgcGljX2lucHV0ID0gJCgnI3Jlc291cmNlX3BpYycpLnZhbCgpO1xuICAgIGlmIChwaWNfaW5wdXQubGVuZ3RoICE9IDApIHtcbiAgICAgICAgaXNFZGl0UGljID0gdHJ1ZTtcbiAgICB9XG5cbiAgICAvL+iOt+WPlmh0bWzlhoXlrrnvvIzov5Tlm546IDxwPmhlbGxvPC9wPlxuICAgIHZhciB1ZSA9IFVFLmdldEVkaXRvcignY29udGFpbmVyJyk7XG4gICAgdmFyIGh0bWwgPSB1ZS5nZXRDb250ZW50KCk7XG4gICAgaWYgKGh0bWwubGVuZ3RoID09IDApIHtcbiAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfor7fovpPlhaXlm77mloflhoXlrrkhJyk7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICB2YXIgY29udGVudCA9IHVlLmdldFBsYWluVHh0KCk7XG5cbiAgICBzaG93TG9hZGluZygpO1xuICAgIC8vIGNvbnNvbGUubG9nKHJlc291cmNlX3ByaWNlK1wiPj4+XCIrcGllY2VfcHJpY2UpO1xuICAgIC8v57yW6L6R6L+H5bCx5LiK5Lyg5Zu+54mHKOebtOaOpemAmui/h2pz5LiK5LygY2RuKVxuICAgIGlmIChpc0VkaXRQaWMgPT0gdHJ1ZSkge1xuICAgICAgICB2YXIgZmlsZXMgPSAkKCcjcmVzb3VyY2VfcGljJykucHJvcCgnZmlsZXMnKTtcbiAgICAgICAgLy9pZiAoISQoJyNxcycpLmxlbmd0aCkge1xuICAgICAgICAvLyAgICAkKCdib2R5JykuYXBwZW5kKCc8b2JqZWN0IGlkPVwicXNcIiB3aWR0aD1cIjBcIiBoZWlnaHQ9XCIwXCIgdHlwZT1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIgZGF0YT1cInNkay9Tb21ldGhpbmd0ZXN0LnN3ZlwiIHN0eWxlPVwidmlzaWJpbGl0eTogdmlzaWJsZTtcIj48L29iamVjdD4nKTtcbiAgICAgICAgLy99XG4gICAgICAgIC8v6I635Y+W5paH5Lu255qETUQ15YC8XG4gICAgICAgIGJyb3dzZXJNRDVGaWxlKGZpbGVzWzBdLCBmdW5jdGlvbiAoZXJyLCBtZDUpIHtcbiAgICAgICAgICAgIC8v5Y+W5paH5Lu25ZCN5ZCO57yAXG4gICAgICAgICAgICB2YXIgZmlsZV9uYW1lID0gZmlsZXNbMF1bJ25hbWUnXTtcbiAgICAgICAgICAgIHZhciBuYW1lcyA9IGZpbGVfbmFtZS5zcGxpdCgnLicpO1xuICAgICAgICAgICAgdmFyIHN1ZmZpeCA9IG5hbWVzW25hbWVzLmxlbmd0aCAtIDFdO1xuICAgICAgICAgICAgdmFyIHJlbW90ZVBhdGggPSBnZXRfY29zX2ltYWdlX3BhdGgoKSArIG1kNSArIFwiLlwiICsgc3VmZml4O1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocmVtb3RlUGF0aCk7XG4gICAgICAgICAgICBjb3MudXBsb2FkRmlsZVdpdGhvdXRQcm8oZnVuY3Rpb24gKHJlc3VsdCkgLy/miJDlip/lm57osINcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAvL3ZhciBqc29uUmVzdWx0ID0gJC5wYXJzZUpTT04ocmVzdWx0KTtcbiAgICAgICAgICAgICAgICB2YXIgcGljX3VybCA9IHJlc3VsdC5kYXRhLmFjY2Vzc191cmw7XG4gICAgICAgICAgICAgICAgdmFyIGltZ191cmxfY29tcHJlc3NlZCA9IHBpY191cmw7XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2cocGljX3VybCk7XG4gICAgICAgICAgICAgICAgLy/mj5LmlbDmja5cbiAgICAgICAgICAgICAgICAkLnBvc3QoXCIvdXBkYXRlYXJ0aWNsZVwiLCB7XG4gICAgICAgICAgICAgICAgICAgIFwiaWRcIjogaWQsXG4gICAgICAgICAgICAgICAgICAgIFwidGl0bGVcIjogcmVzb3VyY2VfdGl0bGUsXG4gICAgICAgICAgICAgICAgICAgIFwic3RhcnRfYXRcIjogc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICAgICAgXCJpbWdfdXJsXCI6IHBpY191cmwsXG4gICAgICAgICAgICAgICAgICAgIFwiaW1nX3VybF9jb21wcmVzc2VkXCI6IGltZ191cmxfY29tcHJlc3NlZCxcbiAgICAgICAgICAgICAgICAgICAgXCJwYXltZW50X3R5cGVcIjogcGF5X3R5cGUsXG4gICAgICAgICAgICAgICAgICAgIFwicHJvZHVjdF9pZFwiOiByZXNvdXJjZV9wYWNrYWdlLFxuICAgICAgICAgICAgICAgICAgICBcInByb2R1Y3RfbmFtZVwiOiBwYWNrYWdlX25hbWUsXG4gICAgICAgICAgICAgICAgICAgIFwiY29udGVudFwiOiBjb250ZW50LFxuICAgICAgICAgICAgICAgICAgICBcInBpZWNlX3ByaWNlXCI6IHJlc291cmNlX3ByaWNlIT0gMCA/IHJlc291cmNlX3ByaWNlIDogcGllY2VfcHJpY2UsXG4gICAgICAgICAgICAgICAgICAgIFwib3JnX2NvbnRlbnRcIjogaHRtbCxcbiAgICAgICAgICAgICAgICAgICAgXCJpc19zaW5nbGVfc2FsZVwiOmlzX3NpbmdsZV9zYWxlLFxuICAgICAgICAgICAgICAgICAgICBcInB1c2hfc3RhdGVcIjogcGFyYW1zWydwdXNoX3N0YXRlJ10gfHwgMFxuICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnJldCA9PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5LiK5Lyg5oiQ5YqfIVwiLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnL2FydGljbGVfbGlzdCdcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LiK5Lyg5aSx6LSlIVwiKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXN1bHQpICAgICAvL+Wksei0peWbnuiwg1xuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOWksei0pSFcIik7XG4gICAgICAgICAgICAgICAgdXBsb2FkRXJyb3JTaG93KHJlc3VsdC5yZXNwb25zZVRleHQpO1xuICAgICAgICAgICAgfSwgcmVtb3RlUGF0aCwgZmlsZXNbMF0sIDApXG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgJC5wb3N0KFwiL3VwZGF0ZWFydGljbGVcIiwge1wiaWRcIjogaWQsIFwidGl0bGVcIjogcmVzb3VyY2VfdGl0bGUsIFwic3RhcnRfYXRcIjogc3RhcnRfdGltZSxcbiAgICAgICAgICAgICAgICBcInBheW1lbnRfdHlwZVwiOiBwYXlfdHlwZSxcInByb2R1Y3RfaWRcIjogcmVzb3VyY2VfcGFja2FnZSwgXCJwcm9kdWN0X25hbWVcIjogcGFja2FnZV9uYW1lLFxuICAgICAgICAgICAgICAgIFwicHJvZHVjdF9zdGF0ZVwiOnByb2R1Y3Rfc3RhdGUsXCJjb250ZW50XCI6IGNvbnRlbnQsXG4gICAgICAgICAgICAgICAgXCJwaWVjZV9wcmljZVwiOiByZXNvdXJjZV9wcmljZSAhPSAwID8gcmVzb3VyY2VfcHJpY2UgOiBwaWVjZV9wcmljZSxcbiAgICAgICAgICAgICAgICBcIm9yZ19jb250ZW50XCI6IGh0bWwsXG4gICAgICAgICAgICAgICAgXCJpc19zaW5nbGVfc2FsZVwiOmlzX3NpbmdsZV9zYWxlLFxuICAgICAgICAgICAgICAgIFwicHVzaF9zdGF0ZVwiOiBwYXJhbXNbJ3B1c2hfc3RhdGUnXSB8fCAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgZnVuY3Rpb24gKGRhdGEpXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXQgPT0gMClcbiAgICAgICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLkv53lrZjmiJDlip8hXCIsIGZ1bmN0aW9uICgpXG4gICAgICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlTGlzdFVybCgnYXJ0aWNsZV9saXN0b3AnLCcvYXJ0aWNsZV9saXN0Jyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgcmVfdXJsID0gJC5jb29raWUoJ2FydGljbGVfbGlzdG9wJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZihyZV91cmwpe1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXVybCA9IHJlX3VybC5zcGxpdCgnfCcpWzFdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gcmV1cmw7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNle1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9hcnRpY2xlX2xpc3QnO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5L+d5a2Y5aSx6LSlIVwiKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XG4gICAgICAgICAgICB9KTtcbiAgICB9XG5cbn1cblxuLy/osIPliLDmlrDlop7kuJPmoI9cbmZ1bmN0aW9uIHRvQWRkUGFja2FnZSgpIHtcbiAgICAkLmFsZXJ0LnhjQ29uZmlybSgn5oKo56Gu5a6a6KaB5Y675paw5aKe5LiT5qCP6aG16Z2i5ZCXPycsICdjb25maXJtJywge1xuICAgICAgICBvbk9rOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvcGFja2FnZV9saXN0JztcbiAgICAgICAgfVxuICAgIH0pO1xufVxuXG5cbiJdfQ==
