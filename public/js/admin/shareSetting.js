var cos=new InitCosCloud;var params={};var file=null,imgUrl=null;$(document).ready(function(){picHandle();$("#save").click(function(){params["wx_share_title"]=$.trim($("#wx_share_title").val());if(params["wx_share_title"].length==0){baseUtils.show.redTip("亲,请输入分享标题哦");return false}params["wx_share_content"]=$.trim($("#wx_share_content").val());if(params["wx_share_content"].length==0){baseUtils.show.redTip("亲,请输入分享描述哦");return false}if($("#reBackImg").attr("src")==undefined){baseUtils.show.redTip("亲,请设置分享配图哦");return false}showLoading();uploadShareImage()})});function picHandle(){$("#uploadImage").change(function(){var e=this.files[0];var i=e.name;var n,t;t=i.lastIndexOf(".");if(t!=-1){n=i.substr(t+1).toUpperCase();n=n.toLowerCase();if(n!="jpg"&&n!="png"&&n!="jpeg"&&n!="gif"){baseUtils.show.blueTip("请上传图片类型的文件哦~");return}}else{baseUtils.show.blueTip("请上传图片类型的文件哦~");return}if(e){file=e;imgUrl=getObjectURL(e);$("#reBackImg").prop("src",imgUrl)}})}function getObjectURL(e){var i=null;if(window.createObjectURL!=undefined){i=window.createObjectURL(e)}else if(window.URL!=undefined){i=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){i=window.webkitURL.createObjectURL(e)}return i}function removeObjectURL(e){if(window.revokeObjectURL!=undefined){window.revokeObjectURL(e)}else if(window.URL!=undefined){window.URL.revokeObjectURL(e)}else if(window.webkitURL!=undefined){window.webkitURL.revokeObjectURL(e)}}function getSuffix(e){var i=e.split(".");return i[i.length-1]}function uploadShareImage(){if(imgUrl){removeObjectURL(imgUrl);imgUrl=null;browserMD5File(file,function(e,i){var n=get_cos_image_path()+i+"."+getSuffix(file["name"]);cos.uploadFileWithoutPro(function(e){params["wx_share_image"]=e.data.access_url;updateShareInfo()},function(e){baseUtils.show.redTip("上传失败!")},n,file,0)})}else{updateShareInfo()}}function updateShareInfo(){$.post("/updateshareinfo",{params:params},function(e){hideLoading();if(e.code==0){baseUtils.show.blueTip(e.msg,function(){window.location.reload()})}else{baseUtils.show.redTip(e.msg)}})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNoYXJlU2V0dGluZy5qcyJdLCJuYW1lcyI6WyJjb3MiLCJJbml0Q29zQ2xvdWQiLCJwYXJhbXMiLCJmaWxlIiwiaW1nVXJsIiwiJCIsImRvY3VtZW50IiwicmVhZHkiLCJwaWNIYW5kbGUiLCJjbGljayIsInRyaW0iLCJ2YWwiLCJsZW5ndGgiLCJiYXNlVXRpbHMiLCJzaG93IiwicmVkVGlwIiwiYXR0ciIsInVuZGVmaW5lZCIsInNob3dMb2FkaW5nIiwidXBsb2FkU2hhcmVJbWFnZSIsImNoYW5nZSIsIm5ld0ZpbGUiLCJ0aGlzIiwiZmlsZXMiLCJpbWdOYW1lIiwibmFtZSIsImV4dCIsImlkeCIsImxhc3RJbmRleE9mIiwic3Vic3RyIiwidG9VcHBlckNhc2UiLCJ0b0xvd2VyQ2FzZSIsImJsdWVUaXAiLCJnZXRPYmplY3RVUkwiLCJwcm9wIiwidXJsIiwid2luZG93IiwiY3JlYXRlT2JqZWN0VVJMIiwiVVJMIiwid2Via2l0VVJMIiwicmVtb3ZlT2JqZWN0VVJMIiwicmV2b2tlT2JqZWN0VVJMIiwiZ2V0U3VmZml4IiwiZmlsZW5hbWUiLCJuYW1lcyIsInNwbGl0IiwiYnJvd3Nlck1ENUZpbGUiLCJlcnIiLCJtZDUiLCJyZW1vdGVQYXRoIiwiZ2V0X2Nvc19pbWFnZV9wYXRoIiwidXBsb2FkRmlsZVdpdGhvdXRQcm8iLCJyZXN1bHQiLCJkYXRhIiwiYWNjZXNzX3VybCIsInVwZGF0ZVNoYXJlSW5mbyIsInBvc3QiLCJoaWRlTG9hZGluZyIsImNvZGUiLCJtc2ciLCJsb2NhdGlvbiIsInJlbG9hZCJdLCJtYXBwaW5ncyI6IkFBTUEsR0FBSUEsS0FBTSxHQUFJQyxhQUNkLElBQUlDLFVBQ0osSUFBSUMsTUFBTyxLQUFNQyxPQUFTLElBQzFCQyxHQUFFQyxVQUFVQyxNQUFNLFdBQ2RDLFdBR0FILEdBQUUsU0FBU0ksTUFBTSxXQUdiUCxPQUFPLGtCQUFrQkcsRUFBRUssS0FBTUwsRUFBRSxtQkFBbUJNLE1BQ3RELElBQUdULE9BQU8sa0JBQWtCVSxRQUFRLEVBQ3BDLENBQ0lDLFVBQVVDLEtBQUtDLE9BQU8sYUFDdEIsT0FBTyxPQUlYYixPQUFPLG9CQUFvQkcsRUFBRUssS0FBTUwsRUFBRSxxQkFBcUJNLE1BQzFELElBQUdULE9BQU8sb0JBQW9CVSxRQUFRLEVBQ3RDLENBQ0lDLFVBQVVDLEtBQUtDLE9BQU8sYUFDdEIsT0FBTyxPQUlYLEdBQUlWLEVBQUUsY0FBY1csS0FBSyxRQUFRQyxVQUNqQyxDQUNJSixVQUFVQyxLQUFLQyxPQUFPLGFBQ3RCLE9BQU8sT0FVWEcsYUFDQUMsdUJBTVIsU0FBU1gsYUFFTEgsRUFBRSxnQkFBZ0JlLE9BQU8sV0FHckIsR0FBSUMsR0FBVUMsS0FBS0MsTUFBTSxFQUV6QixJQUFJQyxHQUFVSCxFQUFRSSxJQUV0QixJQUFJQyxHQUFJQyxDQUNSQSxHQUFNSCxFQUFRSSxZQUFZLElBQzFCLElBQUlELElBQVEsRUFBRSxDQUNWRCxFQUFNRixFQUFRSyxPQUFPRixFQUFJLEdBQUdHLGFBQzVCSixHQUFNQSxFQUFJSyxhQUdWLElBQUlMLEdBQU8sT0FBU0EsR0FBTyxPQUFTQSxHQUFPLFFBQVVBLEdBQU8sTUFBTSxDQUU5RGIsVUFBVUMsS0FBS2tCLFFBQVEsZUFFdkIsYUFFRCxDQUVIbkIsVUFBVUMsS0FBS2tCLFFBQVEsZUFFdkIsUUFHSixHQUFHWCxFQUFRLENBQ1BsQixLQUFPa0IsQ0FDUGpCLFFBQVM2QixhQUFhWixFQUN0QmhCLEdBQUUsY0FBYzZCLEtBQUssTUFBTzlCLFdBMEJ4QyxRQUFTNkIsY0FBYTlCLEdBQ2xCLEdBQUlnQyxHQUFNLElBQ1YsSUFBSUMsT0FBT0MsaUJBQW1CcEIsVUFDOUIsQ0FDSWtCLEVBQU1DLE9BQU9DLGdCQUFnQmxDLE9BRTVCLElBQUlpQyxPQUFPRSxLQUFPckIsVUFDdkIsQ0FDSWtCLEVBQU1DLE9BQU9FLElBQUlELGdCQUFnQmxDLE9BRWhDLElBQUlpQyxPQUFPRyxXQUFhdEIsVUFDN0IsQ0FDSWtCLEVBQU1DLE9BQU9HLFVBQVVGLGdCQUFnQmxDLEdBRTNDLE1BQU9nQyxHQUVYLFFBQVNLLGlCQUFnQkwsR0FDckIsR0FBSUMsT0FBT0ssaUJBQW1CeEIsVUFBVyxDQUNyQ21CLE9BQU9LLGdCQUFnQk4sT0FDcEIsSUFBSUMsT0FBT0UsS0FBT3JCLFVBQVcsQ0FDaENtQixPQUFPRSxJQUFJRyxnQkFBZ0JOLE9BQ3hCLElBQUlDLE9BQU9HLFdBQWF0QixVQUFXLENBQ3RDbUIsT0FBT0csVUFBVUUsZ0JBQWdCTixJQUt6QyxRQUFTTyxXQUFVQyxHQUNmLEdBQUlDLEdBQVFELEVBQVNFLE1BQU0sSUFDM0IsT0FBT0QsR0FBTUEsRUFBTWhDLE9BQVMsR0FJaEMsUUFBU08sb0JBbUJMLEdBQUlmLE9BQVMsQ0FDVG9DLGdCQUFnQnBDLE9BQ2hCQSxRQUFTLElBQ1QwQyxnQkFBZTNDLEtBQUssU0FBUzRDLEVBQUlDLEdBQzdCLEdBQUlDLEdBQWFDLHFCQUF1QkYsRUFBTSxJQUFNTixVQUFVdkMsS0FBSyxRQUNuRUgsS0FBSW1ELHFCQUFxQixTQUFVQyxHQUMvQmxELE9BQU8sa0JBQWtCa0QsRUFBT0MsS0FBS0MsVUFDckNDLG9CQUNGLFNBQVVILEdBQ1J2QyxVQUFVQyxLQUFLQyxPQUFPLFVBQ3ZCa0MsRUFBWTlDLEtBQU0sU0FFdEIsQ0FDSG9ELG1CQStCUixRQUFTQSxtQkFDTGxELEVBQUVtRCxLQUFLLG9CQUFvQnRELE9BQVNBLFFBQVEsU0FBU21ELEdBQ2pESSxhQUNBLElBQUdKLEVBQUtLLE1BQU0sRUFBRyxDQUNiN0MsVUFBVUMsS0FBS2tCLFFBQVFxQixFQUFLTSxJQUFJLFdBRTVCdkIsT0FBT3dCLFNBQVNDLGVBRWpCLENBQ0hoRCxVQUFVQyxLQUFLQyxPQUFPc0MsRUFBS00iLCJmaWxlIjoic2hhcmVTZXR0aW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgU3R1cGhpbiBvbiAyMDE2LzkvMjYuXHJcbiAqL1xyXG4vL+iFvuiur+S6kei1hOa6kFxyXG4vL3ZhciBidWNrZXROYW1lID0gd2luZG93LmNvc19idWNrZXRfbmFtZTtcclxuLy92YXIgY29zID0gbmV3IENvc0Nsb3VkKHdpbmRvdy5jb3NfYXBwX2lkKTtcclxudmFyIGNvcyA9IG5ldyBJbml0Q29zQ2xvdWQoKTtcclxudmFyIHBhcmFtcz17fTtcclxudmFyIGZpbGUgPSBudWxsLCBpbWdVcmwgPSBudWxsO1xyXG4kKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbigpIHtcclxuICAgIHBpY0hhbmRsZSgpO1xyXG5cclxuICAgIC8v54K55Ye75L+d5a2YXHJcbiAgICAkKFwiI3NhdmVcIikuY2xpY2soZnVuY3Rpb24oKVxyXG4gICAge1xyXG4gICAgICAgIC8v5qCH6aKYXHJcbiAgICAgICAgcGFyYW1zWyd3eF9zaGFyZV90aXRsZSddPSQudHJpbSggJChcIiN3eF9zaGFyZV90aXRsZVwiKS52YWwoKSApO1xyXG4gICAgICAgIGlmKHBhcmFtc1snd3hfc2hhcmVfdGl0bGUnXS5sZW5ndGg9PTApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkurIs6K+36L6T5YWl5YiG5Lqr5qCH6aKY5ZOmXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+aPj+i/sFxyXG4gICAgICAgIHBhcmFtc1snd3hfc2hhcmVfY29udGVudCddPSQudHJpbSggJChcIiN3eF9zaGFyZV9jb250ZW50XCIpLnZhbCgpICk7XHJcbiAgICAgICAgaWYocGFyYW1zWyd3eF9zaGFyZV9jb250ZW50J10ubGVuZ3RoPT0wKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LqyLOivt+i+k+WFpeWIhuS6q+aPj+i/sOWTplwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/mmK/lkKblrZjlnKjliIbkuqvphY3lm75cclxuICAgICAgICBpZiggJChcIiNyZUJhY2tJbWdcIikuYXR0cihcInNyY1wiKT09dW5kZWZpbmVkIClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS6sizor7forr7nva7liIbkuqvphY3lm77lk6ZcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v5piv5ZCm5a2Y5Zyo5YiG5Lqr5LqM57u056CBXHJcbiAgICAgICAgLy9pZiggJChcIi5waWNTaG93XCIpLmVxKDEpLmF0dHIoXCJzcmNcIik9PXVuZGVmaW5lZCB8fCAkKFwiLnBpY1Nob3dcIikuZXEoMSkuYXR0cihcInNyY1wiKS5sZW5ndGg9PTAgKVxyXG4gICAgICAgIC8ve1xyXG4gICAgICAgIC8vICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS6sizor7forr7nva7liIbkuqvkuoznu7TnoIHlk6ZcIik7XHJcbiAgICAgICAgLy8gICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIC8vfVxyXG5cclxuICAgICAgICBzaG93TG9hZGluZygpO1xyXG4gICAgICAgIHVwbG9hZFNoYXJlSW1hZ2UoKTtcclxuICAgIH0pO1xyXG59KTtcclxuXHJcblxyXG4vL+WbvueJh+WkhOeQhuWHveaVsFxyXG5mdW5jdGlvbiBwaWNIYW5kbGUoKSB7XHJcbiAgICAvL+WbnuaYvuWbvueJh1xyXG4gICAgJChcIiN1cGxvYWRJbWFnZVwiKS5jaGFuZ2UoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgLyp2YXIgc3JjPWdldE9iamVjdFVSTCh0aGlzLmZpbGVzWzBdKTtcclxuICAgICAgICAkKCcjcmVCYWNrSW1nJykucHJvcCgnc3JjJyxzcmMpOyovXHJcbiAgICAgICAgdmFyIG5ld0ZpbGUgPSB0aGlzLmZpbGVzWzBdO1xyXG5cclxuICAgICAgICB2YXIgaW1nTmFtZSA9IG5ld0ZpbGUubmFtZTtcclxuICAgICAgICAvL2FsZXJ0KGltZ05hbWUpO1xyXG4gICAgICAgIHZhciBleHQsaWR4O1xyXG4gICAgICAgIGlkeCA9IGltZ05hbWUubGFzdEluZGV4T2YoXCIuXCIpO1xyXG4gICAgICAgIGlmIChpZHggIT0gLTEpe1xyXG4gICAgICAgICAgICBleHQgPSBpbWdOYW1lLnN1YnN0cihpZHgrMSkudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgZXh0ID0gZXh0LnRvTG93ZXJDYXNlKCApO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy9hbGVydChcIuWQjue8gD1cIitleHQrXCLkvY3nva49XCIraWR4K1wi6Lev5b6EPVwiK3Jlc291cmNlTG9jYWxVcmwpO1xyXG4gICAgICAgICAgICBpZiAoZXh0ICE9ICdqcGcnICYmIGV4dCAhPSAncG5nJyAmJiBleHQgIT0gJ2pwZWcnICYmIGV4dCAhPSAnZ2lmJyl7XHJcbiAgICAgICAgICAgICAgICAvL2RvY3VtZW50LmFsbC5zdWJtaXRfdXBsb2FkLmRpc2FibGVkPXRydWU7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi6K+35LiK5Lyg5Zu+54mH57G75Z6L55qE5paH5Lu25ZOmflwiKTtcclxuICAgICAgICAgICAgICAgIC8vYWxlcnQoXCIyLuWPquiDveS4iuS8oC5qcGcgIC5wbmcgIC5qcGVnICAuZ2lm57G75Z6L55qE5paH5Lu2IVwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vZG9jdW1lbnQuYWxsLnN1Ym1pdF91cGxvYWQuZGlzYWJsZWQ9dHJ1ZTtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuivt+S4iuS8oOWbvueJh+exu+Wei+eahOaWh+S7tuWTpn5cIik7XHJcbiAgICAgICAgICAgIC8vYWxlcnQoXCLlj6rog73kuIrkvKAuanBnICAucG5nICAuanBlZyAgLmdpZuexu+Wei+eahOaWh+S7tiFcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKG5ld0ZpbGUpe1xyXG4gICAgICAgICAgICBmaWxlID0gbmV3RmlsZTtcclxuICAgICAgICAgICAgaW1nVXJsID0gZ2V0T2JqZWN0VVJMKG5ld0ZpbGUpO1xyXG4gICAgICAgICAgICAkKCcjcmVCYWNrSW1nJykucHJvcCgnc3JjJywgaW1nVXJsKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcblxyXG4gICAgLy8gJChcIiN3eF9xcl91cmxcIikuY2hhbmdlKGZ1bmN0aW9uKClcclxuICAgIC8vIHtcclxuICAgIC8vICAgICB2YXIgc3JjPWdldE9iamVjdFVSTCh0aGlzLmZpbGVzWzBdKTtcclxuICAgIC8vICAgICAkKHRoaXMpLm5leHRBbGwoKS5lcSgwKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgLy8gICAgICQodGhpcykubmV4dEFsbCgpLmVxKDEpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAvLyAgICAgJCh0aGlzKS5uZXh0QWxsKCkuZXEoMikucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuICAgIC8vICAgICAkKHRoaXMpLm5leHRBbGwoKS5lcSgyKS5hdHRyKCdzcmMnLHNyYyk7XHJcbiAgICAvLyB9KTtcclxuXHJcbiAgICAvL+WFs+mXreWbvueJh1xyXG4gICAgLyokKFwiLnBpY0Nsb3NlXCIpLmNsaWNrKGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICAkKHRoaXMpLnByZXYoKS52YWwoJycpO1xyXG4gICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAkKHRoaXMpLm5leHRBbGwoKS5lcSgwKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICQodGhpcykubmV4dEFsbCgpLmVxKDEpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5uZXh0QWxsKCkuZXEoMSkuYXR0cihcInNyY1wiLFwiXCIpO1xyXG4gICAgfSk7Ki9cclxufVxyXG5cclxuLy/ojrflj5bkuIrkvKDmlofku7bnmoR1cmxcclxuZnVuY3Rpb24gZ2V0T2JqZWN0VVJMKGZpbGUpe1xyXG4gICAgdmFyIHVybCA9IG51bGw7XHJcbiAgICBpZiAod2luZG93LmNyZWF0ZU9iamVjdFVSTCAhPSB1bmRlZmluZWQpXHJcbiAgICB7XHJcbiAgICAgICAgdXJsID0gd2luZG93LmNyZWF0ZU9iamVjdFVSTChmaWxlKTtcclxuICAgIH1cclxuICAgIGVsc2UgaWYgKHdpbmRvdy5VUkwgIT0gdW5kZWZpbmVkKVxyXG4gICAge1xyXG4gICAgICAgIHVybCA9IHdpbmRvdy5VUkwuY3JlYXRlT2JqZWN0VVJMKGZpbGUpO1xyXG4gICAgfVxyXG4gICAgZWxzZSBpZiAod2luZG93LndlYmtpdFVSTCAhPSB1bmRlZmluZWQpXHJcbiAgICB7XHJcbiAgICAgICAgdXJsID0gd2luZG93LndlYmtpdFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdXJsO1xyXG59XHJcbmZ1bmN0aW9uIHJlbW92ZU9iamVjdFVSTCh1cmwpIHsvL+mHiuaUvui1hOa6kFVSTFxyXG4gICAgaWYgKHdpbmRvdy5yZXZva2VPYmplY3RVUkwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgd2luZG93LnJldm9rZU9iamVjdFVSTCh1cmwpO1xyXG4gICAgfSBlbHNlIGlmICh3aW5kb3cuVVJMICE9IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHdpbmRvdy5VUkwucmV2b2tlT2JqZWN0VVJMKHVybCk7XHJcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy53ZWJraXRVUkwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgd2luZG93LndlYmtpdFVSTC5yZXZva2VPYmplY3RVUkwodXJsKTtcclxuICAgIH1cclxufVxyXG5cclxuLy/ojrflj5bmlofku7bnmoTlkI7nvIDlkI1cclxuZnVuY3Rpb24gZ2V0U3VmZml4KGZpbGVuYW1lKXtcclxuICAgIHZhciBuYW1lcyA9IGZpbGVuYW1lLnNwbGl0KCcuJyk7XHJcbiAgICByZXR1cm4gbmFtZXNbbmFtZXMubGVuZ3RoIC0gMV07XHJcbn1cclxuXHJcbi8v5LiK5Lyg5YiG5Lqr5Zu+XHJcbmZ1bmN0aW9uIHVwbG9hZFNoYXJlSW1hZ2UoKXtcclxuICAgIC8qdmFyIHd4X3NoYXJlX2ltYWdlPSQoJyN1cGxvYWRJbWFnZScpLnByb3AoJ2ZpbGVzJyk7XHJcbiAgICBpZih3eF9zaGFyZV9pbWFnZS5sZW5ndGg9PTApey8v5rKh5L+u5pS55YiG5Lqr5Zu+LOebtOaOpeS4iuS8oFxyXG4gICAgICAgIC8vdXBsb2FkUXJDb2RlKCk7XHJcbiAgICAgICAgdXBkYXRlU2hhcmVJbmZvKCk7XHJcbiAgICB9IGVsc2Ugey8v5L+u5pS56L+H5YiG5Lqr5Zu+LOWFiOS4iuS8oFxyXG4gICAgICAgIGJyb3dzZXJNRDVGaWxlKHd4X3NoYXJlX2ltYWdlWzBdLGZ1bmN0aW9uKGVycixtZDUpIHtcclxuICAgICAgICAgICAgdmFyIHJlbW90ZVBhdGggPSBnZXRfY29zX2ltYWdlX3BhdGgoKSArIG1kNSArIFwiLlwiICsgZ2V0U3VmZml4KHd4X3NoYXJlX2ltYWdlWzBdWyduYW1lJ10pO1xyXG4gICAgICAgICAgICBjb3MudXBsb2FkRmlsZVdpdGhvdXRQcm8oZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAgICAgLy9wYXJhbXNbJ3d4X3NoYXJlX2ltYWdlJ109JC5wYXJzZUpTT04ocmVzdWx0KS5kYXRhLmFjY2Vzc191cmw7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ3d4X3NoYXJlX2ltYWdlJ109cmVzdWx0LmRhdGEuYWNjZXNzX3VybDtcclxuICAgICAgICAgICAgICAgIC8vdXBsb2FkUXJDb2RlKCk7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTaGFyZUluZm8oKTtcclxuICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVzdWx0KXsgICAgIC8v5aSx6LSl5Zue6LCDXHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkuIrkvKDlpLHotKUhXCIpO1xyXG4gICAgICAgICAgICB9LCByZW1vdGVQYXRoLCB3eF9zaGFyZV9pbWFnZVswXSwwKTtcclxuICAgICAgICB9KTtcclxuICAgIH0qL1xyXG5cclxuICAgIGlmKCBpbWdVcmwgKSB7XHJcbiAgICAgICAgcmVtb3ZlT2JqZWN0VVJMKGltZ1VybCk7XHJcbiAgICAgICAgaW1nVXJsID0gbnVsbDtcclxuICAgICAgICBicm93c2VyTUQ1RmlsZShmaWxlLGZ1bmN0aW9uKGVycixtZDUpIHtcclxuICAgICAgICAgICAgdmFyIHJlbW90ZVBhdGggPSBnZXRfY29zX2ltYWdlX3BhdGgoKSArIG1kNSArIFwiLlwiICsgZ2V0U3VmZml4KGZpbGVbJ25hbWUnXSk7XHJcbiAgICAgICAgICAgIGNvcy51cGxvYWRGaWxlV2l0aG91dFBybyhmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ3d4X3NoYXJlX2ltYWdlJ109cmVzdWx0LmRhdGEuYWNjZXNzX3VybDtcclxuICAgICAgICAgICAgICAgIHVwZGF0ZVNoYXJlSW5mbygpO1xyXG4gICAgICAgICAgICB9LGZ1bmN0aW9uIChyZXN1bHQpeyAgICAgLy/lpLHotKXlm57osINcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS4iuS8oOWksei0pSFcIik7XHJcbiAgICAgICAgICAgIH0sIHJlbW90ZVBhdGgsIGZpbGUsIDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICB1cGRhdGVTaGFyZUluZm8oKTtcclxuICAgIH1cclxufVxyXG5cclxuLy/kuIrkvKDkuoznu7TnoIFcclxuLypmdW5jdGlvbiB1cGxvYWRRckNvZGUoKVxyXG57XHJcbiAgICB2YXIgd3hfcXJfdXJsID0gJCgnI3d4X3FyX3VybCcpLnByb3AoJ2ZpbGVzJyk7XHJcbiAgICBpZih3eF9xcl91cmwubGVuZ3RoPT0wKS8v5rKh5L+u5pS55LqM57u056CBLOWwseabtOaWsOS4pOS4quWtl+autVxyXG4gICAge1xyXG4gICAgICAgIHVwZGF0ZVNoYXJlSW5mbygpO1xyXG4gICAgfVxyXG4gICAgZWxzZSAvL+S/ruaUuei/h+WIhuS6q+WbvizlhYjkuIrkvKBcclxuICAgIHtcclxuICAgICAgICBicm93c2VyTUQ1RmlsZSh3eF9xcl91cmxbMF0sZnVuY3Rpb24oZXJyLG1kNSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHZhciByZW1vdGVQYXRoID0gZ2V0X2Nvc19pbWFnZV9wYXRoKCkgKyBtZDUgKyBcIi5cIiArIGdldFN1ZmZpeCh3eF9xcl91cmxbMF1bJ25hbWUnXSk7XHJcbiAgICAgICAgICAgIGNvcy51cGxvYWRGaWxlV2l0aG91dFBybyhmdW5jdGlvbiAocmVzdWx0KVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAvL3BhcmFtc1snd3hfcXJfdXJsJ109JC5wYXJzZUpTT04ocmVzdWx0KS5kYXRhLmFjY2Vzc191cmw7XHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ3d4X3FyX3VybCddPXJlc3VsdC5kYXRhLmFjY2Vzc191cmw7XHJcbiAgICAgICAgICAgICAgICB1cGRhdGVTaGFyZUluZm8oKTtcclxuICAgICAgICAgICAgfSxmdW5jdGlvbiAocmVzdWx0KSAgICAgLy/lpLHotKXlm57osINcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LiK5Lyg5aSx6LSlIVwiKTtcclxuICAgICAgICAgICAgfSwgcmVtb3RlUGF0aCwgd3hfcXJfdXJsWzBdLDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG59Ki9cclxuXHJcbi8v5pu05paw5YiG5Lqr5L+h5oGvXHJcbmZ1bmN0aW9uIHVwZGF0ZVNoYXJlSW5mbygpe1xyXG4gICAgJC5wb3N0KFwiL3VwZGF0ZXNoYXJlaW5mb1wiLHtcInBhcmFtc1wiOnBhcmFtc30sZnVuY3Rpb24oZGF0YSkge1xyXG4gICAgICAgIGhpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgaWYoZGF0YS5jb2RlPT0wKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoZGF0YS5tc2csZnVuY3Rpb24oKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24ucmVsb2FkKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbn1cclxuXHJcblxyXG5cclxuXHJcblxyXG4iXX0=
