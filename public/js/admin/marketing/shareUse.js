$(function(){shareUse.init()});var shareUse=function(){var e={};var s={num:0,id:"",share_knock:0,listen_count:0};e.init=function(){var e;$(".searchAllBtn").on("click",function(){var e=$(this).siblings("input").val();url="/invite/shareUseList/"+$(this).data("url")+"?search="+e;window.location.href=url});$(".shareNumSet").on("click",function(){var n=$(this).parent("td");e=n;s.id=$(this).data("good-id");s.listen_count=$(this).data("listen-count");var t=n.siblings(".share_use_num").html();if(t==="未参与"){$("#shareClose").prop("checked",true);$(".set_share_good_num").prop("disabled",true);s.num=0;s.share_knock=0}else{$("#shareOpen").prop("checked",true);$(".set_share_good_num").prop("disabled",false);s.num=t;s.share_knock=1}$(".set_share_good_title").html(n.siblings(".td_resource").children("p").html());$(".set_share_good_num").val(s.listen_count);$(".set_share_num").addClass("active")});$("#shareOpen").on("click",function(){s.share_knock=1;$(".set_share_good_num").prop("disabled",false)});$("#shareClose").on("click",function(){s.share_knock=0;$(".set_share_good_num").prop("disabled",true)});$(".cancel_sale_btn").on("click",function(){$(".set_share_num").removeClass("active")});$(".confirm_sale_btn").on("click",function(){s.listen_count=$(".set_share_good_num").val();if(s.share_knock===1&&s.listen_count<1){baseUtils.show.redTip("领取上限不能小于1");return false}$("#base_loading").show();$.ajax("/invite/setShareNum",{type:"get",data:s,success:function(n){if(n.code===0){$(".set_share_num").removeClass("active");if(s.share_knock==0){e.siblings(".share_use_num").html("未参与")}else{e.siblings(".share_use_num").html(s.listen_count)}e.children("a").data("listen-count",s.listen_count);baseUtils.show.blueTip("设置成功")}else{$(".set_share_num").removeClass("active");baseUtils.show.redTip(n.msg)}},error:function(e){baseUtils.show.redTip("网络错误")},complete:function(){$("#base_loading").hide()}})})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL21hcmtldGluZy9zaGFyZVVzZS5qcyJdLCJuYW1lcyI6WyIkIiwic2hhcmVVc2UiLCJpbml0Iiwic2hhcmVJbmZvIiwibnVtIiwiaWQiLCJzaGFyZV9rbm9jayIsImxpc3Rlbl9jb3VudCIsIm5vd0VsIiwib24iLCJzZWFyY2hUZXh0IiwidGhpcyIsInNpYmxpbmdzIiwidmFsIiwidXJsIiwiZGF0YSIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImVsIiwicGFyZW50IiwibnVtVGV4dCIsImh0bWwiLCJwcm9wIiwiY2hpbGRyZW4iLCJhZGRDbGFzcyIsInJlbW92ZUNsYXNzIiwiYmFzZVV0aWxzIiwic2hvdyIsInJlZFRpcCIsImFqYXgiLCJ0eXBlIiwic3VjY2VzcyIsImNvZGUiLCJibHVlVGlwIiwibXNnIiwiZXJyb3IiLCJjb21wbGV0ZSIsImhpZGUiXSwibWFwcGluZ3MiOiJBQUlBQSxFQUFFLFdBQ0NDLFNBQVNDLFFBR1osSUFBSUQsVUFBVyxXQUNYLEdBQUlBLEtBQ0osSUFBSUUsSUFDQUMsSUFBSSxFQUNKQyxHQUFHLEdBQ0hDLFlBQVksRUFDWkMsYUFBYSxFQUlqQk4sR0FBU0MsS0FBTyxXQUVaLEdBQUlNLEVBQ0pSLEdBQUUsaUJBQWlCUyxHQUFHLFFBQVEsV0FDMUIsR0FBSUMsR0FBYVYsRUFBRVcsTUFBTUMsU0FBUyxTQUFTQyxLQUMzQ0MsS0FBTSx3QkFBd0JkLEVBQUVXLE1BQU1JLEtBQUssT0FBTyxXQUFXTCxDQUM3RE0sUUFBT0MsU0FBU0MsS0FBS0osS0FFekJkLEdBQUUsZ0JBQWdCUyxHQUFHLFFBQVEsV0FDekIsR0FBSVUsR0FBS25CLEVBQUVXLE1BQU1TLE9BQU8sS0FDeEJaLEdBQVFXLENBQ1JoQixHQUFVRSxHQUFLTCxFQUFFVyxNQUFNSSxLQUFLLFVBQzVCWixHQUFVSSxhQUFlUCxFQUFFVyxNQUFNSSxLQUFLLGVBQ3RDLElBQUlNLEdBQVVGLEVBQUdQLFNBQVMsa0JBQWtCVSxNQUU1QyxJQUFHRCxJQUFZLE1BQU0sQ0FDakJyQixFQUFFLGVBQWV1QixLQUFLLFVBQVUsS0FDaEN2QixHQUFFLHVCQUF1QnVCLEtBQUssV0FBVyxLQUN6Q3BCLEdBQVVDLElBQUksQ0FDZEQsR0FBVUcsWUFBWSxNQUNyQixDQUNETixFQUFFLGNBQWN1QixLQUFLLFVBQVUsS0FDL0J2QixHQUFFLHVCQUF1QnVCLEtBQUssV0FBVyxNQUN6Q3BCLEdBQVVDLElBQU1pQixDQUNoQmxCLEdBQVVHLFlBQVksRUFHMUJOLEVBQUUseUJBQXlCc0IsS0FBS0gsRUFBR1AsU0FBUyxnQkFBZ0JZLFNBQVMsS0FBS0YsT0FDMUV0QixHQUFFLHVCQUF1QmEsSUFBSVYsRUFBVUksYUFDdkNQLEdBQUUsa0JBQWtCeUIsU0FBUyxXQUdqQ3pCLEdBQUUsY0FBY1MsR0FBRyxRQUFRLFdBQ3ZCTixFQUFVRyxZQUFZLENBQ3RCTixHQUFFLHVCQUF1QnVCLEtBQUssV0FBVyxRQUc3Q3ZCLEdBQUUsZUFBZVMsR0FBRyxRQUFRLFdBQ3hCTixFQUFVRyxZQUFZLENBQ3RCTixHQUFFLHVCQUF1QnVCLEtBQUssV0FBVyxPQUc3Q3ZCLEdBQUUsb0JBQW9CUyxHQUFHLFFBQVEsV0FDN0JULEVBQUUsa0JBQWtCMEIsWUFBWSxXQUlwQzFCLEdBQUUscUJBQXFCUyxHQUFHLFFBQVEsV0FDOUJOLEVBQVVJLGFBQWVQLEVBQUUsdUJBQXVCYSxLQUNsRCxJQUFHVixFQUFVRyxjQUFjLEdBQUdILEVBQVVJLGFBQWEsRUFBRSxDQUNuRG9CLFVBQVVDLEtBQUtDLE9BQU8sWUFDdEIsT0FBTyxPQUVYN0IsRUFBRSxpQkFBaUI0QixNQUNuQjVCLEdBQUU4QixLQUFLLHVCQUNIQyxLQUFLLE1BQ0xoQixLQUFLWixFQUNMNkIsUUFBUSxTQUFTakIsR0FDYixHQUFHQSxFQUFLa0IsT0FBTyxFQUFFLENBQ2JqQyxFQUFFLGtCQUFrQjBCLFlBQVksU0FDaEMsSUFBR3ZCLEVBQVVHLGFBQWEsRUFBRSxDQUN4QkUsRUFBTUksU0FBUyxrQkFBa0JVLEtBQUssV0FDcEMsQ0FDRmQsRUFBTUksU0FBUyxrQkFBa0JVLEtBQUtuQixFQUFVSSxjQUVwREMsRUFBTWdCLFNBQVMsS0FBS1QsS0FBSyxlQUFlWixFQUFVSSxhQUNsRG9CLFdBQVVDLEtBQUtNLFFBQVEsWUFDdEIsQ0FDRGxDLEVBQUUsa0JBQWtCMEIsWUFBWSxTQUNoQ0MsV0FBVUMsS0FBS0MsT0FBT2QsRUFBS29CLE9BSW5DQyxNQUFNLFNBQVVyQixHQUNiWSxVQUFVQyxLQUFLQyxPQUFPLFNBRXpCUSxTQUFTLFdBQ0xyQyxFQUFFLGlCQUFpQnNDLFlBTW5DLE9BQU9yQyIsImZpbGUiOiJhZG1pbi9tYXJrZXRpbmcvc2hhcmVVc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogQ3JlYXRlZCBieSBSb2FtIG9uIDIwMTcvNi8yMy5cclxuICovXHJcblxyXG4kKGZ1bmN0aW9uKCl7XHJcbiAgIHNoYXJlVXNlLmluaXQoKTtcclxufSlcclxuXHJcbnZhciBzaGFyZVVzZSA9IGZ1bmN0aW9uKCl7XHJcbiAgICB2YXIgc2hhcmVVc2UgPSB7fTtcclxuICAgIHZhciBzaGFyZUluZm8gPSB7XHJcbiAgICAgICAgbnVtOjAsXHJcbiAgICAgICAgaWQ6JycsXHJcbiAgICAgICAgc2hhcmVfa25vY2s6MCxcclxuICAgICAgICBsaXN0ZW5fY291bnQ6MFxyXG4gICAgfTtcclxuXHJcblxyXG4gICAgc2hhcmVVc2UuaW5pdCA9IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgLy/mmL7npLrlvLnnqpdcclxuICAgICAgICB2YXIgbm93RWw7XHJcbiAgICAgICAgJCgnLnNlYXJjaEFsbEJ0bicpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHNlYXJjaFRleHQgPSAkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLnZhbCgpO1xyXG4gICAgICAgICAgICB1cmwgPSAnL2ludml0ZS9zaGFyZVVzZUxpc3QvJyskKHRoaXMpLmRhdGEoJ3VybCcpKyc/c2VhcmNoPScrc2VhcmNoVGV4dDtcclxuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWY9dXJsO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJy5zaGFyZU51bVNldCcpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGVsID0gJCh0aGlzKS5wYXJlbnQoJ3RkJyk7XHJcbiAgICAgICAgICAgIG5vd0VsID0gZWw7XHJcbiAgICAgICAgICAgIHNoYXJlSW5mby5pZCA9ICQodGhpcykuZGF0YSgnZ29vZC1pZCcpO1xyXG4gICAgICAgICAgICBzaGFyZUluZm8ubGlzdGVuX2NvdW50ID0gJCh0aGlzKS5kYXRhKCdsaXN0ZW4tY291bnQnKTtcclxuICAgICAgICAgICAgdmFyIG51bVRleHQgPSBlbC5zaWJsaW5ncygnLnNoYXJlX3VzZV9udW0nKS5odG1sKCk7XHJcbiAgICAgICAgICAgIC8v5Yik5pat5byA5ZCv5LiO5YWz6Zet6K6+572u5pWw5o2uXHJcbiAgICAgICAgICAgIGlmKG51bVRleHQgPT09IFwi5pyq5Y+C5LiOXCIpe1xyXG4gICAgICAgICAgICAgICAgJCgnI3NoYXJlQ2xvc2UnKS5wcm9wKCdjaGVja2VkJyx0cnVlKTtcclxuICAgICAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfZ29vZF9udW0nKS5wcm9wKCdkaXNhYmxlZCcsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICBzaGFyZUluZm8ubnVtPTA7XHJcbiAgICAgICAgICAgICAgICBzaGFyZUluZm8uc2hhcmVfa25vY2s9MDtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAkKCcjc2hhcmVPcGVuJykucHJvcCgnY2hlY2tlZCcsdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAkKCcuc2V0X3NoYXJlX2dvb2RfbnVtJykucHJvcCgnZGlzYWJsZWQnLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHNoYXJlSW5mby5udW0gPSBudW1UZXh0O1xyXG4gICAgICAgICAgICAgICAgc2hhcmVJbmZvLnNoYXJlX2tub2NrPTE7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfZ29vZF90aXRsZScpLmh0bWwoZWwuc2libGluZ3MoJy50ZF9yZXNvdXJjZScpLmNoaWxkcmVuKCdwJykuaHRtbCgpKTtcclxuICAgICAgICAgICAgJCgnLnNldF9zaGFyZV9nb29kX251bScpLnZhbChzaGFyZUluZm8ubGlzdGVuX2NvdW50KTtcclxuICAgICAgICAgICAgJCgnLnNldF9zaGFyZV9udW0nKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/lvIDlkK/liIbkuqtcclxuICAgICAgICAkKCcjc2hhcmVPcGVuJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzaGFyZUluZm8uc2hhcmVfa25vY2s9MTtcclxuICAgICAgICAgICAgJCgnLnNldF9zaGFyZV9nb29kX251bScpLnByb3AoJ2Rpc2FibGVkJyxmYWxzZSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/lhbPpl63liIbkuqtcclxuICAgICAgICAkKCcjc2hhcmVDbG9zZScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgc2hhcmVJbmZvLnNoYXJlX2tub2NrPTA7XHJcbiAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfZ29vZF9udW0nKS5wcm9wKCdkaXNhYmxlZCcsdHJ1ZSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICQoJy5jYW5jZWxfc2FsZV9idG4nKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoJy5zZXRfc2hhcmVfbnVtJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+aPkOS6pOaVsOaNrlxyXG4gICAgICAgICQoJy5jb25maXJtX3NhbGVfYnRuJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICBzaGFyZUluZm8ubGlzdGVuX2NvdW50ID0gJCgnLnNldF9zaGFyZV9nb29kX251bScpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZihzaGFyZUluZm8uc2hhcmVfa25vY2s9PT0xJiZzaGFyZUluZm8ubGlzdGVuX2NvdW50PDEpe1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfpooblj5bkuIrpmZDkuI3og73lsI/kuo4xJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgJCgnI2Jhc2VfbG9hZGluZycpLnNob3coKTtcclxuICAgICAgICAgICAgJC5hamF4KCcvaW52aXRlL3NldFNoYXJlTnVtJyx7XHJcbiAgICAgICAgICAgICAgICB0eXBlOidnZXQnLFxyXG4gICAgICAgICAgICAgICAgZGF0YTpzaGFyZUluZm8sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOmZ1bmN0aW9uKGRhdGEpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGRhdGEuY29kZT09PTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcuc2V0X3NoYXJlX251bScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoc2hhcmVJbmZvLnNoYXJlX2tub2NrPT0wKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vd0VsLnNpYmxpbmdzKCcuc2hhcmVfdXNlX251bScpLmh0bWwoXCLmnKrlj4LkuI5cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5vd0VsLnNpYmxpbmdzKCcuc2hhcmVfdXNlX251bScpLmh0bWwoc2hhcmVJbmZvLmxpc3Rlbl9jb3VudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbm93RWwuY2hpbGRyZW4oJ2EnKS5kYXRhKCdsaXN0ZW4tY291bnQnLHNoYXJlSW5mby5saXN0ZW5fY291bnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKCforr7nva7miJDlip8nKTtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCgnLnNldF9zaGFyZV9udW0nKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChkYXRhLm1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBlcnJvcjpmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfnvZHnu5zplJnor68nKTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBjb21wbGV0ZTpmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICQoJyNiYXNlX2xvYWRpbmcnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICByZXR1cm4gc2hhcmVVc2U7XHJcbn0oKTsiXX0=
