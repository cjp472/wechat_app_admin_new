var newFormFlag=false;$(function(){init();newCoupon()});function newCoupon(){var e=0;var t=0;var a=[];var s;var r;var o;var n;var l=[];var c=0;var u;var d;var p;var h;var f;var v;var m;var b=$.trim($('[name="count"]').val());n="0";m=$(".formContent").data("page_type");var g=GetQueryString("id");console.log(g);if(GetQueryString("type")==0||GetQueryString("type")==1){v=GetQueryString("type");console.log("shang")}else{v=$(".plusArea").attr("data-plus-type");console.log("xia")}$(".addedList .addedItem").each(function(){a.push($(this).data("id"))});console.log(v);aliveTimeConfig(".dateSetInput");+function(){if(v==0){$(".isGoods").attr("style","")}else{$(".isGoods").attr("style","display:none")}$(".remindTop a").on("click",function(){var e="/coupon/close/"+$(this).siblings("span").attr("data-place");$(".remindTop").remove();$.ajax({type:"GET",url:e,data:{},success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg)}else{baseUtils.show.blueTip(e.msg)}},error:function(e,t,a){console.log(e);console.error(a);console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$('[for="useCdn_1"]').on("click",function(){$('[name="re_price"]').removeAttr("disabled").removeAttr("readonly")});$('[for="useCdn_2"]').on("click",function(){$('[name="re_price"]').attr("disabled",true).attr("readonly",true).val("");setCondition()});$(".plusArea").on("click",function(){console.log("plusArea test");$(".initList").html();$('.addBox [type="checkBox"]').removeAttr("checked");$("#addModal").fadeIn(200)});$(".closePop").on("click",function(){$("#addModal").fadeOut(200)});$("div.tab a").on("click",function(){$(this).addClass("clicked").siblings().removeClass("clicked");e=$(this).attr("data-type");console.log(e);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}});$("#forTab").on("click",function(){var t=$("#kwContent").val();$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",data:{state:e,kw:t},success:function(t){$(".initList").html(t);switch(e){case"0":$("#tab_0").show().siblings("#tab_1,#tab_2").hide();break;case"1":$("#tab_1").show().siblings("#tab_0,#tab_2").hide();break;case"2":$("#tab_2").show().siblings("#tab_1,#tab_0").hide();break}},error:function(e,t,a){console.log(e);console.error(a);console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})});$("input.func").on("click",function(){console.log("teste");$(this).addClass("funcClick").siblings().removeClass("funcClick");console.log($(this).val());if($(this).val()=="用户领取"){$(".aboutGet").show();n="0"}else{$(".aboutGet").hide();$(".aboutGet #putOn").removeAttr("checked");n="1"}});$("#add").on("click",function(){var e=[];var t=[];var s=[];var r=[];$('#tab_0 input[type="checkbox"]:checked').each(function(){e.push($(this).val());var t=[];t.push($(this).attr("data-name"));t.push($(this).attr("data-img"));t.push("单品");t.push($(this).val());t.push($(this).attr("data-style"));r.push(t)});$('#tab_1 input[type="checkbox"]:checked').each(function(){t.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("专栏");e.push($(this).val());e.push($(this).attr("data-style"));r.push(e)});$('#tab_2 input[type="checkbox"]:checked').each(function(){s.push($(this).val());var e=[];e.push($(this).attr("data-name"));e.push($(this).attr("data-img"));e.push("会员");e.push($(this).val());e.push($(this).attr("data-style"));r.push(e)});console.log(e);var o=e.concat(s,t);console.log(a);if(o==""){baseUtils.show.redTip("请选择要添加的商品。");return false}if(_(a,o)==1){baseUtils.show.redTip("请勿重复选择添加的商品。");return false}else{for(i=0;i<r.length;i++){$(".addedList").append("<div data-tab="+r[i][4]+' class="addedItem" data-id="'+r[i][3]+'"><span>'+r[i][2]+'</span><img src="'+r[i][1]+'" alt="'+r[i][0]+'"><span class="spanCon">'+r[i][0]+'</span><button type="button" class="close closeItem">×</button></div>')}a=a.concat(o);$("#addModal").fadeOut(200)}});$(".addedList").on("click",".closeItem",function(){$(this).prev().prev().click();$(this).parent().remove();var e=$(this).parent().attr("data-id");console.log(e);a.remove(e);console.log(a)});$("#submitList").on("click",function(){if(newFormFlag){return false}newFormFlag=true;l=[];$(".addedItem").each(function(){l.push($(this).attr("data-id")+"--"+$(this).attr("data-tab"))});console.log(l);r=$.trim($('[name="title"]').val());o=Math.round($.trim($('[name="price"]').val())*100);if($("#useCdn_1").prop("checked")){t=1;c=Math.round(parseFloat($('[name="re_price"]').val())*100)||"empty";console.log("使用条件"+c)}else if($("#useCdn_2").prop("checked")){t=0;c=0}console.log("isTen",c);u=$.trim($('[name="valid_at"]').val());d=$.trim($('[name="invalid_at"]').val());p=$.trim($('[name="count"]').val());h=$('[name="receive_rule"]').val();if($('[name="extension"]').prop("checked")){f=1}else{f=0}s={title:r,price:o,receive_rule:h,valid_at:u,invalid_at:d,require_price:c,count:p,spread_type:n,is_show:f,resource:l,type:v};if(g){s.id=g}console.log(s.price);console.log(s.require_price);if(m==0&&k(s,b,t)){w("/coupon/add",s)}else if(m==1&&k(s,b)){console.log("check is ture");w("/coupon/editCoupon",s)}})}();function k(e,t,a){newFormFlag=false;if($formCheck.emptyString(e.title)){baseUtils.show.redTip("优惠券名称不能为空！");console.log(newFormFlag);return false}if(e.title.length>=10){baseUtils.show.redTip("优惠券名称不能超过10个字！");console.log(newFormFlag);return false}if($formCheck.emptyString(e.price)){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(e.price>1e9){baseUtils.show.redTip("优惠券面额不能大于10000000！");return false}if(parseFloat(e.count)<parseFloat(t)){baseUtils.show.redTip("修改发行量只能增不能减！");return false}if($formCheck.emptyString(e.valid_at)&&$formCheck.emptyString(e.invalid_at)){baseUtils.show.redTip("有效期起止时间不能为空！");return false}if($formCheck.emptyString(e.count)){baseUtils.show.redTip("发行数量不能为空！");return false}if(e.count>1e6){baseUtils.show.redTip("发行数量不能超过1,000,000张！");return false}if(!$formCheck.checkTime(e.valid_at)){baseUtils.show.redTip("有效期开始时间格式错误");return false}if(!$formCheck.checkTime(e.invalid_at)){baseUtils.show.redTip("有效期结束时间格式错误");return false}if(e.require_price==="empty"){baseUtils.show.redTip("使用条件不能为空！");return false}if(!$formCheck.checkTimeOrder(e.valid_at,e.invalid_at)){baseUtils.show.redTip("有效期结束时间必须大于开始时间！");return false}if(!$formCheck.checkNum(e.price)){baseUtils.show.redTip("您的面额输入格式有误，请重新输入！");return false}if(!$formCheck.checkNum(e.count)){baseUtils.show.redTip("您的发行量输入格式有误，请重新输入！");return false}if(e.require_price==NaN||e.require_price==null){baseUtils.show.redTip("优惠券面额不能为空！");return false}if(e.price>=e.require_price&&a==1){baseUtils.show.redTip("优惠券面额要小于使用条件！");return false}newFormFlag=true;return true}function w(e,t){$.ajax(e,{type:"POST",dataType:"JSON",data:t,success:function(e){if(e.code==0){baseUtils.show.blueTip(e.msg);window.location.href="/coupon/index"}else if(e.code==-1){baseUtils.show.redTip(e.msg);newFormFlag=false}},error:function(e,t,a){newFormFlag=false;hideLoading();console.error(a);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function _(e,t){var a=0;for(var i=0;i<e.length;i++){if(t.indexOf(e[i])!=-1){a=1}}return a}Array.prototype.remove=function(e){var t=this.indexOf(e);if(t>-1){this.splice(t,1)}}}function init(){$.ajax({type:"GET",url:"/coupon/add_products",dataType:"html",success:function(e){$(".initList").html(e)},error:function(e,t,a){console.log(e);console.error(a);console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！")}})}function clearNoNum(e){e.value=e.value.replace(/[^\d.]/g,"");e.value=e.value.replace(/\.{2,}/g,".");e.value=e.value.replace(".","$#$").replace(/\./g,"").replace("$#$",".");e.value=e.value.replace(/^(\-)*(\d+)\.(\d\d).*$/,"$1$2.$3");if(e.value.indexOf(".")<0&&e.value!=""){e.value=parseFloat(e.value)}}function setCondition(){$(".theTen").html(parseFloat($('[name="price"]').val())+.1)}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5ld0Zvcm0uanMiXSwibmFtZXMiOlsibmV3Rm9ybUZsYWciLCIkIiwiaW5pdCIsIm5ld0NvdXBvbiIsInRhYlN0YXR1cyIsImxpbWl0U3RhdHVzIiwiaGFzQ2hvaWNlIiwiYWxsRm9ybU1zZyIsImNvdXBvbk5hbWUiLCJjb3Vwb25QcmljZSIsInBvcFdheSIsImdvb2RzUmFuZ2UiLCJpc1RlbiIsInRpbWVTdGFydCIsInRpbWVFbmQiLCJwb3BOdW0iLCJwZW9wbGVMaW0iLCJpc1RvRGV0YWlsIiwidHlwZSIsInBhZ2VfdHlwZSIsImNtcCIsInRyaW0iLCJ2YWwiLCJkYXRhIiwiZWRpdElkIiwiR2V0UXVlcnlTdHJpbmciLCJjb25zb2xlIiwibG9nIiwiYXR0ciIsImVhY2giLCJwdXNoIiwidGhpcyIsImFsaXZlVGltZUNvbmZpZyIsIm9uIiwidXJsIiwic2libGluZ3MiLCJyZW1vdmUiLCJhamF4Iiwic3VjY2VzcyIsImNvZGUiLCJiYXNlVXRpbHMiLCJzaG93IiwiYmx1ZVRpcCIsIm1zZyIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwicmVkVGlwIiwicmVtb3ZlQXR0ciIsInNldENvbmRpdGlvbiIsImh0bWwiLCJmYWRlSW4iLCJmYWRlT3V0IiwiYWRkQ2xhc3MiLCJyZW1vdmVDbGFzcyIsImhpZGUiLCJrdyIsImRhdGFUeXBlIiwic3RhdGUiLCJhcnJTaW5nbGUiLCJhcnJQcm8iLCJhcnJOdW0iLCJzdGF0ZUFsbCIsIm5ld0FyciIsImNvbmNhdCIsInVuaXF1ZSIsImkiLCJsZW5ndGgiLCJhcHBlbmQiLCJwcmV2IiwiY2xpY2siLCJwYXJlbnQiLCJkZWxldGVJdGVtIiwiTWF0aCIsInJvdW5kIiwicHJvcCIsInBhcnNlRmxvYXQiLCJ0aXRsZSIsInByaWNlIiwicmVjZWl2ZV9ydWxlIiwidmFsaWRfYXQiLCJpbnZhbGlkX2F0IiwicmVxdWlyZV9wcmljZSIsImNvdW50Iiwic3ByZWFkX3R5cGUiLCJpc19zaG93IiwicmVzb3VyY2UiLCJpZCIsImNoZWNrRm9ybSIsInN1Ym1pdEZvcm0iLCJpbmZvIiwibGltaXQiLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJjaGVja1RpbWUiLCJjaGVja1RpbWVPcmRlciIsImNoZWNrTnVtIiwiTmFOIiwiYWxsbWFnIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiaGlkZUxvYWRpbmciLCJhcnIxIiwiYXJyMiIsIml0ZW0iLCJpbmRleE9mIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJpbmRleCIsInNwbGljZSIsImNsZWFyTm9OdW0iLCJvYmoiLCJ2YWx1ZSIsInJlcGxhY2UiXSwibWFwcGluZ3MiOiJBQUNBLEdBQUlBLGFBQVksS0FDaEJDLEdBQUUsV0FDRUMsTUFDQUMsY0FHSixTQUFTQSxhQUNMLEdBQUlDLEdBQVksQ0FDaEIsSUFBSUMsR0FBYSxDQUNqQixJQUFJQyxLQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsS0FDSixJQUFJQyxHQUFNLENBQ1YsSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxFQUNKLElBQUlDLEVBQ0osSUFBSUMsRUFDSixJQUFJQyxHQUFJbkIsRUFBRW9CLEtBQUtwQixFQUFFLGtCQUFrQnFCLE1BQ25DWixHQUFPLEdBQ1BTLEdBQVVsQixFQUFFLGdCQUFnQnNCLEtBQUssWUFFakMsSUFBSUMsR0FBT0MsZUFBZSxLQUMxQkMsU0FBUUMsSUFBSUgsRUFDWixJQUFHQyxlQUFlLFNBQVMsR0FBS0EsZUFBZSxTQUFTLEVBQUcsQ0FDdkRQLEVBQUtPLGVBQWUsT0FDcEJDLFNBQVFDLElBQUksYUFDWCxDQUNEVCxFQUFLakIsRUFBRSxhQUFhMkIsS0FBSyxpQkFDekJGLFNBQVFDLElBQUksT0FHaEIxQixFQUFFLHlCQUF5QjRCLEtBQUssV0FDNUJ2QixFQUFVd0IsS0FBSzdCLEVBQUU4QixNQUFNUixLQUFLLFFBRWhDRyxTQUFRQyxJQUFJVCxFQUVaYyxpQkFBZ0Isa0JBQ2YsV0FFRyxH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SCxFQUFLckMsTUFBTSxFQUFFLENBQ3pCdUMsRUFBSyxHQUdiLE1BQU9BLEdBR1hFLE1BQU1DLFVBQVV6RSxPQUFTLFNBQVNkLEdBQzlCLEdBQUl3RixHQUFRL0UsS0FBSzRFLFFBQVFyRixFQUN6QixJQUFJd0YsR0FBUyxFQUFHLENBQ1ovRSxLQUFLZ0YsT0FBT0QsRUFBTyxLQWUvQixRQUFTNUcsUUFDTEQsRUFBRW9DLE1BQ0VuQixLQUFNLE1BQ05nQixJQUFLLHVCQUNMd0IsU0FBVSxPQUNWcEIsUUFBUyxTQUFTZixHQUVkdEIsRUFBRSxhQUFha0QsS0FBSzVCLElBRXhCcUIsTUFBTyxTQUFTQyxFQUFLQyxFQUFRQyxHQUN6QnJCLFFBQVFDLElBQUlrQixFQUNabkIsU0FBUWtCLE1BQU1HLEVBQ2RyQixTQUFRa0IsTUFBTUUsRUFDZE4sV0FBVUMsS0FBS08sT0FBTyxrQkFNbEMsUUFBU2dFLFlBQVdDLEdBQ2pCQSxFQUFJQyxNQUFRRCxFQUFJQyxNQUFNQyxRQUFRLFVBQVUsR0FDeENGLEdBQUlDLE1BQVFELEVBQUlDLE1BQU1DLFFBQVEsVUFBVSxJQUN4Q0YsR0FBSUMsTUFBUUQsRUFBSUMsTUFBTUMsUUFBUSxJQUFJLE9BQU9BLFFBQVEsTUFBTSxJQUFJQSxRQUFRLE1BQU0sSUFDekVGLEdBQUlDLE1BQVFELEVBQUlDLE1BQU1DLFFBQVEseUJBQXlCLFVBQ3ZELElBQUdGLEVBQUlDLE1BQU1QLFFBQVEsS0FBTSxHQUFLTSxFQUFJQyxPQUFRLEdBQUcsQ0FDM0NELEVBQUlDLE1BQU9yQyxXQUFXb0MsRUFBSUMsUUFHakMsUUFBU2hFLGdCQUNMakQsRUFBRSxXQUFXa0QsS0FBSzBCLFdBQVc1RSxFQUFFLGtCQUFrQnFCLE9BQU8iLCJmaWxlIjoibmV3Rm9ybS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGNyZWF0IGJ5IEplcnZpc1xyXG52YXIgbmV3Rm9ybUZsYWc9ZmFsc2U7Ly/mlrnms5XplIHlj5jph49cclxuJChmdW5jdGlvbigpe1xyXG4gICAgaW5pdCgpO1xyXG4gICAgbmV3Q291cG9uKCk7XHJcbn0pO1xyXG5cclxuZnVuY3Rpb24gbmV3Q291cG9uKCl7XHJcbiAgICB2YXIgdGFiU3RhdHVzID0gMDsvL3RhYumAiemhueWNoeeKtuaAgeWIneWni+eKtuaAgTBcclxuICAgIHZhciBsaW1pdFN0YXR1cz0gMDsvL+S9v+eUqOadoeS7tumZkOWItiAwLeaXoOadoeS7tuS9v+eUqCAxLeS9v+eUqOmZkOWItuadoeS7tlxyXG4gICAgdmFyIGhhc0Nob2ljZT1bXTsvL1RPRE866ICD6JmR5Yiw5ZCO5Y+w5Lyg5YC877yM6ZyA6KaB5pu05Yqg5a6M5ZaE5Yqf6IO9XHJcbiAgICB2YXIgYWxsRm9ybU1zZzsvL+ihqOWNleS/oeaBr+WvueixoVxyXG4gICAgdmFyIGNvdXBvbk5hbWU7Ly/kvJjmg6DliLjlkI3np7BcclxuICAgIHZhciBjb3Vwb25QcmljZTsvL+S8mOaDoOWIuOmdouminVxyXG4gICAgdmFyIHBvcFdheTsvL+WPkeihjOaWueW8j1xyXG4gICAgdmFyIGdvb2RzUmFuZ2U9W107Ly/llYblk4HojIPlm7TmlbDnu4RpZC0tdGFiXHJcbiAgICB2YXIgaXNUZW49MDsvL+S9v+eUqOadoeS7tlxyXG4gICAgdmFyIHRpbWVTdGFydDsvL+W8gOWni+aXtumXtFxyXG4gICAgdmFyIHRpbWVFbmQ7Ly/nu5PmnZ/ml7bpl7RcclxuICAgIHZhciBwb3BOdW07Ly/lj5HooYzph49cclxuICAgIHZhciBwZW9wbGVMaW07Ly/mr4/kurrpmZDpooZcclxuICAgIHZhciBpc1RvRGV0YWlsOy8v5piv5ZCm5oqV5pS+6Iez5ZWG5ZOB6K+m5oOF6aG1XHJcbiAgICB2YXIgdHlwZTsvL+mhtemdouWbnuS8oOaVsCAwLeWVhuWTgSAxLeW6l+mTulxyXG4gICAgdmFyIHBhZ2VfdHlwZTsvL+W9k+WJjemhtemdouaYr+e8lui+kemhtei/mOaYr+WIm+W7uumhtSAgLTDliJvlu7ogIDHnvJbovpFcclxuICAgIHZhciBjbXA9JC50cmltKCQoJ1tuYW1lPVwiY291bnRcIl0nKS52YWwoKSk7Ly/lj5jph4/kuLrnvJbovpHpobXlj5HooYzph4/ml6flgLxcclxuICAgIHBvcFdheT1cIjBcIjtcclxuICAgIHBhZ2VfdHlwZT0kKCcuZm9ybUNvbnRlbnQnKS5kYXRhKFwicGFnZV90eXBlXCIpO1xyXG4gICAgLy/liJ3lp4vljJblt7LmnInmlbDnu4Tlr7nosaFcclxuICAgIHZhciBlZGl0SWQ9R2V0UXVlcnlTdHJpbmcoXCJpZFwiKTtcclxuICAgIGNvbnNvbGUubG9nKGVkaXRJZCk7XHJcbiAgICBpZihHZXRRdWVyeVN0cmluZyhcInR5cGVcIik9PTAgfHwgR2V0UXVlcnlTdHJpbmcoXCJ0eXBlXCIpPT0xICl7Ly/ojrflj5Z0eXBl5YC877yM57yW6L6R6aG15LiO5Yib5bu66aG1XHJcbiAgICAgICAgdHlwZT1HZXRRdWVyeVN0cmluZyhcInR5cGVcIik7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ3NoYW5nJylcclxuICAgIH1lbHNle1xyXG4gICAgICAgIHR5cGU9JCgnLnBsdXNBcmVhJykuYXR0cignZGF0YS1wbHVzLXR5cGUnKTtcclxuICAgICAgICBjb25zb2xlLmxvZygneGlhJylcclxuICAgIH1cclxuICAgIC8v57yW6L6R6aG15Yid5aeL5YyWaGFzQ2hvaWNl5YC8IFxyXG4gICAgJCgnLmFkZGVkTGlzdCAuYWRkZWRJdGVtJykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAgIGhhc0Nob2ljZS5wdXNoKCQodGhpcykuZGF0YSgnaWQnKSk7XHJcbiAgICB9KVxyXG4gICAgY29uc29sZS5sb2codHlwZSk7XHJcbiAgICAvL+aXpeacn+mAieaLqeWZqOWIneWni+WMliAgICBcclxuICAgIGFsaXZlVGltZUNvbmZpZyhcIi5kYXRlU2V0SW5wdXRcIik7XHJcbiAgICArZnVuY3Rpb24oKXtcclxuICAgICAgICAvL+W9k+WJjeWIm+W7uueahOS8mOaDoOWIuOaYr++8miAwLeWVhuWTgSAxLeW6l+mTulxyXG4gICAgICAgIGlmKHR5cGU9PTApe1xyXG4gICAgICAgICAgICAkKCcuaXNHb29kcycpLmF0dHIoJ3N0eWxlJywnJyk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICQoJy5pc0dvb2RzJykuYXR0cignc3R5bGUnLCdkaXNwbGF5Om5vbmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/ooajmoLzlpLTpg6jmj5DnpLotLeS4jeWGjeaPkOekulxyXG4gICAgICAgICQoJy5yZW1pbmRUb3AgYScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIHVybD0nL2NvdXBvbi9jbG9zZS8nICsgJCh0aGlzKS5zaWJsaW5ncygnc3BhbicpLmF0dHIoJ2RhdGEtcGxhY2UnKTtcclxuICAgICAgICAgICAgJCgnLnJlbWluZFRvcCcpLnJlbW92ZSgpO1xyXG5cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6IHVybCxcclxuICAgICAgICAgICAgICAgIGRhdGE6e1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZ1bmN0aW9uKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGU9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChkYXRhLm1zZylcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoZGF0YS5tc2cpXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBmdW5jdGlvbih4aHIsIHN0YXR1cywgZXJyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coeGhyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihzdGF0dXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9oaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vICQoXCIubG9hZGluZ1NcIikuZmFkZU91dCgzMDApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvLyDkvJjmg6DliLjkvb/nlKjojIPlm7TpmZDlrppcclxuICAgICAgICAkKCdbZm9yPVwidXNlQ2RuXzFcIl0nKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoJ1tuYW1lPVwicmVfcHJpY2VcIl0nKS5yZW1vdmVBdHRyKFwiZGlzYWJsZWRcIikucmVtb3ZlQXR0cihcInJlYWRvbmx5XCIpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgICQoJ1tmb3I9XCJ1c2VDZG5fMlwiXScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnW25hbWU9XCJyZV9wcmljZVwiXScpLmF0dHIoXCJkaXNhYmxlZFwiLHRydWUpLmF0dHIoXCJyZWFkb25seVwiLHRydWUpLnZhbCgnJyk7XHJcbiAgICAgICAgICAgIHNldENvbmRpdGlvbigpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIOa3u+WKoOWVhuWTgeiMg+WbtFxyXG4gICAgICAgICQoXCIucGx1c0FyZWFcIikub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAvLyAkKHRoaXMpLnVuYmluZChcImNsaWNrXCIpOyBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3BsdXNBcmVhIHRlc3QnKVxyXG4gICAgICAgICAgICAkKCcuaW5pdExpc3QnKS5odG1sKCk7XHJcbiAgICAgICAgICAgICQoJy5hZGRCb3ggW3R5cGU9XCJjaGVja0JveFwiXScpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKTtcclxuICAgICAgICAgICAgJCgnI2FkZE1vZGFsJykuZmFkZUluKDIwMCk7XHJcblxyXG4gICAgICAgICAgICAvLyAkKHRoaXMpLmJpbmQoXCJjbGlja1wiKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+WFs+mXreW8ueeql1xyXG4gICAgICAgICQoJy5jbG9zZVBvcCcpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnI2FkZE1vZGFsJykuZmFkZU91dCgyMDApO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIC8vIHRhYuWIh+aNolxyXG4gICAgICAgICQoJ2Rpdi50YWIgYScpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCh0aGlzKS5hZGRDbGFzcyhcImNsaWNrZWRcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImNsaWNrZWRcIik7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICB0YWJTdGF0dXM9JCh0aGlzKS5hdHRyKFwiZGF0YS10eXBlXCIpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRhYlN0YXR1cyk7XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2godGFiU3RhdHVzKXtcclxuICAgICAgICAgICAgICAgIGNhc2UgXCIwXCI6JCgnI3RhYl8wJykuc2hvdygpLnNpYmxpbmdzKFwiI3RhYl8xLCN0YWJfMlwiKS5oaWRlKClcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBcIjFcIjokKCcjdGFiXzEnKS5zaG93KCkuc2libGluZ3MoXCIjdGFiXzAsI3RhYl8yXCIpLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFwiMlwiOiQoJyN0YWJfMicpLnNob3coKS5zaWJsaW5ncyhcIiN0YWJfMSwjdGFiXzBcIikuaGlkZSgpXHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICAvL+WVhuWTgeiMg+WbtOaQnOe0ouaMiemUrumDqOWIhlxyXG4gICAgICAgICQoJyNmb3JUYWInKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciBrdyA9ICQoJyNrd0NvbnRlbnQnKS52YWwoKTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coa3cpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0YWJTdGF0dXMpXHJcbiAgICAgICAgICAgIC8vIGlmKGt3Lmxlbmd0aD09MCl7XHJcbiAgICAgICAgICAgIC8vICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fovpPlhaXmkJzntKLlhoXlrrnvvIFcIik7XHJcbiAgICAgICAgICAgIC8vICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgJC5hamF4KHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgICAgICAgICB1cmw6ICcvY291cG9uL2FkZF9wcm9kdWN0cycsXHJcbiAgICAgICAgICAgICAgICBkYXRhVHlwZTogXCJodG1sXCIsXHJcbiAgICAgICAgICAgICAgICBkYXRhOntcclxuICAgICAgICAgICAgICAgICAgICBzdGF0ZTp0YWJTdGF0dXMsXHJcbiAgICAgICAgICAgICAgICAgICAga3c6a3dcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmluaXRMaXN0JykuaHRtbChkYXRhKTtcclxuICAgICAgICAgICAgICAgICAgICBzd2l0Y2godGFiU3RhdHVzKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjBcIjokKCcjdGFiXzAnKS5zaG93KCkuc2libGluZ3MoXCIjdGFiXzEsI3RhYl8yXCIpLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjFcIjokKCcjdGFiXzEnKS5zaG93KCkuc2libGluZ3MoXCIjdGFiXzAsI3RhYl8yXCIpLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSBcIjJcIjokKCcjdGFiXzInKS5zaG93KCkuc2libGluZ3MoXCIjdGFiXzEsI3RhYl8wXCIpLmhpZGUoKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyh4aHIpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKHN0YXR1cyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfnvZHnu5zplJnor6/vvIzor7fnqI3lkI7lho3or5XvvIEnKTtcclxuICAgICAgICAgICAgICAgICAgICAvL2hpZGVMb2FkaW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gJChcIi5sb2FkaW5nU1wiKS5mYWRlT3V0KDMwMCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8g6YOo5YiG5LqL5Lu277yI5L2/55So5p2h5Lu25LiO5ZWG5a625Y+R5pS+77yJXHJcbiAgICAgICAgJCgnaW5wdXQuZnVuYycpLm9uKCdjbGljaycsZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ3Rlc3RlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJmdW5jQ2xpY2tcIikuc2libGluZ3MoKS5yZW1vdmVDbGFzcyhcImZ1bmNDbGlja1wiKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgIGlmKCQodGhpcykudmFsKCk9PVwi55So5oi36aKG5Y+WXCIpe1xyXG4gICAgICAgICAgICAgICAgJCgnLmFib3V0R2V0Jykuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgcG9wV2F5PVwiMFwiOy8v55So5oi36aKG5Y+WXHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgJCgnLmFib3V0R2V0JykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmFib3V0R2V0ICNwdXRPbicpLnJlbW92ZUF0dHIoJ2NoZWNrZWQnKVxyXG4gICAgICAgICAgICAgICAgcG9wV2F5PVwiMVwiOy8v5ZWG5a625Y+R5pS+XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy/mt7vliqDmjInpkq7pg6jliIZcclxuICAgICAgICAkKCcjYWRkJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICB2YXIgYXJyU2luZ2xlPVtdO1xyXG4gICAgICAgICAgICB2YXIgYXJyUHJvPVtdO1xyXG4gICAgICAgICAgICB2YXIgYXJyTnVtPVtdO1xyXG4gICAgICAgICAgICB2YXIgc3RhdGVBbGw9W107XHJcbiAgICAgICAgICAgIC8v6I635Y+W5by556qX5YiX6KGo5Lit5q+P5Liq6YCJ6aG555qE54m55q6K5YC8XHJcbiAgICAgICAgICAgICQoJyN0YWJfMCBpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGFyclNpbmdsZS5wdXNoKCQodGhpcykudmFsKCkpO1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0YXRlPVtdO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtbmFtZScpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLWltZycpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJ+WNleWTgScpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGUucHVzaCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLXN0eWxlJykpO1xyXG4gICAgICAgICAgICAgICAgc3RhdGVBbGwucHVzaChzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCcjdGFiXzEgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBhcnJQcm8ucHVzaCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdGF0ZT1bXTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1pbWcnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCfkuJPmoI8nKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1zdHlsZScpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlQWxsLnB1c2goc3RhdGUpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAkKCcjdGFiXzIgaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBhcnJOdW0ucHVzaCgkKHRoaXMpLnZhbCgpKTtcclxuICAgICAgICAgICAgICAgIHZhciBzdGF0ZT1bXTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS5hdHRyKCdkYXRhLW5hbWUnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1pbWcnKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCfkvJrlkZgnKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlLnB1c2goJCh0aGlzKS52YWwoKSk7XHJcbiAgICAgICAgICAgICAgICBzdGF0ZS5wdXNoKCQodGhpcykuYXR0cignZGF0YS1zdHlsZScpKTtcclxuICAgICAgICAgICAgICAgIHN0YXRlQWxsLnB1c2goc3RhdGUpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coc3RhdGVBbGwpO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhcnJOdW0pO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhcnJQcm8pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhhcnJTaW5nbGUpO1xyXG4gICAgICAgICAgICB2YXIgbmV3QXJyPSBhcnJTaW5nbGUuY29uY2F0KGFyck51bSxhcnJQcm8pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgY29uc29sZS5sb2coaGFzQ2hvaWNlKTtcclxuICAgICAgICAgICAgaWYobmV3QXJyPT1cIlwiKXtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+mAieaLqeimgea3u+WKoOeahOWVhuWTgeOAglwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZih1bmlxdWUoaGFzQ2hvaWNlLG5ld0Fycik9PTEpe1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35Yu/6YeN5aSN6YCJ5oup5re75Yqg55qE5ZWG5ZOB44CCXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGZvcihpPTA7aTxzdGF0ZUFsbC5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgICAgICAgICAkKCcuYWRkZWRMaXN0JykuYXBwZW5kKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnPGRpdiBkYXRhLXRhYj0nICtzdGF0ZUFsbFtpXVs0XSsgJyBjbGFzcz1cImFkZGVkSXRlbVwiIGRhdGEtaWQ9XCInICsgc3RhdGVBbGxbaV1bM11cclxuICAgICAgICAgICAgICAgICAgICAgICAgKyAnXCI+PHNwYW4+JytzdGF0ZUFsbFtpXVsyXSArICc8L3NwYW4+PGltZyBzcmM9XCInICsgc3RhdGVBbGxbaV1bMV1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKyAnXCIgYWx0PVwiJytzdGF0ZUFsbFtpXVswXSArICdcIj48c3BhbiBjbGFzcz1cInNwYW5Db25cIj4nICsgc3RhdGVBbGxbaV1bMF1cclxuICAgICAgICAgICAgICAgICAgICAgICAgKyAnPC9zcGFuPjxidXR0b24gdHlwZT1cImJ1dHRvblwiIGNsYXNzPVwiY2xvc2UgY2xvc2VJdGVtXCI+w5c8L2J1dHRvbj48L2Rpdj4nXHJcbiAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaGFzQ2hvaWNlPWhhc0Nob2ljZS5jb25jYXQobmV3QXJyKTtcclxuICAgICAgICAgICAgICAgICQoJyNhZGRNb2RhbCcpLmZhZGVPdXQoMjAwKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICB9KTtcclxuICAgICAgICAvL+WIoOmZpOW3sumAieWVhuWTgVxyXG4gICAgICAgICQoXCIuYWRkZWRMaXN0XCIpLm9uKFwiY2xpY2tcIixcIi5jbG9zZUl0ZW1cIixmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykucHJldigpLnByZXYoKS5jbGljaygpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnBhcmVudCgpLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICB2YXIgZGVsZXRlSXRlbT0kKHRoaXMpLnBhcmVudCgpLmF0dHIoJ2RhdGEtaWQnKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coZGVsZXRlSXRlbSk7XHJcbiAgICAgICAgICAgIGhhc0Nob2ljZS5yZW1vdmUoZGVsZXRlSXRlbSk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGhhc0Nob2ljZSk7XHJcblxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvL+S/neWtmOaPkOS6pOmDqOWIhihzdWJtaXQpXHJcbiAgICAgICAgJCgnI3N1Ym1pdExpc3QnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKFwiY2VzaGlcIituZXdGb3JtRmxhZyk7XHJcbiAgICAgICAgICAgIGlmKG5ld0Zvcm1GbGFnKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTsgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBuZXdGb3JtRmxhZz10cnVlO1xyXG4gICAgICAgICAgICBnb29kc1JhbmdlPVtdOy8v572u56m65pWw57uE77yM6Ziy5q2i5o+Q5Lqk5aSx6LSl5pe255Sf5oiQ6YeN5aSNaWRcclxuICAgICAgICAgICAgJCgnLmFkZGVkSXRlbScpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgICAgIGdvb2RzUmFuZ2UucHVzaCgkKHRoaXMpLmF0dHIoJ2RhdGEtaWQnKSsnLS0nKyQodGhpcykuYXR0cignZGF0YS10YWInKSk7XHJcbiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhzdGF0ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhnb29kc1JhbmdlKTsgIFxyXG5cclxuICAgICAgICAgICAgLy/ojrflj5blgLxcclxuICAgICAgICAgICAgY291cG9uTmFtZT0kLnRyaW0oJCgnW25hbWU9XCJ0aXRsZVwiXScpLnZhbCgpKTtcclxuICAgICAgICAgICAgY291cG9uUHJpY2U9TWF0aC5yb3VuZCgoJC50cmltKCQoJ1tuYW1lPVwicHJpY2VcIl0nKS52YWwoKSkpKjEwMCk7XHJcbiAgICAgICAgICAgIC8v6I635Y+W5L2/55So5p2h5Lu2XHJcbiAgICAgICAgICAgIGlmKCQoJyN1c2VDZG5fMScpLnByb3AoJ2NoZWNrZWQnKSl7XHJcbiAgICAgICAgICAgICAgICAvLyBpc1Rlbj1wYXJzZUZsb2F0KCQoJ1tuYW1lPVwicmVfcHJpY2VcIl0nKS52YWwoKSkqMTAwO1xyXG4gICAgICAgICAgICAgICAgbGltaXRTdGF0dXMgPSAxO1xyXG4gICAgICAgICAgICAgICAgaXNUZW49TWF0aC5yb3VuZChwYXJzZUZsb2F0KCQoJ1tuYW1lPVwicmVfcHJpY2VcIl0nKS52YWwoKSkqMTAwKSB8fCBcImVtcHR5XCI7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIuS9v+eUqOadoeS7tlwiK2lzVGVuKTtcclxuICAgICAgICAgICAgfWVsc2UgaWYoJCgnI3VzZUNkbl8yJykucHJvcCgnY2hlY2tlZCcpKXtcclxuICAgICAgICAgICAgICAgIGxpbWl0U3RhdHVzID0gMDtcclxuICAgICAgICAgICAgICAgIGlzVGVuPSAwIDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgLy8gaXNUZW49TWF0aC5yb3VuZChwYXJzZUZsb2F0KCQoJ1tuYW1lPVwicmVfcHJpY2VcIl0nKS52YWwoKSkqMTAwKSB8fCAwO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImlzVGVuXCIsaXNUZW4pXHJcbiAgICAgICAgICAgIHRpbWVTdGFydD0kLnRyaW0oJCgnW25hbWU9XCJ2YWxpZF9hdFwiXScpLnZhbCgpKTtcclxuICAgICAgICAgICAgdGltZUVuZD0kLnRyaW0oJCgnW25hbWU9XCJpbnZhbGlkX2F0XCJdJykudmFsKCkpO1xyXG4gICAgICAgICAgICBwb3BOdW09JC50cmltKCQoJ1tuYW1lPVwiY291bnRcIl0nKS52YWwoKSk7XHJcbiAgICAgICAgICAgIHBlb3BsZUxpbT0kKCdbbmFtZT1cInJlY2VpdmVfcnVsZVwiXScpLnZhbCgpO1xyXG4gICAgICAgICAgICBpZigkKCdbbmFtZT1cImV4dGVuc2lvblwiXScpLnByb3AoJ2NoZWNrZWQnKSl7XHJcbiAgICAgICAgICAgICAgICBpc1RvRGV0YWlsPTE7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgaXNUb0RldGFpbD0wO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL+S8oOWHuuaVsOaNruWvueixoVxyXG4gICAgICAgICAgICBhbGxGb3JtTXNnPXtcclxuICAgICAgICAgICAgICAgIHRpdGxlOmNvdXBvbk5hbWUsXHJcbiAgICAgICAgICAgICAgICBwcmljZTpjb3Vwb25QcmljZSxcclxuICAgICAgICAgICAgICAgIHJlY2VpdmVfcnVsZTpwZW9wbGVMaW0sXHJcbiAgICAgICAgICAgICAgICB2YWxpZF9hdDp0aW1lU3RhcnQsXHJcbiAgICAgICAgICAgICAgICBpbnZhbGlkX2F0OnRpbWVFbmQsXHJcbiAgICAgICAgICAgICAgICByZXF1aXJlX3ByaWNlOmlzVGVuLFxyXG4gICAgICAgICAgICAgICAgY291bnQ6cG9wTnVtLFxyXG4gICAgICAgICAgICAgICAgc3ByZWFkX3R5cGU6cG9wV2F5LFxyXG4gICAgICAgICAgICAgICAgaXNfc2hvdzppc1RvRGV0YWlsLFxyXG4gICAgICAgICAgICAgICAgcmVzb3VyY2U6Z29vZHNSYW5nZSxcclxuICAgICAgICAgICAgICAgIHR5cGU6dHlwZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGVkaXRJZCl7XHJcbiAgICAgICAgICAgICAgICBhbGxGb3JtTXNnLmlkPWVkaXRJZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhhbGxGb3JtTXNnKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsbEZvcm1Nc2cucHJpY2UpXHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsbEZvcm1Nc2cucmVxdWlyZV9wcmljZSlcclxuICAgICAgICAgICAgaWYocGFnZV90eXBlPT0wICYmIGNoZWNrRm9ybShhbGxGb3JtTXNnLGNtcCxsaW1pdFN0YXR1cykpe1xyXG4gICAgICAgICAgICAgICAgc3VibWl0Rm9ybShcIi9jb3Vwb24vYWRkXCIsYWxsRm9ybU1zZyk7XHJcbiAgICAgICAgICAgIH1lbHNlIGlmKHBhZ2VfdHlwZT09MSAmJiBjaGVja0Zvcm0oYWxsRm9ybU1zZyxjbXApKXtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdjaGVjayBpcyB0dXJlJylcclxuICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oXCIvY291cG9uL2VkaXRDb3Vwb25cIixhbGxGb3JtTXNnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcblxyXG4gICAgfSgpXHJcbiAgICAvL+aPkOS6pOaXtumqjOivgeihqOWNlVxyXG4gICAgZnVuY3Rpb24gY2hlY2tGb3JtKGluZm8sY21wLGxpbWl0KSB7XHJcbiAgICAgICAgbmV3Rm9ybUZsYWc9ZmFsc2U7XHJcbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby50aXRsZSkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LyY5oOg5Yi45ZCN56ew5LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdGb3JtRmxhZyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGluZm8udGl0bGUubGVuZ3RoID49IDEwKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS8mOaDoOWIuOWQjeensOS4jeiDvei2hei/hzEw5Liq5a2X77yBXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhuZXdGb3JtRmxhZyk7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5wcmljZSkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LyY5oOg5Yi46Z2i6aKd5LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChpbmZvLnByaWNlID4gMTAwMDAwMDAwMCkgey8v57uZ5ZCO5Y+w5Lyg5YC85Li65YiG77yM5pyA57uI5Yik5pat5YC85ZCO5Lya5LmYMTAwXHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS8mOaDoOWIuOmdoumineS4jeiDveWkp+S6jjEwMDAwMDAw77yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHBhcnNlRmxvYXQoaW5mby5jb3VudCk8cGFyc2VGbG9hdChjbXApKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5L+u5pS55Y+R6KGM6YeP5Y+q6IO95aKe5LiN6IO95YeP77yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8udmFsaWRfYXQpJiYkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uaW52YWxpZF9hdCkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pyJ5pWI5pyf6LW35q2i5pe26Ze05LiN6IO95Li656m677yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uY291bnQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuWPkeihjOaVsOmHj+S4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoaW5mby5jb3VudCA+IDEwMDAwMDApIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Y+R6KGM5pWw6YeP5LiN6IO96LaF6L+HMSwwMDAsMDAw5byg77yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGlmKGluZm8udHlwZT09MCl7XHJcbiAgICAgICAgLy8gICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8ucmVzb3VyY2UpKSB7XHJcbiAgICAgICAgLy8gICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLllYblk4HojIPlm7TkuI3og73kuLrnqbrvvIFcIik7XHJcbiAgICAgICAgLy8gICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLnZhbGlkX2F0KSkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnInmlYjmnJ/lvIDlp4vml7bpl7TmoLzlvI/plJnor69cIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLmludmFsaWRfYXQpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuacieaViOacn+e7k+adn+aXtumXtOagvOW8j+mUmeivr1wiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihpbmZvLnJlcXVpcmVfcHJpY2UgPT09IFwiZW1wdHlcIil7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS9v+eUqOadoeS7tuS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighJGZvcm1DaGVjay5jaGVja1RpbWVPcmRlcihpbmZvLnZhbGlkX2F0LGluZm8uaW52YWxpZF9hdCkpe1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmnInmlYjmnJ/nu5PmnZ/ml7bpl7Tlv4XpobvlpKfkuo7lvIDlp4vml7bpl7TvvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrTnVtKGluZm8ucHJpY2UpKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaCqOeahOmdouminei+k+WFpeagvOW8j+acieivr++8jOivt+mHjeaWsOi+k+WFpe+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tOdW0oaW5mby5jb3VudCkpIHtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oKo55qE5Y+R6KGM6YeP6L6T5YWl5qC85byP5pyJ6K+v77yM6K+36YeN5paw6L6T5YWl77yBXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKGluZm8ucmVxdWlyZV9wcmljZT09TmFOIHx8IGluZm8ucmVxdWlyZV9wcmljZT09bnVsbCl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS8mOaDoOWIuOmdoumineS4jeiDveS4uuepuu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihpbmZvLnByaWNlPj1pbmZvLnJlcXVpcmVfcHJpY2UgJiYgbGltaXQgPT0gMSl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS8mOaDoOWIuOmdoumineimgeWwj+S6juS9v+eUqOadoeS7tu+8gVwiKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBuZXdGb3JtRmxhZz10cnVlO1xyXG4gICAgICAgIFxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIGlmKHVwbG9hZENoYW5uZWxUeXBlPT0gMSAmJiBpbmZvLnBheW1lbnRfdHlwZT09IDIgJiYgaW5mby5waWVjZV9wcmljZSA+IGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICogMTAwKXtcclxuICAgICAgICAvLyAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5Lu35qC85LiN6IO95aSn5LqOIFwiICsgYmFzZVV0aWxzLm1heElucHV0UHJpY2UgKyBcIiDlvKBcIik7XHJcbiAgICAgICAgLy8gICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcbiAgICAvL+ihqOWNleaPkOS6pOaWueazlVxyXG4gICAgZnVuY3Rpb24gc3VibWl0Rm9ybSh1cmwsYWxsbWFnKXtcclxuICAgICAgICAkLmFqYXgodXJsLHtcclxuICAgICAgICAgICAgdHlwZTonUE9TVCcsXHJcbiAgICAgICAgICAgIGRhdGFUeXBlOidKU09OJyxcclxuICAgICAgICAgICAgZGF0YTphbGxtYWcsXHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6ZnVuY3Rpb24oZGF0YSl7XHJcbiAgICAgICAgICAgICAgICBpZihkYXRhLmNvZGU9PTApe1xyXG4gICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmPVwiL2NvdXBvbi9pbmRleFwiXHJcbiAgICAgICAgICAgICAgICB9ZWxzZSBpZihkYXRhLmNvZGU9PS0xKXtcclxuICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoZGF0YS5tc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0Zvcm1GbGFnPWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJlbG9hZFBhZ2UoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhocixzdGF0dXMsZXJyKXtcclxuICAgICAgICAgICAgICAgIG5ld0Zvcm1GbGFnPWZhbHNlO1xyXG4gICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgfVxyXG4gICAgLy/mn6Xph43mlrnms5VcclxuICAgIGZ1bmN0aW9uIHVuaXF1ZShhcnIxLGFycjIpe1xyXG4gICAgICAgIHZhciBpdGVtPTA7XHJcbiAgICAgICAgZm9yKHZhciBpPTA7aTxhcnIxLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBpZihhcnIyLmluZGV4T2YoYXJyMVtpXSkhPS0xKXtcclxuICAgICAgICAgICAgICAgIGl0ZW09MTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gaXRlbTtcclxuICAgIH1cclxuICAgIC8v5Yig6Zmk5pWw57uE5YWD57Sg5pa55rOVXHJcbiAgICBBcnJheS5wcm90b3R5cGUucmVtb3ZlID0gZnVuY3Rpb24odmFsKSB7XHJcbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5pbmRleE9mKHZhbCk7XHJcbiAgICAgICAgaWYgKGluZGV4ID4gLTEpIHtcclxuICAgICAgICAgICAgdGhpcy5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvLyBpbml0KClcclxuICAgIC8vIGZ1bmN0aW9uIGluaXQoKXtcclxuICAgIC8vICAgICBzd2l0Y2godGFiU3RhdHVzKXtcclxuICAgIC8vICAgICAgICAgY2FzZSBcIjBcIjokKCcjdGFiXzAnKS5zaG93KCkuJChcIiN0YWJfMSwjdGFiXzJcIikuaGlkZGVuKClcclxuICAgIC8vICAgICAgICAgYnJlYWs7XHJcbiAgICAvLyAgICAgICAgIGNhc2UgXCIxXCI6JCgnI3RhYl8xJykuc2hvdygpLiQoXCIjdGFiXzAsI3RhYl8yXCIpLmhpZGRlbigpXHJcbiAgICAvLyAgICAgICAgIGJyZWFrO1xyXG4gICAgLy8gICAgICAgICBjYXNlIFwiMlwiOiQoJyN0YWJfMicpLnNob3coKS4kKFwiI3RhYl8xLCN0YWJfMFwiKS5oaWRkZW4oKVxyXG4gICAgLy8gICAgICAgICBicmVhaztcclxuICAgIC8vICAgICB9XHJcbiAgICAvLyB9XHJcbn1cclxuZnVuY3Rpb24gaW5pdCgpey8v5Yid5aeL5YyW5LyY5oOg5Yi45ZWG5ZOB5by556qX5YaF5a65XHJcbiAgICAkLmFqYXgoe1xyXG4gICAgICAgIHR5cGU6IFwiR0VUXCIsXHJcbiAgICAgICAgdXJsOiAnL2NvdXBvbi9hZGRfcHJvZHVjdHMnLFxyXG4gICAgICAgIGRhdGFUeXBlOiBcImh0bWxcIixcclxuICAgICAgICBzdWNjZXNzOiBmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAkKCcuaW5pdExpc3QnKS5odG1sKGRhdGEpO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgZXJyb3I6IGZ1bmN0aW9uKHhociwgc3RhdHVzLCBlcnIpIHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coeGhyKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKHN0YXR1cyk7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn572R57uc6ZSZ6K+v77yM6K+356iN5ZCO5YaN6K+V77yBJyk7XHJcbiAgICAgICAgICAgIC8vaGlkZUxvYWRpbmcoKTtcclxuICAgICAgICAgICAgLy8gJChcIi5sb2FkaW5nU1wiKS5mYWRlT3V0KDMwMCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSlcclxufVxyXG5mdW5jdGlvbiBjbGVhck5vTnVtKG9iail7IFxyXG4gICBvYmoudmFsdWUgPSBvYmoudmFsdWUucmVwbGFjZSgvW15cXGQuXS9nLFwiXCIpOyAgLy/muIXpmaTigJzmlbDlrZfigJ3lkozigJwu4oCd5Lul5aSW55qE5a2X56ymICBcclxuICAgb2JqLnZhbHVlID0gb2JqLnZhbHVlLnJlcGxhY2UoL1xcLnsyLH0vZyxcIi5cIik7IC8v5Y+q5L+d55WZ56ys5LiA5LiqLiDmuIXpmaTlpJrkvZnnmoQgIFxyXG4gICBvYmoudmFsdWUgPSBvYmoudmFsdWUucmVwbGFjZShcIi5cIixcIiQjJFwiKS5yZXBsYWNlKC9cXC4vZyxcIlwiKS5yZXBsYWNlKFwiJCMkXCIsXCIuXCIpOyBcclxuICAgb2JqLnZhbHVlID0gb2JqLnZhbHVlLnJlcGxhY2UoL14oXFwtKSooXFxkKylcXC4oXFxkXFxkKS4qJC8sJyQxJDIuJDMnKTsvL+WPquiDvei+k+WFpeS4pOS4quWwj+aVsCAgXHJcbiAgIGlmKG9iai52YWx1ZS5pbmRleE9mKFwiLlwiKTwgMCAmJiBvYmoudmFsdWUgIT1cIlwiKXsvL+S7peS4iuW3sue7j+i/h+a7pO+8jOatpOWkhOaOp+WItueahOaYr+WmguaenOayoeacieWwj+aVsOeCue+8jOmmluS9jeS4jeiDveS4uuexu+S8vOS6jiAwMeOAgTAy55qE6YeR6aKdIFxyXG4gICAgICAgb2JqLnZhbHVlPSBwYXJzZUZsb2F0KG9iai52YWx1ZSk7IFxyXG4gICB9IFxyXG59IFxyXG5mdW5jdGlvbiBzZXRDb25kaXRpb24oKXtcclxuICAgICQoJy50aGVUZW4nKS5odG1sKHBhcnNlRmxvYXQoJCgnW25hbWU9XCJwcmljZVwiXScpLnZhbCgpKSswLjEpO1xyXG59Il19
