var width;var height;var params={};var pay_type=2;var resource_type;var file_size;var cos=new InitCosCloud;var ready_pic=false;var pic_url="";var sign_url="";var try_url="";var noEffect_url="";var try_length="";var audio_length="";var noEffect_length="";var noEffect_size="";var is_single_sale=0;var prevVal;$(document).ready(function(){prevVal=+$("#serviceContent :radio:checked").val();params["push_state"]=prevVal;getInternetExplorerVersion();changeSingleAndPackage();datetimepickerconfig("#start_time");monitorPriceChange();$("#checkbox-img").click(function(){var e=$("#checkbox-img").attr("checked-state");if(e=="unchecked"){$("#checkbox-img").attr("checked-state","checked");$("#checkbox-img").css("backgroundPosition","-104px 0");$("#single_price_div").removeClass("hide")}else if(e=="checked"){$("#checkbox-img").attr("checked-state","unchecked");$("#checkbox-img").css("backgroundPosition","-78px 0");$("#single_price_div").addClass("hide")}});isShowService();$("#resource_package").on("change",function(e){isShowService()});openService()});function isShowService(){if($("#package_select").hasClass("border_blue")){var e=$("#resource_package option:selected").attr("about");if(e>0){$("#serviceContent").show();params["push_state"]=prevVal}else{$("#serviceContent").hide();delete params["push_state"]}}else{$("#serviceContent").hide();delete params["push_state"]}}function openService(){if($("#serviceContent").data("setting")==1){$("#serviceContent").on("click",":radio",function(e){var a=$(this);var s=+a.val();if(s!==prevVal&&s==1){e.preventDefault();var i="您需要到微信公众号后台将您的服务号所在行业设置为“教育/培训”，设置完成后，开启服务号通知方可正常发送模板消息。"+"<br/><a target='_blank' href='/help/instructions#hp5_wx_service' style='margin-top:10px;'>什么是模板消息？</a>";var r={title:"提示",btn:3,oktext:"我已设置",canceltext:"关闭",icon:"blue",onOk:function(){$.ajax("/is_industry",{type:"GET",dataType:"json",data:{}}).done(function(e){var i=e.ret;if(i==0){a.prop("checked",true);prevVal=s;params["push_state"]=s;$("#serviceContent").data("state",s);baseUtils.show.blueTip("模板消息推送开启")}else{baseUtils.show.redTip("无法开启消息推送，请按照提示修改设置")}}).fail(function(e,a,s){console.error(s);baseUtils.show.redTip("服务器出差啦，请稍后重试")})}};$.alert(i,"custom",r);return false}else{params["push_state"]=s;$("#serviceContent").data("state",s);prevVal=s}})}else{$("#serviceContent").on("click",":radio",function(e){var a=$(this);var s=+a.val();if(s!==prevVal&&s==1){params["push_state"]=s;$("#serviceContent").data("state",s);prevVal=s;baseUtils.show.blueTip("模板消息推送开启")}else{params["push_state"]=s;$("#serviceContent").data("state",s);prevVal=s}})}}function monitorPriceChange(){inputLimitPrice("#resource_price")}function changeSingleAndPackage(){$(".upload_type").on("click",function(){$(".upload_type").removeClass("border_blue");$("#resource_price").removeAttr("readonly");$("#resource_price").val("");$(this).addClass("border_blue");isShowService();if($("#single_select").hasClass("border_blue")){$("#price_div").removeClass("hide");$(".searchSelectArea").addClass("hide");$("#resource_package").addClass("hide");if(!$(".package_side_pay").hasClass("hide")){$(".package_side_pay").addClass("hide")}pay_type=2}else if($("#package_select").hasClass("border_blue")){$("#price_div").addClass("hide");$(".searchSelectArea").removeClass("hide");$("#resource_package").removeClass("hide");$(".package_side_pay").removeClass("hide");pay_type=3}else{$("#price_div").addClass("hide");$(".searchSelectArea").addClass("hide");$("#resource_package").addClass("hide");$("#resource_price").attr("readonly","readonly");$("#resource_price").val("0.00");if(!$(".package_side_pay").hasClass("hide")){$(".package_side_pay").addClass("hide")}pay_type=1}})}$(function(){$("#resource_pic").on("change",function(){var e=getObjectURL(this.files[0]);var a=this.files[0].size;if($(this).attr("id")=="resource_pic"&&a>4*1e3*1e3){baseUtils.show.redTip("图片太大!请不要超过4M!");return}try{var s,i;if(s=this.files[0]){i=new Image;i.onload=function(){width=this.width;height=this.height};i.src=e}}catch(e){}$(this).nextAll(".pic_add").addClass("hide");$(this).nextAll(".pic_close").removeClass("hide");$("#icon_uploadPic").removeClass("hide");$(this).nextAll(".pic_show").removeClass("hide");$(this).nextAll(".pic_show").attr("src",e);$(".pic_close").on("click",function(){$(this).addClass("hide");$("#icon_uploadPic").addClass("hide");$("#icon_uploadPic_success").addClass("hide");$(this).nextAll(".pic_show").addClass("hide");$(this).nextAll(".pic_add").removeClass("hide");$(this).prevAll("#resource_pic").val("")});if(!checkPic()){return}else{sliceUpload("#resource_pic",get_cos_image_path(),ResourcePic_successCallBack,ResourcePic_errorCallBack,"picture")}})});function getObjectURL(e){var a=null;if(window.createObjectURL!=undefined){a=window.createObjectURL(e)}else if(window.URL!=undefined){a=window.URL.createObjectURL(e)}else if(window.webkitURL!=undefined){a=window.webkitURL.createObjectURL(e)}return a}function checkPic(){var e=$("#resource_pic").val();if(e.length==0){baseUtils.show.redTip("封面不能为空!");return false}else{var a=$("#resource_pic").prop("files");var s=a[0].type;if(s.indexOf("image")<0){baseUtils.show.redTip("封面必须为图片文件!");return false}}return true}var ResourcePic_successCallBack=function(e){$("#icon_uploadPic").addClass("hide");$("#icon_uploadPic_success").removeClass("hide");var a=e.data.access_url;pic_url=a;ready_pic=true};var ResourcePic_errorCallBack=function(e){baseUtils.show.redTip("封面图上传失败，请重新上传!")};function sliceUpload(e,a,s,i,r){var t=$(e).prop("files");file_size=t[0]["size"];if(t&&t.length==1){var c=getObjectURL(t[0]);if(r=="noEffect"){noEffect_size=(t[0]["size"]/(1024*1024)).toFixed(1);var o=document.getElementById("noEffect_time");o.src=c}browserMD5File(t[0],function(e,r){var c=t[0]["name"];var o=c.split(".");var l=o[o.length-1];a=a+r+"."+l;cos.uploadFileWithoutPro(s,i,a,t[0],0)})}else{baseUtils.show.redTip("请选择一个文件")}}var progressCallBack=function(e){console.log("uploading... curr progress is "+e)};function uploadArticle(){var e=$("#resource_title").val().trim();if(e.length==0){baseUtils.show.redTip("名称不能为空!");return false}var a=$("#start_time").val().trim();if(a.length==0){baseUtils.show.redTip("上架时间不能为空!");return false}var s=$("#resource_price").val().trim();var i="";var r="";var t="";var c="";if(pay_type!=3){if(pay_type==2){if(s.length==0){baseUtils.show.redTip("价格不能为空!");return false}else if(s<=0){baseUtils.show.redTip("价格需高于0.00!");return false}}params["piece_price"]=$("#resource_price").val().trim()*100}else{i=$("#resource_package").find("option:selected").val();if(i==undefined||i.length==0){baseUtils.show.redTip("请选择产品包!");return false}r=$("#resource_package").find("option:selected").text().trim();params["piece_price"]=$("#resource_package").find("option:selected").attr("about");c=$("#resource_package").find("option:selected").attr("state");var o=$("#checkbox-img").attr("checked-state");if(o=="unchecked"){is_single_sale=0}else if(o=="checked"){is_single_sale=1;var l=/^((0)|([1-9]{1}\d*))(\.\d{1,2})?$/;var n=$("#single_price").val().trim();if(n.length>0){if(l.test(n)){if(n==0||n==0||n==0){baseUtils.show.redTip("金额不能为0!");return false}params["piece_price"]=n*100}else{baseUtils.show.redTip("请输入正确的金额！");return false}}else{baseUtils.show.redTip("请输入单价!");return false}}}var d=$("#resource_pic").val();if(d.length==0){baseUtils.show.redTip("封面不能为空!");return false}var p=UE.getEditor("container");var h=p.getContent();if(h.length==0){baseUtils.show.redTip("请输入图文内容!");return false}var u=p.getPlainTxt();showLoading();var _=$("#resource_pic").prop("files");browserMD5File(_[0],function(s,t){var o=_[0]["name"];var l=o.split(".");var n=l[l.length-1];var d=get_cos_image_path()+t+"."+n;cos.uploadFileWithoutPro(function(s){var t=s.data.access_url;var o={};params["title"]=e;params["start_at"]=a;params["img_url"]=t;params["img_url_compressed"]=t;params["payment_type"]=pay_type;params["product_id"]=i;params["product_name"]=r;params["product_state"]=c;params["content"]=u;params["org_content"]=h;o["params"]=params;o["is_single_sale"]=is_single_sale;$.post("/addarticle",o,function(e){hideLoading();Is_Save=false;if(e.ret==0){baseUtils.show.blueTip("上传成功!",function(){window.location.href="/article_list"})}else{baseUtils.show.redTip("上传失败!")}})},function(e){baseUtils.show.redTip("上传失败!");uploadErrorShow(e.responseText)},d,_[0],0)})}function toAddPackage(){$.alert.xcConfirm("您确定要去新增专栏页面吗?","confirm",{onOk:function(){window.location.href="/package_list"}})}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL0FydGljbGVVcGxvYWQuanMiXSwibmFtZXMiOlsid2lkdGgiLCJoZWlnaHQiLCJwYXJhbXMiLCJwYXlfdHlwZSIsInJlc291cmNlX3R5cGUiLCJmaWxlX3NpemUiLCJjb3MiLCJJbml0Q29zQ2xvdWQiLCJyZWFkeV9waWMiLCJwaWNfdXJsIiwic2lnbl91cmwiLCJ0cnlfdXJsIiwibm9FZmZlY3RfdXJsIiwidHJ5X2xlbmd0aCIsImF1ZGlvX2xlbmd0aCIsIm5vRWZmZWN0X2xlbmd0aCIsIm5vRWZmZWN0X3NpemUiLCJpc19zaW5nbGVfc2FsZSIsInByZXZWYWwiLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsInZhbCIsImdldEludGVybmV0RXhwbG9yZXJWZXJzaW9uIiwiY2hhbmdlU2luZ2xlQW5kUGFja2FnZSIsImRhdGV0aW1lcGlja2VyY29uZmlnIiwibW9uaXRvclByaWNlQ2hhbmdlIiwiY2xpY2siLCJjaGVja2VkU3RhdGUiLCJhdHRyIiwiY3NzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImlzU2hvd1NlcnZpY2UiLCJvbiIsImUiLCJvcGVuU2VydmljZSIsImhhc0NsYXNzIiwicGFja2FnZVByaWNlIiwic2hvdyIsImhpZGUiLCJkYXRhIiwiZWxlIiwidGhpcyIsImN1cnJWYWwiLCJwcmV2ZW50RGVmYXVsdCIsInR4dCIsIm9wdGlvbiIsInRpdGxlIiwiYnRuIiwib2t0ZXh0IiwiY2FuY2VsdGV4dCIsImljb24iLCJvbk9rIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImRvbmUiLCJjb2RlIiwicmV0IiwicHJvcCIsImJhc2VVdGlscyIsImJsdWVUaXAiLCJyZWRUaXAiLCJmYWlsIiwieGhyIiwidGV4dCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImFsZXJ0IiwiaW5wdXRMaW1pdFByaWNlIiwicmVtb3ZlQXR0ciIsInNyY3MiLCJnZXRPYmplY3RVUkwiLCJmaWxlcyIsImZpbGVTaXplIiwic2l6ZSIsImZpbGUiLCJpbWciLCJJbWFnZSIsIm9ubG9hZCIsInNyYyIsIm5leHRBbGwiLCJwcmV2QWxsIiwiY2hlY2tQaWMiLCJzbGljZVVwbG9hZCIsImdldF9jb3NfaW1hZ2VfcGF0aCIsIlJlc291cmNlUGljX3N1Y2Nlc3NDYWxsQmFjayIsIlJlc291cmNlUGljX2Vycm9yQ2FsbEJhY2siLCJ1cmwiLCJ3aW5kb3ciLCJjcmVhdGVPYmplY3RVUkwiLCJ1bmRlZmluZWQiLCJVUkwiLCJ3ZWJraXRVUkwiLCJwaWNfaW5wdXQiLCJsZW5ndGgiLCJwcm9wX3BpYyIsInBpY190eXBlIiwiaW5kZXhPZiIsInJlc3VsdCIsImFjY2Vzc191cmwiLCJpZGVudGl0eSIsInJlbW90ZVBhdGgiLCJzdWNjZXNzQ2FsbEJhY2siLCJlcnJvckNhbGxCYWNrIiwiZmlsZV90eXBlIiwicmVzb3VyY2VfbG9jYWxfdXJsIiwidG9GaXhlZCIsInJlc291cmNlX2VsZW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImJyb3dzZXJNRDVGaWxlIiwibWQ1IiwiZmlsZV9uYW1lIiwibmFtZXMiLCJzcGxpdCIsInN1ZmZpeCIsInVwbG9hZEZpbGVXaXRob3V0UHJvIiwicHJvZ3Jlc3NDYWxsQmFjayIsImN1cnIiLCJsb2ciLCJ1cGxvYWRBcnRpY2xlIiwicmVzb3VyY2VfdGl0bGUiLCJ0cmltIiwic3RhcnRfdGltZSIsInJlc291cmNlX3ByaWNlIiwicmVzb3VyY2VfcGFja2FnZSIsInBhY2thZ2VfbmFtZSIsInBpZWNlX3ByaWNlIiwicHJvZHVjdF9zdGF0ZSIsImZpbmQiLCJyZWciLCJzaW5nbGVfcHJpY2UiLCJ0ZXN0IiwidWUiLCJVRSIsImdldEVkaXRvciIsImh0bWwiLCJnZXRDb250ZW50IiwiY29udGVudCIsImdldFBsYWluVHh0Iiwic2hvd0xvYWRpbmciLCJhbGxQYXJhbXMiLCJwb3N0IiwiaGlkZUxvYWRpbmciLCJJc19TYXZlIiwibG9jYXRpb24iLCJocmVmIiwidXBsb2FkRXJyb3JTaG93IiwicmVzcG9uc2VUZXh0IiwidG9BZGRQYWNrYWdlIiwieGNDb25m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THBJLEVBQUVtRCxNQUFNa0YsVUFBVSxnQkFBaUIsV0FDL0JuRyxLQUFNLFdBQ0ZzQyxPQUFPd0QsU0FBU0MsS0FBTyIsImZpbGUiOiJhZG1pbi9BcnRpY2xlVXBsb2FkLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIHdpZHRoO1xyXG52YXIgaGVpZ2h0O1xyXG5cclxudmFyIHBhcmFtcyA9IHt9O1xyXG5cclxudmFyIHBheV90eXBlID0gMjsgLy/ku5jotLnnsbvlnossMeihqOekuuWFjei0ueOAgTLooajnpLrljZXkuKrku5jotLksM+ihqOekuuS4k+agj+OAglxyXG5cclxudmFyIHJlc291cmNlX3R5cGU7Ly/liJvlu7rnsbvlnotcclxuXHJcbnZhciBmaWxlX3NpemU7ICAvL+S4iuS8oOeahOaWh+S7tuWkp+Wwj1xyXG5cclxuLy/ohb7orq/kupHotYTmupBcclxuLy92YXIgYnVja2V0TmFtZSA9IHdpbmRvdy5jb3NfYnVja2V0X25hbWU7XHJcbi8vdmFyIGNvcyA9IG5ldyBDb3NDbG91ZCh3aW5kb3cuY29zX2FwcF9pZCk7XHJcbnZhciBjb3MgPSBuZXcgSW5pdENvc0Nsb3VkKCk7XHJcbi8vIHZhciBhcHBpZCA9IHdpbmRvdy5jb3NfYXBwX2lkO1xyXG4vLyB2YXIgcmVnaW9uID0gd2luZG93LmNvc19yZWdpb247XHJcbi8vIC8v5Yid5aeL5YyW6YC76L6RXHJcbi8vIHZhciBjb3MgPSBuZXcgQ29zQ2xvdWQoe1xyXG4vLyAgICAgYXBwaWQ6IGFwcGlkLFxyXG4vLyAgICAgYnVja2V0OiBidWNrZXROYW1lLFxyXG4vLyAgICAgcmVnaW9uOiByZWdpb25cclxuLy8gfSk7XHJcblxyXG52YXIgcmVhZHlfcGljID0gZmFsc2U7XHJcblxyXG52YXIgcGljX3VybCA9ICcnO1xyXG52YXIgc2lnbl91cmwgPSAnJztcclxudmFyIHRyeV91cmwgPSAnJztcclxudmFyIG5vRWZmZWN0X3VybCA9ICcnO1xyXG5cclxudmFyIHRyeV9sZW5ndGggPSAnJztcclxudmFyIGF1ZGlvX2xlbmd0aCA9ICcnO1xyXG52YXIgbm9FZmZlY3RfbGVuZ3RoID0gJyc7XHJcbnZhciBub0VmZmVjdF9zaXplID0gJyc7XHJcblxyXG4vL+aYr+WQpuWNleWNllxyXG52YXIgaXNfc2luZ2xlX3NhbGUgPSAwO1xyXG5cclxuLy9TZXRJbnRlcnZhbOi/lOWbnklEXHJcblxyXG52YXIgcHJldlZhbDtcclxuXHJcbiQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpXHJcbntcclxuICAgIHByZXZWYWwgPSArJChcIiNzZXJ2aWNlQ29udGVudCA6cmFkaW86Y2hlY2tlZFwiKS52YWwoKTsgLy/lvZPliY3ljZXpgInmoYbnmoTlgLxcclxuICAgIHBhcmFtc1sncHVzaF9zdGF0ZSddID0gcHJldlZhbDsgLy/mqKHmnb/mtojmga/pu5jorqTkuLrlhbPpl61cclxuXHJcbiAgICBnZXRJbnRlcm5ldEV4cGxvcmVyVmVyc2lvbigpO1xyXG5cclxuICAgIC8v5YiH5o2i5Y2V5Liq5ZKM5Lqn5ZOB5YyF6YCJ5oupXHJcbiAgICBjaGFuZ2VTaW5nbGVBbmRQYWNrYWdlKCk7XHJcblxyXG4gICAgLy/liJ3lp4vljJbml7bpl7TpgInmi6nlmahcclxuICAgIGRhdGV0aW1lcGlja2VyY29uZmlnKCcjc3RhcnRfdGltZScpO1xyXG5cclxuICAgIC8v55uR5ZCs6L6T5YWl5qGG5Lu35qC855qE5Y+Y5YyWXHJcbiAgICBtb25pdG9yUHJpY2VDaGFuZ2UoKTtcclxuXHJcbiAgICAvL2NoZWNrYm94XCLkuJPmoI/lpJbljZXljZZcIlxyXG4gICAgJChcIiNjaGVja2JveC1pbWdcIikuY2xpY2soZnVuY3Rpb24gKCkge1xyXG5cclxuICAgICAgICB2YXIgY2hlY2tlZFN0YXRlID0gJChcIiNjaGVja2JveC1pbWdcIikuYXR0cihcImNoZWNrZWQtc3RhdGVcIik7XHJcbiAgICAgICAgaWYgKGNoZWNrZWRTdGF0ZSA9PSBcInVuY2hlY2tlZFwiKSB7XHJcbiAgICAgICAgICAgICQoXCIjY2hlY2tib3gtaW1nXCIpLmF0dHIoXCJjaGVja2VkLXN0YXRlXCIsIFwiY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgJChcIiNjaGVja2JveC1pbWdcIikuY3NzKFwiYmFja2dyb3VuZFBvc2l0aW9uXCIsIFwiLTEwNHB4IDBcIik7XHJcbiAgICAgICAgICAgICQoXCIjc2luZ2xlX3ByaWNlX2RpdlwiKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKGNoZWNrZWRTdGF0ZSA9PSBcImNoZWNrZWRcIikge1xyXG4gICAgICAgICAgICAkKFwiI2NoZWNrYm94LWltZ1wiKS5hdHRyKFwiY2hlY2tlZC1zdGF0ZVwiLCBcInVuY2hlY2tlZFwiKTtcclxuICAgICAgICAgICAgJChcIiNjaGVja2JveC1pbWdcIikuY3NzKFwiYmFja2dyb3VuZFBvc2l0aW9uXCIsIFwiLTc4cHggMFwiKTtcclxuICAgICAgICAgICAgJChcIiNzaW5nbGVfcHJpY2VfZGl2XCIpLmFkZENsYXNzKCdoaWRlJyk7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIGlzU2hvd1NlcnZpY2UoKTsgLy/liKTmlq3mmK/lkKbmmL7npLrmtojmga/mjqjpgIHmjInpkq5cclxuICAgICQoJyNyZXNvdXJjZV9wYWNrYWdlJykub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICBpc1Nob3dTZXJ2aWNlKCk7XHJcbiAgICB9KTtcclxuICAgIC8v5Yid5aeL5YyW5pyN5Yqh5o6o6YCB5Y2V6YCJ5qGGXHJcbiAgICBvcGVuU2VydmljZSgpO1xyXG5cclxufSk7XHJcblxyXG5mdW5jdGlvbiBpc1Nob3dTZXJ2aWNlKCkgeyAvL+WIpOaWreiDveWQpuW8gOWQr+aOqOmAgVxyXG4gICAgaWYoICQoJyNwYWNrYWdlX3NlbGVjdCcpLmhhc0NsYXNzKCdib3JkZXJfYmx1ZScpICl7IC8v5aaC5p6c5b2T5YmN6YCJ5Lit55qE5piv5LiT5qCPXHJcbiAgICAgICAgdmFyIHBhY2thZ2VQcmljZSA9ICQoJyNyZXNvdXJjZV9wYWNrYWdlIG9wdGlvbjpzZWxlY3RlZCcpLmF0dHIoJ2Fib3V0Jyk7XHJcbiAgICAgICAgaWYoIHBhY2thZ2VQcmljZSA+IDAgKSB7IC8v5aaC5p6c5LiT5qCP5Lu35qC85aSn5LqOMFxyXG4gICAgICAgICAgICAkKCcjc2VydmljZUNvbnRlbnQnKS5zaG93KCk7XHJcbiAgICAgICAgICAgIHBhcmFtc1sncHVzaF9zdGF0ZSddID0gcHJldlZhbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAkKCcjc2VydmljZUNvbnRlbnQnKS5oaWRlKCk7XHJcbiAgICAgICAgICAgIGRlbGV0ZSBwYXJhbXNbJ3B1c2hfc3RhdGUnXTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgICQoJyNzZXJ2aWNlQ29udGVudCcpLmhpZGUoKTtcclxuICAgICAgICBkZWxldGUgcGFyYW1zWydwdXNoX3N0YXRlJ107XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9wZW5TZXJ2aWNlKCkge1xyXG4gICAgaWYoICQoJyNzZXJ2aWNlQ29udGVudCcpLmRhdGEoJ3NldHRpbmcnKSA9PSAxICl7XHJcbiAgICAgICAgJCgnI3NlcnZpY2VDb250ZW50Jykub24oJ2NsaWNrJywgJzpyYWRpbycsIGZ1bmN0aW9uKGUpIHtcclxuICAgICAgICAgICAgdmFyIGVsZSA9ICQodGhpcyk7XHJcbiAgICAgICAgICAgIHZhciBjdXJyVmFsID0gK2VsZS52YWwoKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCBjdXJyVmFsICE9PSBwcmV2VmFsICYmIGN1cnJWYWwgPT0gMSApIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIHZhciB0eHQ9ICBcIuaCqOmcgOimgeWIsOW+ruS/oeWFrOS8l+WPt+WQjuWPsOWwhuaCqOeahOacjeWKoeWPt+aJgOWcqOihjOS4muiuvue9ruS4uuKAnOaVmeiCsi/ln7norq3igJ3vvIzorr7nva7lrozmiJDlkI7vvIzlvIDlkK/mnI3liqHlj7fpgJrnn6Xmlrnlj6/mraPluLjlj5HpgIHmqKHmnb/mtojmga/jgIJcIitcclxuICAgICAgICAgICAgICAgIFwiPGJyLz48YSB0YXJnZXQ9J19ibGFuaycgaHJlZj0nL2hlbHAvaW5zdHJ1Y3Rpb25zI2hwNV93eF9zZXJ2aWNlJyBzdHlsZT0nbWFyZ2luLXRvcDoxMHB4Oyc+5LuA5LmI5piv5qih5p2/5raI5oGv77yfPC9hPlwiO1xyXG4gICAgICAgICAgICAgICAgdmFyIG9wdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCLmj5DnpLpcIiwgLy/lvLnlh7rmoYbmoIfpophcclxuICAgICAgICAgICAgICAgICAgICBidG46IDMsIC8v56Gu5a6aJiblj5bmtohcclxuICAgICAgICAgICAgICAgICAgICBva3RleHQ6ICfmiJHlt7Lorr7nva4nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbmNlbHRleHQ6ICflhbPpl60nLFxyXG4gICAgICAgICAgICAgICAgICAgIGljb246ICdibHVlJyxcclxuICAgICAgICAgICAgICAgICAgICBvbk9rOiBmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkLmFqYXgoJy9pc19pbmR1c3RyeScse1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdHlwZTogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkYXRhVHlwZTogJ2pzb24nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YToge31cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuZG9uZShmdW5jdGlvbihkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29kZSA9IGRhdGEucmV0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYoY29kZSA9PSAwKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbGUucHJvcCgnY2hlY2tlZCcsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZXZWYWwgPSBjdXJyVmFsO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8q5raI5oGv5o6o6YCB5byA5ZCvKi9cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBwYXJhbXNbJ3B1c2hfc3RhdGUnXSA9IGN1cnJWYWw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnI3NlcnZpY2VDb250ZW50JykuZGF0YSgnc3RhdGUnLGN1cnJWYWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLmqKHmnb/mtojmga/mjqjpgIHlvIDlkK9cIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaXoOazleW8gOWQr+a2iOaBr+aOqOmAge+8jOivt+aMieeFp+aPkOekuuS/ruaUueiuvue9rlwiKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSkuZmFpbChmdW5jdGlvbih4aHIsIHRleHQsIGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5pyN5Yqh5Zmo5Ye65beu5ZWm77yM6K+356iN5ZCO6YeN6K+VXCIpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgJC5hbGVydCh0eHQsIFwiY3VzdG9tXCIsIG9wdGlvbik7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvKuWFs+mXrea2iOaBr+aOqOmAgSovXHJcbiAgICAgICAgICAgICAgICBwYXJhbXNbJ3B1c2hfc3RhdGUnXSA9IGN1cnJWYWw7XHJcbiAgICAgICAgICAgICAgICAkKCcjc2VydmljZUNvbnRlbnQnKS5kYXRhKCdzdGF0ZScsY3VyclZhbCk7XHJcbiAgICAgICAgICAgICAgICBwcmV2VmFsID0gY3VyclZhbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAkKCcjc2VydmljZUNvbnRlbnQnKS5vbignY2xpY2snLCAnOnJhZGlvJywgZnVuY3Rpb24oZSkge1xyXG4gICAgICAgICAgICB2YXIgZWxlID0gJCh0aGlzKTtcclxuICAgICAgICAgICAgdmFyIGN1cnJWYWwgPSArZWxlLnZhbCgpO1xyXG5cclxuICAgICAgICAgICAgaWYoIGN1cnJWYWwgIT09IHByZXZWYWwgJiYgY3VyclZhbCA9PSAxICkge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zWydwdXNoX3N0YXRlJ10gPSBjdXJyVmFsO1xyXG4gICAgICAgICAgICAgICAgJCgnI3NlcnZpY2VDb250ZW50JykuZGF0YSgnc3RhdGUnLGN1cnJWYWwpO1xyXG4gICAgICAgICAgICAgICAgcHJldlZhbCA9IGN1cnJWYWw7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5qih5p2/5raI5oGv5o6o6YCB5byA5ZCvXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcGFyYW1zWydwdXNoX3N0YXRlJ10gPSBjdXJyVmFsO1xyXG4gICAgICAgICAgICAgICAgJCgnI3NlcnZpY2VDb250ZW50JykuZGF0YSgnc3RhdGUnLGN1cnJWYWwpO1xyXG4gICAgICAgICAgICAgICAgcHJldlZhbCA9IGN1cnJWYWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuXHJcbi8v55uR5ZCs5Lu35qC85Y+Y5YyWLOmYsuatouWHuueOsOi0n+aVsFxyXG5mdW5jdGlvbiBtb25pdG9yUHJpY2VDaGFuZ2UoKSB7XHJcbiAgICBpbnB1dExpbWl0UHJpY2UoXCIjcmVzb3VyY2VfcHJpY2VcIik7XHJcbn1cclxuXHJcbi8v5YiH5o2i5Y2V5Liq5ZKM5Lqn5ZOB5YyF6YCJ5oupXHJcbmZ1bmN0aW9uIGNoYW5nZVNpbmdsZUFuZFBhY2thZ2UoKSB7XHJcbiAgICAkKCcudXBsb2FkX3R5cGUnKS5vbignY2xpY2snLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgJCgnLnVwbG9hZF90eXBlJykucmVtb3ZlQ2xhc3MoJ2JvcmRlcl9ibHVlJyk7XHJcbiAgICAgICAgJChcIiNyZXNvdXJjZV9wcmljZVwiKS5yZW1vdmVBdHRyKCdyZWFkb25seScpO1xyXG4gICAgICAgICQoXCIjcmVzb3VyY2VfcHJpY2VcIikudmFsKCcnKTtcclxuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdib3JkZXJfYmx1ZScpO1xyXG4gICAgICAgIGlzU2hvd1NlcnZpY2UoKTsvL+WIpOaWreiDveS4jeiDveW8gOWQr+a2iOaBr+aOqOmAgVxyXG4gICAgICAgIGlmICgkKCcjc2luZ2xlX3NlbGVjdCcpLmhhc0NsYXNzKCdib3JkZXJfYmx1ZScpKSB7IC8v5Y2V5LiqXHJcbiAgICAgICAgICAgICQoJyNwcmljZV9kaXYnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCcuc2VhcmNoU2VsZWN0QXJlYScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICQoJyNyZXNvdXJjZV9wYWNrYWdlJykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgICAgIGlmKCEoJCgnLnBhY2thZ2Vfc2lkZV9wYXknKS5oYXNDbGFzcygnaGlkZScpKSlcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJCgnLnBhY2thZ2Vfc2lkZV9wYXknKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBwYXlfdHlwZSA9IDI7XHJcbiAgICAgICAgfSBlbHNlIGlmICgkKCcjcGFja2FnZV9zZWxlY3QnKS5oYXNDbGFzcygnYm9yZGVyX2JsdWUnKSkgeyAvL+S6p+WTgeWMhVxyXG4gICAgICAgICAgICAkKCcjcHJpY2VfZGl2JykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgJCgnLnNlYXJjaFNlbGVjdEFyZWEnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCcjcmVzb3VyY2VfcGFja2FnZScpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICQoJy5wYWNrYWdlX3NpZGVfcGF5JykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTtcclxuXHJcbiAgICAgICAgICAgIHBheV90eXBlID0gMztcclxuICAgICAgICB9IGVsc2UgeyAvL+WFjei0uVxyXG4gICAgICAgICAgICAkKCcjcHJpY2VfZGl2JykuYWRkQ2xhc3MoJ2hpZGUnKTtcclxuICAgICAgICAgICAgJCgnLnNlYXJjaFNlbGVjdEFyZWEnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKCcjcmVzb3VyY2VfcGFja2FnZScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIC8vJChcIiNyZXNvdXJjZV9wcmljZVwiKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAvL+iuvue9rlxyXG4gICAgICAgICAgICAkKFwiI3Jlc291cmNlX3ByaWNlXCIpLmF0dHIoJ3JlYWRvbmx5JywgJ3JlYWRvbmx5Jyk7XHJcbiAgICAgICAgICAgICQoXCIjcmVzb3VyY2VfcHJpY2VcIikudmFsKCcwLjAwJyk7XHJcblxyXG4gICAgICAgICAgICBpZighKCQoJy5wYWNrYWdlX3NpZGVfcGF5JykuaGFzQ2xhc3MoJ2hpZGUnKSkpXHJcbiAgICAgICAgICAgIHtcclxuXHJcbiAgICAgICAgICAgICAgICAkKCcucGFja2FnZV9zaWRlX3BheScpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcGF5X3R5cGUgPSAxO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG4kKGZ1bmN0aW9uICgpIHtcclxuICAgIC8v5LiK5Lyg5bCB6Z2i5pON5L2cXHJcbiAgICAkKFwiI3Jlc291cmNlX3BpY1wiKS5vbihcImNoYW5nZVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNyY3MgPSBnZXRPYmplY3RVUkwodGhpcy5maWxlc1swXSk7ICAgLy/ojrflj5bot6/lvoRcclxuICAgICAgICB2YXIgZmlsZVNpemUgPSB0aGlzLmZpbGVzWzBdLnNpemU7XHJcblxyXG4gICAgICAgIC8v5Yik5pat5Zu+54mH5aSn5bCPXHJcbiAgICAgICAgaWYgKCQodGhpcykuYXR0cihcImlkXCIpID09ICdyZXNvdXJjZV9waWMnICYmIGZpbGVTaXplID4gNCAqIDEwMDAgKiAxMDAwKSB7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5Zu+54mH5aSq5aSnIeivt+S4jeimgei2hei/hzRNIScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvL+iOt+WPluWbvueJh+eahOWuvemrmFxyXG4gICAgICAgICAgICB2YXIgZmlsZSwgaW1nO1xyXG4gICAgICAgICAgICBpZiAoKGZpbGUgPSB0aGlzLmZpbGVzWzBdKSkge1xyXG4gICAgICAgICAgICAgICAgaW1nID0gbmV3IEltYWdlKCk7XHJcbiAgICAgICAgICAgICAgICBpbWcub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHdpZHRoID0gdGhpcy53aWR0aDtcclxuICAgICAgICAgICAgICAgICAgICBoZWlnaHQgPSB0aGlzLmhlaWdodDtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBpbWcuc3JjID0gc3JjcztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkKHRoaXMpLm5leHRBbGwoXCIucGljX2FkZFwiKS5hZGRDbGFzcygnaGlkZScpOyAgIC8vdGhpc+aMh+eahOaYr2lucHV0XHJcbiAgICAgICAgJCh0aGlzKS5uZXh0QWxsKCcucGljX2Nsb3NlJykucmVtb3ZlQ2xhc3MoJ2hpZGUnKTsgICAvL3RoaXPmjIfnmoTmmK9pbnB1dFxyXG4gICAgICAgICQoJyNpY29uX3VwbG9hZFBpYycpLnJlbW92ZUNsYXNzKCdoaWRlJyk7ICAgLy/kuIrkvKDlsIHpnaLnmoTmoIflv5dcclxuXHJcbiAgICAgICAgJCh0aGlzKS5uZXh0QWxsKFwiLnBpY19zaG93XCIpLnJlbW92ZUNsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgJCh0aGlzKS5uZXh0QWxsKFwiLnBpY19zaG93XCIpLmF0dHIoXCJzcmNcIiwgc3Jjcyk7ICAgIC8vdGhpc+aMh+eahOaYr2lucHV0XHJcbiAgICAgICAgJChcIi5waWNfY2xvc2VcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoJ2hpZGUnKTsgICAgIC8vdGhpc+aMh+eahOaYr3NwYW5cclxuICAgICAgICAgICAgJCgnI2ljb25fdXBsb2FkUGljJykuYWRkQ2xhc3MoJ2hpZGUnKTsgICAvL+S4iuS8oOWwgemdoueahOagh+W/l1xyXG4gICAgICAgICAgICAkKCcjaWNvbl91cGxvYWRQaWNfc3VjY2VzcycpLmFkZENsYXNzKCdoaWRlJyk7XHJcbiAgICAgICAgICAgICQodGhpcykubmV4dEFsbChcIi5waWNfc2hvd1wiKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLm5leHRBbGwoXCIucGljX2FkZFwiKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgICAgICAgICAkKHRoaXMpLnByZXZBbGwoJyNyZXNvdXJjZV9waWMnKS52YWwoJycpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZighY2hlY2tQaWMoKSl7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgLy/kuIrkvKDlsIHpnaJcclxuICAgICAgICAgICAgc2xpY2VVcGxvYWQoJyNyZXNvdXJjZV9waWMnLCBnZXRfY29zX2ltYWdlX3BhdGgoKSwgUmVzb3VyY2VQaWNfc3VjY2Vzc0NhbGxCYWNrLCBSZXNvdXJjZVBpY19lcnJvckNhbGxCYWNrLCAncGljdHVyZScpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuXHJcbn0pXHJcblxyXG5mdW5jdGlvbiBnZXRPYmplY3RVUkwoZmlsZSkge1xyXG4gICAgdmFyIHVybCA9IG51bGw7XHJcbiAgICBpZiAod2luZG93LmNyZWF0ZU9iamVjdFVSTCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICB1cmwgPSB3aW5kb3cuY3JlYXRlT2JqZWN0VVJMKGZpbGUpXHJcbiAgICB9IGVsc2UgaWYgKHdpbmRvdy5VUkwgIT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdXJsID0gd2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZSlcclxuICAgIH0gZWxzZSBpZiAod2luZG93LndlYmtpdFVSTCAhPSB1bmRlZmluZWQpIHtcclxuICAgICAgICB1cmwgPSB3aW5kb3cud2Via2l0VVJMLmNyZWF0ZU9iamVjdFVSTChmaWxlKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHVybFxyXG59XHJcblxyXG5cclxuLy/moLjlr7nlsIHpnaLlm75cclxuZnVuY3Rpb24gY2hlY2tQaWMoKSB7XHJcbiAgICAvL+i1hOa6kOWwgemdolxyXG4gICAgdmFyIHBpY19pbnB1dCA9ICQoJyNyZXNvdXJjZV9waWMnKS52YWwoKTtcclxuICAgIGlmIChwaWNfaW5wdXQubGVuZ3RoID09IDApIHtcclxuICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+WwgemdouS4jeiDveS4uuepuiEnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBwcm9wX3BpYyA9ICQoJyNyZXNvdXJjZV9waWMnKS5wcm9wKCdmaWxlcycpO1xyXG4gICAgICAgIHZhciBwaWNfdHlwZSA9IHByb3BfcGljWzBdLnR5cGU7XHJcbiAgICAgICAgaWYgKHBpY190eXBlLmluZGV4T2YoJ2ltYWdlJykgPCAwKSB7IC8vICdpbWFnZS9qcGVnJ1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+WwgemdouW/hemhu+S4uuWbvueJh+aWh+S7tiEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiB0cnVlO1xyXG59XHJcbi8v5bCB6Z2i5Zu+5LiK5Lyg5oiQ5Yqf55qE5Zue6LCDXHJcbnZhciBSZXNvdXJjZVBpY19zdWNjZXNzQ2FsbEJhY2sgPSBmdW5jdGlvbiAocmVzdWx0KSB7XHJcbiAgICAkKCcjaWNvbl91cGxvYWRQaWMnKS5hZGRDbGFzcygnaGlkZScpO1xyXG4gICAgJCgnI2ljb25fdXBsb2FkUGljX3N1Y2Nlc3MnKS5yZW1vdmVDbGFzcygnaGlkZScpO1xyXG4gICAgLy92YXIganNvblJlc3VsdCA9ICQucGFyc2VKU09OKHJlc3VsdCk7XHJcbiAgICAvL+iOt+WPluWIsOi1hOa6kGNkbuiuv+mXrui/nuaOpVxyXG4gICAgdmFyIHVybCA9IHJlc3VsdC5kYXRhLmFjY2Vzc191cmw7XHJcbiAgICAvL+ehruiupOWwgemdouS4iuS8oOaIkOWKn1xyXG4gICAgcGljX3VybCA9IHVybDtcclxuICAgIHJlYWR5X3BpYyA9IHRydWU7XHJcbiAgICAvLyBjb25zb2xlLmxvZygn5bCB6Z2i6Z+z6aKR5LiK5Lyg5oiQ5Yqf55qE5Zue6LCDLeOAiycrcGFyYW1zWydpbWdfdXJsJ10pO1xyXG59XHJcbi8v5bCB6Z2i5Zu+5LiK5Lyg5aSx6LSl55qE5Zue6LCDXHJcbnZhciBSZXNvdXJjZVBpY19lcnJvckNhbGxCYWNrID0gZnVuY3Rpb24gKHJlc3VsdCkge1xyXG4gICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCflsIHpnaLlm77kuIrkvKDlpLHotKXvvIzor7fph43mlrDkuIrkvKAhJyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHNsaWNlVXBsb2FkKGlkZW50aXR5LCByZW1vdGVQYXRoLCBzdWNjZXNzQ2FsbEJhY2ssIGVycm9yQ2FsbEJhY2ssIGZpbGVfdHlwZSkge1xyXG5cclxuICAgIC8v5LiK5LygKOebtOaOpemAmui/h2pz5LiK5LygY2RuKVxyXG4gICAgdmFyIGZpbGVzID0gJChpZGVudGl0eSkucHJvcCgnZmlsZXMnKTtcclxuICAgIGZpbGVfc2l6ZSA9IGZpbGVzWzBdWydzaXplJ107XHJcbiAgICBpZiAoZmlsZXMgJiYgZmlsZXMubGVuZ3RoID09IDEpIHtcclxuICAgICAgICAvLyBpZiAoISQoJyNxcycpLmxlbmd0aCkge1xyXG4gICAgICAgIC8vICAgICAkKCdib2R5JykuYXBwZW5kKCc8b2JqZWN0IGlkPVwicXNcIiB3aWR0aD1cIjBcIiBoZWlnaHQ9XCIwXCIgdHlwZT1cImFwcGxpY2F0aW9uL3gtc2hvY2t3YXZlLWZsYXNoXCIgZGF0YT1cInNkay9Tb21ldGhpbmd0ZXN0LnN3ZlwiIHN0eWxlPVwidmlzaWJpbGl0eTogdmlzaWJsZTtcIj48L29iamVjdD4nKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8v5Y+W5paH5Lu25pe26ZW/XHJcbiAgICAgICAgdmFyIHJlc291cmNlX2xvY2FsX3VybCA9IGdldE9iamVjdFVSTChmaWxlc1swXSk7XHJcblxyXG4gICAgICAgIC8v5Y+W5aSn5bCPXHJcbiAgICAgICAgaWYgKGZpbGVfdHlwZSA9PSAnbm9FZmZlY3QnKXtcclxuICAgICAgICAgICAgbm9FZmZlY3Rfc2l6ZSA9IChmaWxlc1swXVsnc2l6ZSddIC8gKDEwMjQgKiAxMDI0KSkudG9GaXhlZCgxKTtcclxuICAgICAgICAgICAgdmFyIHJlc291cmNlX2VsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5vRWZmZWN0X3RpbWVcIik7XHJcbiAgICAgICAgICAgIHJlc291cmNlX2VsZW1lbnQuc3JjID0gcmVzb3VyY2VfbG9jYWxfdXJsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/ojrflj5bmlofku7bnmoRNRDXlgLxcclxuICAgICAgICBicm93c2VyTUQ1RmlsZShmaWxlc1swXSwgZnVuY3Rpb24gKGVyciwgbWQ1KSB7XHJcbiAgICAgICAgICAgIC8v6I635Y+W5paH5Lu25YaF5a6555qETUQ1XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdNRDU6JyArIG1kNSk7XHJcbiAgICAgICAgICAgIC8v5Y+W5paH5Lu25ZCN5ZCO57yAXHJcbiAgICAgICAgICAgIHZhciBmaWxlX25hbWUgPSBmaWxlc1swXVsnbmFtZSddO1xyXG4gICAgICAgICAgICB2YXIgbmFtZXMgPSBmaWxlX25hbWUuc3BsaXQoJy4nKTtcclxuICAgICAgICAgICAgdmFyIHN1ZmZpeCA9IG5hbWVzW25hbWVzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnc3VmZml4OicgKyBzdWZmaXgpO1xyXG4gICAgICAgICAgICByZW1vdGVQYXRoID0gcmVtb3RlUGF0aCArIG1kNSArIFwiLlwiICsgc3VmZml4O1xyXG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygncmVtb3RlUGF0aDonICsgcmVtb3RlUGF0aCk7XHJcblxyXG4gICAgICAgICAgICBjb3MudXBsb2FkRmlsZVdpdGhvdXRQcm8oc3VjY2Vzc0NhbGxCYWNrLCBlcnJvckNhbGxCYWNrLCByZW1vdGVQYXRoLCBmaWxlc1swXSwgMCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBlbHNlIHtcclxuICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fpgInmi6nkuIDkuKrmlofku7ZcIik7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8v6L+b5bqm5Zue6LCDXHJcbnZhciBwcm9ncmVzc0NhbGxCYWNrID0gZnVuY3Rpb24gKGN1cnIpIHtcclxuICAgIGNvbnNvbGUubG9nKCd1cGxvYWRpbmcuLi4gY3VyciBwcm9ncmVzcyBpcyAnICsgY3VycilcclxuICAgIC8vJChcIiNyZXN1bHRcIikudmFsKCd1cGxvYWRpbmcuLi4gY3VyciBwcm9ncmVzcyBpcyAnICsgY3Vycik7XHJcbn07XHJcblxyXG4vL+S4iuS8oOWbvuaWh1xyXG5mdW5jdGlvbiB1cGxvYWRBcnRpY2xlKCkge1xyXG4gICAgLy/otYTmupDlkI3np7BcclxuICAgIHZhciByZXNvdXJjZV90aXRsZSA9ICQoJyNyZXNvdXJjZV90aXRsZScpLnZhbCgpLnRyaW0oKTtcclxuICAgIGlmIChyZXNvdXJjZV90aXRsZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5ZCN56ew5LiN6IO95Li656m6IScpO1xyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvL+S4iuaetuaXtumXtFxyXG4gICAgdmFyIHN0YXJ0X3RpbWUgPSAkKCcjc3RhcnRfdGltZScpLnZhbCgpLnRyaW0oKTtcclxuICAgIGlmIChzdGFydF90aW1lLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfkuIrmnrbml7bpl7TkuI3og73kuLrnqbohJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciByZXNvdXJjZV9wcmljZSA9ICQoJyNyZXNvdXJjZV9wcmljZScpLnZhbCgpLnRyaW0oKTtcclxuXHJcbiAgICB2YXIgcmVzb3VyY2VfcGFja2FnZSA9ICcnO1xyXG4gICAgdmFyIHBhY2thZ2VfbmFtZSA9ICcnO1xyXG4gICAgdmFyIHBpZWNlX3ByaWNlID0gJyc7XHJcbiAgICB2YXIgcHJvZHVjdF9zdGF0ZSA9JycgO1xyXG4gICAgLy/nsbvlnovph5HpkrFcclxuICAgIGlmIChwYXlfdHlwZSAhPSAzKSB7XHJcbiAgICAgICAgaWYgKHBheV90eXBlID09IDIpIHtcclxuICAgICAgICAgICAgaWYgKHJlc291cmNlX3ByaWNlLmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+S7t+agvOS4jeiDveS4uuepuiEnKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmIChyZXNvdXJjZV9wcmljZSA8PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+S7t+agvOmcgOmrmOS6jjAuMDAhJyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcGFyYW1zWydwaWVjZV9wcmljZSddID0gJCgnI3Jlc291cmNlX3ByaWNlJykudmFsKCkudHJpbSgpICogMTAwO1xyXG4gICAgfVxyXG4gICAgZWxzZSB7XHJcbiAgICAgICAgcmVzb3VyY2VfcGFja2FnZSA9ICQoJyNyZXNvdXJjZV9wYWNrYWdlJykuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS52YWwoKTtcclxuICAgICAgICBpZiAocmVzb3VyY2VfcGFja2FnZSA9PSB1bmRlZmluZWQgfHwgcmVzb3VyY2VfcGFja2FnZS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+ivt+mAieaLqeS6p+WTgeWMhSEnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBwYWNrYWdlX25hbWUgPSAkKFwiI3Jlc291cmNlX3BhY2thZ2VcIikuZmluZChcIm9wdGlvbjpzZWxlY3RlZFwiKS50ZXh0KCkudHJpbSgpO1xyXG4gICAgICAgIHBhcmFtc1sncGllY2VfcHJpY2UnXSA9ICQoXCIjcmVzb3VyY2VfcGFja2FnZVwiKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLmF0dHIoXCJhYm91dFwiKTtcclxuICAgICAgICBwcm9kdWN0X3N0YXRlPSQoXCIjcmVzb3VyY2VfcGFja2FnZVwiKS5maW5kKFwib3B0aW9uOnNlbGVjdGVkXCIpLmF0dHIoXCJzdGF0ZVwiKTtcclxuXHJcblxyXG4gICAgICAgIC8vVE9ETzrmmK/lkKbljZXljZZcclxuICAgICAgICB2YXIgY2hlY2tlZFN0YXRlID0gJChcIiNjaGVja2JveC1pbWdcIikuYXR0cihcImNoZWNrZWQtc3RhdGVcIik7XHJcbiAgICAgICAgaWYgKGNoZWNrZWRTdGF0ZSA9PSBcInVuY2hlY2tlZFwiKSB7XHJcbiAgICAgICAgICAgIGlzX3NpbmdsZV9zYWxlID0gMDsvL+S4jeWNleWNllxyXG5cclxuICAgICAgICB9IGVsc2UgaWYgKGNoZWNrZWRTdGF0ZSA9PSBcImNoZWNrZWRcIikge1xyXG4gICAgICAgICAgICBpc19zaW5nbGVfc2FsZSA9IDE7Ly/ljZXljZZcclxuICAgICAgICAgICAgdmFyIHJlZyA9IC9eKCgwKXwoWzEtOV17MX1cXGQqKSkoXFwuXFxkezEsMn0pPyQvO1xyXG5cclxuICAgICAgICAgICAgdmFyIHNpbmdsZV9wcmljZSA9ICQoXCIjc2luZ2xlX3ByaWNlXCIpLnZhbCgpLnRyaW0oKTtcclxuXHJcbiAgICAgICAgICAgIGlmKHNpbmdsZV9wcmljZS5sZW5ndGg+MClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgaWYocmVnLnRlc3Qoc2luZ2xlX3ByaWNlKSlcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc2luZ2xlX3ByaWNlID09IDAgfHwgc2luZ2xlX3ByaWNlID09IDAuMCB8fCBzaW5nbGVfcHJpY2UgPT0gMC4wMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyB1dGlsLnNob3dFcnJvcignI3dpdGhkcmF3X2Ftb3VudC1lcnInLCAn5o+Q546w6YeR6aKd5LiN6IO95Li6MO+8gScsICcjd2l0aGRyYXdfYW1vdW50JywgdHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn6YeR6aKd5LiN6IO95Li6MCEnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwYXJhbXNbJ3BpZWNlX3ByaWNlJ10gPSBzaW5nbGVfcHJpY2UqMTAwO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCAn6K+36L6T5YWl5q2j56Gu55qE6YeR6aKd77yBJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn6K+36L6T5YWl5Y2V5Lu3IScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgIH1cclxuXHJcbiAgICB9XHJcblxyXG4gICAgLy/otYTmupDlsIHpnaJcclxuICAgIHZhciBwaWNfaW5wdXQgPSAkKCcjcmVzb3VyY2VfcGljJykudmFsKCk7XHJcbiAgICBpZiAocGljX2lucHV0Lmxlbmd0aCA9PSAwKSB7XHJcbiAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCflsIHpnaLkuI3og73kuLrnqbohJyk7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgfVxyXG5cclxuICAgIC8v6I635Y+W5Y6f55SfaHRtbOWGheWuuVxyXG4gICAgdmFyIHVlID0gVUUuZ2V0RWRpdG9yKCdjb250YWluZXInKTtcclxuICAgIHZhciBodG1sID0gdWUuZ2V0Q29udGVudCgpO1xyXG4gICAgaWYgKGh0bWwubGVuZ3RoID09IDApIHtcclxuICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+ivt+i+k+WFpeWbvuaWh+WGheWuuSEnKTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy/ojrflj5bmlofmnKxcclxuICAgIHZhciBjb250ZW50ID0gdWUuZ2V0UGxhaW5UeHQoKTtcclxuXHJcbiAgICBzaG93TG9hZGluZygpO1xyXG4gICAgLy8gY29uc29sZS5sb2cocmVzb3VyY2VfcHJpY2UrXCI+Pj5cIitwaWVjZV9wcmljZSk7XHJcblxyXG4gICAgLy/kuIrkvKAo55u05o6l6YCa6L+HanPkuIrkvKBjZG4pXHJcbiAgICB2YXIgZmlsZXMgPSAkKCcjcmVzb3VyY2VfcGljJykucHJvcCgnZmlsZXMnKTtcclxuICAgIC8vaWYgKCEkKCcjcXMnKS5sZW5ndGgpIHtcclxuICAgIC8vICAgICQoJ2JvZHknKS5hcHBlbmQoJzxvYmplY3QgaWQ9XCJxc1wiIHdpZHRoPVwiMFwiIGhlaWdodD1cIjBcIiB0eXBlPVwiYXBwbGljYXRpb24veC1zaG9ja3dhdmUtZmxhc2hcIiBkYXRhPVwic2RrL1NvbWV0aGluZ3Rlc3Quc3dmXCIgc3R5bGU9XCJ2aXNpYmlsaXR5OiB2aXNpYmxlO1wiPjwvb2JqZWN0PicpO1xyXG4gICAgLy99XHJcbiAgICAvL+iOt+WPluaWh+S7tueahE1ENeWAvFxyXG4gICAgYnJvd3Nlck1ENUZpbGUoZmlsZXNbMF0sIGZ1bmN0aW9uIChlcnIsIG1kNSkge1xyXG4gICAgICAgIC8v5Y+W5paH5Lu25ZCN5ZCO57yAXHJcbiAgICAgICAgdmFyIGZpbGVfbmFtZSA9IGZpbGVzWzBdWyduYW1lJ107XHJcbiAgICAgICAgdmFyIG5hbWVzID0gZmlsZV9uYW1lLnNwbGl0KCcuJyk7XHJcbiAgICAgICAgdmFyIHN1ZmZpeCA9IG5hbWVzW25hbWVzLmxlbmd0aCAtIDFdO1xyXG4gICAgICAgIHZhciByZW1vdGVQYXRoID0gZ2V0X2Nvc19pbWFnZV9wYXRoKCkgKyBtZDUgKyBcIi5cIiArIHN1ZmZpeDtcclxuICAgICAgICBjb3MudXBsb2FkRmlsZVdpdGhvdXRQcm8oZnVuY3Rpb24gKHJlc3VsdCkgLy/miJDlip/lm57osINcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vdmFyIGpzb25SZXN1bHQgPSAkLnBhcnNlSlNPTihyZXN1bHQpO1xyXG4gICAgICAgICAgICB2YXIgcGljX3VybCA9IHJlc3VsdC5kYXRhLmFjY2Vzc191cmw7XHJcblxyXG4gICAgICAgICAgICB2YXIgYWxsUGFyYW1zPXt9O1xyXG4gICAgICAgICAgICBwYXJhbXNbJ3RpdGxlJ10gPSByZXNvdXJjZV90aXRsZTtcclxuICAgICAgICAgICAgcGFyYW1zWydzdGFydF9hdCddID0gc3RhcnRfdGltZTtcclxuICAgICAgICAgICAgcGFyYW1zWydpbWdfdXJsJ10gPSBwaWNfdXJsO1xyXG4gICAgICAgICAgICBwYXJhbXNbJ2ltZ191cmxfY29tcHJlc3NlZCddID0gcGljX3VybDtcclxuICAgICAgICAgICAgcGFyYW1zWydwYXltZW50X3R5cGUnXSA9IHBheV90eXBlO1xyXG4gICAgICAgICAgICBwYXJhbXNbJ3Byb2R1Y3RfaWQnXSA9IHJlc291cmNlX3BhY2thZ2U7XHJcbiAgICAgICAgICAgIHBhcmFtc1sncHJvZHVjdF9uYW1lJ10gPSBwYWNrYWdlX25hbWU7XHJcbiAgICAgICAgICAgIHBhcmFtc1sncHJvZHVjdF9zdGF0ZSddID0gcHJvZHVjdF9zdGF0ZTtcclxuICAgICAgICAgICAgcGFyYW1zWydjb250ZW50J10gPSBjb250ZW50O1xyXG4gICAgICAgICAgICBwYXJhbXNbJ29yZ19jb250ZW50J10gPSBodG1sO1xyXG4gICAgICAgICAgICBhbGxQYXJhbXNbJ3BhcmFtcyddID0gcGFyYW1zO1xyXG4gICAgICAgICAgICBhbGxQYXJhbXNbJ2lzX3NpbmdsZV9zYWxlJ10gPSBpc19zaW5nbGVfc2FsZTtcclxuXHJcblxyXG4gICAgICAgICAgICAvL+aPkuaVsOaNrlxyXG4gICAgICAgICAgICAkLnBvc3QoXCIvYWRkYXJ0aWNsZVwiLCBhbGxQYXJhbXMsIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xyXG4gICAgICAgICAgICAgICAgICAgIElzX1NhdmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXQgPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5LiK5Lyg5oiQ5YqfIVwiLCBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9ICcvYXJ0aWNsZV9saXN0J1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfmt7vliqDliLDmnKzlnLDmnI3liqHlmajlpLHotKUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LiK5Lyg5aSx6LSlIVwiKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9LCBmdW5jdGlvbiAocmVzdWx0KSAgICAgLy/lpLHotKXlm57osINcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCfkuIrkvKDliLDohb7orq/kupHlpLHotKUnKTtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5LiK5Lyg5aSx6LSlIVwiKTtcclxuICAgICAgICAgICAgdXBsb2FkRXJyb3JTaG93KHJlc3VsdC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgIH0sIHJlbW90ZVBhdGgsIGZpbGVzWzBdLCAwKVxyXG4gICAgfSk7XHJcblxyXG5cclxufVxyXG5cclxuLy/osIPliLDmlrDlop7kuJPmoI9cclxuZnVuY3Rpb24gdG9BZGRQYWNrYWdlKCkge1xyXG4gICAgJC5hbGVydC54Y0NvbmZpcm0oJ+aCqOehruWumuimgeWOu+aWsOWinuS4k+agj+mhtemdouWQlz8nLCAnY29uZmlybScsIHtcclxuICAgICAgICBvbk9rOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gJy9wYWNrYWdlX2xpc3QnO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59XHJcblxyXG5cclxuIl19
