$(function(){manageVideo.init()});var manageVideo=function(){var e={};var a;function t(e){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("视频名称不能为空！");return false}if(fileId==null){baseUtils.show.redTip("请上传视频资源！");return false}if(is_edit){baseUtils.show.redTip("视频资源上传中！");return false}if($formCheck.emptyString(e.img_url)){baseUtils.show.redTip("请上传您的视频封面！");return false}if($formCheck.emptyString(e.start_at)){baseUtils.show.redTip("请填入您的视频上架时间！");return false}if(!$formCheck.checkTime(e.start_at)){baseUtils.show.redTip("视频上架时间错误");return false}if(uploadChannelType==1&&e.payment_type==2&&$formCheck.emptyString(e.piece_price)){baseUtils.show.redTip("您选择的付费形式为付费，请输入价格！");return false}if(uploadChannelType==1&&e.payment_type==2&&!$formCheck.checkNum(e.piece_price)){baseUtils.show.redTip("您的价格输入格式有误，请重新输入！");return false}if(uploadChannelType==1&&e.payment_type==2&&e.piece_price>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}return true}function r(e,a){showLoading();$.post(e,a,function(e){if(parseInt(e.code)===0){baseUtils.show.blueTip("保存成功");window.location.href=backURL}else{hideLoading();baseUtils.show.redTip(e.msg);submitLimt=false}})}e.init=function(){var e=GetQueryString("package_id");var a=$("#dateInput").val();$("#dateInput").on("change",function(e){a=$(this).val();console.log(currentDate);if(a>currentDate){$("#nextDay").html("上架当日")}else{$("#nextDay").html("今日")}i();console.log(a)});console.log(packageId);i();function i(){$.get("/check_goods_message_push/"+e+"/"+a,function(e){console.log(e);$("#valid_push").html(e.data.valid_push);if(e.data.has_push>=3){$("#fBtn1").attr("disabled",true);$("#has_push").html(3)}else{$("#has_push").html(e.data.has_push);$("#fBtn1").attr("disabled",false)}})}$(".completeBtn").click(function(){var e=$.trim($(".resName").val());var a=fileId;var i=videoGsize;var s=$.trim($("#Image1Url").val());var l=$.trim($("#Image4Url").val());var n=UE.getEditor("resource_desc");var o=n.getContent();var c=n.getPlainTxt();if(c.length==0){baseUtils.show.redTip("描述不能为空!");return false}var p=$.trim($(".resPrize").val())*100;$('input[name="aliveClass"]:checked').each(function(){classArray.push($(this).attr("id"))});console.log(classArray);var u=$.trim($("#dateInput").val());var d={title:e,img_url:s,patch_img_url:l,file_name:VideoName,descrb:c,org_content:o,piece_price:p,start_at:u,id:GetQueryString("id")||null};var h={public_video:a,public_size_text:i};var f=$("#serviceToggle :radio:checked").val();if(f){d.push_state=f}var m=resourceFree;if(m){d.payment_type=m}if(t(d)){var g={params:d,resource_type:resourceType,upload_channel_type:uploadChannelType,package_id:packageId,resource_params:h,package_name:packageName,roleParams:roleParams,category_type:classArray};r(golbalUrl,g)}else{return false}})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZVZpZGVvLmpzIl0sIm5hbWVzIjpbIiQiLCJtYW5hZ2VWaWRlbyIsImluaXQiLCJyZXNVcmwiLCJjaGVja1ZpZGVvRm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJ0aXRsZSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJmaWxlSWQiLCJpc19lZGl0IiwiaW1nX3VybCIsInN0YXJ0X2F0IiwiY2hlY2tUaW1lIiwidXBsb2FkQ2hhbm5lbFR5cGUiLCJwYXltZW50X3R5cGUiLCJwaWVjZV9wcmljZSIsImNoZWNrTnVtIiwibWF4SW5wdXRQcmljZSIsInN1Ym1pdEZvcm0iLCJ1cmwiLCJhbGxQYXJhbXMiLCJzaG93TG9hZGluZyIsInBvc3QiLCJkYXRhIiwicGFyc2VJbnQiLCJjb2RlIiwiYmx1ZVRpcCIsIndpbmRvdyIsImxvY2F0aW9uIiwiaHJlZiIsImJhY2tVUkwiLCJoaWRlTG9hZGluZyIsIm1zZyIsInN1Ym1pdExpbXQiLCJwX2lkIiwiR2V0UXVlcnlTdHJpbmciLCJzZWxlY3RUaW1lIiwidmFsIiwib24iLCJlIiwidGhpcyIsImNvbnNvbGUiLCJsb2ciLCJjdXJyZW50RGF0ZSIsImh0bWwiLCJwdXNoRnVuY3Rpb24iLCJwYWNrYWdlSWQiLCJnZXQiLCJ2YWxpZF9wdXNoIiwiaGFzX3B1c2giLCJhdHRyIiwiY2xpY2siLCJ0cmltIiwidmlkZW9GaWxlSWQiLCJ2aWRlb1NpemUiLCJ2aWRlb0dzaXplIiwiaW1hZ2UxVXJsIiwiaW1hZ2U0VXJsIiwidWUiLCJVRSIsImdldEVkaXRvciIsIm9yZ0NvbnRlbnQiLCJnZXRDb250ZW50IiwiZGVzY3JpYiIsImdldFBsYWluVHh0IiwibGVuZ3RoIiwicmVzUHJpemUiLCJlYWNoIiwiY2xhc3NBcnJheSIsInB1c2giLCJzdGFydEF0IiwicmVzSW5mbyIsInBhdGNoX2ltZ191cmwiLCJmaWxlX25hbWUiLCJWaWRlb05hbWUiLCJkZXNjcmIiLCJvcmdfY29udGVudCIsImlkIiwicmVzb3VyY2VQYXJhbXMiLCJwdWJsaWNfdmlkZW8iLCJwdWJsaWNfc2l6ZV90ZXh0IiwicHVzaFN0YXRlIiwicHVzaF9zdGF0ZSIsInJlc0ZyZWUiLCJyZXNvdXJjZUZyZWUiLCJwYXJhbXMiLCJyZXNvdXJjZV90eXBlIiwicmVzb3VyY2VUeXBlIiwidXBsb2FkX2NoYW5uZWxfdHlwZSIsInBhY2thZ2VfaWQiLCJyZXNvdXJjZV9wYXJhbXMiLCJwYWNrYWdlX25hbWUiLCJwYWNrYWdlTmFtZSIsInJvbGVQYXJhbXMiLCJjYXRlZ29yeV90eXBlIiwiZ29sYmFsVXJsIl0sIm1hcHBpbmdzIjoiQUFNQUEsRUFBRSxXQUVFQyxZQUFZQyxRQUdoQixJQUFJRCxhQUFjLFdBQ2QsR0FBSUEsS0FFSixJQUFJRSxFQUdKLFNBQVNDLEdBQWVDLEdBQ3BCLEdBQUlDLFdBQVdDLFlBQVlGLEVBQUtHLE9BQVEsQ0FDcENDLFVBQVVDLEtBQUtDLE9BQU8sWUFDdEIsT0FBTyxPQUVYLEdBQUlDLFFBQVEsS0FBTSxDQUNkSCxVQUFVQyxLQUFLQyxPQUFPLFdBQ3RCLE9BQU8sT0FFWCxHQUFJRSxRQUFTLENBQ1RKLFVBQVVDLEtBQUtDLE9BQU8sV0FDdEIsT0FBTyxPQUVYLEdBQUlMLFdBQVdDLFlBQVlGLEVBQUtTLFNBQVUsQ0FDdENMLFVBQVVDLEtBQUtDLE9BQU8sYUFDdEIsT0FBTyxPQU1YLEdBQUlMLFdBQVdDLFlBQVlGLEVBQUtVLFVBQVcsQ0FDdkNOLFVBQVVDLEtBQUtDLE9BQU8sZUFDdEIsT0FBTyxPQUVYLElBQUtMLFdBQVdVLFVBQVVYLEVBQUtVLFVBQVcsQ0FDdENOLFVBQVVDLEtBQUtDLE9BQU8sV0FDdEIsT0FBTyxPQUVYLEdBQUdNLG1CQUFtQixHQUFHWixFQUFLYSxjQUFjLEdBQUdaLFdBQVdDLFlBQVlGLEVBQUtjLGFBQWEsQ0FDcEZWLFVBQVVDLEtBQUtDLE9BQU8scUJBQ3RCLE9BQU8sT0FFWCxHQUFHTSxtQkFBbUIsR0FBR1osRUFBS2EsY0FBYyxJQUFJWixXQUFXYyxTQUFTZixFQUFLYyxh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QVUsQ0FDekIsR0FBSW5ELElBQ0FpRSxPQUFRZCxFQUNSZSxjQUFlQyxhQUNmQyxvQkFBcUIzRSxrQkFDckI0RSxXQUFZM0MsVUFDWjRDLGdCQUFpQlosRUFDakJhLGFBQWNDLFlBQ2RDLFdBQVlBLFdBQ1pDLGNBQWMxQixXQUVsQmxELEdBQVc2RSxVQUFVM0UsT0FDbEIsQ0FDSCxNQUFPLFVBS25CLE9BQU92QiIsImZpbGUiOiJtYW5hZ2VWaWRlby5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3JlYXRlZCBieSBqc2VyayBvbiAyMDE3LzMvMjMuXG4gKi9cbi8qKlxuICogQ3JlYXRlZCBieSBqc2VyayBvbiAyMDE3LzMvMjMuXG4gKi9cbiQoZnVuY3Rpb24gKCkge1xuXG4gICAgbWFuYWdlVmlkZW8uaW5pdCgpO1xuXG59KTtcbnZhciBtYW5hZ2VWaWRlbyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgbWFuYWdlVmlkZW8gPSB7fTtcblxuICAgIHZhciByZXNVcmw7XG5cbiAgICAvL+ajgOafpeinhumikeaPkOS6pOihqOWNlVxuICAgIGZ1bmN0aW9uIGNoZWNrVmlkZW9Gb3JtKGluZm8pIHtcbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby50aXRsZSkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuinhumikeWQjeensOS4jeiDveS4uuepuu+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZmlsZUlkPT1udWxsKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fkuIrkvKDop4bpopHotYTmupDvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzX2VkaXQpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuinhumikei1hOa6kOS4iuS8oOS4re+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLmltZ191cmwpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fkuIrkvKDmgqjnmoTop4bpopHlsIHpnaLvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgLy8gaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5wYXRjaF9pbWdfdXJsKSkge1xuICAgICAgICAvLyAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35LiK5Lyg5oKo55qE6KeG6aKR6LS054mH77yBXCIpO1xuICAgICAgICAvLyAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAvLyB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7floavlhaXmgqjnmoTop4bpopHkuIrmnrbml7bpl7TvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLnN0YXJ0X2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6KeG6aKR5LiK5p625pe26Ze06ZSZ6K+vXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHVwbG9hZENoYW5uZWxUeXBlPT0xJiZpbmZvLnBheW1lbnRfdHlwZT09MiYmJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnBpZWNlX3ByaWNlKSl7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmgqjpgInmi6nnmoTku5jotLnlvaLlvI/kuLrku5jotLnvvIzor7fovpPlhaXku7fmoLzvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYodXBsb2FkQ2hhbm5lbFR5cGU9PTEmJmluZm8ucGF5bWVudF90eXBlPT0yJiYhJGZvcm1DaGVjay5jaGVja051bShpbmZvLnBpZWNlX3ByaWNlKSl7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLmgqjnmoTku7fmoLzovpPlhaXmoLzlvI/mnInor6/vvIzor7fph43mlrDovpPlhaXvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYodXBsb2FkQ2hhbm5lbFR5cGU9PTEmJmluZm8ucGF5bWVudF90eXBlPT0yICYmIGluZm8ucGllY2VfcHJpY2UgPiBiYXNlVXRpbHMubWF4SW5wdXRQcmljZSAqIDEwMCl7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLku7fmoLzkuI3og73lpKfkuo4gXCIgKyBiYXNlVXRpbHMubWF4SW5wdXRQcmljZSArIFwiIOWFg1wiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvL+aPkOS6pOS/oeaBr1xuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0odXJsLCBhbGxQYXJhbXMpIHtcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgJC5wb3N0KHVybCwgYWxsUGFyYW1zLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgaWYgKHBhcnNlSW50KGRhdGEuY29kZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5L+d5a2Y5oiQ5YqfXCIpO1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ocmVmID0gYmFja1VSTDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2Uge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICBzdWJtaXRMaW10ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cblxuXG4gICAgbWFuYWdlVmlkZW8uaW5pdCA9IGZ1bmN0aW9uICgpIHtcblxuICAgICAgICAvL+aWsOeJiOa2iOaBr+aOqOmAgeaLieWPluaVsOaNrlxuICAgICAgICB2YXIgcF9pZCA9R2V0UXVlcnlTdHJpbmcoJ3BhY2thZ2VfaWQnKTtcbiAgICAgICAgdmFyIHNlbGVjdFRpbWUgPSAkKCcjZGF0ZUlucHV0JykudmFsKCk7XG4gICAgICAgIC8v55uR5o6n5pe26Ze05by556qX57uE5Lu2XG4gICAgICAgICQoJyNkYXRlSW5wdXQnKS5vbignY2hhbmdlJywgZnVuY3Rpb24oZSkge1xuICAgICAgICAgICAgc2VsZWN0VGltZSA9ICQodGhpcykudmFsKCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50RGF0ZSk7XG4gICAgICAgICAgICBpZihzZWxlY3RUaW1lPmN1cnJlbnREYXRlKXtcbiAgICAgICAgICAgICAgICAkKCcjbmV4dERheScpLmh0bWwoJ+S4iuaetuW9k+aXpScpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgJCgnI25leHREYXknKS5odG1sKCfku4rml6UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHB1c2hGdW5jdGlvbigpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coc2VsZWN0VGltZSk7XG4gICAgICAgIH0pO1xuICAgICAgICBjb25zb2xlLmxvZyhwYWNrYWdlSWQpO1xuICAgICAgICBwdXNoRnVuY3Rpb24oKTtcbiAgICAgICAgZnVuY3Rpb24gcHVzaEZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgJC5nZXQoJy9jaGVja19nb29kc19tZXNzYWdlX3B1c2gvJyArIHBfaWQgKyAnLycgKyBzZWxlY3RUaW1lLCBmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGRhdGEpO1xuICAgICAgICAgICAgICAgICQoJyN2YWxpZF9wdXNoJykuaHRtbChkYXRhLmRhdGEudmFsaWRfcHVzaCk7XG4gICAgICAgICAgICAgICAgaWYgKGRhdGEuZGF0YS5oYXNfcHVzaCA+PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICQoJyNmQnRuMScpLmF0dHIoJ2Rpc2FibGVkJywgdHJ1ZSk7XG4gICAgICAgICAgICAgICAgICAgICQoJyNoYXNfcHVzaCcpLmh0bWwoMyk7Ly/lhpnmrbvlt7Llj5Ez5p2hXG4gICAgICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgICAgICQoJyNoYXNfcHVzaCcpLmh0bWwoZGF0YS5kYXRhLmhhc19wdXNoKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2ZCdG4xJykuYXR0cignZGlzYWJsZWQnLCBmYWxzZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8g5o+Q5Lqk6KeG6aKR6KGo5Y2VXG5cbiAgICAgICAgJChcIi5jb21wbGV0ZUJ0blwiKS5jbGljayhmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIC8v6I635Y+W6KeG6aKR6KGo5Y2V5pWw5o2uXG4gICAgICAgICAgICAvL+inhumikeWQjeensFxuICAgICAgICAgICAgdmFyIHRpdGxlID0gJC50cmltKCQoXCIucmVzTmFtZVwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v6KeG6aKR54K55pKtaWRcbiAgICAgICAgICAgIHZhciB2aWRlb0ZpbGVJZCA9IGZpbGVJZDtcblxuICAgICAgICAgICAgLy/op4bpopHlpKflsI9cbiAgICAgICAgICAgIHZhciB2aWRlb1NpemU9dmlkZW9Hc2l6ZTtcblxuICAgICAgICAgICAgLy/op4bpopHlsIHpnaLlnLDlnYBcbiAgICAgICAgICAgIHZhciBpbWFnZTFVcmwgPSAkLnRyaW0oJChcIiNJbWFnZTFVcmxcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+inhumikei0tOeJh+WcsOWdgFxuICAgICAgICAgICAgdmFyIGltYWdlNFVybCA9ICQudHJpbSgkKFwiI0ltYWdlNFVybFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v6KeG6aKR5Y6f5aeL5YaF5a656K+m5oOFXG4gICAgICAgICAgICB2YXIgdWUgPSBVRS5nZXRFZGl0b3IoJ3Jlc291cmNlX2Rlc2MnKTtcbiAgICAgICAgICAgIHZhciBvcmdDb250ZW50ID0gdWUuZ2V0Q29udGVudCgpO1xuXG4gICAgICAgICAgICAvL+inhumikeWGheWuueaPj+i/sFxuICAgICAgICAgICAgdmFyIGRlc2NyaWIgPSB1ZS5nZXRQbGFpblR4dCgpO1xuICAgICAgICAgICAgaWYgKGRlc2NyaWIubGVuZ3RoID09IDApIHtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+aPj+i/sOS4jeiDveS4uuepuiEnKTtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG5cblxuXG4gICAgICAgICAgICAvL+S7mOi0ueS7t+agvFxuICAgICAgICAgICAgdmFyIHJlc1ByaXplID0gJC50cmltKCQoXCIucmVzUHJpemVcIikudmFsKCkpKjEwMDtcblxuICAgICAgICAgICAgLy/nm7Tmkq3pgInmi6nliIbnsbtcbiAgICAgICAgICAgICQoJ2lucHV0W25hbWU9XCJhbGl2ZUNsYXNzXCJdOmNoZWNrZWQnKS5lYWNoKGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgY2xhc3NBcnJheS5wdXNoKCQodGhpcykuYXR0cignaWQnKSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGNsYXNzQXJyYXkpO1xuXG4gICAgICAgICAgICAvL+S4iuaetuaXtumXtFxuICAgICAgICAgICAgdmFyIHN0YXJ0QXQgPSAkLnRyaW0oJChcIiNkYXRlSW5wdXRcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+inhumikeWNleWTgeS4iuS8oOS/oeaBr1xuICAgICAgICAgICAgdmFyIHJlc0luZm8gPSB7XG4gICAgICAgICAgICAgICAgLy8g6KeG6aKR5ZCN56ewXG4gICAgICAgICAgICAgICAgdGl0bGU6IHRpdGxlLFxuICAgICAgICAgICAgICAgIC8vICAg6KeG6aKR5bCB6Z2i5Zyw5Z2AXG4gICAgICAgICAgICAgICAgaW1nX3VybDogaW1hZ2UxVXJsLFxuICAgICAgICAgICAgICAgIC8vICAg6LS054mH5Zu+54mH5Zyw5Z2AXG4gICAgICAgICAgICAgICAgcGF0Y2hfaW1nX3VybDogaW1hZ2U0VXJsLFxuICAgICAgICAgICAgICAgIC8vLy/kupHngrnmkq3mlofku7ZpZFxuICAgICAgICAgICAgICAgIC8vZmlsZV9pZDp2aWRlb0ZpbGVJZCxcbiAgICAgICAgICAgICAgICAvLy8vIOinhumikeWkp+Wwj1xuICAgICAgICAgICAgICAgIC8vdmlkZW9fc2l6ZTp2aWRlb1NpemUsXG4gICAgICAgICAgICAgICAgLy/op4bpopHlkI3np7BcbiAgICAgICAgICAgICAgICBmaWxlX25hbWU6IFZpZGVvTmFtZSxcbiAgICAgICAgICAgICAgICAvL+inhumikeivpuaDhVxuICAgICAgICAgICAgICAgIGRlc2NyYjpkZXNjcmliLFxuICAgICAgICAgICAgICAgIC8v5Y6f5aeL5paH5pysXG4gICAgICAgICAgICAgICAgb3JnX2NvbnRlbnQ6b3JnQ29udGVudCxcbiAgICAgICAgICAgICAgICAvL+S7mOi0ueS7t+agvFxuICAgICAgICAgICAgICAgIHBpZWNlX3ByaWNlOiByZXNQcml6ZSxcbiAgICAgICAgICAgICAgICAvL+S4iuaetuaXtumXtFxuICAgICAgICAgICAgICAgIHN0YXJ0X2F0OiBzdGFydEF0LFxuICAgICAgICAgICAgICAgIC8vaWRcbiAgICAgICAgICAgICAgICBpZDogR2V0UXVlcnlTdHJpbmcoJ2lkJykgfHwgbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8v6KeG6aKR55u05pKt6aKd5aSW5L+h5oGvXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2VQYXJhbXM9e1xuICAgICAgICAgICAgICAgICAvL+S6keeCueaSreinhumikWlkXG4gICAgICAgICAgICAgICAgcHVibGljX3ZpZGVvOnZpZGVvRmlsZUlkLFxuICAgICAgICAgICAgICAgIC8v6KeG6aKR5aSn5bCPXG4gICAgICAgICAgICAgICAgcHVibGljX3NpemVfdGV4dDp2aWRlb1NpemVcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAvL+a2iOaBr+aOqOmAgVxuICAgICAgICAgICAgdmFyIHB1c2hTdGF0ZSA9ICQoJyNzZXJ2aWNlVG9nZ2xlIDpyYWRpbzpjaGVja2VkJykudmFsKCk7XG4gICAgICAgICAgICBpZihwdXNoU3RhdGUpey8v5aaC5p6c5pyJ5raI5oGv5o6o6YCB5p2D6ZmQXG4gICAgICAgICAgICAgICAgcmVzSW5mby5wdXNoX3N0YXRlID0gcHVzaFN0YXRlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy/mmK/lkKbku5jotLnvvIgx6KGo56S65YWN6LS577yMMuihqOekuuWNleeslO+8iVxuICAgICAgICAgICAgdmFyIHJlc0ZyZWUgPSByZXNvdXJjZUZyZWU7XG4gICAgICAgICAgICBpZihyZXNGcmVlKSB7XG4gICAgICAgICAgICAgICAgcmVzSW5mby5wYXltZW50X3R5cGUgPSByZXNGcmVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+iOt+WPluihqOWNleS4reeahOaVsOaNrlxuXG4gICAgICAgICAgICBpZiAoY2hlY2tWaWRlb0Zvcm0ocmVzSW5mbykpIHtcbiAgICAgICAgICAgICAgICB2YXIgYWxsUGFyYW1zID0ge1xuICAgICAgICAgICAgICAgICAgICBwYXJhbXM6IHJlc0luZm8sXG4gICAgICAgICAgICAgICAgICAgIHJlc291cmNlX3R5cGU6IHJlc291cmNlVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkX2NoYW5uZWxfdHlwZTogdXBsb2FkQ2hhbm5lbFR5cGUsXG4gICAgICAgICAgICAgICAgICAgIHBhY2thZ2VfaWQ6IHBhY2thZ2VJZCxcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfcGFyYW1zOiByZXNvdXJjZVBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgcGFja2FnZV9uYW1lOiBwYWNrYWdlTmFtZSxcbiAgICAgICAgICAgICAgICAgICAgcm9sZVBhcmFtczogcm9sZVBhcmFtcyxcbiAgICAgICAgICAgICAgICAgICAgY2F0ZWdvcnlfdHlwZTpjbGFzc0FycmF5XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBzdWJtaXRGb3JtKGdvbGJhbFVybCxhbGxQYXJhbXMpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuXG4gICAgcmV0dXJuIG1hbmFnZVZpZGVvO1xufSgpOyJdfQ==
