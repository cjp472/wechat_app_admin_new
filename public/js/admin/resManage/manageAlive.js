$(function(){manageAlive.init()});var manageAlive=function(){var e={};var a;function t(e){if($formCheck.emptyString(e.title)){baseUtils.show.redTip("直播名称不能为空！");return false}if($formCheck.emptyString(e.summary)){baseUtils.show.redTip("直播简介不能为空！");return false}if(e.alive_type==1&&fileId==null){baseUtils.show.redTip("请上传直播资源！");return false}if(is_edit){baseUtils.show.redTip("直播资源上传中！");return false}if($formCheck.emptyString(e.img_url)){baseUtils.show.redTip("请上传您的直播封面！");return false}if($formCheck.emptyString(e.start_at)){baseUtils.show.redTip("请填入您的直播上架时间！");return false}if($formCheck.emptyString(e.zb_start_at)){baseUtils.show.redTip("请填入您的直播开始时间！");return false}if($formCheck.emptyString(e.zb_stop_at)){baseUtils.show.redTip("请填入您的直播结束时间！");return false}if(!$formCheck.checkTime(e.start_at)){baseUtils.show.redTip("直播上架时间错误");return false}if(!$formCheck.checkTime(e.zb_start_at)){baseUtils.show.redTip("直播开始时间错误");return false}if(uploadChannelType==1&&e.payment_type==2&&$formCheck.emptyString(e.piece_price)){baseUtils.show.redTip("您选择的付费形式为付费，请输入价格！");return false}if(uploadChannelType==1&&e.payment_type==2&&!$formCheck.checkNum(e.piece_price)){baseUtils.show.redTip("您的价格输入格式有误，请重新输入！");return false}if(uploadChannelType==1&&e.payment_type==2&&e.piece_price>baseUtils.maxInputPrice*100){baseUtils.show.redTip("价格不能大于 "+baseUtils.maxInputPrice+" 元");return false}return true}function i(e,a){showLoading();$.ajax(e,{type:"POST",dataType:"json",data:a,success:function(e){hideLoading();if(parseInt(e.code)===0){var a=$("#_manageAlive").val();if(a==0){baseUtils.show.blueTip("创建成功，您可继续完成嘉宾（原讲师）设置");sessionStorage.setItem("inviteGuestAliveId",e.alive_id)}else{baseUtils.show.blueTip("保存成功")}setTimeout(function(){window.location.href=backURL},1500)}else{hideLoading();baseUtils.show.redTip(e.msg);submitLimt=false}},error:function(e,a,t){hideLoading();console.error(t);baseUtils.show.redTip("网络错误，请稍后再试！");submitLimt=false}})}classArray=[];e.init=function(){aliveTimeConfig("#zb_start_at");$(".completeBtn").click(function(){var e=$.trim($(".resName").val());var a=$.trim($("#aliveAbstract").val());var r=aliveT;var s=fileId;var l=$.trim($("#zb_start_at").val());var n=$("#_aliveDuration").val();var o=videoGsize;var p=$.trim($("#Image1Url").val());var c=$.trim($("#Image3Url").val());var u=UE.getEditor("resource_desc");var f=u.getContent();var m=u.getPlainTxt();if(m.length==0){baseUtils.show.redTip("描述不能为空!");return false}var h=$.trim($(".resPrize").val())*100;$('input[name="aliveClass"]:checked').each(function(){classArray.push($(this).attr("id"))});console.log(classArray);var _=aliveState;var d=$.trim($("#dateInput").val());var v={title:e,summary:a,alive_type:r,img_url:p,alive_img_url:c,file_name:VideoName,zb_start_at:l,zb_stop_at:n,descrb:m,org_content:f,piece_price:h,state:_,start_at:d,id:GetQueryString("id")||null};var b={public_video:s,public_size_text:o};if(resourceFree){v.payment_type=resourceFree}v.if_push=if_push;if(if_push==0||if_push==1){v.push_ahead=push_ahead}if(t(v)){var g={params:v,resource_type:resourceType,upload_channel_type:uploadChannelType,package_id:packageId,resource_params:b,package_name:packageName,category_type:classArray};i(golbalUrl,g);console.log(g)}else{return false}})};return e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1hbmFnZUFsaXZlLmpzIl0sIm5hbWVzIjpbIiQiLCJtYW5hZ2VBbGl2ZSIsImluaXQiLCJyZXNVcmwiLCJjaGVja0FsaXZlRm9ybSIsImluZm8iLCIkZm9ybUNoZWNrIiwiZW1wdHlTdHJpbmciLCJ0aXRsZSIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJzdW1tYXJ5IiwiYWxpdmVfdHlwZSIsImZpbGVJZCIsImlzX2VkaXQiLCJpbWdfdXJsIiwic3RhcnRfYXQiLCJ6Yl9zdGFydF9hdCIsInpiX3N0b3BfYXQiLCJjaGVja1RpbWUiLCJ1cGxvYWRDaGFubmVsVHlwZSIsInBheW1lbnRfdHlwZSIsInBpZWNlX3ByaWNlIiwiY2hlY2tOdW0iLCJtYXhJbnB1dFByaWNlIiwic3VibWl0Rm9ybSIsInVybCIsImFsbFBhcmFtcyIsInNob3dMb2FkaW5nIiwiYWpheCIsInR5cGUiLCJkYXRhVHlwZSIsImRhdGEiLCJzdWNjZXNzIiwiaGlkZUxvYWRpbmciLCJwYXJzZUludCIsImNvZGUiLCJwYWdlVHlwZSIsInZhbCIsImJsdWVUaXAiLCJzZXNzaW9uU3RvcmFnZSIsInNldEl0ZW0iLCJhbGl2ZV9pZCIsInNldFRpbWVvdXQiLCJ3aW5kb3ciLCJsb2NhdGlvbiIsImhyZWYiLCJiYWNrVVJMIiwibXNnIiwic3VibWl0TGltdCIsImVycm9yIiwieGhyIiwic3RhdHVzIiwiZXJyIiwiY29uc29sZSIsImNsYXNzQXJyYXkiLCJhbGl2ZVRpbWVDb25maWciLCJjbGljayIsInRyaW0iLCJhbGl2ZVR5cGUiLCJhbGl2ZVQiLCJBbGl2ZUZpbGVJZCIsInpiU3RhcnRBdCIsImFsaXZlRHVyYXRpb24iLCJBbGl2ZVNpemUiLCJ2aWRlb0dzaXplIiwiaW1hZ2UxVXJsIiwiaW1hZ2UzVXJsIiwidWUiLCJVRSIsImdldEVkaXRvciIsIm9yZ0NvbnRlbnQiLCJnZXRDb250ZW50IiwiZGVzY3JpYiIsImdldFBsYWluVHh0IiwibGVuZ3RoIiwicmVzUHJpemUiLCJlYWNoIiwicHVzaCIsInRoaXMiLCJhdHRyIiwibG9nIiwic3RhdGUiLCJhbGl2ZVN0YXRlIiwic3RhcnRBdCIsInJlc0luZm8iLCJhbGl2ZV9pbWdfdXJsIiwiZmlsZV9uYW1lIiwiVmlkZW9OYW1lIiwiZGVzY3JiIiwib3JnX2NvbnRlbnQiLCJpZCIsIkdldFF1ZXJ5U3RyaW5nIiwicmVzb3VyY2VQYXJhbXMiLCJwdWJsaWNfdmlkZW8iLCJwdWJsaWNfc2l6ZV90ZXh0IiwicmVzb3VyY2VGcmVlIiwiaWZfcHVzaCIsInB1c2hfYWhlYWQiLCJwYXJhbXMiLCJyZXNvdXJjZV90eXBlIiwicmVzb3VyY2VUeXBlIiwidXBsb2FkX2NoYW5uZWxfdHlwZSIsInBhY2thZ2VfaWQiLCJwYWNrYWdlSWQiLCJyZXNvdXJjZV9wYXJhbXMiLCJwYWNrYWdlX25hbWUiLCJwYWNrYWdlTmFtZSIsImNhdGVnb3J5X3R5cGUiLCJnb2xiYWxVcmwiXSwibWFwcGluZ3MiOiJBQUlBQSxFQUFFLFdBQ0VDLFlBQVlDLFFBRWhCLElBQUlELGFBQWMsV0FDZCxHQUFJQSxLQUVKLElBQUlFLEVBR0osU0FBU0MsR0FBZUMsR0FDcEIsR0FBSUMsV0FBV0MsWUFBWUYsRUFBS0csT0FBUSxDQUNwQ0MsVUFBVUMsS0FBS0MsT0FBTyxZQUN0QixPQUFPLE9BRVgsR0FBSUwsV0FBV0MsWUFBWUYsRUFBS08sU0FBVSxDQUN0Q0gsVUFBVUMsS0FBS0MsT0FBTyxZQUN0QixPQUFPLE9BRVgsR0FBSU4sRUFBS1EsWUFBWSxHQUFJQyxRQUFVLEtBQU8sQ0FDdENMLFVBQVVDLEtBQUtDLE9BQU8sV0FDdEIsT0FBTyxPQUVYLEdBQUlJLFFBQVMsQ0FDVE4sVUFBVUMsS0FBS0MsT0FBTyxXQUN0QixPQUFPLE9BRVgsR0FBSUwsV0FBV0MsWUFBWUYsRUFBS1csU0FBVSxDQUN0Q1AsVUFBVUMsS0FBS0MsT0FBTyxhQUN0QixPQUFPLE9BRVgsR0FBSUwsV0FBV0MsWUFBWUYsRUFBS1ksVUFBVyxDQUN2Q1IsVUFBVUMsS0FBS0MsT0FBTyxlQUN0QixPQUFPLE9BRVgs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QUFVckYsRUFBRTJELEtBQUszRCxFQUFFLGNBQWN1QyxNQUdyQyxJQUFJK0MsSUFFQTlFLE1BQU9BLEVBRVBJLFFBQVFBLEVBRVJDLFdBQVcrQyxFQUVYNUMsUUFBU21ELEVBRVRvQixjQUFlbkIsRUFFZm9CLFVBQVdDLFVBRVh2RSxZQUFZNkMsRUFFWjVDLFdBQVc2QyxFQUVYMEIsT0FBUWhCLEVBRVJpQixZQUFhbkIsRUFFYmpELFlBQWFzRCxFQUViTSxNQUFNQSxFQUVObEUsU0FBVW9FLEVBRVZPLEdBQUlDLGVBQWUsT0FBUyxLQUdoQyxJQUFJQyxJQUVBQyxhQUFjakMsRUFFZGtDLGlCQUFrQi9CLEVBR3RCLElBQUdnQyxhQUFjLENBQ2JYLEVBQVFoRSxhQUFlMkUsYUFJM0JYLEVBQVFZLFFBQVVBLE9BQ2xCLElBQUdBLFNBQVMsR0FBS0EsU0FBUyxFQUFFLENBQ3hCWixFQUFRYSxXQUFhQSxXQUl6QixHQUFJL0YsRUFBZWtGLEdBQVUsQ0FDekIsR0FBSTFELElBQ0F3RSxPQUFRZCxFQUNSZSxjQUFlQyxhQUNmQyxvQkFBcUJsRixrQkFDckJtRixXQUFZQyxVQUNaQyxnQkFBaUJaLEVBQ2pCYSxhQUFjQyxZQUNkQyxjQUFjckQsV0FFbEI5QixHQUFXb0YsVUFBV2xGLEVBQ3RCMkIsU0FBUTJCLElBQUl0RCxPQUNULENBQ0gsTUFBTyxVQUtuQixPQUFPM0IiLCJmaWxlIjoibWFuYWdlQWxpdmUuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkganNlcmsgb24gMjAxNy8zLzIzLlxuICovXG5cbiQoZnVuY3Rpb24gKCkge1xuICAgIG1hbmFnZUFsaXZlLmluaXQoKTtcbn0pO1xudmFyIG1hbmFnZUFsaXZlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBtYW5hZ2VBbGl2ZSA9IHt9O1xuXG4gICAgdmFyIHJlc1VybDtcblxuICAgIC8v5qOA5p+l55u05pKt5o+Q5Lqk6KGo5Y2VXG4gICAgZnVuY3Rpb24gY2hlY2tBbGl2ZUZvcm0oaW5mbykge1xuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnRpdGxlKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt5ZCN56ew5LiN6IO95Li656m677yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uc3VtbWFyeSkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSreeugOS7i+S4jeiDveS4uuepuu+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaW5mby5hbGl2ZV90eXBlPT0xJiYoZmlsZUlkID09IG51bGwpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fkuIrkvKDnm7Tmkq3otYTmupDvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGlzX2VkaXQpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuebtOaSrei1hOa6kOS4iuS8oOS4re+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLmltZ191cmwpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLor7fkuIrkvKDmgqjnmoTnm7Tmkq3lsIHpnaLvvIFcIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5zdGFydF9hdCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+Whq+WFpeaCqOeahOebtOaSreS4iuaetuaXtumXtO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoJGZvcm1DaGVjay5lbXB0eVN0cmluZyhpbmZvLnpiX3N0YXJ0X2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi6K+35aGr5YWl5oKo55qE55u05pKt5byA5aeL5pe26Ze077yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICgkZm9ybUNoZWNrLmVtcHR5U3RyaW5nKGluZm8uemJfc3RvcF9hdCkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuivt+Whq+WFpeaCqOeahOebtOaSree7k+adn+aXtumXtO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoISRmb3JtQ2hlY2suY2hlY2tUaW1lKGluZm8uc3RhcnRfYXQpKSB7XG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLnm7Tmkq3kuIrmnrbml7bpl7TplJnor69cIik7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCEkZm9ybUNoZWNrLmNoZWNrVGltZShpbmZvLnpiX3N0YXJ0X2F0KSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi55u05pKt5byA5aeL5pe26Ze06ZSZ6K+vXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmICh1cGxvYWRDaGFubmVsVHlwZT09MSAmJiBpbmZvLnBheW1lbnRfdHlwZSA9PSAyICYmICRmb3JtQ2hlY2suZW1wdHlTdHJpbmcoaW5mby5waWVjZV9wcmljZSkpIHtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuaCqOmAieaLqeeahOS7mOi0ueW9ouW8j+S4uuS7mOi0ue+8jOivt+i+k+WFpeS7t+agvO+8gVwiKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodXBsb2FkQ2hhbm5lbFR5cGU9PTEgJiYgaW5mby5wYXltZW50X3R5cGUgPT0gMiAmJiAhJGZvcm1DaGVjay5jaGVja051bShpbmZvLnBpZWNlX3ByaWNlKSkge1xuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKFwi5oKo55qE5Lu35qC86L6T5YWl5qC85byP5pyJ6K+v77yM6K+36YeN5paw6L6T5YWl77yBXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGlmKHVwbG9hZENoYW5uZWxUeXBlPT0gMSAmJiBpbmZvLnBheW1lbnRfdHlwZT09IDIgJiYgaW5mby5waWVjZV9wcmljZSA+IGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICogMTAwKXtcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcChcIuS7t+agvOS4jeiDveWkp+S6jiBcIiArIGJhc2VVdGlscy5tYXhJbnB1dFByaWNlICsgXCIg5YWDXCIpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgICAvL+aPkOS6pOS/oeaBr1xuICAgIGZ1bmN0aW9uIHN1Ym1pdEZvcm0odXJsLCBhbGxQYXJhbXMpIHtcbiAgICAgICAgc2hvd0xvYWRpbmcoKTtcbiAgICAgICAgJC5hamF4KHVybCwge1xuICAgICAgICAgICAgdHlwZTogJ1BPU1QnLFxuICAgICAgICAgICAgZGF0YVR5cGU6ICdqc29uJyxcbiAgICAgICAgICAgIGRhdGE6YWxsUGFyYW1zLFxuICAgICAgICAgICAgc3VjY2VzczpmdW5jdGlvbiAoZGF0YSkge1xuICAgICAgICAgICAgICAgIGhpZGVMb2FkaW5nKCk7XG4gICAgICAgICAgICAgICAgaWYgKHBhcnNlSW50KGRhdGEuY29kZSkgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgdmFyIHBhZ2VUeXBlID0gJChcIiNfbWFuYWdlQWxpdmVcIikudmFsKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwYWdlVHlwZSA9PSAwKSB7ICAgIC8v5paw5aKe55u05pKtXG4gICAgICAgICAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5ibHVlVGlwKFwi5Yib5bu65oiQ5Yqf77yM5oKo5Y+v57un57ut5a6M5oiQ5ZiJ5a6+77yI5Y6f6K6y5biI77yJ6K6+572uXCIpO1xuICAgICAgICAgICAgICAgICAgICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbShcImludml0ZUd1ZXN0QWxpdmVJZFwiLCBkYXRhLmFsaXZlX2lkKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LmJsdWVUaXAoXCLkv53lrZjmiJDlip9cIik7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGJhY2tVUkw7XG4gICAgICAgICAgICAgICAgICAgIH0sIDE1MDApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgaGlkZUxvYWRpbmcoKTtcbiAgICAgICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKGRhdGEubXNnKTtcbiAgICAgICAgICAgICAgICAgICAgc3VibWl0TGltdCA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBlcnJvcjogZnVuY3Rpb24oeGhyLHN0YXR1cyxlcnIpIHtcbiAgICAgICAgICAgICAgICBoaWRlTG9hZGluZygpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJ+e9kee7nOmUmeivr++8jOivt+eojeWQjuWGjeivle+8gScpO1xuICAgICAgICAgICAgICAgIHN1Ym1pdExpbXQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG5cbiAgICAvL+e9ruepuuWIhuexu+aVsOe7hFxuICAgIGNsYXNzQXJyYXk9W107XG5cbiAgICBtYW5hZ2VBbGl2ZS5pbml0ID0gZnVuY3Rpb24gKCkge1xuXG4gICAgICAgIGFsaXZlVGltZUNvbmZpZyhcIiN6Yl9zdGFydF9hdFwiKTtcbiAgICAgICAgLy8gYWxpdmVUaW1lQ29uZmlnKFwiI3piX3N0b3BfYXRcIik7XG5cbiAgICAgICAgLy8g5o+Q5Lqk55u05pKt6KGo5Y2VXG4gICAgICAgICQoXCIuY29tcGxldGVCdG5cIikuY2xpY2soZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAvL+iOt+WPluebtOaSreihqOWNleaVsOaNrlxuICAgICAgICAgICAgLy/nm7Tmkq3lkI3np7BcbiAgICAgICAgICAgIHZhciB0aXRsZSA9ICQudHJpbSgkKFwiLnJlc05hbWVcIikudmFsKCkpO1xuXG4gICAgICAgICAgICAvL+ebtOaSreeugOS7i1xuICAgICAgICAgICAgdmFyIHN1bW1hcnk9JC50cmltKCQoXCIjYWxpdmVBYnN0cmFjdFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt57G75Z6LXG4gICAgICAgICAgICB2YXIgYWxpdmVUeXBlPWFsaXZlVDtcblxuICAgICAgICAgICAgLy/nm7Tmkq3ngrnmkq1pZFxuICAgICAgICAgICAgdmFyIEFsaXZlRmlsZUlkID0gZmlsZUlkO1xuXG4gICAgICAgICAgICAvL+ebtOaSreW8gOWni+aXtumXtFxuICAgICAgICAgICAgdmFyIHpiU3RhcnRBdCA9ICQudHJpbSgkKFwiI3piX3N0YXJ0X2F0XCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3ml7bplb9cbiAgICAgICAgICAgIHZhciBhbGl2ZUR1cmF0aW9uID0gJChcIiNfYWxpdmVEdXJhdGlvblwiKS52YWwoKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3lpKflsI9cbiAgICAgICAgICAgIHZhciBBbGl2ZVNpemUgPSB2aWRlb0dzaXplO1xuXG4gICAgICAgICAgICAvL+ebtOaSreWwgemdouWcsOWdgFxuICAgICAgICAgICAgdmFyIGltYWdlMVVybCA9ICQudHJpbSgkKFwiI0ltYWdlMVVybFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt6LS054mH5Zyw5Z2AXG4gICAgICAgICAgICB2YXIgaW1hZ2UzVXJsID0gJC50cmltKCQoXCIjSW1hZ2UzVXJsXCIpLnZhbCgpKTtcblxuICAgICAgICAgICAgLy/nm7Tmkq3ljp/lp4vlhoXlrrnor6bmg4VcbiAgICAgICAgICAgIHZhciB1ZSA9IFVFLmdldEVkaXRvcigncmVzb3VyY2VfZGVzYycpO1xuICAgICAgICAgICAgdmFyIG9yZ0NvbnRlbnQgPSB1ZS5nZXRDb250ZW50KCk7XG5cbiAgICAgICAgICAgIC8v55u05pKt5YaF5a655o+P6L+wXG4gICAgICAgICAgICB2YXIgZGVzY3JpYiA9IHVlLmdldFBsYWluVHh0KCk7XG4gICAgICAgICAgICBpZiAoZGVzY3JpYi5sZW5ndGggPT0gMCkge1xuICAgICAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5o+P6L+w5LiN6IO95Li656m6IScpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuXG4gICAgICAgICAgICAvL+S7mOi0ueS7t+agvFxuICAgICAgICAgICAgdmFyIHJlc1ByaXplID0gJC50cmltKCQoXCIucmVzUHJpemVcIikudmFsKCkpICogMTAwO1xuXG4gICAgICAgICAgICAvL+ebtOaSremAieaLqeWIhuexu1xuICAgICAgICAgICAgJCgnaW5wdXRbbmFtZT1cImFsaXZlQ2xhc3NcIl06Y2hlY2tlZCcpLmVhY2goZnVuY3Rpb24oKXtcbiAgICAgICAgICAgICAgICBjbGFzc0FycmF5LnB1c2goJCh0aGlzKS5hdHRyKCdpZCcpKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgY29uc29sZS5sb2coY2xhc3NBcnJheSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt54q25oCBXG4gICAgICAgICAgICB2YXIgc3RhdGU9YWxpdmVTdGF0ZTtcbiAgICAgICAgICAgIC8v5LiK5p625pe26Ze0XG4gICAgICAgICAgICB2YXIgc3RhcnRBdCA9ICQudHJpbSgkKFwiI2RhdGVJbnB1dFwiKS52YWwoKSk7XG5cbiAgICAgICAgICAgIC8v55u05pKt5Y2V5ZOB5LiK5Lyg5L+h5oGvXG4gICAgICAgICAgICB2YXIgcmVzSW5mbyA9IHtcbiAgICAgICAgICAgICAgICAvLyDnm7Tmkq3lkI3np7BcbiAgICAgICAgICAgICAgICB0aXRsZTogdGl0bGUsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nroDku4tcbiAgICAgICAgICAgICAgICBzdW1tYXJ5OnN1bW1hcnksXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nsbvlnotcbiAgICAgICAgICAgICAgICBhbGl2ZV90eXBlOmFsaXZlVHlwZSxcbiAgICAgICAgICAgICAgICAvLyAgIOebtOaSreWwgemdouWcsOWdgFxuICAgICAgICAgICAgICAgIGltZ191cmw6IGltYWdlMVVybCxcbiAgICAgICAgICAgICAgICAvL+ebtOaSreWuo+S8oOWwgemdouWcsOWdgFxuICAgICAgICAgICAgICAgIGFsaXZlX2ltZ191cmw6IGltYWdlM1VybCxcbiAgICAgICAgICAgICAgICAvL+inhumikeWQjeensFxuICAgICAgICAgICAgICAgIGZpbGVfbmFtZTogVmlkZW9OYW1lLFxuICAgICAgICAgICAgICAgIC8v55u05pKt5byA5aeL5pe26Ze0XG4gICAgICAgICAgICAgICAgemJfc3RhcnRfYXQ6emJTdGFydEF0LFxuICAgICAgICAgICAgICAgIC8v55u05pKt57uT5p2f5pe26Ze0XG4gICAgICAgICAgICAgICAgemJfc3RvcF9hdDphbGl2ZUR1cmF0aW9uLFxuICAgICAgICAgICAgICAgIC8v55u05pKt6K+m5oOFXG4gICAgICAgICAgICAgICAgZGVzY3JiOiBkZXNjcmliLFxuICAgICAgICAgICAgICAgIC8v5Y6f5aeL5paH5pysXG4gICAgICAgICAgICAgICAgb3JnX2NvbnRlbnQ6IG9yZ0NvbnRlbnQsXG4gICAgICAgICAgICAgICAgLy/ku5jotLnku7fmoLxcbiAgICAgICAgICAgICAgICBwaWVjZV9wcmljZTogcmVzUHJpemUsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3nirbmgIFcbiAgICAgICAgICAgICAgICBzdGF0ZTpzdGF0ZSxcbiAgICAgICAgICAgICAgICAvL+S4iuaetuaXtumXtFxuICAgICAgICAgICAgICAgIHN0YXJ0X2F0OiBzdGFydEF0LFxuICAgICAgICAgICAgICAgIC8vaWRcbiAgICAgICAgICAgICAgICBpZDogR2V0UXVlcnlTdHJpbmcoJ2lkJykgfHwgbnVsbFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIC8v55u05pKt6aKd5aSW5L+h5oGvXG4gICAgICAgICAgICB2YXIgcmVzb3VyY2VQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgLy/kupHngrnmkq3nm7Tmkq1pZFxuICAgICAgICAgICAgICAgIHB1YmxpY192aWRlbzogQWxpdmVGaWxlSWQsXG4gICAgICAgICAgICAgICAgLy/nm7Tmkq3lpKflsI9cbiAgICAgICAgICAgICAgICBwdWJsaWNfc2l6ZV90ZXh0OiBBbGl2ZVNpemVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8v5piv5ZCm5LuY6LS577yIMeihqOekuuWFjei0ue+8jDLooajnpLrljZXnrJTvvIlcbiAgICAgICAgICAgIGlmKHJlc291cmNlRnJlZSkge1xuICAgICAgICAgICAgICAgIHJlc0luZm8ucGF5bWVudF90eXBlID0gcmVzb3VyY2VGcmVlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvL+ebtOaSreaPkOmGklxuICAgICAgICAgICAgcmVzSW5mby5pZl9wdXNoID0gaWZfcHVzaDtcbiAgICAgICAgICAgIGlmKGlmX3B1c2g9PTAgfHwgaWZfcHVzaD09MSl7XG4gICAgICAgICAgICAgICAgcmVzSW5mby5wdXNoX2FoZWFkID0gcHVzaF9haGVhZDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy/ojrflj5booajljZXkuK3nmoTmlbDmja5cbiAgICAgICAgICAgIGlmIChjaGVja0FsaXZlRm9ybShyZXNJbmZvKSkge1xuICAgICAgICAgICAgICAgIHZhciBhbGxQYXJhbXMgPSB7XG4gICAgICAgICAgICAgICAgICAgIHBhcmFtczogcmVzSW5mbyxcbiAgICAgICAgICAgICAgICAgICAgcmVzb3VyY2VfdHlwZTogcmVzb3VyY2VUeXBlLFxuICAgICAgICAgICAgICAgICAgICB1cGxvYWRfY2hhbm5lbF90eXBlOiB1cGxvYWRDaGFubmVsVHlwZSxcbiAgICAgICAgICAgICAgICAgICAgcGFja2FnZV9pZDogcGFja2FnZUlkLFxuICAgICAgICAgICAgICAgICAgICByZXNvdXJjZV9wYXJhbXM6IHJlc291cmNlUGFyYW1zLFxuICAgICAgICAgICAgICAgICAgICBwYWNrYWdlX25hbWU6IHBhY2thZ2VOYW1lLFxuICAgICAgICAgICAgICAgICAgICBjYXRlZ29yeV90eXBlOmNsYXNzQXJyYXlcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIHN1Ym1pdEZvcm0oZ29sYmFsVXJsLCBhbGxQYXJhbXMpO1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKGFsbFBhcmFtcyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICB9XG5cbiAgICByZXR1cm4gbWFuYWdlQWxpdmU7XG59KCk7XG4iXX0=
