var params={};$(document).ready(function(){init();var e="/admin/doChild/add";var s=false;if($("#userInfo").val()!=""){e="/admin/doChild/edit/"+$("#userInfo").val();s=true}$("#username").on("keyup",function(){if(s)return false;var e=$(this).val();if(e.length<6){$(".inputUsername").removeClass("active");$(".inputUsername").eq(0).addClass("active");$(".nameIcon").eq(0).addClass("hide");return false}else{$(".inputUsername").eq(0).removeClass("active")}if(!a(e)){$(".inputUsername").removeClass("active");$(".inputUsername").eq(1).addClass("active");$(".nameIcon").addClass("hide");return false}else{$(".inputUsername").eq(1).removeClass("active")}$.get("/checkUsername/"+e,function(e){if(e.code==0){$(".nameIcon").eq(0).removeClass("hide");$("#finish").attr("disabled",false);$(".inputUsername").eq(2).removeClass("active")}else{$(".nameIcon").eq(0).addClass("hide");$(".inputUsername").eq(2).addClass("active");$("#finish").attr("disabled",true)}})});$("#password").on("keyup",function(){if(!a($(this).val())||$(this).val().length<6){$(".passUsername").eq(0).addClass("active");$(".passIcon").addClass("hide")}else{$(".passUsername").eq(0).removeClass("active");$(".passIcon").removeClass("hide")}});$("#repassword").on("keyup",function(){if($(this).val()!=$("#password").val()){$(".passUsername").eq(1).addClass("active");$(".repassIcon").addClass("hide")}else{$(".passUsername").eq(1).removeClass("active");$(".repassIcon").removeClass("hide")}});function a(e){var s=/^[A-Za-z0-9]+$/;if(s.test(e)){return true}return false}var i=false;$("#finish").click(function(){var s=false;$(".mustSet").each(function(e,a){if($(this).val()==""||$(this).val()==null){baseUtils.show.redTip($(this).data("tips"));s=true;return false}});if(s){return false}if($("#username").val()<6){baseUtils.show.redTip("登录账户名称必须大于6位")}var n=$("#password").val();if(n<6){baseUtils.show.redTip("密码长度不够");return false}if(!a(n)){baseUtils.show.redTip("密码应为6-16位字符,可包含数字、字母(区分大小写)")}if($("#password").val()!=$("#repassword").val()){baseUtils.show.redTip("两次输入的密码不一致");return false}if($("input:checkbox:checked").length==0){baseUtils.show.redTip("亲,请至少选择一项权限哦");return false}var r={};r["role_name"]=$("#role_name").val();r["phone"]=$("#phone").val();r["username"]=$("#username").val();r["password"]=$("#password").val();r["repassword"]=$("#repassword").val();var t={};$("input:checkbox").each(function(){t[$(this).attr("id")]=$(this).is(":checked")?1:0});r["privilege"]=t;if(i){return false}i=true;$.post(e,{params:r},function(e){if(e.code==0){baseUtils.show.blueTip("设置成功",function(){window.location.href="/admin/child"})}else{baseUtils.show.redTip("设置失败");i=false}})});$(".setTopPri").on("click",function(){var e=$(this).parent(".checkArea").siblings(".checkArea").children("input");if($(this).siblings("input").is(":checked")){e.prop("checked",false)}else{e.prop("checked",true)}});$(".setChildPri").on("click",function(){var e=$(this).parent(".setChildPriBox").siblings(".checkArea");var s=$(this).parent(".setChildPriBox").siblings(".setChildPriBox");if(!$(this).siblings("input").is(":checked")){e.eq(0).children("input").prop("checked",true)}if(!s.children("input").is(":checked")&&$(this).siblings("input").is(":checked")){e.eq(0).children("input").prop("checked",false)}})});function init(){}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFkbWluL2FkZEFkbWluVXNlci5qcyJdLCJuYW1lcyI6WyJwYXJhbXMiLCIkIiwiZG9jdW1lbnQiLCJyZWFkeSIsImluaXQiLCJzdWJVcmwiLCJzZXRGbGFnIiwidmFsIiwib24iLCJ1c2VybmFtZSIsInRoaXMiLCJsZW5ndGgiLCJyZW1vdmVDbGFzcyIsImVxIiwiYWRkQ2xhc3MiLCJjaGVja1Bhc3MiLCJnZXQiLCJkYXRhIiwiY29kZSIsImF0dHIiLCJ0aGVPYmoiLCJyZWciLCJ0ZXN0Iiwic3ViRmxhZyIsImNsaWNrIiwibXVzdEZsYWciLCJlYWNoIiwiaW5kZXgiLCJlbCIsImJhc2VVdGlscyIsInNob3ciLCJyZWRUaXAiLCJwYXNzd29yZCIsInBhcmFtIiwicHJpSWQiLCJpcyIsInBvc3QiLCJibHVlVGlwIiwid2luZG93IiwibG9jYXRpb24iLCJocmVmIiwiZWxzIiwicGFyZW50Iiwic2libGluZ3MiLCJjaGlsZHJlbiIsInByb3AiLCJjaGlsZEVscyJdLCJtYXBwaW5ncyI6IkFBR0EsR0FBSUEsVUFDSkMsR0FBRUMsVUFBVUMsTUFBTSxXQUVkQyxNQUVBLElBQUlDLEdBQVMsb0JBRWIsSUFBSUMsR0FBVSxLQUNkLElBQUdMLEVBQUUsYUFBYU0sT0FBTyxHQUFHLENBQ3hCRixFQUFTLHVCQUF1QkosRUFBRSxhQUFhTSxLQUMvQ0QsR0FBVSxLQUlkTCxFQUFFLGFBQWFPLEdBQUcsUUFBUSxXQUV0QixHQUFHRixFQUFRLE1BQU8sTUFDbEIsSUFBSUcsR0FBU1IsRUFBRVMsTUFBTUgsS0FDckIsSUFBR0UsRUFBU0UsT0FBTyxFQUFFLENBQ2pCVixFQUFFLGtCQUFrQlcsWUFBWSxTQUNoQ1gsR0FBRSxrQkFBa0JZLEdBQUcsR0FBR0MsU0FBUyxTQUNuQ2IsR0FBRSxhQUFhWSxHQUFHLEdBQUdDLFNBQVMsT0FFOUIsT0FBTyxXQUNMLENBQ0ZiLEVBQUUsa0JBQWtCWSxHQUFHLEdBQUdELFlBQVksVUFFMUMsSUFBSUcsRUFBVU4sR0FBVSxDQUNwQlIsRUFB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LEVBQVUsSUFDVnRCLEdBQUVtQyxLQUFLL0IsR0FBUUwsT0FBU2lDLEdBQU8sU0FBU2hCLEdBRXBDLEdBQUdBLEVBQUtDLE1BQU0sRUFDZCxDQUNJVyxVQUFVQyxLQUFLTyxRQUFRLE9BQU8sV0FFMUJDLE9BQU9DLFNBQVNDLEtBQUsscUJBSTdCLENBQ0lYLFVBQVVDLEtBQUtDLE9BQU8sT0FDdEJSLEdBQVEsVUFLcEJ0QixHQUFFLGNBQWNPLEdBQUcsUUFBUSxXQUN2QixHQUFJaUMsR0FBTXhDLEVBQUVTLE1BQU1nQyxPQUFPLGNBQWNDLFNBQVMsY0FBY0MsU0FBUyxRQUN2RSxJQUFHM0MsRUFBRVMsTUFBTWlDLFNBQVMsU0FBU1IsR0FBRyxZQUFZLENBQ3hDTSxFQUFJSSxLQUFLLFVBQVUsV0FDakIsQ0FDRkosRUFBSUksS0FBSyxVQUFVLFFBSTNCNUMsR0FBRSxnQkFBZ0JPLEdBQUcsUUFBUSxXQUN6QixHQUFJaUMsR0FBTXhDLEVBQUVTLE1BQU1nQyxPQUFPLG1CQUFtQkMsU0FBUyxhQUNyRCxJQUFJRyxHQUFXN0MsRUFBRVMsTUFBTWdDLE9BQU8sbUJBQW1CQyxTQUFTLGtCQUMxRCxLQUFJMUMsRUFBRVMsTUFBTWlDLFNBQVMsU0FBU1IsR0FBRyxZQUFZLENBQ3pDTSxFQUFJNUIsR0FBRyxHQUFHK0IsU0FBUyxTQUFTQyxLQUFLLFVBQVUsTUFFL0MsSUFBSUMsRUFBU0YsU0FBUyxTQUFTVCxHQUFHLGFBQWFsQyxFQUFFUyxNQUFNaUMsU0FBUyxTQUFTUixHQUFHLFlBQVksQ0FDcEZNLEVBQUk1QixHQUFHLEdBQUcrQixTQUFTLFNBQVNDLEtBQUssVUFBVSxXQU92RCxTQUFTekMiLCJmaWxlIjoiYWRtaW4vYWRkQWRtaW5Vc2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENyZWF0ZWQgYnkgU3R1cGhpbiBvbiAyMDE2LzEyLzE2LlxyXG4gKi9cclxudmFyIHBhcmFtcz17fTtcclxuJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24oKVxyXG57XHJcbiAgICBpbml0KCk7XHJcbiAgICAvL+aWsOWini/kv67mlLnvvIzmoLnmja7mlrnlvI/kv67mlLnmj5DkuqTnmoR1cmxcclxuICAgIHZhciBzdWJVcmwgPSAnL2FkbWluL2RvQ2hpbGQvYWRkJztcclxuICAgIC8v5aaC5p6c5piv57yW6L6R6aG16Z2i77yM6K6+5Li6dHJ1Ze+8jOS4jei/m+ihjOeUqOaIt+WQjemHjeWkjemqjOivgVxyXG4gICAgdmFyIHNldEZsYWcgPSBmYWxzZTtcclxuICAgIGlmKCQoJyN1c2VySW5mbycpLnZhbCgpIT0nJyl7XHJcbiAgICAgICAgc3ViVXJsID0gJy9hZG1pbi9kb0NoaWxkL2VkaXQvJyskKCcjdXNlckluZm8nKS52YWwoKTtcclxuICAgICAgICBzZXRGbGFnID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICAvL+ajgOa1i+i0puWPt+WQiOazleaAp1xyXG4gICAgJChcIiN1c2VybmFtZVwiKS5vbigna2V5dXAnLGZ1bmN0aW9uKClcclxuICAgIHtcclxuICAgICAgICBpZihzZXRGbGFnKXJldHVybiBmYWxzZTtcclxuICAgICAgICB2YXIgdXNlcm5hbWU9JCh0aGlzKS52YWwoKTtcclxuICAgICAgICBpZih1c2VybmFtZS5sZW5ndGg8Nil7XHJcbiAgICAgICAgICAgICQoJy5pbnB1dFVzZXJuYW1lJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKCcuaW5wdXRVc2VybmFtZScpLmVxKDApLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJChcIi5uYW1lSWNvblwiKS5lcSgwKS5hZGRDbGFzcyhcImhpZGVcIik7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAkKCcuaW5wdXRVc2VybmFtZScpLmVxKDApLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoIWNoZWNrUGFzcyh1c2VybmFtZSkpe1xyXG4gICAgICAgICAgICAkKCcuaW5wdXRVc2VybmFtZScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJCgnLmlucHV0VXNlcm5hbWUnKS5lcSgxKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICQoXCIubmFtZUljb25cIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAkKCcuaW5wdXRVc2VybmFtZScpLmVxKDEpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgJC5nZXQoXCIvY2hlY2tVc2VybmFtZS9cIit1c2VybmFtZSxmdW5jdGlvbihkYXRhKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaWYoZGF0YS5jb2RlPT0wKVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAkKFwiLm5hbWVJY29uXCIpLmVxKDApLnJlbW92ZUNsYXNzKFwiaGlkZVwiKTtcclxuICAgICAgICAgICAgICAgICQoXCIjZmluaXNoXCIpLmF0dHIoXCJkaXNhYmxlZFwiLGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICQoJy5pbnB1dFVzZXJuYW1lJykuZXEoMikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2VcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgJChcIi5uYW1lSWNvblwiKS5lcSgwKS5hZGRDbGFzcyhcImhpZGVcIik7XHJcbiAgICAgICAgICAgICAgICAkKCcuaW5wdXRVc2VybmFtZScpLmVxKDIpLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgICQoXCIjZmluaXNoXCIpLmF0dHIoXCJkaXNhYmxlZFwiLHRydWUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL+ajgOa1i+WvhueggeWQiOazleaApy5cclxuXHJcbiAgICAkKCcjcGFzc3dvcmQnKS5vbigna2V5dXAnLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYgKCFjaGVja1Bhc3MoJCh0aGlzKS52YWwoKSl8fCQodGhpcykudmFsKCkubGVuZ3RoPDYpIHtcclxuICAgICAgICAgICAgJCgnLnBhc3NVc2VybmFtZScpLmVxKDApLmFkZENsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJChcIi5wYXNzSWNvblwiKS5hZGRDbGFzcyhcImhpZGVcIik7XHJcblxyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgJCgnLnBhc3NVc2VybmFtZScpLmVxKDApLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJChcIi5wYXNzSWNvblwiKS5yZW1vdmVDbGFzcyhcImhpZGVcIik7XHJcblxyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgJCgnI3JlcGFzc3dvcmQnKS5vbigna2V5dXAnLGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgaWYoJCh0aGlzKS52YWwoKSE9JCgnI3Bhc3N3b3JkJykudmFsKCkpe1xyXG4gICAgICAgICAgICAkKCcucGFzc1VzZXJuYW1lJykuZXEoMSkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAkKFwiLnJlcGFzc0ljb25cIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xyXG4gICAgICAgIH1lbHNlIHtcclxuICAgICAgICAgICAgJCgnLnBhc3NVc2VybmFtZScpLmVxKDEpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgJChcIi5yZXBhc3NJY29uXCIpLnJlbW92ZUNsYXNzKFwiaGlkZVwiKTtcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICAvL+mqjOivgeWvhueggeWtl+espiAg5a2X5q+N5oiW5pWw5a2XXHJcbiAgICBmdW5jdGlvbiBjaGVja1Bhc3ModGhlT2JqKSB7XHJcbiAgICAgICAgdmFyIHJlZyA9IC9eW0EtWmEtejAtOV0rJC87XHJcbiAgICAgICAgaWYgKHJlZy50ZXN0KHRoZU9iaikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvL+aWsOWinui0puaIt1xyXG4gICAgdmFyIHN1YkZsYWcgPSBmYWxzZTtcclxuICAgICQoXCIjZmluaXNoXCIpLmNsaWNrKGZ1bmN0aW9uKClcclxuICAgIHtcclxuXHJcbiAgICAgICAgLy/lv4XloavpobnliKTmlq1cclxuICAgICAgICB2YXIgbXVzdEZsYWcgPSBmYWxzZTtcclxuICAgICAgICAkKCcubXVzdFNldCcpLmVhY2goZnVuY3Rpb24oaW5kZXgsZWwpe1xyXG4gICAgICAgICAgICBpZigkKHRoaXMpLnZhbCgpPT0nJ3x8JCh0aGlzKS52YWwoKT09bnVsbCl7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoJCh0aGlzKS5kYXRhKCd0aXBzJykpO1xyXG4gICAgICAgICAgICAgICAgbXVzdEZsYWc9dHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGlmKG11c3RGbGFnKXtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZigkKCcjdXNlcm5hbWUnKS52YWwoKTw2KXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfnmbvlvZXotKbmiLflkI3np7Dlv4XpobvlpKfkuo425L2NJyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB2YXIgcGFzc3dvcmQgPSAkKCcjcGFzc3dvcmQnKS52YWwoKTtcclxuICAgICAgICBpZihwYXNzd29yZDw2KXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCflr4bnoIHplb/luqbkuI3lpJ8nKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighY2hlY2tQYXNzKHBhc3N3b3JkKSl7XHJcbiAgICAgICAgICAgIGJhc2VVdGlscy5zaG93LnJlZFRpcCgn5a+G56CB5bqU5Li6Ni0xNuS9jeWtl+espizlj6/ljIXlkKvmlbDlrZfjgIHlrZfmr40o5Yy65YiG5aSn5bCP5YaZKScpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCQoJyNwYXNzd29yZCcpLnZhbCgpIT0kKCcjcmVwYXNzd29yZCcpLnZhbCgpKXtcclxuICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cucmVkVGlwKCfkuKTmrKHovpPlhaXnmoTlr4bnoIHkuI3kuIDoh7QnKTtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/msqHpgInmi6nmnYPpmZBcclxuICAgICAgICBpZigkKFwiaW5wdXQ6Y2hlY2tib3g6Y2hlY2tlZFwiKS5sZW5ndGg9PTApXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLkurIs6K+36Iez5bCR6YCJ5oup5LiA6aG55p2D6ZmQ5ZOmXCIpO1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+aPkOS6pOaVsOaNrlxyXG4gICAgICAgIHZhciBwYXJhbSA9IHt9O1xyXG5cclxuICAgICAgICBwYXJhbVtcInJvbGVfbmFtZVwiXT0kKCcjcm9sZV9uYW1lJykudmFsKCk7XHJcbiAgICAgICAgcGFyYW1bXCJwaG9uZVwiXT0kKCcjcGhvbmUnKS52YWwoKTtcclxuICAgICAgICBwYXJhbVtcInVzZXJuYW1lXCJdPSQoJyN1c2VybmFtZScpLnZhbCgpO1xyXG4gICAgICAgIHBhcmFtW1wicGFzc3dvcmRcIl09JCgnI3Bhc3N3b3JkJykudmFsKCk7XHJcbiAgICAgICAgcGFyYW1bXCJyZXBhc3N3b3JkXCJdPSQoJyNyZXBhc3N3b3JkJykudmFsKCk7XHJcblxyXG5cclxuICAgICAgICB2YXIgcHJpSWQgPSB7fTtcclxuICAgICAgICAkKCdpbnB1dDpjaGVja2JveCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgICAgICBwcmlJZFskKHRoaXMpLmF0dHIoJ2lkJyldID0gJCh0aGlzKS5pcygnOmNoZWNrZWQnKT8xOjA7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcGFyYW1bJ3ByaXZpbGVnZSddID0gcHJpSWQ7XHJcblxyXG4gICAgICAgIC8v6Ziy5q2i6YeN5aSN54K55Ye7XHJcbiAgICAgICAgaWYoc3ViRmxhZyl7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgc3ViRmxhZyA9IHRydWU7XHJcbiAgICAgICAgJC5wb3N0KHN1YlVybCx7XCJwYXJhbXNcIjpwYXJhbX0sZnVuY3Rpb24oZGF0YSlcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGlmKGRhdGEuY29kZT09MClcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgYmFzZVV0aWxzLnNob3cuYmx1ZVRpcChcIuiuvue9ruaIkOWKn1wiLGZ1bmN0aW9uKClcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZj1cIi9hZG1pbi9jaGlsZFwiO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZVxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBiYXNlVXRpbHMuc2hvdy5yZWRUaXAoXCLorr7nva7lpLHotKVcIik7XHJcbiAgICAgICAgICAgICAgICBzdWJGbGFnPWZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8v6aG257qn5p2D6ZmQ5byA5YWzXHJcbiAgICAkKCcuc2V0VG9wUHJpJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBlbHMgPSAkKHRoaXMpLnBhcmVudCgnLmNoZWNrQXJlYScpLnNpYmxpbmdzKCcuY2hlY2tBcmVhJykuY2hpbGRyZW4oJ2lucHV0Jyk7XHJcbiAgICAgICAgaWYoJCh0aGlzKS5zaWJsaW5ncygnaW5wdXQnKS5pcygnOmNoZWNrZWQnKSl7XHJcbiAgICAgICAgICAgIGVscy5wcm9wKCdjaGVja2VkJyxmYWxzZSk7XHJcbiAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICBlbHMucHJvcCgnY2hlY2tlZCcsdHJ1ZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfSk7XHJcbiAgICAvL+S6jOe6p+adg+mZkOiuvue9ruaXtuWIpOaWreaYr+S4jeaYr+S8muW9seWTjemhtue6p1xyXG4gICAgJCgnLnNldENoaWxkUHJpJykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgIHZhciBlbHMgPSAkKHRoaXMpLnBhcmVudCgnLnNldENoaWxkUHJpQm94Jykuc2libGluZ3MoJy5jaGVja0FyZWEnKTtcclxuICAgICAgICB2YXIgY2hpbGRFbHMgPSAkKHRoaXMpLnBhcmVudCgnLnNldENoaWxkUHJpQm94Jykuc2libGluZ3MoJy5zZXRDaGlsZFByaUJveCcpO1xyXG4gICAgICAgIGlmKCEkKHRoaXMpLnNpYmxpbmdzKCdpbnB1dCcpLmlzKCc6Y2hlY2tlZCcpKXtcclxuICAgICAgICAgICAgZWxzLmVxKDApLmNoaWxkcmVuKCdpbnB1dCcpLnByb3AoJ2NoZWNrZWQnLHRydWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZighY2hpbGRFbHMuY2hpbGRyZW4oJ2lucHV0JykuaXMoJzpjaGVja2VkJykmJiQodGhpcykuc2libGluZ3MoJ2lucHV0JykuaXMoJzpjaGVja2VkJykpe1xyXG4gICAgICAgICAgICBlbHMuZXEoMCkuY2hpbGRyZW4oJ2lucHV0JykucHJvcCgnY2hlY2tlZCcsZmFsc2UpO1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG59KTtcclxuXHJcblxyXG4vL+WIneWni+WMllxyXG5mdW5jdGlvbiBpbml0KClcclxue1xyXG4gICAgLy8gIENvbnRlbnTljLrln5/lsI/moIfpophcclxuICAgIC8vc2hvd0NvbnRlbnRUaXRsZSgpO1xyXG4gICAgLy8gaWYgKGlzX2h1aWR1ID09IDEpIHtcclxuICAgIC8vICAgICBhcHBlbmRDb250ZW50SGVhZGVyKFwi6LSm5oi35LiA6KeIXCIsIFwiL2FjY291bnR2aWV3XCIsIGZhbHNlKTtcclxuICAgIC8vIH1cclxuICAgIC8vIGFwcGVuZENvbnRlbnRIZWFkZXIoXCLotKblj7fnrqHnkIZcIiwgXCIvYWNjb3VudG1hbmFnZVwiLCB0cnVlKTtcclxuICAgIC8vIGFwcGVuZENvbnRlbnRIZWFkZXIoXCLmjqXlhaXphY3nva5cIiwgXCIvaDVzZXR0aW5nXCIsIGZhbHNlKTtcclxuICAgIC8vIGFwcGVuZENvbnRlbnRIZWFkZXIoXCLlsI/nqIvluo/orr7nva5cIiwgXCIvc21hbGxwcm9ncmFtc2V0dGluZ1wiLCBmYWxzZSk7XHJcbn1cclxuXHJcbiJdfQ==
